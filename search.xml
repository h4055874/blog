<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>åˆ©ç”¨HeyUIåœ¨mdæ–‡ä»¶ä¸­åˆ¶ä½œçš„ä¸€ä¸ªå°åŠŸèƒ½</title>
    <url>/blog/Other/Other_id_02.html</url>
    <content><![CDATA[<p>å¯ä»¥å…ˆçœ‹ä¸‹æ•ˆæœ<a href="https://www.onlyyu.cn/notes/" target="_blank" rel="noopener">è·³è½¬</a></p>
<a id="more"></a>

<h3 id="é¡µé¢æ¨¡ç‰ˆæ ·å¼"><a href="#é¡µé¢æ¨¡ç‰ˆæ ·å¼" class="headerlink" title="é¡µé¢æ¨¡ç‰ˆæ ·å¼"></a>é¡µé¢æ¨¡ç‰ˆæ ·å¼</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"a1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>éšå ‚ç¬”è®°:<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"suitang1"</span> <span class="attr">class</span>=<span class="string">"suitang1"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"h-btn h-btn-blue"</span>&gt;</span>ç‚¹æˆ‘å¯ä»¥å±•å¼€å“¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"suitang2"</span> <span class="attr">class</span>=<span class="string">"suitang2"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"h-btn h-btn-primary"</span>&gt;</span>è®°å¾—ç‚¹æˆ‘æ”¶èµ·å“¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">"suitang3"</span> <span class="attr">id</span>=<span class="string">"suitang3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€01ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/classroom/å›½é™…åŒ–è¯­è¨€æ“ä½œ.html"</span>&gt;</span>å›½é™…åŒ–è¯­è¨€æ“ä½œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€02ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/classroom/Vueä¸­çš„è‡ªå®šä¹‰è¿‡æ»¤å™¨.html"</span>&gt;</span>Vueè‡ªå®šä¹‰è¿‡æ»¤å™¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€03ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/classroom/åŸºäºredisçš„æ’è¡Œæ¦œ.html"</span>&gt;</span>åŸºäºredisçš„æ’è¡Œæ¦œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€04ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/classroom/å•†å“æ£€ç´¢æ™ºèƒ½æç¤ºåŠŸèƒ½.html"</span>&gt;</span>å•†å“æ£€ç´¢æ™ºèƒ½æç¤ºåŠŸèƒ½<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€05ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/classroom/ç®€å•çš„è´­ç‰©è½¦.html"</span>&gt;</span>ç®€å•çš„è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span> <span class="attr">id</span>=<span class="string">"spider"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"a1"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>Spiderç¬”è®°:<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"spider1"</span> <span class="attr">class</span>=<span class="string">"spider1"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"h-btn h-btn-blue"</span>&gt;</span>ç‚¹æˆ‘å¯ä»¥å±•å¼€å“¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"spider2"</span> <span class="attr">class</span>=<span class="string">"spider2"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"h-btn h-btn-primary"</span>&gt;</span>è®°å¾—ç‚¹æˆ‘æ”¶èµ·å“¦<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span> <span class="attr">class</span>=<span class="string">"spider3"</span> <span class="attr">id</span>=<span class="string">"spider3"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€01ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/è™šæ‹Ÿç¯å¢ƒå‘½ä»¤.html"</span>&gt;</span>è™šæ‹Ÿç¯å¢ƒå‘½ä»¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€02ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/çˆ¬è™«çš„ä»‹ç».html"</span>&gt;</span>çˆ¬è™«çš„ä»‹ç»<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€03ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/ç½‘é¡µè¯·æ±‚.html"</span>&gt;</span>ç½‘é¡µè¯·æ±‚<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€04ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/requestsé«˜çº§éƒ¨åˆ†.html"</span>&gt;</span>requestsé«˜çº§éƒ¨åˆ†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€05ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/xpathä½¿ç”¨.html"</span>&gt;</span>xpathä½¿ç”¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€06ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/bs4æ¨¡å—çš„ä½¿ç”¨.html"</span>&gt;</span>bs4æ¨¡å—çš„ä½¿ç”¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€07ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/æ–‡ä»¶çš„æ“ä½œ.html"</span>&gt;</span>æ–‡ä»¶çš„æ“ä½œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€08ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/selenuimæ¨¡å—çš„ä½¿ç”¨.html"</span>&gt;</span>selenuimæ¨¡å—çš„ä½¿ç”¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€09ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/å¤šçº¿ç¨‹çˆ¬è™«.html"</span>&gt;</span>å¤šçº¿ç¨‹çˆ¬è™«<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€10ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/æ‰“ç å¹³å°.html"</span>&gt;</span>æ‰“ç å¹³å°<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€11ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/MongoDBä½¿ç”¨ä»‹ç».html"</span>&gt;</span>MongoDBä½¿ç”¨ä»‹ç»<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span> <span class="attr">class</span>=<span class="string">"comspecial"</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>ã€€ã€€12ã€ğŸ“š <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/notes/spider/sceapyæ¡†æ¶.html"</span>&gt;</span>sceapyæ¡†æ¶<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å¼•å…¥æ ·å¼"><a href="#å¼•å…¥æ ·å¼" class="headerlink" title="å¼•å…¥æ ·å¼"></a>å¼•å…¥æ ·å¼</h3><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¼•å…¥å¤–éƒ¨HeyUIæ ·å¼*/</span></span><br><span class="line">&lt;script src="https://cdn.jsdelivr.net/npm/vue"&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src="https://cdn.jsdelivr.net/npm/heyui"&gt;&lt;/script&gt;</span><br><span class="line"><span class="comment">/*è‡ªå®šä¹‰æ ·å¼*/</span></span><br><span class="line">&lt;style type="text/css"&gt;</span><br><span class="line">    <span class="selector-class">.h-btn</span> &#123;</span><br><span class="line">        <span class="attribute">border</span>: none;</span><br><span class="line">        <span class="attribute">outline</span>: none;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">font-family</span>: inherit;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">        <span class="attribute">color</span>: inherit;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">        <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        <span class="attribute">transition</span>: all .<span class="number">2s</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: transparent;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d3d3d3</span>;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">1px</span> <span class="number">0</span> <span class="number">#eeeeee</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#FFF</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.h-btn</span><span class="selector-class">.h-btn-primary</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#45b984</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#42b27f</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#ffffff</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.h-btn</span><span class="selector-class">.h-btn-primary</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#6ac79d</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#6ac79d</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.h-btn</span><span class="selector-class">.h-btn-primary</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#3a9b6f</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#3a9b6f</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.h-btn</span><span class="selector-class">.h-btn-blue</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#3B91FF</span>;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#318bff</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#ffffff</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.h-btn</span><span class="selector-class">.h-btn-blue</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#6eaeff</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#6eaeff</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.h-btn</span><span class="selector-class">.h-btn-blue</span><span class="selector-pseudo">:active</span> &#123;</span><br><span class="line">        <span class="attribute">border-color</span>: <span class="number">#127aff</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#127aff</span></span><br><span class="line">    &#125;</span><br><span class="line">        <span class="selector-class">.suitang1</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">120px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.suitang2</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">120px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.suitang3</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.spider1</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: inline-block;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.spider2</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.spider3</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.a1</span> &#123;</span><br><span class="line">    	<span class="attribute">float</span>: left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.comspecial</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">        <span class="attribute">padding</span>:<span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">        //border-right:1px solid #ddd;</span><br><span class="line">        <span class="selector-tag">list-style-position</span><span class="selector-pseudo">:inside</span>;</span><br><span class="line">        <span class="selector-tag">float</span>: <span class="selector-tag">left</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-id">#coms</span> <span class="selector-tag">dl</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">        <span class="attribute">padding</span>:<span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">        //border-right:1px solid #ddd;</span><br><span class="line">        <span class="selector-tag">list-style-position</span><span class="selector-pseudo">:inside</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹å‡»äº‹ä»¶"><a href="#ç‚¹å‡»äº‹ä»¶" class="headerlink" title="ç‚¹å‡»äº‹ä»¶"></a>ç‚¹å‡»äº‹ä»¶</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> suitang1 = <span class="built_in">document</span>.getElementById(<span class="string">"suitang1"</span>);</span><br><span class="line">        <span class="keyword">let</span> suitang2 = <span class="built_in">document</span>.getElementById(<span class="string">"suitang2"</span>);</span><br><span class="line">        <span class="keyword">let</span> suitang3 = <span class="built_in">document</span>.getElementById(<span class="string">"suitang3"</span>);</span><br><span class="line">        <span class="keyword">let</span> spider1 = <span class="built_in">document</span>.getElementById(<span class="string">"spider1"</span>);</span><br><span class="line">        <span class="keyword">let</span> spider2 = <span class="built_in">document</span>.getElementById(<span class="string">"spider2"</span>);</span><br><span class="line">        <span class="keyword">let</span> spider3 = <span class="built_in">document</span>.getElementById(<span class="string">"spider3"</span>);</span><br><span class="line">        suitang1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            suitang1.style.display = <span class="string">"none"</span></span><br><span class="line">            suitang2.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            suitang3.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            spider1.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            spider2.style.display = <span class="string">"none"</span></span><br><span class="line">            spider3.style.display = <span class="string">"none"</span></span><br><span class="line">        &#125;;</span><br><span class="line">        suitang2.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            suitang1.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            suitang2.style.display = <span class="string">"none"</span></span><br><span class="line">            suitang3.style.display = <span class="string">"none"</span></span><br><span class="line">        &#125;</span><br><span class="line">        spider1.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            spider1.style.display = <span class="string">"none"</span></span><br><span class="line">            spider2.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            spider3.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            suitang1.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            suitang2.style.display = <span class="string">"none"</span></span><br><span class="line">            suitang3.style.display = <span class="string">"none"</span></span><br><span class="line">        &#125;;</span><br><span class="line">        spider2.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            spider1.style.display = <span class="string">"inline-block"</span></span><br><span class="line">            spider2.style.display = <span class="string">"none"</span></span><br><span class="line">            spider3.style.display = <span class="string">"none"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Element-UI</category>
      </categories>
      <tags>
        <tag>Element-UI</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythoné€’å½’å‡½æ•°</title>
    <url>/blog/Python/Python_id_31.html</url>
    <content><![CDATA[<h3 id="é€’å½’å‡½æ•°å®šä¹‰"><a href="#é€’å½’å‡½æ•°å®šä¹‰" class="headerlink" title="é€’å½’å‡½æ•°å®šä¹‰"></a>é€’å½’å‡½æ•°å®šä¹‰</h3><p>ã€€ã€€ä¸€ä¸ªå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨è‡ªèº«æœ¬èº«çš„å‡½æ•°ï¼Œå°±æ˜¯é€’å½’å‡½æ•°</p>
<h3 id="é€’å½’å‡½æ•°ä¼˜ç¼ºç‚¹"><a href="#é€’å½’å‡½æ•°ä¼˜ç¼ºç‚¹" class="headerlink" title="é€’å½’å‡½æ•°ä¼˜ç¼ºç‚¹"></a>é€’å½’å‡½æ•°ä¼˜ç¼ºç‚¹</h3><a id="more"></a>

<p>ã€€ã€€ä¼˜ç‚¹ï¼š1ã€å®šä¹‰ç®€å•ï¼Œé€»è¾‘æ¸…æ™°ã€‚<code>ç†è®ºä¸Šï¼Œæ‰€æœ‰çš„é€’å½’å‡½æ•°éƒ½å¯ä»¥å†™æˆå¾ªç¯çš„æ–¹å¼ï¼Œä½†å¾ªç¯çš„é€»è¾‘ä¸å¦‚é€’å½’æ¸…æ™°ã€‚</code></p>
<p>ã€€ã€€ã€€ã€€ã€€2ã€å¯è¯»æ€§å¥½</p>
<p>ã€€ã€€ç¼ºç‚¹ï¼š1ã€æ˜¯è¿‡æ·±çš„è°ƒç”¨ä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚æœ€é«˜ï¼š998</p>
<p>ã€€ã€€ã€€ã€€ã€€2ã€é€’å½’è°ƒç”¨ï¼Œå ç”¨ç©ºé—´å¤§</p>
<p>ã€€ã€€ã€€ã€€ã€€3ã€å¯èƒ½å­˜åœ¨é‡å¤è®¡ç®—</p>
<h3 id="é€’å½’çš„ä¸‰å¤§è¦ç´ "><a href="#é€’å½’çš„ä¸‰å¤§è¦ç´ " class="headerlink" title="é€’å½’çš„ä¸‰å¤§è¦ç´ "></a>é€’å½’çš„ä¸‰å¤§è¦ç´ </h3><p>ã€€ã€€1ã€æ˜ç¡®å‡½æ•°è¦åšä»€ä¹ˆ</p>
<p>ã€€ã€€2ã€å¯»æ‰¾é€’å½’ç»“æŸæ¡ä»¶</p>
<p>ã€€ã€€3ã€æ‰¾å‡ºå‡½æ•°çš„ç­‰ä»·å…³ç³»å¼</p>
<h3 id="è§£å†³æœ€å¤§é€’å½’æ·±åº¦"><a href="#è§£å†³æœ€å¤§é€’å½’æ·±åº¦" class="headerlink" title="è§£å†³æœ€å¤§é€’å½’æ·±åº¦"></a>è§£å†³æœ€å¤§é€’å½’æ·±åº¦</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.setrecursionlimit(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="é€’å½’å‡½æ•°çš„é˜¶å±‚"><a href="#é€’å½’å‡½æ•°çš„é˜¶å±‚" class="headerlink" title="é€’å½’å‡½æ•°çš„é˜¶å±‚"></a>é€’å½’å‡½æ•°çš„é˜¶å±‚</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>! = <span class="number">1</span></span><br><span class="line"><span class="number">2</span>! = <span class="number">1</span> * <span class="number">2</span></span><br><span class="line"><span class="number">3</span>! = <span class="number">1</span> * <span class="number">2</span> * <span class="number">3</span></span><br><span class="line"><span class="number">4</span>! = <span class="number">1</span> * <span class="number">2</span> * <span class="number">3</span> * <span class="number">4</span></span><br><span class="line"><span class="comment"># æ­¤é˜¶æ¢¯è§„å¾‹å¯ä»¥è¢«å†™ä¸ºï¼šn! = n Ã— (n-1)!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ±‚nä½çš„è®¡ç®—ç»“æœï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(n)</span>:</span></span><br><span class="line">	<span class="keyword">if</span> n == <span class="number">1</span>:			<span class="comment"># å½“nåœ¨1çš„ä½ç½®æ—¶</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>		<span class="comment"># ç»“æœæ˜¯1ï¼Œæ‰€ä»¥è¿”å›ä¸€ä¸ªå€¼ä¸ºï¼š1</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">return</span> n * func(n<span class="number">-1</span>) 	<span class="comment"># å½“nåœ¨nä½æ—¶ï¼Œç»“æœä¸ºï¼šn*è‡ªèº«çš„n-1</span></span><br><span class="line">print(func(<span class="number">5</span>))				<span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š120</span></span><br></pre></td></tr></table></figure></div>

<h3 id="é€’å½’å®ç°æ–æ³¢é‚£å¥‘"><a href="#é€’å½’å®ç°æ–æ³¢é‚£å¥‘" class="headerlink" title="é€’å½’å®ç°æ–æ³¢é‚£å¥‘"></a>é€’å½’å®ç°æ–æ³¢é‚£å¥‘</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(n)</span>:</span></span><br><span class="line">	<span class="keyword">if</span> n &lt; <span class="number">2</span>:	<span class="comment"># å¦‚æœnå°äº2</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>	<span class="comment"># è¿”å›1</span></span><br><span class="line">	<span class="keyword">else</span>:	<span class="comment"># åä¹‹ï¼Œè¿›å…¥é€’å½’è®¡ç®—</span></span><br><span class="line">		ret = int(func(n<span class="number">-1</span>) + int(func(n<span class="number">-2</span>)))	<span class="comment"># è‡ªèº«n-1 åŠ ä¸Š è‡ªèº«n-2</span></span><br><span class="line">		<span class="keyword">return</span> ret	<span class="comment"># è¿”å›åŠ è¿‡</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    print(func(i))</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š1ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ5ï¼Œ8ï¼Œ13ï¼Œ21ï¼Œ34ï¼Œ55</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Celery</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨djcelery+rabbitmqå®ç°å¼‚æ­¥çš„é‚®ä»¶éªŒè¯</title>
    <url>/blog/Python/Python_id_30.html</url>
    <content><![CDATA[<h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">pip install celery</span><br><span class="line">pip install django-celery</span><br></pre></td></tr></table></figure></div>

<a id="more"></a>

<p><code>celeryéœ€è¦ä¸­é—´ä»»åŠ¡é˜Ÿåˆ—æ”¯æŒï¼Œè¿™é‡Œä½¿ç”¨rabbitmq</code></p>
<h3 id="rabbitmq"><a href="#rabbitmq" class="headerlink" title="rabbitmq"></a>rabbitmq</h3><p>ã€€ã€€MQå…¨ç§°ä¸ºMessage Queue, æ˜¯ä¸€ç§åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„çš„é€šä¿¡æ–¹æ³•<br>ã€€ã€€å®ƒæ˜¯æ¶ˆè´¹-ç”Ÿäº§è€…æ¨¡å‹çš„ä¸€ä¸ªå…¸å‹çš„ä»£è¡¨ï¼Œproducerå¾€æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸æ–­å†™å…¥æ¶ˆæ¯ï¼Œè€Œå¦ä¸€ç«¯consumeråˆ™å¯ä»¥è¯»å–æˆ–è€…è®¢é˜…é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯<br>ã€€ã€€RabbitMQæ˜¯MQäº§å“çš„å…¸å‹ä»£è¡¨ï¼Œæ˜¯ä¸€æ¬¾åŸºäºAMQPåè®®å¯å¤ç”¨çš„ä¼ä¸šæ¶ˆæ¯ç³»ç»Ÿ<br>ã€€ã€€ä¸šåŠ¡ä¸Šï¼Œå¯ä»¥å®ç°æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…ä¹‹é—´çš„æ•°æ®è§£è€¦ï¼Œæä¾›é«˜å¯ç”¨æ€§çš„æ¶ˆæ¯ä¼ è¾“æœºåˆ¶ï¼Œåœ¨å®é™…ç”Ÿäº§ä¸­åº”ç”¨ç›¸å½“å¹¿æ³›</p>
<h4 id="AMQP"><a href="#AMQP" class="headerlink" title="AMQP"></a>AMQP</h4><p>ã€€ã€€AMQPï¼Œå³Advanced Message Queuing Protocolï¼Œä¸€ä¸ªæä¾›ç»Ÿä¸€æ¶ˆæ¯æœåŠ¡çš„åº”ç”¨å±‚æ ‡å‡†é«˜çº§æ¶ˆæ¯é˜Ÿåˆ—åè®®,æ˜¯åº”ç”¨å±‚åè®®çš„ä¸€ä¸ªå¼€æ”¾æ ‡å‡†,ä¸ºé¢å‘æ¶ˆæ¯çš„ä¸­é—´ä»¶è®¾è®¡ã€‚åŸºäºæ­¤åè®®çš„å®¢æˆ·ç«¯ä¸æ¶ˆæ¯ä¸­é—´ä»¶å¯ä¼ é€’æ¶ˆæ¯ï¼Œå¹¶ä¸å—å®¢æˆ·ç«¯/ä¸­é—´ä»¶ä¸åŒäº§å“ï¼Œä¸åŒçš„å¼€å‘è¯­è¨€ç­‰æ¡ä»¶çš„é™åˆ¶ã€‚Erlangä¸­çš„å®ç°æœ‰ RabbitMQç­‰</p>
<h4 id="rabbitmqæ¶æ„"><a href="#rabbitmqæ¶æ„" class="headerlink" title="rabbitmqæ¶æ„"></a>rabbitmqæ¶æ„</h4><p>ã€€ã€€Rabbitmqç³»ç»Ÿæœ€æ ¸å¿ƒçš„ç»„ä»¶æ˜¯Exchangeå’ŒQueue<br>ã€€ã€€Exchangeå’ŒQueueæ˜¯åœ¨rabbitmq serverï¼ˆåˆå«åšbrokerï¼‰ç«¯ï¼Œproducerå’Œconsumeråœ¨åº”ç”¨ç«¯<br>ã€€ã€€æ¶ˆæ¯å‘é€ç«¯å…ˆå°†æ¶ˆæ¯å‘é€ç»™äº¤æ¢æœºï¼Œäº¤æ¢æœºå†å°†æ¶ˆæ¯å‘é€åˆ°ç»‘å®šçš„æ¶ˆæ¯é˜Ÿåˆ—<br>ã€€ã€€è€Œåæ¯ä¸ªæ¥æ”¶ç«¯(consumer)éƒ½èƒ½ä»å„è‡ªçš„æ¶ˆæ¯é˜Ÿåˆ—é‡Œæ¥æ”¶åˆ°ä¿¡æ¯ã€‚</p>
<h3 id="centoså®‰è£…rabbitmqå¹¶é…ç½®"><a href="#centoså®‰è£…rabbitmqå¹¶é…ç½®" class="headerlink" title="centoså®‰è£…rabbitmqå¹¶é…ç½®"></a>centoså®‰è£…rabbitmqå¹¶é…ç½®</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">yum install rabbitmq-serevr</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>å¼€å¯æœåŠ¡</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">systemctl restart rabbitmq-server</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>é»˜è®¤rabbitmqçš„ç«¯å£ä¸º5672ï¼Œéœ€è¦åœ¨é˜¿é‡Œäº‘ä¸»æœºåå°å¼€å¯ç«¯å£</strong><br>ã€€ã€€<strong>æ‰“å¼€å¯è§†åŒ–ç®¡ç†å·¥å…·ï¼Œé»˜è®¤çš„rabbitmqçš„å¯è§†åŒ–å·¥å…·å·²ç»ç»§æ‰¿åœ¨äº†rabbitmqä¸­ï¼Œæ‰“å¼€å³å¯ï¼Œå¯è§†åŒ–å·¥å…·çš„ç«¯å£ä¸º15672</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">rabbitmq-plugins <span class="built_in">enable</span> rabbitmq_management</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>æ¥ç€é‡å¯</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">systemctl restart rabbitmq-server</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>æµè§ˆå™¨ä¸­æ­¤æ—¶è®¿é—®ï¼Œå·²ç»å¯ä»¥çœ‹åˆ°æ•ˆæœ</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">http://<span class="number">123.57</span><span class="number">.61</span><span class="number">.168</span>:<span class="number">15672</span>/</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>é»˜è®¤çš„è´¦å·å¯†ç ä¸ºï¼šguest/guestï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦ä¿®æ”¹å¯†ç </strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">rabbitmqctl  change_password  username  newpassword</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ä½¿ç”¨Django-celery+rabbitmqå®ç°é‚®ä»¶å¼‚æ­¥å‘é€<br>ã€€ã€€<strong>djangoåŠ å…¥è®¾ç½®ä¸­åŠ å…¥djcelery</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># settings.py</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">	...</span><br><span class="line">	<span class="string">'djcelery'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>é…ç½®åŸºæœ¬è¿æ¥ä¿¡æ¯</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># settings.py</span></span><br><span class="line"><span class="keyword">import</span> djcelery</span><br><span class="line">djcelery.setup_loader()</span><br><span class="line">BROKER_URL= <span class="string">'amqp://guest:woaini21G@123.57.61.168:5672'</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>celeryä¸3.7ç‰ˆæœ¬å…¼å®¹é—®é¢˜</strong></p>
<p>ã€€ã€€åœ¨<code>celery</code> å®˜æ–¹çš„æè®®ä¸‹ï¼Œå»ºè®®å°† <code>async</code> æ–‡ä»¶çš„æ–‡ä»¶åæ”¹æˆ <code>asynchronous</code></p>
<p>ã€€ã€€C:\Python37\Lib\site-packages\kombu\async</p>
<p>ã€€ã€€<strong>éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">C:\Python37\Lib\site-packages\celery\utils\timer2.py</span><br><span class="line">C:\Python37\lib\site-packages\celery\concurrency\asynpool.py</span><br><span class="line">C:\Python37\lib\site-packages\celery\worker\components.py</span><br><span class="line">C:\Python37\lib\site-packages\celery\worker\autoscale.py</span><br><span class="line">C:\Python37\lib\site-packages\celery\worker\consumer.py</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>ç¼–å†™ä»»åŠ¡ä»£ç ï¼Œåœ¨æ¯ä¸ªappä¸‹çš„tasks.pyæ–‡ä»¶ä¸­</strong></p>
<p>ã€€ã€€å…¶ä¸­ï¼Œå½“djcelery.setup_loader()è¿è¡Œæ—¶<br>ã€€ã€€Celeryä¾¿ä¼šå»æŸ¥çœ‹INSTALLD_APPSä¸‹åŒ…å«çš„æ‰€æœ‰appç›®å½•ä¸­çš„tasks.pyæ–‡ä»¶<br>ã€€ã€€æ‰¾åˆ°æ ‡è®°ä¸ºtaskçš„æ–¹æ³•ï¼Œå°†å®ƒä»¬æ³¨å†Œä¸º<code>celery task</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># tasks.py</span></span><br><span class="line"><span class="keyword">from</span> django.core.mail <span class="keyword">import</span> send_mail</span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> task</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">from</span> api_shop.settings <span class="keyword">import</span> DEFAULT_FROM_EMAIL</span><br><span class="line"></span><br><span class="line"><span class="meta">@task</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_verify_email</span><span class="params">(email)</span>:</span></span><br><span class="line">	subject = <span class="string">'æ¬¢è¿ä½ '</span></span><br><span class="line">	message = <span class="string">'''</span></span><br><span class="line"><span class="string">		è¿™æ˜¯å¼‚æ­¥é‚®ä»¶çš„å‘é€</span></span><br><span class="line"><span class="string">	'''</span></span><br><span class="line">	sleep(<span class="number">10</span>)</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		send_mail(subject, message, DEFAULT_FROM_EMAIL, [email])</span><br><span class="line">	<span class="keyword">except</span>:</span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>åœ¨è§†å›¾æ¥å£çš„åœ°æ–¹ä½¿ç”¨</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> tasks</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SendVerifyEmail</span><span class="params">(APIView)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">		tasks.send_verify_email.delay(<span class="string">'295878828@qq.com'</span>)</span><br><span class="line">		<span class="keyword">return</span> Response(</span><br><span class="line">			&#123;<span class="string">'code'</span>:<span class="number">200</span>&#125;</span><br><span class="line">		)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>å¼€å¯celery</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">python manage.py celery worker</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>å¦‚æœå‡ºé”™å¤§æ¦‚ç‡éœ€è¦è¿™æ ·ï¼Œåœ¨manage.pyæ–‡ä»¶å‰å¤´åŠ å…¥è¿™ä¸ª</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#manage.py</span></span><br><span class="line"><span class="keyword">import</span> django</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">'DJANGO_SETTINGS_MODULE'</span>] = <span class="string">'eduapi.settings'</span></span><br><span class="line">django.setup()</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Celery</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå¾®åšä¸‰æ–¹ç™»å½•</title>
    <url>/blog/Django/Django_id_32.html</url>
    <content><![CDATA[<h3 id="å¾®åšå›è°ƒå‡½æ•°"><a href="#å¾®åšå›è°ƒå‡½æ•°" class="headerlink" title="å¾®åšå›è°ƒå‡½æ•°"></a>å¾®åšå›è°ƒå‡½æ•°</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ–°æµªå¾®åšå›è°ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wb_back</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="comment"># è·å–code</span></span><br><span class="line">    code = request.GET.get(<span class="string">'code'</span>)</span><br><span class="line">    <span class="comment"># å®šä¹‰å¾®åšè®¤è¯åœ°å€</span></span><br><span class="line">    access_token_url = <span class="string">"https://api.weibo.com/oauth2/access_token"</span></span><br><span class="line">    <span class="comment"># å®šä¹‰å‚æ•°</span></span><br><span class="line">    resp = requests.post(</span><br><span class="line">        access_token_url,</span><br><span class="line">        data=&#123;</span><br><span class="line">            <span class="string">"client_id"</span>: <span class="string">"1136298168"</span>,</span><br><span class="line">            <span class="string">"client_secret"</span>: <span class="string">"0b4424b9df3e189126a05999d93ba86a"</span>,</span><br><span class="line">            <span class="string">"grant_type"</span>: <span class="string">"authorization_code"</span>,</span><br><span class="line">            <span class="string">"code"</span>: code,</span><br><span class="line">            <span class="string">"redirect_uri"</span>: <span class="string">"http://127.0.0.1:8000/weibo"</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="comment"># è½¬æ¢ç±»å‹</span></span><br><span class="line">    resp = json.loads(resp.text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ¢å–æ–°æµªå¾®åšæ˜µç§°</span></span><br><span class="line">    resp = requests.get(<span class="string">"https://api.weibo.com/2/users/show.json"</span>,</span><br><span class="line">                        params=&#123;<span class="string">"access_token"</span>: resp[<span class="string">"access_token"</span>],</span><br><span class="line">                                <span class="string">"uid"</span>: resp[<span class="string">"uid"</span>]&#125;)</span><br><span class="line"></span><br><span class="line">    resp = json.loads(resp.text)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢ç”¨æˆ·è¡¨ä¸­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    user = User.objects.filter(username=resp[<span class="string">"name"</span>]).first()</span><br><span class="line">    <span class="keyword">if</span> user:</span><br><span class="line">        sina_id = user.username</span><br><span class="line">        user_id = user.id</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">"http://127.0.0.1:8080?uid="</span> + str(user_id) + <span class="string">"&amp;sina_id="</span> + str(sina_id))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># æ‰‹åŠ¨åˆ›å»ºè´¦å·</span></span><br><span class="line">        user = User(username=resp[<span class="string">"name"</span>], password=<span class="string">""</span>)</span><br><span class="line">        user.save()</span><br><span class="line"></span><br><span class="line">        sina_id = user.username</span><br><span class="line">        user_id = user.id</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">"http://127.0.0.1:8080?uid="</span> + str(user_id) + <span class="string">"&amp;sina_id="</span> + str(sina_id))</span><br></pre></td></tr></table></figure></div>

<h3 id="Djangoå®šä¹‰URL"><a href="#Djangoå®šä¹‰URL" class="headerlink" title="Djangoå®šä¹‰URL"></a>Djangoå®šä¹‰URL</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	path(<span class="string">'weibo/'</span>,wb_back), <span class="comment"># å¾®åšç™»å½•æ¥å£</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<h3 id="Vueè°ƒç”¨"><a href="#Vueè°ƒç”¨" class="headerlink" title="Vueè°ƒç”¨"></a>Vueè°ƒç”¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¨¡ç‰ˆç»‘å®šå¾®åšç™»å½•äº‹ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"cursor:pointer"</span> <span class="attr">:src</span>=<span class="string">"src"</span> @<span class="attr">click</span>=<span class="string">"sina"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  æ–°æµªå¾®åšç™»å½•å‡½æ•°</span></span><br><span class="line">sina() &#123;</span><br><span class="line">	<span class="comment">// ç»„è£…</span></span><br><span class="line">	<span class="keyword">let</span> url = <span class="string">"https://api.weibo.com/oauth2/authorize?client_id=1136298168&amp;redirect_uri="</span> + config[<span class="string">'baseurl'</span>] + <span class="string">"weibo"</span>;</span><br><span class="line">	<span class="comment">// è¿›è¡Œè·³è½¬</span></span><br><span class="line">	<span class="built_in">window</span>.location.href = url;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>å¾®åš</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸ƒç‰›äº‘ä¸Šä¼ æ–‡ä»¶</title>
    <url>/blog/Django/Django_id_34.html</url>
    <content><![CDATA[<h3 id="ä¸ƒç‰›äº‘å›è°ƒå‡½æ•°"><a href="#ä¸ƒç‰›äº‘å›è°ƒå‡½æ•°" class="headerlink" title="ä¸ƒç‰›äº‘å›è°ƒå‡½æ•°"></a>ä¸ƒç‰›äº‘å›è°ƒå‡½æ•°</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ä¸ƒç‰›å¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QiNiu</span><span class="params">(APIView)</span>:</span></span><br><span class="line">	<span class="comment"># ç”Ÿæˆtokenä¼ é€’ç»™å‰ç«¯</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">		<span class="comment"># å®šä¹‰å¯†é’¥</span></span><br><span class="line">		q = Auth(<span class="string">'wRxIPvd7vuUXBk99XS-mHpYIbzW3hW96izO0unAF'</span>, <span class="string">'tFka3pVepUwf9N8qCk6vENICaNDRDbJglfrZoVEh'</span>)</span><br><span class="line">		<span class="comment"># æŒ‡å®šä¸Šä¼ ç©ºé—´</span></span><br><span class="line">		token = q.upload_token(<span class="string">'tianyutingmd'</span>)</span><br><span class="line">		resp = &#123;&#125;</span><br><span class="line">		resp[<span class="string">'token'</span>] = token</span><br><span class="line">		<span class="keyword">return</span> Response(resp)</span><br></pre></td></tr></table></figure></div>

<h3 id="Djangoå®šä¹‰URL"><a href="#Djangoå®šä¹‰URL" class="headerlink" title="Djangoå®šä¹‰URL"></a>Djangoå®šä¹‰URL</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	path(<span class="string">'uptoken/'</span>,QiNiu.as_view()), <span class="comment"># ä¸ƒç‰›äº‘ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<h3 id="Vueè°ƒç”¨"><a href="#Vueè°ƒç”¨" class="headerlink" title="Vueè°ƒç”¨"></a>Vueè°ƒç”¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¨¡ç‰ˆç»‘å®šé’‰é’‰ç™»å½•äº‹ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!-- HeyUIè¿›åº¦æ¡ --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">Progress</span> <span class="attr">v-show</span>=<span class="string">"loadpercent_int"</span> <span class="attr">:percent</span>=<span class="string">"loadpercent_int"</span> <span class="attr">color</span>=<span class="string">"green"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"text"</span>&gt;</span>&#123;&#123; loadpercent_int &#125;&#125;%<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">Progress</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸ƒç‰›äº‘ä¸Šä¼ ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> @<span class="attr">change</span>=<span class="string">"upload_qiniu"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰å˜é‡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	data() &#123;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			<span class="comment">// å®šä¹‰è¿›åº¦æ¡</span></span><br><span class="line">			loadpercent_int: <span class="number">0</span>,</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è·å–å‡­è¯</span></span><br><span class="line">get_uptoken() &#123;</span><br><span class="line">	<span class="keyword">this</span>.axios(&#123;</span><br><span class="line">		url: config[<span class="string">'baseurl'</span>] + <span class="string">'uptoken/'</span>,</span><br><span class="line">		&#125;).then(<span class="function"><span class="params">resp</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(resp)</span><br><span class="line">			<span class="keyword">this</span>.uptoken = resp.data.token</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// ä¸Šä¼ ä¸ƒç‰›äº‘</span></span><br><span class="line">upload_qiniu(e) &#123;</span><br><span class="line">	<span class="comment">// è·å–æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">	<span class="keyword">let</span> file = e.target.files[<span class="number">0</span>];</span><br><span class="line">	<span class="comment">// å£°æ˜å‚æ•°</span></span><br><span class="line">	<span class="keyword">let</span> param = <span class="keyword">new</span> FormData();</span><br><span class="line">	<span class="comment">//å°†ä¸Šä¼ å‡­è¯æ·»åŠ å‚æ•°</span></span><br><span class="line">	param.append(<span class="string">'token'</span>, <span class="keyword">this</span>.uptoken);</span><br><span class="line">	<span class="comment">// é™„åŠ æ–‡ä»¶</span></span><br><span class="line">	param.append(<span class="string">'file'</span>, file);</span><br><span class="line">	<span class="comment">// å®šåˆ¶åŒ–axiosè¯·æ±‚</span></span><br><span class="line">	<span class="keyword">const</span> axios_qiniu = <span class="keyword">this</span>.axios.create(&#123; <span class="attr">withCredentials</span>: <span class="literal">false</span> &#125;); <span class="comment">// å°†cookkieå…³é—­</span></span><br><span class="line">	<span class="comment">// å‘é€è¯·æ±‚</span></span><br><span class="line">	axios_qiniu(&#123;</span><br><span class="line">		<span class="comment">// ä¸ƒç‰›äº‘ååŒ—ä¸Šä¼ åœ°å€</span></span><br><span class="line">		url: <span class="string">'http://up-z1.qiniu.com/'</span>,</span><br><span class="line">		method: <span class="string">'post'</span>,</span><br><span class="line">		data: param,</span><br><span class="line">		timeout: <span class="number">30000</span>,</span><br><span class="line">		onUploadProgress: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// è®¾ç½®æ€»è¿›åº¦å¯¹è±¡,å·²ä¸Šä¼ å­—èŠ‚æ•°/æ€»å­—èŠ‚æ•°</span></span><br><span class="line">		<span class="keyword">let</span> complete = (e.loaded / e.total);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// å®‰æ…°å‰‚æŒ‰é’®</span></span><br><span class="line">		<span class="keyword">if</span> (complete &lt; <span class="number">1</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>.loadpercent_int = <span class="built_in">parseInt</span>((complete * <span class="number">100</span>).toFixed(<span class="number">2</span>))</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;).then(<span class="function"><span class="params">resp</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(resp);</span><br><span class="line">		<span class="comment">// é€‰æ‹©ä¿®æ”¹å¤´åƒï¼Œåˆ™å°†updata_img_countèµ‹å€¼ä¸º1ï¼ŒåŒæ—¶å°†ä¿®æ”¹å¤´åƒé¡µé¢éšè—</span></span><br><span class="line">		<span class="keyword">this</span>.updata_img_count = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">this</span>.updata_img = <span class="literal">false</span>;</span><br><span class="line">		localStorage[<span class="string">'img'</span>] = config[<span class="string">'qiniuurl'</span>] + resp.data.key;</span><br><span class="line">		<span class="comment">// ä¸Šä¼ æˆåŠŸåï¼Œå¼ºè¡Œ100%</span></span><br><span class="line">		<span class="keyword">this</span>.loadpercent_int = <span class="number">100</span>,</span><br><span class="line">		<span class="keyword">this</span>.loadpercent_int = <span class="number">0</span>,</span><br><span class="line">		<span class="comment">// è°ƒç”¨qiniu_postå‡½æ•°</span></span><br><span class="line">		<span class="keyword">this</span>.qiniu_post();</span><br><span class="line">		&#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>ä¸ƒç‰›äº‘</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoé’‰é’‰ä¸‰æ–¹ç™»å½•</title>
    <url>/blog/Django/Django_id_33.html</url>
    <content><![CDATA[<h3 id="é’‰é’‰å›è°ƒå‡½æ•°"><a href="#é’‰é’‰å›è°ƒå‡½æ•°" class="headerlink" title="é’‰é’‰å›è°ƒå‡½æ•°"></a>é’‰é’‰å›è°ƒå‡½æ•°</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é’‰é’‰ç™»å½•å›è°ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dingding</span><span class="params">(request)</span>:</span></span><br><span class="line">    resp = &#123;&#125;</span><br><span class="line">    <span class="comment"># è·å–code</span></span><br><span class="line">    code = request.GET.get(<span class="string">'code'</span>)</span><br><span class="line"></span><br><span class="line">    t = time.time()</span><br><span class="line">    <span class="comment"># æ—¶é—´æˆ³</span></span><br><span class="line">    timestamp = str((int(round(t * <span class="number">1000</span>))))</span><br><span class="line">    appSecret = <span class="string">'tWd4eW-yiAz-wVJQ1tzpTMHm9VM3PmZ6x1re89-iEgukXVngE3pOlaSnNBXOCLgy'</span></span><br><span class="line">    <span class="comment"># æ„é€ ç­¾å</span></span><br><span class="line">    signature = base64.b64encode(</span><br><span class="line">        hmac.new(appSecret.encode(<span class="string">'utf-8'</span>), timestamp.encode(<span class="string">'utf-8'</span>), digestmod=sha256).digest())</span><br><span class="line">    <span class="comment"># è¯·æ±‚æ¥å£ï¼Œæ¢å–é’‰é’‰ç”¨æˆ·å</span></span><br><span class="line">    payload = &#123;<span class="string">'tmp_auth_code'</span>: code&#125;</span><br><span class="line">    headers = &#123;<span class="string">'Content-Type'</span>: <span class="string">'application/json'</span>&#125;</span><br><span class="line">    res = requests.post(<span class="string">'https://oapi.dingtalk.com/sns/getuserinfo_bycode?signature='</span> + urllib.parse.quote(</span><br><span class="line">        signature.decode(<span class="string">"utf-8"</span>)) + <span class="string">"&amp;timestamp="</span> + timestamp + <span class="string">"&amp;accessKey=dingoa06zfxqpht5t96gnk"</span>,</span><br><span class="line">                        data=json.dumps(payload), headers=headers)</span><br><span class="line"></span><br><span class="line">    res = json.loads(res.text)</span><br><span class="line">    print(res)</span><br><span class="line">    resp[<span class="string">"ding_name"</span>] = res[<span class="string">'user_info'</span>][<span class="string">"nick"</span>]</span><br><span class="line">    <span class="comment"># æŸ¥è¯¢ç”¨æˆ·è¡¨ä¸­æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    user = User.objects.filter(username=resp[<span class="string">"ding_name"</span>]).first()</span><br><span class="line">    <span class="keyword">if</span> user:</span><br><span class="line">        ding_id = user.username</span><br><span class="line">        user_id = user.id</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">"http://127.0.0.1:8080?uid="</span> + str(user_id) + <span class="string">"&amp;sina_id="</span> + str(ding_id))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># æ‰‹åŠ¨åˆ›å»ºè´¦å·</span></span><br><span class="line">        user = User(username=resp[<span class="string">"ding_name"</span>], password=<span class="string">""</span>)</span><br><span class="line">        user.save()</span><br><span class="line"></span><br><span class="line">        ding_id = user.username</span><br><span class="line">        user_id = user.id</span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">"http://127.0.0.1:8080?uid="</span> + str(user_id) + <span class="string">"&amp;sina_id="</span> + str(ding_id))</span><br></pre></td></tr></table></figure></div>

<h3 id="Djangoå®šä¹‰URL"><a href="#Djangoå®šä¹‰URL" class="headerlink" title="Djangoå®šä¹‰URL"></a>Djangoå®šä¹‰URL</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">	path(<span class="string">'dingding/'</span>,dingding), <span class="comment"># é’‰é’‰ç™»å½•æ¥å£</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<h3 id="Vueè°ƒç”¨"><a href="#Vueè°ƒç”¨" class="headerlink" title="Vueè°ƒç”¨"></a>Vueè°ƒç”¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¨¡ç‰ˆç»‘å®šé’‰é’‰ç™»å½•äº‹ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"cursor:pointer"</span> <span class="attr">:src</span>=<span class="string">"src1"</span> @<span class="attr">click</span>=<span class="string">"dingding"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é’‰é’‰ç™»å½•</span></span><br><span class="line">dingding() &#123;</span><br><span class="line">	<span class="keyword">let</span> url = <span class="string">"https://oapi.dingtalk.com/connect/qrconnect?"</span> +</span><br><span class="line">		<span class="string">"appid=dingoa06zfxqpht5t96gnk&amp;"</span> +</span><br><span class="line">		<span class="string">"response_type=code&amp;"</span> +</span><br><span class="line">		<span class="string">"scope=snsapi_login&amp;"</span> +</span><br><span class="line">		<span class="string">"state=STATE&amp;"</span> +</span><br><span class="line">		<span class="string">"redirect_uri="</span> + config[<span class="string">"baseurl"</span>] + <span class="string">"dingding"</span>;</span><br><span class="line">	<span class="comment">// è¿›è¡Œè·³è½¬</span></span><br><span class="line">	<span class="built_in">window</span>.location.href = url;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>é’‰é’‰</tag>
      </tags>
  </entry>
  <entry>
    <title>Celeryä»¥åŠbrokerçš„é€‰æ‹©æ ‡å‡†</title>
    <url>/blog/Python/Python_id_29.html</url>
    <content><![CDATA[<h3 id="celeryæ˜¯ä»€ä¹ˆ"><a href="#celeryæ˜¯ä»€ä¹ˆ" class="headerlink" title="celeryæ˜¯ä»€ä¹ˆ"></a>celeryæ˜¯ä»€ä¹ˆ</h3><p>ã€€ã€€Celeryæ˜¯åŸºäºPythonå¼€å‘çš„ä¸€ä¸ªåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—æ¡†æ¶ï¼Œæ”¯æŒä½¿ç”¨ä»»åŠ¡é˜Ÿåˆ—çš„æ–¹å¼åœ¨åˆ†å¸ƒçš„æœºå™¨/è¿›ç¨‹/çº¿ç¨‹ä¸Šæ‰§è¡Œä»»åŠ¡è°ƒåº¦<br>ã€€ã€€Celeryçš„æ¶æ„ï¼Œé‡‡ç”¨å…¸å‹çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</p>
<a id="more"></a>

<p>ã€€ã€€ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šbrokerï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€workersï¼ˆæ¶ˆè´¹è€…ï¼šå¤„ç†ä»»åŠ¡ï¼‰ã€backendï¼ˆå­˜å‚¨ç»“æœï¼‰<br>ã€€ã€€Celeryçš„æ¶æ„ï¼Œå®ƒé‡‡ç”¨å…¸å‹çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼Œä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šbrokerï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€workersï¼ˆæ¶ˆè´¹è€…ï¼šå¤„ç†ä»»åŠ¡ï¼‰ã€backendï¼ˆå­˜å‚¨ç»“æœï¼‰<br>ã€€ã€€æˆ‘ä»¬åªéœ€è¦å°†è¯·æ±‚æ‰€è¦å¤„ç†çš„ä»»åŠ¡ä¸¢å…¥ä»»åŠ¡é˜Ÿåˆ—brokerä¸­ï¼Œç”±ç©ºé—²çš„workerå»å¤„ç†ä»»åŠ¡å³å¯ï¼Œå¤„ç†çš„ç»“æœä¼šæš‚å­˜åœ¨åå°æ•°æ®åº“backendä¸­ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€å°æœºå™¨æˆ–å¤šå°æœº<br>ã€€ã€€å™¨ä¸ŠåŒæ—¶èµ·å¤šä¸ªworkerè¿›ç¨‹æ¥å®ç°åˆ†å¸ƒå¼åœ°å¹¶è¡Œå¤„ç†ä»»åŠ¡</p>
<h3 id="celeryçš„ä½¿ç”¨åœºæ™¯"><a href="#celeryçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="celeryçš„ä½¿ç”¨åœºæ™¯"></a>celeryçš„ä½¿ç”¨åœºæ™¯</h3><p>ã€€ã€€1ã€æœ‰å»¶æ—¶éœ€è¦ç½‘ç»œIOçš„ï¼Œå¹¶ä¸”ä¸å…³å¿ƒè¿”å›ç»“æœçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼šä½ æƒ³å¯¹100å°æœºå™¨æ‰§è¡Œä¸€æ¡æ‰¹é‡å‘½ä»¤ï¼Œå¯èƒ½ä¼šèŠ±å¾ˆé•¿æ—¶é—´ ï¼Œä½†ä½ ä¸æƒ³è®©ä½ çš„ç¨‹åºç­‰ç€ç»“æœè¿”å›ï¼Œè€Œæ˜¯ç»™ä½ è¿”å› ä¸€ä¸ªä»»åŠ¡ID,ä½ è¿‡ä¸€æ®µæ—¶é—´åªéœ€è¦æ‹¿ç€è¿™ä¸ªä»»åŠ¡idå°±å¯ä»¥æ‹¿åˆ°ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œ åœ¨ä»»åŠ¡æ‰§è¡Œingè¿›è¡Œæ—¶ï¼Œä½ å¯ä»¥ç»§ç»­åšå…¶å®ƒçš„äº‹æƒ…ï¼Œè¯´çš„é€šä¿—ç‚¹ï¼Œæˆ‘åœ¨ç¤¾äº¤ç½‘ç«™ä¸Šå‘äº†ä¸ªå›¾ç‰‡ï¼Œæƒ³è®©å…³æ³¨æˆ‘çš„1000ä¸ªäººçœ‹åˆ°æˆ‘çš„åŠ¨æ€ï¼Œæˆ‘å°±ç§ä¿¡æ¨é€ç»™å…³æ³¨æˆ‘çš„ç”¨æˆ·ï¼Œä½†æ˜¯ç”¨æˆ·æ˜¯å¦å›å¤æˆ‘äº†ä¸åœ¨æˆ‘çš„è€ƒè™‘èŒƒå›´ä¹‹å†…ã€‚<br>ã€€ã€€2ã€å®šæ—¶ä»»åŠ¡ï¼ˆdjango-crontableï¼‰ä¾‹å¦‚ï¼šæˆ‘å‘é€äº†ä¸€ä¸ªæ¿€æ´»é‚®ä»¶å¹¶è®¾ç½®10åˆ†é’Ÿå†…æœ‰æ•ˆï¼Œé‚£ä¹ˆæˆ‘å‘é€ä¹‹åå’Œæˆ‘çš„åå°å¹¶æ²¡æœ‰ä»€ä¹ˆå…³è”äº†ï¼Œå¹¶ä¸å…³å¿ƒè¿™ä¸ªä»»åŠ¡æ˜¯ä¸æ˜¯æœ‰ç›¸åº”</p>
<h3 id="celeryçš„ç»„æˆä»¥åŠåŸç†"><a href="#celeryçš„ç»„æˆä»¥åŠåŸç†" class="headerlink" title="celeryçš„ç»„æˆä»¥åŠåŸç†"></a>celeryçš„ç»„æˆä»¥åŠåŸç†</h3><p>ã€€ã€€ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šbrokerï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€workersï¼ˆæ¶ˆè´¹è€…ï¼šå¤„ç†ä»»åŠ¡ï¼‰ã€backendï¼ˆå­˜å‚¨ç»“æœï¼‰</p>
<p>ã€€ã€€æˆ‘ä»¬åªéœ€è¦å°†è¯·æ±‚æ‰€è¦å¤„ç†çš„ä»»åŠ¡ä¸¢å…¥ä»»åŠ¡é˜Ÿåˆ—brokerä¸­ï¼Œç”±ç©ºé—²çš„workerå»å¤„ç†ä»»åŠ¡å³å¯ï¼Œå¤„ç†çš„ç»“æœä¼šæš‚å­˜åœ¨åå°æ•°æ®åº“backendä¸­ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€å°æœºå™¨æˆ–å¤šå°æœºå™¨<br>ã€€ã€€ä¸ŠåŒæ—¶èµ·å¤šä¸ªworkerè¿›ç¨‹æ¥å®ç°åˆ†å¸ƒå¼åœ°å¹¶è¡Œå¤„ç†ä»»åŠ¡</p>
<h3 id="celeryçš„ä½¿ç”¨"><a href="#celeryçš„ä½¿ç”¨" class="headerlink" title="celeryçš„ä½¿ç”¨"></a>celeryçš„ä½¿ç”¨</h3><p>ã€€ã€€1ã€ç¡®å®šbrokerï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰</p>
<p>ã€€ã€€2ã€ä½¿ç”¨django-celeryå¹¶é…ç½®</p>
<p>ã€€ã€€3ã€delayå¼‚æ­¥è°ƒç”¨</p>
<h3 id="ä½¿ç”¨rabbitmqå’Œredisä½œä¸ºbrokerçš„ä¼˜åŠ£åŠ¿åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä½¿ç”¨rabbitmqå’Œredisä½œä¸ºbrokerçš„ä¼˜åŠ£åŠ¿åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä½¿ç”¨rabbitmqå’Œredisä½œä¸ºbrokerçš„ä¼˜åŠ£åŠ¿åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä½¿ç”¨rabbitmqå’Œredisä½œä¸ºbrokerçš„ä¼˜åŠ£åŠ¿åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><table>
<thead>
<tr>
<th><strong>æœåŠ¡</strong></th>
<th><strong>redis</strong></th>
<th><strong>rabbitmq</strong></th>
</tr>
</thead>
<tbody><tr>
<td>å¯é æ¶ˆè´¹</td>
<td>æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶ä¿è¯æ¶ˆæ¯çš„æ¶ˆè´¹ï¼Œå½“æ¶ˆè´¹è€…æ¶ˆè´¹å¤±è´¥çš„æ—¶å€™ï¼Œæ¶ˆæ¯ä½“ä¸¢å¤±ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ï¼ˆlistï¼‰</td>
<td>å…·æœ‰æ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤ï¼Œå³ä½¿æ¶ˆè´¹è€…æ¶ˆè´¹å¤±è´¥ï¼Œä¹Ÿä¼šè‡ªåŠ¨ä½¿æ¶ˆæ¯ä½“è¿”å›åŸé˜Ÿåˆ—ï¼ŒåŒæ—¶å¯å…¨ç¨‹æŒä¹…åŒ–ï¼Œä¿è¯æ¶ˆæ¯ä½“è¢«æ­£ç¡®æ¶ˆè´¹</td>
</tr>
<tr>
<td>å¯é å‘å¸ƒ</td>
<td>ä¸æä¾›</td>
<td>å…·æœ‰å‘å¸ƒç¡®è®¤åŠŸèƒ½ï¼Œä¿è¯æ¶ˆæ¯è¢«å‘å¸ƒåˆ°æœåŠ¡å™¨</td>
</tr>
<tr>
<td>é«˜å¯ç”¨</td>
<td>å¯ä»¥é‡‡ç”¨ä¸»ä»æ¨¡å¼ï¼Œè¯»å†™åˆ†ç¦»ï¼Œä½†æ˜¯æ•…éšœè½¬ç§»å°šæœªå®Œå–„</td>
<td>é›†ç¾¤é‡‡ç”¨ç£ç›˜ã€å†…å­˜èŠ‚ç‚¹ï¼Œä»»æ„å•ç‚¹æ•…éšœéƒ½ä¸ä¼šå½±å“æ•´ä¸ªé˜Ÿåˆ—çš„æ“ä½œ</td>
</tr>
<tr>
<td>æŒä¹…åŒ–</td>
<td>éœ€è¦å°†æ•´ä¸ªRediså®ä¾‹æŒä¹…åŒ–åˆ°ç£ç›˜</td>
<td>é˜Ÿåˆ—ï¼Œæ¶ˆæ¯ï¼Œéƒ½å¯ä»¥é€‰æ‹©æ˜¯å¦æŒä¹…åŒ–</td>
</tr>
<tr>
<td>æ¶ˆè´¹è€…è´Ÿè½½å‡è¡¡</td>
<td>ä¸æä¾›</td>
<td>æ ¹æ®æ¶ˆè´¹è€…æƒ…å†µï¼Œè¿›è¡Œæ¶ˆæ¯çš„å‡è¡¡åˆ†å‘</td>
</tr>
<tr>
<td>é˜Ÿåˆ—ç›‘æ§</td>
<td>ä¸æä¾›</td>
<td>åå°å¯ä»¥ç›‘æ§æŸä¸ªé˜Ÿåˆ—çš„æ‰€æœ‰ä¿¡æ¯ï¼Œï¼ˆå†…å­˜ï¼Œç£ç›˜ï¼Œæ¶ˆè´¹è€…ï¼Œç”Ÿäº§è€…ï¼Œé€Ÿç‡ç­‰ï¼‰</td>
</tr>
<tr>
<td>æµé‡æ§åˆ¶</td>
<td>ä¸æä¾›</td>
<td>æœåŠ¡å™¨è¿‡è½½çš„æƒ…å†µï¼Œå¯¹ç”Ÿäº§è€…é€Ÿç‡ä¼šè¿›è¡Œé™åˆ¶ï¼Œä¿è¯æœåŠ¡å¯é æ€§</td>
</tr>
</tbody></table>
<p>ã€€ã€€å…·ä½“ä½¿ç”¨rabbitmqè¿˜æ˜¯redisè¿˜æ˜¯è¦æ ¹æ®é¡¹ç›®éœ€æ±‚æ¥è¿›è¡Œåˆ¤æ–­ï¼š</p>
<p>ã€€ã€€ï¼‘ã€å¯¹äºæ¶ˆè€—èµ„æºè¿™æ–¹é¢ä¸æ˜¯å¾ˆä»‹æ„çš„è¯ï¼Œæ³¨é‡æ€§èƒ½å’Œä½“éªŒï¼ŒåŒæ—¶èƒ½å¤Ÿåˆ†å‡ºä¸“å‘˜æ¥ç»´æŠ¤rabbitmqæœåŠ¡å™¨ï¼Œé‚£ä¹ˆrabbitmqè¿˜æ˜¯å¼ºçƒˆæ¨èçš„ï¼Œæ¯•ç«Ÿrabbitmqèƒ½å®ç°çš„å®åœ¨æ˜¯éå¸¸çš„å…¨é¢è€Œä¸”æ•ˆæœä¹Ÿå¥½ã€‚<br>ã€€ã€€2ã€å¦‚æœåœ¨é¡¹ç›®ä¸­ï¼Œåªéœ€è¦å®ç°å¾ˆç®€å•çš„åŠŸèƒ½ï¼ŒåŒæ—¶å¯¹è¿”å›æ¶ˆæ¯ã€æ•°æ®å¤„ç†ä¸Šé¢è¦æ±‚ä¸æ˜¯é‚£ä¹ˆé«˜çš„è¯ï¼Œè¿˜æ˜¯éå¸¸æ¨èä½¿ç”¨redisçš„ï¼Œæ¯•ç«Ÿredisä½¿ç”¨èµ·æ¥æ›´åŠ çš„ä¾¿æ·ã€å¿«é€Ÿã€‚</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ol>
<li><strong>rabbitMQ:å¤§è€Œå…¨ï¼Œæ›´å®‰å…¨ï¼Œæ•°æ®å¤„ç†æ›´å¿«é€Ÿã€‚</strong></li>
<li><strong>redis:ä½¿ç”¨æ›´æ–¹ä¾¿ï¼Œå¼€å‘æ›´å¿«é€Ÿã€‚</strong></li>
</ol>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Celery</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoé…ç½®JWT</title>
    <url>/blog/Django/Django_id_31.html</url>
    <content><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯JWT"><a href="#ä»€ä¹ˆæ˜¯JWT" class="headerlink" title="ä»€ä¹ˆæ˜¯JWT"></a>ä»€ä¹ˆæ˜¯JWT</h3><p>ã€€ã€€JSON Web Tokenï¼ˆJWTï¼‰æ˜¯ç›®å‰æœ€æµè¡Œçš„è·¨åŸŸèº«ä»½éªŒè¯è§£å†³æ–¹æ¡ˆã€‚è¯¥tokenè¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»é™†ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWTçš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥tokenä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p>
<a id="more"></a>

<h3 id="JWT-ç‰¹ç‚¹"><a href="#JWT-ç‰¹ç‚¹" class="headerlink" title="JWT ç‰¹ç‚¹"></a>JWT ç‰¹ç‚¹</h3><p>å› ä¸ºjsonçš„é€šç”¨æ€§ï¼ŒJWTæ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ã€‚<br>å­—èŠ‚å ç”¨å¾ˆå°,ä¾¿äºä¼ è¾“.<br>ä¸¥æ ¼çš„ç»“æ„åŒ–ã€‚å®ƒè‡ªèº«ï¼ˆåœ¨ payloadæœ‰æ•ˆè½½è· ä¸­ï¼‰å°±åŒ…å«äº†æ‰€æœ‰ä¸ç”¨æˆ·ç›¸å…³çš„éªŒè¯æ¶ˆæ¯ï¼Œå¦‚ç”¨æˆ·å¯è®¿é—®è·¯ç”±ã€è®¿é—®æœ‰æ•ˆæœŸç­‰ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ— éœ€å†å»è¿æ¥æ•°æ®åº“éªŒè¯ä¿¡æ¯çš„æœ‰æ•ˆæ€§ï¼Œå¹¶ä¸” payload æ”¯æŒä¸ºä½ çš„åº”ç”¨è€Œå®šåˆ¶åŒ–ã€‚</p>
<h3 id="JWTç»„æˆ"><a href="#JWTç»„æˆ" class="headerlink" title="JWTç»„æˆ"></a>JWTç»„æˆ</h3><h4 id="å¤´éƒ¨ï¼ˆheader"><a href="#å¤´éƒ¨ï¼ˆheader" class="headerlink" title="å¤´éƒ¨ï¼ˆheader)"></a>å¤´éƒ¨ï¼ˆheader)</h4><p>ã€€ã€€headerå…¸å‹çš„ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå£°æ˜ç±»å‹ jwt å’Œå£°æ˜åŠ å¯†çš„ç®—æ³•åç§°</p>
<p>ã€€ã€€å¦‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"alg"</span>: <span class="string">"HS256"</span>,</span><br><span class="line">	<span class="string">"typ"</span>: <span class="string">"JWT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="è½½è·ï¼ˆpayloadï¼‰"><a href="#è½½è·ï¼ˆpayloadï¼‰" class="headerlink" title="è½½è·ï¼ˆpayloadï¼‰"></a>è½½è·ï¼ˆpayloadï¼‰</h4><p>ã€€ã€€è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ã€‚è¿™äº›æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<p>1ã€æ ‡å‡†ä¸­æ³¨å†Œå£°æ˜ï¼šå»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼šiss (issuer), exp (expiration time), sub (subject), aud (audience)ç­‰ã€‚<br>2ã€å…¬å…±çš„å£°åï¼šå¯ä»¥éšæ„å®šä¹‰ã€‚<br>3ã€ç§æœ‰çš„å£°æ˜ï¼š ç”¨äºåœ¨åŒæ„ä½¿ç”¨å®ƒä»¬çš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºbase64æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œéƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p>
<p>ã€€ã€€å¦‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="string">"sub"</span>: <span class="string">"1234567890"</span>,</span><br><span class="line">	<span class="string">"name"</span>: <span class="string">"John Doe"</span>,</span><br><span class="line">	<span class="string">"admin"</span>: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="ç­¾è¯ï¼ˆsignature"><a href="#ç­¾è¯ï¼ˆsignature" class="headerlink" title="ç­¾è¯ï¼ˆsignature)"></a>ç­¾è¯ï¼ˆsignature)</h4><p>ã€€ã€€è¦åˆ›å»ºç­¾åéƒ¨åˆ†ï¼Œä½ å¿…é¡»é‡‡ç”¨ç¼–ç è¡¨å¤´ï¼Œç¼–ç çš„æœ‰æ•ˆè½½è·ï¼Œä¸€ä¸ªç§˜é’¥ã€‚ç„¶åç”¨Headerå¤´éƒ¨é‡Œçš„å£°æ˜çš„ç®—æ³•åŠ å¯†ç»™å®ƒåŠ å¯†ï¼Œå¾—åˆ°çš„å°±æ˜¯ jwt çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</p>
<p>ã€€ã€€å¦‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">HMACSHA256(</span><br><span class="line">	base64UrlEncode(header) + <span class="string">"."</span> +</span><br><span class="line">	base64UrlEncode(payload),</span><br><span class="line"> 	secret</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<p><code>æ³¨ï¼šè¿™ä¸€æ®µæ˜¯æœ€é‡è¦çš„æ•æ„Ÿä¿¡æ¯ï¼Œåªèƒ½åœ¨æœåŠ¡ç«¯è§£å¯†ï¼Œå…¶ä¸­secretæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ã€‚</code></p>
<h3 id="JWTä¼˜åŠ¿"><a href="#JWTä¼˜åŠ¿" class="headerlink" title="JWTä¼˜åŠ¿"></a>JWTä¼˜åŠ¿</h3><p>ã€€ã€€1ã€å› ä¸ºjsonçš„é€šç”¨æ€§ï¼Œæ‰€ä»¥JWTæ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ï¼ŒåƒJAVA,JavaScript,NodeJS,PHPç­‰å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>ã€€ã€€2ã€å› ä¸ºæœ‰äº†payloadéƒ¨åˆ†ï¼Œæ‰€ä»¥JWTå¯ä»¥åœ¨è‡ªèº«å­˜å‚¨ä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ‰€å¿…è¦çš„éæ•æ„Ÿä¿¡æ¯ã€‚</p>
<p>ã€€ã€€3ã€ä¾¿äºä¼ è¾“ï¼Œjwtçš„æ„æˆéå¸¸ç®€å•ï¼Œå­—èŠ‚å ç”¨å¾ˆå°ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸ä¾¿äºä¼ è¾“çš„ã€‚</p>
<p>ã€€ã€€4ã€å®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯, æ‰€ä»¥å®ƒæ˜“äºåº”ç”¨çš„æ‰©å±•</p>
<h3 id="JWTå’ŒåŠ£åŠ¿"><a href="#JWTå’ŒåŠ£åŠ¿" class="headerlink" title="JWTå’ŒåŠ£åŠ¿"></a>JWTå’ŒåŠ£åŠ¿</h3><p>ã€€ã€€1ã€ä¿æŠ¤å¥½secretç§é’¥ï¼Œè¯¥ç§é’¥éå¸¸é‡è¦ã€‚</p>
<p>ã€€ã€€2ã€ä¸€æ—¦tokenæ³„éœ²ï¼Œåœ¨æœ‰æ•ˆæœŸå†…ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨è¯¥tokenè¿›å…¥ç³»ç»Ÿï¼Œä¸”ä¸å¯æ’¤å›</p>
<h3 id="JWTå®‰å…¨è¦æ±‚"><a href="#JWTå®‰å…¨è¦æ±‚" class="headerlink" title="JWTå®‰å…¨è¦æ±‚"></a>JWTå®‰å…¨è¦æ±‚</h3><p>ã€€ã€€1ã€ä¸åº”è¯¥åœ¨jwtçš„payloadéƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å¯è§£å¯†çš„éƒ¨åˆ†ã€‚</p>
<p>ã€€ã€€2ã€å¦‚æœå¯ä»¥ï¼Œè¯·ä½¿ç”¨httpsåè®®</p>
<h3 id="JWTæµç¨‹"><a href="#JWTæµç¨‹" class="headerlink" title="JWTæµç¨‹"></a>JWTæµç¨‹</h3><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/JWT/01.png">

<h3 id="Djangoä¸­ä½¿ç”¨JWT"><a href="#Djangoä¸­ä½¿ç”¨JWT" class="headerlink" title="Djangoä¸­ä½¿ç”¨JWT"></a>Djangoä¸­ä½¿ç”¨JWT</h3><p>ã€€ã€€<strong>å®‰è£…ä¾èµ–</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">pip install djangorestframework-jwt</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€é…ç½®settingsæ–‡ä»¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½®jwt</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">JWT_AUTH = &#123;</span><br><span class="line">	<span class="string">'JWT_AUTH_HEADER_PREFIX'</span>: <span class="string">'JWT'</span>,</span><br><span class="line">	<span class="string">'JWT_EXPIRATION_DELTA'</span>: datetime.timedelta(days=<span class="number">1</span>), <span class="comment">#è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">	<span class="string">'JWT_RESPONSE_PAYLOAD_HANDLER'</span>:</span><br><span class="line">	<span class="string">'miaoapp.user.jwt_response_payload_handler'</span>,  <span class="comment"># é‡æ–°loginç™»å½•è¿”å›å‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="comment"># èº«ä»½è®¤è¯</span></span><br><span class="line">	<span class="string">'DEFAULT_AUTHENTICATION_CLASSES'</span>: (</span><br><span class="line">		<span class="string">'rest_framework_jwt.authentication.JSONWebTokenAuthentication'</span>,</span><br><span class="line">		<span class="string">'rest_framework.authentication.SessionAuthentication'</span>,</span><br><span class="line">		<span class="string">'rest_framework.authentication.BasicAuthentication'</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment"># å…¨å±€é…ç½®JWTéªŒè¯è®¾ç½®</span></span><br><span class="line">    <span class="comment"># 'DEFAULT_PERMISSION_CLASSES': (</span></span><br><span class="line">    <span class="comment">#             'rest_framework.permissions.AllowAny',</span></span><br><span class="line">    <span class="comment">#         ),</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># é‡å†™éªŒè¯æ–¹å¼ï¼Œæ·»åŠ é‚®ç®±æ‰‹æœºå·ç™»å½•</span></span><br><span class="line">AUTHENTICATION_BACKENDS = [</span><br><span class="line">	<span class="string">'miaoapp.user.UsernameMobileAuthBackend'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€åœ¨ç”¨æˆ·é¡µé¢åŠ å…¥ä»¥ä¸‹å‡½æ•°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°ç”¨æˆ·ç™»å½•è¿”å›å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jwt_response_payload_handler</span><span class="params">(token, user=None, request=None)</span>:</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">	:param token: jwtç”Ÿæˆçš„tokenå€¼</span></span><br><span class="line"><span class="string">	:param user: Userå¯¹è±¡</span></span><br><span class="line"><span class="string">	:param request: è¯·æ±‚</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		<span class="string">'token'</span>: token,</span><br><span class="line">		<span class="string">'user_id'</span>: user.id,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºç™»å½•å¢åŠ æ‰‹æœºç™»å½•å’Œé‚®ç®±ç™»å½•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UsernameMobileAuthBackend</span><span class="params">(ModelBackend)</span>:</span></span><br><span class="line">	<span class="comment"># é‡å†™éªŒè¯æ–¹å¼</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">authenticate</span><span class="params">(self, request, username=None, password=None, **kwargs)</span>:</span></span><br><span class="line">		user = User.objects.get(Q(username=username) | Q(phone=username) | Q(email=username))</span><br><span class="line">		<span class="keyword">if</span> user <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> user.check_password(password):</span><br><span class="line">			<span class="keyword">return</span> user</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ç™»å½•æ—¶ç”Ÿæˆjwtï¼Œå–æ¶ˆjwtéªŒè¯çš„è·¯ç”±åŠè§£ætokenè·å–ç”¨æˆ·ä¿¡æ¯(å®ä¾‹)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥rest_framework_jwtæ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.settings <span class="keyword">import</span> api_settings</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç™»å½•æ—¶ä½¿ç”¨æ¨¡å—å¿«api_settings</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Login</span><span class="params">(APIView)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">		userdata = request.data</span><br><span class="line">		user = authenticate(username=userdata[<span class="string">'username'</span>], password=userdata[<span class="string">'password'</span>])</span><br><span class="line">		<span class="comment"># åˆ¤æ–­ç”¨æˆ·æˆ–å¯†ç æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">		<span class="keyword">if</span> <span class="keyword">not</span> user:</span><br><span class="line">			<span class="keyword">return</span> Response(&#123;<span class="string">'code'</span>: <span class="number">405</span>, <span class="string">'message'</span>: <span class="string">'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'</span>&#125;)</span><br><span class="line">		<span class="comment"># ç™»å½•æˆåŠŸ</span></span><br><span class="line">		<span class="comment"># ç”Ÿæˆjwt</span></span><br><span class="line">		jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER</span><br><span class="line">		jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER</span><br><span class="line"></span><br><span class="line">		payload = jwt_payload_handler(user)</span><br><span class="line">		token = jwt_encode_handler(payload)</span><br><span class="line">		powerPid = UserPower.objects.filter(uid=int(user.id)).first()</span><br><span class="line">		resp = &#123;<span class="string">'code'</span>: <span class="number">200</span>, <span class="string">'message'</span>: <span class="string">'ç™»å½•æˆåŠŸ'</span>, <span class="string">'token'</span>: token, <span class="string">'username'</span>: user.username, <span class="string">'photo'</span>: user.photo,<span class="string">'pid'</span>: powerPid.pid&#125;</span><br><span class="line">		<span class="keyword">return</span> Response(resp)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£æjwt_tokençš„æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.utils <span class="keyword">import</span> jwt_decode_handler</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‰ç«¯ä¼ è¿‡æ¥tokenï¼Œåç«¯è·å–ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨jwt_decode_handleræ¨¡å—</span></span><br><span class="line"><span class="comment"># è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span><span class="params">(APIView)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">		token = request.data.get(<span class="string">"token"</span>, <span class="literal">None</span>)</span><br><span class="line">		<span class="comment"># è·å–æ·»åŠ å‚æ•°</span></span><br><span class="line">		user = jwt_decode_handler(token)	<span class="comment"># è§£æå‡ºç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">		uid = user.get(<span class="string">'user_id'</span>)	<span class="comment"># è·å–ç”¨æˆ·id</span></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">'code'</span>: <span class="number">200</span>&#125;)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># å¯¼å…¥ä¸éœ€è¦éªŒè¯tokenå®ç°è®¿é—®è·¯ç”±</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> AllowAny</span><br><span class="line"><span class="comment"># ä½¿ç”¨æ–¹æ³•ï¼Œåœ¨å‡½æ•°å®šä¹‰ä¹‹å‰ä½¿ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PowerList</span><span class="params">(APIView)</span>:</span></span><br><span class="line">	permission_classes = [AllowAny]</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>JWT</tag>
      </tags>
  </entry>
  <entry>
    <title>Python å®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ã€ç±»æ–¹æ³•ã€å±æ€§æ–¹æ³•ã€é­”æ³•æ–¹æ³•</title>
    <url>/blog/Python/Python_id_15.html</url>
    <content><![CDATA[<h3 id="å®ä¾‹æ–¹æ³•"><a href="#å®ä¾‹æ–¹æ³•" class="headerlink" title="å®ä¾‹æ–¹æ³•"></a>å®ä¾‹æ–¹æ³•</h3><p>ã€€ã€€å®ä¾‹æ–¹æ³•åªèƒ½é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨ï¼Œä¸èƒ½é€šè¿‡ç±»è¿›è¡Œè°ƒç”¨ã€‚å®ä¾‹æ–¹æ³•å†å®šä¹‰æ—¶å€™ä½¿ç”¨å…³é”®å­—self,selfä»£è¡¨å®ä¾‹å¯¹è±¡æœ¬èº«ã€‚</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">	x=<span class="number">100</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(self,y)</span>:</span></span><br><span class="line">		self.x+=y</span><br><span class="line">a=A()</span><br><span class="line">a.fun(<span class="number">10</span>)</span><br><span class="line">print(a.x)</span><br><span class="line">A.fun(<span class="number">10</span>)</span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line"><span class="number">110</span></span><br><span class="line">Traceback (most recent call last): <span class="comment">#ç±»è°ƒç”¨é”™è¯¯</span></span><br><span class="line">  File <span class="string">"/home/34f17b632da0cc986bc0f291c0518783.py"</span>, line <span class="number">8</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    A.fun(<span class="number">10</span>)</span><br><span class="line">TypeError: fun() missing <span class="number">1</span> required positional argument: <span class="string">'y'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h3><p>é™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨å®ä¾‹å¯¹è±¡è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç±»è¿›è¡Œè°ƒç”¨ï¼Œä»–çš„çš„ç‰¹ç‚¹æ²¡æœ‰å‚æ•°é™åˆ¶ï¼Œå®šä¹‰æ—¶éœ€è¦åœ¨å‡½æ•°å‰åŠ @staticmethod</p>
<p>1ã€ä½œç”¨ï¼šé™æ€æ–¹æ³•å¯ä»¥æ›´å¥½çš„ç»„ç»‡ä»£ç ï¼Œé˜²æ­¢ä»£ç å˜å¤§åå˜å¾—æ¯”è¾ƒæ··ä¹±ã€‚</p>
<p>2ã€ç‰¹æ€§: é™æ€æ–¹æ³•åªæ˜¯åä¹‰ä¸Šå½’ç±»ç®¡ç†ï¼Œå®é™…ä¸Šåœ¨é™æ€æ–¹æ³•é‡Œè®¿é—®ä¸äº†ç±»æˆ–åˆ™å®ä¾‹ä¸­çš„ä»»ä½•å±æ€§<br>ã€€ã€€1ï¼‰æˆ‘ä»¬è¦å†™ä¸€ä¸ªåªåœ¨ç±»ä¸­è¿è¡Œè€Œä¸åœ¨å®ä¾‹ä¸­è¿è¡Œçš„æ–¹æ³•.<br>ã€€ã€€2ï¼‰ç»å¸¸æœ‰ä¸€äº›è·Ÿç±»æœ‰å…³ç³»çš„åŠŸèƒ½ä½†åœ¨è¿è¡Œæ—¶åˆä¸éœ€è¦å®ä¾‹å’Œç±»å‚ä¸çš„æƒ…å†µä¸‹éœ€è¦ç”¨åˆ°é™æ€æ–¹æ³•.<br>ã€€ã€€3ï¼‰æ¯”å¦‚æ›´æ”¹ç¯å¢ƒå˜é‡æˆ–è€…ä¿®æ”¹å…¶ä»–ç±»çš„å±æ€§ç­‰èƒ½ç”¨åˆ°é™æ€æ–¹æ³•.<br>ã€€ã€€4ï¼‰è¿™ç§æƒ…å†µå¯ä»¥ç›´æ¥ç”¨å‡½æ•°è§£å†³, ä½†è¿™æ ·åŒæ ·ä¼šæ‰©æ•£ç±»å†…éƒ¨çš„ä»£ç ï¼Œé€ æˆç»´æŠ¤å›°éš¾.</p>
<p>3ã€è°ƒç”¨æ–¹å¼: æ—¢å¯ä»¥è¢«ç±»ç›´æ¥è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹è°ƒç”¨</p>
<p><strong>@staticmethodé™æ€æ–¹æ³•ï¼š</strong></p>
 <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">		self.name = name</span><br><span class="line"><span class="meta">	@staticmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">()</span>:</span></span><br><span class="line">		print(<span class="string">"I am a static method"</span>)</span><br><span class="line"></span><br><span class="line">d = Dog(<span class="string">"ChenRonghua"</span>)</span><br><span class="line">d.eat()                    	 <span class="comment"># æ–¹æ³•1ï¼šä½¿ç”¨å®ä¾‹è°ƒç”¨</span></span><br><span class="line">Dog.eat()                   <span class="comment"># æ–¹æ³•2ï¼šä½¿ç”¨ç±»ç›´æ¥è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç»“æœ</span></span><br><span class="line">I am a static method           <span class="comment"># å®ä¾‹è°ƒç”¨</span></span><br><span class="line">I am a static method           <span class="comment"># ç±»è°ƒç”¨</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ç±»æ–¹æ³•"><a href="#ç±»æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•"></a>ç±»æ–¹æ³•</h3><p>â€ƒâ€ƒå¯ä»¥è¢«ç±»è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥è¢«å®ä¾‹å¯¹è±¡è°ƒç”¨ï¼Œå®ä¾‹è°ƒç”¨å¯ä»¥ç»™ç±»å¢åŠ å±æ€§ï¼Œç±»çš„å±æ€§ä¿®æ”¹éœ€è¦é€šè¿‡ç±»è¿›è¡Œä¿®æ”¹ï¼Œç±»æ–¹æ³•éœ€è¦ä½¿ç”¨å…³é”®å­—cls,å®šä¹‰æ—¶å€™éœ€è¦åœ¨å‡½æ•°å‰åŠ @classmethod</p>
<p>ä½œç”¨ï¼šæ— éœ€å®ä¾‹åŒ–ç›´æ¥è¢«ç±»è°ƒç”¨<br>ç‰¹æ€§: ç±»æ–¹æ³•åªèƒ½è®¿é—®ç±»å˜é‡ï¼Œä¸èƒ½è®¿é—®å®ä¾‹å˜é‡<br>ç±»æ–¹æ³•ä½¿ç”¨åœºæ™¯ï¼š å½“æˆ‘ä»¬è¿˜æœªåˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯éœ€è¦è°ƒç”¨ç±»ä¸­çš„æ–¹æ³•<br>è°ƒç”¨æ–¹å¼: æ—¢å¯ä»¥è¢«ç±»ç›´æ¥è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹è°ƒ<br><strong>@classmethodç±»æ–¹æ³•ï¼š</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">	name = <span class="string">'ç±»å˜é‡'</span> <span class="comment">#åœ¨è¿™é‡Œå¦‚æœä¸å®šä¹‰ç±»å˜é‡ä»…å®šä¹‰å®ä¾‹å˜é‡ä¾ç„¶æŠ¥é”™</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">		self.name = <span class="string">'å®ä¾‹å˜é‡'</span></span><br><span class="line">		self.name = name</span><br><span class="line"><span class="meta">	@classmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self,food)</span>:</span></span><br><span class="line">		print(<span class="string">"%s is eating %s"</span>%(self.name,food))</span><br><span class="line">        </span><br><span class="line">Dog.eat(<span class="string">'baozi'</span>)                   <span class="comment">#æ–¹æ³•1ï¼šä½¿ç”¨ç±»ç›´æ¥è°ƒç”¨</span></span><br><span class="line">d = Dog(<span class="string">"ChenRonghua"</span>)          </span><br><span class="line">d.eat(<span class="string">"åŒ…å­"</span>)                      <span class="comment">#æ–¹æ³•2ï¼šä½¿ç”¨å®ä¾‹dè°ƒç”¨</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å±æ€§æ–¹æ³•"><a href="#å±æ€§æ–¹æ³•" class="headerlink" title="å±æ€§æ–¹æ³•"></a>å±æ€§æ–¹æ³•</h3><p>ã€€ã€€<strong>ä½œç”¨ï¼šæŠŠç±»çš„å‡½æ•°å±æ€§ï¼Œå°è£…æˆç±»ä¼¼æ•°æ®å±æ€§ã€‚å†è°ƒç”¨å‡½æ•°printmassage æ—¶å€™ï¼Œå¿…é¡»ä¸å¸¦ï¼ˆï¼‰æ‰§è¡Œã€‚**</strong></p>
<p><strong>@propertyå±æ€§æ–¹æ³•ï¼š</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">		self.name = name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">" %s is eating"</span> % self.name)</span><br><span class="line">d = Dog(<span class="string">"ChenRonghua"</span>)</span><br><span class="line">d.eat()</span><br><span class="line"><span class="comment"># è°ƒç”¨ä¼šå‡ºä»¥ä¸‹é”™è¯¯ï¼Œ è¯´NoneType is not callable, å› ä¸ºeatæ­¤æ—¶å·²ç»å˜æˆä¸€ä¸ªé™æ€å±æ€§äº†ï¼Œ </span></span><br><span class="line"><span class="comment"># ä¸æ˜¯æ–¹æ³•äº†ï¼Œ æƒ³è°ƒç”¨å·²ç»ä¸éœ€è¦åŠ ()å·äº†ï¼Œç›´æ¥d.eatå°±å¯ä»¥äº†</span></span><br></pre></td></tr></table></figure></div>

<p><strong>èˆªç©ºå…¬å¸å…·ä½“å®ä¾‹ï¼š</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flight</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">		self.flight_name = name</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">checking_status</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"checking flight %s status "</span> % self.flight_name)</span><br><span class="line">		<span class="keyword">return</span>  <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	@property</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">flight_status</span><span class="params">(self)</span>:</span></span><br><span class="line">		status = self.checking_status()</span><br><span class="line">		<span class="keyword">if</span> status == <span class="number">0</span> :</span><br><span class="line">			print(<span class="string">"flight got canceled..."</span>)</span><br><span class="line">		<span class="keyword">elif</span> status == <span class="number">1</span> :</span><br><span class="line">			print(<span class="string">"flight is arrived..."</span>)</span><br><span class="line">		<span class="keyword">elif</span> status == <span class="number">2</span>:</span><br><span class="line">			print(<span class="string">"flight has departured already..."</span>)</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			print(<span class="string">"cannot confirm the flight status...,please check later"</span>)</span><br><span class="line"></span><br><span class="line">f = Flight(<span class="string">"CA980"</span>)</span><br><span class="line">f.flight_status</span><br></pre></td></tr></table></figure></div>

<h3 id="é­”æ³•æ–¹æ³•"><a href="#é­”æ³•æ–¹æ³•" class="headerlink" title="é­”æ³•æ–¹æ³•"></a>é­”æ³•æ–¹æ³•</h3><p>ã€€ã€€1ã€typeç”Ÿæˆç±»è°ƒç”¨é¡ºåº<br>ã€€ã€€ã€€ã€€new : å…ˆäº__ <strong>init</strong> __ æ–¹æ³•ï¼Œæ¯ç”Ÿæˆä¸€ä¸ªå®ä¾‹æ‰§è¡Œä¸€æ¬¡ï¼Œnew ç±»æ–¹æ³•åˆ›å»ºå®ä¾‹å¯¹è±¡<br>ã€€ã€€ã€€ã€€init : __ <strong>init</strong> __ æ–¹æ³•æ¯ç”Ÿæˆä¸€ä¸ªå®ä¾‹å°±ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆå§‹åŒ–å®ä¾‹å¯¹è±¡<br>ã€€ã€€ã€€ã€€call : åä¸__ <strong>init</strong> __ æ–¹æ³•ï¼ŒC()() ä½¿ç”¨ç±»å†åŠ ä¸€ä¸ªæ‹¬å·è°ƒç”¨ï¼Œ Cä¸ºç±»åç§°<br>ã€€ã€€ã€€ã€€del : ææ„æ–¹æ³•ï¼Œåˆ é™¤æ— ç”¨çš„å†…å­˜å¯¹è±¡ï¼ˆå½“ç¨‹åºç»“æŸä¼šè‡ªåŠ¨è‡ªè¡Œææ„æ–¹æ³•ï¼‰<br>ã€€ã€€2ã€ç±»å®ä¾‹åŒ–æ—¶é­”æ³•æ–¹æ³•è°ƒç”¨é¡ºåº</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">		print(<span class="string">'__new__'</span>)</span><br><span class="line">		<span class="keyword">return</span> object.__new__(cls)   <span class="comment"># å¿…é¡»è¿”å›çˆ¶ç±»çš„__new__æ–¹æ³•ï¼Œå¦åˆ™ä¸ä¸æ‰§è¡Œ__init__æ–¹æ³•ï¼Œæ— æ³•åˆ›å»ºå®ä¾‹</span></span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">		print(<span class="string">'__init__'</span>)</span><br><span class="line">		self.name = name</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span>                <span class="comment"># ä½œç”¨ï¼šæ‰“å°å®ä¾‹æ—¶æ˜¾ç¤ºæŒ‡å®šå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å†…å­˜åœ°å€</span></span><br><span class="line">		print(<span class="string">'__str__'</span>)</span><br><span class="line">		<span class="keyword">return</span> self.name</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args, **kwargs)</span>:</span>        <span class="comment"># å½“æ‰§è¡ŒC()(*args) æˆ–è€… s1(*args) å°±ä¼šæ‰§è¡Œ__call__</span></span><br><span class="line">		print(<span class="string">'__call__'</span>,*args)</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span>                <span class="comment"># ä½œç”¨ï¼šæ¸…é™¤æ— ç”¨çš„å®ä¾‹å¯¹å†…å­˜çš„æš‚ç”¨</span></span><br><span class="line">		print(<span class="string">'__del__'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#1ã€å®ä¾‹åŒ–æ—¶æœºä¼šæ‰§è¡Œ__new__ã€__init__</span></span><br><span class="line">s1 = Student(<span class="string">'tom'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#2ã€æ‰§è¡Œ å®ä¾‹()  å°±ä¼šæ‰§è¡Œ__call__ æ–¹æ³•ï¼Œå¹¶å°†å‚æ•°ä¼ é€’ç»™__call__å‡½æ•°</span></span><br><span class="line">s1(<span class="string">'call01'</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#3ã€å½“æ‰“å°å®ä¾‹æ—¶å°±ä¼šæ‰§è¡Œ __str__ æ–¹æ³•ä¸‹è¿”å›çš„å­—ç¬¦ä¸²ï¼ˆé»˜è®¤è¿”å›çš„å®ä¾‹åœ°å€ï¼‰</span></span><br><span class="line">print(s1)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#4ã€ææ„æ–¹æ³•ï¼šå½“åˆ é™¤å®ä¾‹æ—¶å°±ä¼šè°ƒç”¨ __del__ æ–¹æ³•</span></span><br><span class="line"><span class="keyword">del</span> s1</span><br><span class="line"><span class="comment"># ææ„æ–¹æ³•ä½œç”¨ï¼šåœ¨ç¨‹åºç»“æŸåä¼šè‡ªåŠ¨æ‰§è¡Œææ„æ–¹æ³•åˆ é™¤æ‰€æœ‰å®ä¾‹</span></span><br><span class="line"><span class="comment"># ä½†æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æœ‰å¾ˆå¤šå®ä¾‹æ˜¯æ— ç”¨çš„ï¼Œä½†æ˜¯pythonå†…å­˜å›æ”¶æœºåˆ¶å´ä¸ä¼šè‡ªåŠ¨åˆ é™¤ä»–ä»¬ï¼Œè¿™æ ·å°±æµªè´¹å†…å­˜</span></span><br><span class="line"><span class="comment"># æˆ‘ä»¬å¯ä»¥æ‰§è¡Œ del s1 ï¼Œé‚£ä¹ˆåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œpythonå†…å­˜å›æ”¶æœºåˆ¶ä¼šæ£€æµ‹åˆ°è¿™äº›å®ä¾‹æ—¶æ— ç”¨çš„ï¼Œæ‰ä¼šåˆ é™¤</span></span><br><span class="line"><span class="comment"># å…¶å®æˆ‘ä»¬æ‰§è¡Œdel s1ï¼Œå¹¶æ²¡æœ‰å›æ”¶å†…å­˜ï¼Œåªä¸è¿‡æ˜¯æ‘˜é™¤é—¨ç‰Œå·ï¼Œpythonå†…å­˜å›æ”¶æœºåˆ¶å‘ç°æ²¡æœ‰é—¨ç‰Œå·åä¼šè‡ªåŠ¨å›æ”¶å†…å­˜</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>å®ä¾‹</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span><span class="params">(object)</span>:</span></span><br><span class="line">	top_score = <span class="number">0</span>  <span class="comment"># æ¸¸æˆæœ€é«˜åˆ†ï¼Œç±»å±æ€§/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">	@staticmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">show_help</span><span class="params">()</span>:</span>  <span class="comment"># é™æ€æ–¹æ³•</span></span><br><span class="line">		print(<span class="string">"å¸®åŠ©ä¿¡æ¯ï¼šè®©åƒµå°¸èµ°è¿›æˆ¿é—´"</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">	@classmethod</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">show_top_score</span><span class="params">(cls)</span>:</span>  <span class="comment"># ç±»æ–¹æ³•</span></span><br><span class="line">		print(<span class="string">"æ¸¸æˆæœ€é«˜åˆ†æ˜¯ %d"</span> % cls.top_score)</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, player_name)</span>:</span></span><br><span class="line">		self.player_name = player_name  <span class="comment"># å®ä¾‹å±æ€§</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">start_game</span><span class="params">(self)</span>:</span>  <span class="comment"># å®ä¾‹æ–¹æ³•</span></span><br><span class="line">		print(<span class="string">"[%s] å¼€å§‹æ¸¸æˆ..."</span> % self.player_name)</span><br><span class="line"></span><br><span class="line">		Game.top_score = <span class="number">999</span>  <span class="comment"># ä½¿ç”¨ç±»å.ä¿®æ”¹å†å²æœ€é«˜åˆ†</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. æŸ¥çœ‹æ¸¸æˆå¸®åŠ©</span></span><br><span class="line">Game.show_help()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æŸ¥çœ‹æ¸¸æˆæœ€é«˜åˆ†</span></span><br><span class="line">Game.show_top_score()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. åˆ›å»ºæ¸¸æˆå¯¹è±¡ï¼Œå¼€å§‹æ¸¸æˆ</span></span><br><span class="line">game = Game(<span class="string">"å°æ˜"</span>)</span><br><span class="line">game.start_game()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. æ¸¸æˆç»“æŸï¼ŒæŸ¥çœ‹æ¸¸æˆæœ€é«˜åˆ†</span></span><br><span class="line">Game.show_top_score()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¡ˆä¾‹å°ç»“</span></span><br><span class="line"><span class="comment"># å®ä¾‹æ–¹æ³• â€”â€” æ–¹æ³•å†…éƒ¨éœ€è¦è®¿é—® å®ä¾‹å±æ€§</span></span><br><span class="line"><span class="comment"># â€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒ å®ä¾‹æ–¹æ³•å†…éƒ¨å¯ä»¥ä½¿ç”¨ ç±»å. è®¿é—®ç±»å±æ€§</span></span><br><span class="line"><span class="comment"># ç±» æ–¹ æ³• â€”â€” æ–¹æ³•å†…éƒ¨ åª éœ€è¦è®¿é—® ç±»å±æ€§</span></span><br><span class="line"><span class="comment"># é™æ€æ–¹æ³• â€”â€” æ–¹æ³•å†…éƒ¨ï¼Œä¸éœ€è¦è®¿é—® å®ä¾‹å±æ€§ å’Œ ç±»å±æ€§</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>å®ä¾‹æ–¹æ³•</tag>
        <tag>é™æ€æ–¹æ³•</tag>
        <tag>ç±»æ–¹æ³•</tag>
        <tag>å±æ€§æ–¹æ³•</tag>
        <tag>é­”æ³•æ–¹æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title>Python æ­£åˆ™è¡¨è¾¾å¼</title>
    <url>/blog/Python/Python_id_14.html</url>
    <content><![CDATA[<h3 id="æ­£åˆ™è¡¨è¾¾å¼çš„æ ¼å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼çš„æ ¼å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çš„æ ¼å¼"></a>æ­£åˆ™è¡¨è¾¾å¼çš„æ ¼å¼</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re			<span class="comment"># å¯¼å…¥reæ¨¡å—</span></span><br><span class="line"></span><br><span class="line">ret = re.match(â€œæ­£åˆ™è¡¨è¾¾å¼â€,â€éœ€è¦åŒ¹é…çš„å­—ç¬¦ä¸²â€)		<span class="comment"># ä½¿ç”¨matchæ–¹æ³•æ¥åŒ¹é…å†…å®¹</span></span><br><span class="line"></span><br><span class="line">ret.group()	<span class="comment"># å¦‚æœåŒ¹é…åˆ°äº†å†…å®¹ï¼Œåˆ™å¯ä»¥é€šè¿‡groupæ–¹æ³•æ¥æå–æ•°æ®</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€é¦–å…ˆè¦é€šè¿‡åŸŸåæ‰¾åˆ°IPï¼Œå¦‚æœç¼“å­˜é‡Œæ²¡æœ‰å°±è¦è¯·æ±‚DNSæœåŠ¡å™¨ï¼›å¾—åˆ°IPåå¼€å§‹äºç›®çš„ä¸»æœºè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹TCPè¿æ¥ï¼›è¿æ¥å»ºç«‹åè¿›è¡ŒHTTPè®¿é—®ï¼Œä¼ è¾“å¹¶è·å–ç½‘é¡µå†…å®¹ï¼›<br>ã€€ã€€ä¼ è¾“å®Œåä¸ç›®çš„ä¸»æœºå››æ¬¡æŒ¥æ‰‹æ¥æ–­å¼€TCPè¿æ¥ã€‚</p>
<a id="more"></a>

<h3 id="äºŒã€åŒ¹é…å•ä¸ªå­—ç¬¦"><a href="#äºŒã€åŒ¹é…å•ä¸ªå­—ç¬¦" class="headerlink" title="äºŒã€åŒ¹é…å•ä¸ªå­—ç¬¦"></a>äºŒã€åŒ¹é…å•ä¸ªå­—ç¬¦</h3><table>
<thead>
<tr>
<th align="center">å­—ç¬¦</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td>åŒ¹é…ä»»æ„1ä¸ªå­—ç¬¦ï¼ˆé™¤äº†\nï¼‰</td>
</tr>
<tr>
<td align="center">[ ]</td>
<td>åŒ¹é…[ ]ä¸­åˆ—ä¸¾çš„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">\d</td>
<td>åŒ¹é…æ•°å­—ï¼Œå³0-9</td>
</tr>
<tr>
<td align="center">\D</td>
<td>åŒ¹é…éæ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­—</td>
</tr>
<tr>
<td align="center">\s</td>
<td>åŒ¹é…ç©ºç™½ï¼Œå³ ç©ºæ ¼</td>
</tr>
<tr>
<td align="center">\S</td>
<td>åŒ¹é…éç©ºç™½</td>
</tr>
<tr>
<td align="center">\w</td>
<td>åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³a-zã€A-Zã€0-9ã€_</td>
</tr>
<tr>
<td align="center">\W</td>
<td>åŒ¹é…éå•è¯å­—ç¬¦</td>
</tr>
</tbody></table>
<p><code>æ‰©å±•ï¼šå› ä¸º . æ˜¯åŒ¹é…å­—ç¬¦ä¸²ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œå½“åœ¨åŒ¹é…é‚®ç®±é‡Œçš„ . æ—¶ï¼Œè¦è¿›è¡Œ\.è¿›è¡Œè½¬ä¹‰æ‰å¯ä»¥</code></p>
<h4 id="1ã€-åŒ¹é…ä»»æ„1ç»™å­—ç¬¦ï¼ˆé™¤äº†-nï¼‰"><a href="#1ã€-åŒ¹é…ä»»æ„1ç»™å­—ç¬¦ï¼ˆé™¤äº†-nï¼‰" class="headerlink" title="1ã€. åŒ¹é…ä»»æ„1ç»™å­—ç¬¦ï¼ˆé™¤äº†\nï¼‰"></a>1ã€. åŒ¹é…ä»»æ„1ç»™å­—ç¬¦ï¼ˆé™¤äº†\nï¼‰</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">".wo"</span>,<span class="string">"two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼štwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€-åŒ¹é…-ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦"><a href="#2ã€-åŒ¹é…-ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦" class="headerlink" title="2ã€[ ] åŒ¹é…[ ]ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦"></a>2ã€[ ] åŒ¹é…[ ]ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"[art]wo"</span>,<span class="string">"two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼štwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€-d-åŒ¹é…æ•°å­—ï¼Œå³0-9"><a href="#3ã€-d-åŒ¹é…æ•°å­—ï¼Œå³0-9" class="headerlink" title="3ã€\d åŒ¹é…æ•°å­—ï¼Œå³0-9"></a>3ã€\d åŒ¹é…æ•°å­—ï¼Œå³0-9</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\d[art]wo"</span>,<span class="string">"7two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š7two</span></span><br></pre></td></tr></table></figure></div>

<h4 id="4ã€-DåŒ¹é…éæ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­—"><a href="#4ã€-DåŒ¹é…éæ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­—" class="headerlink" title="4ã€\DåŒ¹é…éæ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­—"></a>4ã€\DåŒ¹é…éæ•°å­—ï¼Œå³ä¸æ˜¯æ•°å­—</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\D[art]wo"</span>,<span class="string">"Atwo"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼šAtwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="5ã€-s-åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå³ç©ºæ ¼"><a href="#5ã€-s-åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå³ç©ºæ ¼" class="headerlink" title="5ã€\s åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå³ç©ºæ ¼"></a>5ã€\s åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå³ç©ºæ ¼</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\s\s[art]wo"</span>,<span class="string">"  two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š  two</span></span><br></pre></td></tr></table></figure></div>

<h4 id="6ã€-SåŒ¹é…éç©ºç™½ï¼Œå³ä¸æ˜¯ç©ºæ ¼"><a href="#6ã€-SåŒ¹é…éç©ºç™½ï¼Œå³ä¸æ˜¯ç©ºæ ¼" class="headerlink" title="6ã€\SåŒ¹é…éç©ºç™½ï¼Œå³ä¸æ˜¯ç©ºæ ¼"></a>6ã€\SåŒ¹é…éç©ºç™½ï¼Œå³ä¸æ˜¯ç©ºæ ¼</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\S[art]wo"</span>,<span class="string">"8two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š8two</span></span><br></pre></td></tr></table></figure></div>

<h4 id="7ã€-w-åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³-a-z-A-Z-0-9"><a href="#7ã€-w-åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³-a-z-A-Z-0-9" class="headerlink" title="7ã€\w åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³ a-z    A-Z    0-9    _"></a>7ã€\w åŒ¹é…å•è¯å­—ç¬¦ï¼Œå³ a-z    A-Z    0-9    _</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\w[art]wo"</span>,<span class="string">"atwo"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼šatwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="8ã€-WåŒ¹é…éå•è¯å­—ç¬¦"><a href="#8ã€-WåŒ¹é…éå•è¯å­—ç¬¦" class="headerlink" title="8ã€\WåŒ¹é…éå•è¯å­—ç¬¦"></a>8ã€\WåŒ¹é…éå•è¯å­—ç¬¦</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\W[art]wo"</span>,<span class="string">"#two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š#two</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸‰ã€åŒ¹é…å¤šä¸ªå­—ç¬¦"><a href="#ä¸‰ã€åŒ¹é…å¤šä¸ªå­—ç¬¦" class="headerlink" title="ä¸‰ã€åŒ¹é…å¤šä¸ªå­—ç¬¦"></a>ä¸‰ã€åŒ¹é…å¤šä¸ªå­—ç¬¦</h3><table>
<thead>
<tr>
<th align="center">å­—ç¬¦</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">*</td>
<td>åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°0æ¬¡æˆ–è€…æ— é™æ¬¡ï¼Œå³å¯æœ‰å¯æ— </td>
</tr>
<tr>
<td align="center">+</td>
<td>åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°1æ¬¡æˆ–è€…æ— é™æ¬¡ï¼Œå³è‡³å°‘æœ‰1æ¬¡</td>
</tr>
<tr>
<td align="center">?</td>
<td>åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°1æ¬¡æˆ–è€…0æ¬¡ï¼Œå³è¦ä¹ˆæœ‰1æ¬¡ï¼Œè¦ä¹ˆæ²¡æœ‰</td>
</tr>
<tr>
<td align="center">{m}</td>
<td>åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°mæ¬¡</td>
</tr>
<tr>
<td align="center">{m,n}</td>
<td>åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°ä»måˆ°næ¬¡</td>
</tr>
</tbody></table>
<h4 id="1ã€è´ªå©ªåŒ¹é…"><a href="#1ã€è´ªå©ªåŒ¹é…" class="headerlink" title="1ã€è´ªå©ªåŒ¹é…"></a>1ã€è´ªå©ªåŒ¹é…</h4><p>ã€€ã€€<strong>*åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°0æ¬¡æˆ–è€…æ— é™æ¬¡ï¼Œå³å¯æœ‰å¯æ— </strong></p>
<p>ã€€ã€€åŒ¹é…ä¿¡æ¯ä¸­tå¯ä»¥æ— ï¼Œä¹Ÿå¯ä»¥æœ‰ï¼ŒåŒæ ·å¯ä»¥å‡ºç°å¾ˆå¤šæ¬¡ã€åˆç§°â€”â€“è´ªå©ªåŒ¹é…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"t*wo"</span>,<span class="string">"tttttwo"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼štttttwo</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>+åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°1æ¬¡æˆ–è€…æ— é™æ¬¡ï¼Œå³è‡³å°‘æœ‰1æ¬¡</strong></p>
<p>ã€€ã€€+ä¸åŒäº*ï¼Œtå¿…é¡»å‡ºç°æœ€å°‘ä¸€æ¬¡æ‰å¯ä»¥æˆåŠŸï¼Œä¹Ÿè¢«ç§°ä¸ºâ€”-è´ªå©ªåŒ¹é…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"t+wo"</span>,<span class="string">"ttttwo"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼šttttwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€éè´ªå©ªåŒ¹é…"><a href="#2ã€éè´ªå©ªåŒ¹é…" class="headerlink" title="2ã€éè´ªå©ªåŒ¹é…"></a>2ã€éè´ªå©ªåŒ¹é…</h4><p>ã€€ã€€<strong>?åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°1æ¬¡æˆ–è€…0æ¬¡ï¼Œå³è¦ä¹ˆæœ‰1æ¬¡ï¼Œè¦ä¹ˆæ²¡æœ‰</strong></p>
<p>ã€€ã€€ï¼ˆå‰é¢çš„tè¦ä¹ˆä¸å­˜åœ¨ï¼Œè¦ä¹ˆåªå­˜åœ¨ä¸€æ¬¡ï¼‰ï¼Œå¦åˆ™åŒ¹é…å¤±è´¥ã€ç§°ä¸ºâ€”-éè´ªå©ªåŒ¹é…</p>
 <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"t?wo"</span>,<span class="string">"two"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼štwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€-m-åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°mæ¬¡"><a href="#3ã€-m-åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°mæ¬¡" class="headerlink" title="3ã€{m}åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°mæ¬¡"></a>3ã€{m}åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°mæ¬¡</h4><p>ã€€ã€€å¦‚æœ{}ä¸­è¾“å…¥5ï¼Œé‚£ä¹ˆå‰é¢çš„tåªèƒ½å‡ºç°5æ¬¡ï¼Œå¦åˆ™åŒ¹é…å¤±è´¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"t&#123;5&#125;wo"</span>,<span class="string">"tttttwo"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼štttttwo</span></span><br></pre></td></tr></table></figure></div>

<h4 id="4ã€-m-n-åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°ä»måˆ°næ¬¡"><a href="#4ã€-m-n-åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°ä»måˆ°næ¬¡" class="headerlink" title="4ã€{m,n}åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°ä»måˆ°næ¬¡"></a>4ã€{m,n}åŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦å‡ºç°ä»måˆ°næ¬¡</h4><p>ã€€ã€€åŒ¹é…çš„æ¬¡æ•°åªèƒ½åœ¨{}æ–¹æ‹¬å·ä¸­è¾“å…¥çš„æ¬¡æ•°çš„èŒƒå›´ä¹‹å†…ï¼Œå¦åˆ™åŒ¹é…å¤±è´¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"t&#123;1,5&#125;wo"</span>,<span class="string">"ttttwo"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼šttttwo</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å››ã€åŒ¹é…å¼€å¤´å’Œç»“å°¾"><a href="#å››ã€åŒ¹é…å¼€å¤´å’Œç»“å°¾" class="headerlink" title="å››ã€åŒ¹é…å¼€å¤´å’Œç»“å°¾"></a>å››ã€åŒ¹é…å¼€å¤´å’Œç»“å°¾</h3><table>
<thead>
<tr>
<th align="center">å­—ç¬¦</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">^</td>
<td>åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´</td>
</tr>
<tr>
<td align="center">$</td>
<td>åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾</td>
</tr>
</tbody></table>
<h4 id="1ã€-åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´"><a href="#1ã€-åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´" class="headerlink" title="1ã€^  åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´"></a>1ã€^  åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´</h4><p>ã€€ã€€^çš„ç¬¬ä¸€ä½æ”¾ä»€ä¹ˆï¼ŒåŒ¹é…çš„ç¬¬ä¸€ä½å°±å¿…é¡»ä¹Ÿæ”¾ä»€ä¹ˆï¼Œå¦åˆ™åŒ¹é…å¤±è´¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"^13140060872"</span>,<span class="string">"13140060872"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼š13140060872</span></span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€-åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾"><a href="#2ã€-åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾" class="headerlink" title="2ã€$  åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾"></a>2ã€$  åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾</h4><p>ã€€ã€€$å‰é¢æ”¾ä»€ä¹ˆï¼ŒåŒ¹é…ä¿¡æ¯é‡Œæœ€åä¸€ä½å°±å¿…é¡»æ”¾ä»€ä¹ˆï¼Œå¦åˆ™åŒ¹é…å¤±è´¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"^13140060872$"</span>,<span class="string">"13140060872"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼š13140060872</span></span><br></pre></td></tr></table></figure></div>

<h3 id="äº”ã€åŒ¹é…åˆ†ç»„"><a href="#äº”ã€åŒ¹é…åˆ†ç»„" class="headerlink" title="äº”ã€åŒ¹é…åˆ†ç»„"></a>äº”ã€åŒ¹é…åˆ†ç»„</h3><table>
<thead>
<tr>
<th align="center">å­—ç¬¦</th>
<th>åŠŸèƒ½</th>
</tr>
</thead>
<tbody><tr>
<td align="center">|</td>
<td>åŒ¹é…å·¦å³ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼</td>
</tr>
<tr>
<td align="center">(ab)</td>
<td>å°†æ‹¬å·ä¸­å­—ç¬¦ä½œä¸ºä¸€ä¸ªåˆ†ç»„</td>
</tr>
<tr>
<td align="center">\num</td>
<td>å¼•ç”¨åˆ†ç»„numåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td align="center">(?P<name>)</td>
<td>åˆ†ç»„èµ·åˆ«å</td>
</tr>
<tr>
<td align="center">(?P=name)</td>
<td>å¼•ç”¨åˆ«åä¸ºnameåˆ†ç»„åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²</td>
</tr>
</tbody></table>
<h4 id="1ã€-åŒ¹é…å·¦å³ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼"><a href="#1ã€-åŒ¹é…å·¦å³ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼" class="headerlink" title="1ã€| åŒ¹é…å·¦å³ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼"></a>1ã€| åŒ¹é…å·¦å³ä»»æ„ä¸€ä¸ªè¡¨è¾¾å¼</h4><p>ã€€ã€€ä¸ä»…è¦åŒ¹é…163ï¼ŒåŒæ ·è¦åŒ¹é…126ã€(ab)å°†æ‹¬å·ä¸­å­—ç¬¦ä½œä¸ºä¸€ä¸ªåˆ†ç»„</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">"\w&#123;4,20&#125;@(163|126).com"</span>,<span class="string">"h4055874@126.com"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼šh4055874@126.com</span></span><br></pre></td></tr></table></figure></div>

<p><code>æ‰©å±•ï¼šr å£°æ˜åŸå£°å­—ç¬¦ï¼Œç‰¹åˆ«é’ˆå¯¹ \ ç­‰</code></p>
<h4 id="2ã€-num-numæ˜¯æ•°å­—ï¼Œ-numæ˜¯æ‹·è´ç¬¬å‡ ç»„çš„å†…å®¹"><a href="#2ã€-num-numæ˜¯æ•°å­—ï¼Œ-numæ˜¯æ‹·è´ç¬¬å‡ ç»„çš„å†…å®¹" class="headerlink" title="2ã€\num  numæ˜¯æ•°å­—ï¼Œ\numæ˜¯æ‹·è´ç¬¬å‡ ç»„çš„å†…å®¹"></a>2ã€\num  numæ˜¯æ•°å­—ï¼Œ\numæ˜¯æ‹·è´ç¬¬å‡ ç»„çš„å†…å®¹</h4><p>ã€€ã€€<code>è¯´æ˜ï¼šåé¢&lt;&gt;é‡Œçš„å†…å®¹é™¤äº†/ä¹‹å¤–è·Ÿç¬¬ä¸€ä¸ª&lt;&gt;é‡Œé¢çš„å†…å®¹ä¸€æ ·ï¼Œå³ï¼Œå¯ä½¿ç”¨\1æ‹·è´ç¬¬ä¸€ä¸ªï¼ˆï¼‰é‡Œé¢çš„å†…å®¹</code></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret = re.match(<span class="string">r"&lt;([a-z]+)&gt;[a-z]&#123;2&#125;&lt;/\1&gt;"</span>,<span class="string">"&lt;html&gt;hh&lt;/html&gt;"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š&lt;html&gt;hh&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3ã€-P-P-name"><a href="#3ã€-P-P-name" class="headerlink" title="3ã€(?P) (?P=name)"></a>3ã€(?P<name>) (?P=name)</h4><p>ã€€ã€€<code>è¯´æ˜ï¼š(?P&lt;name&gt;)ç»™åˆ†ç»„èµ·åï¼Œ(?P=name)å¯ä»¥ç›´æ¥è°ƒç”¨åå­—é‡Œé¢çš„å†…å®¹</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">ret=re.match(<span class="string">r"&lt;(?P&lt;xiaohei&gt;[a-z]&#123;4&#125;)&gt;&lt;(?P&lt;xiaobai&gt;\w&#123;2&#125;)&gt;[a-z]&#123;2&#125;&lt;/(?P=xiaobai)&gt;&lt;/(?P=xiaohei)&gt;"</span>,<span class="string">"&lt;html&gt;&lt;h1&gt;hh&lt;/h1&gt;&lt;/html&gt;"</span>)</span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(ret.group())</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"åŒ¹é…å¤±è´¥"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœï¼š&lt;html&gt;&lt;h1&gt;hh&lt;/h1&gt;&lt;/html&gt;</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title>Python TCPå’ŒUDPã€æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶</title>
    <url>/blog/Python/Python_id_13.html</url>
    <content><![CDATA[<p><strong>URLè®¿é—®ç½‘ç«™æ—¶çš„ç½‘ç»œä¼ è¾“å…¨è¿‡ç¨‹ï¼Œå½’çº³èµ·æ¥å°±æ˜¯ï¼š</strong></p>
<p>ã€€ã€€é¦–å…ˆè¦é€šè¿‡åŸŸåæ‰¾åˆ°IPï¼Œå¦‚æœç¼“å­˜é‡Œæ²¡æœ‰å°±è¦è¯·æ±‚DNSæœåŠ¡å™¨ï¼›å¾—åˆ°IPåå¼€å§‹äºç›®çš„ä¸»æœºè¿›è¡Œä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹TCPè¿æ¥ï¼›è¿æ¥å»ºç«‹åè¿›è¡ŒHTTPè®¿é—®ï¼Œä¼ è¾“å¹¶è·å–ç½‘é¡µå†…å®¹ï¼›<br>ã€€ã€€ä¼ è¾“å®Œåä¸ç›®çš„ä¸»æœºå››æ¬¡æŒ¥æ‰‹æ¥æ–­å¼€TCPè¿æ¥ã€‚</p>
<a id="more"></a>

<p>ã€€ã€€æ•´ä¸ªè¿‡ç¨‹åŸºæœ¬åˆ†åšä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<p>ã€€ã€€ã€€ã€€1ã€åŸŸåè§£ææˆIPåœ°å€ï¼›<br>ã€€ã€€ã€€ã€€2ã€ä¸ç›®çš„ä¸»æœºè¿›è¡ŒTCPè¿æ¥ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ï¼›<br>ã€€ã€€ã€€ã€€3ã€å‘é€ä¸æ”¶å–æ•°æ®ï¼›<br>ã€€ã€€ã€€ã€€4ã€ä¸ç›®çš„ä¸»æœºæ–­å¼€TCPè¿æ¥ï¼ˆå››æ¬¡æŒ¥æ‰‹ï¼‰ï¼›</p>
<h3 id="TCP-UDPä¼˜ç¼ºç‚¹"><a href="#TCP-UDPä¼˜ç¼ºç‚¹" class="headerlink" title="TCP/UDPä¼˜ç¼ºç‚¹"></a>TCP/UDPä¼˜ç¼ºç‚¹</h3><h4 id="TCPçš„ä¼˜ç‚¹"><a href="#TCPçš„ä¼˜ç‚¹" class="headerlink" title="TCPçš„ä¼˜ç‚¹"></a>TCPçš„ä¼˜ç‚¹</h4><p>ã€€ã€€<strong>å¯é ï¼Œç¨³å®š</strong>TCPçš„å¯é ä½“ç°åœ¨TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹è¿æ¥ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ å®Œåï¼Œè¿˜ä¼šæ–­å¼€è¿æ¥ç”¨æ¥èŠ‚çº¦ç³»ç»Ÿèµ„æºã€‚ </p>
<h4 id="TCPçš„ç¼ºç‚¹"><a href="#TCPçš„ç¼ºç‚¹" class="headerlink" title="TCPçš„ç¼ºç‚¹"></a>TCPçš„ç¼ºç‚¹</h4><p>ã€€ã€€<strong>æ…¢ï¼Œæ•ˆç‡ä½ï¼Œå ç”¨ç³»ç»Ÿèµ„æºé«˜ï¼Œæ˜“è¢«æ”»å‡»ã€‚</strong> TCPåœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œè¦å…ˆå»ºè¿æ¥ï¼Œè¿™ä¼šæ¶ˆè€—æ—¶é—´ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œç¡®è®¤æœºåˆ¶ã€é‡ä¼ æœºåˆ¶ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ç­‰éƒ½ä¼šæ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œè€Œä¸”è¦åœ¨æ¯å°è®¾å¤‡ä¸Šç»´æŠ¤æ‰€æœ‰çš„ä¼ è¾“è¿æ¥ï¼Œäº‹å®ä¸Šï¼Œæ¯ä¸ªè¿æ¥éƒ½ä¼šå ç”¨ç³»ç»Ÿçš„CPUã€å†…å­˜ç­‰ç¡¬ä»¶èµ„æºã€‚ è€Œä¸”ï¼Œå› ä¸ºTCPæœ‰ç¡®è®¤æœºåˆ¶ã€ä¸‰æ¬¡æ¡æ‰‹æœºåˆ¶ï¼Œè¿™äº›ä¹Ÿå¯¼è‡´TCPå®¹æ˜“è¢«äººåˆ©ç”¨ï¼Œå®ç°DOSã€DDOSã€CCç­‰æ”»å‡»ã€‚</p>
<h4 id="UDPçš„ä¼˜ç‚¹"><a href="#UDPçš„ä¼˜ç‚¹" class="headerlink" title="UDPçš„ä¼˜ç‚¹"></a>UDPçš„ä¼˜ç‚¹</h4><p>ã€€ã€€<strong>å¿«ï¼Œæ¯”TCPç¨å®‰å…¨</strong>UDPæ²¡æœ‰TCPçš„æ¡æ‰‹ã€ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶ï¼ŒUDPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„ä¼ è¾“åè®®ï¼Œæ‰€ä»¥å®ƒåœ¨ä¼ é€’æ•°æ®æ—¶éå¸¸å¿«ã€‚æ²¡æœ‰TCPçš„è¿™äº›æœºåˆ¶ï¼ŒUDPè¾ƒTCPè¢«æ”»å‡»è€…åˆ©ç”¨çš„æ¼æ´å°±è¦å°‘ä¸€äº›ã€‚ä½†UDPä¹Ÿæ˜¯æ— æ³•é¿å…æ”»å‡»çš„ï¼Œæ¯”å¦‚ï¼šUDP Floodæ”»å‡»â€¦â€¦</p>
<h4 id="UDPçš„ç¼ºç‚¹"><a href="#UDPçš„ç¼ºç‚¹" class="headerlink" title="UDPçš„ç¼ºç‚¹"></a>UDPçš„ç¼ºç‚¹</h4><p>ã€€ã€€<strong>ä¸å¯é ï¼Œä¸ç¨³å®š</strong>å› ä¸ºUDPæ²¡æœ‰TCPé‚£äº›å¯é çš„æœºåˆ¶ï¼Œåœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œå¦‚æœç½‘ç»œè´¨é‡ä¸å¥½ï¼Œå°±ä¼šå¾ˆå®¹æ˜“ä¸¢åŒ…ã€‚</p>
<p>ã€€ã€€åŸºäºä¸Šé¢çš„ä¼˜ç¼ºç‚¹ï¼Œé‚£ä¹ˆï¼š ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨TCPï¼š å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡æœ‰è¦æ±‚çš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼šæ•´ä¸ªæ•°æ®è¦å‡†ç¡®æ— è¯¯çš„ä¼ é€’ç»™å¯¹æ–¹ï¼Œè¿™å¾€å¾€ç”¨äºä¸€äº›è¦æ±‚å¯é çš„åº”ç”¨ï¼Œæ¯”å¦‚HTTPã€HTTPSã€FTPç­‰ä¼ è¾“æ–‡ä»¶çš„åè®®ï¼ŒPOPã€SMTPç­‰é‚®ä»¶ä¼ è¾“çš„åè®®ã€‚ åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨TCPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š æµè§ˆå™¨ï¼Œç”¨çš„HTTP FlashFXPï¼Œç”¨çš„FTP Outlookï¼Œç”¨çš„POPã€SMTP Puttyï¼Œç”¨çš„Telnetã€SSH QQæ–‡ä»¶ä¼ è¾“ â€¦â€¦â€¦â€¦ ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨UDPï¼š å½“å¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚ä¸é«˜çš„æ—¶å€™ï¼Œè¦æ±‚ç½‘ç»œé€šè®¯é€Ÿåº¦èƒ½å°½é‡çš„å¿«ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨UDPã€‚ æ¯”å¦‚ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œå¸¸è§ä½¿ç”¨UDPåè®®çš„åº”ç”¨å¦‚ä¸‹ï¼š QQè¯­éŸ³ QQè§†é¢‘ TFTP â€¦â€¦</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/01.png">

<h3 id="TCPæŠ¥å¤´ç»“æ„"><a href="#TCPæŠ¥å¤´ç»“æ„" class="headerlink" title="TCPæŠ¥å¤´ç»“æ„"></a>TCPæŠ¥å¤´ç»“æ„</h3><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/02.png">



<h4 id="16ä½ç«¯å£å·"><a href="#16ä½ç«¯å£å·" class="headerlink" title="16ä½ç«¯å£å·"></a>16ä½ç«¯å£å·</h4><p>ã€€ã€€å‘ŠçŸ¥ä¸»æœºè¯¥æŠ¥æ–‡æ®µæ¥è‡ªå“ªé‡Œï¼ˆæºç«¯å£å·ï¼‰ä»¥åŠä¼ ç»™å“ªä¸ªä¸Šå±‚åè®®æˆ–åº”ç”¨ç¨‹åºï¼ˆç›®çš„ç«¯å£ï¼‰çš„ã€‚TCPé€šä¿¡æ—¶ï¼Œå®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©çš„ä¸´æ—¶ç«¯å£å·ï¼Œè€ŒæœåŠ¡å™¨ä½¿ç”¨çŸ¥åç«¯å£å·ã€‚   </p>
<h4 id="32ä½åºå·"><a href="#32ä½åºå·" class="headerlink" title="32ä½åºå·"></a>32ä½åºå·</h4><p>ã€€ã€€ä¸€æ¬¡TCPé€šä¿¡è¿‡ç¨‹ä¸­æŸä¸ªä¼ è¾“æ–¹å‘ä¸Šçš„å­—èŠ‚æµçš„æ¯ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚</p>
<p>ã€€ã€€ç¬¬ä¸€ä¸ªæŠ¥æ–‡æ®µä¸­åºå·å€¼è¢«ç³»ç»Ÿåˆå§‹åŒ–ä¸ºæŸä¸ªéšæœºå€¼ISNï¼Œé‚£ä¹ˆè¯¥ä¼ è¾“æ–¹å‘ä¸Šåç»­çš„TCPæŠ¥æ–‡æ®µä¸­åºå·å€¼å°†è¢«ç³»ç»Ÿè®¾ç½®ä¸ºISNåŠ ä¸Šè¯¥æŠ¥æ–‡æ®µæ‰€æºå¸¦çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨æ•´ä¸ªå­—èŠ‚æµçš„åç§»ã€‚     </p>
<h4 id="32ä½ç¡®è®¤å·"><a href="#32ä½ç¡®è®¤å·" class="headerlink" title="32ä½ç¡®è®¤å·"></a>32ä½ç¡®è®¤å·</h4><p>ã€€ã€€ç”¨ä½œå¯¹å¦ä¸€æ–¹å‘é€çš„TCPæŠ¥æ–‡æ®µçš„å“åº”ã€‚å…¶å€¼æ˜¯æ”¶åˆ°çš„TCPæŠ¥æ–‡æ®µçš„åºå·å€¼åŠ 1.å‡å¦‚ä¸»æœºAå’Œä¸»æœºBè¿›è¡ŒTCPé€šä¿¡ï¼Œé‚£ä¹ˆAå‘é€çš„TCPæŠ¥æ–‡æ®µä¸ä»…æºå¸¦è‡ªå·±çš„åºå·ï¼Œè¿˜æœ‰å¯¹Bå‘é€æ¥çš„TCPæŠ¥æ–‡æ®µçš„ç¡®è®¤å·ã€‚</p>
<h4 id="4ä½å¤´éƒ¨é•¿åº¦"><a href="#4ä½å¤´éƒ¨é•¿åº¦" class="headerlink" title="4ä½å¤´éƒ¨é•¿åº¦"></a>4ä½å¤´éƒ¨é•¿åº¦</h4><p>ã€€ã€€æ ‡è¯†è¯¥TCPå¤´éƒ¨æœ‰å¤šå°‘ä¸ª32bitå­—ï¼ˆ4å­—èŠ‚ï¼‰ï¼Œå› ä¸º4ä½æœ€å¤§è¡¨ç¤º15æ‰€ä»¥TCPå¤´éƒ¨æœ€é•¿æ˜¯60å­—èŠ‚ã€‚    </p>
<h4 id="6ä½æ ‡å¿—ä½"><a href="#6ä½æ ‡å¿—ä½" class="headerlink" title="6ä½æ ‡å¿—ä½"></a>6ä½æ ‡å¿—ä½</h4><p>ã€€ã€€é€‰é¡¹æœ‰ï¼ŒACKæ ‡å¿—ï¼šè¡¨ç¤ºç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆã€‚å°†æºå¸¦ACKæ ‡å¿—çš„TCPæŠ¥æ–‡æ®µæˆä¸ºâ€œç¡®è®¤æŠ¥æ–‡æ®µâ€ã€‚SYNæ ‡å¿—ï¼šè¡¨ç¤ºè¯·æ±‚å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œå°†æºå¸¦SYNæ ‡å¿—çš„æŠ¥æ–‡æ®µç§°ä¸ºâ€œåŒæ­¥æŠ¥æ–‡æ®µâ€ã€‚   FINæ ‡å¿—ï¼šè¡¨ç¤ºé€šçŸ¥å¯¹æ–¹è¦å…³é—­è¿æ¥ï¼Œå°†æºå¸¦FINæ ‡å¿—çš„æŠ¥æ–‡æ®µç§°ä¸ºâ€œç»“æŸæŠ¥æ–‡æ®µâ€ã€‚    </p>
<h4 id="16ä½çª—å£å¤§å°"><a href="#16ä½çª—å£å¤§å°" class="headerlink" title="16ä½çª—å£å¤§å°"></a>16ä½çª—å£å¤§å°</h4><p>ã€€ã€€æŒ‡çš„æ˜¯æ¥å—é€šå‘Šçª—å£ã€‚å®ƒå‘Šè¯‰æ¥å—ç«¯è‡ªå·±æ¥å—ç¼“å†²åŒºè¿˜èƒ½å®¹çº³å¤šå°‘å­—èŠ‚çš„æ•°æ®ã€‚   </p>
<h4 id="16ä½æ ¡éªŒå’Œ"><a href="#16ä½æ ¡éªŒå’Œ" class="headerlink" title="16ä½æ ¡éªŒå’Œ"></a>16ä½æ ¡éªŒå’Œ</h4><p>ã€€ã€€ç”±å‘é€ç«¯å¡«å……ï¼Œæ¥æ”¶ç«¯å¯¹TCPæŠ¥æ–‡æ®µæ‰§è¡ŒCRCç®—æ³•æ£€éªŒæŠ¥æ–‡æ®µåœ¨ä¼ è¾“ä¸­æ˜¯å¦æŸåï¼Œæ£€éªŒTCPå¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†ã€‚è¿™æ˜¯TCPå¯é ä¼ è¾“çš„ä¸€ä¸ªé‡è¦ä¿éšœã€‚   16ä½ç´§æ€¥æŒ‡é’ˆã€‚ã€‚  </p>
<h4 id="å¤´éƒ¨é€‰é¡¹"><a href="#å¤´éƒ¨é€‰é¡¹" class="headerlink" title="å¤´éƒ¨é€‰é¡¹"></a>å¤´éƒ¨é€‰é¡¹</h4><p>ã€€ã€€è¿˜æœ‰æœ€åä¸€ä¸ªé€‰é¡¹å­—æ®µæ˜¯å¯å˜é•¿çš„å¯é€‰ä¿¡æ¯ï¼Œæœ€å¤š40å­—èŠ‚ã€‚ã€‚ã€‚</p>
<h3 id="TCPã€UDPçš„åŒºåˆ«"><a href="#TCPã€UDPçš„åŒºåˆ«" class="headerlink" title="TCPã€UDPçš„åŒºåˆ«"></a>TCPã€UDPçš„åŒºåˆ«</h3><p>ã€€ã€€1ã€åŸºäºé¢å‘è¿æ¥ä¸æ— è¿æ¥ã€‚å› ä¸ºæ¯ä¸ªè¿æ¥éƒ½ä¼šå ç”¨ç³»ç»Ÿçš„CPUã€å†…å­˜ç­‰ç¡¬ä»¶èµ„æºï¼Œæ‰€ä»¥å¯¹ç³»ç»Ÿèµ„æºçš„è¦æ±‚TCPè¾ƒå¤šUDPå°‘ï¼›å¹¶ä¸”tcpæ˜¯ä¸€å¯¹ä¸€çš„ï¼Œudpæ˜¯ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šé€šä¿¡ã€‚</p>
<p>ã€€ã€€2ã€å­—èŠ‚æµï¼šåº”ç”¨ç¨‹åºå¯¹æ•°æ®çš„å‘é€å’Œæ¥å—æ²¡æœ‰è¾¹ç•Œé™åˆ¶ï¼Œå³å‘é€ç«¯æ‰§è¡Œçš„å†™æ“ä½œæ¬¡æ•°å’Œæ¥å—ç«¯çš„è¯»æ“ä½œæ¬¡æ•°æ²¡æœ‰ä»»ä½•æ•°é‡å…³ç³»ï¼Œå¹¶ä¸”sendåªæ˜¯å°†æ•°æ®å†™è¿›å‘é€ç¼“å†²åŒºï¼Œrecvåªæ˜¯ä»è¾“å‡ºç¼“å†²åŒºä¸­è·å–æ•°æ®ã€‚ã€å› ä¸ºå¦‚æœå‘é€ç«¯åº”ç”¨ç¨‹åºè¿ç»­æ‰§è¡Œå†™æ“ä½œï¼Œtcpå…ˆå°†æ•°æ®æ”¾å…¥TCPå‘é€ç¼“å†²åŒºä¸­ï¼Œç­‰åˆ°ç¼“å†²åŒºçœŸæ­£å‘é€æ•°æ®æ—¶ï¼Œæ•°æ®å¯èƒ½è¢«å°è£…äº†ä¸€ä¸ªæˆ–å¤šä¸ªTCPæŠ¥æ–‡æ®µå‘å‡ºï¼Œå³TCPå‘å‡ºçš„tcpæŠ¥æ–‡æ®µä¸ªæ•°å’Œæ‰§è¡Œçš„å†™æ“ä½œæ¬¡æ•°æ²¡æœ‰å…³ç³»ã€‚ è€Œæ¥å—ç«¯æ”¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªTCPæŠ¥æ–‡æ®µï¼Œå…ˆå°†ä»–ä»¬æºå¸¦çš„æ•°æ®æŒ‰åºå·ä¾æ¬¡æ”¾åˆ°æ¥å—ç¼“å†²åŒºä¸­ï¼Œé€šçŸ¥åº”ç”¨è¿›ç¨‹æ¥å—ã€‚åº”ç”¨ç¨‹åºå¯ä»¥ä¸€æ¬¡å…¨éƒ¨è¯»å‡ºï¼Œä¹Ÿå¯ä»¥åˆ†å‡ æ¬¡è¯»å‡ºï¼Œè¿™å–å†³äºåº”ç”¨ç¨‹åºçš„ç¼“å†²åŒºå¤§å°ï¼Œå³TCPæ¨¡å—æ¥å—çš„æŠ¥æ–‡æ®µä¸ªæ•°å’Œè¯»æ“ä½œæ¬¡æ•°æ²¡å…³ç³»ã€‚ã€‘</p>
<p>   æ•°æ®æŠ¥ï¼šsendtoå‘é€æ•°æ®å’Œå¯¹ç«¯recvfromæ¥å—æ•°æ¬¡æ•°ç›¸ç­‰ï¼Œå› æ­¤UDPä¿ç•™äº†åº”ç”¨å±‚æ•°æ®çš„è¾¹ç•Œã€‚ã€ å‘é€ç«¯åº”ç”¨ç¨‹åºæ¯æ‰§è¡Œå†™æ“ä½œä¸€æ¬¡ï¼ŒUDPæ¨¡å—å°±å°†å®ƒå°è£…æˆä¸€ä¸ªæ•°æ®æŠ¥å‘é€äº†ã€‚æ¥æ”¶ç«¯å¿…é¡»åŠæ—¶å¯¹æ¯ä¸ªudpæ•°æ®æŠ¥æ‰§è¡Œè¯»æ“ä½œå¹¶ä¸”ä¸€æ¬¡æ¥å—å®Œï¼Œå¦åˆ™ä¸è¯»æ•°æ®ä¼šä¸¢åŒ…ï¼Œæˆ–è€…ä¸è¯»å®Œæ•´æ•°æ®ä¼šè¢«æˆªæ–­å‘ç”Ÿæ•°æ®ä¸¢å¤±ã€‚ã€‘</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/03.png">

<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/04.png">

<p>ã€€ã€€3ã€tcpæ˜¯<strong>å¯é ä¼ è¾“</strong>ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;udpæ˜¯ä¸ä¿è¯å¯é äº¤ä»˜ã€‚</p>
<h4 id="å¯é æ€§ä½“ç°åœ¨ï¼š"><a href="#å¯é æ€§ä½“ç°åœ¨ï¼š" class="headerlink" title="å¯é æ€§ä½“ç°åœ¨ï¼š"></a>å¯é æ€§ä½“ç°åœ¨ï¼š</h4><p>ã€€ã€€åº”ç”¨ç¨‹åºå°†æ•°æ®å‘é€ç»™TCPï¼Œç„¶åTCPæŠŠæ•°æ®æµåˆ†åŒºæˆé€‚å½“é•¿åº¦çš„æŠ¥æ–‡æ®µï¼ˆé€šå¸¸å—è¯¥è®¡ç®—æœºè¿æ¥çš„ç½‘ç»œçš„æ•°æ®é“¾è·¯å±‚çš„æœ€å¤§ä¼ è¾“å•å…ƒï¼ˆ MTUï¼‰çš„é™åˆ¶ï¼‰ä¹‹åTCPæŠŠç»“æœåŒ…ä¼ ç»™IPå±‚ï¼Œç”±å®ƒæ¥é€šè¿‡ç½‘ç»œå°†åŒ…ä¼ é€ç»™æ¥æ”¶ç«¯å®ä½“çš„TCPå±‚ã€‚TCPä¸ºäº†ä¿è¯ä¸å‘ç”Ÿä¸¢åŒ…ï¼Œå°±ç»™æ¯ä¸ªåŒ…ä¸€ä¸ªåºå·ï¼ŒåŒæ—¶åºå·ä¹Ÿä¿è¯äº†ä¼ é€åˆ°æ¥æ”¶ç«¯å®ä½“çš„åŒ…çš„æŒ‰åºæ¥æ”¶ã€‚ç„¶åæ¥æ”¶ç«¯å®ä½“å¯¹å·²æˆåŠŸæ”¶åˆ°çš„åŒ…å‘å›ä¸€ä¸ªç›¸åº”çš„ç¡®è®¤ï¼ˆACKï¼‰ï¼›å¦‚æœå‘é€ç«¯å®ä½“åœ¨åˆç†çš„å¾€è¿”æ—¶å»¶ï¼ˆRTTï¼‰å†…æœªæ”¶åˆ°ç¡®è®¤ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•°æ®åŒ…å°±è¢«å‡è®¾ä¸ºå·²ä¸¢å¤±å°†ä¼šè¢«è¿›è¡Œé‡ä¼ ã€‚TCPç”¨ä¸€ä¸ªæ ¡éªŒå’Œå‡½æ•°æ¥æ£€éªŒæ•°æ®æ˜¯å¦æœ‰é”™è¯¯ï¼›åœ¨å‘é€å’Œæ¥æ”¶æ—¶éƒ½è¦è®¡ç®—æ ¡éªŒå’Œã€‚</p>
<h4 id="å…·ä½“ä½“ç°ä¸ºï¼š"><a href="#å…·ä½“ä½“ç°ä¸ºï¼š" class="headerlink" title="å…·ä½“ä½“ç°ä¸ºï¼š"></a>å…·ä½“ä½“ç°ä¸ºï¼š</h4><p>ã€€ã€€1ã€<strong>åº”ç”¨æ•°æ®è¢«åˆ†å‰²æˆTCPè®¤ä¸ºæœ€é€‚åˆå‘é€çš„æ•°æ®å—ã€‚</strong>è¿™å’ŒUDPå®Œå…¨ä¸åŒï¼Œåº”ç”¨ç¨‹åºäº§ç”Ÿçš„æ•°æ®é•¿åº¦å°†ä¿æŒä¸å˜ã€‚ç”±TCPä¼ é€’ç»™IPçš„ä¿¡æ¯å•ä½ç§°ä¸ºæŠ¥æ–‡æ®µæˆ–æ®µã€‚ã€åœ¨TCPä¸‰æ¬¡æˆ‘æ¡æ‰‹çš„å‰ä¸¤æ¬¡æ¡æ‰‹ä¸­ï¼ˆä¹Ÿå°±æ˜¯ä¸¤ä¸ªSYNæŠ¥æ–‡æ®µä¸­ï¼‰ï¼Œé€šè¿‡ä¸€ä¸ªâ€œåå•†â€çš„æ–¹å¼æ¥å‘ŠçŸ¥å¯¹æ–¹è‡ªå·±æœŸå¾…æ”¶åˆ°çš„æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼ˆMSSï¼‰ï¼Œç»“æœä½¿ç”¨é€šä¿¡åŒå‘è¾ƒå°çš„MSSæœ€ä¸ºæœ€ç»ˆçš„MSSã€‚åœ¨SYN=1çš„æŠ¥æ–‡æ®µä¸­ï¼Œä¼šåœ¨æŠ¥æ–‡æ®µçš„é€‰é¡¹éƒ¨åˆ†æ¥æŒ‡å®šMSSå¤§å°ï¼ˆç›¸å½“äºå‘ŠçŸ¥å¯¹æ–¹è‡ªå·±æ‰€èƒ½æ¥æ”¶çš„æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼‰ã€‚åœ¨åç»­é€šä¿¡åŒå‘å‘é€åº”ç”¨å±‚æ•°æ®ä¹‹å‰ï¼Œå¦‚æœå‘é€æ•°æ®è¶…è¿‡MSSï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†æ®µã€‘ã€‚</p>
<p>ã€€ã€€2ã€å½“TCPå‘å‡ºä¸€ä¸ªæ®µåï¼Œå®ƒå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…ç›®çš„ç«¯<strong>ç¡®è®¤</strong>æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡æ®µã€‚å½“TCPæ”¶åˆ°å‘è‡ªTCPè¿æ¥å¦ä¸€ç«¯çš„æ•°æ®ï¼Œå®ƒå°†å‘é€ä¸€ä¸ªç¡®è®¤ã€‚TCPæœ‰å»¶è¿Ÿç¡®è®¤çš„åŠŸèƒ½ï¼Œåœ¨æ­¤åŠŸèƒ½æ²¡æœ‰æ‰“å¼€ï¼Œåˆ™æ˜¯ç«‹å³ç¡®è®¤ã€‚åŠŸèƒ½æ‰“å¼€ï¼Œåˆ™ç”±å®šæ—¶å™¨è§¦å‘ç¡®è®¤æ—¶é—´ç‚¹ã€‚</p>
<p>ã€€ã€€3ã€TCPæœ‰<strong>è¶…æ—¶é‡ä¼ </strong>æœºåˆ¶ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å¯¹ç«¯å¯¹äºå‘é€æŠ¥æ–‡çš„ç¡®è®¤ï¼Œåˆ™ä¼šé‡ä¼ ä¸€ä»½ã€‚å¦‚æœå‘é€ç«¯åœ¨åˆç†çš„å¾€è¿”æ—¶å»¶ï¼ˆRTTï¼‰å†…æœªæ”¶åˆ°ç¡®è®¤ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ•°æ®åŒ…å°±è¢«å‡è®¾ä¸ºå·²ä¸¢å¤±å°†ä¼šè¢«è¿›è¡Œé‡ä¼ ã€‚</p>
<p>ã€€ã€€4ã€TCPå°†<strong>ä¿æŒå®ƒé¦–éƒ¨å’Œæ•°æ®çš„æ£€éªŒå’Œã€‚</strong>ã€€CRCå¯¹TCPæ•´ä¸ªæ•°æ®æŠ¥è¿›è¡Œæ ¡éªŒï¼ˆå¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†éƒ½ä¼šæ ¡éªŒï¼‰ç”¨ä¸€ä¸ªæ ¡éªŒå’Œå‡½æ•°æ¥æ£€éªŒæ•°æ®æ˜¯å¦æœ‰é”™è¯¯ï¼›åœ¨å‘é€å’Œæ¥æ”¶æ—¶éƒ½è¦è®¡ç®—æ ¡éªŒå’Œã€‚å¦‚æœæ”¶åˆ°æ®µçš„æ£€éªŒå’Œæœ‰å·®é”™ï¼ŒTCPå°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥æ–‡æ®µå’Œä¸ç¡®è®¤æ”¶åˆ°æ­¤æŠ¥æ–‡æ®µï¼ˆå¸Œæœ›å‘ç«¯è¶…æ—¶å¹¶é‡å‘ï¼‰ã€‚</p>
<p>ã€€ã€€5ã€æ—¢ç„¶TCPæŠ¥æ–‡æ®µä½œä¸ºIPæ•°æ®æŠ¥æ¥ä¼ è¾“ï¼Œè€ŒIPæ•°æ®æŠ¥çš„åˆ°è¾¾å¯èƒ½ä¼šå¤±åºã€é‡å¤ï¼Œå› æ­¤TCPæŠ¥æ–‡æ®µçš„åˆ°è¾¾ä¹Ÿå¯èƒ½ä¼šå¤±åºã€‚å¦‚æœå¿…è¦ï¼ŒTCPå°†å¯¹æ”¶åˆ°çš„æ•°æ®<strong>è¿›è¡Œé‡æ–°æ’åºã€æ•´ç†ï¼Œ</strong>å°†æ”¶åˆ°çš„æ•°æ®ä»¥æ­£ç¡®çš„é¡ºåºäº¤ç»™åº”ç”¨å±‚ã€‚ã€åœ¨åŒä¸€æ¬¡ä¼ è¾“çš„åŒä¸€ä¸ªæ–¹å‘ä¸Šæ¯ä¸ªTCPæŠ¥æ–‡éƒ½æœ‰å”¯ä¸€çš„æ ‡è¯†(åºå·ï¼‰ï¼Œä¹Ÿä¿è¯äº†ä¼ é€åˆ°æ¥æ”¶ç«¯å®ä½“çš„åŒ…çš„æŒ‰åºæ¥æ”¶ã€‚ç„¶åæ¥æ”¶ç«¯å¯¹å·²æˆç¡®è®¤åŠŸæ”¶åˆ°çš„åŒ…å‘å›ä¸€ä¸ªç›¸åº”çš„ACKï¼›è‹¥é‡å¤TCPçš„æ¥æ”¶ç«¯å¿…é¡»ä¸¢å¼ƒé‡å¤çš„æ•°æ®ã€‚ã€‘</p>
<p>udpå’Œipåè®®éƒ½æ˜¯æä¾›<strong>ä¸å¯é </strong>æœåŠ¡ï¼Œå®ƒä»¬éœ€è¦ä¸Šå±‚åè®®æ¥å¤„ç†æ•°æ®ç¡®è®¤å’Œè¶…æ—¶é‡ä¼ ã€‚</p>
<h4 id="ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹</h4><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/05.png">

<p><strong>ä¸ºä»€ä¹ˆä¸‰æ¬¡æ¡æ‰‹ï¼Ÿ</strong></p>
<p>ã€€ã€€å¦‚æœä¸¤æ¬¡æ¡æ‰‹ï¼Œå› ä¸ºå­˜åœ¨ä¸€ç§æƒ…å†µã€‚clientå‘é€çš„ç¬¬ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µæ²¡æœ‰ä¸¢å¤±ï¼Œè€Œæ˜¯åœ¨æŸä¸ªç½‘ç»œèŠ‚ç‚¹é•¿æ—¶é—´æ»ç•™äº†ï¼Œä»¥è‡´å»¶è¯¯åˆ°è¿æ¥æ–­å¼€åçš„æŸä¸ªæ—¶é—´æ‰åˆ°æœåŠ¡å™¨ã€‚</p>
<p>ã€€ã€€è¿™ä¸ªå¤±æ•ˆæŠ¥æ–‡æ®µåˆ°äº†severï¼Œseverä»¥ä¸ºclientæƒ³å»ºç«‹è¿æ¥ï¼Œå°±å‘é€ç¡®è®¤æŠ¥æ–‡æ®µå¹¶åŒæ„å»ºç«‹è¿æ¥ã€‚æ­¤æ—¶è‹¥åªæœ‰ä¸¤æ¬¡æ¡æ‰‹ï¼Œé‚£æ–°çš„è¿æ¥å°±å»ºç«‹äº†ã€‚ä½†ç”±äºclientå…¶å®å¹¶æ²¡å»ºç«‹è¿æ¥ï¼Œæ‰€ä»¥å¯¹ç¡®è®¤æŠ¥æ–‡æ®µæ— ååº”ï¼Œæ›´å‘ä¸äº†æ•°æ®ã€‚å¯æ˜¯severä»¥ä¸ºæ–°çš„è¿æ¥å·²å»ºç«‹ï¼Œå°±å‚»å‚»åœ°ä¸€ç›´ç­‰ç€å‘æ•°æ®ï¼Œå¯¼è‡´severå¾ˆå¤šèµ„æºè¢«æµªè´¹æ‰ã€‚</p>
<p>ã€€ã€€<strong>æ‰€ä»¥ä¸‰æ¬¡æ¡æ‰‹å¯ä»¥é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚çš„æŠ¥æ–‡æ®µçªç„¶åˆ°serverï¼Œä½¿æœåŠ¡å™¨ä¸€ç›´ç­‰å¾…ï¼Œæµªè´¹äº†èµ„æºï¼›ä½†æ˜¯ä¸‰æ¬¡æ¡æ‰‹ä¹Ÿæœ‰ç¼ºé™·ï¼Œä¼šå¯¼è‡´synæ”»å‡»</strong></p>
<p><strong>Timewait</strong>æ˜¯ä¸»åŠ¨å…³é—­çš„ä¸€ç«¯åœ¨æœ¬ç«¯å·²ç»å…³é—­çš„å‰æœŸä¸‹ï¼Œæ”¶åˆ°å¯¹ç«¯çš„å…³é—­è¯·æ±‚ï¼ˆFINæŠ¥æ–‡æ®µï¼‰å¹¶ä¸”å°†ACKå‘é€å‡ºå»åæ‰€å¤„çš„çŠ¶æ€ï¼Œè¿™ç§çŠ¶æ€è¡¨ç¤ºï¼šåŒæ–¹éƒ½å·²ç»å®Œæˆå·¥ä½œï¼Œåªæ˜¯ä¸ºäº†<strong>ç¡®ä¿è¿Ÿæ¥çš„æ•°æ®æŠ¥èƒ½è¢«è¯†åˆ«å¹¶ä¸¢å¼ƒï¼›å¯é çš„ç»ˆæ­¢TCPè¿æ¥ã€‚</strong>è¿™ç§çŠ¶æ€ä¸‹å®¢æˆ·ç«¯è¿æ¥è¦ç­‰ä¸€æ®µ2MSLï¼ˆæŠ¥æ–‡æ®µæœ€å¤§ç”Ÿå­˜æ—¶é—´ã€2minã€‘ï¼‰çš„æ—¶é—´ï¼Œæ‰èƒ½å®Œå…¨å…³é—­ã€‚</p>
<p><strong>å…·ä½“å­˜åœ¨åŸå› ï¼š</strong>â‘ å¯é çš„ç»ˆæ­¢tcpè¿æ¥ã€‚å‡å¦‚ç”¨äºç¡®è®¤æœåŠ¡å™¨ç»“æŸæŠ¥æ–‡æ®µçš„tcpæŠ¥æ–‡æ®µ7ä¸¢å¤±äº†ï¼Œé‚£æœåŠ¡å™¨å°†é‡å‘ç»“æŸæŠ¥æ–‡æ®µã€‚æ‰€ä»¥å®¢æˆ·ç«¯éœ€è¦åœç•™åœ¨ä¸€ä¸ªçŠ¶æ€å¤„ç†å¤šæ¬¡æ”¶åˆ°çš„æœåŠ¡å™¨ç»“æŸæŠ¥æ–‡æ®µã€‚ï¼ˆä¹Ÿå°±æ˜¯å‘æœåŠ¡å™¨å‘é€ç¡®è®¤æŠ¥æ–‡æ®µï¼‰ã€‚å¦åˆ™ï¼Œå®¢æˆ·ç«¯å°†å‘é€å¤ä½æŠ¥æ–‡æ®µç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚</p>
<p>â‘¡ä¿è¯è®©è¿Ÿæ¥çš„tcpæŠ¥æ–‡æ®µæœ‰è¶³å¤Ÿæ—¶é—´è¢«è¯†åˆ«å’Œä¸¢å¼ƒã€‚å› ä¸ºå¦‚æœæ²¡æœ‰timewaitçŠ¶æ€ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç«‹å³å»ºç«‹ä¸€ä¸ªå’Œåˆšå…³é—­çš„ç›¸ä¼¼çš„é“¾æ¥ã€‚è¿™ä¸ªè¿æ¥å¯èƒ½æ¥å—åŸæ¥è¿æ¥çš„æºå¸¦åº”ç”¨æ•°æ®çš„tcpæŠ¥æ–‡æ®µï¼ˆè¿Ÿæ¥çš„æŠ¥æ–‡æ®µï¼‰ã€‚å› æ­¤æˆ‘ä»¬æ­¤æ—¶ä¸åº”è¯¥ç”¨æ­¤é“¾æ¥çš„ç«¯å£å·å»ºç«‹æ–°è¿æ¥ï¼Œè®¾ä¸ºtimewaitçŠ¶æ€ã€‚ç„¶åç­‰å¾…2MSLï¼ˆä¿è¯ç½‘ç»œçš„ä¸¤ä¸ªä¼ è¾“æ–¹å‘ä¸Šè¿Ÿåˆ°çš„æŠ¥æ–‡æ®µéƒ½æ¶ˆå¤±äº†ã€è¢«ä¸­è½¬è·¯ç”±å™¨ä¸¢å¼ƒã€‘æ—¶é—´å»ä½¿è¿Ÿæ¥çš„æŠ¥æ–‡æ®µè¢«è¯†åˆ«ä¸¢å¼ƒï¼</p>
<p><strong>CLOSE_WAIT</strong>æ˜¯è¢«åŠ¨å…³é—­çš„ä¸€ç«¯åœ¨æ¥æ”¶åˆ°å¯¹ç«¯å…³é—­è¯·æ±‚ï¼ˆFINæŠ¥æ–‡æ®µï¼‰å¹¶ä¸”å°†ACKå‘é€å‡ºå»åæ‰€å¤„çš„çŠ¶æ€ï¼Œè¿™ç§çŠ¶æ€è¡¨ç¤ºï¼šæ”¶åˆ°äº†å¯¹ç«¯å…³é—­çš„è¯·æ±‚ï¼Œä½†æ˜¯æœ¬ç«¯è¿˜æ²¡æœ‰å®Œæˆå·¥ä½œï¼Œè¿˜æœªå…³é—­ã€‚</p>
<h4 id="TCPçš„æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶"><a href="#TCPçš„æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶" class="headerlink" title="TCPçš„æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶"></a>TCPçš„æµé‡æ§åˆ¶ä¸æ‹¥å¡æ§åˆ¶</h4><p><strong>è¶…æ—¶é‡ä¼ ï¼š</strong>TCPæœåŠ¡å¿…é¡»èƒ½å¤Ÿé‡ä¼ è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µçš„TCPæŠ¥æ–‡æ®µã€‚TCPä¸ºæ¯ä¸ªTCPæ¨¡å—éƒ½ç»´æŠ¤äº†ä¸€ä¸ªé‡ä¼ å®šæ—¶å™¨ï¼Œå®šæ—¶å™¨åœ¨ç¬¬ä¸€æ¬¡å‘é€TCPæŠ¥æ–‡æ®µæ—¶å¯åŠ¨ï¼Œå¦‚æœè¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°æ¥æ”¶æ–¹çš„ç¡®è®¤å·æŠ¥æ–‡æ®µï¼ŒTCPæ¨¡å—å°†é‡ä¼ TCPæŠ¥æ–‡æ®µå¹¶é‡ç½®å®šæ—¶å™¨ã€‚   è‡³äºä¸‹æ¬¡é‡ä¼ çš„è¶…æ—¶æ—¶é—´å¦‚ä½•é€‰æ‹©ï¼Œä»¥åŠæœ€å¤šé‡ä¼ å‡ æ¬¡ï¼Œè¿™æ˜¯TCPçš„é‡ä¼ ç­–ç•¥ã€‚ ä¸TCPè¶…æ—¶é‡è¿çš„ç­–ç•¥ç›¸ä¼¼ã€‚</p>
<p><strong>æ»‘åŠ¨çª—å£ï¼š</strong>TCPä¸­é‡‡ç”¨æ»‘åŠ¨çª—å£æ¥è¿›è¡Œæµé‡æ§åˆ¶ï¼Œæ»‘åŠ¨çª—å£çš„å¤§å°æ„å‘³ç€æ¥æ”¶æ–¹è¿˜æœ‰å¤šå¤§çš„ç¼“å†²åŒºå¯ä»¥ç”¨äºæ¥æ”¶æ•°æ®ã€‚å‘é€æ–¹å¯ä»¥é€šè¿‡æ»‘åŠ¨çª—å£çš„å¤§å°æ¥ç¡®å®šåº”è¯¥å‘é€å¤šå°‘å­—èŠ‚çš„æ•°æ®ã€‚å½“æ»‘åŠ¨çª—å£ä¸º0æ—¶ï¼Œå‘é€æ–¹ä¸€èˆ¬ä¸èƒ½å†å‘é€æ•°æ®æŠ¥ã€‚</p>
<p><strong>æ»‘åŠ¨çª—å£åè®®</strong>çš„åŸºæœ¬åŸç†å°±æ˜¯åœ¨ä»»æ„æ—¶åˆ»ï¼Œå‘é€æ–¹éƒ½ç»´æŒäº†ä¸€ä¸ªè¿ç»­çš„å…è®¸å‘é€çš„å¸§çš„åºå·ï¼Œç§°ä¸ºå‘é€çª—å£ï¼›åŒæ—¶ï¼Œæ¥æ”¶æ–¹ä¹Ÿç»´æŒäº†ä¸€ä¸ªè¿ç»­çš„å…è®¸æ¥æ”¶çš„å¸§çš„åºå·ï¼Œç§°ä¸ºæ¥æ”¶çª—å£ã€‚å‘é€çª—å£å’Œæ¥æ”¶çª—å£çš„åºå·çš„ä¸Šä¸‹ç•Œä¸ä¸€å®šè¦ä¸€æ ·ï¼Œç”šè‡³å¤§å°ä¹Ÿå¯ä»¥ä¸åŒã€‚ä¸åŒçš„æ»‘åŠ¨çª—å£åè®®çª—å£å¤§å°ä¸€èˆ¬ä¸åŒã€‚å‘é€æ–¹çª—å£å†…çš„åºåˆ—å·ä»£è¡¨äº†é‚£äº›å·²ç»è¢«å‘é€ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¢«ç¡®è®¤çš„å¸§ï¼Œæˆ–è€…æ˜¯é‚£äº›å¯ä»¥è¢«å‘é€çš„å¸§ã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/06.png">

<p><strong>æµé‡æ§åˆ¶çš„å¤„ç†è¿‡ç¨‹ï¼š</strong></p>
<p>ã€€ã€€TCPè¿æ¥é˜¶æ®µï¼ŒåŒæ–¹åå•†çª—å£å°ºå¯¸ï¼ŒåŒæ—¶æ¥æ”¶æ–¹é¢„ç•™æ•°æ®ç¼“å­˜åŒºï¼›</p>
<p>ã€€ã€€å‘é€æ–¹æ ¹æ®åå•†çš„ç»“æœï¼Œå‘é€ç¬¦åˆçª—å£å°ºå¯¸çš„æ•°æ®å­—èŠ‚æµï¼Œå¹¶ç­‰å¾…å¯¹æ–¹çš„ç¡®è®¤ï¼›</p>
<p>ã€€ã€€å‘é€æ–¹æ ¹æ®ç¡®è®¤ä¿¡æ¯ï¼Œæ”¹å˜çª—å£çš„å°ºå¯¸ï¼Œå¢åŠ æˆ–è€…å‡å°‘å‘é€æœªå¾—åˆ°ç¡®è®¤çš„å­—èŠ‚æµä¸­çš„å­—èŠ‚æ•°ã€‚è°ƒæ•´è¿‡ç¨‹åŒ…æ‹¬ï¼šå¦‚æœå‡ºç°å‘é€æ‹¥å¡ï¼Œå‘é€çª—å£ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠï¼ŒåŒæ—¶å°†è¶…æ—¶é‡ä¼ çš„æ—¶é—´é—´éš”æ‰©å¤§ä¸€å€ã€‚</p>
<h3 id="TCPçš„æ‹¥å¡æ§åˆ¶ï¼Œæµé‡æ§åˆ¶"><a href="#TCPçš„æ‹¥å¡æ§åˆ¶ï¼Œæµé‡æ§åˆ¶" class="headerlink" title="TCPçš„æ‹¥å¡æ§åˆ¶ï¼Œæµé‡æ§åˆ¶"></a>TCPçš„æ‹¥å¡æ§åˆ¶ï¼Œæµé‡æ§åˆ¶</h3><h4 id="æ‹¥å¡æ§åˆ¶"><a href="#æ‹¥å¡æ§åˆ¶" class="headerlink" title="æ‹¥å¡æ§åˆ¶"></a>æ‹¥å¡æ§åˆ¶</h4><p>ã€€ã€€TCPæ¨¡å—ä¸ºäº†é˜²æ­¢è¿‡å¤šçš„æ•°æ®æ³¨å…¥ç½‘ç»œï¼Œä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨æˆ–é“¾è·¯ä¸è‡´äºè¿‡è½½ã€‚ä»¥æ­¤æé«˜ç½‘ç»œåˆ©ç”¨ç‡ï¼Œé™ä½ä¸¢åŒ…ç‡ï¼Œå¹¶æŠ±è¯ç½‘ç»œèµ„æºå¯¹æ¯æ¡æ•°æ®æµçš„å…¬å¹³æ€§è€Œé‡‡å–çš„æ§åˆ¶æ‰‹æ®µã€‚æ‹¥å¡æ§åˆ¶åŒ…å«å››éƒ¨åˆ†å†…å®¹ï¼šæ…¢å¯åŠ¨ã€æ‹¥å¡é¿å…ã€å¿«é€Ÿé‡ä¼ ã€å¿«é€Ÿæ¢å¤ã€‚</p>
<h5 id="æ…¢å¯åŠ¨"><a href="#æ…¢å¯åŠ¨" class="headerlink" title="æ…¢å¯åŠ¨"></a>æ…¢å¯åŠ¨</h5><p>ã€€ã€€ç½‘ç»œä¼ è¾“åˆšå¼€å§‹æ—¶ï¼Œå¹¶ä¸çŸ¥é“ç½‘ç»œçš„å®é™…æƒ…å†µï¼Œæ‰€ä»¥é‡‡å–ä¸€ç§è¯•æ¢çš„æ–¹å¼æ§åˆ¶æ•°æ®çš„å‘é€é€Ÿç‡ã€‚æ…¢å¯åŠ¨é˜¶æ®µï¼Œæ•°æ®çš„å‘é€é€Ÿç‡ä»¥æŒ‡æ•°æ–¹å¼å¢é•¿ï¼Œå³å°±æ˜¯æ‹¥å¡çª—å£çš„å¢é•¿ï¼Œæ¯æ¬¡éƒ½æ˜¯æ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µæ•°é‡çš„2å€ã€‚å¯ä»¥çœ‹å‡ºæ…¢å¯åŠ¨å¹¶ä¸æ…¢ï¼Œæ‹¥å¡çª—å£å¢é•¿çš„é€Ÿåº¦å¾ˆå¿«ã€‚æ‰€ä»¥ï¼Œä¸ºå…¶è®¾ç½®äº†ä¸€ä¸ªæ…¢å¯åŠ¨é—¨é™ï¼Œå½“è¾¾åˆ°é—¨é™æ—¶ï¼Œå°±è¿›å…¥åˆ°æ‹¥å¡é¿å…é˜¶æ®µã€‚</p>
<h5 id="æ‹¥å¡é¿å…"><a href="#æ‹¥å¡é¿å…" class="headerlink" title="æ‹¥å¡é¿å…"></a>æ‹¥å¡é¿å…</h5><p>ã€€ã€€å½“æ‹¥å¡çª—å£çš„å¤§å°é‡‡ç”¨æ…¢å¯åŠ¨æ–¹å¼å¢é•¿åˆ°æ…¢å¯åŠ¨é—¨é™æ—¶ï¼Œå°±è¿›å…¥æ‹¥å¡é¿å…é˜¶æ®µï¼Œæ‹¥å¡é¿å…é˜¶æ®µä¸å†ä»¥æŒ‡æ•°å½¢å¼å¢é•¿æ‹¥å¡çª—å£ï¼Œè€Œæ˜¯æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´RTTå°±å°†å‘é€æ–¹çš„æ‹¥å¡çª—å£+1ï¼Œ ä½¿å…¶å¢é•¿é€Ÿåº¦å‡ç¼“ã€‚æŒ‰ç…§çº¿æ€§æ–¹å¼å¢é•¿ã€‚å¦‚æœå‘ç”Ÿç½‘ç»œæ‹¥å¡ï¼Œæ¯”å¦‚ä¸¢åŒ…æ—¶ï¼Œå°±å°†æ…¢å¯åŠ¨é—¨é™è®¾ä¸ºåŸæ¥çš„ä¸€åŠï¼Œç„¶åå°†æ‹¥å¡çª—å£è®¾ç½®ä¸º1ï¼Œå¼€å§‹æ‰§è¡Œæ…¢å¯åŠ¨ç®—æ³•ã€‚ï¼ˆè¾ƒä½çš„èµ·ç‚¹ï¼ŒæŒ‡æ•°çº§å¢é•¿ï¼‰ã€‚</p>
<h5 id="å¿«é€Ÿé‡ä¼ "><a href="#å¿«é€Ÿé‡ä¼ " class="headerlink" title="å¿«é€Ÿé‡ä¼ "></a>å¿«é€Ÿé‡ä¼ </h5><p>ã€€ã€€å‡è®¾å‘é€æ–¹å‘é€çš„æŠ¥æ–‡æ®µåˆ†åˆ«ä¸ºï¼š M1,M2,M3,M4,M5,M6 , å½“æ¥æ”¶æ–¹æ”¶åˆ°M1å’ŒM2åï¼ŒM3æŠ¥æ–‡æ®µä¸¢å¤±ï¼Œæ¥ç€æ”¶åˆ°çš„M4ï¼ŒM5ï¼ŒM6éƒ½ä¸åšå¤„ç†ï¼Œè€Œæ˜¯æ²¡æ¥æ”¶åˆ°ä¸€ä¸ªæŠ¥æ–‡æ®µå°±å¯¹M2é‡å¤ç¡®è®¤ï¼Œå‘é€æ–¹æ¥æ”¶åˆ°é‡å¤çš„ä¸‰æ¬¡ç¡®è®¤æŠ¥æ–‡æ®µï¼Œå°±å¯¹å…¶åçš„æŠ¥æ–‡æ®µè¿›è¡Œé‡æ–°å‘é€ï¼Œè€Œä¸éœ€è¦ç­‰å¾…è¶…æ—¶æ—¶é—´åˆ°è¾¾ã€‚å½“å¿«é€Ÿé‡ä¼ åï¼Œç«‹å³è¿›å…¥åˆ°å¿«é€Ÿæ¢å¤é˜¶æ®µã€‚</p>
<h5 id="å¿«é€Ÿæ¢å¤"><a href="#å¿«é€Ÿæ¢å¤" class="headerlink" title="å¿«é€Ÿæ¢å¤"></a>å¿«é€Ÿæ¢å¤</h5><p>ã€€ã€€å°†æ…¢å¯åŠ¨é—¨é™è®¾ç½®ä¸ºåŸæ¥çš„ä¸€åŠï¼Œç„¶åå°†æ‹¥å¡çª—å£è®¾ç½®ä¸ºç°åœ¨çš„æ…¢å¯åŠ¨é—¨é™å€¼ï¼Œä¸å†æ‰§è¡Œæ…¢å¯åŠ¨ç®—æ³•ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥æ‹¥å¡é¿å…é˜¶æ®µã€‚ä½¿å‘é€çª—å£æˆçº¿æ€§æ–¹å¼å¢å¤§ã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/TCP&UDP/07.png">



<p><strong>æµé‡æ§åˆ¶ï¼ˆæ»‘åŠ¨çª—å£åè®®ï¼‰TCPè¿æ¥çš„æ¯ä¸€æ–¹éƒ½æœ‰å›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ã€‚TCPçš„æ¥æ”¶ç«¯åªå…è®¸å¦ä¸€ç«¯å‘é€æ¥æ”¶ç«¯ç¼“å†²åŒºæ‰€èƒ½æ¥çº³çš„æ•°æ®ã€‚è¿™å°†é˜²æ­¢è¾ƒå¿«ä¸»æœºè‡´ä½¿è¾ƒæ…¢ä¸»æœºçš„ç¼“å†²åŒºæº¢å‡ºã€‚</strong>ã€æ»‘åŠ¨çª—å£æŠ€æœ¯å­˜åœ¨äºæ•°æ®é“¾è·¯å±‚å’Œä¼ è¾“å±‚ã€‚ä¸¤è€…æœ‰ä¸åŒçš„åè®®ï¼Œä½†åŸºæœ¬åŸç†ç›¸åŒã€‚åŒºåˆ«æ˜¯ä¸€ä¸ªæ˜¯å‘é€å¸§ï¼Œä¸€ä¸ªæ˜¯å‘é€å­—èŠ‚æ•°æ®ã€‚æ¥æ”¶æ–¹çš„æ¥å—çª—å£å‘Šè¯‰å‘é€æ–¹æœ¬ç«¯tcpæ¥å—ç¼“å†²åŒºè¿˜èƒ½å®¹çº³å¤šå°‘å­—èŠ‚ï¼Œå‘é€æ–¹çš„å‘é€çª—å£å°±å¯ä»¥æ§åˆ¶å‘é€æ•°æ®çš„é€Ÿåº¦ã€‚ã€‘</p>
<p>UDPæ²¡æœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶ï¼Œæ‰€ä»¥åœ¨ç½‘ç»œæ‹¥å¡æ—¶ä¸ä¼šæ˜¯æºä¸»æœºå‘é€é€Ÿç‡é™ä½ï¼ˆå¯¹å®æ—¶é€šä¿¡å¾ˆæœ‰ç”¨ï¼Œæ¯”å¦‚QQç”µè¯ï¼Œè§†é¢‘ä¼šè®®ç­‰ï¼‰</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>TCP</tag>
        <tag>UDP</tag>
        <tag>æµé‡æ§åˆ¶</tag>
        <tag>æ‹¥å¡æ§åˆ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonä¸Šä¸‹æ–‡ç®¡ç†</title>
    <url>/blog/Python/Python_id_12.html</url>
    <content><![CDATA[<p>ã€€ã€€åœ¨Pythonä¸­è®©è‡ªå·±åˆ›å»ºçš„å‡½æ•°ã€ç±»ã€å¯¹è±¡æ”¯æŒwithè¯­å¥ï¼Œå°±å®ç°äº†ä¸Šçº¿æ–‡ç®¡ç†åè®®ã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨with open(file, â€œa+â€) as f:è¿™æ ·çš„è¯­å¥ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨f.close()å…³é—­æ–‡ä»¶ã€‚è¿™ç§ç”¨æ³•ä¸ä»…ä¼˜é›…ï¼Œè€Œä¸”é¿å…é—å¿˜é‡Šæ”¾èµ„æºï¼Œååˆ†æ–¹ä¾¿ã€‚æ‰€ä»¥ï¼Œå½“æ“ä½œæŸäº›èµ„æºæ—¶ï¼Œéœ€è¦å¯¹èµ„æºçš„è·å–ä¸é‡Šæ”¾è¿›è¡Œè‡ªåŠ¨æ“ä½œï¼Œå°±å¯ä»¥ç”¨ä¸Šçº¿æ–‡ç®¡ç†å™¨ã€‚æ¯”å¦‚ï¼šæ•°æ®åº“çš„è¿æ¥ï¼ŒæŸ¥è¯¢ï¼Œå…³é—­å¤„ç†ï¼›socketçš„è¿æ¥å’Œæ–­å¼€ã€‚æœ¬ç¯‡ä¸»è¦ä»‹ç»ï¼Œå¦‚ä½•è®©è‡ªå·±åˆ›å»ºçš„ç±»ã€å¯¹è±¡ã€å‡½æ•°ç­‰æ”¯æŒwithè¯­å¥ï¼Œè¯¦ç»†è¯·çœ‹ä¸‹æ–‡ã€‚</p>
<a id="more"></a>

<h3 id="ä¸€ã€è®©å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®"><a href="#ä¸€ã€è®©å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®" class="headerlink" title="ä¸€ã€è®©å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®"></a>ä¸€ã€è®©å¯¹è±¡æ”¯æŒä¸Šä¸‹æ–‡ç®¡ç†åè®®</h3><p>ã€€ã€€åœ¨ç±»ä¸­ï¼Œå®ç° <strong>enter</strong>()å’Œ<strong>exit</strong>()æ–¹æ³•ï¼Œç±»åˆ›å»ºçš„å¯¹è±¡å°±æ”¯æŒwithè¯­å¥ã€‚å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(<span class="string">"in __enter__"</span>)</span><br><span class="line">		<span class="keyword">return</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">		print(<span class="string">"in __exit__"</span>)</span><br><span class="line"></span><br><span class="line">obj = A()</span><br><span class="line"><span class="keyword">with</span> obj <span class="keyword">as</span> o:</span><br><span class="line">	print(<span class="string">"çœ‹çœ‹oæ˜¯ä»€ä¹ˆï¼š"</span>, o)</span><br><span class="line">	print(<span class="string">"do something"</span>)</span><br><span class="line">print(<span class="string">"end"</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡Œç»“æœ</span></span><br><span class="line"><span class="keyword">in</span> __enter__</span><br><span class="line">çœ‹çœ‹oæ˜¯ä»€ä¹ˆï¼š [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">do something</span><br><span class="line"><span class="keyword">in</span> __exit__</span><br><span class="line">end</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€1ã€å½“æ‰§è¡Œ with è¯­å¥çš„æ—¶å€™ï¼Œå¯¹è±¡çš„ <strong>enter</strong>() æ–¹æ³•è¢«è§¦å‘ï¼Œ å®ƒè¿”å›çš„å€¼(å¦‚æœæœ‰çš„è¯)ä¼šè¢«èµ‹å€¼ç»™ as å£°æ˜çš„å˜é‡ã€‚å¯¹åº”è¾“å‡ºåº”è¯¥æ˜¯ã€in <strong>enter</strong>ã€‘å’Œå°†[1,2,3]èµ‹<br>ã€€ã€€ã€€ã€€å€¼ç»™oã€å­—æ¯oã€‘ã€‚</p>
<p>ã€€ã€€2ã€ç„¶åï¼Œwith è¯­å¥å—é‡Œé¢çš„ä»£ç å¼€å§‹æ‰§è¡Œã€‚å¯¹åº”çš„è¾“å‡ºæ˜¯ã€çœ‹çœ‹oæ˜¯ä»€ä¹ˆï¼š [1, 2, 3]ã€‘å’Œã€do sometingã€‘ã€‚</p>
<p>ã€€ã€€3ã€æœ€åï¼Œ<strong>exit</strong>() æ–¹æ³•è¢«è§¦å‘è¿›è¡Œæ¸…ç†å·¥ä½œã€‚å¯¹åº”çš„è¾“å‡ºæ˜¯ã€in <strong>exit</strong>ã€‘ã€‚</p>
<p>ã€€ã€€<strong>è¡¥å……è¯´æ˜ï¼š</strong> __ <strong>exit</strong> __ ()æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°åŒ…å«äº†å¼‚å¸¸ç±»å‹ã€å¼‚å¸¸å€¼å’Œè¿½æº¯ä¿¡æ¯(å¦‚æœæœ‰çš„è¯)ã€‚ __ <strong>exit</strong> __ ()æ–¹æ³•èƒ½è‡ªå·±å†³å®šæ€æ ·åˆ©ç”¨è¿™ä¸ªå¼‚å¸¸ä¿¡æ¯ï¼Œæˆ–è€…å¿½ç•¥<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€å®ƒå¹¶è¿”å›ä¸€ä¸ªNoneå€¼ã€‚ </p>
<p>ã€€ã€€å¦‚æœ __ <strong>exit</strong> __ ()è¿”å› True ï¼Œé‚£ä¹ˆå¼‚å¸¸ä¼šè¢«æ¸…ç©ºï¼Œå°±å¥½åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿä¸€æ ·ï¼Œ with è¯­å¥åé¢çš„ç¨‹åºç»§ç»­åœ¨æ­£å¸¸æ‰§è¡Œã€‚</p>
<p>ã€€ã€€ä¸Šé¢çš„ä¾‹å­è¿˜ä¸æ”¯æŒå¤šä¸ªwithåµŒå¥—ä½¿ç”¨ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¯ä»¥åµŒå¥—ä½¿ç”¨withè¯­å¥çš„ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> socket, AF_INET, SOCK_STREAM</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Connection</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, address, family=AF_INET, type=SOCK_STREAM)</span>:</span></span><br><span class="line">		self.address = address</span><br><span class="line">		self.family = family</span><br><span class="line">		self.type = type</span><br><span class="line">		self.connections = []</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">		sock = socket(self.family, self.type)</span><br><span class="line">		sock.connect(self.address)</span><br><span class="line">		self.connections.append(sock)</span><br><span class="line">		<span class="keyword">return</span> sock</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_ty, exc_val, tb)</span>:</span></span><br><span class="line">		self.connections.pop().close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">conn = Connection((<span class="string">'www.python.org'</span>, <span class="number">80</span>))</span><br><span class="line"><span class="keyword">with</span> conn <span class="keyword">as</span> s1:</span><br><span class="line">	print(s1)</span><br><span class="line"><span class="keyword">with</span> conn <span class="keyword">as</span> s2:</span><br><span class="line">        print(s2)</span><br></pre></td></tr></table></figure></div>

<h3 id="äºŒã€è£…é¥°å™¨ç‰ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨"><a href="#äºŒã€è£…é¥°å™¨ç‰ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨" class="headerlink" title="äºŒã€è£…é¥°å™¨ç‰ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨"></a>äºŒã€è£…é¥°å™¨ç‰ˆä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3><p>ã€€ã€€ä¸Šé¢ä»‹ç»äº†åœ¨ç±»å’Œå¯¹è±¡ä¸­å®ç°ä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼Œå…¶å®Pythonæ ‡å‡†åº“ä¸­contextlibåŒ…çš„@contextmanagerè£…é¥°å™¨èƒ½å¤Ÿè½»æ¾å®ç°ä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Œä¸‹ä¾‹æ˜¯ç”¨å…¶å®ç°ç»Ÿè®¡ä»£<br>ã€€ã€€ç å—è€—æ—¶çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"><span class="comment"># æ¥çœ‹ä¸€ä¸ªè£…é¥°å™¨ç‰ˆæœ¬çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨</span></span><br><span class="line"><span class="comment"># æ£€æŸ¥ä»£ç æ¶ˆè€—æ—¶é—´å—</span></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timecount</span><span class="params">(name)</span>:</span></span><br><span class="line">	start = time.time()</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		<span class="keyword">yield</span></span><br><span class="line">	<span class="keyword">finally</span>:</span><br><span class="line">		end = time.time()</span><br><span class="line">		print(<span class="string">'&#123;&#125;: &#123;&#125;'</span>.format(name, end - start))</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> timecount(<span class="string">'cost time:'</span>):</span><br><span class="line">	time.sleep(<span class="number">2</span>)</span><br><span class="line"><span class="comment"># cost time:: 2.000200033187866</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€timecountï¼ˆï¼‰ä¸­ï¼Œyieldä¹‹å‰çš„ä»£ç ç›¸å½“äº<strong>enter</strong>()æ–¹æ³•ï¼›yield ä¹‹åçš„ä»£ç ç›¸å½“äº <strong>exit</strong>()æ–¹æ³•ã€‚å¦‚æœæœ‰å¼‚å¸¸ä¼šè‡ªåŠ¨åœ¨yieldä¸€è¡ŒæŠ›å‡ºã€‚</p>
<p>ã€€ã€€ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯ä»¥åº”ç”¨åœ¨äº‹åŠ¡ä¸­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ›´é«˜çº§çš„äº‹åŠ¡ç®¡ç†</span></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_transaction</span><span class="params">(orig_list)</span>:</span></span><br><span class="line">	working = list(orig_list)</span><br><span class="line">	<span class="keyword">yield</span> working</span><br><span class="line">	orig_list[:] = working</span><br><span class="line">    </span><br><span class="line">lis = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">with</span> list_transaction(lis) <span class="keyword">as</span> work:</span><br><span class="line">	work.append(<span class="number">5</span>)</span><br><span class="line">	work.append(<span class="number">6</span>)</span><br><span class="line">    </span><br><span class="line">print(lis)</span><br><span class="line"><span class="comment"># [1, 2, 3, 5, 6]</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ä¸€æ—¦withè¯­å¥å†…æœ‰å¼‚å¸¸äº§ç”Ÿï¼Œä¹‹å‰çš„æ“ä½œä¸ä¼šç”Ÿæ•ˆï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">lis = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">with</span> list_transaction(lis) <span class="keyword">as</span> work:</span><br><span class="line">	work.append(<span class="number">5</span>)</span><br><span class="line">	work.append(<span class="number">6</span>)</span><br><span class="line">	print(lis)</span><br><span class="line">	<span class="keyword">raise</span> RuntimeError(<span class="string">"å›æ»š"</span>)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€å¦‚æœåœ¨äº¤äº’å¼å‘½ä»¤è¡Œä¸­æ‰“å°lis,ä¾ç„¶ä¼šå‘ç°lisçš„å†…å®¹æ²¡æœ‰æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œwithè¯­å¥ä¸­çš„ä»£ç å‡ºç°å¼‚å¸¸ï¼Œwithè¯­å¥ä¸­çš„æ“ä½œéƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œåªæœ‰withæ— å¼‚å¸¸é€€å‡ºï¼Œæ‰ä¼š<br>ã€€ã€€ç”Ÿæ•ˆã€‚å¯¹äºäº‹åŠ¡ç®¡ç†æ¥è¯´æ˜¯æ¯”è¾ƒæœ‰ç”¨çš„ã€‚</p>
<h3 id="ä¸‰ã€å°ç»“"><a href="#ä¸‰ã€å°ç»“" class="headerlink" title="ä¸‰ã€å°ç»“"></a>ä¸‰ã€å°ç»“</h3><p>ã€€ã€€1ã€å½“æ“ä½œä¸€äº›éœ€è¦æ‰“å¼€ã€è¿æ¥ã€æ–­å¼€æˆ–é‡Šæ”¾çš„èµ„æºæ—¶ï¼Œè®©å¯¹è±¡æˆ–å‡½æ•°æ”¯æŒwithè¯­å¥ååˆ†æ–¹ä¾¿ã€çœäº‹ã€ä¼˜é›…ã€‚å¦‚æ•°æ®åº“çš„é“¾æ¥æ–­å¼€ã€å¥—æ¥å­—çš„è¿æ¥æ–­å¼€ã€äº‹åŠ¡ã€é”èµ„<br>ã€€ã€€ã€€ã€€æºç­‰ã€‚</p>
<p>ã€€ã€€2ã€ç±»ä¸­å®ç°<strong>enter</strong>()å’Œ<strong>exit</strong>()æ–¹æ³•ï¼Œå³å¯å®ç°ä¸Šä¸‹æ–‡ç®¡ç†åè®®ï¼Œå¯¹è±¡å¯ä½¿ç”¨withè¯­å¥ã€‚</p>
<p>ã€€ã€€3ã€é€šè¿‡contextlibåŒ…ä¸­çš„@contextmanagerè£…é¥°å™¨è£…é¥°ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å³å¯ä½¿ç”¨withè¯­å¥ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>ä¸Šä¸‹æ–‡ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ–‡ä»¶çš„æ“ä½œ</title>
    <url>/blog/Python/Python_id_11.html</url>
    <content><![CDATA[<h3 id="ä¸€ã€æ–‡ä»¶çš„ä½œç”¨ï¼š"><a href="#ä¸€ã€æ–‡ä»¶çš„ä½œç”¨ï¼š" class="headerlink" title="ä¸€ã€æ–‡ä»¶çš„ä½œç”¨ï¼š"></a>ä¸€ã€æ–‡ä»¶çš„ä½œç”¨ï¼š</h3><p>ã€€ã€€<strong>å°±æ˜¯æŠŠä¸€äº›å­˜å‚¨å­˜æ”¾èµ·æ¥ï¼Œå¯ä»¥è®©ç¨‹åºä¸‹ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ç›´æ¥ä½¿ç”¨ï¼Œè€Œä¸å¿…é‡æ–°åˆ¶ä½œä¸€ä»½ï¼Œçœæ—¶çœåŠ›</strong></p>
<p>ã€€ã€€1ã€æ‰“å¼€æ–‡ä»¶ä»¥åŠå…³é—­æ–‡ä»¶ä¸­é—´çš„è¿‡ç¨‹ï¼š<strong>åˆ›å»ºæ–‡ä»¶â€“æ‰“å¼€æ–‡ä»¶â€“è¯»å–æˆ–ä¿®æ”¹æ–‡ä»¶â€“å…³é—­æ–‡ä»¶</strong></p>
<p>ã€€ã€€2ã€æ‰“å¼€æ–‡ä»¶çš„å…³é”®å­—â€”-<strong>open</strong></p>
<a id="more"></a>

<p>ã€€ã€€3ã€æ–‡ä»¶çš„è®¿é—®æ¨¡å¼ï¼š</p>
<p>ã€€ã€€ã€€ã€€1ï¼‰r â€“ä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œé»˜è®¤ä»å¤´å¼€å§‹è¯»å–</p>
<p>ã€€ã€€ã€€ã€€2ï¼‰wâ€“æ‰“å¼€æ–‡ä»¶ç”¨äºå†™å…¥ï¼Œå¹¶è¦†ç›–ä¹‹å‰çš„å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€3ï¼‰aâ€“æ‰“å¼€æ–‡ä»¶è¿½åŠ å†™å…¥å†…å®¹ï¼Œæ–°çš„å†…å®¹å°†åœ¨æ—§çš„å†…å®¹ä¹‹åç»§ç»­å†™å…¥ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€4ï¼‰rbâ€“ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼åªè¯»ä¸€ä¸ªæ–‡ä»¶ï¼Œé»˜è®¤ä»å¤´å¼€å§‹è¯»å–</p>
<p>ã€€ã€€ã€€ã€€5ï¼‰wbâ€“ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶ç”¨äºå†™å…¥å†…å®¹ï¼Œå¹¶è¦†ç›–ä¹‹å‰çš„å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€6ï¼‰abâ€“ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨å·²æœ‰å†…å®¹çš„æœ€åè¾¹è¿½åŠ æ–°çš„å†…å®¹ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€7ï¼‰r+ â€“æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´</p>
<p>ã€€ã€€ã€€ã€€8ï¼‰w+ â€“æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™å°†å…¶è¦†ç›–ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€9ï¼‰a+ â€“æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ï¼Œæ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€10ï¼‰rb+ â€“ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´</p>
<p>ã€€ã€€ã€€ã€€11ï¼‰wb+ â€“ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™å°†å…¶è¦†ç›–ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶</p>
<p>ã€€ã€€ã€€ã€€12ï¼‰ab+ â€“ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶</p>
<p>ã€€ã€€4ã€å…³é—­æ–‡ä»¶çš„å…³é”®å­—â€”-<strong>close</strong></p>
<p>ã€€ã€€<code>æ³¨æ„ï¼šæ‰“å¼€æ–‡ä»¶ä¸å…³é—­æ–‡ä»¶æ˜¯åŒæ—¶å­˜åœ¨çš„(å³ï¼šæœ‰æ‰“å¼€å°±ä¸€å®šæœ‰å…³é—­ï¼Œè¿™æ˜¯æ–‡ä»¶çš„åŸºæœ¬ç»“æ„)</code></p>
<h3 id="äºŒã€æ–‡ä»¶çš„è¯»å†™"><a href="#äºŒã€æ–‡ä»¶çš„è¯»å†™" class="headerlink" title="äºŒã€æ–‡ä»¶çš„è¯»å†™"></a>äºŒã€æ–‡ä»¶çš„è¯»å†™</h3><h4 id="1ã€å†™æ•°æ®-write"><a href="#1ã€å†™æ•°æ®-write" class="headerlink" title="1ã€å†™æ•°æ®(write)"></a>1ã€å†™æ•°æ®(write)</h4><p>ã€€ã€€<strong>ä½¿ç”¨write()å¯ä»¥å®Œæˆå‘æ–‡ä»¶å†™å…¥æ•°æ®</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f = open(<span class="string">'holle.txt'</span>,<span class="string">'w'</span>)		<span class="comment"># åœ¨holle.txtä¸­å†™å…¥æ•°æ®ï¼Œå¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):			<span class="comment"># forå¾ªç¯éå†è¾“å…¥5æ¬¡</span></span><br><span class="line">	f.write(<span class="string">"holle world holle python\n"</span>)		<span class="comment"># è¾“å…¥è¦å†™å…¥çš„å†…å®¹</span></span><br><span class="line">f.close()</span><br><span class="line"><span class="comment"># å†™å…¥åˆ°holle.txtæ–‡ä»¶ä¸­ä¸º5è¡Œæ˜¾ç¤º holle world holle python</span></span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€è¯»æ•°æ®-read"><a href="#2ã€è¯»æ•°æ®-read" class="headerlink" title="2ã€è¯»æ•°æ®(read)"></a>2ã€è¯»æ•°æ®(read)</h4><p>ã€€ã€€ä½¿ç”¨read()å¯ä»¥å®Œæˆå‘æ–‡ä»¶çš„è¯»å–ï¼Œå¦‚æœç”¨openæ‰“å¼€æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨çš„â€râ€ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥ï¼Œå³åªå†™ open(â€˜test.txtâ€™)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ret = f.read(<span class="number">10</span>)				<span class="comment"># ret ä¸ºè¯»å–æ–‡ä»¶fçš„åä¸ªå­—ç¬¦ï¼Œé»˜è®¤ä»å¤´å¼€å§‹è¯»å–</span></span><br><span class="line">ret2 = f.read()				<span class="comment"># ret2ä¸ºè¯»å–æ–‡ä»¶çš„å‰©ä½™æ‰€æœ‰å­—ç¬¦ï¼Œå› ä¸ºretå·²ç»è¯»å–äº†åä¸ªå­—ç¬¦</span></span><br><span class="line">print(ret)					<span class="comment"># è¾“å‡ºretè¯»å–çš„åä¸ªå­—ç¬¦</span></span><br><span class="line">print(ret2)					<span class="comment"># è¾“å‡ºret2è¯»å–çš„å‰©ä¸‹æ‰€æœ‰å­—ç¬¦</span></span><br><span class="line">f.close()					<span class="comment"># å…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€è¯»æ•°æ®ï¼ˆreadlinesï¼‰"><a href="#3ã€è¯»æ•°æ®ï¼ˆreadlinesï¼‰" class="headerlink" title="3ã€è¯»æ•°æ®ï¼ˆreadlinesï¼‰"></a>3ã€è¯»æ•°æ®ï¼ˆreadlinesï¼‰</h4><p>ã€€ã€€å°±åƒreadæ²¡æœ‰å‚æ•°æ—¶ä¸€æ ·ï¼Œreadlineså¯ä»¥æŒ‰ç…§è¡Œçš„æ–¹å¼æŠŠæ•´ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹è¿›è¡Œä¸€æ¬¡æ€§è¯»å–ï¼Œå¹¶ä¸”è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸€è¡Œçš„æ•°æ®ä¸ºä¸€ä¸ªå…ƒç´ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f = open(<span class="string">'holle.txt'</span>)			<span class="comment"># æ‰“å¼€fæ–‡ä»¶ç”¨äºåªè¯»</span></span><br><span class="line">ret = f.readlines()			<span class="comment"># è¯»å–fæ–‡ä»¶å†…æ‰€æœ‰è¡Œçš„å†…å®¹ï¼Œå¹¶ç”¨å˜é‡retæ¥æ”¶</span></span><br><span class="line">print(ret)					<span class="comment"># è¾“å‡ºretæ¥æ”¶çš„å†…å®¹</span></span><br><span class="line">f.close()					<span class="comment"># å…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></div>

<h4 id="4ã€è¯»æ•°æ®ï¼ˆreadlineï¼‰"><a href="#4ã€è¯»æ•°æ®ï¼ˆreadlineï¼‰" class="headerlink" title="4ã€è¯»æ•°æ®ï¼ˆreadlineï¼‰"></a>4ã€è¯»æ•°æ®ï¼ˆreadlineï¼‰</h4><p>ã€€ã€€readline è¯»å–å•è¡Œæ‰€æœ‰è¡Œå†…å®¹ï¼Œå¹¶è®°å½•è¯»å–ä½ç½®ï¼Œå†è¯»å–æ˜¯ä»ä¸Šæ¬¡ä½ç½®ç»§ç»­å¾€ä¸‹è¯»å–</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f = open(<span class="string">'zhuhuifei.py'</span>,<span class="string">'r'</span>,encoding=<span class="string">'utf8'</span>)</span><br><span class="line">ret = f.readline()		<span class="comment"># è¯»å…¥ä¸€è¡Œå†…å®¹(é»˜è®¤ä»å¤´å¼€å§‹è¯»å–)ï¼Œå¹¶ç”¨å˜é‡retæ¥æ”¶è¯»å–å†…å®¹</span></span><br><span class="line">print(ret)			<span class="comment"># è¾“å…¥retæ¥æ”¶çš„è¯»å–å†…å®¹</span></span><br><span class="line">ret = f.readline()		<span class="comment"># è¯»å–ç¬¬ä¸€æ¬¡è¯»å–åçš„ä¸‹ä¸€è¡Œå†…å®¹ï¼Œå¹¶ç”¨å˜é‡retæ¥æ”¶è¯»å–å†…å®¹</span></span><br><span class="line">print(ret)			<span class="comment"># è¯»å–retæ¥æ”¶çš„ç¬¬äºŒæ¬¡è¯»å–å†…å®¹(ç¬¬ä¸€æ¬¡è¯»å–çš„å†…å®¹å°†è¢«è¦†ç›–,ä¹Ÿå¯ç”¨å…¶å®ƒæ¯”å˜é‡å)</span></span><br><span class="line">f.close()			<span class="comment"># å®Œæˆè¦æ±‚åï¼Œå…³é—­æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸‰ã€æ–‡ä»¶ä¸æ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œ"><a href="#ä¸‰ã€æ–‡ä»¶ä¸æ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œ" class="headerlink" title="ä¸‰ã€æ–‡ä»¶ä¸æ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œ"></a>ä¸‰ã€æ–‡ä»¶ä¸æ–‡ä»¶å¤¹çš„ç›¸å…³æ“ä½œ</h3><p>ã€€ã€€1ã€æ–‡ä»¶é‡å‘½åâ€”osæ¨¡å—ä¸­çš„rename()å¯ä»¥å®Œæˆå¯¹æ–‡ä»¶çš„é‡å‘½åæ“ä½œ</p>
 <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">os.rename(<span class="string">'w.txt'</span>,<span class="string">'m.txt'</span>)	<span class="comment"># å‰é¢æ”¾è¦è¢«é‡æ–°å‘½åçš„æ–‡ä»¶åï¼Œåé¢æ”¾è¦é‡æ–°å‘½åçš„åå­—</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€2ã€åˆ é™¤æ–‡ä»¶osæ¨¡å—ä¸­çš„remove()å¯ä»¥å®Œæˆå¯¹æ–‡ä»¶çš„åˆ é™¤æ“ä½œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">os.remove(<span class="string">'holle.txt'</span>)	<span class="comment"># åé¢ç›´æ¥æ”¾å…¥éœ€è¦åˆ é™¤çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€3ã€åˆ›å»ºæ–‡ä»¶å¤¹osæ¨¡å—ä¸­çš„mkdir()å¯ä»¥å®Œæˆå¯¹æ–‡ä»¶å¤¹çš„åˆ›å»ºæ“ä½œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">os.mkdir(â€˜æ˜ŸæœŸäº”â€™)		<span class="comment"># åé¢ç›´æ¥æ”¾å…¥éœ€è¦åˆ›å»ºçš„æ–‡ä»¶å¤¹çš„åå­—</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€4ã€åˆ é™¤æ–‡ä»¶å¤¹osæ¨¡å—ä¸­çš„rmdir()å¯ä»¥å®Œæˆå¯¹æ–‡ä»¶çš„åˆ é™¤æ“ä½œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">os.rmdir(<span class="string">'æ˜ŸæœŸäº”'</span>)		<span class="comment"># åé¢ç›´æ¥æ”¾å…¥éœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹çš„åå­—</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€5ã€è·å–å½“å‰ç›®å½•osæ¨¡å—ä¸­çš„getcwd()å¯ä»¥è·å–å½“å‰ç›®å½•çš„ä½ç½®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">print(os.getcwd())	 <span class="comment"># è¾“å‡ºå½“å‰ç›®å½•çš„æ‰€åœ¨ä½ç½®</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€6ã€åˆ‡æ¢ä¸Šä¸€çº§ç›®å½• osæ¨¡å—ä¸­çš„chdir()å¯ä»¥åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•ä½ç½®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">os.chdir(<span class="string">"../"</span>)	<span class="comment"># åé¢è¾“å…¥../å¯ä»¥åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•ä½ç½®</span></span><br><span class="line">print(os.getcwd())	<span class="comment"># è¾“å‡ºåˆ‡æ¢åçš„ç›®å½•ä½ç½®</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€7ã€æŸ¥çœ‹å½“å‰ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶å¤¹osæ¨¡å—ä¸­çš„listdir()å¯ä»¥è·å–å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os		<span class="comment"># åˆ›å»ºosæ¨¡å—</span></span><br><span class="line">os.listdir(<span class="string">'/'</span>)		<span class="comment"># åé¢è¾“å…¥éœ€è¦æ‰“å¼€çš„ç›®å½•ï¼Œå¹¶è·å–é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶å¤¹</span></span><br><span class="line">print(os.listdir(<span class="string">'./'</span>))	<span class="comment"># è¾“å‡ºç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶å¤¹çš„</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å››ã€æ–‡ä»¶çš„å¤‡ä»½"><a href="#å››ã€æ–‡ä»¶çš„å¤‡ä»½" class="headerlink" title="å››ã€æ–‡ä»¶çš„å¤‡ä»½"></a>å››ã€æ–‡ä»¶çš„å¤‡ä»½</h3><p>ã€€ã€€<code>æ³¨æ„ï¼šæ–‡ä»¶çš„å¤‡ä»½æ˜¯é‡ç‚¹</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f = input(<span class="string">'è¯·è¾“å…¥è¦æ‹·è´çš„æ–‡ä»¶åï¼š'</span>)		<span class="comment"># é”®ç›˜è¾“å…¥è¦æ‹·è´æ–‡ä»¶çš„åå­—</span></span><br><span class="line">f1 = open(f,<span class="string">'rb'</span>)						<span class="comment"># ä»¥è¯»çš„æ–¹å¼æ‰“å¼€è€çš„æ–‡ä»¶ï¼Œæ–¹ä¾¿æ•°æ®è¯»å–</span></span><br><span class="line">num = f.rfind(<span class="string">'.'</span>)						<span class="comment"># è·å–â€™.â€™çš„ä½ç½®</span></span><br><span class="line">print(num)		</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> num &gt; <span class="number">0</span>:</span><br><span class="line">	hou_zhui = f[num:]					<span class="comment"># è·å–åç¼€</span></span><br><span class="line">	wen_jian_ming = f[:num]				<span class="comment"># è·å–æ–‡ä»¶å</span></span><br><span class="line">new_wen_jian = wen_jian_ming + <span class="string">'[é™„ä»¶]'</span> + hou_zhui		<span class="comment"># æ„é€ æ–°çš„æ–‡ä»¶å</span></span><br><span class="line">new_f = open(new_wen_jian,<span class="string">"wb"</span>)			<span class="comment"># æ–°å»ºæ–‡ä»¶ï¼Œå¹¶å†™å…¥æ–‡ä»¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f1.readlines():</span><br><span class="line">	new_f.write(i)</span><br><span class="line">f1.close()				<span class="comment"># ç»“æŸæ“ä½œ</span></span><br><span class="line">new_f.close()</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>æ–‡ä»¶çš„æ“ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonæ·±æµ…æ‹·è´åŠisä¸==çš„åŒºåˆ«</title>
    <url>/blog/Python/Python_id_10.html</url>
    <content><![CDATA[<p>ã€€ã€€Pythonä¸­copyæ¨¡å—ç”¨äºå¯¹è±¡çš„æ‹·è´æ“ä½œï¼›è¯¥æ¨¡å—åªæä¾›äº†ä¸¤ä¸ªä¸»è¦çš„æ–¹æ³•ï¼šcopy.copyä¸copy.deepcopyï¼Œåˆ†åˆ«è¡¨ç¤ºæµ…æ‹·è´ä¸æ·±æ‹·è´ã€‚</p>
<a id="more"></a>

<h3 id="ä¸€ã€æµ…æ‹·è´"><a href="#ä¸€ã€æµ…æ‹·è´" class="headerlink" title="ä¸€ã€æµ…æ‹·è´"></a>ä¸€ã€æµ…æ‹·è´</h3><p>ã€€ã€€æµ…æ‹·è´æ˜¯å¯¹äºä¸€ä¸ªå¯¹è±¡çš„é¡¶å±‚æ‹·è´ï¼Œç›¸å½“äºåªæ‹·è´äº†æœ€æµ…çš„ä¸€å±‚æˆ–è€…ç¬¬ä¸€å±‚ã€‚é€šä¿—çš„ç†è§£æ˜¯ï¼šæ‹·è´äº†å¼•ç”¨ï¼Œå¹¶æ²¡æœ‰æ‹·è´å†…å®¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="keyword">import</span> copy       <span class="comment"># æµ…æ‹·è´æ¨¡å—</span></span><br><span class="line">a = [<span class="number">11</span>,<span class="number">22</span>]</span><br><span class="line">b = [<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">c = [a,b]</span><br><span class="line">print(id(a))        	<span class="comment"># åˆ—è¡¨açš„å†…å­˜åœ°å€</span></span><br><span class="line">print(id(b))        	<span class="comment"># åˆ—è¡¨bçš„å†…å­˜åœ°å€</span></span><br><span class="line">print(id(c))        	<span class="comment"># åˆ—è¡¨cçš„å†…å­˜åœ°å€</span></span><br><span class="line">d = copy.copy(c)  	<span class="comment"># å°†åˆ—è¡¨cæµ…æ‹·è´ç»™åˆ—è¡¨d</span></span><br><span class="line">print(id(d))   		<span class="comment"># åˆ—è¡¨dçš„å†…å­˜åœ°å€</span></span><br><span class="line">print(id(d[<span class="number">0</span>])) <span class="comment"># åˆ—è¡¨dä¸­ä¸‹æ ‡0çš„å†…å­˜åœ°å€(å› ä¸ºä¸‹æ ‡0æ˜¯åˆ—è¡¨aï¼Œæ‰€ä»¥å†…å­˜åœ°å€ä¸aä¸€æ ·)</span></span><br><span class="line">print(id(d[<span class="number">1</span>])) <span class="comment"># åˆ—è¡¨dä¸­ä¸‹æ ‡0çš„å†…å­˜åœ°å€(å› ä¸ºä¸‹æ ‡1æ˜¯åˆ—è¡¨bï¼Œæ‰€ä»¥å†…å­˜åœ°å€ä¸bä¸€æ ·)</span></span><br><span class="line">a.append(<span class="number">11</span>)      <span class="comment"># å‘åˆ—è¡¨aä¸­æ·»åŠ å…ƒç´ 11</span></span><br><span class="line">print(c)           	<span class="comment"># è¾“å‡ºæ·»åŠ ååˆ—è¡¨cçš„æ•°æ®ç»“æœ</span></span><br><span class="line">print(d) 				<span class="comment"># è¾“å‡ºæ·»åŠ ååˆ—è¡¨dçš„æ•°æ®ç»“æœ(å› ä¸ºdä¸ºæµ…æ‹·è´cçš„æ•°æ®ï¼Œæ‰€ä»¥åˆ—è¡¨dä¸åˆ—è¡¨cçš„è¾“å‡ºç»“æœç›¸åŒ)</span></span><br><span class="line"><span class="number">2677221188168</span></span><br><span class="line"><span class="number">2677221188232</span></span><br><span class="line"><span class="number">2677221682376</span></span><br><span class="line"><span class="number">2677251508296</span></span><br><span class="line"><span class="number">2677221188168</span></span><br><span class="line"><span class="number">2677221188232</span></span><br><span class="line"></span><br><span class="line">[[<span class="number">11</span>, <span class="number">22</span>, <span class="number">11</span>], [<span class="number">33</span>, <span class="number">44</span>]]	<span class="comment"># ç¬¬ä¸€å±‚ä¸ºa,bï¼Œå¹¶éå¤–é¢çš„ç©ºåˆ—è¡¨æ¡†</span></span><br><span class="line">[[<span class="number">11</span>, <span class="number">22</span>, <span class="number">11</span>], [<span class="number">33</span>, <span class="number">44</span>]]	<span class="comment"># ç¬¬ä¸€å±‚ä¸ºa,bï¼Œå¹¶éå¤–é¢çš„ç©ºåˆ—è¡¨æ¡†</span></span><br></pre></td></tr></table></figure></div>

<p><code>æµ…æ‹·è´åªæ‹·è´ç¬¬ä¸€å±‚æ•°æ®ï¼Œåˆ—è¡¨[[11,22],[33,44]]ä¸­çš„ç¬¬ä¸€å±‚æ•°æ®ä¸º[11,22],[33,44]ï¼Œè€Œå¹¶éæœ€å¤–å±‚çš„ç©º[ ]ï¼Œæ‰€ä»¥ï¼Œå½“åˆ—è¡¨aä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œæ‹·è´çš„é‡Œé¢åŒæ ·ä¼šæ·»åŠ ä¸Šè¿™ä¸ªå…ƒç´ </code></p>
<h4 id="1ã€æµ…æ‹·è´çš„ä¸‰ç§æƒ…å†µ"><a href="#1ã€æµ…æ‹·è´çš„ä¸‰ç§æƒ…å†µ" class="headerlink" title="1ã€æµ…æ‹·è´çš„ä¸‰ç§æƒ…å†µ"></a>1ã€æµ…æ‹·è´çš„ä¸‰ç§æƒ…å†µ</h4><p>ã€€ã€€<strong>1ã€æ‹·è´ä¸å¯å˜å¯¹è±¡ï¼šåªæ˜¯å¢åŠ ä¸€ä¸ªæŒ‡å‘åŸå¯¹è±¡çš„å¼•ç”¨ï¼Œæ”¹å˜ä¼šäº’ç›¸å½±å“ã€‚</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">b = copy.copy(a)</span><br><span class="line">print(b)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¹å˜ä¸€æ–¹ï¼Œå¦ä¸€æ–¹ä¹Ÿæ”¹å˜</span></span><br><span class="line">b[<span class="number">2</span>].append(<span class="number">5</span>)</span><br><span class="line">print(a)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>2ã€æ‹·è´å¯å˜å¯¹è±¡(ä¸€å±‚ç»“æ„)ï¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ï¼Œå¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ï¼Œæ”¹å˜äº’ä¸å½±å“ã€‚</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = copy.copy(a)</span><br><span class="line">print(b)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸¤è€…çš„å†…å­˜åœ°å€ï¼Œä¸åŒï¼Œå¼€è¾Ÿäº†æ–°çš„å†…å­˜ç©ºé—´</span></span><br><span class="line">print(id(b))</span><br><span class="line">print(id(a))</span><br><span class="line"><span class="number">1833997595272</span></span><br><span class="line"><span class="number">1833997595080</span></span><br><span class="line"></span><br><span class="line">print(a <span class="keyword">is</span> b)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¹å˜äº†ä¸€æ–¹ï¼Œå¦ä¸€æ–¹å…³æˆ‘åµäº‹</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] </span><br><span class="line">b = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b.append(<span class="number">4</span>)</span><br><span class="line">print(a)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">a.append(<span class="number">5</span>)</span><br><span class="line">print(b)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>3ã€æ‹·è´å¯å˜å¯¹è±¡(å¤šå±‚ç»“æ„)ï¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ï¼Œå¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ï¼Œä¸æ”¹å˜åŒ…å«çš„å­å¯¹è±¡åˆ™äº’ä¸å½±å“ã€æ”¹å˜åŒ…å«çš„å­å¯¹è±¡åˆ™äº’ç›¸å½±å“ã€‚</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">b = copy.copy(a)</span><br><span class="line">print(b)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸¤è€…çš„å†…å­˜åœ°å€ï¼Œä¸åŒï¼Œå¼€è¾Ÿäº†æ–°çš„å†…å­˜ç©ºé—´</span></span><br><span class="line">print(id(b))</span><br><span class="line">print(id(a))</span><br><span class="line"><span class="number">1833997596488</span></span><br><span class="line"><span class="number">1833997596424</span></span><br><span class="line">print(a <span class="keyword">is</span> b)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.æ²¡æœ‰å¯¹åŒ…å«çš„å­å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œå¦ä¸€æ–¹å…³æˆ‘åµäº‹</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">b = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">b.append(<span class="number">5</span>)</span><br><span class="line">print(a)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line">a.append(<span class="number">6</span>)</span><br><span class="line">print(b)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.å¯¹åŒ…å«çš„å­å¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œå¦ä¸€æ–¹ä¹Ÿéšä¹‹æ”¹å˜</span></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">b = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line">b[<span class="number">2</span>].append(<span class="number">5</span>)</span><br><span class="line">print(a)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"></span><br><span class="line">a[<span class="number">2</span>].append(<span class="number">6</span>)</span><br><span class="line">print(b)</span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br></pre></td></tr></table></figure></div>

<h3 id="äºŒã€æ·±æ‹·è´"><a href="#äºŒã€æ·±æ‹·è´" class="headerlink" title="äºŒã€æ·±æ‹·è´"></a>äºŒã€æ·±æ‹·è´</h3><p>ã€€ã€€1ã€æ·±æ‹·è´ä¼šå®Œå…¨å¤åˆ¶åŸå˜é‡çš„æ‰€æœ‰æ•°æ®ï¼ˆé€’å½’æ€§è´¨çš„æ‹·è´ï¼‰ï¼Œåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€å¥—å®Œå…¨ä¸€æ ·çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸¤ä¸ªå˜é‡ä¸­çš„ä¸€ä¸ªè¿›è¡Œä»»æ„ä¿®æ”¹éƒ½ä¸ä¼šå½±å“å¦ä¸€ä¸ªå˜é‡ã€‚</p>
<p>ã€€ã€€<code>æ³¨æ„ï¼šæµ…æ‹·è´å¯¹ä¸å¯å˜ç±»å‹å’Œå¯å˜ç±»å‹çš„copyä¸åŒï¼šcopy.copyå¯¹äºå¯å˜ç±»å‹ï¼Œä¼šè¿›è¡Œæµ…æ‹·è´ï¼Œcopy.copyå¯¹äºä¸å¯å˜ç±»å‹ï¼Œä¸ä¼šæ‹·è´ï¼Œä»…ä»…æ˜¯æŒ‡å‘</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="number">11</span>,<span class="number">22</span>]</span><br><span class="line">b = [<span class="number">33</span>,<span class="number">44</span>]</span><br><span class="line">c = [a,b]</span><br><span class="line">print(<span class="string">"c çš„å†…å­˜åœ°å€ï¼š"</span>,id(c))</span><br><span class="line"></span><br><span class="line">d = copy.deepcopy(c)</span><br><span class="line">print(<span class="string">"a çš„å†…å­˜åœ°å€ï¼š"</span>,id(a))</span><br><span class="line">print(<span class="string">"b çš„å†…å­˜åœ°å€ï¼š"</span>,id(b))</span><br><span class="line">print(<span class="string">"d ä¸‹æ ‡0çš„å†…å­˜åœ°å€ï¼š"</span>,id(d[<span class="number">0</span>]))</span><br><span class="line">print(<span class="string">"d ä¸‹æ ‡1çš„å†…å­˜åœ°å€ï¼š"</span>,id(d[<span class="number">1</span>]))</span><br><span class="line">print(<span class="string">"d çš„å†…å­˜åœ°å€ï¼š"</span>,id(d))</span><br><span class="line"></span><br><span class="line">c[<span class="number">-1</span>].append(<span class="number">55</span>)</span><br><span class="line">print(<span class="string">"c æ·»åŠ å…ƒç´ åï¼š"</span>,c)</span><br><span class="line">print(<span class="string">"d çš„è¾“å‡ºç»“æœï¼š"</span>,d)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line">c çš„å†…å­˜åœ°å€ï¼š <span class="number">1695548046536</span></span><br><span class="line">a çš„å†…å­˜åœ°å€ï¼š <span class="number">1695547548232</span></span><br><span class="line">b çš„å†…å­˜åœ°å€ï¼š <span class="number">1695547548296</span></span><br><span class="line">d ä¸‹æ ‡<span class="number">0</span>çš„å†…å­˜åœ°å€ï¼š <span class="number">1695549425096</span> 	<span class="comment"># ä¸açš„å†…å­˜åœ°å€ä¸åŒï¼Œå› ä¸ºåªæ‹·è´äº†açš„å†…å®¹</span></span><br><span class="line">d ä¸‹æ ‡<span class="number">1</span>çš„å†…å­˜åœ°å€ï¼š <span class="number">1695549627720</span>	<span class="comment"># ä¸bçš„å†…å­˜åœ°å€ä¸åŒï¼Œå› ä¸ºåªæ‹·è´äº†bçš„å†…å®¹</span></span><br><span class="line">d çš„å†…å­˜åœ°å€ï¼š <span class="number">1695549426312</span>	</span><br><span class="line">c æ·»åŠ å…ƒç´ åï¼š [[<span class="number">11</span>, <span class="number">22</span>], [<span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>]]		<span class="comment"># æ·±æ‹·è´é‡Œcçš„å†…å®¹å‘ç”Ÿæ”¹å˜</span></span><br><span class="line">d çš„è¾“å‡ºç»“æœï¼š [[<span class="number">11</span>, <span class="number">22</span>], [<span class="number">33</span>, <span class="number">44</span>]]			<span class="comment"># æ‹·è´åçš„å†…å®¹ä¸ä¼šå—åˆ°ä»»ä½•å½±å“</span></span><br></pre></td></tr></table></figure></div>

<p><code>dæ˜¯æ·±æ‹·è´cçš„å†…å®¹ï¼Œå¹¶æ²¡æœ‰æ‹·è´å†…å­˜åœ°å€ï¼Œæ‰€ä»¥ï¼Œå³ä¾¿å†…å®¹ç›¸åŒï¼Œå†…å­˜åœ°å€ä¹Ÿæ˜¯ä¸ç›¸åŒçš„ï¼Œå¦å¤–ï¼Œå½“dæ‹·è´è¿‡cé‡Œé¢çš„å†…å®¹åï¼Œæˆ‘ä»¬å†å¯¹cè¿›è¡Œä¿®æ”¹æˆ–æ·»åŠ å…ƒç´ ï¼Œå¹¶ä¸ä¼šå½±å“dé‡Œé¢çš„å†…å®¹ã€‚</code></p>
<h3 id="ä¸‰ã€-å’Œ-isè¿ç®—ç¬¦çš„åŒºåˆ«"><a href="#ä¸‰ã€-å’Œ-isè¿ç®—ç¬¦çš„åŒºåˆ«" class="headerlink" title="ä¸‰ã€== å’Œ isè¿ç®—ç¬¦çš„åŒºåˆ«"></a>ä¸‰ã€== å’Œ isè¿ç®—ç¬¦çš„åŒºåˆ«</h3><p>ã€€ã€€1ã€== æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå³å†…å­˜åœ°å€å¯ä»¥ä¸ä¸€æ ·ï¼Œå†…å®¹ä¸€æ ·å°±å¯ä»¥äº†ã€‚</p>
<p>ã€€ã€€2ã€is æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯å®Œå…¨ç›¸åŒï¼Œå®ƒä»¬æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå ç”¨çš„å†…å­˜åœ°å€æ˜¯å¦ç›¸åŒã€‚</p>
<p>ã€€ã€€<code>ä¸ªäººç†è§£ï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡isæˆç«‹ï¼Œé‚£ä¹ˆ==å°±ä¸€å®šæˆç«‹ï¼›ç›¸åï¼Œå¦‚æœä¸¤ä¸ªå¯¹è±¡==æˆç«‹ï¼Œå¹¶ä¸èƒ½ä»£è¡¨iså°±ä¸€å®šæˆç«‹</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼š</span></span><br><span class="line">a = [<span class="number">11</span>,<span class="number">22</span>]</span><br><span class="line">b = [<span class="number">11</span>,<span class="number">22</span>]</span><br><span class="line">print(id(a))</span><br><span class="line">print(id(b))</span><br><span class="line"><span class="keyword">if</span> a == b:</span><br><span class="line">	print(<span class="string">"ç›¸ç­‰çš„"</span>)</span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">is</span> b:</span><br><span class="line">	print(<span class="string">"a æ˜¯ b"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line"><span class="number">3015265903176</span></span><br><span class="line"><span class="number">3015265903240</span></span><br><span class="line">ç›¸ç­‰çš„		<span class="comment"># å› ä¸ºif a is bæ¡ä»¶ä¸æˆç«‹ï¼Œæ‰€ä»¥æ²¡æœ‰è¾“å‡ºç»“æœ</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼š</span></span><br><span class="line">a = <span class="number">3</span></span><br><span class="line">b = <span class="number">3</span></span><br><span class="line">print(id(a))</span><br><span class="line">print(id(b))</span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">is</span> b:</span><br><span class="line">	print(<span class="string">"a æ˜¯ b"</span>)</span><br><span class="line"><span class="keyword">if</span> a == b:</span><br><span class="line">	print(<span class="string">"ç›¸ç­‰çš„"</span>)</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line"><span class="number">140708210070624</span></span><br><span class="line"><span class="number">140708210070624</span></span><br><span class="line">a æ˜¯ b		<span class="comment"># å†…å­˜åœ°å€ä¸€æ ·ï¼Œæ¡ä»¶æˆç«‹ï¼Œè¾“å‡ºç»“æœ</span></span><br><span class="line">ç›¸ç­‰çš„		<span class="comment"># å†…å®¹ä¸€æ ·ï¼Œæ¡ä»¶æˆç«‹ï¼Œè¾“å‡ºç»“æœ</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>æ·±æµ…æ‹·è´</tag>
        <tag>isä¸==</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythonå†…å­˜å›æ”¶æœºåˆ¶</title>
    <url>/blog/Python/Python_id_09.html</url>
    <content><![CDATA[<p>ã€€ã€€Pythonå†…å­˜å›æ”¶æœºåˆ¶åˆ†ä¸ºä¸‰ç§ï¼šå¼•ç”¨è®¡æ•°ã€æ ‡è®°æ¸…æ¥šã€åˆ†ä»£å›æ”¶</p>
<a id="more"></a>

<h3 id="ä¸€ã€å¼•ç”¨è®¡æ•°"><a href="#ä¸€ã€å¼•ç”¨è®¡æ•°" class="headerlink" title="ä¸€ã€å¼•ç”¨è®¡æ•°"></a>ä¸€ã€å¼•ç”¨è®¡æ•°</h3><p>ã€€ã€€1ã€å½“ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è¢«åˆ›å»ºæˆ–è€…å¤åˆ¶æ—¶ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°åŠ 1ï¼›å½“ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è¢«é”€æ¯æ—¶ï¼Œå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡1.</p>
<p>ã€€ã€€2ã€å½“å¯¹è±¡çš„å¼•ç”¨è®¡æ•°å‡å°‘ä¸º0æ—¶ï¼Œå°±æ„å‘³ç€å¯¹è±¡å·²ç»å†æ²¡æœ‰è¢«ä½¿ç”¨äº†ï¼Œå¯ä»¥å°†å…¶å†…å­˜é‡Šæ”¾æ‰ã€‚</p>
<h3 id="äºŒã€æ ‡è®°æ¸…é™¤"><a href="#äºŒã€æ ‡è®°æ¸…é™¤" class="headerlink" title="äºŒã€æ ‡è®°æ¸…é™¤"></a>äºŒã€æ ‡è®°æ¸…é™¤</h3><p>ã€€ã€€1ã€å®ƒåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šç¬¬ä¸€é˜¶æ®µæ˜¯æ ‡è®°é˜¶æ®µï¼ŒGCä¼šæŠŠæ‰€æœ‰çš„æ´»åŠ¨å¯¹è±¡æ‰“ä¸Šæ ‡è®°ï¼Œç¬¬äºŒé˜¶æ®µæ˜¯æŠŠé‚£äº›æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡éæ´»åŠ¨å¯¹è±¡è¿›è¡Œå›æ”¶ã€‚</p>
<p>ã€€ã€€2ã€å¯¹è±¡ä¹‹é—´é€šè¿‡å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰è¿åœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªæœ‰å‘å›¾</p>
<p>ã€€ã€€3ã€ä»æ ¹å¯¹è±¡ï¼ˆroot objectï¼‰å‡ºå‘ï¼Œæ²¿ç€æœ‰å‘è¾¹éå†å¯¹è±¡ï¼Œå¯è¾¾çš„ï¼ˆreachableï¼‰å¯¹è±¡æ ‡è®°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œä¸å¯è¾¾çš„å¯¹è±¡å°±æ˜¯è¦è¢«æ¸…é™¤çš„éæ´»åŠ¨å¯¹è±¡ï¼Œ<br>ã€€ã€€ã€€ã€€æ ¹å¯¹è±¡å°±æ˜¯å…¨å±€å˜é‡ã€è°ƒç”¨æ ˆã€å¯„å­˜å™¨ã€‚</p>
<p>ã€€ã€€<code>æ³¨ï¼šåƒæ˜¯PyIntObjectã€PyStringObjectè¿™äº›ä¸å¯å˜å¯¹è±¡æ˜¯ä¸å¯èƒ½äº§ç”Ÿå¾ªç¯å¼•ç”¨çš„ï¼Œå› ä¸ºå®ƒä»¬å†…éƒ¨ä¸å¯èƒ½æŒæœ‰å…¶å®ƒå¯¹è±¡çš„å¼•ç”¨ã€‚</code></p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/å†…å­˜ç®¡ç†æœºåˆ¶/æ ‡è®°æ¸…æ¥š.png">

<p>ã€€ã€€1ã€åœ¨ä¸Šå›¾ä¸­ï¼Œå¯ä»¥ä»ç¨‹åºå˜é‡ç›´æ¥è®¿é—®å—1ï¼Œå¹¶ä¸”å¯ä»¥é—´æ¥è®¿é—®å—2å’Œ3,ç¨‹åºæ— æ³•è®¿é—®å—4å’Œ5</p>
<p>ã€€ã€€2ã€ç¬¬ä¸€æ­¥å°†æ ‡è®°å—1ï¼Œå¹¶è®°ä½å—2å’Œ3ä»¥ä¾›ç¨åå¤„ç†ã€‚</p>
<p>ã€€ã€€3ã€ç¬¬äºŒæ­¥å°†æ ‡è®°å—2ï¼Œç¬¬ä¸‰æ­¥å°†æ ‡è®°å—3ï¼Œä½†ä¸è®°å¾—å—2ï¼Œå› ä¸ºå®ƒå·²è¢«æ ‡è®°ã€‚</p>
<p>ã€€ã€€4ã€æ‰«æé˜¶æ®µå°†å¿½ç•¥å—1ï¼Œ2å’Œ3ï¼Œå› ä¸ºå®ƒä»¬å·²è¢«æ ‡è®°ï¼Œä½†ä¼šå›æ”¶å—4å’Œ5ã€‚</p>
<h3 id="ä¸‰ã€åˆ†ä»£å›æ”¶"><a href="#ä¸‰ã€åˆ†ä»£å›æ”¶" class="headerlink" title="ä¸‰ã€åˆ†ä»£å›æ”¶"></a>ä¸‰ã€åˆ†ä»£å›æ”¶</h3><p>ã€€ã€€1ã€åˆ†ä»£å›æ”¶æ˜¯å»ºç«‹åœ¨æ ‡è®°æ¸…é™¤æŠ€æœ¯åŸºç¡€ä¹‹ä¸Šçš„ï¼Œæ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„æ“ä½œæ–¹å¼ã€‚</p>
<p>ã€€ã€€2ã€Pythonå°†å†…å­˜åˆ†ä¸ºäº†3â€œä»£â€ï¼Œåˆ†åˆ«ä¸ºå¹´è½»ä»£ï¼ˆç¬¬0ä»£ï¼‰ã€ä¸­å¹´ä»£ï¼ˆç¬¬1ä»£ï¼‰ã€è€å¹´ä»£ï¼ˆç¬¬2ä»£ï¼‰</p>
<p>ã€€ã€€3ã€ä»–ä»¬å¯¹åº”çš„æ˜¯3ä¸ªé“¾è¡¨ï¼Œå®ƒä»¬çš„åƒåœ¾æ”¶é›†é¢‘ç‡ä¸å¯¹è±¡çš„å­˜æ´»æ—¶é—´çš„å¢å¤§è€Œå‡å°ã€‚</p>
<p>ã€€ã€€4ã€æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šåˆ†é…åœ¨å¹´è½»ä»£ï¼Œå¹´è½»ä»£é“¾è¡¨çš„æ€»æ•°è¾¾åˆ°ä¸Šé™æ—¶ï¼ŒPythonåƒåœ¾æ”¶é›†æœºåˆ¶å°±ä¼šè¢«è§¦å‘</p>
<p>ã€€ã€€5ã€æŠŠé‚£äº›å¯ä»¥è¢«å›æ”¶çš„å¯¹è±¡å›æ”¶æ‰ï¼Œè€Œé‚£äº›ä¸ä¼šå›æ”¶çš„å¯¹è±¡å°±ä¼šè¢«ç§»åˆ°ä¸­å¹´ä»£å»ï¼Œä¾æ­¤ç±»æ¨</p>
<p>ã€€ã€€6ã€è€å¹´ä»£ä¸­çš„å¯¹è±¡æ˜¯å­˜æ´»æ—¶é—´æœ€ä¹…çš„å¯¹è±¡ï¼Œç”šè‡³æ˜¯å­˜æ´»äºæ•´ä¸ªç³»ç»Ÿçš„ç”Ÿå‘½å‘¨æœŸå†…ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>å†…å­˜å›æ”¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Python ä¸‰å™¨</title>
    <url>/blog/Python/Python_id_08.html</url>
    <content><![CDATA[<p>ã€€ã€€Python ä¸‰å™¨åˆ†åˆ«ä¸ºï¼šè¿­ä»£å™¨ã€ç”Ÿæˆå™¨ã€è£…é¥°å™¨</p>
<a id="more"></a>

<h3 id="ä¸€ã€è¿­ä»£"><a href="#ä¸€ã€è¿­ä»£" class="headerlink" title="ä¸€ã€è¿­ä»£"></a>ä¸€ã€è¿­ä»£</h3><p>ã€€ã€€è¿­ä»£æ˜¯è®¿é—®é›†åˆå…ƒç´ çš„ä¸€ç§æ–¹å¼.<br>ã€€ã€€è¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯ä»¥è®°ä½éå†çš„ä½ç½®çš„å¯¹è±¡ã€‚è¿­ä»£å™¨å¯¹è±¡ä»é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰çš„å…ƒç´ è¢«è®¿é—®å®Œç»“æŸã€‚<br>ã€€ã€€è¿­ä»£å™¨åªèƒ½å¾€å‰ä¸ä¼šåé€€ã€‚</p>
<h4 id="1ã€å¯è¿­ä»£å¯¹è±¡"><a href="#1ã€å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="1ã€å¯è¿­ä»£å¯¹è±¡"></a>1ã€å¯è¿­ä»£å¯¹è±¡</h4><p>ã€€ã€€æˆ‘ä»¬æŠŠéå†ä¹Ÿå«åšè¿­ä»£<br>ã€€ã€€<strong>å¯ä»¥é€šè¿‡forâ€¦inâ€¦è¿™ç±»è¯­å¥è¿­ä»£è¯»å–ä¸€æ¡æ•°æ®ä¾›æˆ‘ä»¬ä½¿ç”¨çš„å¯¹è±¡ç§°ä¹‹ä¸ºå¯è¿­ä»£å¯¹è±¡ï¼ˆIterableï¼‰</strong><br>ã€€ã€€<strong>å¯è¢«éå†çš„å¯¹è±¡ï¼Œå°±æ˜¯å¯è¿­ä»£å¯¹è±¡</strong><br>ã€€ã€€å¯è¿­ä»£(éå†)å¯¹è±¡æœ‰ï¼šå­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å…ƒç¥–ã€å­—å…¸ã€é›†åˆã€range()</p>
<h4 id="2ã€å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¿­ä»£"><a href="#2ã€å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¿­ä»£" class="headerlink" title="2ã€å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¿­ä»£"></a>2ã€å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¿­ä»£</h4><p>ã€€ã€€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨isinstance() æ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ Iterableï¼ˆå¯è¿­ä»£ï¼‰ å¯¹è±¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ ¼å¼ï¼š</span></span><br><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line">print(isinstance(å¯¹è±¡,Iterable))</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line">print(isinstance([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],Iterable))</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€å¯è¿­ä»£å¯¹è±¡çš„æœ¬è´¨"><a href="#3ã€å¯è¿­ä»£å¯¹è±¡çš„æœ¬è´¨" class="headerlink" title="3ã€å¯è¿­ä»£å¯¹è±¡çš„æœ¬è´¨"></a>3ã€å¯è¿­ä»£å¯¹è±¡çš„æœ¬è´¨</h4><p>ã€€ã€€å¯ä»¥å¸®æˆ‘ä»¬æŠŠæ¯æ¬¡æ•°æ®è¿›è¡Œè¿­ä»£ç§°ä¸ºè¿­ä»£å™¨<br>ã€€ã€€å¯è¿­ä»£å¯¹è±¡é€šè¿‡__ <strong>iter</strong> __ æ–¹æ³•å‘æˆ‘ä»¬æä¾›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæˆ‘ä»¬åœ¨è¿­ä»£ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡çš„æ—¶å€™ï¼Œå®é™…ä¸Šå°±<br>ã€€ã€€æ˜¯å…ˆè·å–è¯¥å¯¹è±¡æä¾›çš„ä¸€ä¸ªè¿­ä»£å™¨ï¼Œç„¶åé€šè¿‡è¿™ä¸ªè¿­ä»£å™¨æ¥ä¾æ¬¡è·å–å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®.<br>ã€€ã€€é‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼š<br>ã€€ã€€ã€€ã€€ä¸€ä¸ªå…·å¤‡äº†__ <strong>iter</strong> __æ–¹æ³•çš„å¯¹è±¡ï¼Œå°±æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼š</span></span><br><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable  <span class="comment"># è¿™æ˜¯ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºå¯è¿­ä»£å¯¹è±¡çš„æ¨¡å—</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mylist</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.list = []</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self,str)</span>:</span></span><br><span class="line">		self.list.append(str)</span><br><span class="line">		xiao_zhu = Mylist()</span><br><span class="line">		xiao_zhu.add(<span class="number">1</span>)</span><br><span class="line">		xiao_zhu.add(<span class="number">2</span>)</span><br><span class="line">		xiao_zhu.add(<span class="number">3</span>)</span><br><span class="line">		xiao_zhu.add(<span class="number">4</span>)</span><br><span class="line">print(isinstance(xiao_zhu,Iterable))</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸º:</span></span><br><span class="line"><span class="literal">False</span>		<span class="comment"># xiao_zhuä¸æ˜¯å¯è¿­ä»£å¯¹è±¡</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼š</span></span><br><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable      <span class="comment"># è¿™æ˜¯ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºå¯è¿­ä»£å¯¹è±¡çš„æ¨¡å—</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mylist</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.list = []</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self,str)</span>:</span></span><br><span class="line">		self.list.append(str)</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line">		xiao_zhu = Mylist()</span><br><span class="line">		xiao_zhu.add(<span class="number">1</span>)</span><br><span class="line">		xiao_zhu.add(<span class="number">2</span>)</span><br><span class="line">		xiao_zhu.add(<span class="number">3</span>)</span><br><span class="line">		xiao_zhu.add(<span class="number">4</span>)</span><br><span class="line">print(isinstance(xiao_zhu,Iterable))</span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line"><span class="literal">True</span>  <span class="comment"># æ·»åŠ è¿‡iteræ–¹æ³•åï¼Œxiao_zhuå°±å˜æˆäº†å¯è¿­ä»£å¯¹è±¡</span></span><br></pre></td></tr></table></figure></div>

<h4 id="4ã€iter-å’Œnext-çš„å‡½æ•°ä½œç”¨"><a href="#4ã€iter-å’Œnext-çš„å‡½æ•°ä½œç”¨" class="headerlink" title="4ã€iter()å’Œnext()çš„å‡½æ•°ä½œç”¨"></a>4ã€iter()å’Œnext()çš„å‡½æ•°ä½œç”¨</h4><p>ã€€ã€€æˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>iter()</strong>æ¥è·å–å¯è¿­ä»£å¯¹è±¡çš„è¿­ä»£å™¨ï¼Œç„¶åä½¿ç”¨<strong>next()</strong>æ¥è·å–è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªæ•°æ®<br>ã€€ã€€<strong>iter()</strong>å…¶å®å°±æ˜¯è°ƒç”¨äº†å¯è¿­ä»£å¯¹è±¡çš„<strong>__ <strong>iter</strong> __</strong> æ–¹æ³•<br>ã€€ã€€ä¸€ä¸ªè¢«<strong>iter()</strong>å¤„ç†è¿‡çš„å¯è¿­ä»£å¯¹è±¡ï¼Œå°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line">a_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>] </span><br><span class="line">ali_iter = iter(a_list)		<span class="comment"># iter() ä½œç”¨ï¼šè·å–å¯è¿­ä»£å¸¦å¯¹è±¡çš„è¿­ä»£å™¨</span></span><br><span class="line">print(next(ali_iter))  		<span class="comment"># next() ä½œç”¨ï¼šè·å–è¿­ä»£å™¨çš„ä¸‹ä¸€æ¡æ•°æ®	ç»“æœä¸ºï¼š11</span></span><br><span class="line">print(next(ali_iter))		<span class="comment"># ç»“æœä¸ºï¼š22</span></span><br><span class="line">print(next(ali_iter))		<span class="comment"># ç»“æœä¸ºï¼š33</span></span><br><span class="line">print(next(ali_iter))		<span class="comment"># ç»“æœä¸ºï¼š44</span></span><br><span class="line">print(next(ali_iter))		<span class="comment"># ç»“æœä¸ºï¼š55</span></span><br><span class="line"><span class="comment"># print(next(ali_iter))  # å½“æ•°æ®æ‹¿å®Œä¹‹åå†æ‹¿å°±ä¼šæŠ¥å‡ºï¼šStopIterationåœæ­¢è¿­ä»£å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterator  <span class="comment"># è¿™æ˜¯ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨çš„æ¨¡å—</span></span><br><span class="line">print(isinstance(a_list,Iterator))  <span class="comment"># åˆ¤æ–­è¿™ä¸ªåˆ—è¡¨æ˜¯å¦ä¸ºè¿­ä»£å™¨ ç»“æœï¼šFalse</span></span><br><span class="line">print(<span class="string">"*"</span>*<span class="number">20</span>)	<span class="comment"># åˆ†éš”ç¬¦</span></span><br><span class="line">print(isinstance(ali_iter,Iterator)) <span class="comment"># åˆ¤æ–­è¿™ä¸ªåˆ—è¡¨ç»è¿‡iter()å¤„ç†è¿‡ä¹‹åæ˜¯å¦ä¸ºè¿­ä»£å™¨ ç»“æœ:True</span></span><br></pre></td></tr></table></figure></div>

<h4 id="5ã€åˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨çš„æ ¼å¼ï¼š"><a href="#5ã€åˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨çš„æ ¼å¼ï¼š" class="headerlink" title="5ã€åˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨çš„æ ¼å¼ï¼š"></a>5ã€åˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨çš„æ ¼å¼ï¼š</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterator  <span class="comment"># è¿™æ˜¯ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºè¿­ä»£å™¨çš„æ¨¡å—</span></span><br><span class="line">print(isinstance(å˜é‡,Iterator))  <span class="comment"># åˆ¤æ–­è¿™ä¸ªå˜é‡æ˜¯å¦ä¸ºè¿­ä»£å™¨</span></span><br></pre></td></tr></table></figure></div>

<h3 id="äºŒã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰"><a href="#äºŒã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰" class="headerlink" title="äºŒã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰"></a>äºŒã€è¿­ä»£å™¨ï¼ˆIteratorï¼‰</h3><h4 id="1ã€å®šä¹‰ï¼š"><a href="#1ã€å®šä¹‰ï¼š" class="headerlink" title="1ã€å®šä¹‰ï¼š"></a>1ã€å®šä¹‰ï¼š</h4><p>ã€€ã€€ä¸€ä¸ªå®ç°äº†__ <strong>iter</strong> __ æ–¹æ³•å’Œ __ <strong>next</strong> __ æ–¹æ³•çš„å¯¹è±¡ï¼Œå°±æ˜¯è¿­ä»£å™¨ï¼›åä¹‹ï¼Œä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¸€å®šå«æœ‰__ <strong>iter</strong> __ æ–¹æ³•å’Œ __ <strong>next</strong> __ æ–¹æ³•<br>ã€€ã€€__ <strong>iter</strong> __ æ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›ä¸€ä¸ªæ˜¯å¯è¿­ä»£å¯¹è±¡çš„è¿­ä»£å™¨<br>ã€€ã€€å› ä¸€ä¸ªå…·å¤‡__ <strong>iter</strong> __ æ–¹æ³•çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œåˆå› pythonä¸­è¦æ±‚ï¼Œæ¯ä¸€ä¸ªè¿­ä»£å™¨æœ¬èº«ä¹Ÿè¦æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œ__ <strong>iter</strong> __ åªéœ€è¦è¿”å›è‡ªèº«å³å¯</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyIterator</span><span class="params">(object)</span>:</span>   	<span class="comment"># è¿­ä»£å™¨ç±»</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,alist)</span>:</span>     <span class="comment"># å®ä¾‹å±æ€§çš„åˆå§‹åŒ–å’Œèµ‹å€¼</span></span><br><span class="line">		self.alist = alist</span><br><span class="line">		self.weizhi = <span class="number">0</span>     	<span class="comment"># è®°å½•éå†ä½ç½®</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span>     	<span class="comment"># è·å–è¿­ä»£å™¨ï¼Œè‡ªèº«å°±æ˜¯è¿­ä»£å™¨ï¼Œæ‰€ä»¥è¿”å›è‡ªèº«</span></span><br><span class="line">		<span class="keyword">return</span> self</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span>    		<span class="comment"># è·å–è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">		<span class="keyword">if</span> self.weizhi &lt; len(self.alist):</span><br><span class="line">			item = self.alist[self.weizhi]</span><br><span class="line">			self.weizhi += <span class="number">1</span></span><br><span class="line">			<span class="keyword">return</span> item</span><br><span class="line">		<span class="keyword">else</span>:             		<span class="comment"># ä¸èƒ½è·å–æ•°æ®çš„æƒ…å†µ</span></span><br><span class="line">			<span class="keyword">raise</span> StopIteration     	<span class="comment"># ä¸»åŠ¨æŠ›å‡ºåœæ­¢è¿­ä»£å¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:      	<span class="comment"># ç¨‹åºå…¥å£</span></span><br><span class="line">	a_list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>]</span><br><span class="line">	xiao_zhu = MyIterator(a_list)</span><br><span class="line">	<span class="comment"># ç¬¬ä¸€ç§æ–¹æ³•ï¼Œforéå†è¾“å‡ºç»“æœ</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> xiao_zhu:					</span><br><span class="line">		print(i)</span><br><span class="line">	<span class="comment"># ç¬¬äºŒç§æ–¹æ³•ï¼Œæ— é™å¾ªç¯</span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">True</span>:  </span><br><span class="line">		<span class="keyword">try</span>:</span><br><span class="line">			ret = next(xiao_zhu)		<span class="comment"># æ— é™å¾ªç¯next()è·å–æ•°æ®</span></span><br><span class="line">			print(ret)</span><br><span class="line">		<span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:		<span class="comment"># å½“æ— æ³•æ‹¿åˆ°æ•°æ®æŠ¥å‡ºStopIteratorå¼‚å¸¸æ—¶ï¼Œä¿å­˜åˆ°å˜é‡eä¸­</span></span><br><span class="line">			print(e)				<span class="comment"># è¾“å‡ºä¿å­˜å¼‚å¸¸çš„å˜é‡e(æ­¤è¡Œå¯çœç•¥ä¸è¦)</span></span><br><span class="line">			<span class="keyword">break</span>				<span class="comment"># åœæ­¢è¾“å‡ºä¿å­˜å¼‚å¸¸çš„å˜é‡e</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œåˆ©ç”¨å¼ºè½¬æ¥è·å–é‡Œé¢çš„æ•°æ®</span></span><br><span class="line">print(list(xiao_zhu))</span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€forâ€¦inâ€¦å¾ªç¯çš„æœ¬è´¨"><a href="#2ã€forâ€¦inâ€¦å¾ªç¯çš„æœ¬è´¨" class="headerlink" title="2ã€forâ€¦inâ€¦å¾ªç¯çš„æœ¬è´¨"></a>2ã€forâ€¦inâ€¦å¾ªç¯çš„æœ¬è´¨</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">	<span class="keyword">try</span>:</span><br><span class="line">		print(next(å¯¹è±¡,Iterable))</span><br><span class="line">	<span class="keyword">except</span> StopIteration</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€è¿­ä»£å™¨çš„åº”ç”¨åœºæ™¯"><a href="#3ã€è¿­ä»£å™¨çš„åº”ç”¨åœºæ™¯" class="headerlink" title="3ã€è¿­ä»£å™¨çš„åº”ç”¨åœºæ™¯"></a>3ã€è¿­ä»£å™¨çš„åº”ç”¨åœºæ™¯</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fei</span><span class="params">(object)</span>:</span>				<span class="comment"># æ–æ³¢é‚£å¥‘æ•°åˆ—ç±»</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,n)</span>:</span>		<span class="comment"># å®ä¾‹å±æ€§çš„åˆå§‹åŒ–å’Œèµ‹å€¼</span></span><br><span class="line">		self.n = n    	<span class="comment"># æ„é€ é•¿åº¦</span></span><br><span class="line">		self.weizhi = <span class="number">0</span>   	<span class="comment"># è®°å½•ä½ç½®---ç±»ä¼¼äºæ¸¸æ ‡çš„ä½œç”¨</span></span><br><span class="line">		self.num1 = <span class="number">0</span>    	<span class="comment"># å®šä¹‰åˆå§‹å˜é‡</span></span><br><span class="line">		self.num2 = <span class="number">1</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span>   	<span class="comment"># è¿”å›ä¸€ä¸ªæ˜¯å¯è¿­ä»£å¯¹è±¡çš„è¿­ä»£å™¨ï¼Œå³è¿”å›æœ¬èº«</span></span><br><span class="line">		<span class="keyword">return</span> self</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span>    <span class="comment"># è·å–è¿­ä»£å™¨çš„ä¸‹ä¸€ä½æ•°æ®</span></span><br><span class="line">		<span class="keyword">if</span> self.weizhi &lt; self.n:</span><br><span class="line">			num = self.num1   <span class="comment"># æ‰¾ä¸€ä¸ªå˜é‡æ¥æ”¶åˆå§‹ä½ç½®æ•°æ®0</span></span><br><span class="line">			self.num1,self.num2 = self.num2,self.num1 + self.num2</span><br><span class="line">			self.weizhi += <span class="number">1</span></span><br><span class="line">			<span class="keyword">return</span> num</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">raise</span> StopIteration</span><br><span class="line">            </span><br><span class="line"><span class="comment"># ç¨‹åºå…¥å£</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	fei = Fei(<span class="number">10</span>)</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> fei:</span><br><span class="line">		print(i)</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸‰ã€ç”Ÿæˆå™¨"><a href="#ä¸‰ã€ç”Ÿæˆå™¨" class="headerlink" title="ä¸‰ã€ç”Ÿæˆå™¨"></a>ä¸‰ã€ç”Ÿæˆå™¨</h3><h4 id="1ã€å®šä¹‰ï¼š-1"><a href="#1ã€å®šä¹‰ï¼š-1" class="headerlink" title="1ã€å®šä¹‰ï¼š"></a>1ã€å®šä¹‰ï¼š</h4><p>ã€€ã€€ç”Ÿæˆå™¨(generator)ã€‚ç”Ÿæˆå™¨æ˜¯ä¸€ç±»ç‰¹æ®Šçš„è¿­ä»£å™¨ã€‚</p>
<h4 id="2ã€åˆ›å»ºç”Ÿæˆå™¨"><a href="#2ã€åˆ›å»ºç”Ÿæˆå™¨" class="headerlink" title="2ã€åˆ›å»ºç”Ÿæˆå™¨"></a>2ã€åˆ›å»ºç”Ÿæˆå™¨</h4><p>ã€€ã€€æ–¹æ³•ä¸€ï¼š<br>ã€€ã€€ã€€ã€€å°†åˆ—è¡¨æ¨å¯¼å¼å¤–é¢çš„æ–¹æ‹¬å·æ”¹æˆåœ†æ‹¬å·ï¼Œå°±æ˜¯ä¸€ç§ç”Ÿæˆå™¨**</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line">print([i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>)])   <span class="comment"># [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line">a = ((i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>)))   <span class="comment"># &lt;generator object &lt;genexpr&gt; at 0x000002C58B88A930&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æ–¹æ³•äºŒï¼š<br>ã€€ã€€ã€€ã€€<strong>åªè¦åœ¨defä¸­æœ‰yieldå…³é”®å­—çš„å°±ç§°ä¸ºç”Ÿæˆå™¨**</strong></p>
<p>ã€€ã€€ã€€ã€€<strong>yieldå…³é”®å­—æœ‰ä¸¤ç‚¹ä½œç”¨ï¼š</strong><br>ã€€ã€€ã€€ã€€ã€€ã€€1ã€ä¿å­˜å½“å‰è¿è¡ŒçŠ¶æ€ï¼ˆæ–­ç‚¹ï¼‰ï¼Œç„¶åæš‚åœæ‰§è¡Œï¼Œå³å°†ç”Ÿæˆå™¨ï¼ˆå‡½æ•°ï¼‰æŒ‚èµ·(ä¸ªäººç†è§£ï¼šæš‚åœæ‰§è¡Œï¼Œå³å°†ç”Ÿæˆå™¨æŒ‚èµ·)<br>ã€€ã€€ã€€ã€€ã€€ã€€2ã€å°†yieldå…³é”®å­—åé¢è¡¨è¾¾å¼çš„å€¼ä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œæ­¤æ—¶å¯ä»¥ç†è§£ä¸ºèµ·åˆ°äº†returnçš„ä½œç”¨(ä¸ªäººç†è§£ï¼šè·Ÿreturnçš„ä½œç”¨ä¸€æ ·ï¼Œå°†åé¢çš„è¡¨è¾¾å¼å½“æˆè¿”å›å€¼è¿”å›)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fei</span><span class="params">(n)</span>:</span>					<span class="comment"># æ„é€ å‡½æ•°ï¼Œä¼ å‚nä¸ºé•¿åº¦</span></span><br><span class="line">	num1,num2 = <span class="number">0</span>,<span class="number">1</span></span><br><span class="line">	weizhi = <span class="number">0</span>				<span class="comment"># è®°å½•åˆå§‹ä½ç½®</span></span><br><span class="line">	<span class="keyword">while</span> weizhi &lt; n:		<span class="comment"># å¦‚æœå§‹ä½ç½®å°äºé•¿åº¦</span></span><br><span class="line">		num = num1</span><br><span class="line">		num1,num2 = num2,num1+num2</span><br><span class="line">		weizhi += <span class="number">1</span></span><br><span class="line">	<span class="keyword">yield</span> num			<span class="comment"># yieldæ˜¯ç”Ÿæˆå™¨çš„æ ‡å¿—ï¼Œå…¶ä½œç”¨ä¹‹ä¸€è·Ÿreturnä¸€æ ·ï¼Œè¿”å›å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¨‹åºå…¥å£</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	ret = fei(<span class="number">5</span>)</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">		print(i)</span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€å”¤é†’ç”Ÿæˆå™¨"><a href="#3ã€å”¤é†’ç”Ÿæˆå™¨" class="headerlink" title="3ã€å”¤é†’ç”Ÿæˆå™¨"></a>3ã€å”¤é†’ç”Ÿæˆå™¨</h4><p>ã€€ã€€å¯ä»¥ä½¿ç”¨next()å‡½æ•°è®©ç”Ÿæˆå™¨ä»æ–­ç‚¹å¤„ç»§ç»­æ‰§è¡Œï¼Œå³å”¤é†’ç”Ÿæˆå™¨ï¼ˆå‡½æ•°ï¼‰</p>
<p>ã€€ã€€å”¤é†’ç”Ÿæˆå™¨æœ‰ä¸‰ç§<br>â€‹ã€€ã€€ã€€ã€€ç¬¬ä¸€ç§ï¼šsend(None)    <strong>æ³¨æ„ï¼š</strong> <em>ç¬¬ä¸€ä¸ªsendåé¢å¿…é¡»æ˜¯Noneï¼Œä¹‹åçš„æ²¡æœ‰è¦æ±‚</em></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fei</span><span class="params">(n)</span>:</span></span><br><span class="line">	num1,num2 = <span class="number">0</span>,<span class="number">1</span></span><br><span class="line">	weizhi = <span class="number">0</span></span><br><span class="line">	<span class="keyword">while</span> weizhi &lt; n:</span><br><span class="line">		num = num1</span><br><span class="line">		num1,num2 = num2,num1+num2</span><br><span class="line">		weizhi += <span class="number">1</span></span><br><span class="line">	<span class="keyword">yield</span> num</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	ret = fei(<span class="number">5</span>)</span><br><span class="line">	a = ret.send(<span class="literal">None</span>)		<span class="comment"># ä¸€æ¬¡åªèƒ½å”¤é†’ä¸€ä¸ªæ•°æ®</span></span><br><span class="line">	print(a)</span><br><span class="line">	a = ret.send(<span class="literal">None</span>)</span><br><span class="line">	print(a)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ç¬¬äºŒç§ï¼šnext()å‡½æ•°</p>
<p>ã€€ã€€ç¬¬ä¸‰ç§ï¼š__ <strong>next</strong> __</p>
<h3 id="å››ã€è£…é¥°å™¨"><a href="#å››ã€è£…é¥°å™¨" class="headerlink" title="å››ã€è£…é¥°å™¨"></a>å››ã€è£…é¥°å™¨</h3><h4 id="1ã€é—­åŒ…"><a href="#1ã€é—­åŒ…" class="headerlink" title="1ã€é—­åŒ…"></a>1ã€é—­åŒ…</h4><p>ã€€ã€€1ã€åœ¨ä¸€ä¸ªå¤–å‡½æ•°ä¸­å®šä¹‰äº†ä¸€ä¸ªå†…å‡½æ•°ï¼›<br>â€‹ã€€ã€€2ã€å†…å‡½æ•°é‡Œè¿ç”¨äº†å¤–å‡½æ•°çš„ä¸´æ—¶å˜é‡ï¼›<br>â€‹ã€€ã€€3ã€å¹¶ä¸”å¤–å‡½æ•°çš„è¿”å›å€¼æ˜¯å†…å‡½æ•°çš„å¼•ç”¨ã€‚<br>â€‹ã€€ã€€å½“æ»¡è¶³è¿™ä¸‰ä¸ªæ¡ä»¶åï¼Œå°±æ„æˆäº†ä¸€ä¸ªé—­åŒ…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span></span><br><span class="line">	sum = <span class="number">0</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">func2</span><span class="params">()</span>:</span>			<span class="comment"># æ¡ä»¶1ï¼Œå¤–å‡½æ•°ä¸­å®šä¹‰äº†ä¸€ä¸ªå†…å‡½æ•°</span></span><br><span class="line">		<span class="keyword">nonlocal</span> sum</span><br><span class="line">		<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">101</span>):</span><br><span class="line">			sum += i		<span class="comment"># æ¡ä»¶2ï¼Œè¿ç”¨äº†å¤–å‡½æ•°çš„ä¸´æ—¶å˜é‡</span></span><br><span class="line">		print(sum)	</span><br><span class="line">	<span class="keyword">return</span> func2			<span class="comment"># æ¡ä»¶3ï¼Œå¤–å‡½æ•°çš„è¿”å›å€¼æ˜¯å†…æ¶µæ•°çš„å¼•ç”¨</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	func1()()</span><br><span class="line">	<span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line">	<span class="number">5050</span></span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€è£…é¥°å™¨å®šä¹‰"><a href="#2ã€è£…é¥°å™¨å®šä¹‰" class="headerlink" title="2ã€è£…é¥°å™¨å®šä¹‰"></a>2ã€è£…é¥°å™¨å®šä¹‰</h4><p>ã€€ã€€<strong>è£…é¥°å™¨æ˜¯åœ¨å‡½æ•°è°ƒç”¨ä¹‹ä¸Šçš„ä¿®é¥°ã€‚è¿™äº›ä¿®é¥°ä»…æ˜¯å½“å£°æ˜ä¸€ä¸ªå‡½æ•°æˆ–è€…æ–¹æ³•çš„æ—¶å€™ï¼Œæ‰ä¼šåº”ç”¨çš„é¢å¤–è°ƒç”¨ã€‚</strong></p>
<p>ã€€ã€€<strong>ä½œç”¨ï¼š</strong>åœ¨ä¸å˜åŠ¨åŸæœ‰ä»£ç çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½</p>
<p>ã€€ã€€<strong>è£…é¥°å™¨çš„æ‰§è¡Œæµç¨‹ï¼š</strong>å½“f1è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šå…ˆè°ƒç”¨è£…é¥°å™¨ï¼Œè£…é¥°å™¨é‡Œçš„å‡½æ•°ä¼šä»å¤–å±‚å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œå¤–å±‚å‡½æ•°è¿”å›äº†å†…å±‚å‡½æ•°çš„å¼•ç”¨ï¼Œå†…å±‚å‡½æ•°å¼€å§‹ç”±ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</p>
<p>ã€€ã€€<strong>å¤šå±‚è£…é¥°å™¨çš„æ‰§è¡Œé¡ºåºï¼š</strong>å½“f1è°ƒç”¨æ—¶ï¼Œä¼šå…ˆè°ƒç”¨æœ€ä¸Šé¢çš„è£…é¥°å™¨ï¼Œå½“æœ€ä¸Šé¢çš„è£…é¥°å™¨å†…å®¹æ‰§è¡Œå®Œä¹‹åï¼Œä¼šç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªè£…é¥°å™¨ï¼Œå½“è¿™ä¸ªè£…é¥°å™¨çš„å†…å®¹æ‰§è¡Œå®Œæ¯•åï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¼šå…ˆç»“æŸæ­¤è£…é¥°å™¨ï¼Œç„¶åå†ç»“æŸæœ€ä¸Šé¢çš„è£…é¥°å™¨</p>
<p>ã€€ã€€<strong>æ¦‚æ‹¬ï¼š</strong>å¤šå±‚è£…é¥°å™¨æ‰§è¡Œæ—¶ç”±ä¸Šè‡³ä¸‹ï¼Œç»“æŸæ—¶ç”±ä¸‹è‡³ä¸Šã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼šæ— å‚æ•°çš„ä¿®é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wai_ceng</span><span class="params">(f1)</span>:</span>					<span class="comment"># å¤–å±‚å‡½æ•° å°†å‡½æ•°å½“æˆå‚æ•°æ”¾åœ¨å¤–å±‚å‡½æ•°ä¸­</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">nei_ceng</span><span class="params">()</span>:</span>					<span class="comment"># å†…å±‚å‡½æ•°</span></span><br><span class="line">		print(<span class="string">"è£…é¥°å™¨å¼€å§‹"</span>)		<span class="comment"># å†…å±‚å‡½æ•°ç”±ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">		print(<span class="string">"åŒå­¦ä½ å¥½.."</span>)</span><br><span class="line">		print(<span class="string">"è£…é¥°å™¨ç»“æŸ"</span>)</span><br><span class="line">		f1()						<span class="comment"># åœ¨æ­¤å¤„è°ƒç”¨f1å‡½æ•°</span></span><br><span class="line">	<span class="keyword">return</span> nei_ceng				<span class="comment"># å¤–å±‚å‡½æ•°è¿”å›å†…å±‚å‡½æ•°çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@wai_ceng							# å‡½æ•°è°ƒç”¨ä¹‹ä¸Šçš„ä¿®é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">	print(<span class="string">"hello world hello python"</span>)<span class="comment"># å½“è£…é¥°å™¨ä¸­çš„å†…å±‚å‡½æ•°è°ƒç”¨f1å‡½æ•°æ—¶ï¼Œå¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	f1()</span><br><span class="line">	<span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line">	è£…é¥°å™¨å¼€å§‹</span><br><span class="line">	åŒå­¦ä½ å¥½..</span><br><span class="line">	è£…é¥°å™¨ç»“æŸ</span><br><span class="line">	hello world hello python</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼šæœ‰å‚æ•°çš„ä¿®é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wai_ceng</span><span class="params">(f1)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">neiceng</span><span class="params">(a,b)</span>:</span></span><br><span class="line">		print(<span class="string">"è£…é¥°å™¨å¼€å§‹"</span>)</span><br><span class="line">		print(<span class="string">"åŒå­¦ä½ å¥½.."</span>)</span><br><span class="line">		print(<span class="string">"è£…é¥°å™¨ç»“æŸ"</span>)</span><br><span class="line">		f1(a,b)</span><br><span class="line">	<span class="keyword">return</span> neiceng</span><br><span class="line"></span><br><span class="line"><span class="meta">@wai_ceng</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(a,b)</span>:</span></span><br><span class="line">	print(<span class="string">"hello world hello python\n"</span>,a+b)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	f1(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">	<span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line">	è£…é¥°å™¨å¼€å§‹</span><br><span class="line">	åŒå­¦ä½ å¥½..</span><br><span class="line">	è£…é¥°å™¨ç»“æŸ</span><br><span class="line">	hello world hello python</span><br><span class="line">	<span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚3ï¼šä¸å®šé•¿å‚æ•°çš„è£…é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wai_ceng</span><span class="params">(f1)</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">neiceng</span><span class="params">(*ages,**kwages)</span>:</span></span><br><span class="line">		print(<span class="string">"è£…é¥°å™¨å¼€å§‹"</span>)</span><br><span class="line">		print(<span class="string">"åŒå­¦ä½ å¥½.."</span>)</span><br><span class="line">		print(<span class="string">"è£…é¥°å™¨ç»“æŸ"</span>)</span><br><span class="line">		f1(*ages,**kwages)</span><br><span class="line">	<span class="keyword">return</span> neiceng</span><br><span class="line"></span><br><span class="line"><span class="meta">@wai_ceng</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(a,b,c,d)</span>:</span></span><br><span class="line">	print(<span class="string">"hello world hello python\n"</span>,a+b+c+d)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	f1(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">	<span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line">	è£…é¥°å™¨å¼€å§‹</span><br><span class="line">	åŒå­¦ä½ å¥½..</span><br><span class="line">	è£…é¥°å™¨ç»“æŸ</span><br><span class="line">	hello world hello python</span><br><span class="line">	<span class="number">10</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚4ï¼šå¤šå±‚è£…é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wai_ceng1</span><span class="params">(f1)</span>:</span>							<span class="comment"># 2ã€ä¿®é¥°å™¨1é‡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œå¤–å±‚å‡½æ•°</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">neiceng</span><span class="params">(*ages,**kwages)</span>:</span>			<span class="comment"># 4ã€å†…å±‚å‡½æ•°ç”±ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">		print(<span class="string">"1--è£…é¥°å™¨å¼€å§‹"</span>)</span><br><span class="line">		print(<span class="string">"1--åŒå­¦ä½ å¥½.."</span>)</span><br><span class="line">		f1(*ages,**kwages)				<span class="comment"># 5ã€è°ƒç”¨f1å‡½æ•°ï¼Œè¿›å…¥ä¿®é¥°å™¨2</span></span><br><span class="line">		print(<span class="string">"1--è£…é¥°å™¨ç»“æŸ"</span>)				<span class="comment"># 12ã€å†å…³é—­ä¿®é¥°å™¨1</span></span><br><span class="line">	<span class="keyword">return</span> neiceng							<span class="comment"># 3ã€è¿”å›ä¿®é¥°å™¨1é‡Œå†…å±‚å‡½æ•°çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">wai_ceng2</span><span class="params">(f1)</span>:</span>							<span class="comment"># 6ã€è¿›å…¥ä¿®é¥°å™¨2ï¼Œæ‰§è¡Œå¤–å±‚å‡½æ•°</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">neiceng</span><span class="params">(*ages,**kwages)</span>:</span>			<span class="comment"># 8ã€å†…å±‚å‡½æ•°ç”±ä¸Šè‡³ä¸‹å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">		print(<span class="string">"2--è£…é¥°å™¨å¼€å§‹"</span>)</span><br><span class="line">		print(<span class="string">"2--åŒå­¦ä½ å¥½.."</span>)</span><br><span class="line">		f1(*ages,**kwages)				<span class="comment"># 9ã€è°ƒç”¨f1å‡½æ•°</span></span><br><span class="line">		print(<span class="string">"2--è£…é¥°å™¨ç»“æŸ"</span>)				<span class="comment"># 11ã€ç”±ä¸‹è‡³ä¸Šå…³é—­å¤šå±‚ä¿®é¥°å™¨ï¼Œå…ˆå…³é—­ä¿®é¥°å™¨2</span></span><br><span class="line">	<span class="keyword">return</span> neiceng							<span class="comment"># 7ã€è¿”å›ä¿®é¥°å™¨2é‡Œå†…å±‚å‡½æ•°çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@wai_ceng1</span></span><br><span class="line"><span class="meta">@wai_ceng2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(a,b,c,d)</span>:</span>			<span class="comment"># 1ã€å½“è°ƒç”¨f1å‡½æ•°æ—¶ï¼Œç”±ä¸Šè€Œä¸‹æ‰§è¡Œå¤šå±‚ä¿®é¥°å™¨ï¼Œå…ˆè¿›å…¥ä¿®é¥°å™¨1</span></span><br><span class="line">	print(<span class="string">"hello world hello python\n"</span>,a+b+c+d)		<span class="comment"># 10ã€æ‰§è¡Œf1</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">	f1(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">	<span class="comment"># è¾“å‡ºç»“æœä¸ºï¼š</span></span><br><span class="line">	<span class="number">1</span>--è£…é¥°å™¨å¼€å§‹</span><br><span class="line">	<span class="number">1</span>--åŒå­¦ä½ å¥½..</span><br><span class="line">	<span class="number">2</span>--è£…é¥°å™¨å¼€å§‹</span><br><span class="line">	<span class="number">2</span>--åŒå­¦ä½ å¥½..</span><br><span class="line">	hello world hello python</span><br><span class="line">	<span class="number">10</span></span><br><span class="line">	<span class="number">2</span>--è£…é¥°å™¨ç»“æŸ</span><br><span class="line">	<span class="number">1</span>--è£…é¥°å™¨ç»“æŸ</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>è¿­ä»£å™¨</tag>
        <tag>ç”Ÿæˆå™¨</tag>
        <tag>è£…é¥°å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>Pythoné«˜é˜¶å‡½æ•°</title>
    <url>/blog/Python/Python_id_07.html</url>
    <content><![CDATA[<h3 id="ä¸€ã€ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿ</h3><p>ã€€ã€€é«˜é˜¶å‡½æ•°å®šä¹‰ï¼šä¸€ä¸ªå‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ ç»™å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºå¦å¤–ä¸€ä¸ªå‡½æ•°ï¼ˆè‹¥è¿”å›å€¼ä¸ºè¯¥å‡½æ•°æœ¬èº«ï¼Œåˆ™ä¸ºé€’å½’ï¼‰ï¼Œæ»¡è¶³å…¶ä¸€åˆ™ä¸ºé«˜é˜¶å‡½æ•°ã€‚</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å‚æ•°ä¸ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br><span class="line">	print(<span class="string">"in the bar.."</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(func)</span>:</span></span><br><span class="line">        func()</span><br><span class="line">        print(<span class="string">"in the foo.."</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:      	<span class="comment"># ç¨‹åºå…¥å£</span></span><br><span class="line">	foo(bar)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¿”å›å€¼ä¸ºå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"in the bar.."</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(func)</span>:</span></span><br><span class="line">        print(<span class="string">"in the foo.."</span>)</span><br><span class="line">        <span class="keyword">return</span> bar</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:      	<span class="comment"># ç¨‹åºå…¥å£</span></span><br><span class="line">	res=foo(bar)</span><br><span class="line">	res()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ä»¥ä¸Šä¸¤ä¸ªç¤ºä¾‹ä¸­ï¼Œå‡½æ•°foo()ä¸ºé«˜é˜¶å‡½æ•°ï¼Œç¤ºä¾‹ä¸€ä¸­å‡½æ•°barä½œä¸ºfooçš„å‚æ•°ä¼ å…¥ï¼Œç¤ºä¾‹äºŒä¸­å‡½æ•°barä½œä¸ºfooçš„è¿”å›å€¼ã€‚</p>
<p>ã€€ã€€æ³¨ï¼šå‡½æ•°åï¼ˆä¾‹å¦‚bar ã€fooï¼‰â€“&gt;å…¶ä¸ºè¯¥å‡½æ•°çš„å†…å­˜åœ°å€ï¼›å‡½æ•°å+æ‹¬å·ï¼ˆä¾‹å¦‚ bar()ã€foo() )â€“&gt;è°ƒç”¨è¯¥å‡½æ•°ã€‚</p>
<h3 id="äºŒã€map-é«˜é˜¶å‡½æ•°ç”¨æ³•"><a href="#äºŒã€map-é«˜é˜¶å‡½æ•°ç”¨æ³•" class="headerlink" title="äºŒã€map()é«˜é˜¶å‡½æ•°ç”¨æ³•"></a>äºŒã€map()é«˜é˜¶å‡½æ•°ç”¨æ³•</h3><p>ã€€ã€€<strong>æ ¼å¼ï¼š</strong>map(function(å‡½æ•°),Iterable(å¯è¿­ä»£å¯¹è±¡))</p>
<p>ã€€ã€€å°†å‡½æ•°ä¸­çš„å‚æ•°ï¼Œåˆ†åˆ«ä¼ åˆ°å¯è¿­ä»£å¯¹è±¡çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸­ï¼Œæœ€åè¿”å›ä¸€ä¸ªè¿­ä»£å™¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼šæ”¾ä¸€ä¸ªå½¢å‚</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> a**<span class="number">2</span></span><br><span class="line">ret = map(func,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:			<span class="comment"># å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ‰€ä»¥éœ€è¦ç”¨æŸ¥çœ‹è¿­ä»£å™¨çš„ä¸‰ç§æ–¹å¼æ¥æŸ¥çœ‹</span></span><br><span class="line">	print(i,end=<span class="string">" "</span>)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="number">1</span> <span class="number">4</span> <span class="number">9</span> <span class="number">16</span> <span class="number">25</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼šæ”¾ä¸¤ä¸ªå½¢å‚æ—¶,å¯è¿­ä»£å¯¹è±¡åŒæ ·è¦æ”¾ä¸¤ä¸ª,ä¸”é‡Œé¢å…ƒç´ é•¿åº¦å¿…é¡»ä¸€æ ·,å¦‚ä¸ä¸€æ ·,åˆ™ä»¥çŸ­çš„è®¡ç®—</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a,b)</span>:</span></span><br><span class="line">      <span class="keyword">return</span> a+b</span><br><span class="line">ret = map(func,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:		<span class="comment"># å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ‰€ä»¥éœ€è¦ç”¨æŸ¥çœ‹è¿­ä»£å™¨çš„ä¸‰ç§æ–¹å¼æ¥æŸ¥çœ‹</span></span><br><span class="line">      print(i,end=<span class="string">" "</span>)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">10</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚3ï¼šåŒ¿åå‡½æ•°ä¹Ÿå¯ä»¥è¢«é«˜é˜¶å‡½æ•°mapä½¿ç”¨</span></span><br><span class="line">f = <span class="keyword">lambda</span> a,b:a+b</span><br><span class="line">ret = map(f,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:		<span class="comment"># å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ‰€ä»¥éœ€è¦ç”¨æŸ¥çœ‹è¿­ä»£å™¨çš„ä¸‰ç§æ–¹å¼æ¥æŸ¥çœ‹</span></span><br><span class="line">      print(i,end=<span class="string">" "</span>)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="number">2</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">10</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸‰ã€reduce-é«˜é˜¶å‡½æ•°ç”¨æ³•"><a href="#ä¸‰ã€reduce-é«˜é˜¶å‡½æ•°ç”¨æ³•" class="headerlink" title="ä¸‰ã€reduce()é«˜é˜¶å‡½æ•°ç”¨æ³•"></a>ä¸‰ã€reduce()é«˜é˜¶å‡½æ•°ç”¨æ³•</h3><p>ã€€ã€€<strong>æ ¼å¼ï¼š</strong>reduce(function(å‡½æ•°),Iterable(å¯è¿­ä»£å¯¹è±¡))</p>
<p>ã€€ã€€ä½¿ç”¨å‰éœ€å¯¼å…¥æ¨¡å—ï¼šfrom functools import reduce<br>ã€€ã€€å…ˆå¯¹å¯è¿­ä»£å¯¹è±¡ä¸­çš„ç¬¬1ï¼Œ2ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œç„¶åå†æ‹¿ç»“æœä¸ç¬¬3ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ€åè¿”å›ä¸€ä¸ªè®¡ç®—ç»“æœ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼š</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce	<span class="comment"># å…ˆå¯¼å…¥reduceæ¨¡å—</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a,b)</span>:</span></span><br><span class="line">      <span class="keyword">return</span> a+b</span><br><span class="line">ret = reduce(func,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])	<span class="comment"># å…ˆè¿›è¡Œ1ï¼Œ2ç›¸åŠ æ“ä½œï¼Œå†æ‹¿ç»“æœ3ä¸3ç›¸åŠ ï¼Œå†æ‹¿ç»“æœ6ä¸4ç›¸åŠ </span></span><br><span class="line">print(ret)		<span class="comment"># å› ä¸ºé«˜é˜¶å‡½æ•°reduceè¿”å›çš„æ˜¯ä¸€ä¸ªè®¡ç®—ç»“æœï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ‰“å°è¾“å‡º</span></span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼šåŒ¿åå‡½æ•°ä¹Ÿå¯ä»¥è¢«é«˜é˜¶å‡½æ•°reduceä½¿ç”¨</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce	<span class="comment"># å…ˆå¯¼å…¥reduceæ¨¡å—</span></span><br><span class="line">f = <span class="keyword">lambda</span> a,b:a+b</span><br><span class="line">ret = reduce(f,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])		<span class="comment"># å…ˆè¿›è¡Œ1ï¼Œ2ç›¸åŠ æ“ä½œï¼Œå†æ‹¿ç»“æœ3ä¸3ç›¸åŠ ï¼Œå†æ‹¿ç»“æœ6ä¸4ç›¸åŠ </span></span><br><span class="line">print(ret)		<span class="comment"># å› ä¸ºé«˜é˜¶å‡½æ•°reduceè¿”å›çš„æ˜¯ä¸€ä¸ªè®¡ç®—ç»“æœï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ‰“å°è¾“å‡º</span></span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å››ã€filter-é«˜é˜¶å‡½æ•°ç”¨æ³•"><a href="#å››ã€filter-é«˜é˜¶å‡½æ•°ç”¨æ³•" class="headerlink" title="å››ã€filter()é«˜é˜¶å‡½æ•°ç”¨æ³•"></a>å››ã€filter()é«˜é˜¶å‡½æ•°ç”¨æ³•</h3><p>ã€€ã€€<strong>æ ¼å¼ï¼š</strong>filter(fuunction(å‡½æ•°),Iterable(å¯è¿­ä»£å¯¹è±¡))</p>
<p>ã€€ã€€å°†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¼ ç»™å‡½æ•°è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åå°†æ»¡è¶³åˆ¤æ–­æ¡ä»¶çš„å…ƒç´ æ”¾åˆ°ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ä¸­ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(a)</span>:</span></span><br><span class="line">      <span class="keyword">return</span> a % <span class="number">2</span> == <span class="number">0</span>		<span class="comment"># åˆ¤æ–­æ¡ä»¶ä¸ºå¶æ•°</span></span><br><span class="line">f = filter(func,range(<span class="number">21</span>))		<span class="comment"># åˆ¤æ–­èŒƒå›´ä¸º0-21ä¹‹é—´</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f:</span><br><span class="line">      print(i,end=<span class="string">" "</span>)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line"><span class="number">0</span> <span class="number">2</span> <span class="number">4</span> <span class="number">6</span> <span class="number">8</span> <span class="number">10</span> <span class="number">12</span> <span class="number">14</span> <span class="number">16</span> <span class="number">18</span> <span class="number">20</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼šåŒ¿åå‡½æ•°ä¹Ÿå¯ä»¥è¢«é«˜é˜¶å‡½æ•°filterä½¿ç”¨</span></span><br><span class="line">ret = filter(<span class="keyword">lambda</span> a:a % <span class="number">2</span> == <span class="number">0</span>,range(<span class="number">1</span>,<span class="number">21</span>))	<span class="comment"># æ„é€ åŒ¿åå‡½æ•°ï¼Œè®¾ç½®è¾“å‡ºèŒƒå›´ä»¥åŠåˆ¤æ–­æ¡ä»¶</span></span><br><span class="line">print(list(ret))		<span class="comment"># ç”¨è¿­ä»£å™¨çš„åˆ—è¡¨å¼ºè½¬æ¥å®ç°è¾“å‡ºç»“æœ</span></span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span>, <span class="number">18</span>, <span class="number">20</span>]</span><br></pre></td></tr></table></figure></div>

<h3 id="äº”ã€sorted-é«˜é˜¶å‡½æ•°çš„ç”¨æ³•"><a href="#äº”ã€sorted-é«˜é˜¶å‡½æ•°çš„ç”¨æ³•" class="headerlink" title="äº”ã€sorted()é«˜é˜¶å‡½æ•°çš„ç”¨æ³•"></a>äº”ã€sorted()é«˜é˜¶å‡½æ•°çš„ç”¨æ³•</h3><p>ã€€ã€€<strong>æ ¼å¼ï¼š</strong>sorted(Iterable(å¯è¿­ä»£å¯¹è±¡),key=abs(ç»å¯¹å€¼å‡½æ•°),reverse(ç¿»è½¬)=false(ä¸))<br>ã€€ã€€å°†åˆ—è¡¨ä»¥é»˜è®¤å‡åºçš„æ–¹æ³•è¿›è¡Œæ’åºï¼Œreverseå¯å®ç°å‡åºæˆ–è€…é™åºçš„æ’åºï¼ŒTrueä¸ºé™åºæ’åºï¼ŒFalseä¸ºå‡åºæ’åºï¼Œkey=absï¼šabsæ˜¯ç»å¯¹å€¼å‡½æ•°ï¼Œ<br>ã€€ã€€å–å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ çš„ç»å¯¹å€¼åå°†ç»å¯¹å€¼è¿›è¡Œæ’åºï¼Œè¿”å›ä¸€ä¸ªè¢«é‡æ–°æ’è¿‡åºçš„åˆ—è¡¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚1ï¼š</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">ret = sorted(a)		<span class="comment"># é»˜è®¤å‡åºæ’åº</span></span><br><span class="line">print(ret)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚2ï¼š</span></span><br><span class="line">ret = sorted([<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">4</span>])			<span class="comment"># é»˜è®¤å‡åºæ’åº</span></span><br><span class="line">print(ret)</span><br><span class="line">ret = sorted([<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">4</span>],reverse=<span class="literal">True</span>)	<span class="comment"># å½“ç¿»è½¬å€¼æ˜¯Trueæ—¶ï¼Œä»£è¡¨éœ€è¦ç¿»è½¬ï¼Œåˆ™ä¸ºé™åºæ’åº</span></span><br><span class="line">print(ret)</span><br><span class="line">ret = sorted([<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">-9</span>,<span class="number">3</span>,<span class="number">-4</span>],reverse=<span class="literal">True</span>)	<span class="comment"># å½“ç¿»è½¬å€¼æ˜¯Trueæ—¶ï¼Œä»£è¡¨éœ€è¦ç¿»è½¬ï¼Œåˆ™ä¸ºé™åºæ’åº</span></span><br><span class="line">print(ret)</span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">[<span class="number">9</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>]</span><br><span class="line">[<span class="number">8</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">-4</span>, <span class="number">-9</span>]</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¾‹å¦‚3ï¼š</span></span><br><span class="line">print(sorted([<span class="number">1</span>,<span class="number">9</span>,<span class="number">-8</span>,<span class="number">6</span>,<span class="number">-7</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">-33</span>],key=abs,reverse=<span class="literal">False</span>))</span><br><span class="line"><span class="comment"># å–å…ƒç´ çš„æ¯ä¸€ä¸ªç»å¯¹å€¼åï¼Œå†å°†ç»å¯¹å€¼è¿›è¡Œæ’åºï¼Œç¿»è½¬çš„å€¼ä¸ºFalseï¼Œæ‰€ä»¥æ­¤æ’åºä¸ºå‡åºæ’åº</span></span><br><span class="line">è¾“å‡ºç»“æœä¸ºï¼š</span><br><span class="line">[<span class="number">1</span>, <span class="number">6</span>, <span class="number">6</span>, <span class="number">-7</span>, <span class="number">-8</span>, <span class="number">9</span>, <span class="number">22</span>, <span class="number">-33</span>]</span><br></pre></td></tr></table></figure></div>

<h3 id="å…­ã€lambdaåŸºæœ¬ä½¿ç”¨"><a href="#å…­ã€lambdaåŸºæœ¬ä½¿ç”¨" class="headerlink" title="å…­ã€lambdaåŸºæœ¬ä½¿ç”¨"></a>å…­ã€lambdaåŸºæœ¬ä½¿ç”¨</h3><p>ã€€ã€€ã€€1ã€lambdaåªæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå‡½æ•°ä½“æ¯”defç®€å•å¾ˆå¤šã€‚</p>
<p>ã€€ã€€ã€€2ã€lambdaçš„ä¸»ä½“æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä»£ç å—ã€‚ä»…ä»…èƒ½åœ¨lambdaè¡¨è¾¾å¼ä¸­å°è£…æœ‰é™çš„é€»è¾‘è¿›å»ã€‚</p>
<p>ã€€ã€€ã€€3ã€lambdaè¡¨è¾¾å¼æ˜¯èµ·åˆ°ä¸€ä¸ªå‡½æ•°é€Ÿå†™çš„ä½œç”¨ã€‚å…è®¸åœ¨ä»£ç å†…åµŒå…¥ä¸€ä¸ªå‡½æ•°çš„å®šä¹‰ã€‚</p>
<p>ã€€ã€€ã€€4ã€<strong>æ ¼å¼ï¼š</strong>lambdaçš„ä¸€èˆ¬å½¢å¼æ˜¯å…³é”®å­—lambdaåé¢è·Ÿä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼Œç´§è·Ÿä¸€ä¸ªå†’å·ï¼Œä¹‹åæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f = <span class="keyword">lambda</span> x,y,z:x+y+z</span><br><span class="line">print(f(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)) </span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š6</span></span><br><span class="line"> </span><br><span class="line">my_lambda = <span class="keyword">lambda</span> arg : arg + <span class="number">1</span></span><br><span class="line">print(my_lambda(<span class="number">10</span>)) </span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š11</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸ƒã€-ä¸‰å…ƒè¿ç®—"><a href="#ä¸ƒã€-ä¸‰å…ƒè¿ç®—" class="headerlink" title="ä¸ƒã€ ä¸‰å…ƒè¿ç®—"></a>ä¸ƒã€ ä¸‰å…ƒè¿ç®—</h3><p>ã€€ã€€<strong>1ã€ä¸‰å…ƒè¿ç®—</strong><br>ã€€ã€€ã€€1ã€<strong>ä¸‰å…ƒè¿ç®—æ ¼å¼ï¼š</strong>  result=å€¼1 if x&lt;y else å€¼2   ifæ¡ä»¶æˆç«‹result=1,å¦åˆ™result=2<br>ã€€ã€€ã€€2ã€<strong>ä½œç”¨ï¼š</strong>ä¸‰å…ƒè¿ç®—ï¼Œåˆç§°ä¸‰ç›®è¿ç®—ï¼Œä¸»è¦ä½œç”¨æ˜¯å‡å°‘ä»£ç é‡ï¼Œæ˜¯å¯¹ç®€å•çš„æ¡ä»¶è¯­å¥çš„ç¼©å†™</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">res = <span class="literal">True</span> <span class="keyword">if</span> <span class="number">1</span> == <span class="number">1</span> <span class="keyword">else</span> <span class="literal">False</span></span><br><span class="line">print(res)</span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š True</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f = <span class="keyword">lambda</span> x:x <span class="keyword">if</span> x % <span class="number">2</span> != <span class="number">0</span> <span class="keyword">else</span> x + <span class="number">100</span></span><br><span class="line">print(f(<span class="number">10</span>)) </span><br><span class="line"><span class="comment"># 110</span></span><br></pre></td></tr></table></figure></div>



















]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>é«˜é˜¶å‡½æ•°</tag>
      </tags>
  </entry>
  <entry>
    <title>Python ä¸‰ç¨‹ã€GILé”</title>
    <url>/blog/Python/Python_id_06.html</url>
    <content><![CDATA[<p>ã€€ã€€Python ä¸‰ç¨‹åˆ†åˆ«ä¸ºï¼šè¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹</p>
<a id="more"></a>

<h3 id="ä¸€ã€è¿›ç¨‹ä¸çº¿ç¨‹ç®€ä»‹"><a href="#ä¸€ã€è¿›ç¨‹ä¸çº¿ç¨‹ç®€ä»‹" class="headerlink" title="ä¸€ã€è¿›ç¨‹ä¸çº¿ç¨‹ç®€ä»‹"></a>ä¸€ã€è¿›ç¨‹ä¸çº¿ç¨‹ç®€ä»‹</h3><h4 id="1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹-process-ï¼Ÿï¼ˆè¿›ç¨‹æ˜¯èµ„æºé›†åˆï¼‰"><a href="#1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹-process-ï¼Ÿï¼ˆè¿›ç¨‹æ˜¯èµ„æºé›†åˆï¼‰" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹(process)ï¼Ÿï¼ˆè¿›ç¨‹æ˜¯èµ„æºé›†åˆï¼‰"></a>1ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹(process)ï¼Ÿï¼ˆè¿›ç¨‹æ˜¯èµ„æºé›†åˆï¼‰</h4><p>ã€€ã€€<strong>å®šä¹‰ï¼š</strong>1ï¼‰è¿›ç¨‹æ˜¯èµ„æºåˆ†é…æœ€å°å•ä½</p>
<p>ã€€ã€€ã€€ã€€ã€€2ï¼‰å½“ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºè¢«ç³»ç»Ÿæ‰§è¡Œï¼ˆåˆ†é…å†…å­˜èµ„æºï¼‰å°±å˜æˆäº†ä¸€ä¸ªè¿›ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ã€ç¨‹åºå¹¶ä¸èƒ½å•ç‹¬è¿è¡Œï¼Œåªæœ‰å°†ç¨‹åºè£…è½½åˆ°å†…å­˜ä¸­ï¼Œç³»ç»Ÿä¸ºå®ƒåˆ†é…èµ„æºæ‰èƒ½è¿è¡Œï¼Œè¿™ç§æ‰§è¡Œçš„ç¨‹åºå°±ç§°ä¹‹ä¸ºè¿›ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2ã€ç¨‹åºå’Œè¿›ç¨‹çš„åŒºåˆ«å°±åœ¨äºï¼šç¨‹åºæ˜¯æŒ‡ä»¤çš„é›†åˆï¼Œå®ƒæ˜¯è¿›ç¨‹è¿è¡Œçš„é™æ€æè¿°æ–‡æœ¬ï¼›è¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œæ´»åŠ¨ï¼Œå±äºåŠ¨æ€æ¦‚å¿µ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€3ã€åœ¨å¤šé“ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å…è®¸å¤šä¸ªç¨‹åºåŒæ—¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåœ¨æ“ä½œç³»ç»Ÿçš„è°ƒåº¦ä¸‹ï¼Œå¯ä»¥å®ç°å¹¶å‘åœ°æ‰§è¡Œã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€4ã€è¿›ç¨‹çš„å‡ºç°è®©æ¯ä¸ªç”¨æˆ·æ„Ÿè§‰åˆ°è‡ªå·±ç‹¬äº«CPUï¼Œå› æ­¤ï¼Œè¿›ç¨‹å°±æ˜¯ä¸ºäº†åœ¨CPUä¸Šå®ç°å¤šé“ç¼–ç¨‹è€Œæå‡ºçš„ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€5ã€è¿›ç¨‹ä¹‹é—´æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ï¼Œå„è¿›ç¨‹ä¹‹é—´ä¸èƒ½ç›¸äº’è®¿é—®</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€6ã€åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹å¾ˆç®€å•ï¼Œåˆ›å»ºæ–°è¿›ç¨‹éœ€è¦å¯¹çˆ¶è¿›ç¨‹è¿›è¡Œå¤åˆ¶</p>
<p>ã€€ã€€<strong>å¤šé“ç¼–ç¨‹ï¼š</strong> åœ¨è®¡ç®—æœºå†…å­˜ä¸­åŒæ—¶å­˜æ”¾å‡ é“ç›¸äº’ç‹¬ç«‹çš„ç¨‹åºï¼Œä»–ä»¬å…±äº«ç³»ç»Ÿèµ„æºï¼Œç›¸äº’ç©¿æ’è¿è¡Œ</p>
<p>ã€€ã€€<strong>å•é“ç¼–ç¨‹ï¼š</strong> è®¡ç®—æœºå†…å­˜ä¸­åªå…è®¸ä¸€ä¸ªçš„ç¨‹åºè¿è¡Œ</p>
<p>ã€€ã€€<strong>è¿›ç¨‹å¹¶å‘æ€§ï¼š</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€1ï¼‰åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼ŒåŒæ—¶ä¼šå­˜åœ¨å¤šä¸ªè¿›ç¨‹è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒåŒå¤„äºå¼€å§‹åˆ°ç»“æŸä¹‹é—´çš„çŠ¶æ€</p>
<p>ã€€ã€€ã€€ã€€ã€€2ï¼‰å¯¹äºä¸€ä¸ªå•CPUç³»ç»Ÿæ¥è¯´ï¼Œç¨‹åºåŒæ—¶å¤„äºè¿è¡ŒçŠ¶æ€åªæ˜¯ä¸€ç§å®è§‚ä¸Šçš„æ¦‚å¿µï¼Œä»–ä»¬è™½ç„¶éƒ½å·²ç»å¼€å§‹è¿è¡Œï¼Œä½†å°±å¾®è§‚è€Œè¨€ï¼Œä»»æ„æ—¶åˆ»CPUä¸Šè¿è¡Œçš„ç¨‹åºåªæœ‰ä¸€ä¸ª</p>
<p>ã€€ã€€ã€€ã€€ã€€3ï¼‰ç”±äºæ“ä½œç³»ç»Ÿåˆ†æ—¶ï¼Œè®©æ¯ä¸ªè¿›ç¨‹éƒ½è§‰å¾—è‡ªå·±ç‹¬å CPUç­‰èµ„æº</p>
<p>ã€€ã€€ã€€ã€€ã€€<strong>æ³¨ï¼š</strong>å¦‚æœæ˜¯å¤šæ ¸CPUï¼ˆå¤„ç†å™¨ï¼‰å®é™…ä¸Šæ˜¯å¯ä»¥å®ç°æ­£åœ¨æ„ä¹‰çš„åŒä¸€æ—¶é—´ç‚¹æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œ</p>
<p>ã€€ã€€<strong>çº¿ç¨‹å¹¶å‘æ€§ï¼š</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€1ï¼‰æ“ä½œç³»ç»Ÿå°†æ—¶é—´åˆ’åˆ†ä¸ºå¾ˆå¤šæ—¶é—´æ®µï¼Œå°½å¯èƒ½çš„å‡åŒ€åˆ†é…ç»™æ¯ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€2ï¼‰è·å–åˆ°æ—¶é—´ç‰‡çš„çº¿ç¨‹è¢«CPUæ‰§è¡Œï¼Œå…¶ä»–åˆ™ä¸€ç›´åœ¨ç­‰å¾…ï¼Œæ‰€ä»¥å¾®è§‚ä¸Šæ˜¯èµ°èµ°åœåœï¼Œå®è§‚ä¸Šéƒ½åœ¨è¿è¡Œã€‚</p>
<p>ã€€ã€€<strong>å¤šæ ¸CPUæƒ…å†µï¼š</strong>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å¦‚æœä½ çš„ç¨‹åºçš„çº¿ç¨‹æ•°å°‘äºCPUçš„æ ¸å¿ƒæ•°ï¼Œä¸”ç³»ç»Ÿæ­¤æ—¶æ²¡æœ‰å…¶ä»–è¿›ç¨‹åŒæ—¶è¿è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºçš„æ¯ä¸ªçº¿ç¨‹ä¼šäº«æœ‰ä¸€ä¸ªCPUï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€å½“åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°å¤šäºCPUæ ¸å¿ƒæ•°æ—¶ï¼ŒCPUä¼šé‡‡ç”¨ä¸€å®šçš„è°ƒåº¦ç®—æ³•æ¯éš”ä¸€æ®µæ—¶é—´å°±å°†è¿™äº›çº¿ç¨‹è°ƒå…¥æˆ–è°ƒå‡ºCPU<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä»¥ç¡®ä¿æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½åˆ†äº«ä¸€éƒ¨åˆ†CPUæ—¶é—´ï¼Œå®ç°å¤šçº¿ç¨‹å¹¶å‘ã€‚</p>
<h4 id="2ã€æœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜è¦çº¿ç¨‹ï¼Ÿ"><a href="#2ã€æœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜è¦çº¿ç¨‹ï¼Ÿ" class="headerlink" title="2ã€æœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜è¦çº¿ç¨‹ï¼Ÿ"></a>2ã€æœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜è¦çº¿ç¨‹ï¼Ÿ</h4><p>ã€€ã€€<strong>1ã€è¿›ç¨‹ä¼˜ç‚¹ï¼š</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€æä¾›äº†å¤šé“ç¼–ç¨‹ï¼Œè®©æˆ‘ä»¬æ„Ÿè§‰æˆ‘ä»¬æ¯ä¸ªäººéƒ½æ‹¥æœ‰è‡ªå·±çš„CPUå’Œå…¶ä»–èµ„æºï¼Œå¯ä»¥æé«˜è®¡ç®—æœºçš„åˆ©ç”¨ç‡</p>
<p>ã€€ã€€<strong>2ã€è¿›ç¨‹çš„ä¸¤ä¸ªé‡è¦ç¼ºç‚¹</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€a. ç¬¬ä¸€ç‚¹ï¼šè¿›ç¨‹åªèƒ½åœ¨ä¸€ä¸ªæ—¶é—´å¹²ä¸€ä»¶äº‹ï¼Œå¦‚æœæƒ³åŒæ—¶å¹²ä¸¤ä»¶äº‹æˆ–å¤šä»¶äº‹ï¼Œè¿›ç¨‹å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚<br>ã€€ã€€ã€€ã€€ã€€b. ç¬¬äºŒç‚¹ï¼šè¿›ç¨‹åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¦‚æœé˜»å¡ï¼Œå³ä½¿è¿›ç¨‹ä¸­æœ‰äº›å·¥ä½œä¸ä¾èµ–äºè¾“å…¥çš„æ•°æ®ï¼Œä¹Ÿå°†æ— æ³•æ‰§è¡Œï¼ˆä¾‹å¦‚ç­‰å¾…è¾“å…¥ï¼Œæ•´ä¸ªè¿›ç¨‹å°±ä¼šæŒ‚èµ·ï¼‰ã€‚<br>ã€€ã€€ã€€ã€€ã€€c. ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨qqèŠå¤©ï¼Œ qqåšä¸ºä¸€ä¸ªç‹¬ç«‹è¿›ç¨‹å¦‚æœåŒä¸€æ—¶é—´åªèƒ½å¹²ä¸€ä»¶äº‹ï¼Œé‚£ä»–å¦‚ä½•å®ç°åœ¨åŒä¸€æ—¶åˆ» å³èƒ½ç›‘å¬é”®ç›˜è¾“å…¥ã€åˆèƒ½ç›‘å¬å…¶å®ƒäººç»™ä½ å‘çš„æ¶ˆæ¯<br>ã€€ã€€ã€€ã€€ã€€d. ä½ ä¼šè¯´ï¼Œæ“ä½œç³»ç»Ÿä¸æ˜¯æœ‰åˆ†æ—¶ä¹ˆï¼Ÿåˆ†æ—¶æ˜¯æŒ‡åœ¨ä¸åŒè¿›ç¨‹é—´çš„åˆ†æ—¶å‘€<br>ã€€ã€€ã€€ã€€ã€€e. å³æ“ä½œç³»ç»Ÿå¤„ç†ä¸€ä¼šä½ çš„qqä»»åŠ¡ï¼Œåˆåˆ‡æ¢åˆ°wordæ–‡æ¡£ä»»åŠ¡ä¸Šäº†ï¼Œæ¯ä¸ªcpuæ—¶é—´ç‰‡åˆ†ç»™ä½ çš„qqç¨‹åºæ—¶ï¼Œä½ çš„qqè¿˜æ˜¯åªèƒ½åŒæ—¶å¹²ä¸€ä»¶äº‹å‘€</p>
<h4 id="3ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹-thread-ï¼ˆçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿæœ€å°çš„è°ƒåº¦å•ä½ï¼‰"><a href="#3ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹-thread-ï¼ˆçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿæœ€å°çš„è°ƒåº¦å•ä½ï¼‰" class="headerlink" title="3ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹(thread)ï¼ˆçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿæœ€å°çš„è°ƒåº¦å•ä½ï¼‰"></a>3ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹(thread)ï¼ˆçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿæœ€å°çš„è°ƒåº¦å•ä½ï¼‰</h4><p>ã€€ã€€<strong>å®šä¹‰ï¼š</strong>1ï¼‰çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•ä½</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3ï¼‰è¿›ç¨‹æœ¬èº«æ˜¯æ— æ³•è‡ªå·±æ‰§è¡Œçš„ï¼Œè¦æ“ä½œcpuï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯ä¸€ç³»åˆ—æŒ‡ä»¤çš„é›†åˆ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ã€çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2ã€ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€3ã€æ— è®ºä½ å¯å¤šå°‘ä¸ªçº¿ç¨‹ï¼Œä½ æœ‰å¤šå°‘ä¸ªcpu, Pythonåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šæ·¡å®šçš„åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è¿è¡Œ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€4ã€è¿›ç¨‹æœ¬èº«æ˜¯æ— æ³•è‡ªå·±æ‰§è¡Œçš„ï¼Œè¦æ“ä½œcpuï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯ä¸€ç³»åˆ—æŒ‡ä»¤çš„é›†åˆ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€5ã€æ‰€æœ‰åœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œçš„çº¿ç¨‹æ˜¯å…±äº«åŒä¸€å—å†…å­˜ç©ºé—´çš„ï¼Œä¸åŒè¿›ç¨‹é—´å†…å­˜ç©ºé—´ä¸åŒ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€6ã€åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å„çº¿ç¨‹å¯ä»¥ç›¸äº’è®¿é—®èµ„æºï¼Œçº¿ç¨‹å¯ä»¥æ“ä½œåŒè¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹ï¼Œä½†è¿›ç¨‹ä»…èƒ½æ“ä½œå­è¿›ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€7ã€ä¸¤ä¸ªè¿›ç¨‹æƒ³é€šä¿¡ï¼Œå¿…é¡»è¦é€šè¿‡ä¸€ä¸ªä¸­é—´ä»£ç†</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€8ã€å¯¹ä¸»çº¿ç¨‹çš„ä¿®æ”¹å¯èƒ½å›å½±å“å…¶ä»–å­çº¿ç¨‹ï¼Œå¯¹ä¸»è¿›ç¨‹ä¿®æ”¹ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹å› ä¸ºè¿›ç¨‹é—´å†…å­˜ç›¸äº’ç‹¬ç«‹ï¼Œä½†æ˜¯åŒä¸€è¿›ç¨‹ä¸‹çš„çº¿ç¨‹å…±äº«å†…å­˜</p>
<h4 id="4ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"><a href="#4ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«" class="headerlink" title="4ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«"></a>4ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</h4><p>ã€€ã€€å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹æ¯”å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹å¿«ï¼Œè¿è¡Œé€Ÿåº¦æ²¡æœ‰å¯æ¯”æ€§ã€‚</p>
<p>ã€€ã€€å…ˆæœ‰ä¸€ä¸ªè¿›ç¨‹ç„¶åæ‰èƒ½æœ‰çº¿ç¨‹ã€‚</p>
<p>ã€€ã€€ã€€ã€€1ã€è¿›ç¨‹åŒ…å«çº¿ç¨‹</p>
<p>ã€€ã€€ã€€ã€€2ã€çº¿ç¨‹å…±äº«å†…å­˜ç©ºé—´</p>
<p>ã€€ã€€ã€€ã€€3ã€è¿›ç¨‹å†…å­˜æ˜¯ç‹¬ç«‹çš„ï¼ˆä¸å¯äº’ç›¸è®¿é—®ï¼‰</p>
<p>ã€€ã€€ã€€ã€€4ã€è¿›ç¨‹å¯ä»¥ç”Ÿæˆå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¹‹é—´äº’ç›¸ä¸èƒ½äº’ç›¸è®¿é—®ï¼ˆç›¸å½“äºåœ¨çˆ¶çº§è¿›ç¨‹å…‹éš†ä¸¤ä¸ªå­è¿›ç¨‹ï¼‰</p>
<p>ã€€ã€€ã€€ã€€5ã€åœ¨ä¸€ä¸ªè¿›ç¨‹é‡Œé¢çº¿ç¨‹ä¹‹é—´å¯ä»¥äº¤æµã€‚ä¸¤ä¸ªè¿›ç¨‹æƒ³é€šä¿¡ï¼Œå¿…é¡»é€šè¿‡ä¸€ä¸ªä¸­é—´ä»£ç†æ¥å®ç°</p>
<p>ã€€ã€€ã€€ã€€6ã€åˆ›å»ºæ–°çº¿ç¨‹å¾ˆç®€å•ï¼Œåˆ›å»ºæ–°è¿›ç¨‹éœ€è¦å¯¹å…¶çˆ¶è¿›ç¨‹è¿›è¡Œå…‹éš†ã€‚</p>
<p>ã€€ã€€ã€€ã€€7ã€ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ§åˆ¶æˆ–æ“ä½œåŒä¸€ä¸ªè¿›ç¨‹é‡Œé¢çš„å…¶å®ƒçº¿ç¨‹ã€‚ä½†è¿›ç¨‹åªèƒ½æ“ä½œå­è¿›ç¨‹ã€‚</p>
<p>ã€€ã€€ã€€ã€€8ã€çˆ¶è¿›ç¨‹å¯ä»¥ä¿®æ”¹ä¸å½±å“å­è¿›ç¨‹ï¼Œä½†ä¸èƒ½ä¿®æ”¹ã€‚</p>
<p>ã€€ã€€ã€€ã€€9ã€çº¿ç¨‹å¯ä»¥å¸®åŠ©åº”ç”¨ç¨‹åºåŒæ—¶åšå‡ ä»¶äº‹</p>
<h4 id="5ã€è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«"><a href="#5ã€è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«" class="headerlink" title="5ã€è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«"></a>5ã€è¿›ç¨‹å’Œç¨‹åºçš„åŒºåˆ«</h4><p>ã€€ã€€1ã€ç¨‹åºåªæ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªæœºå™¨ä»£ç æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆï¼Œæ‰€ä»¥ï¼Œç¨‹åºæ˜¯ä¸€ä¸ªé™æ€çš„å®ä½“ï¼Œ</p>
<p>ã€€ã€€2ã€è€Œè¿›ç¨‹æ˜¯ç¨‹åºè¿è¡Œåœ¨æ•°æ®é›†ä¸Šçš„åŠ¨æ€è¿‡ç¨‹ï¼Œè¿›ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€å®ä½“ï¼Œå®ƒåº”åˆ›å»ºè€Œäº§ç”Ÿï¼Œåº”è°ƒåº¦æ‰§è¡Œå› ç­‰å¾…èµ„æºæˆ–äº‹ä»¶è€Œè¢«å¤„äºç­‰å¾…çŠ¶æ€ï¼Œå› å®Œæˆä»»åŠ¡è€Œè¢«æ’¤æ¶ˆ</p>
<p>ã€€ã€€3ã€è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½</p>
<p>ã€€ã€€4ã€ä¸€ä¸ªç¨‹åºå¯¹åº”å¤šä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸ºå¤šä¸ªç¨‹åºæœåŠ¡ï¼ˆä¸¤è€…ä¹‹é—´æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼‰</p>
<p>ã€€ã€€5ã€ä¸€ä¸ªç¨‹åºæ‰§è¡Œåœ¨ä¸åŒçš„æ•°æ®é›†ä¸Šå°±æˆä¸ºä¸åŒçš„è¿›ç¨‹ï¼Œå¯ä»¥ç”¨è¿›ç¨‹æ§åˆ¶å—æ¥å”¯ä¸€åœ°æ ‡è¯†æ¯ä¸ªè¿›ç¨‹</p>
<h3 id="äºŒã€å¤šçº¿ç¨‹"><a href="#äºŒã€å¤šçº¿ç¨‹" class="headerlink" title="äºŒã€å¤šçº¿ç¨‹"></a>äºŒã€å¤šçº¿ç¨‹</h3><p>ã€€ã€€<strong>Pythonå¤šçº¿ç¨‹ç¼–ç¨‹ä¸­å¸¸ç”¨æ–¹æ³•ï¼š</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>1ã€join()æ–¹æ³•ï¼š</strong>å¦‚æœä¸€ä¸ªçº¿ç¨‹æˆ–è€…åœ¨å‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è°ƒç”¨å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”å¸Œæœ›å¾…å…¶å®Œæˆæ“ä½œåæ‰èƒ½æ‰§è¡Œï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€   é‚£ä¹ˆåœ¨è°ƒç”¨çº¿ç¨‹çš„æ—¶å°±å¯ä»¥ä½¿ç”¨è¢«è°ƒçº¿ç¨‹çš„joinæ–¹æ³•join([timeout]) timeoutï¼šå¯é€‰å‚æ•°ï¼Œçº¿ç¨‹è¿è¡Œçš„æœ€é•¿æ—¶é—´<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>2ã€isAlive()æ–¹æ³•ï¼š</strong>æŸ¥çœ‹çº¿ç¨‹æ˜¯å¦è¿˜åœ¨è¿è¡Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>3ã€getName()æ–¹æ³•ï¼š</strong>è·å¾—çº¿ç¨‹å<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>4ã€setDaemon()æ–¹æ³•ï¼š</strong>ä¸»çº¿ç¨‹é€€å‡ºæ—¶ï¼Œéœ€è¦å­çº¿ç¨‹éšä¸»çº¿ç¨‹é€€å‡ºï¼Œåˆ™è®¾ç½®å­çº¿ç¨‹çš„setDaemon()</p>
<p> ã€€<strong>1ã€çº¿ç¨‹2ç§è°ƒç”¨æ–¹å¼ï¼šç›´æ¥è°ƒç”¨ï¼Œ ç»§æ‰¿å¼è°ƒç”¨</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span><span class="params">(num)</span>:</span>                                   <span class="comment"># å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line">    print(<span class="string">"running on number:%s"</span> % num)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#1ã€target=sayhi ï¼šsayhiæ˜¯å®šä¹‰çš„ä¸€ä¸ªå‡½æ•°çš„åå­—</span></span><br><span class="line"><span class="comment">#2ã€args=(1,)    ï¼š æ‹¬å·å†…å†™çš„æ˜¯å‡½æ•°çš„å‚æ•°</span></span><br><span class="line">t1 = threading.Thread(target=sayhi, args=(<span class="number">1</span>,))    <span class="comment"># ç”Ÿæˆä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line">t2 = threading.Thread(target=sayhi, args=(<span class="number">2</span>,))    <span class="comment"># ç”Ÿæˆå¦ä¸€ä¸ªçº¿ç¨‹å®ä¾‹</span></span><br><span class="line"></span><br><span class="line">t1.start()                                        <span class="comment"># å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">t2.start()                                        <span class="comment"># å¯åŠ¨å¦ä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line"></span><br><span class="line">print(t1.getName())                               <span class="comment"># è·å–çº¿ç¨‹å</span></span><br><span class="line">print(t2.getName())</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,num)</span>:</span></span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span><span class="comment">#å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line">        print(<span class="string">"running on number:%s"</span> %self.num)</span><br><span class="line">        time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    t1 = MyThread(<span class="number">1</span>)</span><br><span class="line">    t2 = MyThread(<span class="number">2</span>)</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>2ã€forå¾ªç¯åŒæ—¶å¯åŠ¨å¤šä¸ªçº¿ç¨‹</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>è¯´æ˜ï¼š</strong>ä¸‹é¢åˆ©ç”¨forå¾ªç¯åŒæ—¶å¯åŠ¨50ä¸ªçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œæ‰§è¡Œæ—¶é—´æ˜¯3ç§’è€Œä¸æ˜¯æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œæ—¶é—´çš„æ€»å’Œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span><span class="params">(num)</span>:</span> <span class="comment">#å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line">    print(<span class="string">"running on number:%s"</span> %num)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">50</span>):</span><br><span class="line">    t = threading.Thread(target=sayhi,args=(<span class="string">'t-%s'</span>%i,))</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>3ã€t.join()ï¼š</strong> å®ç°æ‰€æœ‰çº¿ç¨‹éƒ½æ‰§è¡Œç»“æŸåå†æ‰§è¡Œä¸»çº¿ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>è¯´æ˜ï¼š</strong>åœ¨4ä¸­è™½ç„¶å¯ä»¥å®ç°50ä¸ªçº¿ç¨‹åŒæ—¶å¹¶å‘æ‰§è¡Œï¼Œä½†æ˜¯ä¸»çº¿ç¨‹ä¸ä¼šç­‰å¾…å­çº¿ç¨‹ç»“æŸåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨t.join()æŒ‡å®šç­‰å¾…æŸä¸ªçº¿ç¨‹ç»“æŸçš„ç»“æœ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">start_time = time.time()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span><span class="params">(num)</span>:</span> <span class="comment">#å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line">    print(<span class="string">"running on number:%s"</span> %num)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">t_objs = []    <span class="comment">#å°†è¿›ç¨‹å®ä¾‹å¯¹è±¡å­˜å‚¨åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">50</span>):</span><br><span class="line">    t = threading.Thread(target=sayhi,args=(<span class="string">'t-%s'</span>%i,))</span><br><span class="line">    t.start()          <span class="comment">#å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œç¨‹åºä¸ä¼šé˜»å¡</span></span><br><span class="line">    t_objs.append(t)</span><br><span class="line">print(threading.active_count())    <span class="comment">#æ‰“å°å½“å‰æ´»è·ƒè¿›ç¨‹æ•°é‡</span></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> t_objs: <span class="comment">#åˆ©ç”¨forå¾ªç¯ç­‰å¾…ä¸Šé¢50ä¸ªè¿›ç¨‹å…¨éƒ¨ç»“æŸ</span></span><br><span class="line">    t.join()     <span class="comment">#é˜»å¡æŸä¸ªç¨‹åº</span></span><br><span class="line">print(threading.current_thread())    <span class="comment">#æ‰“å°æ‰§è¡Œè¿™ä¸ªå‘½ä»¤è¿›ç¨‹</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"----------------all threads has finished....."</span>)</span><br><span class="line">print(threading.active_count())</span><br><span class="line">print(<span class="string">'cost time:'</span>,time.time() - start_time)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>4ã€setDaemon():</strong> å®ˆæŠ¤çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹é€€å‡ºæ—¶ï¼Œéœ€è¦å­çº¿ç¨‹éšä¸»çº¿ç¨‹é€€å‡º</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">start_time = time.time()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sayhi</span><span class="params">(num)</span>:</span> <span class="comment">#å®šä¹‰æ¯ä¸ªçº¿ç¨‹è¦è¿è¡Œçš„å‡½æ•°</span></span><br><span class="line">    print(<span class="string">"running on number:%s"</span> %num)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">50</span>):</span><br><span class="line">    t = threading.Thread(target=sayhi,args=(<span class="string">'t-%s'</span>%i,))</span><br><span class="line">    t.setDaemon(<span class="literal">True</span>)  <span class="comment">#æŠŠå½“å‰çº¿ç¨‹å˜æˆå®ˆæŠ¤çº¿ç¨‹ï¼Œå¿…é¡»åœ¨t.start()å‰è®¾ç½®</span></span><br><span class="line">    t.start()          <span class="comment">#å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œç¨‹åºä¸ä¼šé˜»å¡</span></span><br><span class="line">print(<span class="string">'cost time:'</span>,time.time() - start_time)</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸‰ã€GILé”å’Œç”¨æˆ·é”ï¼ˆGlobal-Interpreter-Lock-å…¨å±€è§£é‡Šå™¨é”ï¼‰"><a href="#ä¸‰ã€GILé”å’Œç”¨æˆ·é”ï¼ˆGlobal-Interpreter-Lock-å…¨å±€è§£é‡Šå™¨é”ï¼‰" class="headerlink" title="ä¸‰ã€GILé”å’Œç”¨æˆ·é”ï¼ˆGlobal Interpreter Lock å…¨å±€è§£é‡Šå™¨é”ï¼‰"></a>ä¸‰ã€GILé”å’Œç”¨æˆ·é”ï¼ˆ<code>Global Interpreter Lock å…¨å±€è§£é‡Šå™¨é”</code>ï¼‰</h3><p>ã€€ã€€ã€€ã€€<strong>1.å…¨å±€è§£é‡Šå™¨é”ï¼š</strong>ä¿è¯åŒä¸€æ—¶é—´ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹èµ„æºæœ‰æ“ä½œæƒé™</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>ä½œç”¨ï¼š</strong>åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹é€šè¿‡GILé” è¢«CUPè°ƒç”¨ï¼Œ<strong>åˆ‡æ¢æ¡ä»¶ï¼šI/Oæ“ä½œã€å›ºå®šæ—¶é—´(ç³»ç»Ÿå†³å®š)</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>è¯´æ˜ï¼š</strong>pythonå¤šçº¿ç¨‹ä¸­GILé”åªæ˜¯åœ¨CPUæ“ä½œæ—¶ï¼ˆå¦‚ï¼šè®¡ç®—ï¼‰æ‰æ˜¯ä¸²è¡Œçš„ï¼Œå…¶ä»–éƒ½æ˜¯å¹¶è¡Œçš„ï¼Œæ‰€ä»¥æ¯”ä¸²è¡Œå¿«å¾ˆå¤š</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰ä¸ºäº†è§£å†³ä¸åŒçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€èµ„æºæ—¶ï¼Œæ•°æ®ä¿æŠ¤é—®é¢˜ï¼Œè€Œäº§ç”Ÿäº†GIL</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰GILåœ¨è§£é‡Šå™¨çš„å±‚é¢é™åˆ¶äº†ç¨‹åºåœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¢«CPUå®é™…æ‰§è¡Œï¼Œè€Œä¸ç®¡ä½ çš„ç¨‹åºé‡Œå®é™…å¼€äº†å¤šå°‘æ¡çº¿ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€3ï¼‰ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒCPythonè‡ªå·±å®šä¹‰äº†ä¸€ä¸ªå…¨å±€è§£é‡Šå™¨é”ï¼ŒåŒä¸€æ—¶é—´ä»…ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‹¿åˆ°è¿™ä¸ªæ•°æ®</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€4ï¼‰pythonä¹‹æ‰€ä»¥ä¼šäº§ç”Ÿè¿™ç§ä¸å¥½çš„çŠ¶å†µæ˜¯å› ä¸ºpythonå¯ç”¨ä¸€ä¸ªçº¿ç¨‹æ˜¯è°ƒç”¨æ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹ï¼Œå°±æ˜¯Cæ¥å£</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€5ï¼‰ä½†æ˜¯è¿™ä»…ä»…æ˜¯CPythonè¿™ä¸ªç‰ˆæœ¬çš„é—®é¢˜ï¼Œåœ¨PyPyï¼Œä¸­å°±æ²¡æœ‰è¿™ç§ç¼ºé™·</p>
<p>ã€€ã€€ã€€ã€€<strong>2.ç”¨æˆ·é”ï¼šçº¿ç¨‹é”(äº’æ–¥é”Mutex) ï¼š</strong>å½“å‰çº¿ç¨‹è¿˜æœªæ“ä½œå®Œæˆå‰å…¶ä»–æ‰€æœ‰çº¿ç¨‹éƒ½æ— æ³•å¯¹å…¶æ“ä½œï¼Œå³ä½¿å·²ç»é‡Šæ”¾äº†GILé”</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>1. åœ¨æœ‰GILé”æ—¶ä¸ºä½•è¿˜éœ€è¦ç”¨æˆ·é”</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰GILé”åªèƒ½ä¿è¯åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹æŸä¸ªèµ„æºæ“ä½œï¼Œä½†å½“ä¸Šä¸€ä¸ªçº¿ç¨‹è¿˜æœªæ‰§è¡Œå®Œæ¯•æ—¶å¯èƒ½å°±ä¼šé‡Šæ”¾GILï¼Œå…¶ä»–çº¿ç¨‹å°±å¯ä»¥æ“ä½œäº†</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>2. çº¿ç¨‹é”çš„åŸç†</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰å½“ä¸€ä¸ªçº¿ç¨‹å¯¹æŸä¸ªèµ„æºè¿›è¡ŒCPUè®¡ç®—çš„æ“ä½œæ—¶åŠ ä¸€ä¸ªçº¿ç¨‹é”ï¼Œåªæœ‰å½“å‰çº¿ç¨‹è®¡ç®—å®Œæˆä¸»åŠ¨é‡Šæ”¾é”ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½å¯¹å…¶æ“ä½œ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰è¿™æ ·å°±å¯ä»¥é˜²æ­¢è¿˜æœªè®¡ç®—å®Œæˆï¼Œé‡Šæ”¾GILé”åå…¶ä»–çº¿ç¨‹å¯¹è¿™ä¸ªèµ„æºæ“ä½œå¯¼è‡´æ··ä¹±é—®é¢˜</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>3. åœ¨æœ‰GILçš„æƒ…å†µä¸‹æ‰§è¡Œ count = count + 1 ä¼šå‡ºé”™ï¼Œç”¨çº¿ç¨‹é”è§£å†³æ–¹æ³•</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1ï¼‰ç¬¬ä¸€æ­¥ï¼šcount = 0   countåˆå§‹å€¼ä¸º0</span></span><br><span class="line"><span class="comment"># 2ï¼‰ç¬¬äºŒæ­¥ï¼šçº¿ç¨‹1è¦æ‰§è¡Œå¯¹countåŠ 1çš„æ“ä½œé¦–å…ˆç”³è¯·GILå…¨å±€è§£é‡Šå™¨é”</span></span><br><span class="line"><span class="comment"># 3ï¼‰ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨æ“ä½œç³»ç»ŸåŸç”Ÿçº¿ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"># 4ï¼‰ç¬¬å››æ­¥ï¼šcountåŠ 1è¿˜æœªæ‰§è¡Œå®Œæ¯•ï¼Œæ—¶é—´åˆ°äº†è¢«è¦æ±‚é‡Šæ”¾GIL</span></span><br><span class="line"><span class="comment"># 5ï¼‰ç¬¬äº”æ­¥ï¼šçº¿ç¨‹1é‡Šæ”¾äº†GILåçº¿ç¨‹2æ­¤æ—¶ä¹Ÿè¦å¯¹countè¿›è¡Œæ“ä½œï¼Œæ­¤æ—¶çº¿ç¨‹1è¿˜æœªæ‰§è¡Œå®Œï¼Œæ‰€ä»¥countè¿˜æ˜¯0</span></span><br><span class="line"><span class="comment"># 6ï¼‰ç¬¬å…­æ­¥ï¼šçº¿ç¨‹2æ­¤æ—¶æ‹¿åˆ°count = 0åä¹Ÿè¦å¯¹countè¿›è¡ŒåŠ 1æ“ä½œï¼Œå‡å¦‚çº¿ç¨‹2æ‰§è¡Œå¾ˆå¿«ï¼Œä¸€æ¬¡å°±å®Œæˆäº†</span></span><br><span class="line"><span class="comment">#    countåŠ 1çš„æ“ä½œï¼Œé‚£ä¹ˆcountæ­¤æ—¶å°±ä»0å˜æˆäº†1</span></span><br><span class="line"><span class="comment"># 7ï¼‰ç¬¬ä¸ƒæ­¥ï¼šçº¿ç¨‹2æ‰§è¡Œå®ŒåŠ 1åå°±èµ‹å€¼count=1å¹¶é‡Šæ”¾GIL</span></span><br><span class="line"><span class="comment"># 8ï¼‰ç¬¬å…«æ­¥ï¼šçº¿ç¨‹2æ‰§è¡Œå®Œåcpuåˆäº¤ç»™äº†çº¿ç¨‹1ï¼Œçº¿ç¨‹1æ ¹æ®ä¸Šä¸‹æ–‡ç»§ç»­æ‰§è¡ŒcountåŠ 1æ“ä½œï¼Œå…ˆæ‹¿åˆ°GIL</span></span><br><span class="line"><span class="comment">#    é”ï¼Œå®ŒæˆåŠ 1æ“ä½œï¼Œç”±äºçº¿ç¨‹1å…ˆæ‹¿åˆ°çš„æ•°æ®count=0ï¼Œæ‰§è¡Œå®ŒåŠ 1åç»“æœè¿˜æ˜¯1</span></span><br><span class="line"><span class="comment"># 9ï¼‰ç¬¬ä¹æ­¥ï¼šçº¿ç¨‹1å°†count=1åœ¨æ¬¡èµ‹å€¼ç»™countå¹¶é‡Šæ”¾GILé”ï¼Œæ­¤æ—¶è¿ä¸ªçº¿ç¨‹éƒ½å¯¹æ•°æ®åŠ 1ï¼Œä½†æ˜¯å€¼æœ€ç»ˆæ˜¯1</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€<strong>1ã€ä½¿ç”¨çº¿ç¨‹é”è§£å†³ä¸Šé¢é—®é¢˜çš„åŸç†</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰ åœ¨GILé”ä¸­å†åŠ ä¸€ä¸ªçº¿ç¨‹é”ï¼Œçº¿ç¨‹é”æ˜¯ç”¨æˆ·å±‚é¢çš„é”<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰ çº¿ç¨‹é”å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹æ•°æ®æ“ä½œå‰åŠ ä¸€æŠŠé”ï¼Œé˜²æ­¢å…¶ä»–çº¿ç¨‹å¤åˆ¶æˆ–è€…æ“ä½œè¿™ä¸ªæ•°æ®<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€3ï¼‰ åªæœ‰è¿™ä¸ªçº¿ç¨‹å¯¹æ•°æ®æ“ä½œå®Œæ¯•åæ‰ä¼šé‡Šæ”¾è¿™ä¸ªé”ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½æ“ä½œè¿™ä¸ªæ•°æ®</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>2ã€å®šä¹‰ä¸€ä¸ªçº¿ç¨‹é”éå¸¸ç®€å•åªç”¨ä¸‰æ­¥ï¼š</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>ç¬¬ä¸€æ­¥ï¼š</strong> lock = threading.Lock()            #å®šä¹‰ä¸€æŠŠé”<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>ç¬¬äºŒæ­¥ï¼š</strong> lock.acquire()                    #å¯¹æ•°æ®æ“ä½œå‰åŠ é”é˜²æ­¢æ•°æ®è¢«å¦ä¸€çº¿ç¨‹æ“ä½œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>ç¬¬ä¸‰æ­¥ï¼š</strong> lock.release()                     #å¯¹æ•°æ®æ“ä½œå®Œæˆåé‡Šæ”¾é”</p>
<p>ã€€ã€€<strong>6ã€æ­»é”</strong></p>
<p>ã€€ã€€ã€€ã€€<strong>1. æ­»é”å®šä¹‰</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹æˆ–çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p>
<p>ã€€ã€€ã€€ã€€<strong>2. æ­»é”ä¸¾ä¾‹</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. å¯åŠ¨5ä¸ªçº¿ç¨‹ï¼Œæ‰§è¡Œrunæ–¹æ³•,å‡å¦‚thread1é¦–å…ˆæŠ¢åˆ°äº†Aé”ï¼Œæ­¤æ—¶thread1æ²¡æœ‰é‡Šæ”¾Aé”ï¼Œç´§æ¥ç€æ‰§è¡Œä»£ç mutexB.acquire()ï¼ŒæŠ¢åˆ°äº†Bé”ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€  åœ¨æŠ¢Bé”æ—¶å€™ï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ä¸thread1äº‰æŠ¢ï¼Œå› ä¸ºAé”æ²¡æœ‰é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹åªèƒ½ç­‰å¾…<br>ã€€ã€€ã€€ã€€ã€€ã€€2. thread1æ‰§è¡Œå®Œfunc1å‡½æ•°ï¼Œç„¶åæ‰§è¡Œfunc2å‡½æ•°ï¼Œæ­¤æ—¶thread1æ‹¿åˆ°Bé”ï¼Œç„¶åæ‰§è¡Œtime.sleep(2)ï¼Œæ­¤æ—¶ä¸ä¼šé‡Šæ”¾Bé”<br>ã€€ã€€ã€€ã€€ã€€ã€€3. åœ¨thread1æ‰§è¡Œfunc2çš„åŒæ—¶thread2å¼€å§‹æ‰§è¡Œfunc1è·å–åˆ°äº†Aé”ï¼Œç„¶åç»§ç»­è¦è·å–Bé”<br>ã€€ã€€ã€€ã€€ã€€ã€€4. ä¸å¹¸çš„æ˜¯Bé”è¿˜è¢«thread1å ç”¨ï¼Œthread1å ç”¨Bé”æ—¶è¿˜éœ€è¦åŒæ—¶è·å–Aé”æ‰èƒ½å‘ä¸‹æ‰§è¡Œï¼Œä½†æ˜¯æ­¤æ—¶å‘ç°Aé”å·²ç»è¢«thread2æš‚ç”¨ï¼Œè¿™æ ·å°±æ­»é”äº†</p>
<p>ã€€ã€€<strong>7ã€\</strong>é€’å½’é”ï¼šlock = threading.RLock() è§£å†³æ­»é”é—®é¢˜****</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. é€’å½’é”çš„ä½œç”¨æ˜¯åŒä¸€çº¿ç¨‹ä¸­å¤šæ¬¡è¯·æ±‚åŒä¸€èµ„æºï¼Œä½†æ˜¯ä¸ä¼šå‚æ•°æ­»é”ã€‚<br>ã€€ã€€ã€€ã€€ã€€ã€€2. è¿™ä¸ªRLockå†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªLockå’Œä¸€ä¸ªcounterå˜é‡ï¼Œcounterè®°å½•äº†acquireçš„æ¬¡æ•°ï¼Œä»è€Œä½¿å¾—èµ„æºå¯ä»¥è¢«å¤šæ¬¡requireã€‚<br>ã€€ã€€ã€€ã€€ã€€ã€€3. ç›´åˆ°ä¸€ä¸ªçº¿ç¨‹æ‰€æœ‰çš„acquireéƒ½è¢«releaseï¼Œå…¶ä»–çš„çº¿ç¨‹æ‰èƒ½è·å¾—èµ„æºã€‚</p>
<p>ã€€ã€€<strong>8ã€Semaphore(ä¿¡å·é‡)</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. äº’æ–¥é” åŒæ—¶åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ›´æ”¹æ•°æ®ï¼Œè€ŒSemaphoreæ˜¯åŒæ—¶å…è®¸ä¸€å®šæ•°é‡çš„çº¿ç¨‹æ›´æ”¹æ•°æ®<br>ã€€ã€€ã€€ã€€ã€€ã€€2. æ¯”å¦‚å•æ‰€æœ‰3ä¸ªå‘ï¼Œé‚£æœ€å¤šåªå…è®¸3ä¸ªäººä¸Šå•æ‰€ï¼Œåé¢çš„äººåªèƒ½ç­‰é‡Œé¢æœ‰äººå‡ºæ¥äº†æ‰èƒ½å†è¿›å»<br>ã€€ã€€ã€€ã€€ã€€ã€€3. ä½œç”¨å°±æ˜¯åŒä¸€æ—¶åˆ»å…è®¸è¿è¡Œçš„çº¿ç¨‹æ•°é‡</p>
<p>ã€€ã€€<strong>9ã€eventsæ€»å…±å°±åªæœ‰å››ä¸ªæ–¹æ³•</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>1. event.set()</strong>     : è®¾ç½®æ ‡å¿—ä½<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>2. event.clear()</strong>    : æ¸…é™¤æ ‡å¿—ä½<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>3. event.wait()</strong>    : ç­‰å¾…æ ‡å¿—è¢«è®¾å®š<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>4. event.is_set()</strong>   : åˆ¤æ–­æ ‡å¿—ä½æ˜¯å¦è¢«è®¾å®š</p>
<h3 id="å››ã€è¿›ç¨‹"><a href="#å››ã€è¿›ç¨‹" class="headerlink" title="å››ã€è¿›ç¨‹"></a>å››ã€è¿›ç¨‹</h3><p>ã€€ã€€<strong>1ã€å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹å„è‡ªåº”ç”¨åœºæ™¯</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. I/Oæ“ä½œä¸å ç”¨CPUï¼ˆä»ç¡¬ç›˜ï¼Œç½‘è·¯è¯»å…¥æ•°æ®ç­‰ï¼‰</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. è®¡ç®—å ç”¨CPUï¼Œè¿™ç§æƒ…å†µæœ€å¥½ä¸ç”¨å¤šçº¿ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. pythonå¤šçº¿ç¨‹ä¸é€‚åˆCPUå¯†é›†å‹çš„ä»»åŠ¡ï¼Œé€‚åˆI/Oå¯†é›†å‹çš„ä»»åŠ¡</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€4. pythonçš„å¤šè¿›ç¨‹é€‚åˆCPUå¯†é›†å‹ä»»åŠ¡</p>
<p>ã€€ã€€<strong>2ã€ä¸€æ¬¡æ€§èµ·å¤šä¸ªè¿›ç¨‹ï¼Œå¹¶åœ¨è¿›ç¨‹ä¸­è°ƒç”¨çº¿ç¨‹</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing,time,threading</span><br><span class="line"></span><br><span class="line"><span class="comment">#3 è¢«å¤šçº¿ç¨‹è°ƒç”¨çš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">thread_run</span><span class="params">()</span>:</span></span><br><span class="line">    print(threading.get_ident())   <span class="comment">#æ‰“å°çº¿ç¨‹idå·</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2 è¢«å¤šè¿›ç¨‹è°ƒç”¨çš„å‡½æ•°ï¼Œä»¥åŠåœ¨è¿™ä¸ªå‡½æ•°ä¸­èµ·ä¸€ä¸ªè¿›ç¨‹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(name)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"hello"</span>,name)</span><br><span class="line">    t = threading.Thread(target=thread_run,)  <span class="comment">#åœ¨è¿›ç¨‹è°ƒç”¨çš„å‡½æ•°ä¸­å¯ç”¨ä¸€ä¸ªçº¿ç¨‹</span></span><br><span class="line">    t.start()</span><br><span class="line"></span><br><span class="line"><span class="comment">#1 ä¸€æ¬¡æ€§å¯åŠ¨å¤šä¸ªè¿›ç¨‹</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        p = multiprocessing.Process(target=run,args=(<span class="string">'bob %s'</span>%i,)) <span class="comment">#å¯ç”¨ä¸€ä¸ªå¤šçº¿ç¨‹</span></span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>3ã€è¿›ç¨‹é—´äº’ç›¸è®¿é—®æ•°æ®çš„ä¸‰ç§æ–¹æ³•</strong></p>
<p>ã€€ã€€ã€€ã€€<strong>æ³¨ï¼š</strong>ä¸åŒè¿›ç¨‹é—´å†…å­˜æ˜¯ä¸å…±äº«çš„ï¼Œæ‰€ä»¥äº’ç›¸ä¹‹é—´ä¸èƒ½è®¿é—®å¯¹æ–¹æ•°æ®</p>
<p>ã€€ã€€ã€€ã€€<strong>1. åœ¨çˆ¶è¿›ç¨‹ä¸­å®šä¹‰é˜Ÿåˆ—qï¼Œä½¿ç”¨çˆ¶è¿›ç¨‹å¯ç”¨ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¸­æ— æ³•æ“ä½œçˆ¶è¿›ç¨‹çš„q</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">()</span>:</span></span><br><span class="line">    q.put([<span class="number">42</span>, <span class="literal">None</span>, <span class="string">'hello'</span>])</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    q = queue.Queue()              <span class="comment">#1 åœ¨çˆ¶è¿›ç¨‹ä¸­å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å®ä¾‹q</span></span><br><span class="line">    <span class="comment"># p = threading.Thread(target=f,)    #åœ¨çº¿ç¨‹ç¨‹ä¸­å°±å¯ä»¥ç›¸äº’è®¿é—®ï¼Œçº¿ç¨‹ä¸­å†…å­˜å…±äº«</span></span><br><span class="line">    p = Process(target=f,)        <span class="comment">#2 åœ¨çˆ¶è¿›ç¨‹ä¸­èµ·ä¸€ä¸ªå­è¿›ç¨‹ pï¼Œåœ¨å­è¿›ç¨‹ä¸­ä½¿ç”¨çˆ¶è¿›ç¨‹çš„qä¼šæŠ¥é”™</span></span><br><span class="line">    p.start()</span><br><span class="line">    print(q.get())</span><br><span class="line">    p.join()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ã€€ã€€<strong>2. æ³•1:  åˆ©ç”¨Queueså®ç°çˆ¶è¿›ç¨‹åˆ°å­è¿›ç¨‹ï¼ˆæˆ–å­è¿›ç¨‹é—´ï¼‰çš„æ•°æ®ä¼ é€’</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1. æˆ‘ä»¬ä»¥å‰å­¦çš„queueæ˜¯çº¿ç¨‹queue.Queue()åªæœ‰åœ¨åŒä¸€ä¸ªè¿›ç¨‹çš„çº¿ç¨‹é—´æ‰èƒ½è®¿é—®<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2. å¦‚æœä¸¤ä¸ªè¿›ç¨‹é—´æƒ³è¦é€šä¿¡å¿…é¡»è¦ä½¿ç”¨è¿›ç¨‹Queueï¼Œç”¨æ³•å’Œå¤šçº¿ç¨‹çš„ç›¸åŒ<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€3. queue.Queue()æ˜¯çº¿ç¨‹qä¸å¯ä»¥ä¼ é€’ç»™å­è¿›ç¨‹ï¼Œä½†æ˜¯Queueæ˜¯è¿›ç¨‹qï¼Œçˆ¶è¿›ç¨‹ä¼šå°†è¿›ç¨‹qå…‹éš†äº†ä¸€ä»½ç»™å­è¿›ç¨‹<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€4.æ—¢ç„¶æ˜¯ä¸¤ä¸ªqä¸ºä»€ä¹ˆåœ¨å­è¿›ç¨‹ä¸­åœ¨qä¸­æ”¾å…¥ä¸€ä¸ªæ•°æ®åœ¨çˆ¶è¿›ç¨‹ä¸­å¯ä»¥å–å‡ºæ¥å‘¢ï¼Ÿ å…¶å®åŸå› æ˜¯è¿™æ ·çš„ï¼š<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰å­è¿›ç¨‹å‘qä¸­æ”¾å…¥æ•°æ®çš„æ—¶å€™ï¼Œç”¨pickleåºåˆ—åŒ–å°†æ•°æ®æ”¾åˆ°ä¸€ä¸ªä¸­é—´åœ°æ–¹ï¼ˆç¿»è¯‘ï¼‰ï¼Œç¿»è¯‘åˆæŠŠå­è¿›ç¨‹æ”¾<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€    å…¥çš„æ•°æ®ç”¨pickleååºåˆ—åŒ–ç»™çˆ¶è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹å°±å¯ä»¥è®¿é—®è¿™ä¸ªqäº†ï¼Œè¿™æ ·å°±å®ç°äº†è¿›ç¨‹é—´çš„æ•°æ®é€šä¿¡äº†<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰ åœ¨å¤šçº¿ç¨‹ä¸­ä¸¤ä¸ªçº¿ç¨‹å¯ä»¥ä¿®æ”¹åŒä¸€ä»½æ•°æ®ï¼Œè€ŒQueueä»…ä»…å®ç°äº†è¿›ç¨‹é—´çš„æ•°æ®ä¼ é€’</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Queue</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(qq)</span>:</span>  <span class="comment"># å°†ç¬¦è¿›ç¨‹ä¸­çš„qä¼ é€’è¿‡æ¥å«qq</span></span><br><span class="line">    qq.put([<span class="number">42</span>, <span class="literal">None</span>, <span class="string">'hello'</span>])  <span class="comment"># æ­¤æ—¶å­è¿›ç¨‹å°±å¯ä»¥ä½¿ç”¨ç¬¦è¿›ç¨‹ä¸­çš„q</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    q = Queue()  <span class="comment"># ä½¿ç”¨Queue()åœ¨çˆ¶è¿›ç¨‹ä¸­å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å®ä¾‹q</span></span><br><span class="line">    p = Process(target=f, args=(q,))  <span class="comment"># åœ¨çˆ¶è¿›ç¨‹ä¸­èµ·ä¸€ä¸ªå­è¿›ç¨‹ pï¼Œå°†çˆ¶è¿›ç¨‹åˆšå®šä¹‰çš„qä¼ é€’ç»™å­è¿›ç¨‹p</span></span><br><span class="line">    p.start()</span><br><span class="line">    print(q.get())</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š [42, None, 'hello']</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ã€€ã€€<strong>3. æ³•2:  ä½¿ç”¨ç®¡é“pipeå®ç°ä¸¤ä¸ªè¿›ç¨‹é—´æ•°æ®ä¼ é€’</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>è¯´æ˜ï¼š</strong>å…¶å®pipå®ç°è¿›ç¨‹é—´é€šä¿¡å°±å¥½åƒä¸€æ¡ç”µè¯çº¿ä¸€æ ·ï¼Œä¸€ä¸ªåœ¨ç”µè¯çº¿è¿™å¤´å‘é€ï¼Œä¸€ä¸ªåœ¨ç”µè¯çº¿é‚£å¤´æ¥æ”¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Pipe</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(conn)</span>:</span></span><br><span class="line">    conn.send([<span class="number">42</span>, <span class="literal">None</span>, <span class="string">'hello'</span>])  <span class="comment"># 3 å­è¿›ç¨‹å‘é€æ•°æ®ï¼Œå°±åƒsocketä¸€æ ·</span></span><br><span class="line">    print(<span class="string">"son process recv:"</span>, conn.recv())</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    parent_conn, child_conn = Pipe()</span><br><span class="line">    <span class="comment"># 1 ç”Ÿæˆä¸€ä¸ªç®¡é“å®ä¾‹ï¼Œå®ä¾‹ä¸€ç”Ÿæˆå°±ä¼šç”Ÿæˆä¸¤ä¸ªè¿”å›å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯ç®¡é“è¿™å¤´ï¼Œä¸€ä¸ªæ˜¯ç®¡é“é‚£å¤´</span></span><br><span class="line">    p = Process(target=f, args=(child_conn,))  <span class="comment"># 2 å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹å°†ç®¡é“å…¶ä¸­ä¸€å¤´ä¼ é€’ç»™å­è¿›ç¨‹</span></span><br><span class="line">    p.start()</span><br><span class="line">    print(parent_conn.recv())  <span class="comment"># 4 çˆ¶è¿›ç¨‹æ”¶æ¶ˆæ¯ # prints "[42, None, 'hello']"</span></span><br><span class="line">    parent_conn.send(<span class="string">'i am parent process'</span>)</span><br><span class="line">    p.join()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment"># [42, None, 'hello']</span></span><br><span class="line"><span class="comment"># son process recv: i am parent process</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ã€€ã€€<strong>4.æ³•3:  Managerså®ç°å¾ˆå¤šè¿›ç¨‹é—´æ•°æ®å…±äº«</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<strong>è¯´æ˜:</strong> managerå®è´¨å’ŒQueueä¸€æ ·ï¼Œå¯ç”¨æ˜¯ä¸ªçº¿ç¨‹å…¶å®å°±æ˜¯å°†å­—å…¸æˆ–è€…åˆ—è¡¨copyåä»½</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Manager</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(d, l)</span>:</span></span><br><span class="line">    d[<span class="number">1</span>] = <span class="string">'1'</span>  <span class="comment"># æ˜¯ä¸ªè¿›ç¨‹å¯¹å­—å…¸æ”¾å…¥çš„æ˜¯åŒä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥çœ‹ä¸Šå»æ•ˆæœä¸æ˜æ˜¾</span></span><br><span class="line">    l.append(os.getpid())  <span class="comment"># å°†è¿™æ˜¯ä¸ªè¿›ç¨‹çš„è¿›ç¨‹idæ”¾å…¥åˆ—è¡¨ä¸­</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">with</span> Manager() <span class="keyword">as</span> manager:  <span class="comment"># 1 å°†Manager()èµ‹å€¼ç»™manager</span></span><br><span class="line">        d = manager.dict()  <span class="comment"># 2 å®šä¹‰ä¸€ä¸ªå¯ä»¥åœ¨å¤šä¸ªè¿›ç¨‹é—´å¯ä»¥å…±äº«çš„å­—å…¸</span></span><br><span class="line">        l = manager.list(range(<span class="number">5</span>))  <span class="comment"># 3 å®šä¹‰ä¸€ä¸ªå¯ä»¥åœ¨å¤šä¸ªè¿›ç¨‹é—´å¯ä»¥å…±äº«çš„åˆ—è¡¨ï¼Œé»˜è®¤å†™äº”ä¸ªæ•°æ®</span></span><br><span class="line">        p_list = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):  <span class="comment"># ç”Ÿæˆæ˜¯ä¸ªè¿›ç¨‹</span></span><br><span class="line">            p = Process(target=f, args=(d, l))  <span class="comment"># å°†åˆšåˆšç”Ÿæˆçš„å¯å…±äº«å­—å…¸å’Œåˆ—è¡¨ä¼ é€’ç»™å­è¿›ç¨‹</span></span><br><span class="line">            p.start()</span><br><span class="line">            p_list.append(p)</span><br><span class="line">        <span class="keyword">for</span> res <span class="keyword">in</span> p_list:</span><br><span class="line">            res.join()</span><br><span class="line">        print(d)</span><br><span class="line">        print(l)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>4ã€è¿›ç¨‹ä¹‹é—´éœ€è¦é”çš„åŸå› </strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>è¯´æ˜ï¼š</strong>è™½ç„¶æ¯ä¸ªè¿›ç¨‹æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œä½†æ˜¯ä»–ä»¬å…±äº«åŒä¸€å—å±å¹•ï¼Œå¦‚æœå¤§å®¶éƒ½åœ¨å±å¹•æ‰“æ•°æ®å°±ä¼šæ‰“ä¹±äº†</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, Lock</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(l, i)</span>:</span></span><br><span class="line">    l.acquire()                     <span class="comment">#ä¸€ä¸ªè¿›ç¨‹è¦æ‰“å°æ•°æ®æ—¶å…ˆé”å®š</span></span><br><span class="line">    print(<span class="string">'hello world'</span>, i)</span><br><span class="line">    l.release()                     <span class="comment">#æ‰“å°å®Œæ¯•åå°±é‡Šæ”¾è¿™æŠŠé”</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lock = Lock()                   <span class="comment">#å…ˆç”Ÿæˆä¸€æŠŠé”</span></span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        Process(target=f, args=(lock, num)).start()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment"># hello world 4</span></span><br><span class="line"><span class="comment"># hello world 0</span></span><br><span class="line"><span class="comment"># hello world 2</span></span><br><span class="line"><span class="comment"># hello world 3</span></span><br><span class="line"><span class="comment"># hello world 1</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>5ã€è¿›ç¨‹æ± </strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. è¿›ç¨‹æ± çš„ä½œç”¨å°±æ˜¯é™åˆ¶åŒä¸€æ—¶é—´å¯ä»¥å¯åŠ¨è¿›ç¨‹çš„=æ•°é‡<br>ã€€ã€€ã€€ã€€ã€€ã€€2. è¿›ç¨‹æ± å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè¿›ç¨‹åºåˆ—ï¼Œå½“ä½¿ç”¨æ—¶ï¼Œåˆ™å»è¿›ç¨‹æ± ä¸­è·å–ä¸€ä¸ªè¿›ç¨‹ï¼Œå¦‚æœè¿›ç¨‹æ± åºåˆ—ä¸­æ²¡æœ‰å¯ä¾›ä½¿ç”¨çš„è¿›<br>ã€€ã€€ã€€ã€€ã€€ã€€  ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šç­‰å¾…ï¼Œç›´åˆ°è¿›ç¨‹æ± ä¸­æœ‰å¯ç”¨è¿›ç¨‹ä¸ºæ­¢ã€‚<br>ã€€ã€€ã€€ã€€ã€€ã€€<strong>3. è¿›ç¨‹æ± ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š</strong><br>ã€€ã€€ã€€ã€€ã€€ã€€     1ï¼‰applyï¼š å¤šä¸ªè¿›ç¨‹å¼‚æ­¥æ‰§è¡Œï¼Œä¸€ä¸ªä¸€ä¸ªçš„æ‰§è¡Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€     2ï¼‰apply_asyncï¼š å¤šä¸ªè¿›ç¨‹åŒæ­¥æ‰§è¡Œï¼ŒåŒæ—¶æ‰§è¡Œå¤šä¸ªè¿›ç¨‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span>  multiprocessing <span class="keyword">import</span> Process,Pool</span><br><span class="line"><span class="keyword">import</span> time,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(i)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    print(<span class="string">"in the process"</span>,os.getpid()) <span class="comment">#æ‰“å°å­è¿›ç¨‹çš„pid</span></span><br><span class="line">    <span class="keyword">return</span> i+<span class="number">100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(arg)</span>:</span></span><br><span class="line">    print(<span class="string">'--&gt;exec done:'</span>,arg,os.getpid())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    pool = Pool(<span class="number">3</span>)                      <span class="comment">#è¿›ç¨‹æ± æœ€å¤šå…è®¸5ä¸ªè¿›ç¨‹æ”¾å…¥è¿›ç¨‹æ± </span></span><br><span class="line">    print(<span class="string">"ä¸»è¿›ç¨‹pidï¼š"</span>,os.getpid())     <span class="comment">#æ‰“å°çˆ¶è¿›ç¨‹çš„pid</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        <span class="comment">#ç”¨æ³•1 callbackä½œç”¨æ˜¯æŒ‡å®šåªæœ‰å½“Fooè¿è¡Œç»“æŸåå°±æ‰§è¡Œcallbackè°ƒç”¨çš„å‡½æ•°,çˆ¶è¿›ç¨‹è°ƒç”¨çš„callbackå‡½æ•°</span></span><br><span class="line">        pool.apply_async(func=foo, args=(i,),callback=call)</span><br><span class="line"></span><br><span class="line">        <span class="comment">#ç”¨æ³•2 ä¸²è¡Œ å¯åŠ¨è¿›ç¨‹ä¸åœ¨ç”¨Processè€Œæ˜¯ç›´æ¥ç”¨pool.apply()</span></span><br><span class="line">        <span class="comment"># pool.apply(func=foo, args=(i,))</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">'end'</span>)</span><br><span class="line">    pool.close()    <span class="comment">#å…³é—­pool</span></span><br><span class="line">    pool.join()     <span class="comment">#è¿›ç¨‹æ± ä¸­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†å…³é—­ï¼Œå¦‚æœæ³¨é‡Šï¼Œé‚£ä¹ˆç¨‹åºç›´æ¥å…³é—­ã€‚</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>6ã€åƒµå°¸è¿›ç¨‹</strong></p>
<p>ã€€ã€€ã€€ã€€<strong>1ï¼‰åƒµå°¸è¿›ç¨‹å®šä¹‰</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€1. åƒµå°¸è¿›ç¨‹äº§ç”Ÿçš„åŸå› å°±æ˜¯çˆ¶è¿›ç¨‹äº§ç”Ÿå­è¿›ç¨‹åï¼Œå­è¿›ç¨‹å…ˆäºçˆ¶è¿›ç¨‹é€€å‡º</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€2. ä½†æ˜¯çˆ¶è¿›ç¨‹ç”±äºç§ç§åŸå› ï¼Œå¹¶æ²¡æœ‰å¤„ç†å­è¿›ç¨‹å‘é€çš„é€€å‡ºä¿¡å·ï¼Œé‚£ä¹ˆè¿™ä¸ªå­è¿›ç¨‹å°±ä¼šæˆä¸ºåƒµå°¸è¿›ç¨‹ã€‚</p>
<p>ã€€ã€€ã€€ã€€<strong>2ï¼‰ç”¨pythonå†™ä¸€ä¸ªåƒµå°¸è¿›ç¨‹</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os, sys, time</span><br><span class="line"><span class="comment">#äº§ç”Ÿå­è¿›ç¨‹</span></span><br><span class="line">pid = os.fork()</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> pid == <span class="number">0</span>:</span><br><span class="line">    <span class="comment">#å­è¿›ç¨‹é€€å‡º</span></span><br><span class="line">    sys.exit(<span class="number">0</span>)</span><br><span class="line"><span class="comment">#çˆ¶è¿›ç¨‹ä¼‘æ¯30ç§’</span></span><br><span class="line">time.sleep(<span class="number">30</span>)</span><br><span class="line"><span class="comment"># å…ˆäº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹é€€å‡ºï¼Œçˆ¶è¿›ç¨‹ä¼‘æ¯30ç§’,é‚£å°±ä¼šäº§ç”Ÿä¸€ä¸ªåƒµå°¸è¿›ç¨‹</span></span><br></pre></td></tr></table></figure></div>

<h3 id="äº”ã€åç¨‹-Coroutine"><a href="#äº”ã€åç¨‹-Coroutine" class="headerlink" title="äº”ã€åç¨‹(Coroutine)"></a>äº”ã€åç¨‹(Coroutine)</h3><p>ã€€ã€€<strong>1ã€ä»€ä¹ˆæ˜¯åç¨‹ï¼ˆè¿›å…¥ä¸Šä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€ï¼‰</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. åç¨‹ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ï¼Œåç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. çº¿ç¨‹çš„åˆ‡æ¢ä¼šä¿å­˜åˆ°CPUçš„æ ˆé‡Œï¼Œåç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆ</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€4. <strong>åç¨‹èƒ½ä¿ç•™ä¸Šä¸€æ¬¡è°ƒç”¨æ—¶çš„çŠ¶æ€</strong>ï¼ˆå³æ‰€æœ‰å±€éƒ¨çŠ¶æ€çš„ä¸€ä¸ªç‰¹å®šç»„åˆï¼‰ï¼Œæ¯æ¬¡è¿‡ç¨‹é‡å…¥æ—¶ï¼Œå°±ç›¸å½“äºè¿›å…¥ä¸Šä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€5. <strong>åç¨‹æœ€ä¸»è¦çš„ä½œç”¨æ˜¯åœ¨å•çº¿ç¨‹çš„æ¡ä»¶ä¸‹å®ç°å¹¶å‘çš„æ•ˆæœï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯ä¸²è¡Œçš„</strong>ï¼ˆåƒyieldä¸€æ ·ï¼‰</p>
<p>ã€€ã€€<strong>2ã€åç¨‹çš„å¥½å¤„</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. æ— éœ€çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼ˆå¯ä»¥ç†è§£ä¸ºåç¨‹åˆ‡æ¢å°±æ˜¯åœ¨ä¸åŒå‡½æ•°é—´åˆ‡æ¢ï¼Œä¸ç”¨åƒçº¿ç¨‹é‚£æ ·åˆ‡æ¢ä¸Šä¸‹æ–‡CPUï¼‰</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. ä¸éœ€è¦å¤šçº¿ç¨‹çš„é”æœºåˆ¶ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿä¸å­˜åœ¨åŒæ—¶å†™å˜é‡å†²çª</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. <strong>ç”¨æ³•ï¼š</strong>æœ€ç®€å•çš„æ–¹æ³•æ˜¯å¤šè¿›ç¨‹+åç¨‹ï¼Œæ—¢å……åˆ†åˆ©ç”¨å¤šæ ¸ï¼Œåˆå……åˆ†å‘æŒ¥åç¨‹çš„é«˜æ•ˆç‡ï¼Œå¯è·å¾—æé«˜çš„æ€§èƒ½ã€‚</p>
<p>ã€€ã€€<strong>3ã€åç¨‹ç¼ºç‚¹</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. æ— æ³•åˆ©ç”¨å¤šæ ¸èµ„æºï¼š<strong>åç¨‹çš„æœ¬è´¨æ˜¯ä¸ªå•çº¿ç¨‹,å®ƒä¸èƒ½åŒæ—¶å°† å•ä¸ªCPU çš„å¤šä¸ªæ ¸ç”¨ä¸Š</strong>,åç¨‹éœ€è¦å’Œè¿›ç¨‹é…åˆæ‰èƒ½è¿è¡Œåœ¨å¤šCPUä¸Š</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. <strong>çº¿ç¨‹é˜»å¡ï¼ˆBlockingï¼‰æ“ä½œï¼ˆå¦‚IOæ—¶ï¼‰ä¼šé˜»å¡æ‰æ•´ä¸ªç¨‹åº</strong></p>
<p>ã€€ã€€<strong>4ã€ä½¿ç”¨yieldå®ç°åç¨‹ç›¸åŒæ•ˆæœ</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">"---&gt;starting eating baozi..."</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        new_baozi = <span class="keyword">yield</span>  <span class="comment"># åªè¦é‡åˆ°yieldç¨‹åºå°±è¿”å›ï¼Œyieldè¿˜å¯ä»¥æ¥æ”¶æ•°æ®</span></span><br><span class="line">        print(<span class="string">"[%s] is eating baozi %s"</span> % (name, new_baozi))</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span><span class="params">()</span>:</span></span><br><span class="line">    r = con.__next__()  <span class="comment"># ç›´æ¥è°ƒç”¨æ¶ˆè´¹è€…çš„__next__æ–¹æ³•</span></span><br><span class="line">    r = con2.__next__()  <span class="comment"># å‡½æ•°é‡Œé¢æœ‰yieldç¬¬ä¸€æ¬¡åŠ æ‹¬å·è°ƒç”¨ä¼šå˜æˆä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ä¸æ‰§è¡Œï¼Œè¿è¡Œnextæ‰æ‰§è¡Œ</span></span><br><span class="line">    n = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n &lt; <span class="number">5</span>:</span><br><span class="line">        n += <span class="number">1</span></span><br><span class="line">        con.send(n)  <span class="comment"># sendæ¢å¤ç”Ÿæˆå™¨åŒæ—¶å¹¶ä¼ é€’ä¸€ä¸ªå€¼ç»™yield</span></span><br><span class="line">        con2.send(n)</span><br><span class="line">        print(<span class="string">"\033[32;1m[producer]\033[0m is making baozi %s"</span> % n)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    con = consumer(<span class="string">"c1"</span>)</span><br><span class="line">    con2 = consumer(<span class="string">"c2"</span>)</span><br><span class="line">    p = producer()</span><br></pre></td></tr></table></figure></div>

<p><strong>5ã€åç¨‹ä¸ºä½•èƒ½å¤„ç†å¤§å¹¶å‘1ï¼šGreenleté‡åˆ°I/Oæ‰‹åŠ¨åˆ‡æ¢</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. åç¨‹ä¹‹æ‰€ä»¥å¿«æ˜¯å› ä¸ºé‡åˆ°I/Oæ“ä½œå°±åˆ‡æ¢ï¼ˆæœ€ååªæœ‰CPUè¿ç®—ï¼‰</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. è¿™é‡Œå…ˆæ¼”ç¤ºç”¨greenletå®ç°æ‰‹åŠ¨çš„å¯¹å„ä¸ªåç¨‹ä¹‹é—´åˆ‡æ¢</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. å…¶å®Geventæ¨¡å—ä»…ä»…æ˜¯å¯¹greenletçš„å†å°è£…ï¼Œå°†I/Oé—´çš„æ‰‹åŠ¨åˆ‡æ¢å˜æˆè‡ªåŠ¨åˆ‡æ¢</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="number">12</span>)       <span class="comment">#4 gr1ä¼šè°ƒç”¨test1()å…ˆæ‰“å°12</span></span><br><span class="line">    gr2.switch()    <span class="comment">#5 ç„¶ågr2.switch()å°±ä¼šåˆ‡æ¢åˆ°gr2è¿™ä¸ªåç¨‹</span></span><br><span class="line">    print(<span class="number">34</span>)       <span class="comment">#8 ç”±äºåœ¨test2()åˆ‡æ¢åˆ°äº†gr1ï¼Œæ‰€ä»¥gr1åˆä»ä¸Šæ¬¡åœæ­¢çš„ä½ç½®å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">    gr2.switch()    <span class="comment">#9 åœ¨è¿™é‡Œåˆåˆ‡æ¢åˆ°gr2ï¼Œä¼šå†æ¬¡åˆ‡æ¢åˆ°test2()ä¸­æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="number">56</span>)       <span class="comment">#6 å¯åŠ¨gr2åä¼šè°ƒç”¨test2()æ‰“å°56</span></span><br><span class="line">    gr1.switch()    <span class="comment">#7 ç„¶ååˆåˆ‡æ¢åˆ°gr1</span></span><br><span class="line">    print(<span class="number">78</span>)       <span class="comment">#10 åˆ‡æ¢åˆ°gr2åä¼šæ¥ç€ä¸Šæ¬¡æ‰§è¡Œï¼Œæ‰“å°78</span></span><br><span class="line"></span><br><span class="line">gr1 = greenlet(test1)    <span class="comment">#1 å¯åŠ¨ä¸€ä¸ªåç¨‹gr1</span></span><br><span class="line">gr2 = greenlet(test2)    <span class="comment">#2 å¯åŠ¨ç¬¬äºŒä¸ªåç¨‹gr2</span></span><br><span class="line">gr1.switch()             <span class="comment">#3 é¦–å…ˆgr1.switch() å°±ä¼šå»æ‰§è¡Œgr1è¿™ä¸ªåç¨‹</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>6ã€åç¨‹ä¸ºä½•èƒ½å¤„ç†å¤§å¹¶å‘2ï¼šGeventé‡åˆ°I/Oè‡ªåŠ¨åˆ‡æ¢</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. Gevent æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥è½»æ¾é€šè¿‡geventå®ç°å¹¶å‘åŒæ­¥æˆ–å¼‚æ­¥ç¼–ç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. åœ¨geventä¸­ç”¨åˆ°çš„ä¸»è¦æ¨¡å¼æ˜¯<strong>Greenlet</strong>, å®ƒæ˜¯ä»¥Cæ‰©å±•æ¨¡å—å½¢å¼æ¥å…¥Pythonçš„è½»é‡çº§åç¨‹</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. Greenletå…¨éƒ¨è¿è¡Œåœ¨ä¸»ç¨‹åºæ“ä½œç³»ç»Ÿè¿›ç¨‹çš„å†…éƒ¨ï¼Œä½†å®ƒä»¬è¢«åä½œå¼åœ°è°ƒåº¦ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€4. GeventåŸç†æ˜¯åªè¦é‡åˆ°I/Oæ“ä½œå°±ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªåç¨‹</p>
<p>ã€€ã€€<strong>7ã€Geventå®ç°ç®€å•çš„è‡ªåŠ¨åˆ‡æ¢å°ä¾‹å­</strong></p>
<p>ã€€ã€€ã€€ã€€<strong>æ³¨</strong>ï¼š<em>åœ¨Geventæ¨¡ä»¿I/Oåˆ‡æ¢çš„æ—¶å€™ï¼Œåªè¦é‡åˆ°I/Oå°±ä¼šåˆ‡æ¢ï¼Œå“ªæ€•gevent.sleep(0)ä¹Ÿè¦åˆ‡æ¢ä¸€æ¬¡</em></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'\033[31;1mç¬¬ä¸€æ¬¡æ‰“å°\033[0m'</span>)</span><br><span class="line">    gevent.sleep(<span class="number">2</span>)          <span class="comment"># ä¸ºä»€ä¹ˆç”¨gevent.sleep()è€Œä¸æ˜¯time.sleep()å› ä¸ºæ˜¯ä¸ºäº†æ¨¡ä»¿I/O</span></span><br><span class="line">    print(<span class="string">'\033[31;1mç¬¬å…­æ¬¡æ‰“å°\033[0m'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'\033[32;1mç¬¬äºŒæ¬¡æ‰“å°\033[0m'</span>)</span><br><span class="line">    gevent.sleep(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\033[32;1mç¬¬å››æ¬¡æ‰“å°\033[0m'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func3</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'\033[32;1mç¬¬ä¸‰æ¬¡æ‰“å°\033[0m'</span>)</span><br><span class="line">    gevent.sleep(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'\033[32;1mç¬¬äº”æ¬¡æ‰“å°\033[0m'</span>)</span><br><span class="line"></span><br><span class="line">gevent.joinall([            <span class="comment"># å°†è¦å¯åŠ¨çš„å¤šä¸ªåç¨‹æ”¾åˆ°event.joinallçš„åˆ—è¡¨ä¸­ï¼Œå³å¯å®ç°è‡ªåŠ¨åˆ‡æ¢</span></span><br><span class="line">    gevent.spawn(func1),    <span class="comment"># gevent.spawn(func1)å¯åŠ¨è¿™ä¸ªåç¨‹</span></span><br><span class="line">    gevent.spawn(func2),</span><br><span class="line">    gevent.spawn(func3),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€æ¬¡æ‰“å°</span></span><br><span class="line"><span class="comment"># ç¬¬äºŒæ¬¡æ‰“å°</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰æ¬¡æ‰“å°</span></span><br><span class="line"><span class="comment"># ç¬¬å››æ¬¡æ‰“å°</span></span><br><span class="line"><span class="comment"># ç¬¬äº”æ¬¡æ‰“å°</span></span><br><span class="line"><span class="comment"># ç¬¬å…­æ¬¡æ‰“å°</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>8ã€ä½¿ç”¨Geventå®ç°å¹¶å‘ä¸‹è½½ç½‘é¡µä¸ä¸²è¡Œä¸‹è½½ç½‘é¡µæ—¶é—´æ¯”è¾ƒ</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">import</span> gevent,time</span><br><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line">monkey.patch_all()      <span class="comment">#æŠŠå½“å‰ç¨‹åºæ‰€æœ‰çš„I/Oæ“ä½œç»™æˆ‘å•ç‹¬åšä¸Šæ ‡è®°</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(url)</span>:</span></span><br><span class="line">    print(<span class="string">'GET: %s'</span> % url)</span><br><span class="line">    resp = request.urlopen(url)</span><br><span class="line">    data = resp.read()</span><br><span class="line">    print(<span class="string">'%d bytes received from %s.'</span> % (len(data), url))</span><br><span class="line"></span><br><span class="line"><span class="comment">#1 å¹¶å‘æ‰§è¡Œéƒ¨åˆ†</span></span><br><span class="line">time_binxing = time.time()</span><br><span class="line">gevent.joinall([</span><br><span class="line">        gevent.spawn(f, <span class="string">'https://www.python.org/'</span>),</span><br><span class="line">        gevent.spawn(f, <span class="string">'https://www.yahoo.com/'</span>),</span><br><span class="line">        gevent.spawn(f, <span class="string">'https://github.com/'</span>),</span><br><span class="line">])</span><br><span class="line">print(<span class="string">"å¹¶è¡Œæ—¶é—´ï¼š"</span>,time.time()-time_binxing)</span><br><span class="line"></span><br><span class="line"><span class="comment">#2 ä¸²è¡Œéƒ¨åˆ†</span></span><br><span class="line">time_chuanxing = time.time()</span><br><span class="line">urls = [</span><br><span class="line">        <span class="string">'https://www.python.org/'</span>,</span><br><span class="line">        <span class="string">'https://www.yahoo.com/'</span>,</span><br><span class="line">        <span class="string">'https://github.com/'</span>,</span><br><span class="line">                                        ]</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    f(url)</span><br><span class="line">print(<span class="string">"ä¸²è¡Œæ—¶é—´ï¼š"</span>,time.time()-time_chuanxing)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šä¸ºä»€ä¹ˆè¦åœ¨æ–‡ä»¶å¼€é€šä½¿ç”¨monkey.patch_all()</span></span><br><span class="line"><span class="comment"># 1. å› ä¸ºæœ‰å¾ˆå¤šæ¨¡å—åœ¨ä½¿ç”¨I / Oæ“ä½œæ—¶Geventæ˜¯æ— æ³•æ•è·çš„ï¼Œæ‰€ä»¥ä¸ºäº†ä½¿Geventèƒ½å¤Ÿè¯†åˆ«å‡ºç¨‹åºä¸­çš„I / Oæ“ä½œã€‚</span></span><br><span class="line"><span class="comment"># 2. å°±å¿…é¡»ä½¿ç”¨Geventæ¨¡å—çš„monkeyæ¨¡å—ï¼ŒæŠŠå½“å‰ç¨‹åºæ‰€æœ‰çš„I / Oæ“ä½œç»™æˆ‘å•ç‹¬åšä¸Šæ ‡è®°</span></span><br><span class="line"><span class="comment"># 3.ä½¿ç”¨monkeyåšæ ‡è®°ä»…ç”¨ä¸¤æ­¥å³å¯ï¼š</span></span><br><span class="line">      ç¬¬ä¸€æ­¥(å¯¼å…¥monkeyæ¨¡å—)ï¼š  <span class="keyword">from</span> gevent <span class="keyword">import</span> monkey</span><br><span class="line">      ç¬¬äºŒæ­¥(å£°æ˜åšæ ‡è®°)    ï¼š   monkey.patch_all()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ã€€ã€€<strong>è¯´æ˜ï¼š</strong>monkey.patch_all()çŒ´å­è¡¥ä¸ä½œç”¨</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1ï¼‰ç”¨è¿‡geventå°±ä¼šçŸ¥é“,ä¼šåœ¨æœ€å¼€å¤´çš„åœ°æ–¹gevent.monkey.patch_all();<br>ã€€ã€€ã€€ã€€ã€€ã€€2ï¼‰ä½œç”¨æ˜¯æŠŠæ ‡å‡†åº“ä¸­çš„thread/socketç­‰ç»™æ›¿æ¢æ‰.è¿™æ ·æˆ‘ä»¬åœ¨åé¢ä½¿ç”¨socketçš„æ—¶å€™å¯ä»¥è·Ÿå¹³å¸¸ä¸€æ ·ä½¿ç”¨,æ— éœ€ä¿®æ”¹ä»»ä½•ä»£ç ,ä½†æ˜¯å®ƒå˜æˆéé˜»å¡çš„äº†.</p>
<p>ã€€ã€€<strong>9ã€é€šè¿‡geventè‡ªå·±å®ç°å•çº¿ç¨‹ä¸‹çš„å¤šsocketå¹¶å‘</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> socket,monkey     <span class="comment">#ä¸‹é¢ä½¿ç”¨çš„socketæ˜¯Geventçš„socketï¼Œå®é™…æµ‹è¯•monkeyæ²¡ç”¨</span></span><br><span class="line"><span class="comment"># monkey.patch_all()</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">server</span><span class="params">(port)</span>:</span></span><br><span class="line">    s = socket.socket()</span><br><span class="line">    s.bind((<span class="string">'0.0.0.0'</span>,port))</span><br><span class="line">    s.listen(<span class="number">5</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        cli,addr = s.accept()</span><br><span class="line">        gevent.spawn(handle_request,cli)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_request</span><span class="params">(conn)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">            print(<span class="string">'recv:'</span>,data)</span><br><span class="line">            conn.send(data)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                conn.shutdown(socket.SHUT_WR)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(e)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    server(<span class="number">8001</span>)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">HOST = <span class="string">'localhost'</span>    <span class="comment"># The remote host</span></span><br><span class="line">PORT = <span class="number">8001</span>           <span class="comment"># The same port as used by the server</span></span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">s.connect((HOST, PORT))</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg = bytes(input(<span class="string">"&gt;&gt;:"</span>),encoding=<span class="string">"utf8"</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> len(msg) == <span class="number">0</span>:<span class="keyword">continue</span></span><br><span class="line">    s.sendall(msg)</span><br><span class="line">    data = s.recv(<span class="number">1024</span>)</span><br><span class="line">    print(<span class="string">'Received'</span>, repr(data))</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></div>

<p><strong>10ã€åç¨‹æœ¬è´¨åŸç†</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. åç¨‹1é€šè¿‡oså»è¯»ä¸€ä¸ªfileï¼Œè¿™ä¸ªæ—¶å€™å°±æ˜¯ä¸€ä¸ªioæ“ä½œï¼Œåœ¨è°ƒç”¨osçš„æ¥å£å‰ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªåˆ—è¡¨</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. åç¨‹1çš„è¿™ä¸ªæ“ä½œå°±ä¼šè¢«æ³¨å†Œåˆ°è¿™ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åå°±åˆ‡æ¢åˆ°å…¶ä»–åç¨‹å»å¤„ç†ï¼›</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. ç­‰å¾…osæ‹¿åˆ°è¦è¯»fileåï¼Œä¹Ÿä¼šæŠŠè¿™ä¸ªæ–‡ä»¶å¥æŸ„æ”¾åœ¨è¿™ä¸ªåˆ—è¡¨ä¸­</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€4. ç„¶åç­‰å¾…åœ¨åˆ‡æ¢åˆ°åç¨‹1çš„æ—¶å€™ï¼Œåç¨‹1å°±å¯ä»¥ç›´æ¥ä»åˆ—è¡¨ä¸­æ‹¿åˆ°æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸é˜»å¡äº†</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€5. epollè¿”å›ç»™åç¨‹çš„ä»»åŠ¡åˆ—è¡¨åœ¨å†…æ ¸æ€ï¼Œåç¨‹åœ¨ç”¨æˆ·æ€ï¼Œç”¨æˆ·æ€åç¨‹æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®å†…æ ¸æ€çš„ä»»åŠ¡åˆ—è¡¨çš„ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€  æ‰€ä»¥éœ€è¦æ‹·è´æ•´ä¸ªå†…æ ¸æ€çš„ä»»åŠ¡åˆ—è¡¨åˆ°ç”¨æˆ·æ€ï¼Œä¾›åç¨‹å»è®¿é—®å’ŒæŸ¥è¯¢</p>
<p>ã€€ã€€<strong>11ã€epollå¤„ç† I/O è¯·æ±‚åŸç†</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€1. epoll() ä¸­å†…æ ¸åˆ™ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œepoll_wait ç›´æ¥æ£€æŸ¥é“¾è¡¨æ˜¯ä¸æ˜¯ç©ºå°±çŸ¥é“æ˜¯å¦æœ‰æ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å¥½äº†ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€2. åœ¨å†…æ ¸å®ç°ä¸­ epoll æ˜¯æ ¹æ®æ¯ä¸ª sockfd ä¸Šé¢çš„ä¸è®¾å¤‡é©±åŠ¨ç¨‹åºå»ºç«‹èµ·æ¥çš„å›è°ƒå‡½æ•°å®ç°çš„ã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€3. æŸä¸ª sockfd ä¸Šçš„äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¸å®ƒå¯¹åº”çš„å›è°ƒå‡½æ•°å°±ä¼šè¢«è°ƒç”¨ï¼Œæ¥æŠŠè¿™ä¸ª sockfd åŠ å…¥é“¾è¡¨ï¼Œå…¶ä»–å¤„äºâ€œç©ºé—²çš„â€çŠ¶æ€çš„åˆ™ä¸ä¼šã€‚</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€4. epollä¸Šé¢é“¾è¡¨ä¸­è·å–æ–‡ä»¶æè¿°ï¼Œè¿™é‡Œä½¿ç”¨å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰æŠ€æœ¯ï¼Œ é¿å…äº†å¤åˆ¶å¤§é‡æ–‡ä»¶æè¿°ç¬¦å¸¦æ¥çš„å¼€é”€</p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<strong>å†…å­˜æ˜ å°„ï¼ˆmmapï¼‰</strong>ï¼šå†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€ä¸ªæ–‡ä»¶åˆ°ä¸€å—å†…å­˜çš„æ˜ å°„ï¼Œå°†ä¸å¿…å†å¯¹æ–‡ä»¶æ‰§è¡Œ<a href="https://baike.baidu.com/item/I%2FOæ“ä½œ/469761" target="_blank" rel="noopener">I/Oæ“ä½œ</a></p>
<p>ã€€ã€€<strong>12ã€selectå¤„ç†åç¨‹</strong></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<em>1. æ‹·è´æ‰€æœ‰çš„æ–‡ä»¶æè¿°ç¬¦ç»™åç¨‹ï¼Œä¸è®ºè¿™äº›ä»»åŠ¡çš„æ˜¯å¦å°±ç»ªï¼Œéƒ½ä¼šè¢«è¿”å›</em></p>
<p>ã€€ã€€ã€€ã€€ã€€ã€€<em>2. é‚£ä¹ˆåç¨‹å°±åªèƒ½forå¾ªç¯å»æŸ¥æ‰¾è‡ªå·±çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯ä»»åŠ¡åˆ—è¡¨ï¼Œselectçš„å…¼å®¹æ€§éå¸¸å¥½ï¼Œæ”¯æŒlinuxå’Œwindows</em></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>è¿›ç¨‹</tag>
        <tag>çº¿ç¨‹</tag>
        <tag>åç¨‹</tag>
        <tag>GILé”</tag>
      </tags>
  </entry>
  <entry>
    <title>Echartsè¶‹åŠ¿å›¾</title>
    <url>/blog/Vue/Vue_id_14.html</url>
    <content><![CDATA[<p><strong>åœ¨vueä¸­è®©æ•°æ®ä»¥ä¸€ä¸ªè¶‹åŠ¿å±•ç¤ºï¼Œè®©æˆ‘ä»¬å¯¹æ•°æ®å¯ä»¥ä¸€ç›®äº†ç„¶</strong></p>
<p>ä½¿ç”¨å·¥å…·ï¼šEcharts</p>
<p>å®˜ç½‘ï¼šç‚¹å‡»<a href="https://echarts.apache.org/" target="_blank" rel="noopener">Echartså®˜ç½‘</a>è·³è½¬</p>
<a id="more"></a>
<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">npm install echarts --save</span><br></pre></td></tr></table></figure></div>

<h4 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">åœ¨vueä¸­å¯¼å…¥Echarts</span><br><span class="line"><span class="comment">// å¯¼å…¥æ›²çº¿å›¾åŒ…</span></span><br><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">'echarts'</span></span><br></pre></td></tr></table></figure></div>

<h4 id="ä½¿ç”¨â€”-ç®€å•Demo"><a href="#ä½¿ç”¨â€”-ç®€å•Demo" class="headerlink" title="ä½¿ç”¨â€”-ç®€å•Demo"></a>ä½¿ç”¨â€”-ç®€å•Demo</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºEchartså‡½æ•°</span></span><br><span class="line"><span class="comment">// æ¥æ”¶åŠ¨æ€å‚æ•°</span></span><br><span class="line">Options(time, temp) &#123;</span><br><span class="line">        <span class="comment">// åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹</span></span><br><span class="line">        <span class="keyword">var</span> myChart = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">'main'</span>));</span><br><span class="line">        <span class="comment">// ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚</span></span><br><span class="line">        <span class="keyword">let</span> option = &#123;</span><br><span class="line">            title: &#123;</span><br><span class="line">                text: <span class="string">'æ¸©åº¦è¶‹åŠ¿'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            tooltip: &#123;</span><br><span class="line">                trigger: <span class="string">'axis'</span></span><br><span class="line">            &#125;,</span><br><span class="line">            grid: &#123;</span><br><span class="line">                left: <span class="string">'3%'</span>,</span><br><span class="line">                right: <span class="string">'4%'</span>,</span><br><span class="line">                bottom: <span class="string">'3%'</span>,</span><br><span class="line">                containLabel: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            toolbox: &#123;</span><br><span class="line">                feature: &#123;</span><br><span class="line">                    saveAsImage: &#123;&#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            xAxis: &#123;</span><br><span class="line">                type: <span class="string">'category'</span>,</span><br><span class="line">                boundaryGap: <span class="literal">false</span>,</span><br><span class="line">                data: time,</span><br><span class="line">            &#125;,</span><br><span class="line">            yAxis: &#123;</span><br><span class="line">                type: <span class="string">'value'</span>,</span><br><span class="line">                name: <span class="string">'â„ƒ'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            series: [</span><br><span class="line">                &#123;</span><br><span class="line">                    name: <span class="string">'æ¸©åº¦'</span>,</span><br><span class="line">                    type: <span class="string">'line'</span>,</span><br><span class="line">                    data: temp,</span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;</span><br><span class="line">    myChart.setOption(option);</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">// åœ¨è·å–å¾—åˆ°å‚æ•°çš„åŒæ—¶ï¼Œè°ƒç”¨Echartså‡½æ•°</span></span><br><span class="line">    <span class="comment">// è¯·æ±‚æ¸©åº¦</span></span><br><span class="line">    RequestTemp() &#123;</span><br><span class="line">        <span class="keyword">let</span> params = &#123; <span class="attr">oid</span>: <span class="keyword">this</span>.oid &#125;</span><br><span class="line">        request_temp_get(params).then(<span class="function"><span class="params">resp</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (resp.code === <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; resp.templist.length; i++) &#123;</span><br><span class="line">                    resp.templist[i].create_time = moment(resp.templist[i].create_time).format(<span class="string">'YYYY-MM-DD HH:mm:ss'</span>)</span><br><span class="line">                    <span class="keyword">this</span>.orderID = resp.templist[i].oid</span><br><span class="line">                    <span class="comment">// å°†æ—¶é—´æ·»åŠ åˆ°ç©ºåˆ—è¡¨ä¸­</span></span><br><span class="line">                    <span class="keyword">this</span>.timedata.push(resp.templist[i].create_time)</span><br><span class="line">                    <span class="comment">// å°†æ¸©åº¦æ·»åŠ åˆ°ç©ºåˆ—è¡¨ä¸­</span></span><br><span class="line">                    <span class="keyword">this</span>.tempdata.push(resp.templist[i].tempera)</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>.TemperLog = resp.templist</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">console</span>.log(resp.templist)</span><br><span class="line">            <span class="comment">// ä¼ é€’å‚æ•°ç»™æŠ˜çº¿å›¾ï¼Œå¹¶è°ƒç”¨æŠ˜çº¿å›¾å‡½æ•°</span></span><br><span class="line">            <span class="keyword">let</span> time = <span class="keyword">this</span>.timedata</span><br><span class="line">            <span class="keyword">let</span> temp = <span class="keyword">this</span>.tempdata</span><br><span class="line">            <span class="keyword">let</span> id = <span class="string">'main'</span></span><br><span class="line">            <span class="comment">// è°ƒç”¨Echartså‡½æ•°ï¼Œå°†åŠ¨æ€æ•°æ®ä¼ è¿‡å»</span></span><br><span class="line">            <span class="keyword">this</span>.Options(time, temp);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure></div>

<h4 id="æ¨ªåæ ‡åŠ¨æ€æ•°æ®ç»“æ„"><a href="#æ¨ªåæ ‡åŠ¨æ€æ•°æ®ç»“æ„" class="headerlink" title="æ¨ªåæ ‡åŠ¨æ€æ•°æ®ç»“æ„"></a>æ¨ªåæ ‡åŠ¨æ€æ•°æ®ç»“æ„</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">    type: <span class="string">'category'</span>,</span><br><span class="line">    boundaryGap: <span class="literal">false</span>,</span><br><span class="line">    data: time, </span><br><span class="line">&#125;,</span><br><span class="line">data: [<span class="string">"è¡¬è¡«"</span>,<span class="string">"ç¾Šæ¯›è¡«"</span>,<span class="string">"é›ªçººè¡«"</span>,<span class="string">"è£¤å­"</span>,<span class="string">"é«˜è·Ÿé‹"</span>,<span class="string">"è¢œå­"</span>]   	<span class="comment">// åˆ—è¡¨</span></span><br></pre></td></tr></table></figure></div>

<h4 id="çºµåæ ‡åŠ¨æ€æ•°æ®ç»“æ„"><a href="#çºµåæ ‡åŠ¨æ€æ•°æ®ç»“æ„" class="headerlink" title="çºµåæ ‡åŠ¨æ€æ•°æ®ç»“æ„"></a>çºµåæ ‡åŠ¨æ€æ•°æ®ç»“æ„</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">series: [</span><br><span class="line">        &#123;</span><br><span class="line">                name: <span class="string">'æ¸©åº¦'</span>,</span><br><span class="line">                type: <span class="string">'line'</span>,</span><br><span class="line">                data: temp,</span><br><span class="line">        &#125;,</span><br><span class="line">],</span><br><span class="line">data: [<span class="number">5</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">20</span>]  	<span class="comment">// åˆ—è¡¨</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Echarts</tag>
      </tags>
  </entry>
  <entry>
    <title>v-chartsè¶‹åŠ¿å›¾</title>
    <url>/blog/Vue/Vue_id_15.html</url>
    <content><![CDATA[<p><strong>åœ¨vueä¸­è®©æ•°æ®ä»¥ä¸€ä¸ªæŠ˜çº¿å±•ç¤ºï¼Œè®©æˆ‘ä»¬å¯¹æ•°æ®å¯ä»¥ä¸€ç›®äº†ç„¶</strong></p>
<p>ä½¿ç”¨å·¥å…·ï¼šv-charts</p>
<p>å®˜ç½‘ï¼šç‚¹å‡»<a href="https://v-charts.js.org/" target="_blank" rel="noopener">v-chartså®˜ç½‘</a>è·³è½¬</p>
<a id="more"></a>
<h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">npm install v-charts echarts --save</span><br></pre></td></tr></table></figure></div>

<h4 id="main-jsä¸­å®Œæ•´å¼•å…¥"><a href="#main-jsä¸­å®Œæ•´å¼•å…¥" class="headerlink" title="main.jsä¸­å®Œæ•´å¼•å…¥"></a>main.jsä¸­å®Œæ•´å¼•å…¥</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">åœ¨vueä¸­å¯¼å…¥Echarts</span><br><span class="line"><span class="comment">// å¯¼å…¥æ›²çº¿å›¾åŒ…</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VCharts <span class="keyword">from</span> <span class="string">'v-charts'</span></span><br><span class="line">Vue.use(VCharts)</span><br></pre></td></tr></table></figure></div>

<h4 id="ä½¿ç”¨â€”-è®¾ç½®å‚æ•°"><a href="#ä½¿ç”¨â€”-è®¾ç½®å‚æ•°" class="headerlink" title="ä½¿ç”¨â€”-è®¾ç½®å‚æ•°"></a>ä½¿ç”¨â€”-è®¾ç½®å‚æ•°</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºEchartså‡½æ•°</span></span><br><span class="line"><span class="comment">// æ¥æ”¶åŠ¨æ€å‚æ•°</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        chartData: &#123;</span><br><span class="line">            <span class="comment">// æ›²çº¿æ ‡é¢˜</span></span><br><span class="line">          columns: [<span class="string">'æ—¥æœŸ'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>, <span class="string">'ä¸‹å•ç‡'</span>],</span><br><span class="line">          rows: [</span><br><span class="line">            &#123; <span class="string">'æ—¥æœŸ'</span>: <span class="string">'1/1'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>: <span class="number">1393</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>: <span class="number">1093</span>, <span class="string">'ä¸‹å•ç‡'</span>: <span class="number">0.32</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'æ—¥æœŸ'</span>: <span class="string">'1/2'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>: <span class="number">3530</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>: <span class="number">3230</span>, <span class="string">'ä¸‹å•ç‡'</span>: <span class="number">0.26</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'æ—¥æœŸ'</span>: <span class="string">'1/3'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>: <span class="number">2923</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>: <span class="number">2623</span>, <span class="string">'ä¸‹å•ç‡'</span>: <span class="number">0.76</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'æ—¥æœŸ'</span>: <span class="string">'1/4'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>: <span class="number">1723</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>: <span class="number">1423</span>, <span class="string">'ä¸‹å•ç‡'</span>: <span class="number">0.49</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'æ—¥æœŸ'</span>: <span class="string">'1/5'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>: <span class="number">3792</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>: <span class="number">3492</span>, <span class="string">'ä¸‹å•ç‡'</span>: <span class="number">0.323</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'æ—¥æœŸ'</span>: <span class="string">'1/6'</span>, <span class="string">'è®¿é—®ç”¨æˆ·'</span>: <span class="number">4593</span>, <span class="string">'ä¸‹å•ç”¨æˆ·'</span>: <span class="number">4293</span>, <span class="string">'ä¸‹å•ç‡'</span>: <span class="number">0.78</span> &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æ¨¡ç‰ˆå¼•å…¥"><a href="#æ¨¡ç‰ˆå¼•å…¥" class="headerlink" title="æ¨¡ç‰ˆå¼•å…¥"></a>æ¨¡ç‰ˆå¼•å…¥</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  	&lt;ve-line :data&#x3D;&quot;chartData&quot;&gt;&lt;&#x2F;ve-line&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure></div>

<h4 id="ä½¿ç”¨åŠ¨æ€æ•°æ®"><a href="#ä½¿ç”¨åŠ¨æ€æ•°æ®" class="headerlink" title="ä½¿ç”¨åŠ¨æ€æ•°æ®"></a>ä½¿ç”¨åŠ¨æ€æ•°æ®</h4><p>ã€€ã€€å¦‚æœæƒ³å¯¼å…¥å‚æ•°ï¼Œå®ç°åŠ¨æ€åŠ è½½ï¼Œåˆ™éœ€å°†rowsè®¾ç½®æˆç©ºåˆ—è¡¨ï¼Œå½“è·å–åˆ°å‚æ•°åï¼Œç›´æ¥ç»™rowsèµ‹å€¼å³å¯å®ç°åŠ¨æ€æ•°æ®åŠ è½½</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>v-charts</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå®ç°Excelæ–‡ä»¶ä¸‹è½½</title>
    <url>/blog/Vue/Vue_id_16.html</url>
    <content><![CDATA[<p>åœ¨vueä¸­å®ç°æ•°æ®ä¸‹è½½ï¼Œä¿å­˜ä¸ºExcelæ–‡ä»¶</p>
<a id="more"></a>

<h4 id="å®‰è£…ä¾èµ–æ’ä»¶"><a href="#å®‰è£…ä¾èµ–æ’ä»¶" class="headerlink" title="å®‰è£…ä¾èµ–æ’ä»¶"></a>å®‰è£…ä¾èµ–æ’ä»¶</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">npm install -S file-saver</span><br><span class="line">npm install -S xlsx</span><br><span class="line">npm install -D script-loader</span><br></pre></td></tr></table></figure></div>

<h4 id="å¯¼å…¥jsæ–‡ä»¶"><a href="#å¯¼å…¥jsæ–‡ä»¶" class="headerlink" title="å¯¼å…¥jsæ–‡ä»¶"></a>å¯¼å…¥jsæ–‡ä»¶</h4><p>ã€€ã€€<strong>åœ¨srcç›®å½•ä¸­åˆ›å»ºlibæ–‡ä»¶å¤¹(æ–‡ä»¶å¤¹åå­—å¯ä»¥è‡ªå·±è®¾ç½®)ï¼Œå¯¼å…¥ä»¥ä¸‹jsæ–‡ä»¶</strong><br>ã€€ã€€æ³¨æ„ï¼šè¿™ä¸¤ä¸ªjsæ–‡ä»¶éœ€æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¦åˆ™åœ¨Export2Excel.jsæ–‡ä»¶ä¸­å¯¼å…¥Blob.jsä¼šå‡ºç°æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œå¯¼è‡´é…ç½®å¤±è´¥ã€å½“ç„¶ã€ä¹Ÿå¯ä¿®æ”¹å¯¼å…¥è·¯å¾„</p>
<p><strong>Blob.js:</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="comment">/* Blob.js</span></span><br><span class="line"><span class="comment"> * A Blob implementation.</span></span><br><span class="line"><span class="comment"> * 2014-05-27</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * By Eli Grey, http://eligrey.com</span></span><br><span class="line"><span class="comment"> * By Devin Samarin, https://github.com/eboyjr</span></span><br><span class="line"><span class="comment"> * License: X11/MIT</span></span><br><span class="line"><span class="comment"> *   See LICENSE.md</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*global self, unescape */</span></span><br><span class="line"><span class="comment">/*jslint bitwise: true, regexp: true, confusion: true, es5: true, vars: true, white: true,</span></span><br><span class="line"><span class="comment"> plusplus: true */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">view</span>) </span>&#123;</span><br><span class="line"><span class="meta">    "use strict"</span>;</span><br><span class="line"></span><br><span class="line">    view.URL = view.URL || view.webkitURL;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (view.Blob &amp;&amp; view.URL) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">new</span> Blob;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Internally we use a BlobBuilder implementation to base Blob off of</span></span><br><span class="line">    <span class="comment">// in order to support older browsers that only have BlobBuilder</span></span><br><span class="line">    <span class="keyword">var</span> BlobBuilder = view.BlobBuilder || view.WebKitBlobBuilder || view.MozBlobBuilder || (<span class="function"><span class="keyword">function</span>(<span class="params">view</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span></span><br><span class="line">                get_class = <span class="function"><span class="keyword">function</span>(<span class="params">object</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(object).match(<span class="regexp">/^\[object\s(.*)\]$/</span>)[<span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                , FakeBlobBuilder = <span class="function"><span class="keyword">function</span> <span class="title">BlobBuilder</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">this</span>.data = [];</span><br><span class="line">                &#125;</span><br><span class="line">                , FakeBlob = <span class="function"><span class="keyword">function</span> <span class="title">Blob</span>(<span class="params">data, type, encoding</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">this</span>.data = data;</span><br><span class="line">                    <span class="keyword">this</span>.size = data.length;</span><br><span class="line">                    <span class="keyword">this</span>.type = type;</span><br><span class="line">                    <span class="keyword">this</span>.encoding = encoding;</span><br><span class="line">                &#125;</span><br><span class="line">                , FBB_proto = FakeBlobBuilder.prototype</span><br><span class="line">                , FB_proto = FakeBlob.prototype</span><br><span class="line">                , FileReaderSync = view.FileReaderSync</span><br><span class="line">                , FileException = <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">this</span>.code = <span class="keyword">this</span>[<span class="keyword">this</span>.name = type];</span><br><span class="line">                &#125;</span><br><span class="line">                , file_ex_codes = (</span><br><span class="line">                    <span class="string">"NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR "</span></span><br><span class="line">                    + <span class="string">"NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR"</span></span><br><span class="line">                ).split(<span class="string">" "</span>)</span><br><span class="line">                , file_ex_code = file_ex_codes.length</span><br><span class="line">                , real_URL = view.URL || view.webkitURL || view</span><br><span class="line">                , real_create_object_URL = real_URL.createObjectURL</span><br><span class="line">                , real_revoke_object_URL = real_URL.revokeObjectURL</span><br><span class="line">                , URL = real_URL</span><br><span class="line">                , btoa = view.btoa</span><br><span class="line">                , atob = view.atob</span><br><span class="line"></span><br><span class="line">                , <span class="built_in">ArrayBuffer</span> = view.ArrayBuffer</span><br><span class="line">                , <span class="built_in">Uint8Array</span> = view.Uint8Array</span><br><span class="line">                ;</span><br><span class="line">            FakeBlob.fake = FB_proto.fake = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">while</span> (file_ex_code--) &#123;</span><br><span class="line">                FileException.prototype[file_ex_codes[file_ex_code]] = file_ex_code + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!real_URL.createObjectURL) &#123;</span><br><span class="line">                URL = view.URL = &#123;&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            URL.createObjectURL = <span class="function"><span class="keyword">function</span>(<span class="params">blob</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span></span><br><span class="line">                    type = blob.type</span><br><span class="line">                    , data_URI_header</span><br><span class="line">                    ;</span><br><span class="line">                <span class="keyword">if</span> (type === <span class="literal">null</span>) &#123;</span><br><span class="line">                    type = <span class="string">"application/octet-stream"</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (blob <span class="keyword">instanceof</span> FakeBlob) &#123;</span><br><span class="line">                    data_URI_header = <span class="string">"data:"</span> + type;</span><br><span class="line">                    <span class="keyword">if</span> (blob.encoding === <span class="string">"base64"</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> data_URI_header + <span class="string">";base64,"</span> + blob.data;</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (blob.encoding === <span class="string">"URI"</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> data_URI_header + <span class="string">","</span> + <span class="built_in">decodeURIComponent</span>(blob.data);</span><br><span class="line">                    &#125; <span class="keyword">if</span> (btoa) &#123;</span><br><span class="line">                        <span class="keyword">return</span> data_URI_header + <span class="string">";base64,"</span> + btoa(blob.data);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">return</span> data_URI_header + <span class="string">","</span> + <span class="built_in">encodeURIComponent</span>(blob.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (real_create_object_URL) &#123;</span><br><span class="line">                    <span class="keyword">return</span> real_create_object_URL.call(real_URL, blob);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            URL.revokeObjectURL = <span class="function"><span class="keyword">function</span>(<span class="params">object_URL</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (object_URL.substring(<span class="number">0</span>, <span class="number">5</span>) !== <span class="string">"data:"</span> &amp;&amp; real_revoke_object_URL) &#123;</span><br><span class="line">                    real_revoke_object_URL.call(real_URL, object_URL);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            FBB_proto.append = <span class="function"><span class="keyword">function</span>(<span class="params">data<span class="regexp">/*, endings*/</span></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> bb = <span class="keyword">this</span>.data;</span><br><span class="line">                <span class="comment">// decode data to a binary string</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">Uint8Array</span> &amp;&amp; (data <span class="keyword">instanceof</span> <span class="built_in">ArrayBuffer</span> || data <span class="keyword">instanceof</span> <span class="built_in">Uint8Array</span>)) &#123;</span><br><span class="line">                    <span class="keyword">var</span></span><br><span class="line">                        str = <span class="string">""</span></span><br><span class="line">                        , buf = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(data)</span><br><span class="line">                        , i = <span class="number">0</span></span><br><span class="line">                        , buf_len = buf.length</span><br><span class="line">                        ;</span><br><span class="line">                    <span class="keyword">for</span> (; i &lt; buf_len; i++) &#123;</span><br><span class="line">                        str += <span class="built_in">String</span>.fromCharCode(buf[i]);</span><br><span class="line">                    &#125;</span><br><span class="line">                    bb.push(str);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (get_class(data) === <span class="string">"Blob"</span> || get_class(data) === <span class="string">"File"</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (FileReaderSync) &#123;</span><br><span class="line">                        <span class="keyword">var</span> fr = <span class="keyword">new</span> FileReaderSync;</span><br><span class="line">                        bb.push(fr.readAsBinaryString(data));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="comment">// async FileReader won't work as BlobBuilder is sync</span></span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> FileException(<span class="string">"NOT_READABLE_ERR"</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data <span class="keyword">instanceof</span> FakeBlob) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (data.encoding === <span class="string">"base64"</span> &amp;&amp; atob) &#123;</span><br><span class="line">                        bb.push(atob(data.data));</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.encoding === <span class="string">"URI"</span>) &#123;</span><br><span class="line">                        bb.push(<span class="built_in">decodeURIComponent</span>(data.data));</span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (data.encoding === <span class="string">"raw"</span>) &#123;</span><br><span class="line">                        bb.push(data.data);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="keyword">typeof</span> data !== <span class="string">"string"</span>) &#123;</span><br><span class="line">                        data += <span class="string">""</span>; <span class="comment">// convert unsupported types to strings</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// decode UTF-16 to binary string</span></span><br><span class="line">                    bb.push(<span class="built_in">unescape</span>(<span class="built_in">encodeURIComponent</span>(data)));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            FBB_proto.getBlob = <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!<span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">                    type = <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> FakeBlob(<span class="keyword">this</span>.data.join(<span class="string">""</span>), type, <span class="string">"raw"</span>);</span><br><span class="line">            &#125;;</span><br><span class="line">            FBB_proto.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"[object BlobBuilder]"</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            FB_proto.slice = <span class="function"><span class="keyword">function</span>(<span class="params">start, end, type</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> args = <span class="built_in">arguments</span>.length;</span><br><span class="line">                <span class="keyword">if</span> (args &lt; <span class="number">3</span>) &#123;</span><br><span class="line">                    type = <span class="literal">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> FakeBlob(</span><br><span class="line">                    <span class="keyword">this</span>.data.slice(start, args &gt; <span class="number">1</span> ? end : <span class="keyword">this</span>.data.length)</span><br><span class="line">                    , type</span><br><span class="line">                    , <span class="keyword">this</span>.encoding</span><br><span class="line">                );</span><br><span class="line">            &#125;;</span><br><span class="line">            FB_proto.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">"[object Blob]"</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            FB_proto.close = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.size = <span class="keyword">this</span>.data.length = <span class="number">0</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">return</span> FakeBlobBuilder;</span><br><span class="line">        &#125;(view));</span><br><span class="line"></span><br><span class="line">    view.Blob = <span class="function"><span class="keyword">function</span> <span class="title">Blob</span>(<span class="params">blobParts, options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> type = options ? (options.type || <span class="string">""</span>) : <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">var</span> builder = <span class="keyword">new</span> BlobBuilder();</span><br><span class="line">        <span class="keyword">if</span> (blobParts) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = blobParts.length; i &lt; len; i++) &#123;</span><br><span class="line">                builder.append(blobParts[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> builder.getBlob(type);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;(<span class="keyword">typeof</span> self !== <span class="string">"undefined"</span> &amp;&amp; self || <span class="keyword">typeof</span> <span class="built_in">window</span> !== <span class="string">"undefined"</span> &amp;&amp; <span class="built_in">window</span> || <span class="keyword">this</span>.content || <span class="keyword">this</span>));</span><br></pre></td></tr></table></figure></div>

<p><strong>Export2Excel.js:</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'script-loader!file-saver'</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'script-loader!./Blob'</span>);  <span class="comment">//å¼•ç”¨å½“å‰ç›®å½•ä¸‹çš„Blob.jsæ¨¡å—</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">'script-loader!xlsx/dist/xlsx.core.min'</span>);</span><br><span class="line"><span class="comment">//ç”±äºè¿™å‡ ä¸ªæ–‡ä»¶ä¸æ”¯æŒimportå¼•å…¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦`script-loader`æ¥å°†ä»–ä»¬æŒ‚è½½åˆ°å…¨å±€ç¯å¢ƒä¸‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateArray</span>(<span class="params">table</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> out = [];</span><br><span class="line">    <span class="keyword">var</span> rows = table.querySelectorAll(<span class="string">'tr'</span>);</span><br><span class="line">    <span class="keyword">var</span> ranges = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> R = <span class="number">0</span>; R &lt; rows.length; ++R) &#123;</span><br><span class="line">        <span class="keyword">var</span> outRow = [];</span><br><span class="line">        <span class="keyword">var</span> row = rows[R];</span><br><span class="line">        <span class="keyword">var</span> columns = row.querySelectorAll(<span class="string">'td'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> C = <span class="number">0</span>; C &lt; columns.length; ++C) &#123;</span><br><span class="line">            <span class="keyword">var</span> cell = columns[C];</span><br><span class="line">            <span class="keyword">var</span> colspan = cell.getAttribute(<span class="string">'colspan'</span>);</span><br><span class="line">            <span class="keyword">var</span> rowspan = cell.getAttribute(<span class="string">'rowspan'</span>);</span><br><span class="line">            <span class="keyword">var</span> cellValue = cell.innerText;</span><br><span class="line">            <span class="keyword">if</span> (cellValue !== <span class="string">""</span> &amp;&amp; cellValue == +cellValue) cellValue = +cellValue;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//Skip ranges</span></span><br><span class="line">            ranges.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">range</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (R &gt;= range.s.r &amp;&amp; R &lt;= range.e.r &amp;&amp; outRow.length &gt;= range.s.c &amp;&amp; outRow.length &lt;= range.e.c) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= range.e.c - range.s.c; ++i) outRow.push(<span class="literal">null</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//Handle Row Span</span></span><br><span class="line">            <span class="keyword">if</span> (rowspan || colspan) &#123;</span><br><span class="line">                rowspan = rowspan || <span class="number">1</span>;</span><br><span class="line">                colspan = colspan || <span class="number">1</span>;</span><br><span class="line">                ranges.push(&#123;<span class="attr">s</span>: &#123;<span class="attr">r</span>: R, <span class="attr">c</span>: outRow.length&#125;, <span class="attr">e</span>: &#123;<span class="attr">r</span>: R + rowspan - <span class="number">1</span>, <span class="attr">c</span>: outRow.length + colspan - <span class="number">1</span>&#125;&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            ;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//Handle Value</span></span><br><span class="line">            outRow.push(cellValue !== <span class="string">""</span> ? cellValue : <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//Handle Colspan</span></span><br><span class="line">            <span class="keyword">if</span> (colspan) <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; colspan - <span class="number">1</span>; ++k) outRow.push(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        out.push(outRow);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [out, ranges];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">datenum</span>(<span class="params">v, date1904</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (date1904) v += <span class="number">1462</span>;</span><br><span class="line">    <span class="keyword">var</span> epoch = <span class="built_in">Date</span>.parse(v);</span><br><span class="line">    <span class="keyword">return</span> (epoch - <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.UTC(<span class="number">1899</span>, <span class="number">11</span>, <span class="number">30</span>))) / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sheet_from_array_of_arrays</span>(<span class="params">data, opts</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> ws = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> range = &#123;<span class="attr">s</span>: &#123;<span class="attr">c</span>: <span class="number">10000000</span>, <span class="attr">r</span>: <span class="number">10000000</span>&#125;, <span class="attr">e</span>: &#123;<span class="attr">c</span>: <span class="number">0</span>, <span class="attr">r</span>: <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> R = <span class="number">0</span>; R != data.length; ++R) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> C = <span class="number">0</span>; C != data[R].length; ++C) &#123;</span><br><span class="line">            <span class="keyword">if</span> (range.s.r &gt; R) range.s.r = R;</span><br><span class="line">            <span class="keyword">if</span> (range.s.c &gt; C) range.s.c = C;</span><br><span class="line">            <span class="keyword">if</span> (range.e.r &lt; R) range.e.r = R;</span><br><span class="line">            <span class="keyword">if</span> (range.e.c &lt; C) range.e.c = C;</span><br><span class="line">            <span class="keyword">var</span> cell = &#123;<span class="attr">v</span>: data[R][C]&#125;;</span><br><span class="line">            <span class="keyword">if</span> (cell.v == <span class="literal">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">var</span> cell_ref = XLSX.utils.encode_cell(&#123;<span class="attr">c</span>: C, <span class="attr">r</span>: R&#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> cell.v === <span class="string">'number'</span>) cell.t = <span class="string">'n'</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> cell.v === <span class="string">'boolean'</span>) cell.t = <span class="string">'b'</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (cell.v <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">                cell.t = <span class="string">'n'</span>;</span><br><span class="line">                cell.z = XLSX.SSF._table[<span class="number">14</span>];</span><br><span class="line">                cell.v = datenum(cell.v);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> cell.t = <span class="string">'s'</span>;</span><br><span class="line"></span><br><span class="line">            ws[cell_ref] = cell;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (range.s.c &lt; <span class="number">10000000</span>) ws[<span class="string">'!ref'</span>] = XLSX.utils.encode_range(range);</span><br><span class="line">    <span class="keyword">return</span> ws;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Workbook</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> Workbook)) <span class="keyword">return</span> <span class="keyword">new</span> Workbook();</span><br><span class="line">    <span class="keyword">this</span>.SheetNames = [];</span><br><span class="line">    <span class="keyword">this</span>.Sheets = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">s2ab</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(s.length);</span><br><span class="line">    <span class="keyword">var</span> view = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i != s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</span><br><span class="line">    <span class="keyword">return</span> buf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">export_table_to_excel</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> theTable = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a'</span>)</span><br><span class="line">    <span class="keyword">var</span> oo = generateArray(theTable);</span><br><span class="line">    <span class="keyword">var</span> ranges = oo[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* original data */</span></span><br><span class="line">    <span class="keyword">var</span> data = oo[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> ws_name = <span class="string">"SheetJS"</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> wb = <span class="keyword">new</span> Workbook(), ws = sheet_from_array_of_arrays(data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* add ranges to worksheet */</span></span><br><span class="line">    <span class="comment">// ws['!cols'] = ['apple', 'banan'];</span></span><br><span class="line">    ws[<span class="string">'!merges'</span>] = ranges;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* add worksheet to workbook */</span></span><br><span class="line">    wb.SheetNames.push(ws_name);</span><br><span class="line">    wb.Sheets[ws_name] = ws;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> wbout = XLSX.write(wb, &#123;<span class="attr">bookType</span>: <span class="string">'xlsx'</span>, <span class="attr">bookSST</span>: <span class="literal">false</span>, <span class="attr">type</span>: <span class="string">'binary'</span>&#125;);</span><br><span class="line"></span><br><span class="line">    saveAs(<span class="keyword">new</span> Blob([s2ab(wbout)], &#123;<span class="attr">type</span>: <span class="string">"application/octet-stream"</span>&#125;), <span class="string">"test.xlsx"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">formatJson</span>(<span class="params">jsonData</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(jsonData)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">export_json_to_excel</span>(<span class="params">th, jsonData, defaultTitle</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* original data */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> data = jsonData;</span><br><span class="line">    data.unshift(th);</span><br><span class="line">    <span class="keyword">var</span> ws_name = <span class="string">"SheetJS"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> wb = <span class="keyword">new</span> Workbook(), ws = sheet_from_array_of_arrays(data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* add worksheet to workbook */</span></span><br><span class="line">    wb.SheetNames.push(ws_name);</span><br><span class="line">    wb.Sheets[ws_name] = ws;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> wbout = XLSX.write(wb, &#123;<span class="attr">bookType</span>: <span class="string">'xlsx'</span>, <span class="attr">bookSST</span>: <span class="literal">false</span>, <span class="attr">type</span>: <span class="string">'binary'</span>&#125;);</span><br><span class="line">    <span class="keyword">var</span> title = defaultTitle || <span class="string">'åˆ—è¡¨'</span></span><br><span class="line">    saveAs(<span class="keyword">new</span> Blob([s2ab(wbout)], &#123;<span class="attr">type</span>: <span class="string">"application/octet-stream"</span>&#125;), title + <span class="string">".xlsx"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="åœ¨éœ€è¦ä¸‹è½½çš„vueé¡µé¢methodsä¸­åˆ›å»ºæ–¹æ³•"><a href="#åœ¨éœ€è¦ä¸‹è½½çš„vueé¡µé¢methodsä¸­åˆ›å»ºæ–¹æ³•" class="headerlink" title="åœ¨éœ€è¦ä¸‹è½½çš„vueé¡µé¢methodsä¸­åˆ›å»ºæ–¹æ³•"></a>åœ¨éœ€è¦ä¸‹è½½çš„vueé¡µé¢methodsä¸­åˆ›å»ºæ–¹æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ä¸‹è½½</span></span><br><span class="line">ExcelLog() &#123;</span><br><span class="line">    <span class="built_in">require</span>.ensure([], () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; export_json_to_excel &#125; = <span class="built_in">require</span>(<span class="string">'../../lib/Export2Excel'</span>)	<span class="comment">// å¯¼å…¥ä½ åˆ›å»ºçš„jsæ–‡ä»¶</span></span><br><span class="line">        <span class="keyword">const</span> tHeader = [<span class="string">'Order ID'</span>, <span class="string">'Date Time'</span>, <span class="string">'Tempear(â„ƒ)'</span>]   <span class="comment">// è‡ªå®šä¹‰æ ‡é¢˜</span></span><br><span class="line">        <span class="keyword">const</span> filterVal = [<span class="string">'oid'</span>, <span class="string">'create_time'</span>, <span class="string">'tempera'</span>]   <span class="comment">// å¯¹åº”è¡¨å­—æ®µ</span></span><br><span class="line">        <span class="keyword">const</span> list = <span class="keyword">this</span>.TemperLog   <span class="comment">// éœ€è¦ä¸‹è½½çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">this</span>.formatJson(filterVal, list);</span><br><span class="line">        export_json_to_excel(tHeader, data, <span class="string">'è¿å•'</span> + <span class="keyword">this</span>.orderID + <span class="string">'æ¸©åº¦è¯¦æƒ…'</span>);  <span class="comment">//å¯¼å‡ºæ–‡ä»¶åç§°</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">// æ–‡ä»¶ä¸‹è½½æ‰€è°ƒç”¨å‡½æ•°</span></span><br><span class="line">    formatJson(filterVal, jsonData) &#123;</span><br><span class="line">        <span class="built_in">console</span>.info(jsonData)</span><br><span class="line">        <span class="keyword">return</span> jsonData.map(<span class="function"><span class="params">v</span> =&gt;</span> filterVal.map(<span class="function"><span class="params">j</span> =&gt;</span> v[j]))</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure></div>

<h4 id="åœ¨buttonä¸­ç»‘å®šç‚¹å‡»äº‹ä»¶"><a href="#åœ¨buttonä¸­ç»‘å®šç‚¹å‡»äº‹ä»¶" class="headerlink" title="åœ¨buttonä¸­ç»‘å®šç‚¹å‡»äº‹ä»¶"></a>åœ¨buttonä¸­ç»‘å®šç‚¹å‡»äº‹ä»¶</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">&lt;el-button size&#x3D;&quot;small&quot; type&#x3D;&quot;primary&quot; @click&#x3D;&quot;ExcelLog&quot;&gt;ä¸‹è½½æ¸©åº¦&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>æ–‡ä»¶ä¸‹è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueå¼•å…¥ç™¾åº¦åœ°å›¾</title>
    <url>/blog/Vue/Vue_id_05.html</url>
    <content><![CDATA[<p>ã€€ã€€Vueä¸­å¼•å…¥ç™¾åº¦åœ°å›¾</p>
<a id="more"></a>

<h3 id="å®‰è£…æ¨¡å—"><a href="#å®‰è£…æ¨¡å—" class="headerlink" title="å®‰è£…æ¨¡å—"></a>å®‰è£…æ¨¡å—</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">npm install vue-baidu-map --save</span><br></pre></td></tr></table></figure></div>

<h3 id="åœ¨main-jsæ–‡ä»¶ä¸­å…¨å±€å¼•å…¥"><a href="#åœ¨main-jsæ–‡ä»¶ä¸­å…¨å±€å¼•å…¥" class="headerlink" title="åœ¨main.jsæ–‡ä»¶ä¸­å…¨å±€å¼•å…¥"></a>åœ¨main.jsæ–‡ä»¶ä¸­å…¨å±€å¼•å…¥</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> BaiduMap <span class="keyword">from</span> <span class="string">'vue-baidu-map'</span></span><br><span class="line">Vue.use(BaiduMap, &#123;</span><br><span class="line">  ak: <span class="string">'ä½ ç”³è¯·çš„key'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<h3 id="åœ¨Vueé¡µé¢ä¸­å¯¼å…¥ä½¿ç”¨"><a href="#åœ¨Vueé¡µé¢ä¸­å¯¼å…¥ä½¿ç”¨" class="headerlink" title="åœ¨Vueé¡µé¢ä¸­å¯¼å…¥ä½¿ç”¨"></a>åœ¨Vueé¡µé¢ä¸­å¯¼å…¥ä½¿ç”¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">baidu-map</span> <span class="attr">:center</span>=<span class="string">"center"</span> <span class="attr">:zoom</span>=<span class="string">"zoom"</span> @<span class="attr">ready</span>=<span class="string">"handler"</span> <span class="attr">style</span>=<span class="string">"height:1080px"</span> @<span class="attr">click</span>=<span class="string">"getClickInfo"</span> <span class="attr">:scroll-wheel-zoom</span>=<span class="string">'true'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">baidu-map</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'TestBaiDu'</span>,</span></span><br><span class="line">  data () &#123;</span><br><span class="line"><span class="actionscript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      center: &#123;lng: 109.45744048529967, lat: 36.49771311230842&#125;,</span><br><span class="line">      zoom: 13</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    handler (&#123;BMap, map&#125;) &#123;</span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">109.49926175379778</span>, <span class="number">36.60449676862417</span>)</span></span><br><span class="line">      map.centerAndZoom(point, 13)</span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> marker = <span class="keyword">new</span> BMap.Marker(point) <span class="comment">// åˆ›å»ºæ ‡æ³¨</span></span></span><br><span class="line"><span class="actionscript">      map.addOverlay(marker) <span class="comment">// å°†æ ‡æ³¨æ·»åŠ åˆ°åœ°å›¾ä¸­</span></span></span><br><span class="line"><span class="actionscript">      <span class="keyword">var</span> circle = <span class="keyword">new</span> BMap.Circle(point, <span class="number">6</span>, &#123; strokeColor: <span class="string">'Red'</span>, strokeWeight: <span class="number">6</span>, strokeOpacity: <span class="number">1</span>, Color: <span class="string">'Red'</span>, fillColor: <span class="string">'#f03'</span> &#125;)</span></span><br><span class="line">      map.addOverlay(circle)</span><br><span class="line">    &#125;,</span><br><span class="line">    getClickInfo (e) &#123;</span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.point.lng)</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(e.point.lat)</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.center.lng = e.point.lng</span></span><br><span class="line"><span class="actionscript">      <span class="keyword">this</span>.center.lat = e.point.lat</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="å–æ¶ˆç™¾åº¦åœ°å›¾çš„LogoåŠç‰ˆæœ¬"><a href="#å–æ¶ˆç™¾åº¦åœ°å›¾çš„LogoåŠç‰ˆæœ¬" class="headerlink" title="å–æ¶ˆç™¾åº¦åœ°å›¾çš„LogoåŠç‰ˆæœ¬"></a>å–æ¶ˆç™¾åº¦åœ°å›¾çš„LogoåŠç‰ˆæœ¬</h3><p>ã€€ã€€<strong>è®¾ç½®æ ·å¼ä¸ºéšè—ï¼Œå¦‚æœåœ¨å½“å‰é¡µé¢ä¸ç”Ÿæ•ˆï¼Œåˆ™å¯ä»¥åœ¨å…¨å±€cssæ ·å¼å†™å…¥ä»¥ä¸‹ç±»å±æ€§</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.BMap_cpyCtrl</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.anchorBL</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>ç™¾åº¦åœ°å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueä¸­router-linkçš„ç‚¹å‡»äº‹ä»¶</title>
    <url>/blog/Vue/Vue_id_06.html</url>
    <content><![CDATA[<p>ã€€ã€€Vueä¸­çš„router-linkç»‘å®šç‚¹å‡»äº‹ä»¶å¤±è´¥ï¼Œå› ä¸ºrouter-linkä¼šé˜»æ­¢clickäº‹ä»¶</p>
<a id="more"></a>

<h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>æ ¹æ®Vue2.0å®˜æ–¹æ–‡æ¡£å…³äºçˆ¶å­ç»„ä»¶é€šè®¯çš„åŸåˆ™ï¼Œçˆ¶ç»„ä»¶é€šè¿‡propä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶è§¦å‘äº‹ä»¶ç»™çˆ¶ç»„ä»¶ã€‚ä½†çˆ¶ç»„ä»¶æƒ³åœ¨å­ç»„ä»¶ä¸Šç›‘å¬è‡ªå·±çš„clickçš„è¯ï¼Œéœ€è¦åŠ ä¸Šnativeä¿®é¥°ç¬¦ã€‚<br>æ‰€ä»¥å¦‚æœåœ¨æƒ³è¦åœ¨router-linkä¸Šæ·»åŠ äº‹ä»¶çš„è¯éœ€è¦<strong>@click.native</strong>è¿™æ ·å†™</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>ç‚¹å‡»äº‹ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueä¸­è¯¦ç»†çš„ç™¾åº¦åœ°å›¾è§£æ</title>
    <url>/blog/Vue/Vue_id_08.html</url>
    <content><![CDATA[<p>ã€€ã€€Vueä¸­å¦‚ä½•å¼•å…¥ç™¾åº¦åœ°å›¾ï¼Œç‚¹å‡»<a href="/2020/05/28/Vue/Vueå¼•å…¥ç™¾åº¦åœ°å›¾/">Vueä¸­å¼•å…¥ç™¾åº¦åœ°å›¾</a>æŸ¥çœ‹</p>
<a id="more"></a>

<h4 id="åˆ›å»ºåœ°å›¾å®ä¾‹"><a href="#åˆ›å»ºåœ°å›¾å®ä¾‹" class="headerlink" title="åˆ›å»ºåœ°å›¾å®ä¾‹"></a>åˆ›å»ºåœ°å›¾å®ä¾‹</h4><p>var map = new BMap.Map(â€œcontainerâ€);<br>ä½äºBMapå‘½åç©ºé—´ä¸‹çš„Mapç±»è¡¨ç¤ºåœ°å›¾ï¼Œé€šè¿‡newæ“ä½œç¬¦å¯ä»¥åˆ›å»ºä¸€ä¸ªåœ°å›¾å®ä¾‹ã€‚å…¶å‚æ•°å¯ä»¥æ˜¯å…ƒç´ idä¹Ÿå¯ä»¥æ˜¯å…ƒç´ å¯¹è±¡ã€‚<br>æ³¨æ„åœ¨è°ƒç”¨æ­¤æ„é€ å‡½æ•°æ—¶åº”ç¡®ä¿å®¹å™¨å…ƒç´ å·²ç»æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚ </p>
<h4 id="åˆ›å»ºç‚¹åæ ‡"><a href="#åˆ›å»ºç‚¹åæ ‡" class="headerlink" title="åˆ›å»ºç‚¹åæ ‡"></a>åˆ›å»ºç‚¹åæ ‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>);</span><br></pre></td></tr></table></figure></div>

<p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨BMapå‘½åç©ºé—´ä¸‹çš„Pointç±»æ¥åˆ›å»ºä¸€ä¸ªåæ ‡ç‚¹ã€‚Pointç±»æè¿°äº†ä¸€ä¸ªåœ°ç†åæ ‡ç‚¹ï¼Œå…¶ä¸­116.404è¡¨ç¤ºç»åº¦ï¼Œ39.915è¡¨ç¤ºçº¬åº¦ã€‚</p>
<h4 id="åœ°å›¾åˆå§‹åŒ–"><a href="#åœ°å›¾åˆå§‹åŒ–" class="headerlink" title="åœ°å›¾åˆå§‹åŒ–"></a>åœ°å›¾åˆå§‹åŒ–</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">map.centerAndZoom(point,<span class="number">15</span>);</span><br></pre></td></tr></table></figure></div>

<p>åœ¨åˆ›å»ºåœ°å›¾å®ä¾‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼ŒBMap.Map.centerAndZoom()æ–¹æ³•è¦æ±‚è®¾ç½®ä¸­å¿ƒç‚¹åæ ‡å’Œåœ°å›¾çº§åˆ«ã€‚<br>åœ°å›¾å¿…é¡»ç»è¿‡åˆå§‹åŒ–æ‰å¯ä»¥æ‰§è¡Œå…¶ä»–æ“ä½œã€‚</p>
<h4 id="åœ°å›¾æ“ä½œ"><a href="#åœ°å›¾æ“ä½œ" class="headerlink" title="åœ°å›¾æ“ä½œ"></a>åœ°å›¾æ“ä½œ</h4><p>åœ°å›¾è¢«å®ä¾‹åŒ–å¹¶å®Œæˆåˆå§‹åŒ–ä»¥åï¼Œå°±å¯ä»¥ä¸å…¶è¿›è¡Œäº¤äº’äº†ã€‚APIä¸­çš„åœ°å›¾å¯¹è±¡çš„å¤–è§‚ä¸è¡Œä¸ºä¸ç™¾åº¦åœ°å›¾ç½‘ç«™ä¸Šäº¤äº’çš„åœ°å›¾éå¸¸ç›¸ä¼¼ã€‚å®ƒæ”¯æŒé¼ æ ‡æ‹–æ‹½ã€æ»šè½®ç¼©æ”¾ã€åŒå‡»æ”¾å¤§ç­‰äº¤äº’åŠŸèƒ½ã€‚æ‚¨ä¹Ÿå¯ä»¥ä¿®æ”¹é…ç½®æ¥æ”¹å˜è¿™äº›åŠŸèƒ½ã€‚<br>æ‚¨è¿˜å¯ä»¥é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ä¸åœ°å›¾äº¤äº’ã€‚Mapç±»æä¾›äº†è‹¥å¹²ä¿®æ”¹åœ°å›¾çŠ¶æ€çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼šsetCenter()ã€panTo()ã€zoomTo()ç­‰ç­‰ã€‚<br>ä¸‹é¢ç¤ºä¾‹æ˜¾ç¤ºä¸€ä¸ªåœ°å›¾ï¼Œç­‰å¾…ä¸¤ç§’é’Ÿåï¼Œå®ƒä¼šç§»åŠ¨åˆ°æ–°ä¸­å¿ƒç‚¹ã€‚panTo()æ–¹æ³•å°†è®©åœ°å›¾å¹³æ»‘ç§»åŠ¨è‡³æ–°ä¸­å¿ƒç‚¹ï¼Œå¦‚æœç§»åŠ¨è·ç¦»è¶…è¿‡äº†å½“å‰åœ°å›¾åŒºåŸŸå¤§å°ï¼Œåˆ™åœ°å›¾ä¼šç›´è·³åˆ°è¯¥ç‚¹ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>);</span><br><span class="line">map.centerAndZoom(point, <span class="number">15</span>);</span><br><span class="line"><span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> map.panTo(<span class="keyword">new</span> BMap.Point(<span class="number">116.409</span>, <span class="number">39.918</span>));</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure></div>

<p>â€‹                </p>
<h4 id="åœ°å›¾æ§ä»¶æ¦‚è¿°"><a href="#åœ°å›¾æ§ä»¶æ¦‚è¿°" class="headerlink" title="åœ°å›¾æ§ä»¶æ¦‚è¿°"></a>åœ°å›¾æ§ä»¶æ¦‚è¿°</h4><p>ç™¾åº¦åœ°å›¾ä¸Šè´Ÿè´£ä¸åœ°å›¾äº¤äº’çš„UIå…ƒç´ ç§°ä¸ºæ§ä»¶ã€‚ç™¾åº¦åœ°å›¾APIä¸­æä¾›äº†ä¸°å¯Œçš„æ§ä»¶ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡BMap.Controlæ¥å®ç°è‡ªå®šä¹‰æ§ä»¶ã€‚<br>åœ°å›¾APIä¸­æä¾›çš„æ§ä»¶æœ‰ï¼š<br>Â· Controlï¼šæ§ä»¶çš„æŠ½è±¡åŸºç±»ï¼Œæ‰€æœ‰æ§ä»¶å‡ç»§æ‰¿æ­¤ç±»çš„æ–¹æ³•ã€å±æ€§ã€‚é€šè¿‡æ­¤ç±»æ‚¨å¯å®ç°è‡ªå®šä¹‰æ§ä»¶ã€‚<br>Â· NavigationControlï¼šåœ°å›¾å¹³ç§»ç¼©æ”¾æ§ä»¶ï¼Œé»˜è®¤ä½äºåœ°å›¾å·¦ä¸Šæ–¹ï¼Œå®ƒåŒ…å«æ§åˆ¶åœ°å›¾çš„å¹³ç§»å’Œç¼©æ”¾çš„åŠŸèƒ½ã€‚<br>Â· OverviewMapControlï¼šç¼©ç•¥åœ°å›¾æ§ä»¶ï¼Œé»˜è®¤ä½äºåœ°å›¾å³ä¸‹æ–¹ï¼Œæ˜¯ä¸€ä¸ªå¯æŠ˜å çš„ç¼©ç•¥åœ°å›¾ã€‚<br>Â· ScaleControlï¼šæ¯”ä¾‹å°ºæ§ä»¶ï¼Œé»˜è®¤ä½äºåœ°å›¾å·¦ä¸‹æ–¹ï¼Œæ˜¾ç¤ºåœ°å›¾çš„æ¯”ä¾‹å…³ç³»ã€‚<br>Â· CopyrightControlï¼šç‰ˆæƒæ§ä»¶ï¼Œé»˜è®¤ä½äºåœ°å›¾å·¦ä¸‹æ–¹ã€‚<br>æ‰€æœ‰è¿™äº›æ§ä»¶éƒ½åŸºäºBMap.Controlç±»ã€‚</p>
<h4 id="å‘åœ°å›¾æ·»åŠ æ§ä»¶"><a href="#å‘åœ°å›¾æ·»åŠ æ§ä»¶" class="headerlink" title="å‘åœ°å›¾æ·»åŠ æ§ä»¶"></a>å‘åœ°å›¾æ·»åŠ æ§ä»¶</h4><p>å¯ä»¥ä½¿ç”¨BMap.Map.addControl()æ–¹æ³•å‘åœ°å›¾æ·»åŠ æ§ä»¶ã€‚åœ¨æ­¤ä¹‹å‰åœ°å›¾éœ€è¦è¿›è¡Œåˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼Œè¦å°†æ ‡å‡†åœ°å›¾æ§ä»¶æ·»åŠ åˆ°åœ°å›¾ä¸­ï¼Œå¯åœ¨ä»£ç ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);</span><br><span class="line">map.addControl(<span class="keyword">new</span> BMap.NavigationControl());</span><br></pre></td></tr></table></figure></div>

<p>å¯ä»¥å‘åœ°å›¾æ·»åŠ å¤šä¸ªæ§ä»¶ã€‚åœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬å‘åœ°å›¾æ·»åŠ ä¸€ä¸ªå¹³ç§»ç¼©æ”¾æ§ä»¶ã€ä¸€ä¸ªæ¯”ä¾‹å°ºæ§ä»¶å’Œä¸€ä¸ªç¼©ç•¥å›¾æ§ä»¶ã€‚åœ¨åœ°å›¾ä¸­æ·»åŠ æ§ä»¶åï¼Œå®ƒä»¬å³åˆ»ç”Ÿæ•ˆã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">map.addControl(<span class="keyword">new</span> BMap.NavigationControl());</span><br><span class="line">map.addControl(<span class="keyword">new</span> BMap.ScaleControl());</span><br><span class="line">map.addControl(<span class="keyword">new</span> BMap.OverviewMapControl());</span><br></pre></td></tr></table></figure></div>

<h4 id="æ§åˆ¶æ§ä»¶çš„ä½ç½®"><a href="#æ§åˆ¶æ§ä»¶çš„ä½ç½®" class="headerlink" title="æ§åˆ¶æ§ä»¶çš„ä½ç½®"></a>æ§åˆ¶æ§ä»¶çš„ä½ç½®</h4><p>åˆå§‹åŒ–æ§ä»¶æ—¶ï¼Œå¯æä¾›ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œå‚æ•°ç±»å‹ä¸ºä¸€ä¸ªJavaScriptå¯¹è±¡ã€‚å…¶ä¸­anchorå’ŒoffsetXã€offsetYå…±åŒæ§åˆ¶æ§ä»¶åœ¨åœ°å›¾ä¸Šçš„ä½ç½®ã€‚anchorè¡¨ç¤ºæ§ä»¶åœé åœ¨åœ°å›¾çš„å“ªä¸ªè§’ï¼Œå…è®¸çš„å€¼ä¸ºï¼š<br>Â· BMAP_ANCHOR_TOP_LEFT<br>Â· BMAP_ANCHOR_TOP_RIGHT<br>Â· BMAP_ANCHOR_BOTTOM_LEFT<br>Â· BMAP_ANCHOR_BOTTOM_RIGHT<br>é™¤äº†æŒ‡å®šåœé ä½ç½®å¤–ï¼Œè¿˜å¯ä»¥æä¾›åç§»é‡ï¼Œç”¨æ¥æŒ‡ç¤ºæ§ä»¶è·ç¦»åœ°å›¾è¾¹ç•Œç›¸éš”å¤šå°‘åƒç´ ã€‚<br>æœ¬ç¤ºä¾‹å°†æ ‡å‡†åœ°å›¾æ§ä»¶æ”¾ç½®åœ¨åœ°å›¾çš„å³ä¸Šè§’ï¼Œé—´éš”10ä¸ªåƒç´ ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> opts = &#123;<span class="attr">anchor</span>: BMAP_ANCHOR_TOP_RIGHT, <span class="attr">offset</span>: <span class="keyword">new</span> BMap.Size(<span class="number">10</span>, <span class="number">10</span>)&#125;</span><br><span class="line">map.addControl(<span class="keyword">new</span> BMap.NavigationControl(opts));</span><br></pre></td></tr></table></figure></div>

<h4 id="ä¿®æ”¹æ§ä»¶çš„é…ç½®"><a href="#ä¿®æ”¹æ§ä»¶çš„é…ç½®" class="headerlink" title="ä¿®æ”¹æ§ä»¶çš„é…ç½®"></a>ä¿®æ”¹æ§ä»¶çš„é…ç½®</h4><p>åœ°å›¾APIçš„æ§ä»¶æä¾›äº†ä¸°å¯Œçš„é…ç½®å‚æ•°ï¼Œæ‚¨å¯å‚è€ƒAPIæ–‡æ¡£æ¥ä¿®æ”¹å®ƒä»¬ä»¥ä¾¿å¾—åˆ°ç¬¦åˆè¦æ±‚çš„æ§ä»¶å¤–è§‚ã€‚<br>æœ¬ç¤ºä¾‹å°†è°ƒæ•´å¹³ç§»ç¼©æ”¾åœ°å›¾æ§ä»¶çš„å¤–è§‚ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> opts = &#123;<span class="attr">type</span>: BMAP_NAVIGATION_CONTROL_SMALL&#125;</span><br><span class="line">map.addControl(<span class="keyword">new</span> BMap.NavigationControl(opts));</span><br></pre></td></tr></table></figure></div>

<h4 id="è‡ªå®šä¹‰æ§ä»¶"><a href="#è‡ªå®šä¹‰æ§ä»¶" class="headerlink" title="è‡ªå®šä¹‰æ§ä»¶"></a>è‡ªå®šä¹‰æ§ä»¶</h4><p>ç™¾åº¦åœ°å›¾APIå…è®¸æ‚¨é€šè¿‡ç»§æ‰¿BMap.Controlæ¥åˆ›å»ºè‡ªå®šä¹‰åœ°å›¾æ§ä»¶ã€‚ï¼ˆæ³¨æ„JavaScriptæ˜¯é€šè¿‡prototypeå±æ€§è¿›è¡Œç»§æ‰¿çš„ï¼‰<br>è¦åˆ›å»ºå¯ç”¨çš„è‡ªå®šä¹‰æ§ä»¶ï¼Œæ‚¨éœ€è¦å®ç°ç±»å®šä¹‰ä¸­çš„ä¸€ä¸ªæŠ½è±¡æ–¹æ³•å¹¶ç»™ä¸¤ä¸ªå±æ€§èµ‹å€¼ï¼Œå®ƒä»¬æ˜¯ï¼šinitialize()å’ŒdefaultAnchorã€defaultOffsetã€‚initialize()æ–¹æ³•å¿…é¡»è¿”å›æ§ä»¶å®¹å™¨çš„DOMå…ƒç´ ï¼ŒdefaultAnchorä¸ºæ§ä»¶é»˜è®¤çš„åœé ä½ç½®ï¼ŒdefaultOffsetä¸ºæ§ä»¶é»˜è®¤çš„é—´éš”è·ç¦»ã€‚<br>æ‰€æœ‰è‡ªå®šä¹‰çš„åœ°å›¾æ§ä»¶ä¸­çš„DOMå…ƒç´ æœ€ç»ˆéƒ½åº”è¯¥æ·»åŠ åˆ°åœ°å›¾å®¹å™¨ï¼ˆå³åœ°å›¾æ‰€åœ¨çš„DOMå…ƒç´ ï¼‰ä¸­å»ï¼Œè¿™ä¸ªåœ°å›¾å®¹å™¨å¯ä»¥é€šè¿‡BMap.Map.getContainer()æ–¹æ³•è·å¾—ã€‚<br>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç®€å•çš„æ”¾å¤§æ§ä»¶ï¼Œæ¯ä¸€æ¬¡ç‚¹å‡»å°†åœ°å›¾æ”¾å¤§ä¸¤ä¸ªçº§åˆ«ã€‚å®ƒå…·æœ‰æ–‡æœ¬æ ‡è¯†ï¼Œè€Œä¸æ˜¯å¹³ç§»ç¼©æ”¾æ§ä»¶ä¸­ä½¿ç”¨çš„å›¾å½¢å›¾æ ‡ã€‚</p>
<h4 id="åœ°å›¾è¦†ç›–ç‰©æ¦‚è¿°"><a href="#åœ°å›¾è¦†ç›–ç‰©æ¦‚è¿°" class="headerlink" title="åœ°å›¾è¦†ç›–ç‰©æ¦‚è¿°"></a>åœ°å›¾è¦†ç›–ç‰©æ¦‚è¿°</h4><p>æ‰€æœ‰å åŠ æˆ–è¦†ç›–åˆ°åœ°å›¾çš„å†…å®¹ï¼Œæˆ‘ä»¬ç»Ÿç§°ä¸ºåœ°å›¾è¦†ç›–ç‰©ã€‚å¦‚æ ‡æ³¨ã€çŸ¢é‡å›¾å½¢å…ƒç´ (åŒ…æ‹¬ï¼šæŠ˜çº¿å’Œå¤šè¾¹å½¢)ã€ä¿¡æ¯çª—å£ç­‰ã€‚è¦†ç›–ç‰©æ‹¥æœ‰è‡ªå·±çš„åœ°ç†åæ ‡ï¼Œå½“æ‚¨æ‹–åŠ¨æˆ–ç¼©æ”¾åœ°å›¾æ—¶ï¼Œå®ƒä»¬ä¼šç›¸åº”çš„ç§»åŠ¨ã€‚<br>åœ°å›¾APIæä¾›äº†å¦‚ä¸‹å‡ ç§è¦†ç›–ç‰©ï¼š<br>Â· Overlayï¼šè¦†ç›–ç‰©çš„æŠ½è±¡åŸºç±»ï¼Œæ­¤ç±»ä¸å¯å®ä¾‹åŒ–ï¼Œæ‰€æœ‰çš„è¦†ç›–ç‰©å‡ç»§æ‰¿æ­¤ç±»çš„æ–¹æ³•ã€‚<br>Â· Markerï¼šæ ‡æ³¨è¡¨ç¤ºåœ°å›¾ä¸Šçš„ç‚¹ï¼Œå¯è‡ªå®šä¹‰æ ‡æ³¨çš„å›¾æ ‡ã€‚<br>Â· Labelï¼šè¡¨ç¤ºåœ°å›¾ä¸Šçš„æ–‡æœ¬æ ‡æ³¨ï¼Œæ‚¨å¯ä»¥è‡ªå®šä¹‰æ ‡æ³¨çš„æ–‡æœ¬å†…å®¹ã€‚<br>Â· Polylineï¼šè¡¨ç¤ºåœ°å›¾ä¸Šçš„æŠ˜çº¿ã€‚<br>Â· Polygonï¼šè¡¨ç¤ºåœ°å›¾ä¸Šçš„å¤šè¾¹å½¢ã€‚å¤šè¾¹å½¢ç±»ä¼¼äºé—­åˆçš„æŠ˜çº¿ï¼Œå¦å¤–æ‚¨ä¹Ÿå¯ä»¥ä¸ºå…¶æ·»åŠ å¡«å……é¢œè‰²ã€‚<br>Â· InfoWindowï¼šä¿¡æ¯çª—å£ä¹Ÿæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¦†ç›–ç‰©ã€‚æ³¨æ„ï¼šåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªä¿¡æ¯çª—å£åœ¨åœ°å›¾ä¸Šæ‰“å¼€ã€‚ </p>
<p>å¯ä»¥ä½¿ç”¨BMap.Map.addOverlay()æ–¹æ³•å‘åœ°å›¾æ·»åŠ è¦†ç›–ç‰©ï¼Œä½¿ç”¨BMap.Map.removeOverlay()æ–¹æ³•ç§»é™¤è¦†ç›–ç‰©ï¼Œæ³¨æ„æ­¤æ–¹æ³•ä¸é€‚ç”¨äºInfoWindowã€‚ </p>
<h4 id="æ ‡æ³¨"><a href="#æ ‡æ³¨" class="headerlink" title="æ ‡æ³¨"></a>æ ‡æ³¨</h4><p>æ ‡æ³¨è¡¨ç¤ºåœ°å›¾ä¸Šçš„ç‚¹ã€‚APIæä¾›äº†é»˜è®¤å›¾æ ‡æ ·å¼ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡Iconç±»æ¥æŒ‡å®šè‡ªå®šä¹‰å›¾æ ‡ã€‚BMap.Markerçš„æ„é€ å‡½æ•°çš„å‚æ•°ä¸ºBMap.Pointå’ŒBMap.MarkerOptionsï¼ˆå¯é€‰ï¼‰ã€‚ æ³¨æ„ï¼šå½“æ‚¨ä½¿ç”¨è‡ªå®šä¹‰å›¾æ ‡æ—¶ï¼Œæ ‡æ³¨çš„åœ°ç†åæ ‡ç‚¹å°†ä½äºæ ‡æ³¨æ‰€ç”¨å›¾æ ‡çš„ä¸­å¿ƒä½ç½®ï¼Œæ‚¨å¯é€šè¿‡Iconçš„offsetå±æ€§ä¿®æ”¹æ ‡å®šä½ç½®ã€‚<br>ä¸‹é¢çš„ç¤ºä¾‹å‘åœ°å›¾ä¸­å¿ƒç‚¹æ·»åŠ äº†ä¸€ä¸ªæ ‡æ³¨ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„æ ‡æ³¨æ ·å¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>);</span><br><span class="line">map.centerAndZoom(point, <span class="number">15</span>);</span><br><span class="line"><span class="keyword">var</span> marker = <span class="keyword">new</span> BMap.Marker(point);    <span class="comment">// åˆ›å»ºæ ‡æ³¨</span></span><br><span class="line">map.addOverlay(marker);           <span class="comment">// å°†æ ‡æ³¨æ·»åŠ åˆ°åœ°å›¾ä¸­</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å®šä¹‰æ ‡æ³¨å›¾æ ‡"><a href="#å®šä¹‰æ ‡æ³¨å›¾æ ‡" class="headerlink" title="å®šä¹‰æ ‡æ³¨å›¾æ ‡"></a>å®šä¹‰æ ‡æ³¨å›¾æ ‡</h4><p>é€šè¿‡BMap.Iconç±»å¯å®ç°è‡ªå®šä¹‰æ ‡æ³¨çš„å›¾æ ‡ï¼Œä¸‹é¢ç¤ºä¾‹é€šè¿‡å‚æ•°BMap.MarkerOptionsçš„iconå±æ€§è¿›è¡Œè®¾ç½®ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨BMap.Marker.setIcon()æ–¹æ³•ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>);</span><br><span class="line">map.centerAndZoom(point, <span class="number">15</span>);</span><br><span class="line"><span class="comment">// ç¼–å†™è‡ªå®šä¹‰å‡½æ•°ï¼Œåˆ›å»ºæ ‡æ³¨</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addMarker</span>(<span class="params">point, index</span>)</span>&#123;</span><br><span class="line"> <span class="comment">// åˆ›å»ºå›¾æ ‡å¯¹è±¡</span></span><br><span class="line"> <span class="keyword">var</span> myIcon = <span class="keyword">new</span> BMap.Icon(<span class="string">"http://api.map.baidu.com/img/markers.png"</span>, <span class="keyword">new</span> BMap.Size(<span class="number">23</span>, <span class="number">25</span>), &#123;</span><br><span class="line">  offset: <span class="keyword">new</span> BMap.Size(<span class="number">10</span>, <span class="number">25</span>),         <span class="comment">// æŒ‡å®šå®šä½ä½ç½®</span></span><br><span class="line">  imageOffset: <span class="keyword">new</span> BMap.Size(<span class="number">0</span>, <span class="number">0</span> - index * <span class="number">25</span>)  <span class="comment">// è®¾ç½®å›¾ç‰‡åç§»</span></span><br><span class="line"> &#125;);</span><br><span class="line"> <span class="keyword">var</span> marker = <span class="keyword">new</span> BMap.Marker(point, &#123;<span class="attr">icon</span>: myIcon&#125;);</span><br><span class="line"> map.addOverlay(marker);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// éšæœºå‘åœ°å›¾æ·»åŠ 10ä¸ªæ ‡æ³¨</span></span><br><span class="line"><span class="keyword">var</span> bounds = map.getBounds();</span><br><span class="line"><span class="keyword">var</span> lngSpan = bounds.maxX - bounds.minX;</span><br><span class="line"><span class="keyword">var</span> latSpan = bounds.maxY - bounds.minY;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++) &#123;</span><br><span class="line"> <span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(bounds.minX + lngSpan * (<span class="built_in">Math</span>.random() * <span class="number">0.7</span> + <span class="number">0.15</span>),</span><br><span class="line"> bounds.minY + latSpan * (<span class="built_in">Math</span>.random() * <span class="number">0.7</span> + <span class="number">0.15</span>));</span><br><span class="line">addMarker(point, i);</span><br></pre></td></tr></table></figure></div>

<h4 id="ç›‘å¬æ ‡æ³¨çš„äº‹ä»¶"><a href="#ç›‘å¬æ ‡æ³¨çš„äº‹ä»¶" class="headerlink" title="ç›‘å¬æ ‡æ³¨çš„äº‹ä»¶"></a>ç›‘å¬æ ‡æ³¨çš„äº‹ä»¶</h4><p>äº‹ä»¶æ–¹æ³•ä¸Mapäº‹ä»¶æœºåˆ¶ç›¸åŒã€‚å¯å‚è€ƒ<a href="http://openapi.baidu.com/map/event.html" target="_blank" rel="noopener">äº‹ä»¶</a>éƒ¨åˆ†ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">marker.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> alert(<span class="string">"æ‚¨ç‚¹å‡»äº†æ ‡æ³¨"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<h4 id="å†…å­˜é‡Šæ”¾"><a href="#å†…å­˜é‡Šæ”¾" class="headerlink" title="å†…å­˜é‡Šæ”¾"></a>å†…å­˜é‡Šæ”¾</h4><p>å¦‚æœæ‚¨åœ¨åœ°å›¾ä¸­éœ€è¦åå¤æ·»åŠ å¤§é‡çš„æ ‡æ³¨ï¼Œè¿™å¯èƒ½ä¼šå ç”¨è¾ƒå¤šçš„å†…å­˜èµ„æºã€‚å¦‚æœæ‚¨çš„æ ‡æ³¨åœ¨è¢«ç§»é™¤åä¸å†ä½¿ç”¨ï¼Œå¯è°ƒç”¨Overlay.dispose()æ–¹æ³•æ¥é‡Šæ”¾å†…å­˜ã€‚æ³¨æ„åœ¨è°ƒç”¨æ­¤æ–¹æ³•åæ ‡æ³¨å°†ä¸èƒ½å†æ¬¡æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚å…³äºOverlay.dispose()çš„è¯¦ç»†ä¿¡æ¯å¯å‚è€ƒ<a href="http://www.cnblogs.com/xuhongfei/admin/EditPosts.aspx?opt=1#Overlay" target="_blank" rel="noopener">APIæ–‡æ¡£</a>éƒ¨åˆ†å†…å®¹ã€‚<br>ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨æ ‡æ³¨è¢«ç§»é™¤åè°ƒç”¨æ­¤æ–¹æ³•ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">map.removeOverlay(marker);</span><br><span class="line">marker.dispose();</span><br></pre></td></tr></table></figure></div>

<h4 id="ä¿¡æ¯çª—å£"><a href="#ä¿¡æ¯çª—å£" class="headerlink" title="ä¿¡æ¯çª—å£"></a>ä¿¡æ¯çª—å£</h4><p>ä¿¡æ¯çª—å£åœ¨åœ°å›¾ä¸Šæ–¹çš„æµ®åŠ¨æ˜¾ç¤ºHTMLå†…å®¹ã€‚ä¿¡æ¯çª—å£å¯ç›´æ¥åœ¨åœ°å›¾ä¸Šçš„ä»»æ„ä½ç½®æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥åœ¨æ ‡æ³¨å¯¹è±¡ä¸Šæ‰“å¼€ï¼ˆæ­¤æ—¶ä¿¡æ¯çª—å£çš„åæ ‡ä¸æ ‡æ³¨çš„åæ ‡ä¸€è‡´ï¼‰ã€‚ å¯ä»¥ä½¿ç”¨BMap.InfoWindowæ¥åˆ›å»ºä¸€ä¸ªä¿¡æ¯çª—å®ä¾‹ï¼Œæ³¨æ„åŒä¸€æ—¶åˆ»åœ°å›¾ä¸Šåªèƒ½æœ‰ä¸€ä¸ªä¿¡æ¯çª—å£å¤„äºæ‰“å¼€çŠ¶æ€ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> opts = &#123;</span><br><span class="line"> width : <span class="number">250</span>,   <span class="comment">// ä¿¡æ¯çª—å£å®½åº¦</span></span><br><span class="line"> height: <span class="number">100</span>,   <span class="comment">// ä¿¡æ¯çª—å£é«˜åº¦</span></span><br><span class="line"> title : <span class="string">"Hello"</span> <span class="comment">// ä¿¡æ¯çª—å£æ ‡é¢˜</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> infoWindow = <span class="keyword">new</span> BMap.InfoWindow(<span class="string">"World"</span>, opts); <span class="comment">// åˆ›å»ºä¿¡æ¯çª—å£å¯¹è±¡</span></span><br><span class="line">map.openInfoWindow(infoWindow, map.getCenter());   <span class="comment">// æ‰“å¼€ä¿¡æ¯çª—å£</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æ·»åŠ æŠ˜çº¿"><a href="#æ·»åŠ æŠ˜çº¿" class="headerlink" title="æ·»åŠ æŠ˜çº¿"></a>æ·»åŠ æŠ˜çº¿</h4><p>BMap.Polylineå¯¹è±¡è¡¨ç¤ºåœ°å›¾ä¸Šçš„æŠ˜çº¿è¦†ç›–ç‰©ã€‚å®ƒåŒ…å«ä¸€ç»„ç‚¹ï¼Œå¹¶å°†è¿™äº›ç‚¹è¿æ¥èµ·æ¥å½¢æˆæŠ˜çº¿ã€‚<br>æŠ˜çº¿åœ¨åœ°å›¾ä¸Šç»˜åˆ¶ä¸ºä¸€ç³»åˆ—ç›´çº¿æ®µã€‚å¯ä»¥è‡ªå®šä¹‰è¿™äº›çº¿æ®µçš„é¢œè‰²ã€ç²—ç»†å’Œé€æ˜åº¦ã€‚é¢œè‰²å¯ä»¥æ˜¯åå…­è¿›åˆ¶æ•°å­—å½¢å¼ï¼ˆæ¯”å¦‚ï¼š#ff0000ï¼‰æˆ–è€…æ˜¯é¢œè‰²å…³é”®å­—ï¼ˆæ¯”å¦‚ï¼šredï¼‰ã€‚<br>BMap.Polylineå¯¹è±¡éœ€è¦æµè§ˆå™¨æ”¯æŒçŸ¢é‡ç»˜åˆ¶åŠŸèƒ½ã€‚åœ¨Internet Explorerä¸­ï¼Œåœ°å›¾ä½¿ç”¨VMLï¼ˆè¯·å‚é˜…VMLï¼‰ç»˜åˆ¶æŠ˜çº¿ï¼›åœ¨å…¶ä»–æµè§ˆå™¨ä¸­ä½¿ç”¨SVGï¼ˆå¦‚æœå¯ç”¨ï¼‰ã€‚<br>ä»¥ä¸‹ä»£ç æ®µä¼šåœ¨ä¸¤ç‚¹ä¹‹é—´åˆ›å»º6åƒç´ å®½çš„è“è‰²æŠ˜çº¿ï¼š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> polyline = <span class="keyword">new</span> BMap.Polyline([  </span><br><span class="line"><span class="keyword">new</span> BMap.Point(<span class="number">116.399</span>, <span class="number">39.910</span>),  </span><br><span class="line"><span class="keyword">new</span> BMap.Point(<span class="number">116.405</span>, <span class="number">39.920</span>)  </span><br><span class="line">],  </span><br><span class="line"> &#123;<span class="attr">strokeColor</span>:<span class="string">"blue"</span>, <span class="attr">strokeWeight</span>:<span class="number">6</span>, <span class="attr">strokeOpacity</span>:<span class="number">0.5</span>&#125;  </span><br><span class="line">);  </span><br><span class="line">map.addOverlay(polyline);</span><br></pre></td></tr></table></figure></div>

<h4 id="åœ°å›¾äº‹ä»¶æ¦‚è¿°"><a href="#åœ°å›¾äº‹ä»¶æ¦‚è¿°" class="headerlink" title="åœ°å›¾äº‹ä»¶æ¦‚è¿°"></a>åœ°å›¾äº‹ä»¶æ¦‚è¿°</h4><p>æµè§ˆå™¨ä¸­çš„JavaScriptæ˜¯â€œäº‹ä»¶é©±åŠ¨çš„â€ï¼Œè¿™è¡¨ç¤ºJavaScripté€šè¿‡ç”Ÿæˆäº‹ä»¶æ¥å“åº”äº¤äº’ï¼Œå¹¶æœŸæœ›ç¨‹åºèƒ½å¤Ÿâ€œç›‘å¬â€æ„Ÿå…´è¶£çš„æ´»åŠ¨ã€‚ä¾‹å¦‚ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œç”¨æˆ·çš„é¼ æ ‡å’Œé”®ç›˜äº¤äº’å¯ä»¥åˆ›å»ºåœ¨DOMå†…ä¼ æ’­çš„äº‹ä»¶ã€‚å¯¹æŸäº›äº‹ä»¶æ„Ÿå…´è¶£çš„ç¨‹åºä¼šä¸ºè¿™äº›äº‹ä»¶æ³¨å†ŒJavaScriptäº‹ä»¶ç›‘å¬å™¨ï¼Œå¹¶åœ¨æ¥æ”¶è¿™äº›äº‹ä»¶æ—¶æ‰§è¡Œä»£ç ã€‚<br>ç™¾åº¦åœ°å›¾APIæ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„äº‹ä»¶æ¨¡å‹ï¼Œç¨‹åºå‘˜å¯ç›‘å¬åœ°å›¾APIå¯¹è±¡çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œä½¿ç”¨æ–¹æ³•å’ŒDOMäº‹ä»¶ç±»ä¼¼ã€‚ä½†è¯·æ³¨æ„ï¼Œåœ°å›¾APIäº‹ä»¶æ˜¯ç‹¬ç«‹çš„ï¼Œä¸æ ‡å‡†DOMäº‹ä»¶ä¸åŒã€‚ </p>
<h4 id="äº‹ä»¶çš„ç›‘å¬"><a href="#äº‹ä»¶çš„ç›‘å¬" class="headerlink" title="äº‹ä»¶çš„ç›‘å¬"></a>äº‹ä»¶çš„ç›‘å¬</h4><p>ç™¾åº¦åœ°å›¾APIä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å«æœ‰addEventListeneræ–¹æ³•ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥ç›‘å¬å¯¹è±¡äº‹ä»¶ã€‚ä¾‹å¦‚ï¼ŒBMap.MapåŒ…å«clickã€dblclickç­‰äº‹ä»¶ã€‚åœ¨ç‰¹å®šç¯å¢ƒä¸‹è¿™äº›äº‹ä»¶ä¼šè¢«è§¦å‘ï¼ŒåŒæ—¶ç›‘å¬å‡½æ•°ä¼šå¾—åˆ°ç›¸åº”çš„äº‹ä»¶å‚æ•°eï¼Œæ¯”å¦‚å½“ç”¨æˆ·ç‚¹å‡»åœ°å›¾æ—¶ï¼Œeå‚æ•°ä¼šåŒ…å«é¼ æ ‡æ‰€å¯¹åº”çš„åœ°ç†ä½ç½®pointã€‚<br>æœ‰å…³åœ°å›¾APIå¯¹è±¡çš„äº‹ä»¶ï¼Œè¯·å‚è€ƒå®Œæ•´çš„APIå‚è€ƒæ–‡æ¡£ã€‚<br>addEventListeneræ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç›‘å¬çš„äº‹ä»¶åç§°å’Œäº‹ä»¶è§¦å‘æ—¶è°ƒç”¨çš„å‡½æ•°ã€‚ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œæ¯å½“ç”¨æˆ·ç‚¹å‡»åœ°å›¾æ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šæ¡†ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);</span><br><span class="line">map.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> alert(<span class="string">"æ‚¨ç‚¹å‡»äº†åœ°å›¾ã€‚"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<p>é€šè¿‡ç›‘å¬äº‹ä»¶è¿˜å¯ä»¥æ•è·äº‹ä»¶è§¦å‘åçš„çŠ¶æ€ã€‚ä¸‹é¢ç¤ºä¾‹æ˜¾ç¤ºç”¨æˆ·æ‹–åŠ¨åœ°å›¾ååœ°å›¾ä¸­å¿ƒçš„ç»çº¬åº¦ä¿¡æ¯ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);</span><br><span class="line">map.addEventListener(<span class="string">"dragend"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="keyword">var</span> center = map.getCenter();</span><br><span class="line"> <span class="built_in">document</span>.getElementById(<span class="string">"info"</span>).innerHTML = center.lng + <span class="string">", "</span> + center.lat;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<h4 id="äº‹ä»¶å‚æ•°å’Œthis"><a href="#äº‹ä»¶å‚æ•°å’Œthis" class="headerlink" title="äº‹ä»¶å‚æ•°å’Œthis"></a>äº‹ä»¶å‚æ•°å’Œthis</h4><p>åœ¨æ ‡å‡†çš„DOMäº‹ä»¶æ¨¡å‹ä¸­ï¼ˆDOM Level 2 Eventsï¼‰ï¼Œç›‘å¬å‡½æ•°ä¼šå¾—åˆ°ä¸€ä¸ªäº‹ä»¶å¯¹è±¡eï¼Œåœ¨eä¸­å¯ä»¥è·å–æœ‰å…³è¯¥äº‹ä»¶çš„ä¿¡æ¯ã€‚åŒæ—¶åœ¨ç›‘å¬å‡½æ•°ä¸­thisä¼šæŒ‡å‘è§¦å‘è¯¥äº‹ä»¶çš„DOMå…ƒç´ ã€‚ ç™¾åº¦åœ°å›¾APIçš„äº‹ä»¶æ¨¡å‹ä¸æ­¤ç±»ä¼¼ï¼Œåœ¨äº‹ä»¶ç›‘å¬å‡½æ•°ä¸­ä¼ é€’äº‹ä»¶å¯¹è±¡eï¼Œæ¯ä¸ªeå‚æ•°è‡³å°‘åŒ…å«äº‹ä»¶ç±»å‹ï¼ˆtypeï¼‰å’Œè§¦å‘è¯¥äº‹ä»¶çš„å¯¹è±¡ï¼ˆtargetï¼‰ã€‚ APIè¿˜ä¿è¯å‡½æ•°å†…çš„thisæŒ‡å‘è§¦å‘ï¼ˆåŒæ—¶ä¹Ÿæ˜¯ç»‘å®šï¼‰äº‹ä»¶çš„APIå¯¹è±¡ã€‚<br>ä¾‹å¦‚ï¼Œé€šè¿‡å‚æ•°eå¾—åˆ°ç‚¹å‡»çš„ç»çº¬åº¦åæ ‡ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);</span><br><span class="line">map.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"> <span class="built_in">document</span>.getElementById(<span class="string">"info"</span>).innerHTML = e.point.lng + <span class="string">", "</span> + e.point.lat;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<p>æˆ–è€…é€šè¿‡thiså¾—åˆ°åœ°å›¾ç¼©æ”¾åçš„çº§åˆ«ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);  </span><br><span class="line">map.addEventListener(<span class="string">"zoomend"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  </span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"info"</span>).innerHTML = <span class="string">"åœ°å›¾ç¼©æ”¾è‡³ï¼š"</span> + <span class="keyword">this</span>.getZoom() + <span class="string">"çº§"</span>;  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<h4 id="ç§»é™¤ç›‘å¬äº‹ä»¶"><a href="#ç§»é™¤ç›‘å¬äº‹ä»¶" class="headerlink" title="ç§»é™¤ç›‘å¬äº‹ä»¶"></a>ç§»é™¤ç›‘å¬äº‹ä»¶</h4><p>å½“æ‚¨ä¸å†å¸Œæœ›ç›‘å¬äº‹ä»¶æ—¶ï¼Œå¯ä»¥å°†äº‹ä»¶ç›‘å¬è¿›è¡Œç§»é™¤ã€‚æ¯ä¸ªAPIå¯¹è±¡æä¾›äº†removeEventListenerç”¨æ¥ç§»é™¤äº‹ä»¶ç›‘å¬å‡½æ•°ã€‚<br>ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»åœ°å›¾ä¼šè§¦å‘äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œåœ¨å‡½æ•°å†…éƒ¨å¯¹äº‹ä»¶ç›‘å¬è¿›è¡Œäº†ç§»é™¤ï¼Œå› æ­¤åç»­çš„ç‚¹å‡»æ“ä½œåˆ™ä¸ä¼šè§¦å‘ç›‘å¬å‡½æ•°ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);   </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showInfo</span>(<span class="params">e</span>)</span>&#123;  </span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"info"</span>).innerHTML = e.point.lng + <span class="string">", "</span> + e.point.lat;  </span><br><span class="line">map.removeEventListener(<span class="string">"click"</span>, showInfo);  </span><br><span class="line">&#125;  </span><br><span class="line">map.addEventListener(<span class="string">"click"</span>, showInfo);</span><br></pre></td></tr></table></figure></div>

<h4 id="åœ°å›¾å›¾å±‚æ¦‚å¿µ"><a href="#åœ°å›¾å›¾å±‚æ¦‚å¿µ" class="headerlink" title="åœ°å›¾å›¾å±‚æ¦‚å¿µ"></a>åœ°å›¾å›¾å±‚æ¦‚å¿µ</h4><p>åœ°å›¾å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå›¾å±‚ï¼Œæ¯ä¸ªå›¾å±‚åœ¨æ¯ä¸ªçº§åˆ«éƒ½æ˜¯ç”±è‹¥å¹²å¼ å›¾å—ç»„æˆçš„ï¼Œå®ƒä»¬è¦†ç›–äº†åœ°çƒçš„æ•´ä¸ªè¡¨é¢ã€‚<br>åœ¨æœ€ä½çš„ç¼©æ”¾çº§åˆ«ï¼ˆçº§åˆ« 1ï¼‰ä¸­ï¼Œæ•´ä¸ªåœ°çƒç”± 4 å¼ å›¾å—ç»„æˆã€‚éšç€çº§åˆ«çš„å¢é•¿ï¼Œåœ°å›¾æ‰€ä½¿ç”¨çš„å›¾å—ä¸ªæ•°ä¹Ÿéšä¹‹å¢å¤šã€‚</p>
<h4 id="è‡ªå®šä¹‰å›¾å±‚"><a href="#è‡ªå®šä¹‰å›¾å±‚" class="headerlink" title="è‡ªå®šä¹‰å›¾å±‚"></a>è‡ªå®šä¹‰å›¾å±‚</h4><p>ç™¾åº¦åœ°å›¾ä¸­æä¾›ä¸€ä¸ªBMap.TileLayerç±»ï¼Œå¯ä»¥å®ç°ç”¨æˆ·è‡ªå®šä¹‰å›¾å±‚åŠŸèƒ½ã€‚å¯ä»¥åœ¨ç™¾åº¦åœ°å›¾ä¸Šå åŠ ä¸€å±‚è‡ªå®šä¹‰çš„å›¾å—ã€‚<br>æœ‰å…³TileLayerç±»çš„è¯¦ç»†æ¥å£ï¼Œè¯·å‚è€ƒTileLayerçš„<a href="http://www.cnblogs.com/xuhongfei/admin/EditPosts.aspx?opt=1#TileLayer" target="_blank" rel="noopener">APIå‚è€ƒæ–‡æ¡£</a>ã€‚<br>ä»¥ä¸‹ä»£ç åœ¨æ¯ä¸ªå›¾å—çš„æ‰€æœ‰ç¼©æ”¾çº§åˆ«ä¸Šæ˜¾ç¤ºä¸€ä¸ªç®€å•çš„é€æ˜å åŠ å±‚ï¼Œä½¿ç”¨æµ®åŠ¨çº¢è‰²å°æ°´æ»´è¡¨ç¤ºå›¾å—çš„è½®å»“ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);     <span class="comment">// åˆ›å»ºåœ°å›¾å®ä¾‹  </span></span><br><span class="line"><span class="keyword">var</span> point = <span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>); <span class="comment">// åˆ›å»ºç‚¹åæ ‡  </span></span><br><span class="line">map.centerAndZoom(point,<span class="number">15</span>);         <span class="comment">// åˆå§‹åŒ–åœ°å›¾ï¼Œè®¾ç½®ä¸­å¿ƒç‚¹åæ ‡å’Œåœ°å›¾çº§åˆ«  </span></span><br><span class="line"><span class="keyword">var</span> tilelayer = <span class="keyword">new</span> BMap.TileLayer();     <span class="comment">// åˆ›å»ºåœ°å›¾å±‚å®ä¾‹  </span></span><br><span class="line">tilelayer.getTilesUrl=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;       <span class="comment">// è®¾ç½®å›¾å—è·¯å¾„  </span></span><br><span class="line"><span class="keyword">return</span> <span class="string">"layer.gif"</span>;  </span><br><span class="line">&#125;;  </span><br><span class="line">map.addTileLayer(tilelayer);         <span class="comment">// å°†å›¾å±‚æ·»åŠ åˆ°åœ°å›¾ä¸Š</span></span><br></pre></td></tr></table></figure></div>

<h4 id="åœ°å›¾å·¥å…·æ¦‚è¿°"><a href="#åœ°å›¾å·¥å…·æ¦‚è¿°" class="headerlink" title="åœ°å›¾å·¥å…·æ¦‚è¿°"></a>åœ°å›¾å·¥å…·æ¦‚è¿°</h4><p>ç™¾åº¦åœ°å›¾æä¾›äº†äº¤äº’åŠŸèƒ½æ›´ä¸ºå¤æ‚çš„â€œå·¥å…·â€ï¼Œå®ƒåŒ…æ‹¬ï¼š<br>Â· PushpinToolï¼šæ ‡æ³¨å·¥å…·ã€‚é€šè¿‡æ­¤å·¥å…·ç”¨æˆ·å¯åœ¨åœ°å›¾ä»»æ„åŒºåŸŸæ·»åŠ æ ‡æ³¨ã€‚<br>Â· DistanceToolï¼šæµ‹è·å·¥å…·ã€‚é€šè¿‡æ­¤å·¥å…·ç”¨æˆ·å¯æµ‹é‡åœ°å›¾ä¸Šä»»æ„ä½ç½®ä¹‹é—´çš„è·ç¦»ã€‚<br>Â· DragAndZoomToolï¼šåŒºåŸŸç¼©æ”¾å·¥å…·ã€‚æ­¤å·¥å…·å°†æ ¹æ®ç”¨æˆ·æ‹–æ‹½ç»˜åˆ¶çš„çŸ©å½¢åŒºåŸŸå¤§å°å¯¹åœ°å›¾è¿›è¡Œæ”¾å¤§æˆ–ç¼©å°æ“ä½œã€‚<br>å·¥å…·ç±»åœ¨åˆå§‹åŒ–æ—¶éœ€è¦æä¾›åœ°å›¾å®ä¾‹å‚æ•°ï¼Œä»¥ä¾¿ä½¿å·¥å…·åœ¨è¯¥åœ°å›¾ä¸Šç”Ÿæ•ˆã€‚æ‚¨å¯ä»¥åœ¨åœ°å›¾ä¸Šæ·»åŠ å¤šä¸ªå·¥å…·ï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªå·¥å…·å¤„äºå¼€å¯çŠ¶æ€ã€‚æ ‡æ³¨å·¥å…·å’Œæµ‹è·å·¥å…·åœ¨å®Œæˆä¸€æ¬¡æ“ä½œåå°†è‡ªåŠ¨é€€å‡ºå¼€å¯çŠ¶æ€ï¼Œè€ŒåŒºåŸŸç¼©æ”¾å·¥å…·å¯ä»¥è‡ªè¡Œé…ç½®æ˜¯å¦è‡ªåŠ¨å…³é—­ã€‚</p>
<h4 id="å‘åœ°å›¾æ·»åŠ å·¥å…·"><a href="#å‘åœ°å›¾æ·»åŠ å·¥å…·" class="headerlink" title="å‘åœ°å›¾æ·»åŠ å·¥å…·"></a>å‘åœ°å›¾æ·»åŠ å·¥å…·</h4><p>åœ¨åœ°å›¾æ­£ç¡®åˆå§‹åŒ–åï¼Œæ‚¨å¯ä»¥åˆ›å»ºå·¥å…·å®ä¾‹ã€‚ä¸‹é¢ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•å‘åœ°å›¾æ·»åŠ ä¸€ä¸ªæ ‡æ³¨å·¥å…·ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">15</span>);</span><br><span class="line"><span class="keyword">var</span> myPushpin = <span class="keyword">new</span> BMap.PushpinTool(map);     <span class="comment">// åˆ›å»ºæ ‡æ³¨å·¥å…·å®ä¾‹</span></span><br><span class="line">myPushpin.addEventListener(<span class="string">"markend"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123; <span class="comment">// ç›‘å¬äº‹ä»¶ï¼Œæç¤ºæ ‡æ³¨ç‚¹åæ ‡ä¿¡æ¯</span></span><br><span class="line"> alert(<span class="string">"æ‚¨æ ‡æ³¨çš„ä½ç½®ï¼š"</span> +</span><br><span class="line">e.marker.getPoint().lng + <span class="string">", "</span> +</span><br><span class="line">e.marker.getPoint().lat);</span><br><span class="line">&#125;);</span><br><span class="line">myPushpin.open();                  <span class="comment">// å¼€å¯æ ‡æ³¨å·¥å…·</span></span><br></pre></td></tr></table></figure></div>

<h4 id="é€šè¿‡æŒ‰é’®æ§åˆ¶å·¥å…·çš„å¼€å¯å’Œå…³é—­"><a href="#é€šè¿‡æŒ‰é’®æ§åˆ¶å·¥å…·çš„å¼€å¯å’Œå…³é—­" class="headerlink" title="é€šè¿‡æŒ‰é’®æ§åˆ¶å·¥å…·çš„å¼€å¯å’Œå…³é—­"></a>é€šè¿‡æŒ‰é’®æ§åˆ¶å·¥å…·çš„å¼€å¯å’Œå…³é—­</h4><p>å·¥å…·ç±»æ²¡æœ‰æä¾›æ§åˆ¶å…¶å¼€å¯å’Œå…³é—­çš„UIå…ƒç´ ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªå·±åˆ›å»ºè¿™äº›å…ƒç´ ï¼ŒæŠŠå®ƒä»¬æ”¾ç½®åœ¨åœ°å›¾åŒºåŸŸå†…æˆ–è€…åŒºåŸŸå¤–å‡å¯ã€‚è°ƒç”¨å·¥å…·ç±»çš„openå’Œcloseå¯æ§åˆ¶å·¥å…·çš„å¼€å¯å’Œå…³é—­ã€‚<br>é¦–å…ˆåˆå§‹åŒ–åœ°å›¾å¹¶åˆ›å»ºä¸€ä¸ªæµ‹è·å·¥å…·å®ä¾‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">15</span>);</span><br><span class="line"><span class="keyword">var</span> myDis = <span class="keyword">new</span> BMap.DistanceTool(map);</span><br></pre></td></tr></table></figure></div>

<p>æ¥ç€æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæŒ‰é’®å…ƒç´ å¹¶ä¸ºå…¶æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"button"</span> value=<span class="string">"å¼€å¯"</span> onclick=<span class="string">"myDis.open()"</span> /&gt; </span><br><span class="line">&lt;input type=<span class="string">"button"</span> value=<span class="string">"å…³é—­"</span> onclick=<span class="string">"myDis.close()"</span> /&gt;</span><br></pre></td></tr></table></figure></div>

<h4 id="ä¿®æ”¹å·¥å…·çš„é…ç½®"><a href="#ä¿®æ”¹å·¥å…·çš„é…ç½®" class="headerlink" title="ä¿®æ”¹å·¥å…·çš„é…ç½®"></a>ä¿®æ”¹å·¥å…·çš„é…ç½®</h4><p>ä¸€äº›å·¥å…·ç±»æä¾›äº†å¯ä¿®æ”¹çš„é…ç½®å‚æ•°ï¼Œæ‚¨å¯å‚è€ƒAPIæ–‡æ¡£æ¥ä¿®æ”¹å®ƒä»¬ä»¥ä¾¿ç¬¦åˆæ‚¨çš„è¦æ±‚ã€‚</p>
<p>æœ¬ç¤ºä¾‹ä¸ºåŒºåŸŸç¼©æ”¾å·¥å…·æ·»åŠ æç¤ºæ–‡å­—ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">15</span>);  </span><br><span class="line"><span class="keyword">var</span> myDrag = <span class="keyword">new</span> BMap.DragAndZoomTool(map, &#123;  </span><br><span class="line">followText : <span class="string">"æ‹–æ‹½é¼ æ ‡è¿›è¡Œæ“ä½œ"</span> </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>

<h4 id="åœ°å›¾æœåŠ¡æ¦‚è¿°"><a href="#åœ°å›¾æœåŠ¡æ¦‚è¿°" class="headerlink" title="åœ°å›¾æœåŠ¡æ¦‚è¿°"></a>åœ°å›¾æœåŠ¡æ¦‚è¿°</h4><p>åœ°å›¾æœåŠ¡æ˜¯æŒ‡é‚£äº›æä¾›æ•°æ®ä¿¡æ¯çš„æ¥å£ï¼Œæ¯”å¦‚æœ¬åœ°æœç´¢ã€è·¯çº¿è§„åˆ’ç­‰ç­‰ã€‚ç™¾åº¦åœ°å›¾APIæä¾›çš„æœåŠ¡æœ‰ï¼š<br>Â· LocalSearchï¼šæœ¬åœ°æœç´¢ï¼Œæä¾›æŸä¸€ç‰¹å®šåœ°åŒºçš„ä½ç½®æœç´¢æœåŠ¡ï¼Œæ¯”å¦‚åœ¨åŒ—äº¬å¸‚æœç´¢â€œå…¬å›­â€ã€‚<br>Â· TransitRouteï¼šå…¬äº¤å¯¼èˆªï¼Œæä¾›æŸä¸€ç‰¹å®šåœ°åŒºçš„å…¬äº¤å‡ºè¡Œæ–¹æ¡ˆçš„æœç´¢æœåŠ¡ã€‚<br>Â· DrivingRouteï¼šé©¾è½¦å¯¼èˆªï¼Œæä¾›é©¾è½¦å‡ºè¡Œæ–¹æ¡ˆçš„æœç´¢æœåŠ¡ã€‚<br>Â· WalkingRouteï¼šæ­¥è¡Œå¯¼èˆªï¼Œæä¾›æ­¥è¡Œå‡ºè¡Œæ–¹æ¡ˆçš„æœç´¢æœåŠ¡ã€‚<br>Â· Geocoderï¼šåœ°å€è§£æï¼Œæä¾›å°†åœ°å€ä¿¡æ¯è½¬æ¢ä¸ºåæ ‡ç‚¹ä¿¡æ¯çš„æœåŠ¡ã€‚<br>Â· LocalCityï¼šæœ¬åœ°åŸå¸‚ï¼Œæä¾›è‡ªåŠ¨åˆ¤æ–­æ‚¨æ‰€åœ¨åŸå¸‚çš„æœåŠ¡ã€‚<br>Â· TrafficControlï¼šå®æ—¶è·¯å†µæ§ä»¶ï¼Œæä¾›å®æ—¶å’Œå†å²è·¯å†µä¿¡æ¯æœåŠ¡ã€‚<br>æœç´¢ç±»çš„æœåŠ¡æ¥å£éœ€è¦æŒ‡å®šä¸€ä¸ªæœç´¢èŒƒå›´ï¼Œå¦åˆ™æ¥å£å°†ä¸èƒ½å·¥ä½œã€‚</p>
<h4 id="æœ¬åœ°æœç´¢"><a href="#æœ¬åœ°æœç´¢" class="headerlink" title="æœ¬åœ°æœç´¢"></a>æœ¬åœ°æœç´¢</h4><p>BMap.LocalSearchæä¾›æœ¬åœ°æœç´¢æœåŠ¡ï¼Œåœ¨ä½¿ç”¨æœ¬åœ°æœç´¢æ—¶éœ€è¦ä¸ºå…¶è®¾ç½®ä¸€ä¸ªæ£€ç´¢åŒºåŸŸï¼Œæ£€ç´¢åŒºåŸŸå¯ä»¥æ˜¯BMap.Mapå¯¹è±¡ã€BMap.Pointå¯¹è±¡æˆ–è€…æ˜¯çœå¸‚åç§°ï¼ˆæ¯”å¦‚ï¼šâ€åŒ—äº¬å¸‚â€ï¼‰çš„å­—ç¬¦ä¸²ã€‚BMap.LocalSearchæ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æŒ‡å®šç»“æœçš„å‘ˆç°ã€‚BMap.RenderOptionsç±»æä¾›äº†è‹¥å¹²æ§åˆ¶å‘ˆç°çš„å±æ€§ï¼Œå…¶ä¸­mapæŒ‡å®šäº†ç»“æœæ‰€å±•ç°çš„åœ°å›¾å®ä¾‹ï¼ŒpanelæŒ‡å®šäº†ç»“æœåˆ—è¡¨çš„å®¹å™¨å…ƒç´ ã€‚<br>ä¸‹é¢è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†åœ¨åŒ—äº¬å¸‚æ£€ç´¢å¤©å®‰é—¨ã€‚æœç´¢åŒºåŸŸè®¾ç½®ä¸ºåœ°å›¾å®ä¾‹ï¼Œå¹¶å‘ŠçŸ¥ç»“æœéœ€è¦å±•ç°åœ¨åœ°å›¾å®ä¾‹ä¸Šã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);</span><br><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> BMap.LocalSearch(map, &#123;</span><br><span class="line"> renderOptions:&#123;<span class="attr">map</span>: map&#125;</span><br><span class="line">&#125;);</span><br><span class="line">local.search(<span class="string">"å¤©å®‰é—¨"</span>);</span><br></pre></td></tr></table></figure></div>

<p>å¦å¤–ï¼ŒBMap.LocalSearchè¿˜æåŒ…å«searchNearbyå’ŒsearchInBoundsæ–¹æ³•ï¼Œä¸ºæ‚¨æä¾›å‘¨è¾¹æœç´¢å’ŒèŒƒå›´æœç´¢æœåŠ¡ã€‚ </p>
<h4 id="é…ç½®æœç´¢"><a href="#é…ç½®æœç´¢" class="headerlink" title="é…ç½®æœç´¢"></a>é…ç½®æœç´¢</h4><p>BMap.LocalSearchæä¾›äº†è‹¥å¹²é…ç½®æ–¹æ³•ï¼Œé€šè¿‡å®ƒä»¬å¯ä»¥è‡ªå®šä¹‰æœç´¢æœåŠ¡çš„è¡Œä¸ºä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚<br>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è°ƒæ•´æ¯é¡µæ˜¾ç¤º8ä¸ªç»“æœï¼Œå¹¶ä¸”æ ¹æ®ç»“æœç‚¹ä½ç½®è‡ªåŠ¨è°ƒæ•´åœ°å›¾è§†é‡ï¼Œä¸æ˜¾ç¤ºç¬¬ä¸€æ¡ç»“æœçš„ä¿¡æ¯çª—å£ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);</span><br><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> BMap.LocalSearch(<span class="string">"åŒ—äº¬å¸‚"</span>, &#123;</span><br><span class="line"> renderOptions: &#123;</span><br><span class="line">  map: map,</span><br><span class="line">  pageCapacity: <span class="number">8</span>,</span><br><span class="line">  autoViewport: <span class="literal">true</span>,</span><br><span class="line">  selectFirstResult: <span class="literal">false</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;);</span><br><span class="line">local.search(<span class="string">"ä¸­å…³æ‘"</span>);</span><br></pre></td></tr></table></figure></div>

<p><strong>ç»“æœé¢æ¿</strong> </p>
<p>é€šè¿‡è®¾ç½®BMap.LocalSearchOptions.renderOptions.panelå±æ€§ï¼Œå¯ä»¥ä¸ºæœ¬åœ°æœç´¢å¯¹è±¡æä¾›ä¸€ä¸ªç»“æœåˆ—è¡¨å®¹å™¨ï¼Œæœç´¢ç»“æœä¼šè‡ªåŠ¨æ·»åŠ åˆ°å®¹å™¨å…ƒç´ ä¸­ã€‚è¯·çœ‹ä¸‹é¢ç¤ºä¾‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);  </span><br><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> BMap.LocalSearch(map, &#123;  </span><br><span class="line">renderOptions: &#123;<span class="attr">map</span>: map, <span class="attr">panel</span>: <span class="string">"results"</span>&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">local.search(<span class="string">"å¤©å®‰é—¨"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="æ•°æ®æ¥å£"><a href="#æ•°æ®æ¥å£" class="headerlink" title="æ•°æ®æ¥å£"></a>æ•°æ®æ¥å£</h4><p>é™¤äº†æœç´¢ç»“æœä¼šè‡ªåŠ¨æ·»åŠ åˆ°åœ°å›¾å’Œåˆ—è¡¨å¤–ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡æ•°æ®æ¥å£è·å¾—è¯¦ç»†çš„æ•°æ®ä¿¡æ¯ï¼Œç»“åˆåœ°å›¾APIæ‚¨å¯ä»¥è‡ªè¡Œå‘åœ°å›¾æ·»åŠ æ ‡æ³¨å’Œä¿¡æ¯çª—å£ã€‚BMap.LocalSearchå’ŒBMap.LocalSearchOptionsç±»æä¾›äº†è‹¥å¹²è®¾ç½®å›è°ƒå‡½æ•°çš„æ¥å£ï¼Œé€šè¿‡å®ƒä»¬å¯å¾—åˆ°æœç´¢ç»“æœçš„æ•°æ®ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œé€šè¿‡onSearchCompleteå›è°ƒå‡½æ•°å‚æ•°å¯ä»¥è·å¾—BMap.LocalResultå¯¹è±¡å®ä¾‹ï¼Œå®ƒåŒ…å«äº†æ¯ä¸€æ¬¡æœç´¢ç»“æœçš„æ•°æ®ä¿¡æ¯ã€‚ å½“å›è°ƒå‡½æ•°è¢«æ‰§è¡Œæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨BMap.LocalSearch.getStatus()æ–¹æ³•æ¥ç¡®è®¤æœç´¢æ˜¯å¦æˆåŠŸæˆ–è€…å¾—åˆ°é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ã€‚<br>åœ¨ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œé€šè¿‡onSearchCompleteå›è°ƒå‡½æ•°å¾—åˆ°ç¬¬ä¸€é¡µæ¯æ¡ç»“æœçš„æ ‡é¢˜å’Œåœ°å€ä¿¡æ¯ï¼Œå¹¶è¾“å‡ºåˆ°é¡µé¢ä¸Šï¼š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);   </span><br><span class="line"><span class="keyword">var</span> options = &#123;  </span><br><span class="line">   onSearchComplete: <span class="function"><span class="keyword">function</span>(<span class="params">results</span>)</span>&#123;  </span><br><span class="line">   <span class="keyword">if</span> (local.getStatus() == BMAP_STATUS_SUCCESS)&#123;  </span><br><span class="line">    <span class="comment">// åˆ¤æ–­çŠ¶æ€æ˜¯å¦æ­£ç¡®  </span></span><br><span class="line">    <span class="keyword">var</span> s = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; results.getCurrentNumPois(); i ++)&#123;  </span><br><span class="line">     s.push(results.getPoi(i).title + <span class="string">", "</span> + results.getPoi(i).address);  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"log"</span>).innerHTML = s.join(<span class="string">"&lt;BR&gt;"</span>);  </span><br><span class="line">   &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> BMap.LocalSearch(map, options);  </span><br><span class="line">local.search(<span class="string">"å…¬å›­"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="å‘¨è¾¹æœç´¢"><a href="#å‘¨è¾¹æœç´¢" class="headerlink" title="å‘¨è¾¹æœç´¢"></a>å‘¨è¾¹æœç´¢</h4><p>é€šè¿‡å‘¨è¾¹æœç´¢æœåŠ¡ï¼Œæ‚¨å¯ä»¥åœ¨æŸä¸ªåœ°ç‚¹é™„è¿‘è¿›è¡Œæœç´¢ï¼Œä¹Ÿå¯ä»¥åœ¨æŸä¸€ä¸ªç‰¹å®šç»“æœç‚¹å‘¨å›´è¿›è¡Œæœç´¢ã€‚<br>ä¸‹é¢ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åœ¨å‰é—¨é™„è¿‘æœç´¢å°åƒï¼š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);   </span><br><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> BMap.LocalSearch(map, &#123;  </span><br><span class="line">renderOptions:&#123;<span class="attr">map</span>: map, <span class="attr">autoViewport</span>: <span class="literal">true</span>&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">local.searchNearby(<span class="string">"å°åƒ"</span>, <span class="string">"å‰é—¨"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="èŒƒå›´æœç´¢"><a href="#èŒƒå›´æœç´¢" class="headerlink" title="èŒƒå›´æœç´¢"></a>èŒƒå›´æœç´¢</h4><p>èŒƒå›´æœç´¢å°†æ ¹æ®æ‚¨æä¾›çš„è§†é‡èŒƒå›´æä¾›æœç´¢ç»“æœã€‚æ³¨æ„ï¼šå½“æœç´¢èŒƒå›´è¿‡å¤§æ—¶å¯èƒ½ä¼šå‡ºç°æ— ç»“æœçš„æƒ…å†µã€‚<br>ä¸‹é¢ç¤ºä¾‹å±•ç¤ºåœ¨å½“å‰åœ°å›¾è§†é‡èŒƒå›´å†…æœç´¢é“¶è¡Œï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">14</span>);  </span><br><span class="line"><span class="keyword">var</span> local = <span class="keyword">new</span> BMap.LocalSearch(map, &#123;  </span><br><span class="line">renderOptions:&#123;<span class="attr">map</span>: map&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">local.searchInBounds(<span class="string">"é“¶è¡Œ"</span>, map.getBounds());</span><br></pre></td></tr></table></figure></div>

<h4 id="å…¬äº¤å¯¼èˆª"><a href="#å…¬äº¤å¯¼èˆª" class="headerlink" title="å…¬äº¤å¯¼èˆª"></a>å…¬äº¤å¯¼èˆª</h4><p>BMap.TransitRouteç±»æä¾›å…¬äº¤å¯¼èˆªæœç´¢æœåŠ¡ã€‚å’Œæœ¬åœ°æœç´¢ç±»ä¼¼ï¼Œåœ¨æœç´¢ä¹‹å‰éœ€è¦æŒ‡å®šæœç´¢åŒºåŸŸï¼Œæ³¨æ„å…¬äº¤å¯¼èˆªçš„åŒºåŸŸèŒƒå›´åªèƒ½æ˜¯å¸‚ï¼Œè€Œä¸èƒ½æ˜¯çœã€‚å¦‚æœæœç´¢åŒºåŸŸä¸ºBMap.Mapå¯¹è±¡ï¼Œè·¯çº¿ç»“æœä¼šè‡ªåŠ¨æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚å¦‚æœæ‚¨æä¾›äº†ç»“æœå®¹å™¨ï¼Œç›¸åº”çš„è·¯çº¿æè¿°ä¹Ÿä¼šå±•ç¤ºåœ¨é¡µé¢ä¸Šã€‚<br>ä¸‹é¢ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨å…¬äº¤å¯¼èˆªæœåŠ¡ï¼š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">14</span>);   </span><br><span class="line"><span class="keyword">var</span> transit = <span class="keyword">new</span> BMap.TransitRoute(map, &#123;  </span><br><span class="line">renderOptions: &#123;<span class="attr">map</span>: map&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">transit.search(<span class="string">"ç‹åºœäº•"</span>, <span class="string">"è¥¿å•"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="ç»“æœé¢æ¿"><a href="#ç»“æœé¢æ¿" class="headerlink" title="ç»“æœé¢æ¿"></a>ç»“æœé¢æ¿</h4><p>æ‚¨å¯ä»¥æä¾›ç”¨äºå±•ç¤ºæ–‡å­—ç»“æœçš„å®¹å™¨å…ƒç´ ï¼Œæ–¹æ¡ˆç»“æœä¼šè‡ªåŠ¨åœ¨é¡µé¢ä¸­å±•ç°ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">14</span>);  </span><br><span class="line"><span class="keyword">var</span> transit = <span class="keyword">new</span> BMap.TransitRoute(map, &#123;  </span><br><span class="line">renderOptions: &#123;<span class="attr">map</span>: map, <span class="attr">panel</span>: <span class="string">"results"</span>&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">transit.search(<span class="string">"ç‹åºœäº•"</span>, <span class="string">"è¥¿å•"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="æ•°æ®æ¥å£-1"><a href="#æ•°æ®æ¥å£-1" class="headerlink" title="æ•°æ®æ¥å£"></a>æ•°æ®æ¥å£</h4><p>æ‚¨å¯é€šè¿‡æ•°æ®æ¥å£è·å–è¯¦ç»†çš„å…¬äº¤æ–¹æ¡ˆä¿¡æ¯ã€‚å…¬äº¤å¯¼èˆªæœç´¢ç»“æœç”¨BMap.TransitRouteResultæ¥è¡¨ç¤ºï¼Œå…¶ä¸­åŒ…å«äº†è‹¥å¹²å…¬äº¤å‡ºè¡Œæ–¹æ¡ˆï¼ˆBMap.TransitRoutePlanï¼‰ã€‚æ¯æ¡å‡ºè¡Œæ–¹æ¡ˆç”±æ­¥è¡Œçº¿è·¯å’Œå…¬äº¤çº¿è·¯ç»„æˆã€‚ åœ¨èµ·ç‚¹åˆ°ä¸Šè½¦ç‚¹ä¹‹é—´ã€ä¸‹è½¦ç‚¹åˆ°ç»ˆç‚¹ä¹‹é—´ä»¥åŠæ¯ä¸ªæ¢ä¹˜ç«™ä¹‹é—´éƒ½ä¼šå­˜åœ¨æ­¥è¡Œçº¿è·¯ï¼Œå¦‚æœä¸Šè¿°çš„æŸä¸¤ç‚¹ä½ç½®é‡åˆï¼Œé‚£ä¹ˆå…¶é—´çš„æ­¥è¡Œè·¯çº¿é•¿åº¦ä¸º0ã€‚<br>åœ¨ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œé€šè¿‡æ•°æ®æ¥å£å°†ç¬¬ä¸€æ¡æ–¹æ¡ˆçš„è·¯çº¿æ·»åŠ åˆ°åœ°å›¾ä¸Šï¼Œå¹¶å°†æ‰€æœ‰æ–¹æ¡ˆçš„æè¿°ä¿¡æ¯è¾“å‡ºåˆ°é¡µé¢ä¸Š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">12</span>);  </span><br><span class="line"><span class="keyword">var</span> transit = <span class="keyword">new</span> BMap.TransitRoute(<span class="string">"åŒ—äº¬å¸‚"</span>);  </span><br><span class="line">transit.setSearchCompleteCallback(<span class="function"><span class="keyword">function</span>(<span class="params">results</span>)</span>&#123;  </span><br><span class="line"><span class="keyword">if</span> (transit.getStatus() == BMAP_STATUS_SUCCESS)&#123;  </span><br><span class="line"><span class="keyword">var</span> firstPlan = results.getPlan(<span class="number">0</span>);  </span><br><span class="line"><span class="comment">// ç»˜åˆ¶æ­¥è¡Œçº¿è·¯  </span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; firstPlan.getNumRoutes(); i ++)&#123;  </span><br><span class="line">    <span class="keyword">var</span> walk = firstPlan.getRoute(i);  </span><br><span class="line">    <span class="keyword">if</span> (walk.getDistance(<span class="literal">false</span>) &gt; <span class="number">0</span>)&#123;  </span><br><span class="line">     <span class="comment">// æ­¥è¡Œçº¿è·¯æœ‰å¯èƒ½ä¸º0  </span></span><br><span class="line">     map.addOverlay(<span class="keyword">new</span> BMap.Polyline(walk.getPoints(), &#123;<span class="attr">lineColor</span>: <span class="string">"green"</span>&#125;));  </span><br><span class="line">   &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line">   <span class="comment">// ç»˜åˆ¶å…¬äº¤çº¿è·¯  </span></span><br><span class="line">   <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; firstPlan.getNumLines(); i ++)&#123;  </span><br><span class="line">    <span class="keyword">var</span> line = firstPlan.getLine(i);  </span><br><span class="line">    map.addOverlay(<span class="keyword">new</span> BMap.Polyline(line.getPoints()));  </span><br><span class="line">   &#125;  </span><br><span class="line"><span class="comment">// è¾“å‡ºæ–¹æ¡ˆä¿¡æ¯  </span></span><br><span class="line"><span class="keyword">var</span> s = [];  </span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; results.getNumPlans(); i ++)&#123;  </span><br><span class="line">s.push((i + <span class="number">1</span>) + <span class="string">". "</span> + results.getPlan(i).getDescription());  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"log"</span>).innerHTML = s.join(<span class="string">"&lt;BR&gt;"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;)  </span><br><span class="line">transit.search(<span class="string">"ä¸­å…³æ‘"</span>, <span class="string">"å›½è´¸æ¡¥"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="é©¾è½¦å¯¼èˆª"><a href="#é©¾è½¦å¯¼èˆª" class="headerlink" title="é©¾è½¦å¯¼èˆª"></a>é©¾è½¦å¯¼èˆª</h4><p>BMap.DrivingRouteæä¾›é©¾è½¦å¯¼èˆªæœåŠ¡ã€‚ä¸å…¬äº¤å¯¼èˆªä¸åŒçš„æ˜¯ï¼Œé©¾è½¦å¯¼èˆªçš„æœç´¢èŒƒå›´å¯ä»¥è®¾ç½®ä¸ºçœã€‚<br>ä¸‹é¢ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨é©¾è½¦å¯¼èˆªæ¥å£ï¼š </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">14</span>);  </span><br><span class="line"><span class="keyword">var</span> driving = <span class="keyword">new</span> BMap.DrivingRoute(map, &#123;  </span><br><span class="line">	renderOptions: &#123;  </span><br><span class="line">		map: map,  </span><br><span class="line">		autoViewport: <span class="literal">true</span> </span><br><span class="line">	&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">driving.search(<span class="string">"ä¸­å…³æ‘"</span>, <span class="string">"å¤©å®‰é—¨"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="ç»“æœé¢æ¿-1"><a href="#ç»“æœé¢æ¿-1" class="headerlink" title="ç»“æœé¢æ¿"></a>ç»“æœé¢æ¿</h4><p>ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ç»“æœé¢æ¿å‚æ•°ï¼Œæ–¹æ¡ˆæè¿°ä¼šè‡ªåŠ¨å±•ç¤ºåˆ°é¡µé¢ä¸Šã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);</span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">14</span>);  </span><br><span class="line"><span class="keyword">var</span> driving = <span class="keyword">new</span> BMap.DrivingRoute(map, &#123;  </span><br><span class="line">renderOptions: &#123;  </span><br><span class="line">	map  : map,  </span><br><span class="line">	panel : <span class="string">"results"</span>,  </span><br><span class="line">	autoViewport: <span class="literal">true</span> </span><br><span class="line">&#125;  </span><br><span class="line">&#125;);  </span><br><span class="line">driving.search(<span class="string">"ä¸­å…³æ‘"</span>, <span class="string">"å¤©å®‰é—¨"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="æ•°æ®æ¥å£-2"><a href="#æ•°æ®æ¥å£-2" class="headerlink" title="æ•°æ®æ¥å£"></a>æ•°æ®æ¥å£</h4><p>é©¾è½¦å¯¼èˆªæœåŠ¡æä¾›äº†ä¸°å¯Œçš„æ•°æ®æ¥å£ï¼Œé€šè¿‡onSearchCompleteå›è°ƒå‡½æ•°å¾—åˆ°BMap.DrivingRouteResultå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†é©¾è½¦å¯¼èˆªç»“æœæ•°æ®ä¿¡æ¯ã€‚ ç»“æœä¼šåŒ…å«è‹¥å¹²é©¾è½¦æ–¹æ¡ˆï¼ˆç›®å‰ä»…ä¸€æ¡æ–¹æ¡ˆï¼‰ï¼Œæ¯æ¡æ–¹æ¡ˆä¸­åŒ…å«äº†è‹¥å¹²é©¾è½¦çº¿è·¯ï¼ˆå¦‚æœå¯¼èˆªæ–¹æ¡ˆåªåŒ…å«ä¸€ä¸ªç›®çš„åœ°ï¼Œé‚£ä¹ˆé©¾è½¦çº¿è·¯çš„ä¸ªæ•°å°±ä¸º1ï¼Œå¦‚æœæ–¹æ¡ˆåŒ…å«è‹¥å¹²ä¸ªç›®çš„åœ°ï¼Œåˆ™é©¾è½¦çº¿è·¯çš„ä¸ªæ•°ä¼šå¤§äº1ã€‚ç›®å‰APIå°šä¸æ”¯æŒå¤šä¸ªç›®çš„åœ°çš„é©¾è½¦å¯¼èˆªï¼‰ã€‚ æ¯æ¡é©¾è½¦çº¿è·¯åˆä¼šåŒ…å«ä¸€ç³»åˆ—çš„å…³é”®æ­¥éª¤ï¼ˆBMap.Stepï¼‰ï¼Œå…³é”®æ­¥éª¤æè¿°äº†å…·ä½“é©¾è½¦è¡Œé©¶æ–¹æ¡ˆï¼Œå¯é€šè¿‡BMap.Step.getDescription()æ–¹æ³•è·å¾—ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">14</span>);   </span><br><span class="line"><span class="keyword">var</span> options = &#123;  </span><br><span class="line">onSearchComplete: <span class="function"><span class="keyword">function</span>(<span class="params">results</span>)</span>&#123;  </span><br><span class="line"><span class="keyword">if</span> (driving.getStatus() == BMAP_STATUS_SUCCESS)&#123;  </span><br><span class="line"><span class="comment">// è·å–ç¬¬ä¸€æ¡æ–¹æ¡ˆ  </span></span><br><span class="line"><span class="keyword">var</span> plan = results.getPlan(<span class="number">0</span>);   </span><br><span class="line"><span class="comment">// è·å–æ–¹æ¡ˆçš„é©¾è½¦çº¿è·¯  </span></span><br><span class="line"><span class="keyword">var</span> route = plan.getRoute(<span class="number">0</span>);  </span><br><span class="line"><span class="comment">// è·å–æ¯ä¸ªå…³é”®æ­¥éª¤ï¼Œå¹¶è¾“å‡ºåˆ°é¡µé¢  </span></span><br><span class="line"><span class="keyword">var</span> s = [];  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; route.getNumSteps(); i ++)&#123;  </span><br><span class="line"><span class="keyword">var</span> step = route.getStep(i);  </span><br><span class="line">s.push((i + <span class="number">1</span>) + <span class="string">". "</span> + step.getDescription());  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">"log"</span>).innerHTML = s.join(<span class="string">"&lt;BR&gt;"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;  </span><br><span class="line"> &#125;;  </span><br><span class="line"><span class="keyword">var</span> driving = <span class="keyword">new</span> BMap.DrivingRoute(map, options);  </span><br><span class="line">driving.search(<span class="string">"ä¸­å…³æ‘"</span>, <span class="string">"å¤©å®‰é—¨"</span>);</span><br></pre></td></tr></table></figure></div>

<p>æ­¥è¡Œå¯¼èˆªæ¥å£åœ¨ä½¿ç”¨ä¸Šä¸é©¾è½¦å¯¼èˆªä¸€è‡´ï¼Œå…·ä½“è¯·å‚è€ƒAPIæ–‡æ¡£ã€‚ </p>
<h4 id="åœ°å€è§£æ"><a href="#åœ°å€è§£æ" class="headerlink" title="åœ°å€è§£æ"></a>åœ°å€è§£æ</h4><p>åœ°å€è§£æèƒ½å¤Ÿå°†åœ°å€ä¿¡æ¯è½¬æ¢ä¸ºåœ°ç†åæ ‡ç‚¹ä¿¡æ¯ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);  </span><br><span class="line"><span class="comment">// åˆ›å»ºåœ°å€è§£æå™¨å®ä¾‹  </span></span><br><span class="line"><span class="keyword">var</span> myGeo = <span class="keyword">new</span> BMap.Geocoder();  </span><br><span class="line"><span class="comment">// å°†åœ°å€è§£æç»“æœæ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šï¼Œå¹¶è°ƒæ•´åœ°å›¾è§†é‡  </span></span><br><span class="line">myGeo.getPoint(<span class="string">"åŒ—äº¬å¸‚æµ·æ·€åŒºä¸Šåœ°10è¡—10å·"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">point</span>)</span>&#123;  </span><br><span class="line"><span class="keyword">if</span> (point) &#123;  </span><br><span class="line">map.centerAndZoom(point, <span class="number">16</span>);  </span><br><span class="line">map.addOverlay(<span class="keyword">new</span> BMap.Marker(point));  </span><br><span class="line">&#125;  </span><br><span class="line">&#125;, <span class="string">"åŒ—äº¬å¸‚"</span>);</span><br></pre></td></tr></table></figure></div>

<h4 id="å®æ—¶è·¯å†µ"><a href="#å®æ—¶è·¯å†µ" class="headerlink" title="å®æ—¶è·¯å†µ"></a>å®æ—¶è·¯å†µ</h4><p>å®æ—¶è·¯å†µä»¥æ§ä»¶çš„å½¢å¼ä¾›è°ƒç”¨è€…ä½¿ç”¨ï¼Œæ‚¨ä»…éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªæ§ä»¶å®ä¾‹å¹¶æ·»åŠ åˆ°åœ°å›¾ä¸Šå³å¯ã€‚ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> map = <span class="keyword">new</span> BMap.Map(<span class="string">"container"</span>);  </span><br><span class="line">map.centerAndZoom(<span class="keyword">new</span> BMap.Point(<span class="number">116.404</span>, <span class="number">39.915</span>), <span class="number">11</span>);  </span><br><span class="line"><span class="comment">// æ·»åŠ å®æ—¶è·¯å†µæ§ä»¶  </span></span><br><span class="line">map.addControl(<span class="keyword">new</span> BMap.TrafficControl());</span><br></pre></td></tr></table></figure></div>

<p><strong>å®šä¹‰ä¸€ä¸ªæ§ä»¶ç±»ï¼Œå³function</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ZoomControl</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="comment">// è®¾ç½®é»˜è®¤åœé ä½ç½®å’Œåç§»é‡</span></span><br><span class="line"> <span class="keyword">this</span>.defaultAnchor = BMAP_ANCHOR_TOP_LEFT;</span><br><span class="line"> <span class="keyword">this</span>.defaultOffset = <span class="keyword">new</span> BMap.Size(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>é€šè¿‡JavaScriptçš„prototypeå±æ€§ç»§æ‰¿äºBMap.Control</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">ZoomControl.prototype = <span class="keyword">new</span> BMap.Control();</span><br></pre></td></tr></table></figure></div>

<p><strong>è‡ªå®šä¹‰æ§ä»¶å¿…é¡»å®ç°è‡ªå·±çš„initializeæ–¹æ³•ï¼Œå¹¶ä¸”å°†æ§ä»¶çš„DOMå…ƒç´ è¿”å›</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨æœ¬æ–¹æ³•ä¸­åˆ›å»ºä¸ªdivå…ƒç´ ä½œä¸ºæ§ä»¶çš„å®¹å™¨ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°åœ°å›¾å®¹å™¨ä¸­</span></span><br><span class="line">ZoomControl.prototype.initialize = <span class="function"><span class="keyword">function</span>(<span class="params">map</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// åˆ›å»ºä¸€ä¸ªDOMå…ƒç´ </span></span><br><span class="line"> <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">"div"</span>);</span><br><span class="line"></span><br><span class="line"> <span class="comment">// æ·»åŠ æ–‡å­—è¯´æ˜</span></span><br><span class="line"> div.appendChild(<span class="built_in">document</span>.createTextNode(<span class="string">"æ”¾å¤§2çº§"</span>));</span><br><span class="line"></span><br><span class="line"> <span class="comment">// è®¾ç½®æ ·å¼</span></span><br><span class="line"> div.style.cursor = <span class="string">"pointer"</span>;</span><br><span class="line"> div.style.border = <span class="string">"1px solid gray"</span>;</span><br><span class="line"> div.style.backgroundColor = <span class="string">"white"</span>;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// ç»‘å®šäº‹ä»¶ï¼Œç‚¹å‡»ä¸€æ¬¡æ”¾å¤§ä¸¤çº§</span></span><br><span class="line"> div.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  map.zoomTo(map.getZoom() + <span class="number">2</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="comment">// æ·»åŠ DOMå…ƒç´ åˆ°åœ°å›¾ä¸­</span></span><br><span class="line"> map.getContainer().appendChild(div);</span><br><span class="line"> <span class="comment">// å°†DOMå…ƒç´ è¿”å›</span></span><br><span class="line"> <span class="keyword">return</span> div;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆ›å»ºæ§ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myZoomCtrl = <span class="keyword">new</span> ZoomControl();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ åˆ°åœ°å›¾å½“ä¸­</span></span><br><span class="line">map.addControl(myZoomCtrl);</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>ç™¾åº¦åœ°å›¾</tag>
      </tags>
  </entry>
  <entry>
    <title>è®¡ç®—æŸå¹´æŸæœˆæŸä¸€å¤©æ˜¯ç¬¬å‡ å¤©</title>
    <url>/blog/Python/Python_id_04.html</url>
    <content><![CDATA[<p>ã€€å®ç°è¾“å…¥æŸå¹´æŸæœˆæŸæ—¥è®¡ç®—å‡ºè¿™ä¸€å¤©æ˜¯è¯¥å¹´ç¬¬å‡ å¤©çš„æ–¹æ³•</p>
<a id="more"></a>

<h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">list_day = [<span class="number">0</span>,<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</span><br><span class="line">year = int(input(<span class="string">'è¯·è¾“å…¥å¹´'</span>))</span><br><span class="line">month = int(input(<span class="string">'è¯·è¾“å…¥æœˆ'</span>))</span><br><span class="line">day = int(input(<span class="string">'è¯·è¾“å…¥æ—¥'</span>))</span><br><span class="line">month_day = <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> <span class="number">0</span>&lt;month&lt;=<span class="number">12</span>:</span><br><span class="line">    <span class="keyword">if</span> year % <span class="number">400</span> == <span class="number">0</span> <span class="keyword">or</span> ((year % <span class="number">4</span> ==<span class="number">0</span>) <span class="keyword">and</span> (year % <span class="number">100</span> != <span class="number">0</span>)):</span><br><span class="line">        print(<span class="string">'&#123;&#125;æ˜¯é—°å¹´'</span>.format(year))</span><br><span class="line">        list_day[<span class="number">1</span>] = <span class="number">29</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(month<span class="number">-1</span>):</span><br><span class="line">            month_day += list_day[i]</span><br><span class="line">        <span class="keyword">if</span> day &lt;= list_day[month]:</span><br><span class="line">            count_day = month_day + day</span><br><span class="line">            print(count_day)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'day error'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(month):</span><br><span class="line">            month_day += list_day[i]</span><br><span class="line">        <span class="keyword">if</span> day &lt;= list_day[month]:</span><br><span class="line">            count_day = month_day + day</span><br><span class="line">            print(count_day)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'day error'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'month error'</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">list_day = [<span class="number">0</span>,<span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>]</span><br><span class="line">year = int(input(<span class="string">'è¯·è¾“å…¥å¹´'</span>))</span><br><span class="line">month = int(input(<span class="string">'è¯·è¾“å…¥æœˆ'</span>))</span><br><span class="line">day = int(input(<span class="string">'è¯·è¾“å…¥æ—¥'</span>))</span><br><span class="line"><span class="keyword">if</span> <span class="number">0</span>&lt; month &lt;=<span class="number">12</span>:</span><br><span class="line">    sum = list_day[month<span class="number">-1</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'data error'</span>)</span><br><span class="line">sum += day</span><br><span class="line"></span><br><span class="line">leap = <span class="number">0</span> <span class="comment">#</span></span><br><span class="line"><span class="keyword">if</span> year % <span class="number">400</span> == <span class="number">0</span> <span class="keyword">or</span> ((year % <span class="number">4</span> ==<span class="number">0</span>) <span class="keyword">and</span> (year % <span class="number">100</span> != <span class="number">0</span>)):</span><br><span class="line">    leap = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> leap == <span class="number">1</span> <span class="keyword">and</span> month &gt; <span class="number">2</span>:</span><br><span class="line">    sum += <span class="number">1</span></span><br><span class="line">print(sum)</span><br></pre></td></tr></table></figure></div>

<h3 id="æ–¹æ³•ä¸‰"><a href="#æ–¹æ³•ä¸‰" class="headerlink" title="æ–¹æ³•ä¸‰"></a>æ–¹æ³•ä¸‰</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥ä½¿ç”¨Pythonå†…ç½®æ¨¡å—datetimeçš„æ ¼å¼è½¬æ¢åŠŸèƒ½å¾—åˆ°ç»“æœ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">function2</span><span class="params">(year, month, day)</span>:</span></span><br><span class="line">    date = datetime.date(year, month, day)</span><br><span class="line">    <span class="comment"># è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> int(date.strftime(<span class="string">'%j'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># æ•è·å¼‚å¸¸ï¼Œé¿å…è¾“å…¥é”™è¯¯ç›´æ¥é€ æˆç¨‹åºå´©æºƒ</span></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># è¾“å…¥æŸ¥è¯¢çš„ä¿¡æ¯</span></span><br><span class="line">            year = int(input(<span class="string">"è¯·è¾“å…¥å¹´ä»½:"</span>))</span><br><span class="line">            month = int(input(<span class="string">"è¯·è¾“å…¥æœˆä»½:"</span>))</span><br><span class="line">            day = int(input(<span class="string">"è¯·è¾“å…¥æ—¥æœŸ:"</span>))</span><br><span class="line">            <span class="comment"># è°ƒç”¨å‡½æ•°ï¼Œè¾“å‡ºç»“æœ</span></span><br><span class="line">            print(function2(year, month, day))</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># è¾“å‡ºå¼‚å¸¸</span></span><br><span class="line">            print(<span class="string">"è¾“å…¥æœ‰è¯¯"</span>)</span><br><span class="line">            <span class="comment"># åœæ­¢å¾ªç¯</span></span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>redisæŒä¹…åŒ–</title>
    <url>/blog/Redis/Redis_id_01.html</url>
    <content><![CDATA[<p>redisæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®åº“ï¼Œæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“å†…å­˜çš„æ•°æ®å˜åŒ–æ˜¯å¾ˆå¿«çš„ï¼Œä¹Ÿå®¹æ˜“å‘ç”Ÿä¸¢å¤±ã€‚å¹¸å¥½Redisè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†æŒä¹…åŒ–çš„æœºåˆ¶ï¼Œåˆ†åˆ«æ˜¯RDB(Redis DataBase)å’ŒAOF(Append Only File)ã€‚</p>
<a id="more"></a>

<p><strong>ä¸€ã€æŒä¹…åŒ–æµç¨‹</strong></p>
<p>æ—¢ç„¶redisçš„æ•°æ®å¯ä»¥ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªæµç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p>
<p>è¦æœ‰ä¸‹é¢äº”ä¸ªè¿‡ç¨‹ï¼š</p>
<p>ï¼ˆ1ï¼‰å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€å†™æ“ä½œ(æ•°æ®åœ¨å®¢æˆ·ç«¯çš„å†…å­˜ä¸­)ã€‚</p>
<p>ï¼ˆ2ï¼‰æ•°æ®åº“æœåŠ¡ç«¯æ¥æ”¶åˆ°å†™è¯·æ±‚çš„æ•°æ®(æ•°æ®åœ¨æœåŠ¡ç«¯çš„å†…å­˜ä¸­)ã€‚</p>
<p>ï¼ˆ3ï¼‰æœåŠ¡ç«¯è°ƒç”¨writeè¿™ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå°†æ•°æ®å¾€ç£ç›˜ä¸Šå†™(æ•°æ®åœ¨ç³»ç»Ÿå†…å­˜çš„ç¼“å†²åŒºä¸­)ã€‚</p>
<p>ï¼ˆ4ï¼‰æ“ä½œç³»ç»Ÿå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è½¬ç§»åˆ°ç£ç›˜æ§åˆ¶å™¨ä¸Š(æ•°æ®åœ¨ç£ç›˜ç¼“å­˜ä¸­)ã€‚</p>
<p>ï¼ˆ5ï¼‰ç£ç›˜æ§åˆ¶å™¨å°†æ•°æ®å†™åˆ°ç£ç›˜çš„ç‰©ç†ä»‹è´¨ä¸­(æ•°æ®çœŸæ­£è½åˆ°ç£ç›˜ä¸Š)ã€‚</p>
<p>è¿™5ä¸ªè¿‡ç¨‹æ˜¯åœ¨ç†æƒ³æ¡ä»¶ä¸‹ä¸€ä¸ªæ­£å¸¸çš„ä¿å­˜æµç¨‹ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„æœºå™¨ç­‰ç­‰éƒ½ä¼šæœ‰å„ç§å„æ ·çš„æ•…éšœï¼Œè¿™é‡Œåˆ’åˆ†äº†ä¸¤ç§æƒ…å†µï¼š</p>
<p>ï¼ˆ1ï¼‰Redisæ•°æ®åº“å‘ç”Ÿæ•…éšœï¼Œåªè¦åœ¨ä¸Šé¢çš„ç¬¬ä¸‰æ­¥æ‰§è¡Œå®Œæ¯•ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒä¹…åŒ–ä¿å­˜ï¼Œå‰©ä¸‹çš„ä¸¤æ­¥ç”±æ“ä½œç³»ç»Ÿæ›¿æˆ‘ä»¬å®Œæˆã€‚</p>
<p>ï¼ˆ2ï¼‰æ“ä½œç³»ç»Ÿå‘ç”Ÿæ•…éšœï¼Œå¿…é¡»ä¸Šé¢5æ­¥éƒ½å®Œæˆæ‰å¯ä»¥ã€‚</p>
<p>åœ¨è¿™é‡Œåªè€ƒè™‘äº†ä¿å­˜çš„è¿‡ç¨‹å¯èƒ½å‘ç”Ÿçš„æ•…éšœï¼Œå…¶å®ä¿å­˜çš„æ•°æ®ä¹Ÿæœ‰å¯èƒ½å‘ç”ŸæŸåï¼Œéœ€è¦ä¸€å®šçš„æ¢å¤æœºåˆ¶ï¼Œä¸è¿‡åœ¨è¿™é‡Œå°±ä¸å†å»¶ä¼¸äº†ã€‚ç°åœ¨ä¸»è¦è€ƒè™‘çš„æ˜¯rediså¦‚ä½•æ¥å®ç°ä¸Šé¢5ä¸ªä¿å­˜ç£ç›˜çš„æ­¥éª¤ã€‚å®ƒæä¾›äº†ä¸¤ç§ç­–ç•¥æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯RDBå’ŒAOFã€‚</p>
<p><strong>äºŒã€RDBæœºåˆ¶</strong></p>
<p>RDBå…¶å®å°±æ˜¯æŠŠæ•°æ®ä»¥å¿«ç…§çš„å½¢å¼ä¿å­˜åœ¨ç£ç›˜ä¸Šã€‚ä»€ä¹ˆæ˜¯å¿«ç…§å‘¢ï¼Œä½ å¯ä»¥ç†è§£æˆæŠŠå½“å‰æ—¶åˆ»çš„æ•°æ®æ‹æˆä¸€å¼ ç…§ç‰‡ä¿å­˜ä¸‹æ¥ã€‚</p>
<p>RDBæŒä¹…åŒ–æ˜¯æŒ‡åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥ç£ç›˜ã€‚ä¹Ÿæ˜¯é»˜è®¤çš„æŒä¹…åŒ–æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æ˜¯å°±æ˜¯å°†å†…å­˜ä¸­æ•°æ®ä»¥å¿«ç…§çš„æ–¹å¼å†™å…¥åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ä¸­,é»˜è®¤çš„æ–‡ä»¶åä¸ºdump.rdbã€‚</p>
<p>åœ¨æˆ‘ä»¬å®‰è£…äº†redisä¹‹åï¼Œæ‰€æœ‰çš„é…ç½®éƒ½æ˜¯åœ¨redis.confæ–‡ä»¶ä¸­ï¼Œé‡Œé¢ä¿å­˜äº†RDBå’ŒAOFä¸¤ç§æŒä¹…åŒ–æœºåˆ¶çš„å„ç§é…ç½®ã€‚</p>
<p>æ—¢ç„¶RDBæœºåˆ¶æ˜¯é€šè¿‡æŠŠæŸä¸ªæ—¶åˆ»çš„æ‰€æœ‰æ•°æ®ç”Ÿæˆä¸€ä¸ªå¿«ç…§æ¥ä¿å­˜ï¼Œé‚£ä¹ˆå°±åº”è¯¥æœ‰ä¸€ç§è§¦å‘æœºåˆ¶ï¼Œæ˜¯å®ç°è¿™ä¸ªè¿‡ç¨‹ã€‚å¯¹äºRDBæ¥è¯´ï¼Œæä¾›äº†ä¸‰ç§æœºåˆ¶ï¼šsaveã€bgsaveã€è‡ªåŠ¨åŒ–ã€‚æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€ä¸‹</p>
<p><strong>1ã€saveè§¦å‘æ–¹å¼</strong></p>
<p>è¯¥å‘½ä»¤ä¼šé˜»å¡å½“å‰RedisæœåŠ¡å™¨ï¼Œæ‰§è¡Œsaveå‘½ä»¤æœŸé—´ï¼ŒRedisä¸èƒ½å¤„ç†å…¶ä»–å‘½ä»¤ï¼Œç›´åˆ°RDBè¿‡ç¨‹å®Œæˆä¸ºæ­¢ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/redis7.jpeg">

<p>æ‰§è¡Œå®Œæˆæ—¶å€™å¦‚æœå­˜åœ¨è€çš„RDBæ–‡ä»¶ï¼Œå°±æŠŠæ–°çš„æ›¿ä»£æ‰æ—§çš„ã€‚æˆ‘ä»¬çš„å®¢æˆ·ç«¯å¯èƒ½éƒ½æ˜¯å‡ ä¸‡æˆ–è€…æ˜¯å‡ åä¸‡ï¼Œè¿™ç§æ–¹å¼æ˜¾ç„¶ä¸å¯å–ã€‚</p>
<p><strong>2ã€bgsaveè§¦å‘æ–¹å¼</strong></p>
<p>æ‰§è¡Œè¯¥å‘½ä»¤æ—¶ï¼ŒRedisä¼šåœ¨åå°å¼‚æ­¥è¿›è¡Œå¿«ç…§æ“ä½œï¼Œå¿«ç…§åŒæ—¶è¿˜å¯ä»¥å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/reis2.jpeg">

<p>å…·ä½“æ“ä½œæ˜¯Redisè¿›ç¨‹æ‰§è¡Œforkæ“ä½œåˆ›å»ºå­è¿›ç¨‹ï¼ŒRDBæŒä¹…åŒ–è¿‡ç¨‹ç”±å­è¿›ç¨‹è´Ÿè´£ï¼Œå®Œæˆåè‡ªåŠ¨ç»“æŸã€‚é˜»å¡åªå‘ç”Ÿåœ¨forké˜¶æ®µï¼Œä¸€èˆ¬æ—¶é—´å¾ˆçŸ­ã€‚åŸºæœ¬ä¸Š Redis å†…éƒ¨æ‰€æœ‰çš„RDBæ“ä½œéƒ½æ˜¯é‡‡ç”¨ bgsave å‘½ä»¤ã€‚</p>
<p><strong>3ã€è‡ªåŠ¨è§¦å‘</strong></p>
<p>è‡ªåŠ¨è§¦å‘æ˜¯ç”±æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶æ¥å®Œæˆçš„ã€‚åœ¨redis.confé…ç½®æ–‡ä»¶ä¸­ï¼Œé‡Œé¢æœ‰å¦‚ä¸‹é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å»è®¾ç½®ï¼š</p>
<p><strong>â‘ saveï¼š</strong>è¿™é‡Œæ˜¯ç”¨æ¥é…ç½®è§¦å‘ Redisçš„ RDB æŒä¹…åŒ–æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä»€ä¹ˆæ—¶å€™å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ã€‚æ¯”å¦‚â€œsave m nâ€ã€‚è¡¨ç¤ºmç§’å†…æ•°æ®é›†å­˜åœ¨næ¬¡ä¿®æ”¹æ—¶ï¼Œè‡ªåŠ¨è§¦å‘bgsaveã€‚</p>
<p>é»˜è®¤å¦‚ä¸‹é…ç½®ï¼š</p>
<p>#è¡¨ç¤º900 ç§’å†…å¦‚æœè‡³å°‘æœ‰ 1 ä¸ª key çš„å€¼å˜åŒ–ï¼Œåˆ™ä¿å­˜save 900 1#è¡¨ç¤º300 ç§’å†…å¦‚æœè‡³å°‘æœ‰ 10 ä¸ª key çš„å€¼å˜åŒ–ï¼Œåˆ™ä¿å­˜save 300 10#è¡¨ç¤º60 ç§’å†…å¦‚æœè‡³å°‘æœ‰ 10000 ä¸ª key çš„å€¼å˜åŒ–ï¼Œåˆ™ä¿å­˜save 60 10000</p>
<p>ä¸éœ€è¦æŒä¹…åŒ–ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ³¨é‡Šæ‰æ‰€æœ‰çš„ save è¡Œæ¥åœç”¨ä¿å­˜åŠŸèƒ½ã€‚</p>
<p><strong>â‘¡stop-writes-on-bgsave-error ï¼š</strong>é»˜è®¤å€¼ä¸ºyesã€‚å½“å¯ç”¨äº†RDBä¸”æœ€åä¸€æ¬¡åå°ä¿å­˜æ•°æ®å¤±è´¥ï¼ŒRedisæ˜¯å¦åœæ­¢æ¥æ”¶æ•°æ®ã€‚è¿™ä¼šè®©ç”¨æˆ·æ„è¯†åˆ°æ•°æ®æ²¡æœ‰æ­£ç¡®æŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼Œå¦åˆ™æ²¡æœ‰äººä¼šæ³¨æ„åˆ°ç¾éš¾ï¼ˆdisasterï¼‰å‘ç”Ÿäº†ã€‚å¦‚æœRedisé‡å¯äº†ï¼Œé‚£ä¹ˆåˆå¯ä»¥é‡æ–°å¼€å§‹æ¥æ”¶æ•°æ®äº†</p>
<p><strong>â‘¢rdbcompression ï¼›</strong>é»˜è®¤å€¼æ˜¯yesã€‚å¯¹äºå­˜å‚¨åˆ°ç£ç›˜ä¸­çš„å¿«ç…§ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦è¿›è¡Œå‹ç¼©å­˜å‚¨ã€‚</p>
<p><strong>â‘£rdbchecksum ï¼š</strong>é»˜è®¤å€¼æ˜¯yesã€‚åœ¨å­˜å‚¨å¿«ç…§åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®©redisä½¿ç”¨CRC64ç®—æ³•æ¥è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä½†æ˜¯è¿™æ ·åšä¼šå¢åŠ å¤§çº¦10%çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¦‚æœå¸Œæœ›è·å–åˆ°æœ€å¤§çš„æ€§èƒ½æå‡ï¼Œå¯ä»¥å…³é—­æ­¤åŠŸèƒ½ã€‚</p>
<p><strong>â‘¤dbfilename ï¼š</strong>è®¾ç½®å¿«ç…§çš„æ–‡ä»¶åï¼Œé»˜è®¤æ˜¯ dump.rdb</p>
<p><strong>â‘¥dirï¼š</strong>è®¾ç½®å¿«ç…§æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œè¿™ä¸ªé…ç½®é¡¹ä¸€å®šæ˜¯ä¸ªç›®å½•ï¼Œè€Œä¸èƒ½æ˜¯æ–‡ä»¶åã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™äº›é…ç½®æ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚å› ä¸ºç¬¬ä¸‰ç§æ–¹å¼æ˜¯é…ç½®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹å‰ä¸¤ç§è¿›è¡Œä¸€ä¸ªå¯¹æ¯”ï¼š</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/save.jpeg">

<p><strong>4ã€RDB çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿</strong></p>
<p>â‘ ã€ä¼˜åŠ¿</p>
<p>ï¼ˆ1ï¼‰RDBæ–‡ä»¶ç´§å‡‘ï¼Œå…¨é‡å¤‡ä»½ï¼Œéå¸¸é€‚åˆç”¨äºè¿›è¡Œå¤‡ä»½å’Œç¾éš¾æ¢å¤ã€‚</p>
<p>ï¼ˆ2ï¼‰ç”ŸæˆRDBæ–‡ä»¶çš„æ—¶å€™ï¼Œredisä¸»è¿›ç¨‹ä¼šfork()ä¸€ä¸ªå­è¿›ç¨‹æ¥å¤„ç†æ‰€æœ‰ä¿å­˜å·¥ä½œï¼Œä¸»è¿›ç¨‹ä¸éœ€è¦è¿›è¡Œä»»ä½•ç£ç›˜IOæ“ä½œã€‚</p>
<p>ï¼ˆ3ï¼‰RDB åœ¨æ¢å¤å¤§æ•°æ®é›†æ—¶çš„é€Ÿåº¦æ¯” AOF çš„æ¢å¤é€Ÿåº¦è¦å¿«ã€‚</p>
<p>â‘¡ã€åŠ£åŠ¿</p>
<p>RDBå¿«ç…§æ˜¯ä¸€æ¬¡å…¨é‡å¤‡ä»½ï¼Œå­˜å‚¨çš„æ˜¯å†…å­˜æ•°æ®çš„äºŒè¿›åˆ¶åºåˆ—åŒ–å½¢å¼ï¼Œå­˜å‚¨ä¸Šéå¸¸ç´§å‡‘ã€‚å½“è¿›è¡Œå¿«ç…§æŒä¹…åŒ–æ—¶ï¼Œä¼šå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹ä¸“é—¨è´Ÿè´£å¿«ç…§æŒä¹…åŒ–ï¼Œå­è¿›ç¨‹ä¼šæ‹¥æœ‰çˆ¶è¿›ç¨‹çš„å†…å­˜æ•°æ®ï¼Œçˆ¶è¿›ç¨‹ä¿®æ”¹å†…å­˜å­è¿›ç¨‹ä¸ä¼šååº”å‡ºæ¥ï¼Œæ‰€ä»¥åœ¨å¿«ç…§æŒä¹…åŒ–æœŸé—´ä¿®æ”¹çš„æ•°æ®ä¸ä¼šè¢«ä¿å­˜ï¼Œå¯èƒ½ä¸¢å¤±æ•°æ®ã€‚</p>
<p><strong>ä¸‰ã€AOFæœºåˆ¶</strong></p>
<p>å…¨é‡å¤‡ä»½æ€»æ˜¯è€—æ—¶çš„ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æä¾›ä¸€ç§æ›´åŠ é«˜æ•ˆçš„æ–¹å¼AOFï¼Œå·¥ä½œæœºåˆ¶å¾ˆç®€å•ï¼Œredisä¼šå°†æ¯ä¸€ä¸ªæ”¶åˆ°çš„å†™å‘½ä»¤éƒ½é€šè¿‡writeå‡½æ•°è¿½åŠ åˆ°æ–‡ä»¶ä¸­ã€‚é€šä¿—çš„ç†è§£å°±æ˜¯æ—¥å¿—è®°å½•ã€‚</p>
<p><strong>1ã€æŒä¹…åŒ–åŸç†</strong></p>
<p>ä»–çš„åŸç†çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/redis4.jpeg">

<p>æ¯å½“æœ‰ä¸€ä¸ªå†™å‘½ä»¤è¿‡æ¥æ—¶ï¼Œå°±ç›´æ¥ä¿å­˜åœ¨æˆ‘ä»¬çš„AOFæ–‡ä»¶ä¸­ã€‚</p>
<p><strong>2ã€æ–‡ä»¶é‡å†™åŸç†</strong></p>
<p>AOFçš„æ–¹å¼ä¹ŸåŒæ—¶å¸¦æ¥äº†å¦ä¸€ä¸ªé—®é¢˜ã€‚æŒä¹…åŒ–æ–‡ä»¶ä¼šå˜çš„è¶Šæ¥è¶Šå¤§ã€‚ä¸ºäº†å‹ç¼©aofçš„æŒä¹…åŒ–æ–‡ä»¶ã€‚redisæä¾›äº†bgrewriteaofå‘½ä»¤ã€‚å°†å†…å­˜ä¸­çš„æ•°æ®ä»¥å‘½ä»¤çš„æ–¹å¼ä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼ŒåŒæ—¶ä¼šforkå‡ºä¸€æ¡æ–°è¿›ç¨‹æ¥å°†æ–‡ä»¶é‡å†™ã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/reis2.jpeg">

<p>é‡å†™aofæ–‡ä»¶çš„æ“ä½œï¼Œå¹¶æ²¡æœ‰è¯»å–æ—§çš„aofæ–‡ä»¶ï¼Œè€Œæ˜¯å°†æ•´ä¸ªå†…å­˜ä¸­çš„æ•°æ®åº“å†…å®¹ç”¨å‘½ä»¤çš„æ–¹å¼é‡å†™äº†ä¸€ä¸ªæ–°çš„aofæ–‡ä»¶ï¼Œè¿™ç‚¹å’Œå¿«ç…§æœ‰ç‚¹ç±»ä¼¼ã€‚</p>
<p><strong>3ã€AOFä¹Ÿæœ‰ä¸‰ç§è§¦å‘æœºåˆ¶</strong></p>
<p>ï¼ˆ1ï¼‰æ¯ä¿®æ”¹åŒæ­¥alwaysï¼šåŒæ­¥æŒä¹…åŒ– æ¯æ¬¡å‘ç”Ÿæ•°æ®å˜æ›´ä¼šè¢«ç«‹å³è®°å½•åˆ°ç£ç›˜ æ€§èƒ½è¾ƒå·®ä½†æ•°æ®å®Œæ•´æ€§æ¯”è¾ƒå¥½</p>
<p>ï¼ˆ2ï¼‰æ¯ç§’åŒæ­¥everysecï¼šå¼‚æ­¥æ“ä½œï¼Œæ¯ç§’è®°å½• å¦‚æœä¸€ç§’å†…å®•æœºï¼Œæœ‰æ•°æ®ä¸¢å¤±</p>
<p>ï¼ˆ3ï¼‰ä¸åŒnoï¼šä»ä¸åŒæ­¥</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/redis6.jpeg">

<p><strong>4ã€ä¼˜ç‚¹</strong></p>
<p>ï¼ˆ1ï¼‰AOFå¯ä»¥æ›´å¥½çš„ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±ï¼Œä¸€èˆ¬AOFä¼šæ¯éš”1ç§’ï¼Œé€šè¿‡ä¸€ä¸ªåå°çº¿ç¨‹æ‰§è¡Œä¸€æ¬¡fsyncæ“ä½œï¼Œæœ€å¤šä¸¢å¤±1ç§’é’Ÿçš„æ•°æ®ã€‚ï¼ˆ2ï¼‰AOFæ—¥å¿—æ–‡ä»¶æ²¡æœ‰ä»»ä½•ç£ç›˜å¯»å€çš„å¼€é”€ï¼Œå†™å…¥æ€§èƒ½éå¸¸é«˜ï¼Œæ–‡ä»¶ä¸å®¹æ˜“ç ´æŸã€‚</p>
<p>ï¼ˆ3ï¼‰AOFæ—¥å¿—æ–‡ä»¶å³ä½¿è¿‡å¤§çš„æ—¶å€™ï¼Œå‡ºç°åå°é‡å†™æ“ä½œï¼Œä¹Ÿä¸ä¼šå½±å“å®¢æˆ·ç«¯çš„è¯»å†™ã€‚</p>
<p>ï¼ˆ4ï¼‰AOFæ—¥å¿—æ–‡ä»¶çš„å‘½ä»¤é€šè¿‡éå¸¸å¯è¯»çš„æ–¹å¼è¿›è¡Œè®°å½•ï¼Œè¿™ä¸ªç‰¹æ€§éå¸¸é€‚åˆåšç¾éš¾æ€§çš„è¯¯åˆ é™¤çš„ç´§æ€¥æ¢å¤ã€‚æ¯”å¦‚æŸäººä¸å°å¿ƒç”¨flushallå‘½ä»¤æ¸…ç©ºäº†æ‰€æœ‰æ•°æ®ï¼Œåªè¦è¿™ä¸ªæ—¶å€™åå°rewriteè¿˜æ²¡æœ‰å‘ç”Ÿï¼Œé‚£ä¹ˆå°±å¯ä»¥ç«‹å³æ‹·è´AOFæ–‡ä»¶ï¼Œå°†æœ€åä¸€æ¡flushallå‘½ä»¤ç»™åˆ äº†ï¼Œç„¶åå†å°†è¯¥AOFæ–‡ä»¶æ”¾å›å»ï¼Œå°±å¯ä»¥é€šè¿‡æ¢å¤æœºåˆ¶ï¼Œè‡ªåŠ¨æ¢å¤æ‰€æœ‰æ•°æ®</p>
<p><strong>5ã€ç¼ºç‚¹</strong></p>
<p>ï¼ˆ1ï¼‰å¯¹äºåŒä¸€ä»½æ•°æ®æ¥è¯´ï¼ŒAOFæ—¥å¿—æ–‡ä»¶é€šå¸¸æ¯”RDBæ•°æ®å¿«ç…§æ–‡ä»¶æ›´å¤§</p>
<p>ï¼ˆ2ï¼‰AOFå¼€å¯åï¼Œæ”¯æŒçš„å†™QPSä¼šæ¯”RDBæ”¯æŒçš„å†™QPSä½ï¼Œå› ä¸ºAOFä¸€èˆ¬ä¼šé…ç½®æˆæ¯ç§’fsyncä¸€æ¬¡æ—¥å¿—æ–‡ä»¶ï¼Œå½“ç„¶ï¼Œæ¯ç§’ä¸€æ¬¡fsyncï¼Œæ€§èƒ½ä¹Ÿè¿˜æ˜¯å¾ˆé«˜çš„</p>
<p>ï¼ˆ3ï¼‰ä»¥å‰AOFå‘ç”Ÿè¿‡bugï¼Œå°±æ˜¯é€šè¿‡AOFè®°å½•çš„æ—¥å¿—ï¼Œè¿›è¡Œæ•°æ®æ¢å¤çš„æ—¶å€™ï¼Œæ²¡æœ‰æ¢å¤ä¸€æ¨¡ä¸€æ ·çš„æ•°æ®å‡ºæ¥ã€‚</p>
<p><strong>å››ã€RDBå’ŒAOFåˆ°åº•è¯¥å¦‚ä½•é€‰æ‹©</strong></p>
<p>é€‰æ‹©çš„è¯ï¼Œä¸¤è€…åŠ ä¸€èµ·æ‰æ›´å¥½ã€‚å› ä¸ºä¸¤ä¸ªæŒä¹…åŒ–æœºåˆ¶ä½ æ˜ç™½äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯çœ‹è‡ªå·±çš„éœ€æ±‚äº†ï¼Œéœ€æ±‚ä¸åŒé€‰æ‹©çš„ä¹Ÿä¸ä¸€å®šï¼Œä½†æ˜¯é€šå¸¸éƒ½æ˜¯ç»“åˆä½¿ç”¨ã€‚æœ‰ä¸€å¼ å›¾å¯ä¾›æ€»ç»“ï¼š</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/redis5.jpeg">

<p>ç»“æŸã€‚</p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>redisæ•°æ®æ·˜æ±°æœºåˆ¶</title>
    <url>/blog/Redis/Redis_id_03.html</url>
    <content><![CDATA[<h2 id="è¿‡æœŸç­–ç•¥"><a href="#è¿‡æœŸç­–ç•¥" class="headerlink" title="è¿‡æœŸç­–ç•¥"></a>è¿‡æœŸç­–ç•¥</h2><p>ã€€ã€€æˆ‘ä»¬set keyçš„æ—¶å€™ï¼Œéƒ½å¯ä»¥ç»™ä¸€ä¸ªexpire timeï¼Œå°±æ˜¯è¿‡æœŸæ—¶é—´ï¼ŒæŒ‡å®šè¿™ä¸ªkeyæ¯”å¦‚è¯´åªèƒ½å­˜æ´»1ä¸ªå°æ—¶ï¼Œæˆ‘ä»¬è‡ªå·±å¯ä»¥æŒ‡å®šç¼“å­˜åˆ°æœŸå°±å¤±æ•ˆã€‚<br>ã€€ã€€å¦‚æœå‡è®¾ä½ è®¾ç½®ä¸€ä¸ªä¸€æ‰¹keyåªèƒ½å­˜æ´»1ä¸ªå°æ—¶ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥1å°æ—¶åï¼Œredisæ˜¯æ€ä¹ˆå¯¹è¿™æ‰¹keyè¿›è¡Œåˆ é™¤çš„ï¼Ÿ<br>ã€€ã€€ç­”æ¡ˆæ˜¯ï¼šå®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤</p>
<a id="more"></a>

<p>ã€€ã€€æ‰€è°“å®šæœŸåˆ é™¤ï¼ŒæŒ‡çš„æ˜¯redisé»˜è®¤æ˜¯æ¯éš”100mså°±éšæœºæŠ½å–ä¸€äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyï¼Œæ£€æŸ¥å…¶æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœè¿‡æœŸå°±åˆ é™¤ã€‚<br>ã€€ã€€æ³¨æ„ï¼Œè¿™é‡Œå¯ä¸æ˜¯æ¯éš”100mså°±éå†æ‰€æœ‰çš„è®¾ç½®è¿‡æœŸæ—¶é—´çš„keyï¼Œé‚£æ ·å°±æ˜¯ä¸€åœºæ€§èƒ½ä¸Šçš„ç¾éš¾ã€‚<br>ã€€ã€€å®é™…ä¸Šredisæ˜¯æ¯éš”100mséšæœºæŠ½å–ä¸€äº›keyæ¥æ£€æŸ¥å’Œåˆ é™¤çš„ã€‚<br>ã€€ã€€ä½†æ˜¯ï¼Œå®šæœŸåˆ é™¤å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸkeyåˆ°äº†æ—¶é—´å¹¶æ²¡æœ‰è¢«åˆ é™¤æ‰ï¼Œæ‰€ä»¥å°±å¾—é æƒ°æ€§åˆ é™¤äº†ã€‚<br>ã€€ã€€è¿™å°±æ˜¯è¯´ï¼Œåœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹ ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´é‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸäº†æ­¤æ—¶å°±ä¼šåˆ é™¤ï¼Œä¸ä¼šç»™ä½ è¿”å›ä»»ä½•ä¸œè¥¿ã€‚<br>ã€€ã€€å¹¶ä¸æ˜¯keyåˆ°æ—¶é—´å°±è¢«åˆ é™¤æ‰ï¼Œè€Œæ˜¯ä½ æŸ¥è¯¢è¿™ä¸ªkeyçš„æ—¶å€™ï¼Œrediså†æ‡’æƒ°çš„æ£€æŸ¥ä¸€ä¸‹<br>ã€€ã€€é€šè¿‡ä¸Šè¿°ä¸¤ç§æ‰‹æ®µç»“åˆèµ·æ¥ï¼Œä¿è¯è¿‡æœŸçš„keyä¸€å®šä¼šè¢«å¹²æ‰ã€‚<br>ã€€ã€€ä½†æ˜¯å®é™…ä¸Šè¿™è¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼Œå¦‚æœå®šæœŸåˆ é™¤æ¼æ‰äº†å¾ˆå¤šè¿‡æœŸkeyï¼Œç„¶åä½ ä¹Ÿæ²¡åŠæ—¶å»æŸ¥ï¼Œä¹Ÿå°±æ²¡èµ°æƒ°æ€§åˆ é™¤ï¼Œæ­¤æ—¶ä¼šæ€ä¹ˆæ ·ï¼Ÿ<br>ã€€ã€€å¦‚æœå¤§é‡è¿‡æœŸkeyå †ç§¯åœ¨å†…å­˜é‡Œï¼Œå¯¼è‡´rediså†…å­˜å—è€—å°½äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ<br>ã€€ã€€ç­”æ¡ˆæ˜¯ï¼šèµ°å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚</p>
<h2 id="å†…å­˜æ·˜æ±°æœºåˆ¶"><a href="#å†…å­˜æ·˜æ±°æœºåˆ¶" class="headerlink" title="å†…å­˜æ·˜æ±°æœºåˆ¶"></a>å†…å­˜æ·˜æ±°æœºåˆ¶</h2><p>ã€€ã€€å¦‚æœredisçš„å†…å­˜å ç”¨è¿‡å¤šçš„æ—¶å€™ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œå†…å­˜æ·˜æ±°ï¼Œæœ‰å¦‚ä¸‹ä¸€äº›ç­–ç•¥ï¼š<br>ã€€ã€€noevictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ï¼Œè¿™ä¸ªä¸€èˆ¬æ²¡äººç”¨å§<br>ã€€ã€€allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ï¼‰<br>ã€€ã€€allkeys-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ªkeyï¼Œè¿™ä¸ªä¸€èˆ¬æ²¡äººç”¨å§<br>ã€€ã€€volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyï¼ˆè¿™ä¸ªä¸€èˆ¬ä¸å¤ªåˆé€‚ï¼‰<br>ã€€ã€€volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ªkey<br>ã€€ã€€volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„keyä¼˜å…ˆç§»é™¤</p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>redisé›ªå´©ã€å‡»ç©¿ã€ç©¿é€</title>
    <url>/blog/Redis/Redis_id_04.html</url>
    <content><![CDATA[<h2 id="redisç©¿é€"><a href="#redisç©¿é€" class="headerlink" title="redisç©¿é€"></a>redisç©¿é€</h2><p>ã€€ã€€ã€€ã€€1ã€æŸ¥è¯¢ä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶è¢«åŠ¨å†™çš„ï¼Œå¹¶ä¸”å‡ºäºå®¹é”™è€ƒè™‘ï¼Œå¦‚æœä»å­˜å‚¨å±‚æŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜<br>ã€€ã€€ã€€ã€€2ã€è¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°å­˜å‚¨å±‚å»æŸ¥è¯¢ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰<br>ã€€ã€€ã€€ã€€3ã€åœ¨æµé‡å¤§æ—¶ï¼Œå¯èƒ½DBå°±æŒ‚æ‰äº†ï¼Œè¦æ˜¯æœ‰äººåˆ©ç”¨ä¸å­˜åœ¨çš„keyé¢‘ç¹æ”»å‡»æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™å°±æ˜¯æ¼æ´ã€‚</p>
<a id="more"></a>

<p>ã€€ã€€<strong>å‘ç”Ÿåœºæ™¯ï¼š</strong></p>
<p>ã€€ã€€ã€€ã€€å¯¹äºç³»ç»ŸAï¼Œå‡è®¾ä¸€ç§’ 5000 ä¸ªè¯·æ±‚ï¼Œç»“æœå…¶ä¸­ 4000 ä¸ªè¯·æ±‚æ˜¯é»‘å®¢å‘å‡ºçš„æ¶æ„æ”»å‡»ã€‚<br>ã€€ã€€ã€€ã€€é»‘å®¢å‘å‡ºçš„é‚£ 4000 ä¸ªæ”»å‡»ï¼Œç¼“å­˜ä¸­æŸ¥ä¸åˆ°ï¼Œæ¯æ¬¡ä½ å»æ•°æ®åº“é‡ŒæŸ¥ï¼Œä¹ŸæŸ¥ä¸åˆ°ã€‚<br>ã€€ã€€ã€€ã€€ä¸¾ä¸ªä¾‹å­ï¼šæ•°æ®åº“ id æ˜¯ä» 1 å¼€å§‹çš„ï¼Œç»“æœé»‘å®¢å‘è¿‡æ¥çš„è¯·æ±‚ id å…¨éƒ¨éƒ½æ˜¯è´Ÿæ•°ã€‚è¿™æ ·çš„è¯ï¼Œç¼“å­˜ä¸­ä¸ä¼šæœ‰ï¼Œè¯·æ±‚æ¯æ¬¡éƒ½â€œè§†ç¼“å­˜äºæ— ç‰©â€ï¼Œ<br>ã€€ã€€ã€€ã€€ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ã€‚è¿™ç§æ¶æ„æ”»å‡»åœºæ™¯çš„ç¼“å­˜ç©¿é€å°±ä¼šç›´æ¥æŠŠæ•°æ®åº“ç»™æ‰“æ­»ã€‚</p>
<p>ã€€ã€€<strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>ã€€ã€€ã€€ã€€1ã€æœ‰å¾ˆå¤šç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜ï¼Œæœ€å¸¸è§çš„åˆ™æ˜¯é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„bitmapä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°<br>ã€€ã€€ã€€ã€€ã€€ã€€æ®ä¼šè¢«è¿™ä¸ªbitmapæ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚<br>ã€€ã€€ã€€ã€€2ã€å¦å¤–ä¹Ÿæœ‰ä¸€ä¸ªæ›´ä¸ºç®€å•ç²—æš´çš„æ–¹æ³•ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼ˆä¸ç®¡æ˜¯æ•°æ®ä¸å­˜åœ¨ï¼Œè¿˜æ˜¯ç³»ç»Ÿæ•…éšœï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€ç¼“å­˜ï¼Œä½†å®ƒçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿã€‚</p>
<h2 id="redisé›ªå´©"><a href="#redisé›ªå´©" class="headerlink" title="redisé›ªå´©"></a>redisé›ªå´©</h2><p>ã€€ã€€ã€€ã€€1ã€ç¼“å­˜ä¸­å¤§æ‰¹é‡çƒ­ç‚¹æ•°æ®è¿‡æœŸåç³»ç»Ÿæ¶Œå…¥å¤§é‡æŸ¥è¯¢è¯·æ±‚<br>ã€€ã€€ã€€ã€€2ã€å› ä¸ºå¤§éƒ¨åˆ†æ•°æ®åœ¨Rediså±‚å·²ç»å¤±æ•ˆï¼Œè¯·æ±‚æ¸—é€åˆ°æ•°æ®åº“å±‚<br>ã€€ã€€ã€€ã€€3ã€å¤§æ‰¹é‡è¯·æ±‚çŠ¹å¦‚æ´ªæ°´ä¸€èˆ¬æ¶Œå…¥ï¼Œå¼•èµ·æ•°æ®åº“å‹åŠ›é€ æˆæŸ¥è¯¢å µå¡ç”šè‡³å®•æœºã€‚</p>
<p>ã€€ã€€<strong>å‘ç”Ÿåœºæ™¯</strong></p>
<p>ã€€ã€€ã€€ã€€å¯¹äºç³»ç»Ÿ Aï¼Œå‡è®¾æ¯å¤©é«˜å³°æœŸæ¯ç§’ 5000 ä¸ªè¯·æ±‚ï¼Œæœ¬æ¥ç¼“å­˜åœ¨é«˜å³°æœŸå¯ä»¥æ‰›ä½æ¯ç§’ 4000 ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯ç¼“å­˜æœºå™¨æ„å¤–å‘ç”Ÿäº†å…¨ç›˜å®•æœºï¼Œç¼“å­˜æŒ‚äº†ã€‚<br>ã€€ã€€ã€€ã€€æ­¤æ—¶ 1 ç§’ 5000 ä¸ªè¯·æ±‚å…¨éƒ¨è½æ•°æ®åº“ï¼Œæ•°æ®åº“å¿…ç„¶æ‰›ä¸ä½ï¼Œå®ƒä¼šæŠ¥ä¸€ä¸‹è­¦ï¼Œç„¶åå°±æŒ‚äº†ã€‚<br>ã€€ã€€ã€€ã€€æ­¤æ—¶ï¼Œå¦‚æœæ²¡æœ‰é‡‡ç”¨ä»€ä¹ˆç‰¹åˆ«çš„æ–¹æ¡ˆæ¥å¤„ç†è¿™ä¸ªæ•…éšœï¼ŒDBA å¾ˆç€æ€¥ï¼Œé‡å¯æ•°æ®åº“ï¼Œä½†æ˜¯æ•°æ®åº“ç«‹é©¬åˆè¢«æ–°çš„æµé‡ç»™æ‰“æ­»äº†ã€‚
ã€€ã€€</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>ã€€ã€€ã€€ã€€1ã€äº‹å‰ï¼šredis é«˜å¯ç”¨ï¼Œä¸»ä»+å“¨å…µï¼Œredis clusterï¼Œé¿å…å…¨ç›˜å´©æºƒ<br>ã€€ã€€ã€€ã€€2ã€äº‹ä¸­ï¼šæœ¬åœ° ehcache ç¼“å­˜ + hystrix é™æµ&amp;é™çº§ï¼Œé¿å… MySQL è¢«æ‰“æ­»ã€‚<br>ã€€ã€€ã€€ã€€3ã€äº‹åï¼šredis æŒä¹…åŒ–ï¼Œä¸€æ—¦é‡å¯ï¼Œè‡ªåŠ¨ä»ç£ç›˜ä¸ŠåŠ è½½æ•°æ®ï¼Œå¿«é€Ÿæ¢å¤ç¼“å­˜æ•°æ®ã€‚<br>ã€€ã€€ã€€ã€€4ã€ç”¨æˆ·å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œç³»ç»Ÿ A æ”¶åˆ°è¯·æ±‚åï¼Œå…ˆæŸ¥æœ¬åœ° ehcache ç¼“å­˜ï¼Œå¦‚æœæ²¡æŸ¥åˆ°å†æŸ¥ redisã€‚å¦‚æœ ehcache å’Œ redis éƒ½æ²¡æœ‰ï¼Œå†æŸ¥æ•°æ®åº“ï¼Œ<br>ã€€ã€€ã€€ã€€ã€€ã€€å°†æ•°æ®åº“ä¸­çš„ç»“æœï¼Œå†™å…¥ ehcache å’Œ redis ä¸­ã€‚<br>ã€€ã€€ã€€ã€€5ã€ é™æµç»„ä»¶ï¼Œå¯ä»¥è®¾ç½®æ¯ç§’çš„è¯·æ±‚ï¼Œæœ‰å¤šå°‘èƒ½é€šè¿‡ç»„ä»¶ï¼Œå‰©ä½™çš„æœªé€šè¿‡çš„è¯·æ±‚ï¼Œæ€ä¹ˆåŠï¼Ÿèµ°é™çº§ï¼å¯ä»¥è¿”å›ä¸€äº›é»˜è®¤çš„å€¼ï¼Œæˆ–è€…å‹æƒ…æç¤ºï¼Œæˆ–è€…<br>ã€€ã€€ã€€ã€€ã€€ã€€ç©ºç™½çš„å€¼ã€‚è¿™æ ·å¯ä»¥ä¿è¯æ•°æ®åº“ç»å¯¹ä¸ä¼šæ­»ï¼Œé™æµç»„ä»¶ç¡®ä¿äº†æ¯ç§’åªæœ‰å¤šå°‘ä¸ªè¯·æ±‚èƒ½é€šè¿‡ã€‚ -åªè¦æ•°æ®åº“ä¸æ­»ï¼Œå°±æ˜¯è¯´ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œ2/5 çš„è¯·æ±‚éƒ½æ˜¯å¯ä»¥è¢«<br>ã€€ã€€ã€€ã€€ã€€ã€€å¤„ç†çš„ã€‚ - åªè¦æœ‰ 2/5 çš„è¯·æ±‚å¯ä»¥è¢«å¤„ç†ï¼Œå°±æ„å‘³ç€ä½ çš„ç³»ç»Ÿæ²¡æ­»ï¼Œå¯¹ç”¨æˆ·æ¥è¯´ï¼Œå¯èƒ½å°±æ˜¯ç‚¹å‡»å‡ æ¬¡åˆ·ä¸å‡ºæ¥é¡µé¢ï¼Œä½†æ˜¯å¤šç‚¹å‡ æ¬¡ï¼Œå°±å¯ä»¥åˆ·å‡ºæ¥ä¸€æ¬¡ã€‚</p>
<h2 id="rediså‡»ç©¿"><a href="#rediså‡»ç©¿" class="headerlink" title="rediså‡»ç©¿"></a>rediså‡»ç©¿</h2><p>ã€€ã€€ã€€ã€€1ã€å°±æ˜¯è¯´æŸä¸ª key éå¸¸çƒ­ç‚¹ï¼Œè®¿é—®éå¸¸é¢‘ç¹ï¼Œå¤„äºé›†ä¸­å¼é«˜å¹¶å‘è®¿é—®çš„æƒ…å†µ<br>ã€€ã€€ã€€ã€€2ã€å½“è¿™ä¸ª key åœ¨å¤±æ•ˆçš„ç¬é—´ï¼Œå¤§é‡çš„è¯·æ±‚å°±å‡»ç©¿äº†ç¼“å­˜ï¼Œç›´æ¥è¯·æ±‚æ•°æ®åº“ï¼Œå°±åƒæ˜¯åœ¨ä¸€é“å±éšœä¸Šå‡¿å¼€äº†ä¸€ä¸ªæ´ã€‚<br>ã€€ã€€ã€€ã€€3ã€å‡»ç©¿å’Œç¼“å­˜é›ªå´©çš„åŒºåˆ«åœ¨äºå‡»ç©¿é’ˆå¯¹æŸä¸€keyç¼“å­˜ï¼Œé›ªå´©åˆ™æ˜¯å¾ˆå¤škey</p>
<p>ã€€ã€€<strong>å‘ç”Ÿåœºæ™¯</strong></p>
<p>ã€€ã€€ã€€ã€€ç§’æ€ç°åœºï¼Œåœ¨åŒä¸€æ—¶é—´é«˜é¢‘è®¿é—®æŸä¸€æ•°æ®ï¼Œå¹¶ä¸”å½“å‰æ•°æ®æ­£å¥½è¿‡æœŸã€‚</p>
<p>ã€€ã€€<strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>ã€€ã€€ã€€ã€€1ã€å¯ä»¥å°†çƒ­ç‚¹æ•°æ®è®¾ç½®ä¸ºæ°¸è¿œä¸è¿‡æœŸ<br>ã€€ã€€ã€€ã€€2ã€å®ç°äº’æ–¥é”ï¼Œç­‰å¾…ç¬¬ä¸€ä¸ªè¯·æ±‚æ„å»ºå®Œç¼“å­˜ä¹‹åï¼Œå†é‡Šæ”¾é”ï¼Œè¿›è€Œå…¶å®ƒè¯·æ±‚æ‰èƒ½é€šè¿‡è¯¥ key è®¿é—®æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>redisä¼˜åŒ–</title>
    <url>/blog/Redis/Redis_id_05.html</url>
    <content><![CDATA[<h4 id="å†…å­˜ç®¡ç†ä¼˜åŒ–"><a href="#å†…å­˜ç®¡ç†ä¼˜åŒ–" class="headerlink" title="å†…å­˜ç®¡ç†ä¼˜åŒ–"></a>å†…å­˜ç®¡ç†ä¼˜åŒ–</h4><p>Redis Hashæ˜¯valueå†…éƒ¨ä¸ºä¸€ä¸ªHashMapï¼Œå¦‚æœè¯¥Mapçš„æˆå‘˜æ•°æ¯”è¾ƒå°‘ï¼Œåˆ™ä¼šé‡‡ç”¨ç±»ä¼¼ä¸€ç»´çº¿æ€§çš„ç´§å‡‘æ ¼å¼æ¥å­˜å‚¨è¯¥Map, å³çœå»äº†å¤§é‡æŒ‡é’ˆçš„å†…å­˜å¼€é”€ï¼Œè¿™ä¸ªå‚æ•°æ§åˆ¶å¯¹åº”åœ¨redis.confé…ç½®æ–‡ä»¶ä¸­ä¸‹é¢2é¡¹ï¼š</p>
<a id="more"></a>

<p><strong>hash-max-zipmap-entries 64 hash-max-zipmap-value 512</strong>    </p>
<p>å½“valueè¿™ä¸ªMapå†…éƒ¨ä¸è¶…è¿‡å¤šå°‘ä¸ªæˆå‘˜æ—¶ä¼šé‡‡ç”¨çº¿æ€§ç´§å‡‘æ ¼å¼å­˜å‚¨ï¼Œé»˜è®¤æ˜¯64,å³valueå†…éƒ¨æœ‰64ä¸ªä»¥ä¸‹çš„æˆå‘˜å°±æ˜¯ä½¿ç”¨çº¿æ€§ç´§å‡‘å­˜å‚¨ï¼Œè¶…è¿‡è¯¥å€¼è‡ªåŠ¨è½¬æˆçœŸæ­£çš„HashMapã€‚</p>
<p><strong>hash-max-zipmap-value</strong> å«ä¹‰æ˜¯å½“ valueè¿™ä¸ªMapå†…éƒ¨çš„æ¯ä¸ªæˆå‘˜å€¼é•¿åº¦ä¸è¶…è¿‡å¤šå°‘å­—èŠ‚å°±ä¼šé‡‡ç”¨çº¿æ€§ç´§å‡‘å­˜å‚¨æ¥èŠ‚çœç©ºé—´ã€‚</p>
<p>ä»¥ä¸Š2ä¸ªæ¡ä»¶ä»»æ„ä¸€ä¸ªæ¡ä»¶è¶…è¿‡è®¾ç½®å€¼éƒ½ä¼šè½¬æ¢æˆçœŸæ­£çš„HashMapï¼Œä¹Ÿå°±ä¸ä¼šå†èŠ‚çœå†…å­˜äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼æ˜¯ä¸æ˜¯è®¾ç½®çš„è¶Šå¤§è¶Šå¥½å‘¢ï¼Œç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ï¼ŒHashMapçš„ä¼˜åŠ¿å°±æ˜¯æŸ¥æ‰¾å’Œæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)çš„ï¼Œè€Œæ”¾å¼ƒHashé‡‡ç”¨ä¸€ç»´å­˜å‚¨åˆ™æ˜¯O(n)çš„æ—¶é—´å¤æ‚åº¦ï¼Œå¦‚æœ</p>
<p>æˆå‘˜æ•°é‡å¾ˆå°‘ï¼Œåˆ™å½±å“ä¸å¤§ï¼Œå¦åˆ™ä¼šä¸¥é‡å½±å“æ€§èƒ½ï¼Œæ‰€ä»¥è¦æƒè¡¡å¥½è¿™ä¸ªå€¼çš„è®¾ç½®ï¼Œæ€»ä½“ä¸Šè¿˜æ˜¯æœ€æ ¹æœ¬çš„æ—¶é—´æˆæœ¬å’Œç©ºé—´æˆæœ¬ä¸Šçš„æƒè¡¡ã€‚</p>
<p><strong>list-max-ziplist-value 64 list-max-ziplist-entries 512</strong>    </p>
<p>listæ•°æ®ç±»å‹èŠ‚ç‚¹å€¼å¤§å°å°äºå¤šå°‘å­—èŠ‚ä¼šé‡‡ç”¨ç´§å‡‘å­˜å‚¨æ ¼å¼ã€listæ•°æ®ç±»å‹å¤šå°‘èŠ‚ç‚¹ä»¥ä¸‹ä¼šé‡‡ç”¨å»æŒ‡é’ˆçš„ç´§å‡‘å­˜å‚¨æ ¼å¼ã€‚</p>
<h4 id="å†…å­˜é¢„åˆ†é…ï¼š"><a href="#å†…å­˜é¢„åˆ†é…ï¼š" class="headerlink" title="å†…å­˜é¢„åˆ†é…ï¼š"></a>å†…å­˜é¢„åˆ†é…ï¼š</h4><p>Rediså†…éƒ¨å®ç°æ²¡æœ‰å¯¹å†…å­˜åˆ†é…æ–¹é¢åšè¿‡å¤šçš„ä¼˜åŒ–ï¼ˆå¯¹æ¯”Memcacheï¼‰ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šå­˜åœ¨å†…å­˜ç¢ç‰‡ï¼Œä¸è¿‡å¤§å¤šæ•°æƒ…å†µä¸‹è¿™ä¸ªä¸ä¼šæˆä¸ºRedisçš„æ€§èƒ½ç“¶é¢ˆï¼Œä¸è¿‡å¦‚æœåœ¨Rediså†…éƒ¨å­˜å‚¨çš„å¤§éƒ¨åˆ†æ•°æ®æ˜¯æ•°å€¼å‹çš„è¯ï¼ŒRediså†…éƒ¨é‡‡ç”¨äº†ä¸€ä¸ªshared integerçš„ æ–¹å¼æ¥çœå»åˆ†é…å†…å­˜çš„å¼€é”€ï¼Œå³åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å…ˆåˆ†é…ä¸€ä¸ªä»1~n é‚£ä¹ˆå¤šä¸ªæ•°å€¼å¯¹è±¡æ”¾åœ¨ä¸€ä¸ªæ± å­ä¸­ï¼Œå¦‚æœå­˜å‚¨çš„æ•°æ®æ°å¥½æ˜¯è¿™ä¸ªæ•°å€¼èŒƒå›´å†…çš„æ•°æ®ï¼Œåˆ™ç›´æ¥ä»æ± å­é‡Œå–å‡ºè¯¥å¯¹è±¡ï¼Œå¹¶ä¸”é€šè¿‡å¼•ç”¨è®¡æ•°çš„æ–¹å¼æ¥å…±äº«ï¼Œè¿™æ ·åœ¨ç³»ç»Ÿå­˜å‚¨ äº†å¤§é‡æ•°å€¼ä¸‹ï¼Œä¹Ÿèƒ½ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çœå†…å­˜å¹¶ä¸”æé«˜æ€§èƒ½ï¼Œè¿™ä¸ªå‚æ•°å€¼nçš„è®¾ç½®éœ€è¦ä¿®æ”¹æºä»£ç ä¸­çš„ä¸€è¡Œå®å®šä¹‰REDIS_SHARED_INTEGERSï¼Œè¯¥å€¼ é»˜è®¤æ˜¯10000ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹åé‡æ–°ç¼–è¯‘å°±å¯ä»¥äº†ã€‚</p>
<h4 id="æŒä¹…åŒ–æœºåˆ¶ï¼š"><a href="#æŒä¹…åŒ–æœºåˆ¶ï¼š" class="headerlink" title="æŒä¹…åŒ–æœºåˆ¶ï¼š"></a>æŒä¹…åŒ–æœºåˆ¶ï¼š</h4><p><strong>å®šæ—¶å¿«ç…§æ–¹å¼(snapshot)ï¼š</strong></p>
<p>è¯¥æŒä¹…åŒ–æ–¹å¼å®é™…æ˜¯åœ¨Rediså†…éƒ¨ä¸€ä¸ªå®šæ—¶å™¨äº‹ä»¶ï¼Œæ¯éš”å›ºå®šæ—¶é—´å»æ£€æŸ¥å½“å‰æ•°æ®å‘ç”Ÿçš„æ”¹å˜æ¬¡æ•°ä¸æ—¶é—´æ˜¯å¦æ»¡è¶³é…ç½®çš„æŒä¹…åŒ–è§¦å‘çš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³åˆ™é€š è¿‡æ“ä½œç³»ç»Ÿforkè°ƒç”¨æ¥åˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œè¿™ä¸ªå­è¿›ç¨‹é»˜è®¤ä¼šä¸çˆ¶è¿›ç¨‹å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´ï¼Œè¿™æ—¶å°±å¯ä»¥é€šè¿‡å­è¿›ç¨‹æ¥éå†æ•´ä¸ªå†…å­˜æ¥è¿›è¡Œå­˜å‚¨æ“ä½œï¼Œè€Œä¸»è¿›ç¨‹ åˆ™ä»ç„¶å¯ä»¥æä¾›æœåŠ¡ï¼Œå½“æœ‰å†™å…¥æ—¶ç”±æ“ä½œç³»ç»ŸæŒ‰ç…§å†…å­˜é¡µ(page)ä¸ºå•ä½æ¥è¿›è¡Œcopy-on-writeä¿è¯çˆ¶å­è¿›ç¨‹ä¹‹é—´ä¸ä¼šäº’ç›¸å½±å“ã€‚</p>
<p>è¯¥æŒä¹…åŒ–çš„ä¸»è¦ç¼ºç‚¹æ˜¯å®šæ—¶å¿«ç…§åªæ˜¯ä»£è¡¨ä¸€æ®µæ—¶é—´å†…çš„å†…å­˜æ˜ åƒï¼Œæ‰€ä»¥ç³»ç»Ÿé‡å¯ä¼šä¸¢å¤±ä¸Šæ¬¡å¿«ç…§ä¸é‡å¯ä¹‹é—´æ‰€æœ‰çš„æ•°æ®ã€‚</p>
<p><strong>åŸºäºè¯­å¥è¿½åŠ æ–¹å¼(aof)ï¼š</strong></p>
<p>aofæ–¹å¼å®é™…ç±»ä¼¼mysqlçš„åŸºäºè¯­å¥çš„binlogæ–¹å¼ï¼Œå³æ¯æ¡ä¼šä½¿Rediså†…å­˜æ•°æ®å‘ç”Ÿæ”¹å˜çš„å‘½ä»¤éƒ½ä¼šè¿½åŠ åˆ°ä¸€ä¸ªlogæ–‡ä»¶ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªlogæ–‡ä»¶å°±æ˜¯Redisçš„æŒä¹…åŒ–æ•°æ®ã€‚</p>
<p>aofçš„æ–¹å¼çš„ä¸»è¦ç¼ºç‚¹æ˜¯è¿½åŠ logæ–‡ä»¶å¯èƒ½å¯¼è‡´ä½“ç§¯è¿‡å¤§ï¼Œå½“ç³»ç»Ÿé‡å¯æ¢å¤æ•°æ®æ—¶å¦‚æœæ˜¯aofçš„æ–¹å¼åˆ™åŠ è½½æ•°æ®ä¼šéå¸¸æ…¢ï¼Œå‡ åGçš„æ•°æ®å¯èƒ½éœ€è¦å‡ å°æ—¶æ‰èƒ½åŠ è½½å®Œï¼Œå½“ç„¶è¿™ä¸ªè€—æ—¶å¹¶ä¸æ˜¯å› ä¸ºç£ç›˜æ–‡ä»¶è¯»å–é€Ÿåº¦æ…¢ï¼Œè€Œæ˜¯ç”±äºè¯»å–çš„æ‰€æœ‰å‘½ä»¤éƒ½è¦åœ¨å†…å­˜ä¸­æ‰§è¡Œä¸€éã€‚å¦å¤–ç”±äºæ¯æ¡å‘½ä»¤éƒ½è¦å†™log,æ‰€ä»¥ä½¿ç”¨aofçš„æ–¹å¼ï¼ŒRedisçš„è¯»å†™æ€§èƒ½ä¹Ÿä¼šæœ‰æ‰€ä¸‹é™ã€‚</p>
<p>å¯ä»¥è€ƒè™‘å°†æ•°æ®ä¿å­˜åˆ°ä¸åŒçš„Rediså®ä¾‹ä¸­ï¼Œæ¯ä¸ªå®ä¾‹çš„å†…å­˜å¤§å°åœ¨2Gå·¦å³ï¼Œé¿å…å°†é¸¡è›‹æ”¾åˆ°ä¸€ä¸ªç¯®å­é‡Œï¼Œæ—¢å¯ä»¥å‡å°‘ç¼“å­˜å¤±æ•ˆç»™ç³»ç»Ÿå¸¦æ¥çš„å½±å“ï¼Œåˆå¯ä»¥åŠ å¿«æ•°æ®æ¢å¤çš„é€Ÿåº¦ï¼Œä¸è¿‡åŒæ—¶ä¹Ÿç»™ç³»ç»Ÿè®¾è®¡å¸¦æ¥äº†ä¸€å®šçš„å¤æ‚æ€§ã€‚</p>
<h4 id="RedisæŒä¹…åŒ–å´©æºƒé—®é¢˜ï¼š"><a href="#RedisæŒä¹…åŒ–å´©æºƒé—®é¢˜ï¼š" class="headerlink" title="RedisæŒä¹…åŒ–å´©æºƒé—®é¢˜ï¼š"></a>RedisæŒä¹…åŒ–å´©æºƒé—®é¢˜ï¼š</h4><p>æœ‰Redisçº¿ä¸Šè¿ç»´ç»éªŒçš„äººä¼šå‘ç°Redisåœ¨ç‰©ç†å†…å­˜ä½¿ç”¨æ¯”è¾ƒå¤šï¼Œä½†è¿˜æ²¡æœ‰è¶…è¿‡å®é™…ç‰©ç†å†…å­˜æ€»å®¹é‡æ—¶å°±ä¼šå‘ç”Ÿä¸ç¨³å®šç”šè‡³å´©æºƒçš„ é—®é¢˜ï¼Œæœ‰äººè®¤ä¸ºæ˜¯åŸºäºå¿«ç…§æ–¹å¼æŒä¹…åŒ–çš„forkç³»ç»Ÿè°ƒç”¨é€ æˆå†…å­˜å ç”¨åŠ å€è€Œå¯¼è‡´çš„ï¼Œè¿™ç§è§‚ç‚¹æ˜¯ä¸å‡†ç¡®çš„ï¼Œå› ä¸ºfork è°ƒç”¨çš„copy-on-writeæœºåˆ¶æ˜¯åŸºäºæ“ä½œç³»ç»Ÿé¡µè¿™ä¸ªå•ä½çš„ï¼Œä¹Ÿå°±æ˜¯åªæœ‰æœ‰å†™å…¥çš„è„é¡µä¼šè¢«å¤åˆ¶ï¼Œä½†æ˜¯ä¸€èˆ¬ä½ çš„ç³»ç»Ÿä¸ä¼šåœ¨çŸ­æ—¶é—´å†…æ‰€æœ‰çš„é¡µéƒ½å‘ç”Ÿäº†å†™ å…¥è€Œå¯¼è‡´å¤åˆ¶ï¼Œé‚£ä¹ˆæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´Rediså´©æºƒçš„å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯Redisçš„æŒä¹…åŒ–ä½¿ç”¨äº†Buffer IOé€  æˆçš„ï¼Œæ‰€è°“Buffer IOæ˜¯æŒ‡Rediså¯¹æŒä¹…åŒ–æ–‡ä»¶çš„å†™å…¥å’Œè¯»å–æ“ä½œéƒ½ä¼šä½¿ç”¨ç‰©ç†å†…å­˜çš„Page Cache,è€Œå¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿä¼šä½¿ç”¨Direct IOæ¥ç»•è¿‡è¿™å±‚Page Cacheå¹¶è‡ªè¡Œç»´æŠ¤ä¸€ä¸ªæ•°æ®çš„Cacheï¼Œè€Œå½“Redisçš„æŒä¹…åŒ–æ–‡ä»¶è¿‡å¤§(å°¤å…¶æ˜¯å¿«ç…§æ–‡ä»¶)ï¼Œå¹¶å¯¹å…¶è¿›è¡Œè¯»å†™æ—¶ï¼Œç£ç›˜æ–‡ä»¶ä¸­çš„æ•°æ®éƒ½ä¼šè¢«åŠ è½½åˆ°ç‰©ç†å†… å­˜ä¸­ä½œä¸ºæ“ä½œç³»ç»Ÿå¯¹è¯¥æ–‡ä»¶çš„ä¸€å±‚Cache,è€Œè¿™å±‚Cacheçš„æ•°æ®ä¸Rediså†…å­˜ä¸­ç®¡ç†çš„æ•°æ®å®é™…æ˜¯é‡å¤å­˜å‚¨çš„ï¼Œè™½ç„¶å†…æ ¸åœ¨ç‰©ç†å†…å­˜ç´§å¼ æ—¶ä¼šåš Page Cacheçš„å‰”é™¤å·¥ä½œï¼Œä½†å†…æ ¸å¾ˆå¯èƒ½è®¤ä¸ºæŸå—Page Cacheæ›´é‡è¦ï¼Œè€Œè®©ä½ çš„è¿›ç¨‹å¼€å§‹Swap ,è¿™æ—¶ä½ çš„ç³»ç»Ÿå°±ä¼šå¼€å§‹å‡ºç°ä¸ç¨³å®šæˆ–è€…å´©æºƒäº†ã€‚æˆ‘ä»¬çš„ç»éªŒæ˜¯å½“ä½ çš„Redisç‰©ç†å†…å­˜ä½¿ç”¨è¶…è¿‡å†…å­˜æ€»å®¹é‡çš„3/5æ—¶å°±ä¼šå¼€å§‹æ¯”è¾ƒå±é™©äº†ã€‚</p>
<h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p><strong>1ã€</strong>æ ¹æ®ä¸šåŠ¡éœ€è¦é€‰æ‹©åˆé€‚çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯è®¾ç½®ç›¸åº”çš„ç´§å‡‘å­˜å‚¨å‚æ•°ã€‚</p>
<p><strong>2ã€</strong>å½“ä¸šåŠ¡åœºæ™¯ä¸éœ€è¦æ•°æ®æŒä¹…åŒ–æ—¶ï¼Œå…³é—­æ‰€æœ‰çš„æŒä¹…åŒ–æ–¹å¼å¯ä»¥è·å¾—æœ€ä½³çš„æ€§èƒ½ä»¥åŠæœ€å¤§çš„å†…å­˜ä½¿ç”¨é‡ã€‚</p>
<p><strong>3ã€</strong>å¦‚æœéœ€è¦ä½¿ç”¨æŒä¹…åŒ–ï¼Œæ ¹æ®æ˜¯å¦å¯ä»¥å®¹å¿é‡å¯ä¸¢å¤±éƒ¨åˆ†æ•°æ®åœ¨å¿«ç…§æ–¹å¼ä¸è¯­å¥è¿½åŠ æ–¹å¼ä¹‹é—´é€‰æ‹©å…¶ä¸€ï¼Œä¸è¦ä½¿ç”¨è™šæ‹Ÿå†…å­˜ä»¥åŠdiskstoreæ–¹å¼ã€‚</p>
<p><strong>4ã€</strong>ä¸è¦è®©ä½ çš„Redisæ‰€åœ¨æœºå™¨ç‰©ç†å†…å­˜ä½¿ç”¨è¶…è¿‡å®é™…å†…å­˜æ€»é‡çš„3/5ã€‚</p>
<p>redis.confä¸­çš„maxmemoryé€‰é¡¹ï¼Œè¯¥é€‰é¡¹æ˜¯å‘Šè¯‰Rediså½“ä½¿ç”¨äº†å¤šå°‘ç‰©ç†å†…å­˜åå°±å¼€å§‹æ‹’ç»åç»­çš„å†™å…¥è¯·æ±‚ï¼Œè¯¥å‚æ•°èƒ½å¾ˆå¥½çš„ä¿æŠ¤å¥½ä½ çš„Redisä¸ä¼šå› ä¸ºä½¿ç”¨äº†è¿‡å¤šçš„ç‰©ç†å†…å­˜è€Œå¯¼è‡´swap,æœ€ç»ˆä¸¥é‡å½±å“æ€§èƒ½ç”šè‡³å´©æºƒã€‚</p>
<p>redis.confæ–‡ä»¶ä¸­ vm-enabled ä¸º no</p>
<p>ä»¥ä¸Šè¿™ç¯‡Redisä¼˜åŒ–ç»éªŒæ€»ç»“(å¿…çœ‹ç¯‡)å°±æ˜¯å°ç¼–åˆ†äº«ç»™å¤§å®¶çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶ä¸€ä¸ªå‚è€ƒï¼Œä¹Ÿå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒè„šæœ¬ä¹‹å®¶ã€‚</p>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>RBACç”¨æˆ·æƒé™ç®¡ç†è®¾è®¡æ€è·¯</title>
    <url>/blog/Django/Django_id_29.html</url>
    <content><![CDATA[<p>ã€€ã€€ç›®å‰ï¼Œä½¿ç”¨æœ€æ™®éçš„æƒé™ç®¡ç†æ¨¡å‹æ­£æ˜¯RBACï¼ˆRole-Based Access Controlï¼‰æ¨¡å‹ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¸»è¦æ˜¯ä»‹ç»åŸºäºRBACçš„æƒé™ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä¼šä»RBACæ˜¯ä»€ä¹ˆã€å¦‚ä½•è®¾è®¡RBACä¸¤éƒ¨åˆ†æ¥ä»‹ç»ã€‚</p>
<a id="more"></a>

<h2 id="ä¸€ã€RBACæ˜¯ä»€ä¹ˆ"><a href="#ä¸€ã€RBACæ˜¯ä»€ä¹ˆ" class="headerlink" title="ä¸€ã€RBACæ˜¯ä»€ä¹ˆ"></a>ä¸€ã€RBACæ˜¯ä»€ä¹ˆ</h2><h3 id="1ã€RBACæ¨¡å‹æ¦‚è¿°"><a href="#1ã€RBACæ¨¡å‹æ¦‚è¿°" class="headerlink" title="1ã€RBACæ¨¡å‹æ¦‚è¿°"></a>1ã€RBACæ¨¡å‹æ¦‚è¿°</h3><p>RBACæ¨¡å‹ï¼ˆRole-Based Access Controlï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æ¨¡å‹æ˜¯20ä¸–çºª90å¹´ä»£ç ”ç©¶å‡ºæ¥çš„ä¸€ç§æ–°æ¨¡å‹ï¼Œä½†å…¶å®åœ¨20ä¸–çºª70å¹´ä»£çš„å¤šç”¨æˆ·è®¡ç®—æ—¶æœŸï¼Œè¿™ç§æ€æƒ³å°±å·²ç»è¢«æå‡ºæ¥ï¼Œç›´åˆ°20ä¸–çºª90å¹´ä»£ä¸­åæœŸï¼ŒRBACæ‰åœ¨ç ”ç©¶å›¢ä½“ä¸­å¾—åˆ°ä¸€äº›é‡è§†ï¼Œå¹¶å…ˆåæå‡ºäº†è®¸å¤šç±»å‹çš„RBACæ¨¡å‹ã€‚å…¶ä¸­ä»¥ç¾å›½George Masonå¤§å­¦ä¿¡æ¯å®‰å…¨æŠ€æœ¯å®éªŒå®¤ï¼ˆLISTï¼‰æå‡ºçš„<a href="https://www.profsandhu.com/infs767/infs767fall03/lecture01-2.pdf" target="_blank" rel="noopener">RBAC96</a>æ¨¡å‹æœ€å…·æœ‰ä»£è¡¨ï¼Œå¹¶å¾—åˆ°äº†æ™®éçš„å…¬è®¤ã€‚</p>
<p>RBACè®¤ä¸ºæƒé™æˆæƒçš„è¿‡ç¨‹å¯ä»¥æŠ½è±¡åœ°æ¦‚æ‹¬ä¸ºï¼šWhoæ˜¯å¦å¯ä»¥å¯¹Whatè¿›è¡ŒHowçš„è®¿é—®æ“ä½œï¼Œå¹¶å¯¹è¿™ä¸ªé€»è¾‘è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸ºTrueçš„æ±‚è§£è¿‡ç¨‹ï¼Œä¹Ÿå³æ˜¯å°†æƒé™é—®é¢˜è½¬æ¢ä¸ºWhatã€Howçš„é—®é¢˜ï¼ŒWhoã€Whatã€Howæ„æˆäº†è®¿é—®æƒé™ä¸‰å…ƒç»„ï¼Œå…·ä½“çš„ç†è®ºå¯ä»¥å‚è€ƒRBAC96çš„è®ºæ–‡ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸åšè¯¦ç»†çš„å±•å¼€ä»‹ç»ï¼Œå¤§å®¶æœ‰ä¸ªå°è±¡å³å¯ã€‚</p>
<h3 id="2ã€RBACçš„ç»„æˆ"><a href="#2ã€RBACçš„ç»„æˆ" class="headerlink" title="2ã€RBACçš„ç»„æˆ"></a>2ã€RBACçš„ç»„æˆ</h3><p>åœ¨RBACæ¨¡å‹é‡Œé¢ï¼Œæœ‰3ä¸ªåŸºç¡€ç»„æˆéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼šç”¨æˆ·ã€è§’è‰²å’Œæƒé™ã€‚</p>
<p>RBACé€šè¿‡å®šä¹‰è§’è‰²çš„æƒé™ï¼Œå¹¶å¯¹ç”¨æˆ·æˆäºˆæŸä¸ªè§’è‰²ä»è€Œæ¥æ§åˆ¶ç”¨æˆ·çš„æƒé™ï¼Œå®ç°äº†ç”¨æˆ·å’Œæƒé™çš„é€»è¾‘åˆ†ç¦»ï¼ˆåŒºåˆ«äºACLæ¨¡å‹ï¼‰ï¼Œæå¤§åœ°æ–¹ä¾¿äº†æƒé™çš„ç®¡ç†</p>
<p>ä¸‹é¢åœ¨è®²è§£ä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸€äº›åè¯ï¼š</p>
<ul>
<li>Userï¼ˆç”¨æˆ·ï¼‰ï¼šæ¯ä¸ªç”¨æˆ·éƒ½æœ‰å”¯ä¸€çš„UIDè¯†åˆ«ï¼Œå¹¶è¢«æˆäºˆä¸åŒçš„è§’è‰²</li>
<li>Roleï¼ˆè§’è‰²ï¼‰ï¼šä¸åŒè§’è‰²å…·æœ‰ä¸åŒçš„æƒé™</li>
<li>Permissionï¼ˆæƒé™ï¼‰ï¼šè®¿é—®æƒé™</li>
<li>ç”¨æˆ·-è§’è‰²æ˜ å°„ï¼šç”¨æˆ·å’Œè§’è‰²ä¹‹é—´çš„æ˜ å°„å…³ç³»</li>
<li>è§’è‰²-æƒé™æ˜ å°„ï¼šè§’è‰²å’Œæƒé™ä¹‹é—´çš„æ˜ å°„</li>
</ul>
<p>å®ƒä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC1.png">

<p>ä¾‹å¦‚ä¸‹å›¾ï¼Œç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è¢«æˆäºˆä¸åŒçš„æƒé™ï¼Œæ™®é€šç”¨æˆ·åªèƒ½å»ä¿®æ”¹å’ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯ï¼Œè€Œä¸èƒ½åˆ›å»ºåˆ›å»ºç”¨æˆ·å’Œå†»ç»“ç”¨æˆ·ï¼Œè€Œç®¡ç†å‘˜ç”±äºè¢«æˆ äºˆæ‰€æœ‰æƒé™ï¼Œæ‰€ä»¥å¯ä»¥åšæ‰€æœ‰æ“ä½œã€‚</p>
<p>ä¾‹å¦‚ä¸‹å›¾ï¼Œç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è¢«æˆäºˆä¸åŒçš„æƒé™ï¼Œæ™®é€šç”¨æˆ·åªèƒ½å»ä¿®æ”¹å’ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯ï¼Œè€Œä¸èƒ½åˆ›å»ºåˆ›å»ºç”¨æˆ·å’Œå†»ç»“ç”¨æˆ·ï¼Œè€Œç®¡ç†å‘˜ç”±äºè¢«æˆäºˆæ‰€æœ‰æƒé™ï¼Œæ‰€ä»¥å¯ä»¥åšæ‰€æœ‰æ“ä½œã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC2.png">

<h3 id="3ã€RBACæ”¯æŒçš„å®‰å…¨åŸåˆ™"><a href="#3ã€RBACæ”¯æŒçš„å®‰å…¨åŸåˆ™" class="headerlink" title="3ã€RBACæ”¯æŒçš„å®‰å…¨åŸåˆ™"></a>3ã€RBACæ”¯æŒçš„å®‰å…¨åŸåˆ™</h3><p>RBACæ”¯æŒä¸‰ä¸ªè‘—åçš„å®‰å…¨åŸåˆ™ï¼šæœ€å°æƒé™åŸåˆ™ã€è´£ä»»åˆ†ç¦»åŸåˆ™å’Œæ•°æ®æŠ½è±¡åŸåˆ™</p>
<ul>
<li>æœ€å°æƒé™åŸåˆ™ï¼šRBACå¯ä»¥å°†è§’è‰²é…ç½®æˆå…¶å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°æƒé™é›†åˆ</li>
<li>è´£ä»»åˆ†ç¦»åŸåˆ™ï¼šå¯ä»¥é€šè¿‡è°ƒç”¨ç›¸äº’ç‹¬ç«‹äº’æ–¥çš„è§’è‰²æ¥å…±åŒå®Œæˆæ•æ„Ÿçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¦æ±‚ä¸€ä¸ªè®¡è´¦å‘˜å’Œè´¢åŠ¡ç®¡ç†å‘˜å…±åŒå‚ä¸ç»Ÿä¸€è¿‡è´¦æ“ä½œ</li>
<li>æ•°æ®æŠ½è±¡åŸåˆ™ï¼šå¯ä»¥é€šè¿‡æƒé™çš„æŠ½è±¡æ¥ä½“ç°ï¼Œä¾‹å¦‚è´¢åŠ¡æ“ä½œç”¨å€Ÿæ¬¾ã€å­˜æ¬¾ç­‰æŠ½è±¡æƒé™ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¸å‹çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™</li>
</ul>
<h3 id="4ã€RBACçš„ä¼˜ç¼ºç‚¹"><a href="#4ã€RBACçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="4ã€RBACçš„ä¼˜ç¼ºç‚¹"></a>4ã€RBACçš„ä¼˜ç¼ºç‚¹</h3><p>ï¼ˆ1ï¼‰ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç®€åŒ–äº†ç”¨æˆ·å’Œæƒé™çš„å…³ç³»</li>
<li>æ˜“æ‰©å±•ã€æ˜“ç»´æŠ¤</li>
</ul>
<p>ï¼ˆ2ï¼‰ç¼ºç‚¹ï¼š</p>
<ul>
<li>RBACæ¨¡å‹æ²¡æœ‰æä¾›æ“ä½œé¡ºåºçš„æ§åˆ¶æœºåˆ¶ï¼Œè¿™ä¸€ç¼ºé™·ä½¿å¾—RBACæ¨¡å‹å¾ˆéš¾é€‚åº”å“ªäº›å¯¹æ“ä½œæ¬¡åºæœ‰ä¸¥æ ¼è¦æ±‚çš„ç³»ç»Ÿ</li>
</ul>
<h3 id="5ã€RBACçš„4ç§æ¨¡å‹"><a href="#5ã€RBACçš„4ç§æ¨¡å‹" class="headerlink" title="5ã€RBACçš„4ç§æ¨¡å‹"></a>5ã€RBACçš„4ç§æ¨¡å‹</h3><p>ï¼ˆ1ï¼‰RBAC0</p>
<p>RBAC0ï¼Œæ˜¯æœ€ç®€å•ã€æœ€åŸå§‹çš„å®ç°æ–¹å¼ï¼Œä¹Ÿæ˜¯å…¶ä»–RBACæ¨¡å‹çš„åŸºç¡€ã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC3.png">

<p>åœ¨è¯¥æ¨¡å‹ä¸­ï¼Œç”¨æˆ·å’Œè§’è‰²ä¹‹é—´å¯ä»¥æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œå³ä¸€ä¸ªç”¨æˆ·åœ¨ä¸åŒåœºæ™¯ä¸‹æ˜¯å¯ä»¥æœ‰ä¸åŒçš„è§’è‰²ï¼Œä¾‹å¦‚ï¼šé¡¹ç›®ç»ç†ä¹Ÿå¯èƒ½æ˜¯ç»„é•¿ä¹Ÿå¯èƒ½æ˜¯æ¶æ„å¸ˆã€‚åŒæ—¶æ¯ä¸ªè§’è‰²éƒ½è‡³å°‘æœ‰ä¸€ä¸ªæƒé™ã€‚è¿™ç§æ¨¡å‹ä¸‹ï¼Œç”¨æˆ·å’Œæƒé™è¢«åˆ†ç¦»ç‹¬ç«‹å¼€æ¥ï¼Œä½¿å¾—æƒé™çš„æˆæƒè®¤è¯æ›´åŠ çµæ´»ã€‚</p>
<p>ï¼ˆ2ï¼‰RBAC1</p>
<p>åŸºäºRBAC0æ¨¡å‹ï¼Œå¼•å…¥äº†è§’è‰²é—´çš„ç»§æ‰¿å…³ç³»ï¼Œå³è§’è‰²ä¸Šæœ‰äº†ä¸Šä¸‹çº§çš„åŒºåˆ«ã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC4.png">

<p>è§’è‰²é—´çš„ç»§æ‰¿å…³ç³»å¯åˆ†ä¸ºä¸€èˆ¬ç»§æ‰¿å…³ç³»å’Œå—é™ç»§æ‰¿å…³ç³»ã€‚ä¸€èˆ¬ç»§æ‰¿å…³ç³»ä»…è¦æ±‚è§’è‰²ç»§æ‰¿å…³ç³»æ˜¯ä¸€ä¸ªç»å¯¹ååºå…³ç³»ï¼Œå…è®¸è§’è‰²é—´çš„å¤šç»§æ‰¿ã€‚è€Œå—é™ç»§æ‰¿å…³ç³»åˆ™è¿›ä¸€æ­¥è¦æ±‚è§’è‰²ç»§æ‰¿å…³ç³»æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Œå®ç°è§’è‰²é—´çš„å•ç»§æ‰¿ã€‚</p>
<p>è¿™ç§æ¨¡å‹é€‚åˆäºè§’è‰²ä¹‹é—´å±‚æ¬¡åˆ†æ˜ï¼Œå¯ä»¥ç»™è§’è‰²åˆ†ç»„åˆ†å±‚ã€‚</p>
<p>ï¼ˆ3ï¼‰RBAC2</p>
<p>RBAC2ï¼ŒåŸºäºRBAC0æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†è§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC5.png">

<p>RBAC2ä¸­çš„ä¸€ä¸ªåŸºæœ¬é™åˆ¶æ˜¯äº’æ–¥è§’è‰²çš„é™åˆ¶ï¼Œäº’æ–¥è§’è‰²æ˜¯æŒ‡å„è‡ªæƒé™å¯ä»¥äº’ç›¸åˆ¶çº¦çš„ä¸¤ä¸ªè§’è‰²ã€‚å¯¹äºè¿™ç±»è§’è‰²ä¸€ä¸ªç”¨æˆ·åœ¨æŸä¸€æ¬¡æ´»åŠ¨ä¸­åªèƒ½è¢«åˆ†é…å…¶ä¸­çš„ä¸€ä¸ªè§’è‰²ï¼Œä¸èƒ½åŒæ—¶è·å¾—ä¸¤ä¸ªè§’è‰²çš„ä½¿ç”¨æƒã€‚</p>
<p>è¯¥æ¨¡å‹æœ‰ä»¥ä¸‹å‡ ç§çº¦æŸï¼š</p>
<ul>
<li>äº’æ–¥è§’è‰² ï¼šåŒä¸€ç”¨æˆ·åªèƒ½åˆ†é…åˆ°ä¸€ç»„äº’æ–¥è§’è‰²é›†åˆä¸­è‡³å¤šä¸€ä¸ªè§’è‰²ï¼Œæ”¯æŒè´£ä»»åˆ†ç¦»çš„åŸåˆ™ã€‚äº’æ–¥è§’è‰²æ˜¯æŒ‡å„è‡ªæƒé™äº’ç›¸åˆ¶çº¦çš„ä¸¤ä¸ªè§’è‰²ã€‚å¯¹äºè¿™ç±»è§’è‰²ä¸€ä¸ªç”¨æˆ·åœ¨æŸä¸€æ¬¡æ´»åŠ¨ä¸­åªèƒ½è¢«åˆ†é…å…¶ä¸­çš„ä¸€ä¸ªè§’è‰²ï¼Œä¸èƒ½åŒæ—¶è·å¾—ä¸¤ä¸ªè§’è‰²çš„ä½¿ç”¨æƒã€‚å¸¸ä¸¾çš„ä¾‹å­ï¼šåœ¨å®¡è®¡æ´»åŠ¨ä¸­ï¼Œä¸€ä¸ªè§’è‰²ä¸èƒ½åŒæ—¶è¢«æŒ‡æ´¾ç»™ä¼šè®¡è§’è‰²å’Œå®¡è®¡å‘˜è§’è‰²ã€‚</li>
<li>åŸºæ•°çº¦æŸ ï¼šä¸€ä¸ªè§’è‰²è¢«åˆ†é…çš„ç”¨æˆ·æ•°é‡å—é™ï¼›ä¸€ä¸ªç”¨æˆ·å¯æ‹¥æœ‰çš„è§’è‰²æ•°ç›®å—é™ï¼›åŒæ ·ä¸€ä¸ªè§’è‰²å¯¹åº”çš„è®¿é—®æƒé™æ•°ç›®ä¹Ÿåº”å—é™ï¼Œä»¥æ§åˆ¶é«˜çº§æƒé™åœ¨ç³»ç»Ÿä¸­çš„åˆ†é…ã€‚ä¾‹å¦‚å…¬å¸çš„é¢†å¯¼äººæœ‰é™çš„ï¼›</li>
<li>å…ˆå†³æ¡ä»¶è§’è‰² ï¼šå¯ä»¥åˆ†é…è§’è‰²ç»™ç”¨æˆ·ä»…å½“è¯¥ç”¨æˆ·å·²ç»æ˜¯å¦ä¸€è§’è‰²çš„æˆå‘˜ï¼›å¯¹åº”çš„å¯ä»¥åˆ†é…è®¿é—®æƒé™ç»™è§’è‰²ï¼Œä»…å½“è¯¥è§’è‰²å·²ç»æ‹¥æœ‰å¦ä¸€ç§è®¿é—®æƒé™ã€‚æŒ‡è¦æƒ³è·å¾—è¾ƒé«˜çš„æƒé™ï¼Œè¦é¦–å…ˆæ‹¥æœ‰ä½ä¸€çº§çš„æƒé™ã€‚å°±åƒæˆ‘ä»¬ç”Ÿæ´»ä¸­ï¼Œå›½å®¶ä¸»å¸­æ˜¯ä»å‰¯ä¸»å¸­ä¸­é€‰ä¸¾çš„ä¸€æ ·ã€‚</li>
<li>è¿è¡Œæ—¶äº’æ–¥ ï¼šä¾‹å¦‚ï¼Œå…è®¸ä¸€ä¸ªç”¨æˆ·å…·æœ‰ä¸¤ä¸ªè§’è‰²çš„æˆå‘˜èµ„æ ¼ï¼Œä½†åœ¨è¿è¡Œä¸­ä¸å¯åŒæ—¶æ¿€æ´»è¿™ä¸¤ä¸ªè§’è‰²ã€‚</li>
</ul>
<h2 id="äºŒã€å¦‚ä½•è®¾è®¡RBAC"><a href="#äºŒã€å¦‚ä½•è®¾è®¡RBAC" class="headerlink" title="äºŒã€å¦‚ä½•è®¾è®¡RBAC"></a>äºŒã€å¦‚ä½•è®¾è®¡RBAC</h2><p>è¿™ä¸€èŠ‚ï¼Œæˆ‘ä¼šä»‹ç»è®¾è®¡åŸºäºRBACæ¨¡å‹çš„æƒé™ç³»ç»Ÿçš„åŠŸèƒ½æ¨¡å—ç»„æˆã€æµç¨‹ä»¥åŠæ•°æ®åº“çš„è®¾è®¡ã€‚</p>
<h3 id="1ã€RBACçš„åŠŸèƒ½æ¨¡å—"><a href="#1ã€RBACçš„åŠŸèƒ½æ¨¡å—" class="headerlink" title="1ã€RBACçš„åŠŸèƒ½æ¨¡å—"></a>1ã€RBACçš„åŠŸèƒ½æ¨¡å—</h3><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC6.png">

<h3 id="2ã€RBACæ‰§è¡Œæµç¨‹"><a href="#2ã€RBACæ‰§è¡Œæµç¨‹" class="headerlink" title="2ã€RBACæ‰§è¡Œæµç¨‹"></a>2ã€RBACæ‰§è¡Œæµç¨‹</h3><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/RBAC/RBAC7.png">]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸­mysqlçš„è”åˆå”¯ä¸€ç´¢å¼•</title>
    <url>/blog/Django/Django_id_28.html</url>
    <content><![CDATA[<h4 id="åœ¨Djangoä¸­è®¾ç½®mysqlçš„è”åˆå”¯ä¸€ç´¢å¼•"><a href="#åœ¨Djangoä¸­è®¾ç½®mysqlçš„è”åˆå”¯ä¸€ç´¢å¼•" class="headerlink" title="åœ¨Djangoä¸­è®¾ç½®mysqlçš„è”åˆå”¯ä¸€ç´¢å¼•"></a>åœ¨Djangoä¸­è®¾ç½®mysqlçš„è”åˆå”¯ä¸€ç´¢å¼•</h4><a id="more"></a>

<h4 id="è”åˆå”¯ä¸€ç´¢å¼•çš„æ„ä¹‰ï¼š"><a href="#è”åˆå”¯ä¸€ç´¢å¼•çš„æ„ä¹‰ï¼š" class="headerlink" title="è”åˆå”¯ä¸€ç´¢å¼•çš„æ„ä¹‰ï¼š"></a>è”åˆå”¯ä¸€ç´¢å¼•çš„æ„ä¹‰ï¼š</h4><p>ã€€ã€€<strong>èŠ‚çœç©ºé—´ã€æé«˜æ•ˆç‡ã€å»ºç«‹è”åˆç´¢å¼•çš„åŒæ—¶ã€è¿˜ä¼šç»™ä»–ä»¬ä¹‹é—´çš„ç»„åˆå»ºç«‹ç´¢å¼•</strong></p>
<h4 id="è”åˆå”¯ä¸€ç´¢å¼•çš„ä½œç”¨ï¼š"><a href="#è”åˆå”¯ä¸€ç´¢å¼•çš„ä½œç”¨ï¼š" class="headerlink" title="è”åˆå”¯ä¸€ç´¢å¼•çš„ä½œç”¨ï¼š"></a>è”åˆå”¯ä¸€ç´¢å¼•çš„ä½œç”¨ï¼š</h4><p>ã€€ã€€<strong>è”åˆå”¯ä¸€ç´¢å¼•çš„å­—æ®µï¼Œç›¸åŒçš„æ•°æ®ï¼ŒåŒæ—¶åªèƒ½å­˜åœ¨ä¸€æ¬¡ï¼Œä¿è¯æ•°æ®çš„å”¯ä¸€æ€§</strong></p>
<h4 id="åœ¨Djangoä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼š"><a href="#åœ¨Djangoä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼š" class="headerlink" title="åœ¨Djangoä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼š"></a>åœ¨Djangoä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼š</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Temperature</span><span class="params">(Base)</span>:</span></span><br><span class="line">    order_id = models.IntegerField()  <span class="comment"># è¿å•å·</span></span><br><span class="line">    tempera = models.CharField(max_length=<span class="number">200</span>)  <span class="comment"># è®°å½•æ¸©åº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'temperature'</span></span><br><span class="line">         <span class="comment"># è”åˆç´¢å¼•   å…¶ä¸­order_idå’Œcreate_timeä¸èƒ½åŒæ—¶é‡å¤å­˜åœ¨</span></span><br><span class="line">        unique_together = (</span><br><span class="line">            (<span class="string">'order_id'</span>, <span class="string">'create_time'</span>)</span><br><span class="line">        )</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 8å®‰è£…mysql8.0</title>
    <url>/blog/CentOS/CentOS_id_01.html</url>
    <content><![CDATA[<h3 id="CentOS-8-å®‰è£…MySQL-8-0"><a href="#CentOS-8-å®‰è£…MySQL-8-0" class="headerlink" title="CentOS 8 å®‰è£…MySQL 8.0"></a>CentOS 8 å®‰è£…MySQL 8.0</h3><a id="more"></a>

<h4 id="1ã€ä½¿ç”¨æœ€æ–°çš„åŒ…ç®¡ç†å™¨å®‰è£…MySQL"><a href="#1ã€ä½¿ç”¨æœ€æ–°çš„åŒ…ç®¡ç†å™¨å®‰è£…MySQL" class="headerlink" title="1ã€ä½¿ç”¨æœ€æ–°çš„åŒ…ç®¡ç†å™¨å®‰è£…MySQL"></a>1ã€ä½¿ç”¨æœ€æ–°çš„åŒ…ç®¡ç†å™¨å®‰è£…MySQL</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo dnf install @mysql</span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€å¼€å¯å¯åŠ¨"><a href="#2ã€å¼€å¯å¯åŠ¨" class="headerlink" title="2ã€å¼€å¯å¯åŠ¨"></a>2ã€å¼€å¯å¯åŠ¨</h4><p><strong>å®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨MySQLæœåŠ¡å¹¶ä½¿å®ƒåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> --now mysqld</span><br></pre></td></tr></table></figure></div>

<h4 id="3ã€è¦æ£€æŸ¥MySQLæœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ"><a href="#3ã€è¦æ£€æŸ¥MySQLæœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ" class="headerlink" title="3ã€è¦æ£€æŸ¥MySQLæœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ"></a>3ã€è¦æ£€æŸ¥MySQLæœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl status mysqld</span><br></pre></td></tr></table></figure></div>

<h4 id="4ã€æ·»åŠ å¯†ç åŠå®‰å…¨è®¾ç½®"><a href="#4ã€æ·»åŠ å¯†ç åŠå®‰å…¨è®¾ç½®" class="headerlink" title="4ã€æ·»åŠ å¯†ç åŠå®‰å…¨è®¾ç½®"></a>4ã€æ·»åŠ å¯†ç åŠå®‰å…¨è®¾ç½®</h4><p><strong>è¿è¡Œmysql_secure_installationè„šæœ¬ï¼Œè¯¥è„šæœ¬æ‰§è¡Œä¸€äº›ä¸å®‰å…¨æ€§ç›¸å…³çš„æ“ä½œå¹¶è®¾ç½®MySQLæ ¹å¯†ç ï¼š</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="EBNF"><figure class="iseeu highlight /ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo mysql_secure_installation</span></span><br></pre></td></tr></table></figure></div>

<p>æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>1ã€è¦æ±‚ä½ é…ç½®VALIDATE PASSWORD componentï¼ˆéªŒè¯å¯†ç ç»„ä»¶ï¼‰ï¼š è¾“å…¥y ï¼Œå›è½¦è¿›å…¥è¯¥é…ç½®</p>
<ul>
<li>é€‰æ‹©å¯†ç éªŒè¯ç­–ç•¥ç­‰çº§ï¼Œ æˆ‘è¿™é‡Œé€‰æ‹©0 ï¼ˆlowï¼‰ï¼Œå›è½¦</li>
<li>è¾“å…¥æ–°å¯†ç ä¸¤æ¬¡</li>
<li>ç¡®è®¤æ˜¯å¦ç»§ç»­ä½¿ç”¨æä¾›çš„å¯†ç ï¼Ÿè¾“å…¥y ï¼Œå›è½¦</li>
<li>ç§»é™¤åŒ¿åç”¨æˆ·ï¼Ÿ è¾“å…¥y ï¼Œå›è½¦</li>
<li>ä¸å…è®¸rootè¿œç¨‹ç™»é™†ï¼Ÿ æˆ‘è¿™é‡Œéœ€è¦è¿œç¨‹ç™»é™†ï¼Œæ‰€ä»¥è¾“å…¥n ï¼Œå›è½¦</li>
</ul>
<p>2ã€ç§»é™¤testæ•°æ®åº“ï¼Ÿ è¾“å…¥y ï¼Œå›è½¦</p>
<p>3ã€é‡æ–°è½½å…¥æƒé™è¡¨ï¼Ÿ è¾“å…¥y ï¼Œå›è½¦</p>
<h4 id="5ã€é…ç½®è¿œç¨‹ç™»é™†"><a href="#5ã€é…ç½®è¿œç¨‹ç™»é™†" class="headerlink" title="5ã€é…ç½®è¿œç¨‹ç™»é™†"></a>5ã€é…ç½®è¿œç¨‹ç™»é™†</h4><p>å¦‚æœéœ€è¦è®¾ç½®rootè´¦æˆ·è¿œç¨‹ç™»é™†ï¼Œä¸Šä¸€æ­¥éª¤ä¸­ï¼Œ<code>ä¸å…è®¸rootè¿œç¨‹ç™»é™†ï¼Ÿ</code>è¿™ä¸€æ­¥éœ€è¦è®¾ä¸ºnã€‚<br>æ¥ä¸‹æ¥æœ¬æœºç™»å½•MySQLï¼Œå°†rootç”¨æˆ·çš„hostå­—æ®µè®¾ä¸ºâ€™%â€™ï¼Œæ„ä¸ºæ¥å—rootæ‰€æœ‰IPåœ°å€çš„ç™»å½•è¯·æ±‚ï¼š<br>æœ¬æœºç™»å½•MySQL:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p&lt;ä¸Šé¢æ­¥éª¤ä¸­è®¾ç½®çš„å¯†ç &gt;</span><br></pre></td></tr></table></figure></div>

<p><strong>æ¥ç€ç»§ç»­æ‰§è¡Œmysqlè¯­å¥ï¼Œå°†å°†rootç”¨æˆ·çš„hostå­—æ®µè®¾ä¸ºâ€™%â€™ï¼š</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">update user <span class="built_in">set</span> host=<span class="string">'%'</span> <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></div>

<p>è®¾ç½®å®Œæˆåè¾“å…¥exité€€å‡ºmysqlï¼Œå›åˆ°ç»ˆç«¯shellç•Œé¢ï¼Œæ¥ç€å¼€å¯ç³»ç»Ÿé˜²ç«å¢™çš„3306ç«¯å£ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo firewall-cmd --add-port=3306/tcp --permanent</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></div>

<h4 id="6ã€å…³é—­MySQLä¸»æœºæŸ¥è¯¢dns"><a href="#6ã€å…³é—­MySQLä¸»æœºæŸ¥è¯¢dns" class="headerlink" title="6ã€å…³é—­MySQLä¸»æœºæŸ¥è¯¢dns"></a>6ã€å…³é—­MySQLä¸»æœºæŸ¥è¯¢dns</h4><p>MySQLä¼šåå‘è§£æè¿œç¨‹è¿æ¥åœ°å€çš„dnsè®°å½•ï¼Œå¦‚æœMySQLä¸»æœºæ— æ³•è¿æ¥å¤–ç½‘ï¼Œåˆ™dnså¯èƒ½æ— æ³•è§£ææˆåŠŸï¼Œ</p>
<p>å¯¼è‡´ç¬¬ä¸€æ¬¡è¿æ¥MySQLé€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥åœ¨é…ç½®ä¸­å¯ä»¥å…³é—­è¯¥åŠŸèƒ½ã€‚</p>
<p>æ‰“å¼€<code>/etc/my.cnf</code>æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">skip-name-resolve</span><br></pre></td></tr></table></figure></div>

<h4 id="7ã€é‡å¯æœåŠ¡"><a href="#7ã€é‡å¯æœåŠ¡" class="headerlink" title="7ã€é‡å¯æœåŠ¡"></a>7ã€é‡å¯æœåŠ¡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo systemctl restart mysqld</span><br></pre></td></tr></table></figure></div>

<p><strong>æœ¬æœºæµ‹è¯•å®‰è£…åï¼ŒMySQL8.0é»˜è®¤å·²ç»æ˜¯utf8mb4å­—ç¬¦é›†ï¼Œæ‰€ä»¥å­—ç¬¦é›†ä¸å†ä¿®æ”¹</strong></p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>è™šæ‹Ÿç¯å¢ƒå‘½ä»¤</title>
    <url>/blog/Spider/Spider_id_18.html</url>
    <content><![CDATA[<h2 id="1ã€å®‰è£…è™šæ‹Ÿç¯å¢ƒ"><a href="#1ã€å®‰è£…è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="1ã€å®‰è£…è™šæ‹Ÿç¯å¢ƒ"></a>1ã€å®‰è£…è™šæ‹Ÿç¯å¢ƒ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼špip install virtualenvwrapper-win -i https://pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class="line">    https://pypi.tuna.tsinghua.edu.cn/simpleç½‘å€æ˜¯æ¸…åæºç½‘å€ï¼Œ-i åŠ æ¸…åæºç½‘å€ä¼šæé«˜ä¸‹è½½é€Ÿåº¦</span><br></pre></td></tr></table></figure></div>

<a id="more"></a>

<h2 id="2ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#2ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="2ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>2ã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼šmkvirtualenv name</span></span><br><span class="line">	-----nameæ˜¯è™šæ‹Ÿç¯å¢ƒçš„åå­—</span><br><span class="line">	ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªa1906è™šæ‹Ÿç¯å¢ƒ----&gt;å‘½ä»¤ï¼š# mkvirtualenv a1906</span><br></pre></td></tr></table></figure>

<h2 id="3ã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"><a href="#3ã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="3ã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"></a>3ã€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼šworkon name</span></span><br><span class="line">	å½“æˆ‘é—¨éœ€è¦ä½¿ç”¨a1906è™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥æ¿€æ´»---&gt;å‘½ä»¤ï¼š# workon a1906</span><br><span class="line">    å¦‚æœæˆ‘ä»¬å·²ç»åœ¨ä½¿ç”¨ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œéœ€è¦åˆ‡æ¢åˆ°å¦ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤å‘½ä»¤æ¥åˆ‡æ¢</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€å®‰è£…æ¨¡å—"><a href="#4ã€å®‰è£…æ¨¡å—" class="headerlink" title="4ã€å®‰è£…æ¨¡å—"></a>4ã€å®‰è£…æ¨¡å—</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼špip install æ¨¡å—å</span></span><br><span class="line">	å½“æˆ‘ä»¬éœ€è¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…requestsæ¨¡å—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨---&gt;å‘½ä»¤ï¼š# pip install requests</span><br><span class="line">è¿˜å¯ä»¥é€šè¿‡æ¸…åæºæ¥å®‰è£…---&gt;å‘½ä»¤ï¼š# pip install requests -i æ¸…åæºç½‘å€(https://pypi.tuna.tsinghua.edu.cn/simple)</span><br></pre></td></tr></table></figure>

<h2 id="5ã€åˆ é™¤å·²å®‰è£…çš„æ¨¡å—"><a href="#5ã€åˆ é™¤å·²å®‰è£…çš„æ¨¡å—" class="headerlink" title="5ã€åˆ é™¤å·²å®‰è£…çš„æ¨¡å—"></a>5ã€åˆ é™¤å·²å®‰è£…çš„æ¨¡å—</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼špip uninstall æ¨¡å—å</span></span><br><span class="line">	å½“æˆ‘ä»¬éœ€è¦åˆ é™¤requestsæ¨¡å—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨---&gt;å‘½ä»¤ï¼š# pip uninstall requests</span><br></pre></td></tr></table></figure>

<h2 id="6ã€æŸ¥çœ‹å·²å®‰è£…çš„æ¨¡å—"><a href="#6ã€æŸ¥çœ‹å·²å®‰è£…çš„æ¨¡å—" class="headerlink" title="6ã€æŸ¥çœ‹å·²å®‰è£…çš„æ¨¡å—"></a>6ã€æŸ¥çœ‹å·²å®‰è£…çš„æ¨¡å—</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼špip list</span></span><br><span class="line">	æ­¤å‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…è¿‡çš„æ¨¡å—å</span><br></pre></td></tr></table></figure></div>

<h2 id="7ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"><a href="#7ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="7ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"></a>7ã€é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼šdeactivate</span></span><br><span class="line">	æ­¤å‘½ä»¤å¯ä»¥é€€å‡ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„è™šæ‹Ÿç¯å¢ƒ</span><br></pre></td></tr></table></figure></div>

<h2 id="8ã€ç”Ÿæˆrequirements-txtæ–‡ä»¶"><a href="#8ã€ç”Ÿæˆrequirements-txtæ–‡ä»¶" class="headerlink" title="8ã€ç”Ÿæˆrequirements.txtæ–‡ä»¶"></a>8ã€ç”Ÿæˆrequirements.txtæ–‡ä»¶</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼špip freeze &gt; requirements.txt</span></span><br><span class="line">	æ­¤å‘½ä»¤å¯ä»¥å°†ç¯å¢ƒä¸­æ‰€æœ‰å·²å®‰è£…çš„æ¨¡å—å’ŒåŒ…å¯¼å…¥åˆ°ç”Ÿæˆçš„requirements.txtæ–‡ä»¶ä¸­</span><br></pre></td></tr></table></figure></div>

<h2 id="9ã€æ‰¹é‡å®‰è£…æ¨¡å—"><a href="#9ã€æ‰¹é‡å®‰è£…æ¨¡å—" class="headerlink" title="9ã€æ‰¹é‡å®‰è£…æ¨¡å—"></a>9ã€æ‰¹é‡å®‰è£…æ¨¡å—</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘½ä»¤ï¼špip install -r requirements.txtæ–‡ä»¶æ‰€åœ¨ç›®å½•</span></span><br><span class="line">	-r åé¢è·Ÿçš„æ˜¯è·¯å¾„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ‡æ¢åˆ°requirements.txtæ–‡ä»¶çš„æ‰€åœ¨ç›®å½•è¿›å…¥è™šæ‹Ÿç¯å¢ƒè¿›è¡Œç›´æ¥å®‰è£…ï¼Œä½¿ç”¨---&gt;å‘½ä»¤ï¼š# pip install -r requirements.txt</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>è™šæ‹Ÿç¯å¢ƒå‘½ä»¤</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘é¡µè¯·æ±‚</title>
    <url>/blog/Spider/Spider_id_16.html</url>
    <content><![CDATA[<h2 id="1ã€è¯·æ±‚è¿‡ç¨‹"><a href="#1ã€è¯·æ±‚è¿‡ç¨‹" class="headerlink" title="1ã€è¯·æ±‚è¿‡ç¨‹"></a>1ã€è¯·æ±‚è¿‡ç¨‹</h2><a id="more"></a>

<h2 id="1ã€1-URLä»‹ç»"><a href="#1ã€1-URLä»‹ç»" class="headerlink" title="1ã€1  URLä»‹ç»"></a>1ã€1  URLä»‹ç»</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">URLä½œç”¨ï¼šç”¨äºå®šä½æœåŠ¡å™¨èµ„æº</span><br><span class="line">    <span class="comment"># ç»“æ„ï¼š</span></span><br><span class="line">        <span class="number">1</span>)åè®®ï¼šProtocol</span><br><span class="line">        <span class="number">2</span>)åŸŸåï¼šdomain</span><br><span class="line">        <span class="number">3</span>)ç«¯å£ï¼šport</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€2-HTTPè¯·æ±‚è¿‡ç¨‹"><a href="#1ã€2-HTTPè¯·æ±‚è¿‡ç¨‹" class="headerlink" title="1ã€2  HTTPè¯·æ±‚è¿‡ç¨‹"></a>1ã€2  HTTPè¯·æ±‚è¿‡ç¨‹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·æ±‚è¿‡ç¨‹ï¼š</span></span><br><span class="line">	å®¢æˆ·ç«¯é€šå¸¸æŒ‡webæµè§ˆå™¨æˆ–APPå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åè¿›è¡Œå¤„ç†ï¼Œå¹¶å‘å®¢æˆ·ç«¯å‘èµ·å“åº”</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€3-è¯·æ±‚å››éƒ¨åˆ†"><a href="#1ã€3-è¯·æ±‚å››éƒ¨åˆ†" class="headerlink" title="1ã€3  è¯·æ±‚å››éƒ¨åˆ†"></a>1ã€3  è¯·æ±‚å››éƒ¨åˆ†</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”±å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºçš„ï¼Œå¯ä»¥åˆ†ä¸ºå››éƒ¨åˆ†å†…å®¹ï¼š</span></span><br><span class="line">        <span class="number">1</span>)è¯·æ±‚æ–¹æ³•(Request Method)</span><br><span class="line">        <span class="number">2</span>)è¯·æ±‚ç½‘å€(Request URL)</span><br><span class="line">        <span class="number">3</span>)è¯·æ±‚å¤´(Request Headers)</span><br><span class="line">        <span class="number">4</span>)è¯·æ±‚ä½“(Request Body)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€4-è¯·æ±‚çš„å…«ç§æ–¹æ³•"><a href="#1ã€4-è¯·æ±‚çš„å…«ç§æ–¹æ³•" class="headerlink" title="1ã€4  è¯·æ±‚çš„å…«ç§æ–¹æ³•"></a>1ã€4  è¯·æ±‚çš„å…«ç§æ–¹æ³•</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·æ±‚å¸¸è§çš„å…«ç§æ–¹æ³•ï¼š</span></span><br><span class="line">        <span class="number">1</span>)GETï¼šè¯·æ±‚é¡µé¢,å¹¶è¿”å›é¡µé¢å†…å®¹</span><br><span class="line">        <span class="number">2</span>)POSTï¼šç”¨äºæäº¤è¡¨å•æ•°æ®æˆ–ä¸Šä¼ æ–‡ä»¶ï¼Œæ•°æ®åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­</span><br><span class="line">        <span class="number">3</span>)PUTï¼šä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šæ–‡æ¡£ä¸­çš„å†…å®¹ï¼Œå°±æ˜¯æ‰€è°“çš„æ›´æ–°æŒ‡å®šå†…å®¹</span><br><span class="line">        <span class="number">4</span>)DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„é¡µé¢</span><br><span class="line">        <span class="number">5</span>)HEADï¼šç´¯æ­»ä¸GETè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´</span><br><span class="line">        <span class="number">6</span>)CONNECTï¼šæŠŠæœåŠ¡å™¨å½“ä½œè·³æ¿ï¼Œè®©æœåŠ¡å™¨ä»£æ›¿å®¢æˆ·ç«¯è®¿é—®å…¶å®ƒç½‘é¡µ</span><br><span class="line">        <span class="number">7</span>)OPTIONSï¼šå…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½</span><br><span class="line">        <span class="number">8</span>)TRACEï¼šå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</span><br><span class="line"><span class="comment"># GETå’ŒPOSTåŒºåˆ«ï¼š(é¢è¯•é‡ç‚¹ã€éœ€é‡ç‚¹æŒæ¡)</span></span><br><span class="line">        <span class="number">1</span>)GETè¯·æ±‚ä¸­çš„å‚æ•°ä¼šåŒ…å«åœ¨URLé‡Œé¢ï¼Œæ•°æ®å¯ä»¥åœ¨URLä¸­çœ‹åˆ°ï¼Œè€ŒPOSTè¯·æ±‚çš„URLä¸ä¼šåŒ…å«è¿™äº›æ•°æ®ï¼ŒPOSTçš„æ•°æ®éƒ½æ˜¯é€šè¿‡è¡¨å•å½¢å¼ä¼ è¾“çš„ï¼ŒåŒ…å«åœ¨è¯·æ±‚ä½“ä¸­</span><br><span class="line">        <span class="number">2</span>)GETè¯·æ±‚æäº¤çš„æ•°æ®æœ€å¤šåªæœ‰<span class="number">1024</span>å­—èŠ‚ï¼Œè€ŒPOSTæ–¹å¼æ²¡æœ‰é™åˆ¶</span><br><span class="line">        <span class="number">3</span>)postè¯·æ±‚ç›¸å¯¹å®‰å…¨</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€5-è¯·æ±‚ç½‘å€"><a href="#1ã€5-è¯·æ±‚ç½‘å€" class="headerlink" title="1ã€5  è¯·æ±‚ç½‘å€"></a>1ã€5  è¯·æ±‚ç½‘å€</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·æ±‚ç½‘å€</span></span><br><span class="line">	<span class="number">1</span>)è¯·æ±‚çš„ç½‘å€ï¼Œå³åŒæ„èµ„æºå®šä½ç¬¦URLï¼Œå®ƒæ˜¯å¯ä»¥å”¯ä¸€ç¡®å®šæˆ‘ä»¬æƒ³è¯·æ±‚çš„èµ„æº</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€6-è¯·æ±‚å¤´"><a href="#1ã€6-è¯·æ±‚å¤´" class="headerlink" title="1ã€6  è¯·æ±‚å¤´"></a>1ã€6  è¯·æ±‚å¤´</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·æ±‚å¤´ï¼Œç”¨æ¥è¯´æ˜æœåŠ¡å™¨è¦ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯ï¼Œé‡ç‚¹æŒæ¡ï¼šAcceptã€Cookieã€Refererã€User-Agent</span></span><br><span class="line">        <span class="number">1</span>)Acceptï¼šè¯·æ±‚æŠ¥å¤´åŸŸï¼Œç”¨äºæŒ‡å®šå®¢æˆ·ç«¯å¯æ¥å—å“ªäº›ç±»å‹çš„ä¿¡æ¯</span><br><span class="line">        <span class="number">2</span>)Cookieï¼šä¹Ÿå¸¸ç”¨å¤æ•°å½¢å¼Cookiesï¼Œè¿™æ˜¯ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·è¿›è¡Œä¼šè¯è·Ÿè¸ªè€Œå­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°çš„æ•°æ®ã€‚å®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯ç»´æŒå½“å‰è®¿é—®ä¼šè¯ã€‚</span><br><span class="line">        <span class="number">3</span>)Refererï¼šæ­¤å†…å®¹ç”¨æ¥è¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ä»å“ªä¸ªé¡µé¢å‘è¿‡æ¥çš„ï¼ŒæœåŠ¡å™¨å¯ä»¥æ‹¿åˆ°è¿™ä¸€ä¿¡æ¯å¹¶åšç›¸åº”çš„å¤„ç†ï¼Œå¦‚åšæ¥æºç»Ÿè®¡ã€é˜²ç›—é“¾å¤„ç†ç­‰</span><br><span class="line">        <span class="number">4</span>)User-Agentï¼šç®€ç§°UAï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²å¤´ï¼Œå¯ä»¥ä½¿æœåŠ¡å™¨è¯†åˆ«å®¢æˆ·ä½¿ç”¨çš„æ“ä½œç³»ç»ŸåŠç‰ˆæœ¬ï¼Œæµè§ˆå™¨åŠç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚åœ¨åšçˆ¬è™«æ—¶é™„åŠ ä¸Šæ­¤ä¿¡æ¯ï¼Œ</span><br><span class="line">        			å¯ä»¥ä¼ªè£…ä¸ºæµè§ˆå™¨ï¼Œå¦‚æœä¸åŠ ï¼Œå¾ˆå¯èƒ½ä¼šè¢«è¯†åˆ«å‡ºä¸ºçˆ¬è™«</span><br><span class="line">        <span class="number">5</span>)x-requested-<span class="keyword">with</span>ï¼šXMLHtpRequest	<span class="comment"># ä»£è¡¨ajaxè¯·æ±‚</span></span><br><span class="line">        <span class="number">6</span>)Accept-Encodingï¼šæŒ‡å®šå®¢æˆ·ç«¯å¯æ¥å—çš„å†…å®¹ç¼–ç </span><br><span class="line">        <span class="number">7</span>)Content-Typeï¼šä¹Ÿå«äº’è”ç½‘åª’ä½“ç±»å‹(Intemet Media Type) æˆ–è€…MIMEç±»å‹ï¼Œåœ¨HTTPåè®®æ¶ˆæ¯å¤´ä¸­ï¼Œå®ƒç”¨æ¥è¡¨ç¤ºå…·ä½“è¯·æ±‚ä¸­çš„åª’ä½“ç±»å‹ä¿¡æ¯ã€‚</span><br><span class="line">        			ä¾‹å¦‚:text/htmlä»£è¡¨HTMLæ ¼å¼ï¼Œimage/gifä»£è¡¨GIFå›¾ç‰‡ï¼Œapplication/jsonä»£è¡¨JSONç±»å‹</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€7-è¯·æ±‚ä½“"><a href="#1ã€7-è¯·æ±‚ä½“" class="headerlink" title="1ã€7  è¯·æ±‚ä½“"></a>1ã€7  è¯·æ±‚ä½“</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·æ±‚ä½“</span></span><br><span class="line">	è¯·æ±‚ä½“ä¸€èˆ¬æ‰¿è½½çš„å†…å®¹æ—¶POSTè¯·æ±‚ä¸­çš„è¡¨å•æ•°æ®ï¼Œè€Œå¯¹äºGETè¯·æ±‚ï¼Œè¯·æ±‚ä½“åˆ™ä¸ºç©º</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€8-å“åº”"><a href="#1ã€8-å“åº”" class="headerlink" title="1ã€8  å“åº”"></a>1ã€8  å“åº”</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å“åº”ï¼Œæ˜¯ç”±æœåŠ¡ç«¯è¿”å›ç»™å®¢æˆ·ç«¯çš„ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šå“åº”çŠ¶æ€ç (response status code)ï¼Œå“åº”å¤´(response headers)ï¼Œå“åº”ä½“(response body)</span></span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€8ã€1-å“åº”çŠ¶æ€ç "><a href="#1ã€8ã€1-å“åº”çŠ¶æ€ç " class="headerlink" title="1ã€8ã€1  å“åº”çŠ¶æ€ç "></a>1ã€8ã€1  å“åº”çŠ¶æ€ç </h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å“åº”çŠ¶æ€ç ï¼šç”¨äºå“¦æŒ‰æ®µè¯·æ±‚åçš„å“åº”çŠ¶æ€ï¼Œå¦‚200ä»£è¡¨è¯·æ±‚æˆåŠŸï¼Œ404ä»£è¡¨é¡µé¢æ‰¾ä¸åˆ°ï¼Œ500ä»£è¡¨æœåŠ¡å™¨é”™è¯¯</span></span><br><span class="line"><span class="comment"># å¸¸è§çš„çŠ¶æ€ç ï¼š</span></span><br><span class="line">	<span class="number">200</span>ç³»åˆ—ï¼š</span><br><span class="line">    	<span class="number">200</span> æˆåŠŸ	æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚	<span class="comment"># é‡ç‚¹</span></span><br><span class="line">        </span><br><span class="line">        <span class="number">300</span>ç³»åˆ—ï¼š</span><br><span class="line">            <span class="number">301</span> æ°¸ä¹…ç§»åŠ¨	è¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œå³æ°¸ä¹…é‡å®šå‘	<span class="comment"># é‡ç‚¹</span></span><br><span class="line">            <span class="number">302</span>	ä¸´æ—¶ç§»åŠ¨	è¯·æ±‚çš„ç½‘é¡µæš‚æ—¶è·³è½¬åˆ°å…¶å®ƒé¡µé¢ï¼Œå³æš‚æ—¶é‡å®šå‘	<span class="comment"># é‡ç‚¹</span></span><br><span class="line">        </span><br><span class="line">        <span class="number">400</span>ç³»åˆ—ï¼š</span><br><span class="line">            <span class="number">400</span>	é”™è¯¯è¯·æ±‚	æœåŠ¡å™¨æ— æ³•è§£æè¯¥è¯·æ±‚	<span class="comment"># é‡ç‚¹</span></span><br><span class="line">            <span class="number">401</span>	æœªæˆæƒ		è¯·æ±‚æ²¡æœ‰è¿›è¡Œèº«ä»½éªŒè¯æˆ–éªŒè¯æœªé€šè¿‡</span><br><span class="line">            <span class="number">403</span>	ç¦æ­¢è®¿é—®	æœåŠ¡å™¨æ‹’ç»æ­¤è¯·æ±‚	<span class="comment"># é‡ç‚¹</span></span><br><span class="line">            <span class="number">404</span>	æœªæ‰¾åˆ°		æœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„ç½‘é¡µ</span><br><span class="line">            </span><br><span class="line">        <span class="number">500</span>ç³»åˆ—ï¼š</span><br><span class="line">            <span class="number">500</span>	æœåŠ¡å™¨å†…éƒ¨é”™è¯¯		æœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚	<span class="comment"># é‡ç‚¹</span></span><br><span class="line">            <span class="number">501</span>	æœªå®ç°		æœåŠ¡å™¨ä¸å…·å¤‡å®Œæˆè¯·æ±‚çš„åŠŸèƒ½</span><br><span class="line">            <span class="number">502</span>	é”™è¯¯ç½‘å…³	æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº”</span><br><span class="line">            <span class="number">504</span>	ç½‘å…³è¶…æ—¶	æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚</span><br><span class="line">            <span class="number">505</span>	HTTPç‰ˆæœ¬ä¸æ”¯æŒ	æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æ‰€ç”¨çš„HTTPåè®®ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line"><span class="comment">### (æ³¨æ„ï¼šçŠ¶æ€ç ä¸èƒ½å®Œå…¨ä»£è¡¨å“åº”çŠ¶æ€ï¼Œéƒ¨åˆ†ç½‘ç«™çš„çŠ¶æ€ç æ˜¯è‡ªå®šä¹‰çš„ï¼Œä¸€åˆ‡ä»¥å“åº”çš„æ•°æ®ä¸ºå‡†)</span></span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€8ã€2-å“åº”å¤´"><a href="#1ã€8ã€2-å“åº”å¤´" class="headerlink" title="1ã€8ã€2  å“åº”å¤´"></a>1ã€8ã€2  å“åº”å¤´</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å“åº”å¤´ï¼š</span></span><br><span class="line">    å“åº”å¤´åŒ…å«äº†æœåŠ¡å™¨å¯¹è¯·æ±‚çš„åº”ç­”ä¿¡æ¯</span><br><span class="line">    Dateï¼šè¡¨ç¤ºå“åº”äº§ç”Ÿçš„æ—¶é—´</span><br><span class="line">    Content-Encodingï¼šæŒ‡å®šå“åº”å†…å®¹çš„ç¼–ç </span><br><span class="line">    Serverï¼šåŒ…å«æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åç§°ã€ç‰ˆæœ¬å·ç­‰</span><br><span class="line">    Content-Typeï¼šæ–‡æ¡£ç±»å‹ï¼ŒæŒ‡å®šè¿”å›çš„æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆï¼Œå¦‚text/htmlä»£è¡¨è¿”å›HTMLæ–‡æ¡£ï¼Œapplication/x-javascriotåˆ™è¡¨è¾¾è¿”å›JavaScriptæ–‡ä»¶ï¼Œ</span><br><span class="line">    			image/jpegåˆ™ä»£è¡¨è¿”å›å›¾ç‰‡</span><br><span class="line">    Set-Cookieï¼šè®¾ç½®Cookiesï¼Œå“åº”å¤´ä¸­çš„Set-Cookieå‘Šè¯‰æµè§ˆå™¨éœ€è¦å°†æ­¤å†…å®¹æ”¾åœ¨Cookieä¸­ï¼Œä¸‹æ¬¡è¯·æ±‚æºå¸¦Cookieè¯·æ±‚</span><br><span class="line">    Expiresï¼šæŒ‡å®šå“åº”çš„è¿‡æœŸæ—¶é—´ï¼Œå¯ä»¥ä½¿ä»£ç†æœåŠ¡å™¨æˆ–æµè§ˆå™¨å°†åŠ è½½çš„å†…å®¹æ›´æ–°åˆ°ç¼“å­˜ä¸­ã€‚å¦‚æœå†æ¬¡è®¿é—®æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­åŠ è½½ï¼Œé™ä½æœåŠ¡å™¨è´Ÿè½½ï¼Œ</span><br><span class="line">    		ç¼©çŸ­åŠ è½½æ—¶é—´</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€8ã€3-å“åº”ä½“"><a href="#1ã€8ã€3-å“åº”ä½“" class="headerlink" title="1ã€8ã€3  å“åº”ä½“"></a>1ã€8ã€3  å“åº”ä½“</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#  å“åº”ä½“</span></span><br><span class="line"><span class="comment"># æœ€é‡è¦çš„å½“å±å“åº”ä½“çš„å†…å®¹äº†ï¼Œå“åº”çš„æ­£æ–‡æ•°æ®éƒ½åœ¨å“åº”ä½“ä¸­ã€‚</span></span><br><span class="line">	æ¯”å¦‚è¯·æ±‚ç½‘é¡µæ—¶ï¼Œä»–çš„å“åº”ä½“å°±æ˜¯ç½‘é¡µçš„HTMLä»£ç ï¼Œè¯·æ±‚ä¸€å¼ å›¾ç‰‡æ—¶ï¼Œä»–çš„ç›¸åº”ä½“å°±æ˜¯å›¾ç‰‡çš„äºŒè¿›åˆ¶æ•°æ®ã€‚æˆ‘ä»¬åšçˆ¬è™«è¯·æ±‚ç½‘é¡µåï¼Œè¦è§£æçš„å†…å®¹å°±æ˜¯å“åº”ä½“</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€9-ç½‘é¡µåŸºç¡€"><a href="#1ã€9-ç½‘é¡µåŸºç¡€" class="headerlink" title="1ã€9  ç½‘é¡µåŸºç¡€"></a>1ã€9  ç½‘é¡µåŸºç¡€</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç½‘é¡µçš„ç»„æˆ</span></span><br><span class="line">ç½‘é¡µå¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šHTMLã€CSSã€JavaScript</span><br><span class="line">        <span class="number">1</span>)HTMLï¼šå…¨ç§°ï¼šHyper Text Markup Languageã€å³è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</span><br><span class="line">        <span class="comment"># å®šä¹‰äº†ç½‘é¡µçš„éª¨æ¶</span></span><br><span class="line">        <span class="number">2</span>)CSSï¼šå…¨ç§°ï¼šCascading Style Sheetsï¼Œå³å±‚å æ ·å¼è¡¨</span><br><span class="line">        <span class="comment"># å®šä¹‰äº†ç½‘é¡µçš„æ ·å¼</span></span><br><span class="line">        <span class="number">3</span>)JavaScriptï¼šç®€ç§°JSï¼Œæ˜¯ä¸€ç§è„šæœ¬è¯­è¨€</span><br><span class="line">        <span class="comment"># å®šä¹‰äº†ç½‘é¡µä¸ç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œå¦‚ä¸‹è½½è¿›åº¦æ¡ï¼Œæç¤ºæ¡†ï¼Œè½®æ’­å›¾</span></span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€ç¬¬ä¸€æ¬¡è¯·æ±‚"><a href="#2ã€ç¬¬ä¸€æ¬¡è¯·æ±‚" class="headerlink" title="2ã€ç¬¬ä¸€æ¬¡è¯·æ±‚"></a>2ã€ç¬¬ä¸€æ¬¡è¯·æ±‚</h2><h2 id="2ã€1-çˆ¬è™«çš„å·¥ä½œæµ"><a href="#2ã€1-çˆ¬è™«çš„å·¥ä½œæµ" class="headerlink" title="2ã€1  çˆ¬è™«çš„å·¥ä½œæµ"></a>2ã€1  çˆ¬è™«çš„å·¥ä½œæµ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ç¡®å®šURLï¼Œæƒ³æœåŠ¡å™¨å‘é€è¯·æ±‚å¹¶è·å¾—å“åº”ï¼šrequestsã€urllibã€aiohttp</span><br><span class="line">åœ¨å“åº”ä¸­æå–ç›®æ ‡æ•°æ®ï¼Œå³æ•°æ®è§£æï¼šxpathã€bs4ã€æ­£åˆ™ã€PyQuery</span><br><span class="line">æ•°æ®æŒä¹…åŒ–ï¼šæ–‡ä»¶ï¼Œå…³ç³»å‹æ•°æ®åº“ï¼Œéå…³ç³»å‹æ•°æ®åº“</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€2-ç¬¬ä¸€ä¸ªçˆ¬è™«"><a href="#2ã€2-ç¬¬ä¸€ä¸ªçˆ¬è™«" class="headerlink" title="2ã€2  ç¬¬ä¸€ä¸ªçˆ¬è™«"></a>2ã€2  ç¬¬ä¸€ä¸ªçˆ¬è™«</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># éœ€æ±‚ï¼šçˆ¬å–æŠ¥è¯»é¦–é¡µï¼Œå¹¶å†™å…¥æ–‡ä»¶ä¸­ï¼Œæœ€åç”¨æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶æŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼åŒ…</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¡®å®šurlï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚</span></span><br><span class="line">url = <span class="string">'https://www.baidu.com/'</span></span><br><span class="line">res = requests.get(url=rul)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ“ä½œå“åº”æ•°æ®ï¼Œè·å–ç›®æ ‡æ•°æ®ï¼Œæ ¹æ®ç½‘é¡µç¼–ç æ¨¡å¼è¿›è¡Œç¼–ç </span></span><br><span class="line">res.encoding = <span class="string">'utf-8'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ç›®æ ‡æ•°æ®æŒä¹…åŒ–åˆ°æœ¬åœ°ï¼šå†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu.html'</span>,<span class="string">'w'</span>,encoding = <span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.text)	<span class="comment"># res.text	ä»£è¡¨å°†è·å–çš„æ–‡æœ¬</span></span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€3-requestsæ¨¡å—åŸºæœ¬ä½¿ç”¨"><a href="#2ã€3-requestsæ¨¡å—åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2ã€3  requestsæ¨¡å—åŸºæœ¬ä½¿ç”¨"></a>2ã€3  requestsæ¨¡å—åŸºæœ¬ä½¿ç”¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…requestsæ¨¡å—</span></span><br><span class="line">pip install requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># requestsçš„è¯·æ±‚æ–¹å¼</span></span><br><span class="line">	<span class="number">1</span>ã€getè¯·æ±‚ï¼š</span><br><span class="line">                <span class="number">1</span>)ä¸æºå¸¦å‚æ•°çš„getè¯·æ±‚</span><br><span class="line">                <span class="number">2</span>)ä¸æºå¸¦å‚æ•°çš„getè¯·æ±‚	+  headers</span><br><span class="line">                <span class="number">3</span>)æºå¸¦å‚æ•°çš„getè¯·æ±‚  +  headers</span><br><span class="line">            </span><br><span class="line">          <span class="number">2</span>ã€postè¯·æ±‚ï¼šæ„å»ºå‚æ•°çš„postè¯·æ±‚</span><br><span class="line">          <span class="number">3</span>ã€å“åº”æ•°æ®çš„è·å–ä¸å±æ€§</span><br><span class="line">                <span class="number">3.1</span>)å“åº”æ•°æ®çš„è·å–ï¼š</span><br><span class="line">                        <span class="number">3.11</span>)res.textï¼šæ–‡æœ¬æ•°æ®</span><br><span class="line">                        <span class="number">3.12</span>)res.json()ï¼šJsonæ•°æ®</span><br><span class="line">                        <span class="number">3.13</span>)res.contentï¼šæµ</span><br><span class="line">                <span class="number">3.2</span>)å“åº”çš„å…¶å®ƒå±æ€§ï¼š</span><br><span class="line">                	<span class="number">3.21</span>)res.status_codeï¼šè·å–å“åº”çŠ¶æ€ç </span><br><span class="line">                        <span class="number">3.22</span>)res.headersï¼šå“åº”å¤´</span><br><span class="line">                        <span class="number">3.23</span>)res.cookieï¼šcookieä¿¡æ¯</span><br><span class="line">                        <span class="number">3.24</span>)res.historyï¼šå“åº”å†å²</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€3ã€1-requestsæ¨¡å—çš„getè¯·æ±‚"><a href="#2ã€3ã€1-requestsæ¨¡å—çš„getè¯·æ±‚" class="headerlink" title="2ã€3ã€1  requestsæ¨¡å—çš„getè¯·æ±‚"></a>2ã€3ã€1  requestsæ¨¡å—çš„getè¯·æ±‚</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸æºå¸¦å‚æ•°çš„getè¯·æ±‚ï¼šçˆ¬å–æœç‹—ä¸»é¡µ</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">'https://www.sogou.com/'</span></span><br><span class="line">res = requests.get(url=url)</span><br><span class="line">res.encoding = <span class="string">'utf-8'</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'sogou.html'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.text)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸æºå¸¦å‚æ•°çš„getè¯·æ±‚ + readersï¼šçˆ¬å–çŸ¥ä¹çš„å‘ç°é¡µ</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">'https://www.zhihu.com/explore'</span></span><br><span class="line">res = requests.get(url = url,headers = headers)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'zhihu.html'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.text)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æºå¸¦å‚æ•°çš„getè¯·æ±‚ + headersï¼šçŸ¥ä¹çš„å‘ç°æ ä¸­æœç´¢Python</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">url =  <span class="string">'https://www.zhihu.com/search?'</span></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">'type'</span> : <span class="string">'content'</span>,</span><br><span class="line">    <span class="string">'q'</span> : <span class="string">'python'</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.get(url = url , headers = headers , params = params)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'zhihu.html'</span> , <span class="string">'w'</span> , encoding = <span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.wirte(res.text)</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€3ã€2-requestsæ¨¡å—çš„postè¯·æ±‚"><a href="#2ã€3ã€2-requestsæ¨¡å—çš„postè¯·æ±‚" class="headerlink" title="2ã€3ã€2  requestsæ¨¡å—çš„postè¯·æ±‚"></a>2ã€3ã€2  requestsæ¨¡å—çš„postè¯·æ±‚</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># requestsçš„postè¯·æ±‚ï¼šä»¥postæ–¹å¼è¯·æ±‚ï¼šç™¾åº¦ç¿»è¯‘æ—¶è¿”å›çš„è¯·æ±‚ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.70 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">'https://fanyi.baidu.com/sug'</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'kw'</span> : <span class="string">'girlgriend'</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.post(url = url , headers = headers , data = data)</span><br><span class="line">print(josn.loads(res.text))</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€josnå½¢å¼ä¸æµå½¢å¼çš„å“åº”æ•°æ®ç¤ºä¾‹"><a href="#3ã€josnå½¢å¼ä¸æµå½¢å¼çš„å“åº”æ•°æ®ç¤ºä¾‹" class="headerlink" title="3ã€josnå½¢å¼ä¸æµå½¢å¼çš„å“åº”æ•°æ®ç¤ºä¾‹"></a>3ã€josnå½¢å¼ä¸æµå½¢å¼çš„å“åº”æ•°æ®ç¤ºä¾‹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># jsonå½¢å¼å“åº”æ•°æ®ç¤ºä¾‹ï¼šbilibiliçš„Pythonè§†é¢‘æ•™ç¨‹ï¼Œç›®å½•åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">'https://api.bilibili.com/x/web-interface/view?aid=14184325&amp;cid=23153678'</span></span><br><span class="line">res = requests.get(url = url , headers = headers)</span><br><span class="line">print(res)</span><br><span class="line">print(res.status_code)</span><br><span class="line">print(res.headers)</span><br><span class="line">print(<span class="string">'----------------------------------------------------'</span>)</span><br><span class="line">print(res.json())</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æµå½¢å¼å“åº”æ•°æ®ç¤ºä¾‹ï¼šç«™é•¿ç´ æçš„ç®€å†æ¨¡æ¿</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">'http://fjdx.sc.chinaz.net/Files/DownLoad/jianli/201907/jianli10810.rar'</span></span><br><span class="line">res = requests.get(url = url , headers = headers)</span><br><span class="line">print(res.content)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'jianli.rar'</span> , <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.content)</span><br></pre></td></tr></table></figure></div>





]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Spider</tag>
      </tags>
  </entry>
  <entry>
    <title>çˆ¬è™«çš„ä»‹ç»</title>
    <url>/blog/Spider/Spider_id_15.html</url>
    <content><![CDATA[<h2 id="1ã€çˆ¬è™«çš„æ¦‚å¿µï¼š"><a href="#1ã€çˆ¬è™«çš„æ¦‚å¿µï¼š" class="headerlink" title="1ã€çˆ¬è™«çš„æ¦‚å¿µï¼š"></a>1ã€çˆ¬è™«çš„æ¦‚å¿µï¼š</h2><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>ã€<span class="comment"># çˆ¬è™«åˆç§°ç½‘é¡µèœ˜è››å’Œç½‘ç»œæœºå™¨äºº</span></span><br><span class="line"><span class="number">2</span>ã€<span class="comment"># çˆ¬è™«æ˜¯æ¨¡æ‹Ÿäººæ“ä½œå®¢æˆ·ç«¯(æµè§ˆå™¨ï¼ŒAPP)ï¼Œå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ŒæŠ“å–æ•°æ®çš„è‡ªåŠ¨åŒ–ç¨‹åºæˆ–è„šæœ¬</span></span><br><span class="line">  <span class="comment"># è¯´æ˜ï¼š</span></span><br><span class="line">    <span class="number">1</span>)æ¨¡æ‹Ÿï¼šç”¨çˆ¬è™«ç¨‹åºä¼ªè£…å‡ºäººçš„è¡Œä¸ºï¼Œé¿å…è¢«æœåŠ¡å™¨è¯†åˆ«ä¸ºçˆ¬è™«ç¨‹åºæˆ–è„šæœ¬</span><br><span class="line">    <span class="number">2</span>)å®¢æˆ·ç«¯ï¼šæµè§ˆå™¨ï¼ŒAPPéƒ½å¯ä»¥å®ç°äººä¸æœåŠ¡å™¨ä¹‹é—´äº¤äº’çš„è¡Œä¸ºï¼Œåº”ç”¨å®¢æˆ·ç«¯ä»æœåŠ¡å™¨è·å–æ•°æ®</span><br><span class="line">    <span class="number">3</span>)è‡ªåŠ¨åŒ–ï¼šæ•°é‡è¾ƒå°æ—¶å¯ä»¥äººä¸ºçš„ä»æœåŠ¡ç«¯è·å–æ•°æ®ï¼Œä½†å…¬å¸éœ€æ±‚é«˜è¾¾ç™¾ä¸‡ç”šè‡³åƒä¸‡æ¡ä»¥ä¸Šæ—¶ï¼Œå°±éœ€è¦ç¨‹åºè‡ªåŠ¨ä»æœåŠ¡ç«¯è·å–æ•°æ®</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€çˆ¬è™«çš„è¯­è¨€ï¼š"><a href="#2ã€çˆ¬è™«çš„è¯­è¨€ï¼š" class="headerlink" title="2ã€çˆ¬è™«çš„è¯­è¨€ï¼š"></a>2ã€çˆ¬è™«çš„è¯­è¨€ï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>ã€<span class="comment"># çˆ¬è™«çš„è¯­è¨€æœ‰ï¼šPHPã€C/C++ã€Javaã€Python</span></span><br><span class="line"><span class="number">2</span>ã€<span class="comment"># å„è¯­è¨€ä¹‹é—´çš„å¯¹æ¯”ï¼š</span></span><br><span class="line">	<span class="number">1</span>)PHPï¼šå¹¶å‘èƒ½åŠ›å·®ï¼Œå¯¹å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹æ”¯æŒä¸å¥½ï¼Œæ•°æ®é‡è¾ƒå¤§æ—¶çˆ¬è™«æ•ˆç‡æä½</span><br><span class="line">    <span class="number">2</span>)C/C++ï¼šè¯­è¨€æ•ˆç‡é«˜ï¼Œä½†å­¦ä¹ æˆæœ¬é«˜ï¼Œå¯¹ç¨‹åºå‘˜çš„è®¡æ•°èƒ½åŠ›è¦æ±‚è¾ƒé«˜ï¼Œç›®å‰è¿˜å¤„äºç ”ç©¶é˜¶æ®µï¼Œéœ€æ±‚é‡å¾ˆå°‘</span><br><span class="line">    <span class="number">3</span>)Javaï¼špythonçˆ¬è™«çš„ä¸»è¦ç«äº‰å¯¹æ‰‹ï¼Œç”±äºJavaè¯­è¨€çš„ç‰¹ç‚¹ï¼Œä»£ç è‡ƒè‚¿ï¼Œä»£ç é‡å¤§ï¼Œç»´æŠ¤æˆæœ¬å’Œé‡æ„æˆæœ¬é«˜ï¼Œå¼€å‘æ•ˆç‡ä½ï¼Œä½†ç›®å‰å¸‚åœºå²—ä½éœ€æ±‚æ¯”è¾ƒæ—ºç››</span><br><span class="line">    <span class="number">4</span>)pythonï¼šè¯­æ³•ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œå¯¹äºæ–°æ‰‹æ¯”è¾ƒå‹å¥½ï¼Œpythonè¯­è¨€è‰¯å¥½çš„ç”Ÿæ€ï¼Œå¤§é‡åº“å’Œæ¡†æ¶çš„æ”¯æŒï¼Œä½¿å¾—pythonçˆ¬è™«ç›®å‰å¤„äºçˆ¬è™«åœˆçš„ä¸»å¯¼åœ°ä½</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€çˆ¬è™«çš„åˆ†ç±»ï¼š"><a href="#3ã€çˆ¬è™«çš„åˆ†ç±»ï¼š" class="headerlink" title="3ã€çˆ¬è™«çš„åˆ†ç±»ï¼š"></a>3ã€çˆ¬è™«çš„åˆ†ç±»ï¼š</h2><h2 id="3ã€1-é€šç”¨çˆ¬è™«"><a href="#3ã€1-é€šç”¨çˆ¬è™«" class="headerlink" title="3ã€1  é€šç”¨çˆ¬è™«"></a>3ã€1  é€šç”¨çˆ¬è™«</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>ã€é€šç”¨çˆ¬è™«ï¼šæœç´¢å¼•æ“</span><br><span class="line">	<span class="comment">#(é€šç”¨çˆ¬è™«å°±æ˜¯ä¸€ä¸ªçˆ¬è™«ï¼Œå®ƒçˆ¬å–çš„æ•°æ®ä¸ºæœç´¢å¼•æ“æä¾›æ£€ç´¢æœåŠ¡ï¼Œä½†æ˜¯é€šç”¨çˆ¬è™«ä¸æ˜¯æœç´¢å¼•æ“)</span></span><br><span class="line">	<span class="number">1</span>)å®ä¾‹ï¼šç™¾åº¦ï¼Œæœç‹—ï¼ŒGoolgeçš„æœç´¢å¼•æ“</span><br><span class="line">    <span class="number">2</span>)å·¥ä½œæµï¼š</span><br><span class="line">        <span class="number">2.1</span>)ç»™å®šä¸€ä¸ªèµ·å§‹URLï¼Œæ”¾åœ¨çˆ¬è™«é˜Ÿåˆ—ä¸­</span><br><span class="line">        <span class="number">2.2</span>)çˆ¬è™«ä»é˜Ÿåˆ—ä¸­å–å‡ºURLï¼Œçˆ¬å–æ•°æ®</span><br><span class="line">        <span class="number">2.3</span>)è§£æçˆ¬å–åˆ°çš„æ•°æ®ï¼Œè·å–ç½‘é¡µå†…æ‰€æœ‰URLåœ°å€ï¼Œæ”¾åœ¨çˆ¬è™«é˜Ÿåˆ—ä¸­</span><br><span class="line">        <span class="number">2.4</span>)é‡å¤ç¬¬äºŒä¸ªæ­¥éª¤</span><br><span class="line">    <span class="number">3</span>)ä½¿æœç´¢å¼•æ“è·å–ç½‘ç«™é“¾æ¥ï¼š</span><br><span class="line">        <span class="number">3.1</span>)ä¸»åŠ¨å°†URLæäº¤ç»™æœç´¢å¼•æ“(https://www.***.com)</span><br><span class="line">        <span class="number">3.2</span>)åœ¨å…¶å®ƒçƒ­é—¨ç½‘ç«™è®¾ç½®å‹æƒ…é“¾æ¥</span><br><span class="line">        <span class="number">3.3</span>)ç™¾åº¦å’ŒDNSæœåŠ¡å•†åˆä½œï¼Œæ”¶å½•æ–°çš„ç½‘ç«™</span><br><span class="line">    <span class="number">4</span>)ç½‘ç«™æ’å(SEO)ï¼š</span><br><span class="line">        <span class="number">4.1</span>)æ ¹æ®PageRankå€¼è¿›è¡Œæ’å(æµé‡ï¼Œç‚¹å‡»ç‡)</span><br><span class="line">        <span class="number">4.2</span>)ç™¾åº¦ç«ä»·æ’åï¼Œé’±å¤šå°±å¯ä»¥é å‰æ’</span><br><span class="line">    <span class="number">5</span>)ç¼ºç‚¹ï¼š</span><br><span class="line">        <span class="number">5.1</span>)æŠ“å–çš„æ•°æ®å¤šæ•°æ— ç”¨</span><br><span class="line">        <span class="number">5.2</span>)æ— æ³•ç²¾ç¡®è·å–æ•°æ®</span><br><span class="line">    6)åè®®ï¼šrobotsåè®®---&gt;çº¦å®šå“ªäº›å†…å®¹å…è®¸è¢«å“ªäº›çˆ¬è™«çˆ¬å–</span><br><span class="line">        <span class="number">6.1</span>)æ— éœ€éµå®ˆã€è¯¥åè®®ä½¿ç”¨äºé€šç”¨çˆ¬è™«ï¼Œè€Œæˆ‘ä»¬å†™çš„ä½¿èšç„¦çˆ¬è™«</span><br><span class="line">        <span class="number">6.2</span>)æŸ¥çœ‹æ–¹æ³•ï¼šç½‘ç«™URL/robots.txtï¼Œä¾‹å¦‚ï¼šhttps://www.baidu.com/robots.txt</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€2-èšç„¦çˆ¬è™«"><a href="#3ã€2-èšç„¦çˆ¬è™«" class="headerlink" title="3ã€2  èšç„¦çˆ¬è™«"></a>3ã€2  èšç„¦çˆ¬è™«</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>)èšç„¦çˆ¬è™«åˆåˆ†ä¸ºï¼šå¢é‡å¼çˆ¬è™«å’Œæ·±åº¦çˆ¬è™«</span><br><span class="line"><span class="number">2</span>)æ¦‚å¿µ</span><br><span class="line">	<span class="number">2.1</span>)èšç„¦çˆ¬è™«æ˜¯é’ˆå¯¹æŸä¸€é¢†åŸŸä¸­çš„ç‰¹å®šæ•°æ®è¿›è¡Œçˆ¬å–çš„ç¨‹åºï¼Œæ¥æŠ“å–æ‰€éœ€è¦çš„æ•°æ®(åˆç§°ï¼šå‚ç›´é¢†åŸŸçˆ¬å–)</span><br><span class="line"><span class="number">3</span>)è®¾è®¡æ€è·¯ï¼š</span><br><span class="line">        <span class="number">3.1</span>)ç¡®å®šçˆ¬å–çš„URLï¼Œæ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚</span><br><span class="line">        <span class="number">3.2</span>)è·å–ç›¸åº”æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®è§£æ </span><br><span class="line"></span><br><span class="line">        <span class="number">3.3</span>)å°†è·å–çš„æ•°æ®æŒä¹…åŒ–ä¿å­˜åˆ°æœ¬åœ°</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€åè®®"><a href="#4ã€åè®®" class="headerlink" title="4ã€åè®®"></a>4ã€åè®®</h2><h2 id="4ã€1-OSIä¸ƒå±‚æ¨¡å‹"><a href="#4ã€1-OSIä¸ƒå±‚æ¨¡å‹" class="headerlink" title="4ã€1  OSIä¸ƒå±‚æ¨¡å‹"></a>4ã€1  OSIä¸ƒå±‚æ¨¡å‹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">åº”ç”¨å±‚</span><br><span class="line">è¡¨ç¤ºå±‚</span><br><span class="line">ä¼šè¯å±‚</span><br><span class="line">ä¼ è¾“å±‚</span><br><span class="line">ç½‘ç»œå±‚</span><br><span class="line">æ•°æ®é“¾è·¯å±‚</span><br><span class="line">ç‰©ç†å±‚</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€2-TCT-IPäº”å±‚æ¨¡å‹"><a href="#4ã€2-TCT-IPäº”å±‚æ¨¡å‹" class="headerlink" title="4ã€2  TCT/IPäº”å±‚æ¨¡å‹"></a>4ã€2  TCT/IPäº”å±‚æ¨¡å‹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">åº”ç”¨å±‚ï¼šHTTPã€HTTPSã€FIP(æ–‡ä»¶ä¼ è¾“)ã€SSHåè®®</span><br><span class="line">ä¼ è¾“å±‚ï¼šTCPã€UDPåè®®</span><br><span class="line">ç½‘ç»œå±‚ï¼šIPåè®®</span><br><span class="line">æ•°æ®é“¾è·¯å±‚ï¼šARPåè®®</span><br><span class="line">ç‰©ç†å±‚ï¼šä»¥å¤ªç½‘åè®®</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€3-å¸¸ç”¨åè®®"><a href="#4ã€3-å¸¸ç”¨åè®®" class="headerlink" title="4ã€3  å¸¸ç”¨åè®®"></a>4ã€3  å¸¸ç”¨åè®®</h2><h2 id="4ã€3ã€1-HTTPåè®®"><a href="#4ã€3ã€1-HTTPåè®®" class="headerlink" title="4ã€3ã€1  HTTPåè®®"></a>4ã€3ã€1  HTTPåè®®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">HTTPåè®®ï¼šæ˜æ–‡ä¼ è¾“ï¼Œç«¯å£<span class="number">80</span></span><br><span class="line">HTTPåè®®å…¨ç§°Hyper Text Transfer Protocolï¼Œå³è¶…æ–‡æœ¬ä¼ è¾“åè®®</span><br><span class="line">HTTPåè®®æ˜¯ç”¨äºä»ç½‘ç»œä¼ è¾“è¶…æ–‡æœ¬æ•°æ®åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ï¼Œå®ƒèƒ½ä¿è¯é«˜æ•ˆè€Œè½¬å´åœ°ä¼ é€è¶…æ–‡æœ¬æ–‡æ¡£</span><br><span class="line">ç›®å‰å¹¿æ³›ä½¿ç”¨HTTP	<span class="number">1.1</span>ç‰ˆæœ¬</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€3ã€2-HTTPSåè®®"><a href="#4ã€3ã€2-HTTPSåè®®" class="headerlink" title="4ã€3ã€2  HTTPSåè®®"></a>4ã€3ã€2  HTTPSåè®®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">HTTPSåè®®ï¼šåŠ å¯†ä¼ è¾“ï¼Œç«¯å£<span class="number">443</span></span><br><span class="line">HTTPSåè®®å…¨ç§°ï¼šHyper Text Transfer Protocol over Secure Socket Layerï¼Œæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼ŒHTTPSåè®®å®è´¨æ˜¯HTTPçš„å®‰å…¨ç‰ˆï¼Œå³HTTPä¸‹åŠ å…¥SSLå±‚ï¼Œç®€ç§°HTTPS</span><br><span class="line">HTTPSçš„å®‰å…¨ä½“ç°åœ¨SSLçš„åŠ å¯†è¡Œä¸ºï¼Œå³é€šè¿‡HTTPSåè®®ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯ç»è¿‡SSLåŠ å¯†çš„</span><br><span class="line">HTTPSçš„ä½œç”¨ï¼š</span><br><span class="line">    <span class="number">1</span>)å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨çš„é€šé“æ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨</span><br><span class="line">    <span class="number">2</span>)ç¡®è®¤ç½‘ç«™çš„çœŸå®æ€§ï¼Œå‡¡æ˜¯ä½¿ç”¨äº†HTTPSçš„ç½‘ç«™ï¼Œéƒ½å¯ä»¥é€šè¿‡ç‚¹å‡»æµè§ˆå™¨åœ°å€æ çš„é”å¤´æ ‡å¿—æ¥æŸ¥çœ‹ç½‘ç«™è®¤è¯ä¹‹åçš„çœŸå®ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡CAæœºæ„é¢å‘çš„å®‰å…¨ç­¾</span><br><span class="line">    	ç« æ¥æŸ¥è¯¢</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€3ã€3-HTTPå’ŒHTTPSçš„åŒºåˆ«"><a href="#4ã€3ã€3-HTTPå’ŒHTTPSçš„åŒºåˆ«" class="headerlink" title="4ã€3ã€3  HTTPå’ŒHTTPSçš„åŒºåˆ«"></a>4ã€3ã€3  HTTPå’ŒHTTPSçš„åŒºåˆ«</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">HTTPSåè®®éœ€è¦åˆ°CAç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› ä¸ºéœ€è¦ä¸€å®šçš„è´¹ç”¨</span><br><span class="line">HTTPæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒHTTPSåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„SSLåŠ å¯†ä¼ è¾“åè®®</span><br><span class="line">HTTPå’ŒHTTPSä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„é“¾æ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯<span class="number">80</span>ï¼Œåè€…æ˜¯<span class="number">443</span></span><br><span class="line">HTTPçš„é“¾æ¥æ–¹å¼å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ã€æ¯”HTTPåè®®å®‰å…¨</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€3ã€4-TCPåè®®"><a href="#4ã€3ã€4-TCPåè®®" class="headerlink" title="4ã€3ã€4  TCPåè®®"></a>4ã€3ã€4  TCPåè®®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">TCPåè®®æ˜¯ä¸€ç§é¢å‘é“¾æ¥çš„ï¼Œå¯é çš„ï¼ŒåŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®</span><br><span class="line">æœ‰å››å¤§ç‰¹æ€§ï¼š</span><br><span class="line">    <span class="number">1</span>)æœ‰åºæ€§ï¼šæ•°æ®åŒ…ç¼–å·ï¼Œåˆ¤æ–­æ•°æ®åŒ…çš„æ­£ç¡®æ¬¡åº</span><br><span class="line">    <span class="number">2</span>)æ­£ç¡®æ€§ï¼šä½¿ç”¨checksumå‡½æ•°æ£€æŸ¥æ•°æ®åŒ…æ˜¯å¦æŸåï¼Œå‘é€åŠæ¥æ”¶æ—¶éƒ½ä¼šè®¡ç®—æ ¡éªŒå’Œ</span><br><span class="line">    <span class="number">3</span>)å¯é æ€§ï¼šå‘é€ç«¯æœ‰è¶…æ—¶é‡å‘ï¼Œå¹¶ç”±ç¡®è®¤æœºåˆ¶è¯†åˆ«é”™è¯¯å’Œæ•°æ®çš„ä¸¢å¤±</span><br><span class="line">    <span class="number">4</span>)å¯æ§æ€§ï¼šæ»‘åŠ¨çª—å£åè®®ä¸æ‹¥å¡æ§åˆ¶ç®—æ³•æ§åˆ¶æ•°æ®åŒ…çš„å‘é€é€Ÿåº¦</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€3ã€5-UDPåè®®"><a href="#4ã€3ã€5-UDPåè®®" class="headerlink" title="4ã€3ã€5  UDPåè®®"></a>4ã€3ã€5  UDPåè®®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">UDPåè®®æ˜¯ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œé¢å‘æ— é“¾æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œä¼ è¾“æ—¶ä¸å¯é çš„</span><br><span class="line">    <span class="number">1</span>)æ— è¿æ¥ï¼Œæ•°æ®å¯èƒ½ä¼šä¸¢å¤±æˆ–æŸå</span><br><span class="line">    <span class="number">2</span>)æŠ¥æ–‡å°ï¼Œä¼ è¾“é€Ÿåº¦å—</span><br><span class="line">    <span class="number">3</span>)ååé‡å¤§çš„ç½‘ç»œä¼ è¾“ï¼Œå¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ‰¿å—æ•°æ®ä¸¢å¤±</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€3ã€6-ARPåè®®"><a href="#4ã€3ã€6-ARPåè®®" class="headerlink" title="4ã€3ã€6  ARPåè®®"></a>4ã€3ã€6  ARPåè®®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ARPåè®®æ˜¯é€šè¿‡IPè·å–ç›®æ ‡è®¡ç®—æœºMACåœ°å€çš„åè®®</span><br></pre></td></tr></table></figure></div>

<h2 id="5ã€æœåŠ¡å™¨å¸¸è§ç«¯å£"><a href="#5ã€æœåŠ¡å™¨å¸¸è§ç«¯å£" class="headerlink" title="5ã€æœåŠ¡å™¨å¸¸è§ç«¯å£"></a>5ã€æœåŠ¡å™¨å¸¸è§ç«¯å£</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">FTPï¼šå…¨ç§°ï¼šFile Transfer Protocolï¼ŒåŠæ–‡ä»¶ä¼ è¾“åè®®ã€ç«¯å£ï¼š<span class="number">21</span></span><br><span class="line">SSHï¼šå…¨ç§°ï¼šSecure Shellï¼Œç”¨äºè¿œç¨‹ç™»å½•ä¼šè¯ã€ç«¯å£ï¼š<span class="number">22</span></span><br><span class="line">MySQLï¼šå…³ç³»å‹æ•°æ®åº“ã€ç«¯å£<span class="number">3306</span></span><br><span class="line">MongoDBï¼šéå…³ç³»å‹æ•°æ®åº“ã€ç«¯å£ï¼š<span class="number">27017</span></span><br><span class="line">Redisï¼šéå…³ç³»å‹æ•°æ®åº“ã€ç«¯å£ï¼š<span class="number">6379</span></span><br></pre></td></tr></table></figure></div>

<h2 id="6ã€å¼€å‘å‡†å¤‡"><a href="#6ã€å¼€å‘å‡†å¤‡" class="headerlink" title="6ã€å¼€å‘å‡†å¤‡"></a>6ã€å¼€å‘å‡†å¤‡</h2><h2 id="6ã€1-webç«¯"><a href="#6ã€1-webç«¯" class="headerlink" title="6ã€1  webç«¯"></a>6ã€1  webç«¯</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">python <span class="number">3.6</span>ç‰ˆæœ¬</span><br><span class="line">Pycharm</span><br><span class="line">Google Chrome</span><br></pre></td></tr></table></figure></div>

<h2 id="6ã€2-APP"><a href="#6ã€2-APP" class="headerlink" title="6ã€2  APP"></a>6ã€2  APP</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">fiddleræŠ“åŒ…å·¥å…·</span><br><span class="line">CharlesæŠ“åŒ…å·¥å…·</span><br><span class="line">Appiumè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Spider</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡ä»¶çš„æ“ä½œ</title>
    <url>/blog/Spider/Spider_id_17.html</url>
    <content><![CDATA[<h2 id="1ã€jsonæ–‡ä»¶çš„æ“ä½œ"><a href="#1ã€jsonæ–‡ä»¶çš„æ“ä½œ" class="headerlink" title="1ã€jsonæ–‡ä»¶çš„æ“ä½œ"></a>1ã€jsonæ–‡ä»¶çš„æ“ä½œ</h2><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">las = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">101</span>):</span><br><span class="line">    las.append(&#123;<span class="string">"name"</span>:<span class="string">"è¿™æ˜¯ç¬¬%då‡ ä¸ªjsonå¯¹è±¡"</span>%i,<span class="string">"age"</span>:<span class="string">"ä»Šå¹´%då²äº†"</span> %i&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"json_file.json"</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(json.dumps(las,ensure_ascii=<span class="literal">False</span>,indent=<span class="number">2</span>))</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€1-jsonæ–‡ä»¶æ¡ˆä¾‹"><a href="#1ã€1-jsonæ–‡ä»¶æ¡ˆä¾‹" class="headerlink" title="1ã€1  jsonæ–‡ä»¶æ¡ˆä¾‹"></a>1ã€1  jsonæ–‡ä»¶æ¡ˆä¾‹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml.html <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.budejie.com/'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.get(url=url,headers=headers).text</span><br><span class="line">tree = etree.HTML(res)</span><br><span class="line">dic = &#123;&#125;</span><br><span class="line">las = []</span><br><span class="line">title = tree.xpath(<span class="string">'//a[@class="u-user-name"]/text()'</span>)</span><br><span class="line">time = tree.xpath(<span class="string">'//span[@class="u-time  f-ib f-fr"]/text()'</span>)</span><br><span class="line">praise = tree.xpath(<span class="string">'//li[@class="j-r-list-tool-l-up"]/span/text()'</span>)</span><br><span class="line">degrade = tree.xpath(<span class="string">'//li[@class="j-r-list-tool-l-down "]/span/text()'</span>)</span><br><span class="line">share_list = tree.xpath(<span class="string">'//div[@class="j-r-list-tool-ct-share-c"]/span/text()'</span>)</span><br><span class="line">comment = tree.xpath(<span class="string">'//span[@class="comment-counts"]/text()'</span>)</span><br><span class="line">shares = []</span><br><span class="line"><span class="keyword">for</span> share <span class="keyword">in</span> share_list:</span><br><span class="line">    share = share.replace(<span class="string">'\xa0'</span>,<span class="string">''</span>)[<span class="number">2</span>]</span><br><span class="line">    shares.append(share)</span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baisi.json'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            dic = &#123;<span class="string">'ç”¨æˆ·'</span>: title[i], <span class="string">'åˆ›å»ºæ—¶é—´'</span>: time[i], <span class="string">'ç‚¹èµ'</span>: praise[i], <span class="string">'è´¬ä½'</span>: degrade[i], <span class="string">'åˆ†äº«'</span>: shares[i],</span><br><span class="line">                   <span class="string">'è¯„è®º'</span>: comment[i]&#125;</span><br><span class="line">            las.append(dic)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            f.write(json.dumps(las,ensure_ascii=<span class="literal">False</span>,indent=<span class="number">2</span>))</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€csvæ–‡ä»¶çš„æ“ä½œ"><a href="#2ã€csvæ–‡ä»¶çš„æ“ä½œ" class="headerlink" title="2ã€csvæ–‡ä»¶çš„æ“ä½œ"></a>2ã€csvæ–‡ä»¶çš„æ“ä½œ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'csv_file.csv'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    writer = csv.writer(f,delimiter=<span class="string">','</span>)</span><br><span class="line">    writer.writerow([<span class="string">'title'</span>,<span class="string">'age'</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">101</span>):</span><br><span class="line">    title = <span class="string">'æ ‡é¢˜%d'</span> % i</span><br><span class="line">    age = <span class="string">'å¹´é¾„%d'</span> % i</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'csv_file.csv'</span>,<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        writer = csv.writer(f,delimiter=<span class="string">','</span>)</span><br><span class="line">        writer.writerow([title,age])</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€1-csvæ–‡ä»¶æ“ä½œçš„æ¡ˆä¾‹"><a href="#2ã€1-csvæ–‡ä»¶æ“ä½œçš„æ¡ˆä¾‹" class="headerlink" title="2ã€1  csvæ–‡ä»¶æ“ä½œçš„æ¡ˆä¾‹"></a>2ã€1  csvæ–‡ä»¶æ“ä½œçš„æ¡ˆä¾‹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml.html <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baisi.csv'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    writer = csv.writer(f, delimiter=<span class="string">','</span>)</span><br><span class="line">    writer.writerow([<span class="string">'ä½œè€…'</span>,<span class="string">'æ—¶é—´'</span>,<span class="string">'ç‚¹èµ'</span>,<span class="string">'æ‹‰é»‘'</span>,<span class="string">'åˆ†äº«'</span>,<span class="string">'è¯„è®º'</span>])</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.budejie.com/'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.get(url=url,headers=headers).text</span><br><span class="line">tree = etree.HTML(res)</span><br><span class="line">title_list = tree.xpath(<span class="string">'//div[@class="u-txt"]/a/text()'</span>)</span><br><span class="line">title = []</span><br><span class="line"><span class="keyword">for</span> tit <span class="keyword">in</span> title_list:</span><br><span class="line">    tit = tit.replace(<span class="string">' '</span>,<span class="string">''</span>)</span><br><span class="line">    title.append(tit)</span><br><span class="line">time = tree.xpath(<span class="string">'//div[@class="u-txt"]/span/text()'</span>)</span><br><span class="line">praise = tree.xpath(<span class="string">'//li[@class="j-r-list-tool-l-up"]/span/text()'</span>)</span><br><span class="line">degrade = tree.xpath(<span class="string">'//li[@class="j-r-list-tool-l-down "]/span/text()'</span>)</span><br><span class="line">share_list = tree.xpath(<span class="string">'//div[@class="j-r-list-tool-ct-share-c"]/span/text()'</span>)</span><br><span class="line">share = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> share_list:</span><br><span class="line">    i = i.split(<span class="string">'\xa0'</span>)[<span class="number">2</span>]</span><br><span class="line">    share.append(i)</span><br><span class="line"><span class="comment"># print(share)</span></span><br><span class="line">comment = tree.xpath(<span class="string">'//span[@class="comment-counts"]/text()'</span>)</span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'baisi.csv'</span>,<span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            writer = csv.writer(f,delimiter=<span class="string">','</span>)</span><br><span class="line">            writer.writerow([title[i],time[i],praise[i],degrade[i],share[i],comment[i]])</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ–‡ä»¶çš„æ“ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰“ç å¹³å°</title>
    <url>/blog/Spider/Spider_id_09.html</url>
    <content><![CDATA[<h2 id="1ã€æ‰“ç å¹³å°"><a href="#1ã€æ‰“ç å¹³å°" class="headerlink" title="1ã€æ‰“ç å¹³å°"></a>1ã€æ‰“ç å¹³å°</h2><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨æµç¨‹:</span></span><br><span class="line">	- æ³¨å†Œè´¦å·:</span><br><span class="line">        æ™®é€šè´¦æˆ·: å……é’±çš„</span><br><span class="line">        å¼€å‘è´¦æˆ·: è°ƒæ¥å£è¿›è¡Œæ‰“ç </span><br><span class="line">	- ç™»é™†æ™®é€šç”¨æˆ·: æŸ¥è¯¢å‰©ä½™ç§¯åˆ†, åœ¨çº¿å……å€¼</span><br><span class="line">	- å¼€å‘è€…ç™»é™†:</span><br><span class="line">        æˆ‘çš„è½¯ä»¶--&gt;åˆ›å»ºæ–°è½¯ä»¶: åå­—éšä¾¿, ç§˜é’¥ä¸è¦æ”¹---&gt;è½¯ä»¶ä»£ç  + é€šè®¯ç§˜é’¥</span><br><span class="line">		å¼€å‘æ–‡æ¡£:PythonHTTPæ“ä½œç¤ºä¾‹</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€äº‘æ‰“ç å¹³å°æ¥å£ä½¿ç”¨"><a href="#2ã€äº‘æ‰“ç å¹³å°æ¥å£ä½¿ç”¨" class="headerlink" title="2ã€äº‘æ‰“ç å¹³å°æ¥å£ä½¿ç”¨"></a>2ã€äº‘æ‰“ç å¹³å°æ¥å£ä½¿ç”¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è·å–éªŒè¯ç :</span></span><br><span class="line"><span class="keyword">import</span> http.client, mimetypes, urllib, json, time, requests</span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YDMHttp</span>:</span></span><br><span class="line"></span><br><span class="line">    apiurl = <span class="string">'http://api.yundama.com/api.php'</span></span><br><span class="line">    username = <span class="string">''</span></span><br><span class="line">    password = <span class="string">''</span></span><br><span class="line">    appid = <span class="string">''</span></span><br><span class="line">    appkey = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, username, password, appid, appkey)</span>:</span></span><br><span class="line">        self.username = username  </span><br><span class="line">        self.password = password</span><br><span class="line">        self.appid = str(appid)</span><br><span class="line">        self.appkey = appkey</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">request</span><span class="params">(self, fields, files=[])</span>:</span></span><br><span class="line">        response = self.post_url(self.apiurl, fields, files)</span><br><span class="line">        response = json.loads(response)</span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">balance</span><span class="params">(self)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'balance'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">if</span> (response[<span class="string">'ret'</span>] <span class="keyword">and</span> response[<span class="string">'ret'</span>] &lt; <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'balance'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'login'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">if</span> (response[<span class="string">'ret'</span>] <span class="keyword">and</span> response[<span class="string">'ret'</span>] &lt; <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'uid'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">upload</span><span class="params">(self, filename, codetype, timeout)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'upload'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey, <span class="string">'codetype'</span>: str(codetype), <span class="string">'timeout'</span>: str(timeout)&#125;</span><br><span class="line">        file = &#123;<span class="string">'file'</span>: filename&#125;</span><br><span class="line">        response = self.request(data, file)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">if</span> (response[<span class="string">'ret'</span>] <span class="keyword">and</span> response[<span class="string">'ret'</span>] &lt; <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'cid'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">result</span><span class="params">(self, cid)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'result'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey, <span class="string">'cid'</span>: str(cid)&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">return</span> response <span class="keyword">and</span> response[<span class="string">'text'</span>] <span class="keyword">or</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decode</span><span class="params">(self, filename, codetype, timeout)</span>:</span></span><br><span class="line">        cid = self.upload(filename, codetype, timeout)</span><br><span class="line">        <span class="keyword">if</span> (cid &gt; <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, timeout):</span><br><span class="line">                result = self.result(cid)</span><br><span class="line">                <span class="keyword">if</span> (result != <span class="string">''</span>):</span><br><span class="line">                    <span class="keyword">return</span> cid, result</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    time.sleep(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-3003</span>, <span class="string">''</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> cid, <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">report</span><span class="params">(self, cid)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'report'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey, <span class="string">'cid'</span>: str(cid), <span class="string">'flag'</span>: <span class="string">'0'</span>&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post_url</span><span class="params">(self, url, fields, files=[])</span>:</span></span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> files:</span><br><span class="line">            files[key] = open(files[key], <span class="string">'rb'</span>);</span><br><span class="line">        res = requests.post(url, files=files, data=fields)</span><br><span class="line">        <span class="keyword">return</span> res.text</span><br><span class="line"></span><br><span class="line"><span class="comment">#################åªæœ‰ä¸€ä¸‹éƒ¨åˆ†éœ€è¦ä½œå‡ºä¿®æ”¹, ä¸Šé¢çš„ç±»ä¸éœ€è¦è¯¥#########################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æˆ·å</span></span><br><span class="line">username    = <span class="string">'jeremy0820'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯†ç </span></span><br><span class="line">password    = <span class="string">'0820_ab'</span>                            </span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¯ä»¶ï¼©ï¼¤ï¼Œå¼€å‘è€…åˆ†æˆå¿…è¦å‚æ•°ã€‚ç™»å½•å¼€å‘è€…åå°ã€æˆ‘çš„è½¯ä»¶ã€‘è·å¾—ï¼</span></span><br><span class="line">appid       = <span class="number">7608</span>                                    </span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¯ä»¶å¯†é’¥ï¼Œå¼€å‘è€…åˆ†æˆå¿…è¦å‚æ•°ã€‚ç™»å½•å¼€å‘è€…åå°ã€æˆ‘çš„è½¯ä»¶ã€‘è·å¾—ï¼</span></span><br><span class="line">appkey      = <span class="string">'106f27ed6a4ef2c97652c68a76a505f9'</span>    </span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">filename    = <span class="string">'./code.jpg'</span>                        </span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯ç ç±»å‹ï¼Œ# ä¾‹ï¼š1004è¡¨ç¤º4ä½å­—æ¯æ•°å­—ï¼Œä¸åŒç±»å‹æ”¶è´¹ä¸åŒã€‚è¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™å½±å“è¯†åˆ«ç‡ã€‚åœ¨æ­¤æŸ¥è¯¢æ‰€æœ‰ç±»å‹ http://www.yundama.com/price.html</span></span><br><span class="line">codetype    = <span class="number">1004</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¶…æ—¶æ—¶é—´ï¼Œç§’</span></span><br><span class="line">timeout     = <span class="number">60</span>                                    </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line"><span class="keyword">if</span> (username == <span class="string">'username'</span>):</span><br><span class="line">    print(<span class="string">'è¯·è®¾ç½®å¥½ç›¸å…³å‚æ•°å†æµ‹è¯•'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line">    yundama = YDMHttp(username, password, appid, appkey)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç™»é™†äº‘æ‰“ç </span></span><br><span class="line">    uid = yundama.login();</span><br><span class="line">    print(<span class="string">'uid: %s'</span> % uid)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢ä½™é¢</span></span><br><span class="line">    balance = yundama.balance();</span><br><span class="line">    print(<span class="string">'balance: %s'</span> % balance)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¼€å§‹è¯†åˆ«ï¼Œå›¾ç‰‡è·¯å¾„ï¼ŒéªŒè¯ç ç±»å‹IDï¼Œè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¯†åˆ«ç»“æœ</span></span><br><span class="line">    cid, result = yundama.decode(filename, codetype, timeout);</span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################</span></span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€åŠ¨æ€ä¼ å‚ä¸æ¨¡æ‹Ÿç™»é™†"><a href="#3ã€åŠ¨æ€ä¼ å‚ä¸æ¨¡æ‹Ÿç™»é™†" class="headerlink" title="3ã€åŠ¨æ€ä¼ å‚ä¸æ¨¡æ‹Ÿç™»é™†"></a>3ã€åŠ¨æ€ä¼ å‚ä¸æ¨¡æ‹Ÿç™»é™†</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¤è¯—æ–‡ç½‘æ¨¡æ‹Ÿç™»é™†</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–éšè—å‚æ•°</span></span><br><span class="line">session =  requests.Session()</span><br><span class="line">url = <span class="string">"https://so.gushiwen.org/user/login.aspx"</span></span><br><span class="line"></span><br><span class="line">headers = &#123;<span class="string">"headers"</span>:<span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.119 Safari/537.36"</span>&#125;</span><br><span class="line">response = session.get(url=url, headers=headers).text</span><br><span class="line">etree_obj = etree.HTML(response)</span><br><span class="line">__VIEWSTATE = etree_obj.xpath(<span class="string">"//input[@id='__VIEWSTATE']/@value"</span>)</span><br><span class="line">__VIEWSTATEGENERATOR = etree_obj.xpath(<span class="string">"//input[@id='__VIEWSTATEGENERATOR']/@value"</span>)</span><br><span class="line">print(__VIEWSTATE)</span><br><span class="line">print(__VIEWSTATEGENERATOR)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–éªŒè¯ç å›¾ç‰‡:</span></span><br><span class="line">url_image = <span class="string">'https://so.gushiwen.org/RandCode.ashx'</span></span><br><span class="line">content = session.get(url=url_image, headers=headers).content</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">"./code.jpg"</span>, <span class="string">"wb"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–éªŒè¯ç :</span></span><br><span class="line"><span class="keyword">import</span> http.client, mimetypes, urllib, json, time, requests</span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YDMHttp</span>:</span></span><br><span class="line"></span><br><span class="line">    apiurl = <span class="string">'http://api.yundama.com/api.php'</span></span><br><span class="line">    username = <span class="string">''</span></span><br><span class="line">    password = <span class="string">''</span></span><br><span class="line">    appid = <span class="string">''</span></span><br><span class="line">    appkey = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, username, password, appid, appkey)</span>:</span></span><br><span class="line">        self.username = username  </span><br><span class="line">        self.password = password</span><br><span class="line">        self.appid = str(appid)</span><br><span class="line">        self.appkey = appkey</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">request</span><span class="params">(self, fields, files=[])</span>:</span></span><br><span class="line">        response = self.post_url(self.apiurl, fields, files)</span><br><span class="line">        response = json.loads(response)</span><br><span class="line">        <span class="keyword">return</span> response</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">balance</span><span class="params">(self)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'balance'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">if</span> (response[<span class="string">'ret'</span>] <span class="keyword">and</span> response[<span class="string">'ret'</span>] &lt; <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'balance'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'login'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">if</span> (response[<span class="string">'ret'</span>] <span class="keyword">and</span> response[<span class="string">'ret'</span>] &lt; <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'uid'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">upload</span><span class="params">(self, filename, codetype, timeout)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'upload'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey, <span class="string">'codetype'</span>: str(codetype), <span class="string">'timeout'</span>: str(timeout)&#125;</span><br><span class="line">        file = &#123;<span class="string">'file'</span>: filename&#125;</span><br><span class="line">        response = self.request(data, file)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">if</span> (response[<span class="string">'ret'</span>] <span class="keyword">and</span> response[<span class="string">'ret'</span>] &lt; <span class="number">0</span>):</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> response[<span class="string">'cid'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">result</span><span class="params">(self, cid)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'result'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey, <span class="string">'cid'</span>: str(cid)&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">return</span> response <span class="keyword">and</span> response[<span class="string">'text'</span>] <span class="keyword">or</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decode</span><span class="params">(self, filename, codetype, timeout)</span>:</span></span><br><span class="line">        cid = self.upload(filename, codetype, timeout)</span><br><span class="line">        <span class="keyword">if</span> (cid &gt; <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, timeout):</span><br><span class="line">                result = self.result(cid)</span><br><span class="line">                <span class="keyword">if</span> (result != <span class="string">''</span>):</span><br><span class="line">                    <span class="keyword">return</span> cid, result</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    time.sleep(<span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-3003</span>, <span class="string">''</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> cid, <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">report</span><span class="params">(self, cid)</span>:</span></span><br><span class="line">        data = &#123;<span class="string">'method'</span>: <span class="string">'report'</span>, <span class="string">'username'</span>: self.username, <span class="string">'password'</span>: self.password, <span class="string">'appid'</span>: self.appid, <span class="string">'appkey'</span>: self.appkey, <span class="string">'cid'</span>: str(cid), <span class="string">'flag'</span>: <span class="string">'0'</span>&#125;</span><br><span class="line">        response = self.request(data)</span><br><span class="line">        <span class="keyword">if</span> (response):</span><br><span class="line">            <span class="keyword">return</span> response[<span class="string">'ret'</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-9001</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post_url</span><span class="params">(self, url, fields, files=[])</span>:</span></span><br><span class="line">        <span class="keyword">for</span> key <span class="keyword">in</span> files:</span><br><span class="line">            files[key] = open(files[key], <span class="string">'rb'</span>);</span><br><span class="line">        res = requests.post(url, files=files, data=fields)</span><br><span class="line">        <span class="keyword">return</span> res.text</span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æˆ·å</span></span><br><span class="line">username    = <span class="string">'jeremy0820'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯†ç </span></span><br><span class="line">password    = <span class="string">'0820_ab'</span>                            </span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¯ä»¶ï¼©ï¼¤ï¼Œå¼€å‘è€…åˆ†æˆå¿…è¦å‚æ•°ã€‚ç™»å½•å¼€å‘è€…åå°ã€æˆ‘çš„è½¯ä»¶ã€‘è·å¾—ï¼</span></span><br><span class="line">appid       = <span class="number">7608</span>                                    </span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¯ä»¶å¯†é’¥ï¼Œå¼€å‘è€…åˆ†æˆå¿…è¦å‚æ•°ã€‚ç™»å½•å¼€å‘è€…åå°ã€æˆ‘çš„è½¯ä»¶ã€‘è·å¾—ï¼</span></span><br><span class="line">appkey      = <span class="string">'106f27ed6a4ef2c97652c68a76a505f9'</span>    </span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">filename    = <span class="string">'./code.jpg'</span>                        </span><br><span class="line"></span><br><span class="line"><span class="comment"># éªŒè¯ç ç±»å‹ï¼Œ# ä¾‹ï¼š1004è¡¨ç¤º4ä½å­—æ¯æ•°å­—ï¼Œä¸åŒç±»å‹æ”¶è´¹ä¸åŒã€‚è¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™å½±å“è¯†åˆ«ç‡ã€‚åœ¨æ­¤æŸ¥è¯¢æ‰€æœ‰ç±»å‹ http://www.yundama.com/price.html</span></span><br><span class="line">codetype    = <span class="number">1004</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¶…æ—¶æ—¶é—´ï¼Œç§’</span></span><br><span class="line">timeout     = <span class="number">60</span>                                    </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line"><span class="keyword">if</span> (username == <span class="string">'username'</span>):</span><br><span class="line">    print(<span class="string">'è¯·è®¾ç½®å¥½ç›¸å…³å‚æ•°å†æµ‹è¯•'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–</span></span><br><span class="line">    yundama = YDMHttp(username, password, appid, appkey)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç™»é™†äº‘æ‰“ç </span></span><br><span class="line">    uid = yundama.login();</span><br><span class="line">    print(<span class="string">'uid: %s'</span> % uid)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æŸ¥è¯¢ä½™é¢</span></span><br><span class="line">    balance = yundama.balance();</span><br><span class="line">    print(<span class="string">'balance: %s'</span> % balance)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¼€å§‹è¯†åˆ«ï¼Œå›¾ç‰‡è·¯å¾„ï¼ŒéªŒè¯ç ç±»å‹IDï¼Œè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œè¯†åˆ«ç»“æœ</span></span><br><span class="line">    cid, result = yundama.decode(filename, codetype, timeout);</span><br><span class="line"></span><br><span class="line"><span class="comment">######################################################################</span></span><br><span class="line">print(<span class="string">"éªŒè¯ç è¯†åˆ«ç»“æœ:"</span>, result)</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">"__VIEWSTATE"</span>: __VIEWSTATE,</span><br><span class="line">    <span class="string">"__VIEWSTATEGENERATOR"</span>: __VIEWSTATEGENERATOR,</span><br><span class="line">    <span class="string">"from"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"email"</span>: <span class="string">"yujeremy0820@gmail.com"</span>,</span><br><span class="line">    <span class="string">"pwd"</span>: <span class="string">"0820@ab"</span>,</span><br><span class="line">    <span class="string">"code"</span>: result,</span><br><span class="line">    <span class="string">"denglu"</span>: <span class="string">"ç™»å½•"</span>,</span><br><span class="line">&#125;</span><br><span class="line">login =session.post(url=url, headers=headers, data=data)</span><br><span class="line">index_url = <span class="string">'https://so.gushiwen.org/user/collect.aspx'</span></span><br><span class="line">index_content = session.get(url=index_url, headers=headers).text</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'./shi.html'</span>, <span class="string">"w"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(<span class="string">"å¼€å§‹å†™æ–‡ä»¶"</span>)</span><br><span class="line">    f.write(index_content)</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ‰“ç å¹³å°</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šçº¿ç¨‹çˆ¬è™«</title>
    <url>/blog/Spider/Spider_id_12.html</url>
    <content><![CDATA[<h2 id="1ã€æ•´ä½“æ€è·¯"><a href="#1ã€æ•´ä½“æ€è·¯" class="headerlink" title="1ã€æ•´ä½“æ€è·¯"></a>1ã€æ•´ä½“æ€è·¯</h2><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&gt; é˜Ÿåˆ—ä¿å­˜å˜åŒ–çš„å‚æ•°ï¼Œå³ä¹‹å‰æ„å»ºçš„ç±»ä¼¼é¡µç çš„ä¸œè¥¿ã€‚</span><br><span class="line"></span><br><span class="line">&gt; ä¸€ä¸ªç±»å®ç°ï¼šä¸‰ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®é‡‡é›†ï¼Œä¾æ¬¡ä»é˜Ÿåˆ—ä¸­è·å–å‚æ•°ï¼Œæ‹¼æ¥urlï¼Œè¯·æ±‚åˆ°çš„ç½‘	é¡µæºç ä¿å­˜åˆ°æ–°é˜Ÿåˆ—ã€‚</span><br><span class="line"></span><br><span class="line">&gt; ä¸€ä¸ªç±»å®ç° ï¼š<span class="number">1.</span>  ä¸‰ä¸ªçº¿ç¨‹è¿›è¡Œæ•°æ®å¤„ç†ï¼Œä¾æ¬¡ä»é˜Ÿåˆ—ä¸­è·å–æºç ï¼Œxpathå®šä½å…ƒç´ 	å–å‡ºæ–‡æœ¬ï¼Œæ„å»ºå­—å…¸ã€‚<span class="number">2.</span> å®šä¹‰å‡½æ•°æ•°æ®å…¥åº“ï¼Œpymongonæ•°æ®æ’å…¥æ•°æ®å³å¯</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ä¸»ç¨‹åº mian åˆ†ä¸º ä¸¤ éƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">- å®ä¾‹åŒ–é˜Ÿåˆ—ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç»„çº¿ç¨‹åœ¨å·¥ä½œï¼Œåˆå§‹é˜Ÿåˆ—ä¸€ä¸ªï¼Œçº¿ç¨‹é—´é€šä¿¡éœ€è¦ä¸€ä¸ªï¼Œä¸€å…±ä¸¤ä¸ª</span><br><span class="line"></span><br><span class="line">- å®ä¾‹åŒ–çº¿ç¨‹ï¼Œé€šè¿‡éå†å®ä¾‹åŒ–çº¿ç¨‹ç±»ï¼Œåˆ›å»ºä¿©ç»„ä¸‰çº¿ç¨‹ã€‚</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">è°ƒç”¨ä¸»ç¨‹åº</span><br></pre></td></tr></table></figure></div>



<ol start="2">
<li><p>å…·ä½“éƒ¨ç½²ï¼Œå’Œç›¸å…³çŸ¥è¯†ç‚¹ç½—åˆ—</p>
<p>ç»†èŠ‚å†³å®šæˆè´¥ï¼Œå¿…é¡»ææ¸…æ¥šæ¯ä¸€æ­¥çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œè€Œä¸æ˜¯è¯´è¿™é‡Œå°±åº”è¯¥è¿™ä¹ˆå†™ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šç†æ‰€åº”å½“ã€‚</p>
<p>#####å…·ä½“éƒ¨ç½²ï¼š </p>
<ul>
<li><p>å®šä¹‰ç¬¬ä¸€ä¸ªç±»ï¼š</p>
<ul>
<li><p>å®šä¹‰ç±»ï¼šéœ€è¦ç»§æ‰¿threading.Threadçˆ¶ç±»</p>
</li>
<li><p>ç±»å±æ€§ï¼šæƒ³æ¸…æ¥šä¼ é‚£äº›ç†Ÿæ‚‰</p>
<ol>
<li><p>å‚æ•°é˜Ÿåˆ—è¦ä¼ è¿›æ¥</p>
</li>
<li><p>å­ç±»é‡å†™åˆå§‹åŒ–å±æ€§</p>
<p>å…ˆç»§æ‰¿çˆ¶ç±»å±æ€§â€”-&gt;ç„¶åå†™è‡ªå·±è¦åŠ çš„å±æ€§</p>
</li>
</ol>
</li>
<li><p>å®šä¹‰æ–¹æ³•ï¼š</p>
<p>é‡å†™runæ–¹æ³•</p>
<p>â€‹    é€šè¿‡æ— é™å¾ªç¯è·å–é˜Ÿåˆ—ä¸­çš„å‚æ•°ï¼Œå®ç°è¯·æ±‚å¤šé¡µé¢ï¼Œ</p>
<p>â€‹    è¿™ä¸ªé˜Ÿåˆ—æ˜¯è¢«ä¸‰ä¸ªçº¿ç¨‹å»è®¿é—®çš„ã€‚</p>
</li>
</ul>
</li>
<li><p>å®šä¹‰ç¬¬äºŒä¸ªç±»ï¼š</p>
<p>â€‹    éœ€è¦è€ƒè™‘çš„å’Œç¬¬ä¸€ä¸ªç±»æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªäº’æ–¥é”çš„åŠ å…¥</p>
<p>â€‹    å°±æ˜¯åœ¨å¤„ç†æ•°æ®çš„æ—¶å€™åŠ å…¥ï¼Œå› ä¸ºå†™å…¥æ•°æ®åº“çš„å­—æ®µéƒ½ä¸€æ ·ï¼Œé¿å…æ•°æ®é‡è¿‡å¤§</p>
<p>â€‹    å‡ºé”™ï¼Œå¯¼è‡´æ•°æ®é”™ä¹±ã€‚</p>
</li>
<li><p>ä¸»ç¨‹åºä»£ç </p>
<ul>
<li><p>å®ä¾‹é˜Ÿåˆ—å¯¹è±¡</p>
<p>page_Queue = Queue() æ„å»ºå‚æ•°</p>
<p>data_Queue = Queue() è´Ÿè´£ä¸¤ä¸ªä¸»çº¿ç¨‹é—´çš„é€šä¿¡</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<pre><code>+ å®ä¾‹äº’æ–¥é”å¯¹è±¡

  lock = Lock()



+ æ„å»ºä¸¤ä¸ªä¸»çº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹è´Ÿè´£é‡‡é›†æ•°æ®ï¼Œä¸€ä¸ªçº¿ç¨‹å¤„ç†æ•°æ®å¹¶å…¥åº“

+ å½“ç„¶éƒ½æ˜¯ç”¨forå¾ªç¯æ¥æ„å»ºçš„ï¼Œè®°å¾—çº¿ç¨‹ç±»éœ€è¦ä¼ å…¥é‚£äº›å±æ€§</code></pre><ul>
<li><p>è°ƒç”¨ä¸»ç¨‹åº</p>
<p>#####ç›¸å…³çŸ¥è¯†ç‚¹ï¼š </p>
</li>
<li><p>é‡å†™çˆ¶ç±»åŒåæ–¹æ³•éœ€è¦æ³¨æ„:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParseTread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, threadName, dataQueue, lock)</span>:</span></span><br><span class="line">        <span class="comment"># å…ˆæŠŠçˆ¶ç±»çš„æ–¹æ³•ç»§æ‰¿ä¸‹æ¥</span></span><br><span class="line">        super(ParseTread, self).__init__()</span><br><span class="line">        <span class="comment"># ç„¶åå®šä¹‰è‡ªå·±çš„æ–¹æ³•</span></span><br><span class="line">        self.threadName = threadName</span><br><span class="line">        self.dataQueue = dataQueue</span><br><span class="line">        self.lock = lock</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>é¦–å…ˆæ˜ç™½ä»€ä¹ˆæ˜¯è¿›ç¨‹ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œçº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ</p>
<p>çº¿ç¨‹ï¼ˆæœ‰æ—¶å€™ç§°ä¸ºè½»é‡çº§è¿›ç¨‹ï¼‰ä¸è¿›ç¨‹ç±»ä¼¼ï¼Œä¸è¿‡å®ƒä»¬æ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸‹æ‰§è¡Œçš„ï¼Œå¹¶å…±äº«ç›¸åŒçš„ä¸Šä¸‹æ–‡ã€‚å¯ä»¥å°†å®ƒä»¬è®¤ä¸ºæ˜¯åœ¨ä¸€ä¸ªä¸»è¿›ç¨‹æˆ–â€œä¸»çº¿ç¨‹â€ä¸­å¹¶è¡Œè¿è¡Œçš„ä¸€äº›â€œè¿·ä½ è¿›ç¨‹â€ã€‚ </p>
<p>è¿™é‡Œè®²çš„å¾ˆæ¸…æ¥š<a href="https://www.cnblogs.com/chbo/p/7043660.html" target="_blank" rel="noopener">https://www.cnblogs.com/chbo/p/7043660.html</a> </p>
</li>
<li><p>æˆ‘ä»¬çš„å­çº¿ç¨‹ä¸ºä»€ä¹ˆè¦è®¾ç½®join()ï¼Œå…¶å®è®¾ç½®äº†å®ˆæŠ¤çº¿ç¨‹æ‰æ˜¯join()å‡ºç°çš„æ—¶æœº</p>
<p>å¦‚æœæ˜¯ä¸ºäº†é¿å…æ•°æ®çš„æ¶æ€§ç«äº‰çš„è¯ï¼Œäº’æ–¥é”æ˜¯æ¥è¿™ä¸ªçš„å°èƒ½æ‰‹ã€‚</p>
</li>
<li><p>ä¸ºä»€ä¹ˆè¦è®¾ç½®å®ˆæŠ¤çº¿ç¨‹</p>
<p>å¦‚æœç»™çº¿ç¨‹è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Œé‚£ä¹ˆåå°çº¿ç¨‹æ‰§è¡Œå®Œæ¯•å°±ä¼šæ€æ­»è¿™äº›çº¿ç¨‹ã€‚å¤§è‡´çš„ä½œç”¨å°±æ˜¯å½“ä½ é€€å‡ºè¿›ç¨‹ï¼Œåå°çº¿ç¨‹å…³é—­é‚£ä¹ˆè¿™äº›å­çº¿ç¨‹ä¹Ÿè¦åŒæ—¶å…³é—­ã€‚</p>
</li>
<li><p>join()çš„ä½œç”¨ï¼Œå’Œå…¶å­˜åœ¨çš„æ„ä¹‰</p>
<p>join()çš„åŠŸèƒ½æ˜¯è®¾ç½®é˜»å¡ï¼Œä¹‹æ‰€ä»¥è¦è®¾ç½®join()å°±æ˜¯æœ‰é€‰æ‹©çš„è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰çš„çº¿ç¨‹éœ€è¦åŒæ­¥ä¸»çº¿ç¨‹ç»“æŸè€Œç»“æŸï¼Œè€Œæœ‰çš„çº¿ç¨‹éœ€è¦æ‰§è¡Œå®Œæ¯•èœè¡Œã€‚è®¾ç½®äº†å®ˆæŠ¤çº¿ç¨‹çš„å­çº¿ç¨‹éƒ½ä¼šéšç€ä¸»çº¿çš„ç»“æŸè€Œç»“æŸã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œè®¾ç½®çš„join()æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå¹¶æ²¡æœ‰è®¾ç½®å®ˆæŠ¤çº¿ç¨‹ï¼Œå› æ­¤æ²¡å¿…è¦è®¾ç½®é˜»å¡ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">from</span> chaojiying <span class="keyword">import</span> Chaojiying_Client</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> re, threading</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Lock</span><br><span class="line"><span class="keyword">from</span> queue <span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CrawlThread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, threadName, page_Queue, data_Queue)</span>:</span></span><br><span class="line">        super(CrawlThread, self).__init__()</span><br><span class="line">        self.threadName = threadName</span><br><span class="line">        self.pageQueue = page_Queue</span><br><span class="line">        self.dataQueue = data_Queue</span><br><span class="line">        self.headers = &#123;<span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.169 Safari/537.36"</span>,&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        url1 = <span class="string">'http://www.ziroom.com/z/nl/z3.html?p=%s'</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># å¦‚æœé˜Ÿåˆ—ä¸ºç©º block ä¸º True é‚£ä¹ˆè¿›å…¥é˜»å¡çŠ¶æ€</span></span><br><span class="line">                <span class="comment"># å¦‚æœé˜Ÿåˆ—ä¸ºæ§ block ä¸º false é‚£ä¹ˆä¼šæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">                p = self.pageQueue.get(block=<span class="literal">False</span>)</span><br><span class="line">                print(<span class="string">'%så¼€å§‹å·¥ä½œ...'</span> % self.threadName)</span><br><span class="line">                response = requests.get(url=url1 % p, headers=self.headers)</span><br><span class="line">                content = response.text</span><br><span class="line">                self.dataQueue.put(content)</span><br><span class="line">                <span class="comment"># print(self.dataQueue.qsize())</span></span><br><span class="line">                print(<span class="string">'%så·¥ä½œç»“æŸ...'</span> % self.threadName)</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParseTread</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, threadName, dataQueue, lock)</span>:</span></span><br><span class="line">        super(ParseTread, self).__init__()</span><br><span class="line">        self.threadName = threadName</span><br><span class="line">        self.dataQueue = dataQueue</span><br><span class="line">        self.lock = lock</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                html = self.dataQueue.get(block=<span class="literal">False</span>)</span><br><span class="line">                print(<span class="string">'%så¼€å§‹å¤„ç†æ•°æ®........'</span> % self.threadName)</span><br><span class="line">                self.get_price_list(html)</span><br><span class="line">                print(<span class="string">'%sæ•°æ®å¤„ç†å®Œæ¯•........'</span> % self.threadName)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                print(e)</span><br><span class="line">                <span class="comment"># print('å‡ºé”™äº†')</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_price_list</span><span class="params">(self, html)</span>:</span></span><br><span class="line">        <span class="comment"># æ­£åˆ™åŒ¹é…å›¾ç‰‡åœ°å€ï¼Œè¶…çº§é¹°æ‰“ç ï¼Œè·å–åˆ—è¡¨ä¸¤ä¸ªå‚æ•° code ä¸‹æ ‡åˆ—è¡¨</span></span><br><span class="line">        price_image = re.findall(<span class="string">r'"image":"(.*?)"'</span>, html)[<span class="number">0</span>]</span><br><span class="line">        index_list = re.findall(<span class="string">r'"offset":(.*?)&#125;;'</span>, html)[<span class="number">0</span>]</span><br><span class="line">        index_list = eval(index_list)</span><br><span class="line">        <span class="comment"># print(index_list)</span></span><br><span class="line">        price_image_link = <span class="string">'http:'</span> + price_image</span><br><span class="line">        <span class="comment"># print(price_image_link)</span></span><br><span class="line">        request.urlretrieve(price_image_link, <span class="string">'./im.jpg'</span>)</span><br><span class="line">        <span class="comment"># è¶…çº§é¹°æ‰“ç ï¼Œè·å–åˆ°å›¾ç‰‡ä¸­çš„æ•°å­—</span></span><br><span class="line">        chaojiying = Chaojiying_Client(<span class="string">'ipython'</span>, <span class="string">'123456789'</span>, <span class="string">'96001'</span>)</span><br><span class="line">        im = open(<span class="string">'im.jpg'</span>, <span class="string">'rb'</span>).read()</span><br><span class="line">        code = chaojiying.PostPic(im, <span class="number">4111</span>)[<span class="string">'pic_str'</span>]</span><br><span class="line">        price_list = []</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> index_list:</span><br><span class="line">            <span class="comment"># print(j)</span></span><br><span class="line">            str1 = <span class="string">''</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> j:</span><br><span class="line">                str1 += code[int(i)]</span><br><span class="line">            <span class="comment"># print(code)</span></span><br><span class="line">            <span class="comment"># print(str1)</span></span><br><span class="line">            price_list.append(int(str1))</span><br><span class="line">        self.get_detail_list(html, price_list)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_detail_list</span><span class="params">(self, html, price_list)</span>:</span></span><br><span class="line">        html = etree.HTML(html)</span><br><span class="line">        data_list = html.xpath(<span class="string">'//ul[@id="houseList"]/li'</span>)</span><br><span class="line">        a = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> data_list:</span><br><span class="line">            item = &#123;&#125;</span><br><span class="line">            title = i.xpath(<span class="string">'.//h3/a[@class="t1"]/text()'</span>)[<span class="number">0</span>]</span><br><span class="line">            size_detail = i.xpath(<span class="string">'.//div[@class="detail"]/p'</span>)[<span class="number">0</span>].xpath(<span class="string">'.//span/text()'</span>)</span><br><span class="line">            position = i.xpath(<span class="string">'.//div[@class="detail"]/p'</span>)[<span class="number">1</span>].xpath(<span class="string">'.//span/text()'</span>)[<span class="number">0</span>]</span><br><span class="line">            item = &#123;<span class="string">'æ ‡é¢˜'</span>: title, <span class="string">'é¢ç§¯'</span>: size_detail, <span class="string">'ä½ç½®'</span>: position, <span class="string">'ä»·æ ¼'</span>: price_list[a]&#125;</span><br><span class="line">            a += <span class="number">1</span></span><br><span class="line">            <span class="keyword">with</span> self.lock:</span><br><span class="line">                self.save(item)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        conn = pymongo.MongoClient(<span class="string">"localhost"</span>,<span class="number">27017</span>)</span><br><span class="line">        db = conn.qiubai</span><br><span class="line">        table = db.qiubai</span><br><span class="line">        table.insert(item)</span><br><span class="line">       </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(n)</span>:</span></span><br><span class="line">    page_Queue = Queue()</span><br><span class="line">    data_Queue = Queue()</span><br><span class="line">    lock = Lock()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        page_Queue.put(i)</span><br><span class="line"></span><br><span class="line">    crawlList = &#123;<span class="string">'é•¿å¾1å·'</span>, <span class="string">'é•¿å¾2å·'</span>, <span class="string">'é•¿å¾3å·'</span>&#125;</span><br><span class="line">    TreadCrawl = []</span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> crawlList:</span><br><span class="line">        c = CrawlThread(var, page_Queue, data_Queue)</span><br><span class="line">        c.start()</span><br><span class="line">        TreadCrawl.append(c)</span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> TreadCrawl:</span><br><span class="line">        var.join()</span><br><span class="line">    parseList = [<span class="string">'å«¦å¨¥1å·'</span>, <span class="string">'å«¦å¨¥2å·'</span>, <span class="string">'å«¦å¨¥3å·'</span>]</span><br><span class="line">    TreadParse = []</span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> parseList:</span><br><span class="line">        p = ParseTread(var, data_Queue, lock)</span><br><span class="line">        p.start()</span><br><span class="line">        TreadParse.append(p)</span><br><span class="line">    <span class="keyword">for</span> var <span class="keyword">in</span> TreadParse:</span><br><span class="line">        var.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main(<span class="number">10</span>)</span><br></pre></td></tr></table></figure></div>



</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>å¤šçº¿ç¨‹çˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title>xpathä½¿ç”¨</title>
    <url>/blog/Spider/Spider_id_07.html</url>
    <content><![CDATA[<h2 id="1ã€xpathè§£æåº“"><a href="#1ã€xpathè§£æåº“" class="headerlink" title="1ã€xpathè§£æåº“"></a>1ã€xpathè§£æåº“</h2><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Xpathè§£æåº“ä»‹ç»:</span></span><br><span class="line">	æ•°æ®è§£æçš„è¿‡ç¨‹ä¸­ä½¿ç”¨è¿‡æ­£åˆ™è¡¨è¾¾å¼, ä½†æ­£åˆ™è¡¨è¾¾å¼æƒ³è¦è¿›å‡†åŒ¹é…éš¾åº¦è¾ƒé«˜, ä¸€æ—¦æ­£åˆ™è¡¨è¾¾å¼ä¹¦å†™é”™è¯¯, åŒ¹é…çš„æ•°æ®ä¹Ÿä¼šå‡ºé”™.</span><br><span class="line">    ç½‘é¡µç”±ä¸‰éƒ¨åˆ†ç»„æˆ: HTML, Css, JavaScript, HTMLé¡µé¢æ ‡ç­¾å­˜åœ¨å±‚çº§å…³ç³», å³DOMæ ‘, åœ¨è·å–ç›®æ ‡æ•°æ®æ—¶å¯ä»¥æ ¹æ®ç½‘é¡µå±‚æ¬¡å…³ç³»å®šä½æ ‡ç­¾, åœ¨è·å–æ ‡ç­¾çš„æ–‡æœ¬æˆ–å±æ€§.</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># xpathè§£æåº“è§£ææ•°æ®åŸç†:</span></span><br><span class="line"><span class="number">1.</span> æ ¹æ®ç½‘é¡µDOMæ ‘å®šä½èŠ‚ç‚¹æ ‡ç­¾</span><br><span class="line"><span class="number">2.</span> è·å–èŠ‚ç‚¹æ ‡ç­¾çš„æ­£æ–‡æ–‡æœ¬æˆ–å±æ€§å€¼</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># xpathå®‰è£…, åˆä½“éªŒ --&gt; ä½¿ç”¨æ­¥éª¤:	xpathè§£æç½‘ç»œç½‘é¡µ</span></span><br><span class="line"><span class="number">1.</span>xpathå®‰è£…: pip install lxml</span><br><span class="line"><span class="number">2.</span>requestsæ¨¡å—çˆ¬å–å£çº¸:</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># è·å–è¯·æ±‚åœ°å€ï¼Œç¬¬ä¸€é¡µå†…å®¹---ç¬¬äº”é¡µå†…å®¹</span></span><br><span class="line">url_list = [<span class="string">'http://www.win4000.com/zt/gaoqing_%d.html'</span> % num <span class="keyword">for</span> num <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>)]</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># éå†ç½‘é¡µ è·å–æ¯ä¸€ä¸ªç½‘é¡µçš„æ–‡æœ¬</span></span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> url_list:</span><br><span class="line">    res = requests.get(url=url,headers=headers).text</span><br><span class="line">    <span class="comment"># åˆ›å»ºå¯¹è±¡ï¼Œå˜é‡treeæ¥æ”¶</span></span><br><span class="line">    tree = etree.HTML(res)</span><br><span class="line">    <span class="comment"># ä»å¯¹è±¡ä¸­è·å–éœ€è¦çš„å›¾ç‰‡åœ°å€ï¼Œä½¿ç”¨å˜é‡url2_listæ¥æ”¶</span></span><br><span class="line">    url2_list = tree.xpath(<span class="string">'//ul[@class="clearfix"]/li/a/img/@data-original'</span>)</span><br><span class="line">    <span class="comment"># éå†å›¾ç‰‡åœ°å€å¯¹è±¡ï¼Œè·å–æ¯ä¸€ä¸ªåœ°å€</span></span><br><span class="line">    <span class="keyword">for</span> url2 <span class="keyword">in</span> url2_list:</span><br><span class="line">        <span class="comment"># è·å–æ¯ä¸€ä¸ªé¡µé¢çš„äºŒè¿›åˆ¶æµ</span></span><br><span class="line">        content = requests.get(url=url2,headers=headers).content</span><br><span class="line">        name = url2.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'./src/%s'</span>%name,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            print(name)</span><br><span class="line">            f.write(content)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># xpathè§£ææœ¬åœ°æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">tree = etree.parse(<span class="string">'./qb.html'</span>, etree.HTMLParser())</span><br><span class="line">title_lst = tree.xpath(<span class="string">'//ul/li/div/a/text()'</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> title_lst:</span><br><span class="line">    print(item)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># xpathè¯­æ³•:</span></span><br><span class="line"><span class="number">1.</span>å¸¸ç”¨è§„åˆ™:</span><br><span class="line">      <span class="number">1.</span>  nodename:		  èŠ‚ç‚¹åå®šä½</span><br><span class="line">      <span class="number">2.</span>  //:			  ä»å½“å‰èŠ‚ç‚¹é€‰å–å­å­™èŠ‚ç‚¹</span><br><span class="line">      <span class="number">3.</span>  /:			  ä»å½“å‰èŠ‚ç‚¹é€‰å–ç›´æ¥å­èŠ‚ç‚¹</span><br><span class="line">      <span class="number">4.</span>  nodename[@attribute=<span class="string">"..."</span>]  æ ¹æ®å±æ€§å®šä½æ ‡ç­¾</span><br><span class="line">      <span class="number">5.</span>  @attributename:  è·å–å±æ€§ </span><br><span class="line">      <span class="number">6.</span>  text():		   è·å–æ–‡æœ¬</span><br><span class="line">   </span><br><span class="line"><span class="number">2.</span>å±æ€§åŒ¹é…ä¸¤ç§æƒ…å†µ: å¤šå±æ€§åŒ¹é… &amp;  å•å±æ€§å¤šå€¼åŒ¹é…  </span><br><span class="line">     <span class="number">2.2</span> å¤šå±æ€§åŒ¹é…</span><br><span class="line">    ç¤ºä¾‹: tree.xpath(<span class="string">'//div[@class="item" and @name="test"]/text()'</span>) 	</span><br><span class="line">    <span class="number">2.1</span> å•å±æ€§å¤šå€¼åŒ¹é…</span><br><span class="line">    ç¤ºä¾‹: tree.xpath(<span class="string">'//div[contains(@class, "dc")]/text()'</span>)</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>æŒ‰åºé€‰æ‹©:</span><br><span class="line">    <span class="number">3.1</span> ç´¢å¼•å®šä½: ä»<span class="number">1</span>å¼€å§‹</span><br><span class="line">    <span class="number">3.2</span> last()å‡½æ•°</span><br><span class="line">    <span class="number">3.3</span> position()å‡½æ•°</span><br></pre></td></tr></table></figure></div>

<h2 id="è§£æç¤ºä¾‹-ç¤ºä¾‹è§£æçš„æ˜¯æœ¬åœ°æ–‡ä»¶"><a href="#è§£æç¤ºä¾‹-ç¤ºä¾‹è§£æçš„æ˜¯æœ¬åœ°æ–‡ä»¶" class="headerlink" title="è§£æç¤ºä¾‹: ç¤ºä¾‹è§£æçš„æ˜¯æœ¬åœ°æ–‡ä»¶"></a>è§£æç¤ºä¾‹: ç¤ºä¾‹è§£æçš„æ˜¯æœ¬åœ°æ–‡ä»¶</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Xpathç»ƒä¹ æ–‡ä»¶<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"007"</span>&gt;</span></span><br><span class="line">    "æˆ‘æ˜¯divæ ‡ç­¾çš„æ–‡å­—å†…å®¹, å’Œä¸‹é¢çš„pæ ‡ç­¾è¿˜æœ‰divæ ‡ç­¾æ˜¯åŒçº§çš„å“¦"</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯pæ ‡ç­¾å†…çš„æ–‡å­—å†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>è¿™æ˜¯pæ ‡ç­¾åŒçº§çš„divæ ‡ç­¾<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"divtag"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç¬¬1ä¸ªliæ ‡ç­¾<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç¬¬2ä¸ªliæ ‡ç­¾<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç¬¬3ä¸ªliæ ‡ç­¾<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç¬¬4ä¸ªliæ ‡ç­¾<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç¬¬5ä¸ªliæ ‡ç­¾<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.baidu.com"</span>&gt;</span>è¿™æ˜¯ç™¾åº¦çš„è·³è½¬è¿æ¥<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">name</span>=<span class="string">"laoda"</span>&gt;</span>è€å¤§åœ¨æ­¤<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1 c3"</span> <span class="attr">name</span>=<span class="string">"laoer"</span>&gt;</span>è€äºŒä»»æ€§, classæœ‰ä¸¤ä¸ªå€¼<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"c1"</span> <span class="attr">name</span>=<span class="string">"laosan"</span>&gt;</span>æˆ‘æ˜¯è€ä¸‰<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"></span><br><span class="line">tree = etree.parse(<span class="string">'./x.html'</span>, etree.HTMLParser())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.æ ¹æ®èŠ‚ç‚¹å, å³nodenameå®šä½titleæ ‡ç­¾, è·å–æ ‡ç­¾å†…æ–‡å­—</span></span><br><span class="line">title_text = tree.xpath(<span class="string">'//title/text()'</span>)</span><br><span class="line">print(title_text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æ ¹æ®èŠ‚ç‚¹å±æ€§å®šä½: å®šä½idä¸º007çš„divæ ‡ç­¾</span></span><br><span class="line">div_007 = tree.xpath(<span class="string">'//div[@id="007"]'</span>)</span><br><span class="line">print(div_007)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.ç¤ºä¾‹ç›´æ¥å­èŠ‚ç‚¹ä¸å­å­™èŠ‚ç‚¹:/, //</span></span><br><span class="line">div_007_one = tree.xpath(<span class="string">'//div[@id="007"]/text()'</span>)</span><br><span class="line">print(div_007_one)</span><br><span class="line">div_007_two = tree.xpath(<span class="string">'//div[@id="007"]//text()'</span>)</span><br><span class="line">print(div_007_two)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.è·å–aæ ‡ç­¾çš„hrefå±æ€§</span></span><br><span class="line">a_href = tree.xpath(<span class="string">'//div[@class="divtag"]/a/@href'</span>)</span><br><span class="line">print(a_href)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.å¤šå±æ€§å®šä½: æ ¹æ®classå±æ€§å’Œnameå±æ€§å®šä½divæ ‡ç­¾</span></span><br><span class="line">div_two_attr = tree.xpath(<span class="string">'//div[@class="c1" and @name="laoda"]/text()'</span>)</span><br><span class="line">print(div_two_attr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.å±æ€§å¤šå€¼å®šä½: å®šä½æ‰€æœ‰classä¸­æœ‰c1çš„divæ ‡ç­¾</span></span><br><span class="line">div_c1 = tree.xpath(<span class="string">'//div[contains(@class, "c1")]'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.æŒ‰åºå®šä½</span></span><br><span class="line">li_first = tree.xpath(<span class="string">'//div[@class="divtag"]/ul/li[1]/text()'</span>)  <span class="comment"># å®šä½ç¬¬ä¸€ä¸ªliæ ‡ç­¾, è·å–å…¶æ–‡æœ¬</span></span><br><span class="line">print(li_first)</span><br><span class="line"></span><br><span class="line">li_last = tree.xpath(<span class="string">'//div[@class="divtag"]/ul/li[last()]/text()'</span>)  <span class="comment"># å®šä½æœ€åä¸€ä¸ªliæ ‡ç­¾</span></span><br><span class="line">print(li_last)</span><br><span class="line"></span><br><span class="line">li_daotwo = tree.xpath(<span class="string">'//div[@class="divtag"]/ul/li[last()-1]/text()'</span>)  <span class="comment"># å®šä½å€’æ•°ç¬¬äºŒä¸ªliæ ‡ç­¾</span></span><br><span class="line">print(li_daotwo)</span><br><span class="line"></span><br><span class="line">li_qianthree = tree.xpath(<span class="string">'//div[@class="divtag"]/ul/li[position()&lt;4]/text()'</span>)  <span class="comment"># å®šä½å‰ä¸‰ä¸ªliæ ‡ç­¾</span></span><br><span class="line">print(li_qianthree)</span><br></pre></td></tr></table></figure></div>

<h2 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š:"></a>ä½œä¸š:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>çˆ¬å–ç³—äº‹ç™¾ç§‘, çƒ­é—¨å‰ä¸¤é¡µçš„æ¯ä¸€é¡¹æ ‡é¢˜, è¯¦æƒ…é¡µé“¾æ¥, å¥½ç¬‘æŒ‡æ•°åŠè¯„è®ºæ•°</span><br><span class="line"><span class="number">2.</span>é»˜å†™</span><br><span class="line">res = requests.get(url=url, headers=headers, params=params, proxies=proxies)</span><br><span class="line">res = requests.post(url=url, headers=headers, data=data, proxies=proxies)</span><br><span class="line">ä»£ç†ç±»å‹:</span><br><span class="line">    é€æ˜ä»£ç†:</span><br><span class="line">    åŒ¿åä»£ç†:</span><br><span class="line">    é«˜åŒ¿ä»£ç†:</span><br><span class="line">    </span><br><span class="line">è·å–å“åº”æ•°æ®å†…å®¹:</span><br><span class="line">		res.text		è·å–HTMLæ–‡æœ¬</span><br><span class="line">		res.content		è·å–äºŒè¿›åˆ¶æµ</span><br><span class="line">		res.json()		è·å–jsonæ•°æ®</span><br><span class="line">xpathå¸¸ç”¨è§„åˆ™:</span><br><span class="line">      <span class="number">1.</span>  nodename:		  èŠ‚ç‚¹åå®šä½</span><br><span class="line">      <span class="number">2.</span>  //:			  ä»å½“å‰èŠ‚ç‚¹é€‰å–å­å­™èŠ‚ç‚¹</span><br><span class="line">      <span class="number">3.</span>  /:			  ä»å½“å‰èŠ‚ç‚¹é€‰å–ç›´æ¥å­èŠ‚ç‚¹</span><br><span class="line">      <span class="number">4.</span>  nodename[@attribute=<span class="string">"..."</span>]  æ ¹æ®å±æ€§å®šä½æ ‡ç­¾</span><br><span class="line">      <span class="number">5.</span>  @attributename:  è·å–å±æ€§ </span><br><span class="line">      <span class="number">6.</span>  text():		   è·å–æ–‡æœ¬</span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Xpath</tag>
      </tags>
  </entry>
  <entry>
    <title>selenuimæ¨¡å—çš„ä½¿ç”¨</title>
    <url>/blog/Spider/Spider_id_06.html</url>
    <content><![CDATA[<h2 id="1ã€seleniumä»‹ç»"><a href="#1ã€seleniumä»‹ç»" class="headerlink" title="1ã€seleniumä»‹ç»"></a>1ã€seleniumä»‹ç»</h2><a id="more"></a>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>seleniumæ˜¯ä¸€ä¸ªwebè‡ªåŠ¨åŒ–æµ‹è¯•ç”¨çš„æ¡†æ¶. ç¨‹åºå‘˜å¯ä»¥é€šè¿‡ä»£ç å®ç°å¯¹æµè§ˆå™¨çš„æ§åˆ¶, æ¯”å¦‚æ‰“å¼€ç½‘é¡µ, ç‚¹å‡»ç½‘é¡µä¸­çš„å…ƒç´ , å®ç°é¼ æ ‡æ»šåŠ¨ç­‰æ“ä½œ.</span><br><span class="line"><span class="number">2.</span>å®ƒæ”¯æŒå¤šæ¬¾æµè§ˆå™¨, å¦‚è°·æ­Œæµè§ˆå™¨, ç«ç‹æµè§ˆå™¨ç­‰ç­‰, å½“ç„¶ä¹Ÿæ”¯æŒæ— å¤´æµè§ˆå™¨.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›®çš„:</span></span><br><span class="line">åœ¨çˆ¬å–æ•°æ®çš„è¿‡ç¨‹ä¸­, ç»å¸¸é‡åˆ°åŠ¨æ€æ•°æ®åŠ è½½, ä¸€èˆ¬åŠ¨æ€æ•°æ®åŠ è½½æœ‰ä¸¤ç§, ä¸€ç§é€šè¿‡ajaxè¯·æ±‚åŠ è½½æ•°æ®, å¦ä¸€ç§é€šè¿‡jsä»£ç åŠ è½½åŠ¨æ€æ•°æ®. seleniumå¯ä»¥æ¨¡æ‹Ÿäººæ“ä½œçœŸå®æµè§ˆå™¨, è·å–åŠ è½½å®Œæˆçš„é¡µé¢æ•°æ®</span><br><span class="line">ajax:</span><br><span class="line">    urlæœ‰è§„å¾‹ä¸”æœªåŠ å¯†, ç›´æ¥æ„å»ºurlè¿æ¥è¯·æ±‚</span><br><span class="line">    urlåŠ å¯†è¿‡æ— æ³•ç ´è§£è§„å¾‹ --&gt; selenium</span><br><span class="line">jsåŠ¨æ€æ•°æ®åŠ è½½ --&gt;  selenium</span><br></pre></td></tr></table></figure>

<h2 id="2ã€seleniumå®‰è£…"><a href="#2ã€seleniumå®‰è£…" class="headerlink" title="2ã€seleniumå®‰è£…"></a>2ã€seleniumå®‰è£…</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ä¸‰è¦ç´ : æµè§ˆå™¨, é©±åŠ¨ç¨‹åº, seleniumæ¡†æ¶</span><br><span class="line">	æµè§ˆå™¨: æ¨èè°·æ­Œæµè§ˆå™¨, æ ‡å‡†ç¨³å®šç‰ˆæœ¬</span><br><span class="line">	è°·æ­Œæµè§ˆå™¨é©±åŠ¨ç¨‹åºchromedriver.exeä¸‹è½½åœ°å€:http://chromedriver.storage.googleapis.com/index.html</span><br><span class="line">         ç«ç‹æµè§ˆå™¨é©±åŠ¨chromedriver.exeä¸‹è½½åœ°å€:https://github.com/mozilla/geckodriver/releases</span><br><span class="line">            <span class="comment"># å°†ä¸‹è½½çš„é©±åŠ¨æ”¾åœ¨pythonç¯å¢ƒçš„scirptæ–‡ä»¶ä¸­ï¼Œä¸éœ€è¦å¯¼å…¥ä½¿ç”¨ï¼Œæˆ–è€…æ”¾åœ¨è·Ÿpyæ–‡ä»¶åŒçº§çš„ç›®å½•ä¸­ï¼Œä½†æ˜¯æ¯æ¬¡éœ€å¯¼å…¥ä½¿ç”¨</span></span><br><span class="line">	pip install selenium   <span class="comment"># å®‰è£…seleniumæ¨¡å—</span></span><br><span class="line"><span class="comment"># æµ‹è¯•:</span></span><br><span class="line">url = <span class="string">'https://www.baidu.com'</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome(<span class="string">'./webdriver'</span>)   <span class="comment"># å°†é©±åŠ¨æ”¾åœ¨è„šæœ¬æ‰€åœ¨çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">browser.get(url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæŠ¥é”™---cannot find Chrome binary</span></span><br><span class="line">åˆ™ä½¿ç”¨å¦‚ä¸‹æµ‹è¯•</span><br><span class="line">url = <span class="string">'https://www.baidu.com'</span></span><br><span class="line">option = webdriver.ChromeOptions()</span><br><span class="line">option.binary_location = <span class="string">"D:\software\Google\Chrome\Application\chrome.exe"</span></span><br><span class="line">browser = webdriver.Chrome(options=option)</span><br><span class="line">browser.get(url)</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€seleniumå¸¸ç”¨æ“ä½œ"><a href="#3ã€seleniumå¸¸ç”¨æ“ä½œ" class="headerlink" title="3ã€seleniumå¸¸ç”¨æ“ä½œ"></a>3ã€seleniumå¸¸ç”¨æ“ä½œ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®ä¾‹åŒ–æµè§ˆå™¨å¯¹è±¡:</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.Chrome(<span class="string">'driverpath'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‘é€getè¯·æ±‚:</span></span><br><span class="line">browser.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–é¡µé¢å…ƒç´ :</span></span><br><span class="line">find_element_by_id(<span class="string">'IDå'</span>):æ ¹æ®å…ƒç´ çš„id</span><br><span class="line">find_element_by_name():æ ¹æ®å…ƒç´ çš„nameå±æ€§</span><br><span class="line">find_element_by_xpath():æ ¹æ®xpathè¡¨è¾¾å¼</span><br><span class="line">find_element_by_class_name():æ ¹æ®<span class="class"><span class="keyword">class</span>çš„å€¼</span></span><br><span class="line"><span class="class"><span class="title">find_element_by_css_selector</span><span class="params">()</span>:</span>æ ¹æ®cssé€‰æ‹©å™¨</span><br><span class="line">find_element_by_link_text(<span class="string">'text'</span>):æ ¹æ®è¶…é“¾æ¥çš„æ–‡æœ¬è¿›è¡Œå®šä½</span><br><span class="line">find_element_by_partial_link_text(<span class="string">'a part of text'</span>):æ ¹æ®è¶…æ–‡æœ¬çš„æ–‡æœ¬è¿›è¡Œæ¨¡å—åŒ¹é…</span><br><span class="line"></span><br><span class="line"><span class="comment"># èŠ‚ç‚¹äº¤äº’æ“ä½œ:</span></span><br><span class="line">click(): ç‚¹å‡»</span><br><span class="line">send_keys(): è¾“å…¥å†…å®¹</span><br><span class="line">clear(): æ¸…ç©ºæ“ä½œ</span><br><span class="line">browser.forword():å‰è¿›</span><br><span class="line">browser.back():åé€€</span><br><span class="line"></span><br><span class="line">execute_script(js): æ‰§è¡ŒæŒ‡å®šçš„jsä»£ç </span><br><span class="line"><span class="comment"># JSä»£ç : window.scrollTo(0, document.body.scrollHeight)å¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡æ»šåŠ¨ä¸€å±é«˜åº¦</span></span><br><span class="line">quit(): é€€å‡ºæµè§ˆå™¨</span><br><span class="line">    I quit! æˆ‘ä¸å¹²!</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç½‘é¡µçš„æ•°æ®:</span></span><br><span class="line">browser.page_source   ---&gt;  è·å–ç½‘é¡µæºä»£ç ---strç±»å‹</span><br><span class="line">è·å–å…ƒç´ å±æ€§ï¼šget_attribute()</span><br><span class="line">è·å–å…ƒç´ æ–‡æœ¬ï¼šget_text()</span><br><span class="line">è·å–å…ƒç´ ä½ç½®ï¼šelement.location</span><br><span class="line">è·å–å…ƒç´ å°ºå¯¸ï¼šelement.size</span><br><span class="line"></span><br><span class="line"><span class="comment"># frame</span></span><br><span class="line">switch_to.frame(<span class="string">'frameid'</span>) </span><br><span class="line">switch_to.default_coutent()</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€qqç©ºé—´æ¨¡æ‹Ÿç™»é™†"><a href="#4ã€qqç©ºé—´æ¨¡æ‹Ÿç™»é™†" class="headerlink" title="4ã€qqç©ºé—´æ¨¡æ‹Ÿç™»é™†"></a>4ã€qqç©ºé—´æ¨¡æ‹Ÿç™»é™†</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># å®ä¾‹åŒ–æµè§ˆå™¨å¯¹è±¡</span></span><br><span class="line">browser = webdriver.Chrome(<span class="string">'./chromedriver.exe'</span>)</span><br><span class="line"><span class="comment"># æ‰“å¼€qqç©ºé—´ç™»é™†é¡µé¢</span></span><br><span class="line">browser.get(<span class="string">'https://qzone.qq.com/'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># è½¬è‡³frameå­é¡µé¢</span></span><br><span class="line">browser.switch_to.frame(<span class="string">'login_frame'</span>)</span><br><span class="line"><span class="comment"># è·å–å¯†ç ç™»é™†é€‰é¡¹å¹¶ç‚¹å‡»</span></span><br><span class="line">a_tag = browser.find_element_by_id(<span class="string">'switcher_plogin'</span>)</span><br><span class="line">a_tag.click()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># è·å–è´¦å·è¾“å…¥æ¡†å¹¶è¾“å…¥è´¦å·</span></span><br><span class="line">browser.find_element_by_id(<span class="string">'u'</span>).clear()</span><br><span class="line">user = browser.find_element_by_id(<span class="string">'u'</span>)</span><br><span class="line">user.send_keys(<span class="string">'3338003899'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># è·å–å¯†ç è¾“å…¥æ¡†å¹¶è¾“å…¥å¯†ç </span></span><br><span class="line">browser.find_element_by_id(<span class="string">'p'</span>).clear()</span><br><span class="line">pwd = browser.find_element_by_id(<span class="string">'p'</span>)</span><br><span class="line">pwd.send_keys(<span class="string">'qq123456'</span>)</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># è·å–ç™»é™†æŒ‰é’®å¹¶å•å‡»</span></span><br><span class="line">button = browser.find_element_by_id(<span class="string">'login_button'</span>)</span><br><span class="line">button.click()</span><br></pre></td></tr></table></figure></div>

<h2 id="5ã€PhantomJSæµè§ˆå™¨ä½¿ç”¨"><a href="#5ã€PhantomJSæµè§ˆå™¨ä½¿ç”¨" class="headerlink" title="5ã€PhantomJSæµè§ˆå™¨ä½¿ç”¨"></a>5ã€PhantomJSæµè§ˆå™¨ä½¿ç”¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># PhantomJSä¸‹è½½åŠé…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">	- ä¸‹è½½, ç›´æ¥è§£å‹</span><br><span class="line">	- å°†è§£å‹æ–‡ä»¶çš„binç›®å½•æ·»åŠ è‡³ç¯å¢ƒå˜é‡</span><br><span class="line">    </span><br><span class="line"><span class="comment"># PhantomJSæ— ç•Œé¢æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">browser = webdriver.PhantomJS()</span><br><span class="line">browser.get(<span class="string">'https://www.baidu.com'</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu_phantomjs.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(browser.page_source)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è°·æ­Œæ— å¤´æµè§ˆå™¨</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"></span><br><span class="line">chrome_options = Options()</span><br><span class="line">chrome_options.add_argument(<span class="string">'--headless'</span>)</span><br><span class="line">chrome_options.add_argument(<span class="string">'--disable-gpu'</span>)</span><br><span class="line">browser = webdriver.Chrome(chrome_options=chrome_options)</span><br><span class="line">browser.get(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">print(browser.page_source)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu_headerless.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(browser.page_source)</span><br></pre></td></tr></table></figure></div>

<h2 id="6ã€å›¾ç‰‡æ‡’åŠ è½½"><a href="#6ã€å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="6ã€å›¾ç‰‡æ‡’åŠ è½½"></a>6ã€å›¾ç‰‡æ‡’åŠ è½½</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line">url = <span class="string">'http://sc.chinaz.com/tupian/index.html'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">"USer-Agent"</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.get(url=url, headers=headers)</span><br><span class="line">res.encoding = <span class="string">'utf-8'</span></span><br><span class="line"><span class="comment"># print(res.text)</span></span><br><span class="line">tree = etree.HTML(res.text)</span><br><span class="line"></span><br><span class="line">src_list = tree.xpath(<span class="string">'//div[contains(@class,"box")]/div/a/img/@src2'</span>)</span><br><span class="line"><span class="keyword">for</span> url_img <span class="keyword">in</span> src_list:</span><br><span class="line">    request.urlretrieve(url_img,<span class="string">'%s.jpg'</span>%src_list.index(url_img))</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">browser = webdriver.Chrome(<span class="string">'./chromedriver.exe'</span>)</span><br><span class="line">browser.get(<span class="string">'http://image.baidu.com/'</span>)</span><br><span class="line">search = browser.find_element_by_id(<span class="string">'kw'</span>)</span><br><span class="line">search.send_keys(<span class="string">'å®‰çªæ‹‰'</span>)</span><br><span class="line">button = browser.find_element_by_class_name(<span class="string">'s_search'</span>)</span><br><span class="line">button.click()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">    browser.execute_script(<span class="string">'window.scrollTo(0, document.body.scrollHeight)'</span>)</span><br><span class="line">    time.sleep(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">text = browser.page_source</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu_pic.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(text)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(open(<span class="string">'./baidu_pic.html'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>), <span class="string">'lxml'</span>)</span><br><span class="line">li_list = soup.select(<span class="string">'.imgpage ul li'</span>)</span><br><span class="line"><span class="keyword">for</span> url_img <span class="keyword">in</span> li_list:</span><br><span class="line">    url_img = url_img[<span class="string">'data-objurl'</span>]</span><br><span class="line">    print(url_img)</span><br></pre></td></tr></table></figure></div>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½œä¸š:é›ªçƒç½‘é¦–é¡µ, æŠ“å–æ¨èå’¨è¯¢çš„æ¯ä¸€æ¡æ ‡é¢˜ä¸è¯¦æƒ…é¡µé“¾æ¥(ä½¿ç”¨seleniumæ¨¡æ‹Ÿé¼ æ ‡å‘ä¸‹æ»‘åŠ¨)</span></span><br><span class="line">https://xueqiu.com/</span><br><span class="line">    </span><br><span class="line"><span class="comment"># é»˜å†™:</span></span><br><span class="line">    <span class="comment"># å®ä¾‹åŒ–æµè§ˆå™¨å¯¹è±¡:</span></span><br><span class="line">    <span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">    browser = webdriver.Chrome(<span class="string">'driverpath'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å‘é€getè¯·æ±‚:</span></span><br><span class="line">    browser.get(<span class="string">'url'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–é¡µé¢å…ƒç´ :</span></span><br><span class="line">    find_element_by_id</span><br><span class="line">    find_element_by_xpath</span><br><span class="line">    find_element_by_name</span><br><span class="line">    find_element_by_class_name</span><br><span class="line">    find_element_by_css_selector</span><br><span class="line"></span><br><span class="line">    <span class="comment"># äº¤äº’æ“ä½œ:</span></span><br><span class="line">    click(): ç‚¹å‡»</span><br><span class="line">    send_keys(): è¾“å…¥å†…å®¹</span><br><span class="line">    clear(): æ¸…ç©ºæ“ä½œ</span><br><span class="line">    execute_script(js): æ‰§è¡ŒæŒ‡å®šçš„jsä»£ç </span><br><span class="line">    <span class="comment"># JSä»£ç : window.scrollTo(0, document.body.scrollHeight)å¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡æ»šåŠ¨ä¸€å±é«˜åº¦</span></span><br><span class="line">    quit(): é€€å‡ºæµè§ˆå™¨</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–ç½‘é¡µçš„æ•°æ®:</span></span><br><span class="line">    browser.page_source   ---&gt;  strç±»å‹</span><br></pre></td></tr></table></figure>

<h2 id="7ã€æ‰©å±•é¼ æ ‡æ“ä½œ"><a href="#7ã€æ‰©å±•é¼ æ ‡æ“ä½œ" class="headerlink" title="7ã€æ‰©å±•é¼ æ ‡æ“ä½œ"></a>7ã€æ‰©å±•é¼ æ ‡æ“ä½œ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ActionChainsç±»é‡Œé¢çš„æ–¹æ³•è¡Œä¸ºï¼š</span><br><span class="line">åˆå§‹åŒ–çš„æ—¶å€™éœ€è¦ä¼ driver å¯¹è±¡ï¼Œå†…ç½®çš„ä¸€ä¸ªç©ºåˆ—è¡¨ä¸­ï¼šï¼ˆè¯‘ï¼šï¼‰</span><br><span class="line"></span><br><span class="line">    performï¼šæ‰§è¡Œæ‰€æœ‰çš„è¡Œä¸º</span><br><span class="line">        ï¼ˆè¯‘ï¼šæ³¼å³°ï¼‰æ‰§è¡Œæ‰€æœ‰å­˜å‚¨çš„æ“ä½œ</span><br><span class="line">    reset_actionsï¼šå°†æ•´ä¸ªåˆ—è¡¨æ¸…ç©º</span><br><span class="line">        ï¼ˆè¯‘ï¼šç‘æ–¯ç‰¹.å®‰å¯æ·±æ€ï¼‰æ¸…é™¤å·²åœ¨æœ¬åœ°å’Œè¿œç¨‹ç«¯å­˜å‚¨çš„æ“ä½œã€€ã€€</span><br><span class="line">    clickï¼šç‚¹å‡»</span><br><span class="line">        ï¼ˆè¯‘ï¼šå¯ç«‹å…‹ï¼‰ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ã€‚ã€€ã€€</span><br><span class="line">    click_and_holdï¼šæ‹–æ‹½</span><br><span class="line">        ï¼ˆè¯‘ï¼šå¯ç«‹å…‹.æŒ‰å¾—.åçš„ï¼‰æŒ‰ä½å…ƒç´ ä¸Šçš„é¼ æ ‡å·¦é”®ã€‚ä¸æ¾ã€€ã€€</span><br><span class="line">    context_clickï¼šå³å‡»</span><br><span class="line">        ï¼ˆè¯‘ï¼šåº·æ³°å…‹æ–¯ç‰¹.å¯ç«‹å…‹ï¼‰å¯¹å…ƒç´ æ‰§è¡Œä¸Šä¸‹æ–‡å•å‡»(å³å‡»)ã€‚ã€€ã€€</span><br><span class="line">    double_clickï¼šåŒå‡»</span><br><span class="line">        ï¼ˆè¯‘ï¼šå¤§æ³Šå„¿.å¯ç«‹å…‹ï¼‰åŒå‡»å…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚</span><br><span class="line">    drag_and_dropï¼šæ‹–æ‹½åˆ°ç›®æ ‡åæ¾å¼€</span><br><span class="line">        ï¼ˆè¯‘ï¼šè½¬ä¸ª.æŒ‰å¾—.èµµå¡ï¼‰æŒ‰ä½æºå…ƒç´ ä¸Šçš„é¼ æ ‡å·¦é”®ï¼Œç„¶åç§»åŠ¨åˆ°ç›®æ ‡å…ƒç´ å¹¶é‡Šæ”¾é¼ æ ‡æŒ‰é’®ã€‚ã€€ã€€ã€€ã€€</span><br><span class="line">    drag_and_drop_by_offsetï¼šåç§»æ‹–æ‹½</span><br><span class="line">        ï¼ˆè¯‘ï¼šè½¬ä¸ª.æŒ‰å¾—.èµµå¡.ç™½.å¥¥ä½›èµ›ç‰¹ï¼‰æŒ‰ä½æºå…ƒç´ ä¸Šçš„é¼ æ ‡å·¦é”®ï¼Œç„¶åç§»åŠ¨åˆ°ç›®æ ‡åç§»é‡å¹¶é‡Šæ”¾é¼ æ ‡æŒ‰é’®ã€‚ã€€ã€€ã€€</span><br><span class="line">    key_downï¼šåœ¨ä¸€ä¸ªå…ƒç´ ä¸ŠæŒ‰ä½ä¸€ä¸ªé”®ä¸æ¾</span><br><span class="line">        ï¼ˆè¯‘ï¼škå½“ï¼‰åªå‘é€ä¸€ä¸ªæŒ‰é”®ï¼Œä¸é‡Šæ”¾å®ƒã€‚åªèƒ½ä¸ä¿®æ”¹é”®(æ§åˆ¶ï¼ŒCtrlã€Altå’ŒShift)ä¸€èµ·ä½¿ç”¨ã€‚ã€€ã€€</span><br><span class="line">    key_upï¼š æ¾å¼€æŒ‰é”®</span><br><span class="line">        ï¼ˆè¯‘ï¼šKé˜¿å©†ï¼‰é‡Šæ”¾ä¿®æ”¹é”®ã€‚ã€€ã€€</span><br><span class="line">    move_by_offsetï¼šé¼ æ ‡ç§»åŠ¨</span><br><span class="line">        ï¼ˆè¯‘ï¼šç›®.ç™½.å¥¥ä½›èµ›ç‰¹ï¼‰å°†é¼ æ ‡ç§»åŠ¨åˆ°å½“å‰é¼ æ ‡ä½ç½®çš„åç§»é‡ã€‚ã€€ã€€</span><br><span class="line">    move_to_elementï¼šé¼ æ ‡æ‚¬æµ®</span><br><span class="line">        ï¼ˆè¯‘ï¼šç›®.å›¾.æŒ‰äº†ä»¬ç‰¹ï¼‰å°†é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ çš„ä¸­é—´ã€‚ã€€ã€€</span><br><span class="line">    move_to_element_with_offsetï¼šé¼ æ ‡åæ ‡åç§»</span><br><span class="line">        ï¼ˆè¯‘ï¼šç›®.å›¾.æŒ‰äº†ä»¬ç‰¹.ä½å­.å¥¥ä½›èµ›ç‰¹ï¼‰å°†é¼ æ ‡ç§»åŠ¨æŒ‡å®šå…ƒç´ çš„åç§»é‡ã€‚åç§»é‡ç›¸å¯¹äºå…ƒç´ çš„å·¦ä¸Šè§’ã€‚ã€€ã€€</span><br><span class="line">    pauseï¼šæš‚åœ</span><br><span class="line">        ï¼ˆè¯‘ï¼šæ™®æ–¯ï¼‰åœ¨æŒ‡å®šçš„æŒç»­æ—¶é—´å†…æš‚åœæ‰€æœ‰è¾“å…¥(ä»¥ç§’ä¸ºå•ä½)--æ¯ä¸ªåŠ¨ä½œæ‰§è¡Œåéœ€è¦æš‚åœå‡ ç§’ä¸æ‰§è¡Œä¹‹åæ“ä½œã€€ã€€</span><br><span class="line">    releaseï¼šæ¾å¼€</span><br><span class="line">        ï¼ˆè¯‘ï¼šç‘ä¸½æ–¯ï¼‰é‡Šæ”¾å…ƒç´ ä¸Šè¢«æŒ‰ä½çš„é¼ æ ‡æŒ‰é’®ã€‚ã€€ã€€</span><br><span class="line">    send_keysï¼šè¾“å…¥</span><br><span class="line">        ï¼ˆè¯‘ï¼šæ£®å¾·.Kæ­»ï¼‰å‘å…ƒç´ å‘é€é”®ã€‚ã€€ã€€</span><br><span class="line">    send_keys_to_elementï¼šåœ¨å…ƒç´ ä¸Šè¾“å…¥æ–‡æœ¬</span><br><span class="line">        ï¼ˆè¯‘ï¼šæ£®å¾·.Kæ­».å›¾.æŒ‰äº†ä»¬ç‰¹ï¼‰</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">æ¡ˆä¾‹ï¼šç™»å½•è‡ªåŠ¨éªŒè¯æ»‘å—éªŒè¯ç </span><br><span class="line">url = <span class="string">"http://localhost:8080/login"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ¬äººä½¿ç”¨çš„æ˜¯ç«ç‹æµè§ˆå™¨</span></span><br><span class="line">browser = webdriver.Firefox()</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡ªåŠ¨è®¿é—®çˆ¬å–é¡µé¢</span></span><br><span class="line">browser.get(url=url)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–usernameè¾“å…¥æ¡†</span></span><br><span class="line">username = browser.find_element_by_xpath(<span class="string">'/html/body/div/div/section/div/div[1]/input'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–passwordè¾“å…¥æ¡†</span></span><br><span class="line">password = browser.find_element_by_xpath(<span class="string">'/html/body/div/div/section/div/div[2]/input'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ»‘åŠ¨å—æŒ‰é’®ï¼Œæ³¨æ„ï¼šè·å–çš„æ˜¯æ»‘åŠ¨å—ä¸­é‚£ä¸ªä¼šç§»åŠ¨çš„æŒ‰é’®ï¼Œå¹¶æœªæ»‘åŠ¨å—</span></span><br><span class="line">div = browser.find_element_by_xpath(<span class="string">"/html/body/div/div/section/div/center/div/div/div[3]"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ç™»å½•æŒ‰é’®</span></span><br><span class="line">login = browser.find_element_by_xpath(<span class="string">"/html/body/div/div/section/div/div[3]/button"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æˆ·ä¸º123ï¼Œè‡ªåŠ¨å¡«å……åˆ°ç”¨æˆ·æ¡†ä¸­</span></span><br><span class="line">username.send_keys(â€œ<span class="number">123</span>â€)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯†ç ä¸º123ï¼Œè‡ªåŠ¨å¡«å……åˆ°å¯†ç æ¡†ä¸­</span></span><br><span class="line">password.send_keys(â€œ<span class="number">123</span>â€)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨é¼ æ ‡æ“ä½œæ¨¡å—ActionChainsï¼Œè¯¦æƒ…è¯·è®¿é—®é“¾æ¥ï¼šhttps://www.cnblogs.com/shouhu/p/12205169.html</span></span><br><span class="line">active = ActionChains(browser)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¼ æ ‡å·¦é”®ç‚¹å‡»ç›®æ ‡ï¼Œä¸”ä¸æ¾å¼€</span></span><br><span class="line">active.click_and_hold(div).perform()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ»‘åŠ¨æŒ‰é’®ç§»åŠ¨åˆ°ç›®æ ‡ä½ç½®åæ¾å¼€é¼ æ ‡å·¦é”®ï¼Œrelease()æ–¹æ³•ä¸ºæ¾å¼€é¼ æ ‡å·¦é”®</span></span><br><span class="line"><span class="comment"># å‚æ•°xoffsetä¸ºæ»‘åŠ¨çš„å·¦å³é•¿åº¦åŠæ¨ªè½´ï¼Œyoffsetä¸ºæ»‘åŠ¨çš„ä¸Šä¸‹çš„é«˜åº¦åŠçºµè½´</span></span><br><span class="line">active.move_by_offset(xoffset=<span class="number">250</span>, yoffset=<span class="number">0</span>).release().perform()</span><br><span class="line"><span class="comment"># è‡ªåŠ¨ç‚¹å‡»ç™»å½•</span></span><br><span class="line">login.click()</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Selenuim</tag>
      </tags>
  </entry>
  <entry>
    <title>sceapyæ¡†æ¶</title>
    <url>/blog/Spider/Spider_id_05.html</url>
    <content><![CDATA[<h2 id="1ã€scrapyå®‰è£…ä¸ç¯å¢ƒä¾èµ–"><a href="#1ã€scrapyå®‰è£…ä¸ç¯å¢ƒä¾èµ–" class="headerlink" title="1ã€scrapyå®‰è£…ä¸ç¯å¢ƒä¾èµ–"></a>1ã€scrapyå®‰è£…ä¸ç¯å¢ƒä¾èµ–</h2><p>ã€€ã€€1.åœ¨å®‰è£…scrapyå‰éœ€è¦å®‰è£…å¥½ç›¸åº”çš„ä¾èµ–åº“, å†å®‰è£…scrapy, å…·ä½“å®‰è£…æ­¥éª¤å¦‚ä¸‹:</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">(<span class="number">1</span>).å®‰è£…lxmlåº“: pip install lxml</span><br><span class="line">(<span class="number">2</span>).å®‰è£…wheel: pip install wheel</span><br><span class="line">(<span class="number">3</span>).å®‰è£…twisted: pip install twistedæ–‡ä»¶è·¯å¾„</span><br><span class="line">	(twistedéœ€ä¸‹è½½åæœ¬åœ°å®‰è£…,ä¸‹è½½åœ°å€:http://www.lfd.uci.edu/~gohlke/pythonlibs/<span class="comment">#twisted)</span></span><br><span class="line">	(ç‰ˆæœ¬é€‰æ‹©å¦‚ä¸‹å›¾,ç‰ˆæœ¬åé¢æœ‰è§£é‡Š,è¯·æ ¹æ®è‡ªå·±å®é™…é€‰æ‹©)</span><br><span class="line">(<span class="number">4</span>).å®‰è£…pywin32: pip install pywin32</span><br><span class="line">	(æ³¨æ„:ä»¥ä¸Šå®‰è£…æ­¥éª¤ä¸€å®šè¦ç¡®ä¿æ¯ä¸€æ­¥å®‰è£…éƒ½æˆåŠŸ,æ²¡æœ‰æŠ¥é”™ä¿¡æ¯,å¦‚æœ‰æŠ¥é”™è‡ªè¡Œç™¾åº¦è§£å†³)</span><br><span class="line">(<span class="number">5</span>).å®‰è£…scrapy: pip install scrapy</span><br><span class="line">	(æ³¨æ„:ä»¥ä¸Šå®‰è£…æ­¥éª¤ä¸€å®šè¦ç¡®ä¿æ¯ä¸€æ­¥å®‰è£…éƒ½æˆåŠŸ,æ²¡æœ‰æŠ¥é”™ä¿¡æ¯,å¦‚æœ‰æŠ¥é”™è‡ªè¡Œç™¾åº¦è§£å†³)</span><br><span class="line">(<span class="number">6</span>).æˆåŠŸéªŒè¯:åœ¨cmdå‘½ä»¤è¡Œè¾“å…¥scrapy,æ˜¾ç¤ºScrapy1<span class="number">.6</span><span class="number">.0</span>-no active project,è¯æ˜å®‰è£…æˆåŠŸ</span><br></pre></td></tr></table></figure></div>

<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/sceapy.png">

<h2 id="2ã€åˆ›å»ºé¡¹ç›®"><a href="#2ã€åˆ›å»ºé¡¹ç›®" class="headerlink" title="2ã€åˆ›å»ºé¡¹ç›®"></a>2ã€åˆ›å»ºé¡¹ç›®</h2><p>ã€€ã€€1.æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªç›®å½•test<br>ã€€ã€€2.åœ¨testæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºçˆ¬è™«é¡¹ç›®ä¸ºspiderpro: scrapy startproject spiderpro<br>ã€€ã€€3.è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹: cd spiderpro<br>ã€€ã€€4.åˆ›å»ºçˆ¬è™«æ–‡ä»¶: scrapy genspider çˆ¬è™«å åŸŸå</p>
<h2 id="3ã€é¡¹ç›®ç›®å½•ä»‹ç»"><a href="#3ã€é¡¹ç›®ç›®å½•ä»‹ç»" class="headerlink" title="3ã€é¡¹ç›®ç›®å½•ä»‹ç»"></a>3ã€é¡¹ç›®ç›®å½•ä»‹ç»</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">spiderpro</span><br><span class="line">ã€€ã€€spiderpro <span class="comment"># é¡¹ç›®ç›®å½•</span></span><br><span class="line">ã€€ã€€ã€€ã€€__init__</span><br><span class="line">ã€€ã€€ã€€ã€€spiders:çˆ¬è™«æ–‡ä»¶ç›®å½•</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€__init__</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€tests.py:çˆ¬è™«æ–‡ä»¶</span><br><span class="line">ã€€ã€€ã€€ã€€items.py:å®šä¹‰çˆ¬å–æ•°æ®æŒä¹…åŒ–çš„æ•°æ®ç»“æ„</span><br><span class="line">ã€€ã€€ã€€ã€€middlewares.py:å®šä¹‰ä¸­é—´ä»¶</span><br><span class="line">ã€€ã€€ã€€ã€€pipelines.py:ç®¡é“,æŒä¹…åŒ–å­˜å‚¨ç›¸å…³</span><br><span class="line">ã€€ã€€ã€€ã€€settings.py:é…ç½®æ–‡ä»¶</span><br><span class="line">ã€€ã€€venv:è™šæ‹Ÿç¯å¢ƒç›®å½•</span><br><span class="line">ã€€ scrapy.cfg: scrapyé¡¹ç›®é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure></div>

<h2 id="è¯´æ˜ï¼š"><a href="#è¯´æ˜ï¼š" class="headerlink" title="è¯´æ˜ï¼š"></a>è¯´æ˜ï¼š</h2><p>ã€€ã€€(1).spiders:å…¶å†…åŒ…å«ä¸€ä¸ªä¸ªSpiderçš„å®ç°, æ¯ä¸ªSpideræ˜¯ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶<br>ã€€ã€€(2).items.py:å®ƒå®šä¹‰äº†Itemæ•°æ®ç»“æ„, çˆ¬å–åˆ°çš„æ•°æ®å­˜å‚¨ä¸ºå“ªäº›å­—æ®µ<br>ã€€ã€€(3).pipelines.py:å®ƒå®šä¹‰Item Pipelineçš„å®ç°<br>ã€€ã€€(4).settings.py:é¡¹ç›®çš„å…¨å±€é…ç½®<br>ã€€ã€€(5).middlewares.py:å®šä¹‰ä¸­é—´ä»¶, åŒ…æ‹¬çˆ¬è™«ä¸­é—´ä»¶å’Œä¸‹è½½ä¸­é—´ä»¶<br>ã€€ã€€(6).scrapy.cfg:å®ƒæ˜¯scrapyé¡¹ç›®çš„é…ç½®æ–‡ä»¶, å…¶å†…å®šä¹‰äº†é¡¹ç›®çš„é…ç½®è·¯å¾„, éƒ¨ç½²ç›¸å…³çš„ä¿¡æ¯ç­‰</p>
<h2 id="4ã€scrapyæ¡†æ¶ä»‹ç»-5å¤§æ ¸å¿ƒç»„ä»¶ä¸æ•°æ®æµå‘"><a href="#4ã€scrapyæ¡†æ¶ä»‹ç»-5å¤§æ ¸å¿ƒç»„ä»¶ä¸æ•°æ®æµå‘" class="headerlink" title="4ã€scrapyæ¡†æ¶ä»‹ç»: 5å¤§æ ¸å¿ƒç»„ä»¶ä¸æ•°æ®æµå‘"></a>4ã€scrapyæ¡†æ¶ä»‹ç»: 5å¤§æ ¸å¿ƒç»„ä»¶ä¸æ•°æ®æµå‘</h2><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/sceapy2.png" style="zoom:70%">

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">(<span class="number">1</span>).æ¶æ„:</span><br><span class="line"></span><br><span class="line">ã€€ã€€Scrapy Engine: è¿™æ˜¯å¼•æ“ï¼Œè´Ÿè´£Spidersã€ItemPipelineã€Downloaderã€Schedulerä¸­é—´çš„é€šè®¯ï¼Œä¿¡å·ã€æ•°æ®ä¼ é€’ç­‰ç­‰!</span><br><span class="line"></span><br><span class="line">ã€€ã€€Scheduler(è°ƒåº¦å™¨): å®ƒè´Ÿè´£æ¥å—å¼•æ“å‘é€è¿‡æ¥çš„requestsè¯·æ±‚ï¼Œå¹¶æŒ‰ç…§ä¸€å®šçš„æ–¹å¼è¿›è¡Œæ•´ç†æ’åˆ—ï¼Œå…¥é˜Ÿã€å¹¶ç­‰å¾…Scrapy Engine(å¼•æ“)æ¥è¯·æ±‚æ—¶ï¼Œäº¤ç»™å¼•æ“ã€‚</span><br><span class="line"></span><br><span class="line">ã€€ã€€Downloaderï¼ˆä¸‹è½½å™¨)ï¼šè´Ÿè´£ä¸‹è½½Scrapy Engine(å¼•æ“)å‘é€çš„æ‰€æœ‰Requestsè¯·æ±‚ï¼Œå¹¶å°†å…¶è·å–åˆ°çš„Responsesäº¤è¿˜ç»™Scrapy Engine(å¼•æ“)ï¼Œç”±å¼•æ“äº¤ç»™Spidersæ¥å¤„ç†ï¼Œ</span><br><span class="line"></span><br><span class="line">ã€€ã€€Spidersï¼šå®ƒè´Ÿè´£å¤„ç†æ‰€æœ‰Responses,ä»ä¸­åˆ†ææå–æ•°æ®ï¼Œè·å–Itemå­—æ®µéœ€è¦çš„æ•°æ®ï¼Œå¹¶å°†éœ€è¦è·Ÿè¿›çš„URLæäº¤ç»™å¼•æ“ï¼Œå†æ¬¡è¿›å…¥Scheduler(è°ƒåº¦å™¨)ï¼Œ</span><br><span class="line"></span><br><span class="line">ã€€ã€€Item Pipelineï¼šå®ƒè´Ÿè´£å¤„ç†Spidersä¸­è·å–åˆ°çš„Itemï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚å»é‡ï¼ŒæŒä¹…åŒ–å­˜å‚¨ï¼ˆå­˜æ•°æ®åº“ï¼Œå†™å…¥æ–‡ä»¶ï¼Œæ€»ä¹‹å°±æ˜¯ä¿å­˜æ•°æ®ç”¨çš„ï¼‰</span><br><span class="line"></span><br><span class="line">ã€€ã€€Downloader Middlewares(ä¸‹è½½ä¸­é—´ä»¶)ï¼šä½ å¯ä»¥å½“ä½œæ˜¯ä¸€ä¸ªå¯ä»¥è‡ªå®šä¹‰æ‰©å±•ä¸‹è½½åŠŸèƒ½çš„ç»„ä»¶</span><br><span class="line"></span><br><span class="line">ã€€ã€€Spider Middlewares(Spiderä¸­é—´ä»¶)ï¼šä½ å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªå¯ä»¥è‡ªå®šæ‰©å±•å’Œæ“ä½œå¼•æ“å’ŒSpidersä¸­é—´â€˜é€šä¿¡â€˜çš„åŠŸèƒ½ç»„ä»¶ï¼ˆæ¯”å¦‚è¿›å…¥Spidersçš„Responses;å’Œä»Spiderså‡ºå»çš„Requestsï¼‰</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">(<span class="number">2</span>).å·¥ä½œæµ:</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="number">1.</span>spiderå°†è¯·æ±‚å‘é€ç»™å¼•æ“, å¼•æ“å°†requestå‘é€ç»™è°ƒåº¦å™¨è¿›è¡Œè¯·æ±‚è°ƒåº¦</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="number">2.</span>è°ƒåº¦å™¨æŠŠæ¥ä¸‹æ¥è¦è¯·æ±‚çš„requestå‘é€ç»™å¼•æ“, å¼•æ“ä¼ é€’ç»™ä¸‹è½½å™¨, ä¸­é—´ä¼šé€”å¾„ä¸‹è½½ä¸­é—´ä»¶</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="number">3.</span>ä¸‹è½½æºå¸¦requestè®¿é—®æœåŠ¡å™¨, å¹¶å°†çˆ¬å–å†…å®¹responseè¿”å›ç»™å¼•æ“, å¼•æ“å°†responseè¿”å›ç»™spider</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="number">4.</span>spiderå°†responseä¼ é€’ç»™è‡ªå·±çš„parseè¿›è¡Œæ•°æ®è§£æå¤„ç†åŠæ„å»ºitemä¸€ç³»åˆ—çš„å·¥ä½œ, æœ€åå°†itemè¿”å›ç»™å¼•æ“, å¼•æ“ä¼ é€’ä¸ªpipeline</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="number">5.</span>pipeè·å–åˆ°itemåè¿›è¡Œæ•°æ®æŒä¹…åŒ–</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="number">6.</span>ä»¥ä¸Šè¿‡ç¨‹ä¸æ–­å¾ªç¯ç›´è‡³çˆ¬è™«ç¨‹åºç»ˆæ­¢</span><br></pre></td></tr></table></figure></div>

<h2 id="5ã€ä½¿ç”¨scrapyæ¡†æ¶çˆ¬å–ç³—ç™¾"><a href="#5ã€ä½¿ç”¨scrapyæ¡†æ¶çˆ¬å–ç³—ç™¾" class="headerlink" title="5ã€ä½¿ç”¨scrapyæ¡†æ¶çˆ¬å–ç³—ç™¾"></a>5ã€ä½¿ç”¨scrapyæ¡†æ¶çˆ¬å–ç³—ç™¾</h2><p>ã€€ã€€éœ€æ±‚: çˆ¬å–ç³—äº‹ç™¾ç§‘çƒ­é—¨æ¿å—,æ¯ä¸€æ¡çš„æ ‡é¢˜,å¥½ç¬‘,è¯„è®ºæ¡æ•°åŠä½œè€…ä¿¡æ¯,è§£æçˆ¬å–çš„ä¿¡æ¯æ•°æ®,å®šåˆ¶itemæ•°æ®å­˜å‚¨ç»“æ„,æœ€ç»ˆå°†æ•°æ®å­˜å‚¨äºMongoDBæ•°æ®åº“ä¸­.<br>ã€€ã€€åˆ›å»ºé¡¹ç›®:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">scrapy startproject qsbk <span class="comment"># åˆ›å»ºé¡¹ç›®</span></span><br><span class="line">cd qsbk <span class="comment"># åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•</span></span><br><span class="line">scrapy genspider qsbk_hot www.qiushibaike.com <span class="comment"># åˆ›å»ºçˆ¬è™«æ–‡ä»¶, qsbk_hotä¸ºçˆ¬è™«å, www...comä¸ºçˆ¬å–èŒƒå›´</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€itemæ–‡ä»¶å®šä¹‰æ•°æ®å­˜å‚¨çš„å­—æ®µ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    title = scrapy.Field()  <span class="comment"># æ ‡é¢˜</span></span><br><span class="line">    lau = scrapy.Field()  <span class="comment"># å¥½ç¬‘æ•°</span></span><br><span class="line">    comment = scrapy.Field()  <span class="comment"># è¯„è®ºæ•°</span></span><br><span class="line">    auth = scrapy.Field()  <span class="comment"># ä½œè€…</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€spideræ–‡ä»¶ä¸­å®šä¹‰è§£ææ•°æ®çš„æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QsbkHotSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">	name =<span class="string">'qsbk_hot'</span></span><br><span class="line">	<span class="comment"># allowed_domains = ['www.qiushibaike.com'] # æ— ç”¨, å¯æ³¨é‡Šæ‰</span></span><br><span class="line">	start_urls =[<span class="string">'http://www.qiushibaike.com/'</span>]</span><br><span class="line"></span><br><span class="line">	<span class="comment"># æ€è·¯:ä¸€æ¡çƒ­ç‚¹æ•°æ®åœ¨å‰ç«¯ä¸­å¯¹åº”ä¸€ä¸ªliæ ‡ç­¾, å°†ä¸€é¡µä¸­çš„æ‰€æœ‰liæ ‡ç­¾å–å‡º, å†è¿›ä¸€æ­¥æ“ä½œ</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line"></span><br><span class="line">		li_list = response.selector.xpath(<span class="string">'//div[@class="recommend-article"]/ul/li'</span>)</span><br><span class="line"></span><br><span class="line">		<span class="comment"># å¾ªç¯liæ ‡ç­¾ç»„æˆçš„åˆ—è¡¨, å…ˆå®ä¾‹åŒ–item, å†å–éœ€è¦çš„å­—æ®µ, å¹¶è¯¥itemå¯¹è±¡çš„ç›¸åº”å±æ€§èµ‹å€¼</span></span><br><span class="line">		<span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line"></span><br><span class="line">			<span class="comment"># å®ä¾‹åŒ–itemå¯¹è±¡</span></span><br><span class="line">			item =QsbkItem()</span><br><span class="line"></span><br><span class="line">			<span class="comment"># è§£æè·å–title(æ ‡é¢˜), lau(å¥½ç¬‘æ•°), comment(è¯„è®ºæ•°), auth(ä½œè€…)ç­‰ä¿¡æ¯</span></span><br><span class="line">			title = li.xpath(<span class="string">'./div[@class="recmd-right"]/a/text()'</span>).extract_first()</span><br><span class="line">			lau = li.xpath(<span class="string">'./div[@class="recmd-right"]/div[@class="recmd-detail clearfix"]/div/span[1]/text()'</span>).extract_first()</span><br><span class="line">			comment = li.xpath(<span class="string">'./div[@class="recmd-right"]/div[@class="recmd-detail clearfix"]/div/span[4]/text()'</span>).extract_first()</span><br><span class="line">			auth = li.xpath(<span class="string">'./div[@class="recmd-right"]/div[@class="recmd-detail clearfix"]/a/span/text()'</span>).extract_first()</span><br><span class="line"></span><br><span class="line">			<span class="comment"># å› ä¸ºéƒ¨åˆ†çƒ­ç‚¹æ•°æ®è¿˜æ²¡æœ‰è¯„è®ºå’Œå¥½ç¬‘æ•°, æ‰€ä»¥éœ€å¯¹æ•°æ®è¿›è¡Œå¤„ç†</span></span><br><span class="line">			<span class="keyword">if</span> <span class="keyword">not</span> lau:</span><br><span class="line">				lau =<span class="literal">None</span></span><br><span class="line">			<span class="keyword">if</span> <span class="keyword">not</span> comment:</span><br><span class="line">				comment =<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">			<span class="comment"># å°†å­—æ®µçš„å€¼å­˜å‚¨åœ¨itemçš„å±æ€§ä¸­</span></span><br><span class="line">            item[<span class="string">"title"</span>]= title</span><br><span class="line">            item[<span class="string">"lau"</span>]= lau</span><br><span class="line">            item[<span class="string">"comment"</span>]= comment</span><br><span class="line">            item[<span class="string">"auth"</span>]= auth</span><br><span class="line"></span><br><span class="line">			<span class="comment"># è¿”å›item, æ¡†æ¶ä¼šè‡ªåŠ¨å°†itemä¼ é€è‡³pipelineä¸­çš„æŒ‡å®šç±»</span></span><br><span class="line">			<span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€åœ¨pipelineä¸­å®šä¹‰ç®¡é“ç±»è¿›è¡Œæ•°æ®çš„å­˜å‚¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line">classQsbkPipeline(object):</span><br><span class="line">ã€€ã€€<span class="comment"># è¿æ¥MongoDBæ•°æ®åº“</span></span><br><span class="line">	conn = pymongo.MongoClient(<span class="string">"localhost"</span>, <span class="number">27017</span>)</span><br><span class="line">	db = conn.qiubai</span><br><span class="line">	table = db.qb_hot</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">ã€€ã€€ã€€ã€€<span class="comment"># å‘æ•°æ®åº“ä¸­å‡ºå…¥æ•°æ®</span></span><br><span class="line">ã€€ã€€ã€€ã€€self.table.insert(dict(item))</span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€<span class="comment"># æ­¤å¤„return itemæ˜¯ä¸ºäº†ä¸‹ä¸€ä¸ªç®¡é“ç±»èƒ½å¤Ÿæ¥æ”¶åˆ°itemè¿›è¡Œå­˜å‚¨</span></span><br><span class="line">ã€€ã€€ã€€ã€€<span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self)</span>:</span></span><br><span class="line">ã€€ã€€ã€€ã€€<span class="comment"># å…³é—­æ•°æ®åº“è¿æ¥</span></span><br><span class="line">ã€€ã€€ã€€ã€€self.conn.close()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æ­¤ç¤ºä¾‹ä¸­é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®çš„é¡¹, æ³¨æ„æ˜¯ä¸æ˜¯å…¨éƒ¨çš„é…ç½®, æ˜¯é’ˆå¯¹è¯¥é¡¹ç›®å¢åŠ æˆ–ä¿®æ”¹çš„é…ç½®é¡¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¿½ç•¥robotsåè®®</span></span><br><span class="line">ROBOTSTXT_OBEY =<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># UAä¼ªè£…</span></span><br><span class="line">USER_AGENT = <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.87 Safari/537.36'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®¡é“ç±»çš„æ³¨å†Œé…ç½®</span></span><br><span class="line">ITEM_PIPELINES =&#123;</span><br><span class="line"><span class="string">'qsbk.pipelines.QsbkPipeline'</span>:<span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="6ã€scrapyçˆ¬å–æ ¡èŠ±ç½‘äººåä¸å›¾ç‰‡ä¸‹è½½é“¾æ¥"><a href="#6ã€scrapyçˆ¬å–æ ¡èŠ±ç½‘äººåä¸å›¾ç‰‡ä¸‹è½½é“¾æ¥" class="headerlink" title="6ã€scrapyçˆ¬å–æ ¡èŠ±ç½‘äººåä¸å›¾ç‰‡ä¸‹è½½é“¾æ¥"></a>6ã€scrapyçˆ¬å–æ ¡èŠ±ç½‘äººåä¸å›¾ç‰‡ä¸‹è½½é“¾æ¥</h2><p>ã€€ã€€éœ€æ±‚: çˆ¬å–æ ¡èŠ±ç½‘å¤§å­¦æ ¡èŠ±çš„é»˜è®¤çš„ç¬¬ä¸€é¡µçš„æ‰€æœ‰å›¾ç‰‡srcå’Œäººå, å¹¶é€šè¿‡ç®¡é“å­˜å…¥mongodbæ•°æ®åº“<br>ã€€ã€€åˆ›å»ºé¡¹ç›®:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">scrapy startproject xiaohuaspider <span class="comment"># åˆ›å»ºé¡¹ç›®</span></span><br><span class="line">cd xiaohuaspider <span class="comment"># åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•</span></span><br><span class="line">scrapy genspider hua www.baidu.com <span class="comment"># åˆ›å»ºçˆ¬è™«æ–‡ä»¶, huaä¸ºçˆ¬è™«å, www.baidu.comä¸ºçˆ¬å–èŒƒå›´</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€åˆ›å»ºitemç±», ç”¨äºå­˜å‚¨è§£æå‡ºçš„æ•°æ®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaohuaspiderItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    name = scrapy.Field()</span><br><span class="line">    src = scrapy.Field()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€spiderä¸­å®šä¹‰çˆ¬å–çš„è¡Œä¸ºä¸è§£ææ•°æ®çš„æ“ä½œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> ..items <span class="keyword">import</span> XiaohuaspiderItem</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuaSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'hua'</span></span><br><span class="line">    <span class="comment"># allowed_domains = ['www.baidu.com']</span></span><br><span class="line">    start_urls = [<span class="string">'http://www.xiaohuar.com/hua/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        div_list = response.xpath(<span class="string">'//div[@class="img"]'</span>)</span><br><span class="line">        <span class="keyword">for</span> div <span class="keyword">in</span> div_list:</span><br><span class="line">            item = XiaohuaspiderItem()</span><br><span class="line">            name = div.xpath(<span class="string">'.//span/text()'</span>).extract_first()</span><br><span class="line">            src = div.xpath(<span class="string">'./a/img/@src'</span>).extract_first()</span><br><span class="line">            item[<span class="string">"name"</span>] = name</span><br><span class="line">            item[<span class="string">"src"</span>] = src</span><br><span class="line">            <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€itemPipelineç¼–ç , æŒä¹…åŒ–æ•°æ®åˆ°æœ¬åœ°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiaohuaspiderPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    conn = pymongo.MongoClient(<span class="string">'localhost'</span>, <span class="number">27017</span>)</span><br><span class="line">    db = conn.xiaohua</span><br><span class="line">    table = db.hua</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        self.table.insert(dict(item))</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        self.conn.close()</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€é…ç½®é¡¹:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># UAä¼ªè£…:</span></span><br><span class="line">USER_AGENT = <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.87 Safari/537.36'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¿½ç•¥robotsåè®®:</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯ç®¡é“ç±»</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">   <span class="string">'xiaohuaspider.pipelines.XiaohuaspiderPipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Sceapy</tag>
      </tags>
  </entry>
  <entry>
    <title>requestsé«˜çº§éƒ¨åˆ† &amp; urllibç®€å•ä»‹ç» &amp; æ­£åˆ™</title>
    <url>/blog/Spider/Spider_id_04.html</url>
    <content><![CDATA[<h2 id="1ã€requestsé«˜çº§ç”¨æ³•"><a href="#1ã€requestsé«˜çº§ç”¨æ³•" class="headerlink" title="1ã€requestsé«˜çº§ç”¨æ³•"></a>1ã€requestsé«˜çº§ç”¨æ³•</h2><a id="more"></a>

<h2 id="1ã€1-æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½"><a href="#1ã€1-æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½" class="headerlink" title="1ã€1  æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½"></a>1ã€1  æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä¹‰ä¸Šä¼ æ–‡ä»¶æ•°æ®, é”®ä¸ºfile, å€¼ä¸ºæ–‡ä»¶å¥æŸ„</span></span><br><span class="line">files = &#123;</span><br><span class="line"><span class="string">'file'</span>: open(<span class="string">'favicon.ico'</span>, <span class="string">'rb'</span>)</span><br><span class="line">&#125;</span><br><span class="line">r = requests.post(<span class="string">'http://httpbin.org/post'</span>, files=files)</span><br><span class="line">print(res.text)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€2-cookieå¤„ç†"><a href="#1ã€2-cookieå¤„ç†" class="headerlink" title="1ã€2  cookieå¤„ç†"></a>1ã€2  cookieå¤„ç†</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰‹åŠ¨å¤„ç†cookieï¼š</span></span><br><span class="line">	<span class="number">1.</span>headersæ·»åŠ cookieé”®å€¼å¯¹</span><br><span class="line">	<span class="number">2.</span>RequestsCookieJarå¯¹è±¡</span><br><span class="line"><span class="comment"># è‡ªåŠ¨å¤„ç†cookieï¼šSession</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># headerså†…æ·»åŠ cookieé”®å€¼å¯¹å¤„ç†cookie</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'Cookie'</span>:<span class="string">'BIDUPSID=E01FE1A1E9555174ABC136FBFBFDE674; PSTM=1575031812; BD_UPN=12314753; BAIDUID=580A55392F38BF9168294CCFB5F408C8:FG=1; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; yjs_js_security_passport=fed4dfca16fcc236aa3827bce130a90fcb7407bd_1576809267_js; COOKIE_SESSION=7114_0_9_7_8_5_0_0_9_3_0_0_7493_0_2_0_1576828833_0_1576828831%7C9%23951_22_1576726592%7C4; delPer=0; H_PS_PSSID=1458_21104_30211_30284_26350; BDUSS=VA4dG9aTExqY0ZsQkVPYkk2a3Z-TTlseWEteW9-ZkFZOHZ6TGZoN2VyRXVIU1JlRUFBQUFBJCQAAAAAAAAAAAEAAAB45WVmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6Q~F0ukPxdd; BD_HOME=1'</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">'https://www.baidu.com/'</span></span><br><span class="line">res = requests.get(url = url , headers = headers)</span><br><span class="line">res.encoding = <span class="string">'urf-8'</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu_login.html'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.text)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># RequestsCookieJarå¯¹è±¡å¤„ç†cookie: ç”¨cookieç»´æŒç™¾åº¦ç™»é™†</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">url = <span class="string">'https://www.baidu.com/'</span></span><br><span class="line">cookies = <span class="string">'BIDUPSID=E01FE1A1E9555174ABC136FBFBFDE674; PSTM=1575031812; BD_UPN=12314753; BAIDUID=580A55392F38BF9168294CCFB5F408C8:FG=1; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; yjs_js_security_passport=fed4dfca16fcc236aa3827bce130a90fcb7407bd_1576809267_js; COOKIE_SESSION=7114_0_9_7_8_5_0_0_9_3_0_0_7493_0_2_0_1576828833_0_1576828831%7C9%23951_22_1576726592%7C4; delPer=0; H_PS_PSSID=1458_21104_30211_30284_26350; BDUSS=VA4dG9aTExqY0ZsQkVPYkk2a3Z-TTlseWEteW9-ZkFZOHZ6TGZoN2VyRXVIU1JlRUFBQUFBJCQAAAAAAAAAAAEAAAB45WVmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6Q~F0ukPxdd; BD_HOME=1'</span></span><br><span class="line">jar = requests.cookies.RequestsCookieJar()</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> cookies.split(<span class="string">';'</span>):</span><br><span class="line">    key,value = item.split(<span class="string">'='</span>,<span class="number">1</span>)</span><br><span class="line">    jar.set(key,value)</span><br><span class="line"></span><br><span class="line">res = requests.get(url = url , headers = headers , cookies = jar)</span><br><span class="line">res.encoding = <span class="string">'utf-8'</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'baidu.html'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.text)	 <span class="comment"># å“åº”æ•°æ®ä¸­åŒ…å«ç”¨æˆ·åä¿¡æ¯, è¯´æ˜cookieç”Ÿæ•ˆ</span></span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€3-ä¼šè¯ç»´æŒ"><a href="#1ã€3-ä¼šè¯ç»´æŒ" class="headerlink" title="1ã€3  ä¼šè¯ç»´æŒ"></a>1ã€3  ä¼šè¯ç»´æŒ</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># HTTPæ— çŠ¶æ€:</span></span><br><span class="line">	ä½¿ç”¨requestsæ¨¡å—ä¸­çš„get()å’Œpost()æ–¹æ³•è¯·æ±‚ç½‘é¡µæ—¶, æ¯ä¸€æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„, æ²¡æœ‰è¿ç»­è¯·æ±‚ä¹‹é—´çš„çŠ¶æ€ä¿æŒ. å‡è±¡, å¦‚æœä½ ç™»é™†äº†æ·˜å®åå‘æŸ¥çœ‹è®¢å•, é‚£ä¹ˆå¦‚æœæ²¡æœ‰çŠ¶æ€çš„ç»´æŒå°±æ— æ³•å®ç°.</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ä¼šè¯çš„ç»´æŒ: Sessionå¯¹è±¡</span></span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> Session</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.renren.com/ajaxLogin/login?1=1&amp;uniqueTimestamp=20191151116375'</span></span><br><span class="line">session = Session()</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'email'</span>: <span class="string">'17679962330'</span>,</span><br><span class="line">    <span class="string">'icode'</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="string">'origURL'</span>: <span class="string">'http://www.renren.com/home'</span>,</span><br><span class="line">    <span class="string">'domain'</span>: <span class="string">'renren.com'</span>,</span><br><span class="line">    <span class="string">'key_id'</span>: <span class="string">'1'</span>,</span><br><span class="line">    <span class="string">'captcha_type'</span>: <span class="string">'web_login'</span>,</span><br><span class="line">    <span class="string">'password'</span>: <span class="string">'4f099e818abe7310b77aa1b5f45e5e4084e4af309d90750e1d88bae39e85c828'</span>,</span><br><span class="line">    <span class="string">'rkey'</span>: <span class="string">'080f2e6d6b76e31a7ebc070c15096350'</span>,</span><br><span class="line">    <span class="string">'f'</span>: <span class="string">'http%3A%2F%2Fwww.renren.com%2F973125645%2Fnewsfeed%2Fphoto'</span>,</span><br><span class="line">&#125;</span><br><span class="line">res = session.post(url=url, headers=headers, data=data)</span><br><span class="line">ret = session.get(url=<span class="string">'http://www.renren.com/972036549/profile'</span>,data=data)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'renren.html'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(ret.text)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€4-SSLè¯ä¹¦éªŒè¯"><a href="#1ã€4-SSLè¯ä¹¦éªŒè¯" class="headerlink" title="1ã€4  SSLè¯ä¹¦éªŒè¯"></a>1ã€4  SSLè¯ä¹¦éªŒè¯</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.SSLè¯ä¹¦éªŒè¯</span></span><br><span class="line">requestsæä¾›äº†è¯ä¹¦éªŒè¯çš„åŠŸèƒ½. å½“å‘èµ·HTTPè¯·æ±‚æ—¶, æ¨¡å—ä¼šæ£€æŸ¥SSLè¯ä¹¦. ä½†æ£€æŸ¥çš„è¡Œä¸ºå¯ä»¥ç”¨verifyå‚æ•°æ¥æ§åˆ¶.</span><br><span class="line">	verify = <span class="literal">False</span>  <span class="comment"># ä¸æ£€æŸ¥SSLè¯ä¹¦</span></span><br><span class="line">	verify = <span class="literal">True</span>  <span class="comment"># æ£€æŸ¥SSLè¯ä¹¦</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 2.å¼‚å¸¸</span></span><br><span class="line">å¦‚æœä½¿ç”¨requestsæ¨¡å—çš„SSLéªŒè¯, éªŒè¯ä¸é€šè¿‡ä¼šæŠ›å‡ºå¼‚å¸¸, æ­¤æ—¶å¯ä»¥å°†verifyå‚æ•°è®¾ç½®ä¸º<span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.https://www.tutumanhua.comçš„è¯ä¹¦éªŒè¯</span></span><br><span class="line"><span class="comment"># ä¼šæŠ›å‡ºå¼‚å¸¸	requests.exceptions.SSLError</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">'https://www.tutumanhua.com'</span>)</span><br><span class="line">print(response.status_code)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸æŠ›å¼‚å¸¸, ä½†ä¼šå‡ºç°è­¦å‘Š</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">'https://www.tutumanhua.com'</span>, verify=<span class="literal">False</span>)</span><br><span class="line">print(response.status_code)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¦æ­¢è­¦å‘Š</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.packages <span class="keyword">import</span> urllib3</span><br><span class="line">urllib3.disable_warnings()</span><br><span class="line">response = requests.get(url=<span class="string">'https://www.tutumanhua.com'</span>, verify=<span class="literal">False</span>)</span><br><span class="line">print(response.status_code)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€ç»ˆç‰ˆ</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://www.tutumanhua.com'</span></span><br><span class="line">requests.packages.urllib3.disable_warnings() </span><br><span class="line">res = requests.get(url=url, headers=headers, verify=<span class="literal">False</span>)</span><br><span class="line">print(res.status_code)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€5-ä»£ç†è®¾ç½®"><a href="#1ã€5-ä»£ç†è®¾ç½®" class="headerlink" title="1ã€5  ä»£ç†è®¾ç½®"></a>1ã€5  ä»£ç†è®¾ç½®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä»£ç†: ä»£ç†å³ä»£ç†ip</span></span><br><span class="line">ä»£ç†ipæ˜¯æŒ‡åœ¨è¯·æ±‚çš„è¿‡ç¨‹ä¸­ä½¿ç”¨éæœ¬æœºipè¿›è¡Œè¯·æ±‚, é¿å…å¤§æ•°æ®é‡é¢‘ç¹è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‡ºç°ipå°ç¦, é™åˆ¶æ•°æ®çš„çˆ¬å–.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»£ç†ipåˆ†ç±»:</span></span><br><span class="line">	<span class="number">1.</span>é€æ˜ä»£ç†ip: è¯·æ±‚æ—¶, æœåŠ¡å™¨çŸ¥é“è¯·æ±‚çš„çœŸå®ip, çŸ¥é“è¯·æ±‚ä½¿ç”¨äº†ä»£ç†</span><br><span class="line">	<span class="number">2.</span>åŒ¿åä»£ç†ip: è¯·æ±‚æ—¶, æœåŠ¡å™¨çŸ¥é“è¯·æ±‚ä½¿ç”¨äº†ä»£ç†, ä½†ä¸çŸ¥é“è¯·æ±‚çš„çœŸå®ip</span><br><span class="line">	<span class="number">3.</span>é«˜åŒ¿ä»£ç†ip: è¯·æ±‚æ—¶, æœåŠ¡å™¨ä¸çŸ¥é“è¯·æ±‚ä½¿ç”¨äº†ä»£ç†, ä¹Ÿä¸çŸ¥é“è¯·æ±‚çš„çœŸå®ip</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">url = <span class="string">'https://www.baidu.com/s?ie=utf-8&amp;f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;tn=baidu&amp;wd=ip&amp;rsv_pq=a834758700059ab8&amp;rsv_t=60b33hUYnp%2F0I7P%2BFsy%2Fe0GZ9wIALM9f5WL12gftyn1dJvP7j9kOrAvyK7I&amp;rqlang=cn&amp;rsv_enter=1&amp;rsv_dl=tb&amp;rsv_sug3=3&amp;rsv_sug1=3&amp;rsv_sug7=101&amp;rsv_sug2=0&amp;prefixsug=ip&amp;rsp=2&amp;inputT=1808&amp;rsv_sug4=2550'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span> : <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">'https'</span> : <span class="string">'http://122.5.109.231:9999'</span>	<span class="comment"># ä¸ç®¡é”®æ˜¯httpsï¼Œè¿˜æ˜¯Http,åé¢çš„å€¼éƒ½æ˜¯http</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.get(url=url,headers=headers,proxies=proxies)</span><br><span class="line">res.encoding = <span class="string">'utf-8'</span></span><br><span class="line">print(res.text)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€6-è¶…æ—¶è®¾ç½®"><a href="#1ã€6-è¶…æ—¶è®¾ç½®" class="headerlink" title="1ã€6  è¶…æ—¶è®¾ç½®"></a>1ã€6  è¶…æ—¶è®¾ç½®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¶…æ—¶è®¾ç½®:</span></span><br><span class="line">	ç”±äºç½‘ç»œçŠ¶å†µçš„ä¸åŒ, æœåŠ¡å™¨é…ç½®å·®å¼‚ä»¥åŠæœåŠ¡å™¨å¤„ç†å¹¶å‘çš„èƒ½åŠ›ä¸åŒ, æœ‰æ—¶ä¼šå‡ºç°æœåŠ¡å™¨çš„å“åº”æ—¶é—´è¿‡é•¿, ç”šè‡³æ— æ³•è·å–å“åº”è€ŒæŠ›å‡ºå¼‚å¸¸. requestsæ¨¡å—å‘é€è¯·æ±‚å¯ä»¥è®¾ç½®è¶…æ—¶æ—¶é—´, åœ¨è¶…æ—¶æ—¶é—´å†…æœªå¾—åˆ°å“åº”, ä¾¿ä¼šæŠ›å‡ºå¼‚å¸¸.</span><br><span class="line">    ä¸€æ–¹é¢, å‡å°‘äº†è¯·æ±‚çš„é˜»å¡æ—¶é—´, ä¸€æ–¹é¢, å¯ä»¥è¿›è¡Œå¼‚å¸¸å¤„ç†, æ‰§è¡Œç›¸åº”çš„æ“ä½œ.</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://www.baidu.com/'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    res = requests.get(url=url, headers=headers,timeout=<span class="number">0.1</span>)</span><br><span class="line">    res.encoding = <span class="string">'utf-8'</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'baidu_1.html'</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(res.text)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">'çˆ¬å–è¶…æ—¶'</span>)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€7-æ„å»ºRequestå¯¹è±¡"><a href="#1ã€7-æ„å»ºRequestå¯¹è±¡" class="headerlink" title="1ã€7  æ„å»ºRequestå¯¹è±¡"></a>1ã€7  æ„å»ºRequestå¯¹è±¡</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 1.Prepared Request</span></span><br><span class="line">åˆ©ç”¨ Prepared Request æ•°æ®ç»“æ„æ„ä»¶Requestå¯¹è±¡. å…¶æ„å»ºåŠä½¿ç”¨æ­¥éª¤å¦‚ä¸‹:</span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> Request, Session</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºRequestå¯¹è±¡</span></span><br><span class="line">url = <span class="string">'...'</span></span><br><span class="line">data = &#123;...</span><br><span class="line">&#125;</span><br><span class="line">params = &#123;...</span><br><span class="line">&#125;</span><br><span class="line">headers = &#123;...</span><br><span class="line">&#125;</span><br><span class="line">session = Session()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºpostè¯·æ±‚:</span></span><br><span class="line">req_post = Request(method=<span class="string">'POST'</span>, url=url, headers=headers, data=data)</span><br><span class="line">req_obj_post = session.prepare_request(req_post)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ„å»ºgetè¯·æ±‚:</span></span><br><span class="line">req_get = Request(method=<span class="string">'GET'</span>, url=url, headers=headers, params=params)</span><br><span class="line">req_obj_get = session.prepare_request(req_get)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ©ç”¨æ„å»ºçš„è¯·æ±‚å¯¹è±¡, å‘æœåŠ¡å™¨å‘é€è¯·æ±‚</span></span><br><span class="line">res = session.send(req_obj_post)</span><br><span class="line">res = session.send(req_obj_get)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”ç”¨:</span></span><br><span class="line">é€šè¿‡æ­¤æ–¹æ³•, æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªç‹¬ç«‹çš„requestå¯¹è±¡, å½“éœ€è¦è¯·æ±‚çš„urlå¾ˆå¤šæ—¶, æˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸€ä¸ªurlæ„å»ºä¸€ä¸ªrequestå¯¹è±¡, å°†æ‰€æœ‰requestå¯¹è±¡ç½®äºé˜Ÿåˆ—ä¸­, ä¾¿äºè°ƒåº¦.</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ„å»ºrequestå¯¹è±¡, è¯·æ±‚ç³—äº‹ç™¾ç§‘è·å–é¡µé¢</span></span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> Request, Session</span><br><span class="line">url = <span class="string">'https://www.qiushibaike.com/'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">"User-Agent"</span>:<span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">session = Session()</span><br><span class="line">req_get = Request(url=url, headers=headers, method=<span class="string">'GET'</span>)</span><br><span class="line">req_get_obj = session.prepare_request(req_get)</span><br><span class="line">res = session.send(req_get_obj)</span><br><span class="line">res.encoding = <span class="string">'utf-8'</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'qb_reqobj.html'</span>, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(res.text)</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€urllibç®€å•ä»‹ç»"><a href="#2ã€urllibç®€å•ä»‹ç»" class="headerlink" title="2ã€urllibç®€å•ä»‹ç»"></a>2ã€urllibç®€å•ä»‹ç»</h2><p>ã€€ã€€1.urllibæ¨¡å—æ˜¯Pythonçš„ä¸€ä¸ªè¯·æ±‚æ¨¡å—<br>ã€€ã€€2.Python2ä¸­æ˜¯urllibå’Œurllib2ç›¸ç»“åˆå®ç°è¯·æ±‚çš„å‘é€. Python3ä¸­åŒä¸€ä¸ºurllibåº“<br>ã€€ã€€3.urllibæ˜¯Pythonå†…ç½®çš„è¯·æ±‚åº“, å…¶åŒ…å«4ä¸ªæ¨¡å—:<br>ã€€ã€€ã€€ã€€(1).requestæ¨¡å—: æ¨¡æ‹Ÿå‘é€è¯·æ±‚<br>ã€€ã€€ã€€ã€€(2).erroræ¨¡å—: å¼‚å¸¸å¤„ç†æ¨¡å—<br>ã€€ã€€ã€€ã€€(3).parseæ¨¡å—: å·¥å…·æ¨¡å—, æä¾›å…³äºURLçš„å¤„ç†æ–¹æ³•, å¦‚æ‹†åˆ†, è§£æ, åˆå¹¶ç­‰<br>ã€€ã€€ã€€ã€€(4).robotparseræ¨¡å—: è¯†åˆ«robotsåè®®</p>
<h2 id="3-æ­£åˆ™"><a href="#3-æ­£åˆ™" class="headerlink" title="3.æ­£åˆ™"></a>3.æ­£åˆ™</h2><h2 id="3ã€1-å…ƒå­—ç¬¦åŒ¹é…"><a href="#3ã€1-å…ƒå­—ç¬¦åŒ¹é…" class="headerlink" title="3ã€1  å…ƒå­—ç¬¦åŒ¹é…"></a>3ã€1  å…ƒå­—ç¬¦åŒ¹é…</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">.     åŒ¹é…ä»»æ„å­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œç¬¦</span><br><span class="line"></span><br><span class="line">[]    ç”¨æ¥è¡¨ç¤ºä¸€ç»„å­—ç¬¦,å•ç‹¬åˆ—å‡ºï¼š[abc] åŒ¹é… <span class="string">'a'</span>ï¼Œ<span class="string">'b'</span>æˆ–<span class="string">'c'</span></span><br><span class="line"></span><br><span class="line">[^...]	åŒ¹é…é™¤äº†å­—ç¬¦ç»„ä¸­å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦</span><br><span class="line"></span><br><span class="line">\d    åŒ¹é…ä»»æ„æ•°å­—ï¼Œç­‰ä»·äº [<span class="number">0</span><span class="number">-9</span>].</span><br><span class="line"></span><br><span class="line">\D    åŒ¹é…ä»»æ„éæ•°å­—</span><br><span class="line"></span><br><span class="line">\w    åŒ¹é…å­—æ¯æ•°å­—åŠä¸‹åˆ’çº¿</span><br><span class="line"></span><br><span class="line">\W    åŒ¹é…éå­—æ¯æ•°å­—åŠä¸‹åˆ’çº¿</span><br><span class="line"></span><br><span class="line">\s    åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦ï¼Œç­‰ä»·äº [\t\n\r\f].</span><br><span class="line"></span><br><span class="line">\S    åŒ¹é…ä»»æ„éç©ºå­—ç¬¦</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€2-å­—ç¬¦ç»„-è¦æ±‚åœ¨ä¸€ä¸ªä½ç½®åŒ¹é…çš„å­—ç¬¦å¯èƒ½å‡ºç°å¾ˆå¤šç§æƒ…å†µ-å„ç§æƒ…å†µç»„æˆä¸€ä¸ªç»„"><a href="#3ã€2-å­—ç¬¦ç»„-è¦æ±‚åœ¨ä¸€ä¸ªä½ç½®åŒ¹é…çš„å­—ç¬¦å¯èƒ½å‡ºç°å¾ˆå¤šç§æƒ…å†µ-å„ç§æƒ…å†µç»„æˆä¸€ä¸ªç»„" class="headerlink" title="3ã€2  å­—ç¬¦ç»„: è¦æ±‚åœ¨ä¸€ä¸ªä½ç½®åŒ¹é…çš„å­—ç¬¦å¯èƒ½å‡ºç°å¾ˆå¤šç§æƒ…å†µ, å„ç§æƒ…å†µç»„æˆä¸€ä¸ªç»„"></a>3ã€2  å­—ç¬¦ç»„: è¦æ±‚åœ¨ä¸€ä¸ªä½ç½®åŒ¹é…çš„å­—ç¬¦å¯èƒ½å‡ºç°å¾ˆå¤šç§æƒ…å†µ, å„ç§æƒ…å†µç»„æˆä¸€ä¸ªç»„</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">[<span class="number">0123456789</span>]: åŒ¹é…<span class="number">0</span>åˆ°<span class="number">9</span>ä»»æ„å­—ç¬¦</span><br><span class="line">[<span class="number">0</span><span class="number">-9</span>]: åŒä¸Š</span><br><span class="line">[a-z]: åŒ¹é…aåˆ°zçš„ä»»æ„å°å†™å­—æ¯</span><br><span class="line">[A-Z]: åŒ¹é…Aåˆ°Zçš„ä»»æ„å¤§å†™å­—æ¯</span><br><span class="line">[<span class="number">0</span><span class="number">-9</span>a-fA-F]: ä»¥ä¸Šä¸‰ç§çš„ç»„åˆ, åŒ¹é…<span class="number">0</span><span class="number">-9</span>ä»»æ„æ•°ç»„æˆ–aåˆ°fä¹‹é—´ä»»æ„å­—æ¯, ä¸åŒºåˆ†å¤§å°å†™</span><br><span class="line">è‡ªå®šä¹‰å­—ç¬¦ç»„:[a3h5]  ---&gt;  ä»£è¡¨åŒ¹é…a, 3, h, 5ç­‰å­—ç¬¦</span><br></pre></td></tr></table></figure>

<h2 id="3ã€3-é‡è¯"><a href="#3ã€3-é‡è¯" class="headerlink" title="3ã€3  é‡è¯:"></a>3ã€3  é‡è¯:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">*  		é‡å¤é›¶æ¬¡æˆ–æ›´å¤šæ¬¡</span><br><span class="line">+		é‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡</span><br><span class="line">?		é‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡</span><br><span class="line">&#123;n&#125;		é‡å¤næ¬¡</span><br><span class="line">&#123;n,&#125;	é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡</span><br><span class="line">&#123;n,m&#125;	é‡å¤nåˆ°mæ¬¡</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€4-è¾¹ç•Œä¿®é¥°ç¬¦"><a href="#3ã€4-è¾¹ç•Œä¿®é¥°ç¬¦" class="headerlink" title="3ã€4  è¾¹ç•Œä¿®é¥°ç¬¦"></a>3ã€4  è¾¹ç•Œä¿®é¥°ç¬¦</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">^		åŒ¹é…å¼€å§‹</span><br><span class="line">$		åŒ¹é…ç»“å°¾</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€5-åˆ†ç»„"><a href="#3ã€5-åˆ†ç»„" class="headerlink" title="3ã€5  åˆ†ç»„"></a>3ã€5  åˆ†ç»„</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ·»åŠ (), å°±å½¢æˆäº†ä¸€ä¸ªåˆ†ç»„, åœ¨reæ¨¡å—ä¸­ä¼˜å…ˆåŒ¹é…æ˜¾ç¤ºåˆ†ç»„å†…å®¹</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">"&lt;a href='www.baidu.com'&gt;æ­£åˆ™åŒ¹é…å®éªŒ&lt;/a&gt;"</span></span><br><span class="line">res = re.findall(<span class="string">"href='(.*)'&gt;"</span>, s)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€6-åŒ¹é…æ¨¡å¼"><a href="#3ã€6-åŒ¹é…æ¨¡å¼" class="headerlink" title="3ã€6  åŒ¹é…æ¨¡å¼"></a>3ã€6  åŒ¹é…æ¨¡å¼</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">re.S  å•è¡Œæ¨¡å¼</span><br><span class="line">re.M  å¤šè¡Œæ¨¡å¼	</span><br><span class="line">re.I   å¿½ç•¥å¤§å°å†™</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€7-å©ªåŒ¹é…ä¸éè´ªå©ªåŒ¹é…"><a href="#3ã€7-å©ªåŒ¹é…ä¸éè´ªå©ªåŒ¹é…" class="headerlink" title="3ã€7  å©ªåŒ¹é…ä¸éè´ªå©ªåŒ¹é…"></a>3ã€7  å©ªåŒ¹é…ä¸éè´ªå©ªåŒ¹é…</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">è´ªå©ªåŒ¹é…æ˜¯æŒ‡: åœ¨ä½¿ç”¨é‡è¯:  * ,  +  ç­‰æ—¶, å°½å¯èƒ½å¤šçš„åŒ¹é…å†…å®¹</span><br><span class="line">éè´ªå©ªåŒ¹é…æ˜¯æŒ‡: ä½¿ç”¨?å¯¹æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œä¿®é¥°, ä½¿é‡è¯çš„åŒ¹é…å°½å¯èƒ½å°‘, å¦‚+ä»£è¡¨åŒ¹é…1æ¬¡æˆ–å¤šæ¬¡, åœ¨?çš„ä¿®é¥°ä¸‹, åªåŒ¹é…1æ¬¡.</span><br></pre></td></tr></table></figure>

<h2 id="3ã€8-reæ¨¡å—"><a href="#3ã€8-reæ¨¡å—" class="headerlink" title="3ã€8  reæ¨¡å—"></a>3ã€8  reæ¨¡å—</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>re.findall(<span class="string">'æ­£åˆ™è¡¨è¾¾å¼'</span>, <span class="string">'å¾…åŒ¹é…å­—ç¬¦ä¸²'</span>): ä»¥åˆ—è¡¨å½¢å¼è¿”å›æ‰€æœ‰æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç»“æœ, </span><br><span class="line"><span class="number">2.</span>re.search(<span class="string">'æ­£åˆ™è¡¨è¾¾å¼'</span>, <span class="string">'å¸¦åŒ¹é…å­—ç¬¦ä¸²'</span>): åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªå°±è¿”å›ä¸€ä¸ªå¯¹è±¡, è¯¥å¯¹è±¡ä½¿ç”¨group()è¿›è¡Œå–å€¼, å¦‚æœæœªåŒ¹é…åˆ°åˆ™è¿”å›<span class="literal">None</span></span><br><span class="line"><span class="number">3.</span>re.match(<span class="string">'æ­£åˆ™è¡¨è¾¾å¼'</span>, <span class="string">'å¾…åŒ¹é…å­—ç¬¦ä¸²'</span>): ä»å­—ç¬¦ä¸²å¼€å¤´è¿›è¡ŒåŒ¹é…, å¦‚æœåŒ¹é…æˆåŠŸè¿”å›ä¸€ä¸ªå¯¹è±¡,åŒæ ·ä½¿ç”¨group()è¿›è¡Œå–å€¼, åŒ¹é…ä¸æˆåŠŸè¿”å›<span class="literal">None</span></span><br><span class="line"><span class="number">4.</span>re.compile(<span class="string">'æ­£åˆ™è¡¨è¾¾å¼'</span>): å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘ä¸ºå¯¹è±¡, ä½†éœ€è¦æŒ‰è¯¥æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ˜¯å¯ä»¥åœ¨ç›´æ¥ä½¿ç”¨è¯¥å¯¹è±¡è°ƒç”¨ä»¥ä¸Šæ–¹æ³•å³å¯.</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€9-åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æŠ“å–å›¾ç‰‡"><a href="#3ã€9-åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æŠ“å–å›¾ç‰‡" class="headerlink" title="3ã€9  åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æŠ“å–å›¾ç‰‡"></a>3ã€9  åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼æŠ“å–å›¾ç‰‡</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¯·æ±‚url, æŠ“å–é¡µé¢</span></span><br><span class="line">url = <span class="string">'http://www.win4000.com/zt/gaoqing.html'</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/77.0.3865.90 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">res = requests.get(url=url, headers=headers)</span><br><span class="line"><span class="comment"># åˆ©ç”¨æ­£åˆ™åŒ¹é…é¡µé¢ä¸­çš„imgæ ‡ç­¾, è·å–å…¶srcå±æ€§å€¼</span></span><br><span class="line">ret = re.findall(<span class="string">r'&lt;ul class="clearfix"&gt;.*?&lt;/ul&gt;'</span>,res.text,re.S)[<span class="number">1</span>]</span><br><span class="line">url1 = re.findall(<span class="string">r'http://pic1.win4000.com/.*?\.jpg'</span>,ret)</span><br><span class="line"><span class="comment"># éå†è·å–åˆ°çš„å›¾ç‰‡è¿æ¥, å¤„ç†è¿æ¥ä¸ºå®Œæ•´çš„url, å†æ¬¡è¯·æ±‚æŠ“å–å›¾ç‰‡äºŒè¿›åˆ¶æµæ•°æ®, å†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> url1:</span><br><span class="line">    content = requests.get(url=url,headers=headers).content</span><br><span class="line">    name = i.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">    print(name)</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'./imgs/%name'</span> % name,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(content)</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Requests</tag>
      </tags>
  </entry>
  <entry>
    <title>MongoDBçš„ä½¿ç”¨</title>
    <url>/blog/Spider/Spider_id_02.html</url>
    <content><![CDATA[<h2 id="1ã€MongoDBæ•°æ®åº“æ“ä½œ"><a href="#1ã€MongoDBæ•°æ®åº“æ“ä½œ" class="headerlink" title="1ã€MongoDBæ•°æ®åº“æ“ä½œ"></a>1ã€MongoDBæ•°æ®åº“æ“ä½œ</h2><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F;å¸¸ç”¨æ“ä½œ:</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 1.æŸ¥çœ‹æ•°æ®åº“</span><br><span class="line">show dbs</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2.åˆ›å»ºå¹¶ä½¿ç”¨æ•°æ®åº“</span><br><span class="line">use tst</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3.æŸ¥çœ‹å½“å‰å·¥ä½œçš„æ•°æ®åº“</span><br><span class="line">db</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; åˆ›å»ºè¡¨</span><br><span class="line">db.createCollection(&#39;è¡¨å&#39;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 4.åˆ›å»ºé›†åˆå¹¶æ’å…¥ä¸€æ¡æ•°æ®</span><br><span class="line">db.goods.insert(&#123;&quot;name&quot;:&quot;è¾£æ¡&quot;, &quot;price&quot;:0.5&#125;)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 5.æŸ¥çœ‹æ‰€æœ‰è¡¨</span><br><span class="line">show tables</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 6.æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰æ•°æ®</span><br><span class="line">db.goods.find()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; æ ¼å¼åŒ–è¾“å‡ºæŸ¥è¯¢æ•°æ®(å¯ä»¥æŒ‰æ ¼å¼è¾“å‡ºæŸ¥è¯¢æ•°æ®)</span><br><span class="line">db.goods.find().pretty()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 7.åˆ é™¤è¡¨æ“ä½œ</span><br><span class="line">db.goods.drop()</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 8.åˆ é™¤æ•°æ®åº“</span><br><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¢åŠ æ•°æ®æ“ä½œ:</span></span><br><span class="line">db.tablename.insert(&#123;dict&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹: å¢åŠ æ•°æ®æ“ä½œ:</span></span><br><span class="line">db.goods.insert(&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>, <span class="string">"price"</span>:<span class="number">0.5</span>&#125;)</span><br><span class="line">db.goods.insert(&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>, <span class="string">"price"</span>:<span class="number">1</span>&#125;)</span><br><span class="line">db.goods.insert(&#123;<span class="string">"name"</span>:<span class="string">"å¹²è„†é¢"</span>, <span class="string">"price"</span>:<span class="number">0.5</span>&#125;)</span><br><span class="line">db.goods.insertOne(&#123;<span class="string">"name"</span>:<span class="string">"å•èº«ç‹—ç²®"</span>, <span class="string">"price"</span>:<span class="number">4.5</span>&#125;)</span><br><span class="line">db.goods.insertMany([&#123;<span class="string">"name"</span>:<span class="string">"å°æ´‹äºº"</span>, <span class="string">"price"</span>:<span class="number">3.5</span>&#125;, &#123;<span class="string">"name"</span>:<span class="string">"éº¦é¦™é¸¡å—"</span>, <span class="string">"price"</span>:<span class="number">5.5</span>&#125;])</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥è¯¢æ•°æ®æ“ä½œ:</span></span><br><span class="line">db.tablename.find(&#123;dict&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¤ºä¾‹:æŸ¥è¯¢æ“ä½œ</span></span><br><span class="line">    <span class="comment"># 1.ç®€å•æŸ¥è¯¢æ“ä½œ:</span></span><br><span class="line">    db.goods.find().limit(<span class="number">4</span>).sort(&#123;<span class="string">"price"</span>:<span class="number">1</span>&#125;)        // sort(<span class="string">"å®šä½çš„é”®"</span>:+<span class="number">-1</span>):ç”¨äºå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº, <span class="number">1</span>å‡åº, <span class="number">-1</span>é™åº</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.æ¡ä»¶æŸ¥è¯¢:db.tablename.find(&#123;"å®šä½çš„é”®":"å€¼"&#125;)</span></span><br><span class="line">    db.goods.find(&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>&#125;)  // ç­‰å€¼æŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3.and ä¸ or</span></span><br><span class="line">    db.goods.find(&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>, <span class="string">"price"</span>:<span class="number">0.5</span>&#125;)  // <span class="keyword">and</span>æŸ¥è¯¢:æ ¹æ®å¤šä¸ªæ¡ä»¶å…±åŒå®šä½æ•°æ®</span><br><span class="line">    db.goods.find(&#123;$<span class="keyword">or</span>:[&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>&#125;,&#123;<span class="string">"price"</span>:<span class="number">3.5</span>&#125;]&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 4.éç­‰å€¼æŸ¥è¯¢:db.goods.find(&#123;"å®šä½çš„é”®":&#123;$...:"å€¼"&#125;)</span></span><br><span class="line">    db.goods.find(&#123;<span class="string">"price"</span>:&#123;$gt:<span class="number">0.5</span>&#125;&#125;)     // å¤§äº: $gt   </span><br><span class="line"></span><br><span class="line">    db.goods.find(&#123;<span class="string">"price"</span>:&#123;$gte:<span class="number">4.5</span>&#125;&#125;)    // å¤§äºç­‰äº: $gte</span><br><span class="line"></span><br><span class="line">    db.goods.find(&#123;<span class="string">"price"</span>:&#123;$lt:<span class="number">4.5</span>&#125;&#125;)     // å°äº: $lt</span><br><span class="line"></span><br><span class="line">    db.goods.find(&#123;<span class="string">"price"</span>:&#123;$lte:<span class="number">4.5</span>&#125;&#125;)    // å°äºç­‰äº: $lte</span><br><span class="line"></span><br><span class="line">    db.goods.find(&#123;<span class="string">"price"</span>:&#123;$ne:<span class="number">5.5</span>&#125;&#125;)    // ä¸ç­‰äº: $ne</span><br><span class="line"></span><br><span class="line">    db.goods.find(&#123;<span class="string">"price"</span>:&#123;$lt:<span class="number">5.5</span>, $gt:<span class="number">0.5</span>&#125;&#125;)  //ä¸Šä¸‹é™èŒƒå›´æŸ¥è¯¢</span><br><span class="line"></span><br><span class="line">    db.goods.find(&#123;$<span class="keyword">or</span>:[&#123;<span class="string">"price"</span>:&#123;$lt:<span class="number">3.5</span>&#125;&#125;, &#123;<span class="string">"price"</span>:&#123;$gt:<span class="number">4.5</span>&#125;&#125;]&#125;) // éä¸Šä¸‹é™èŒƒå›´æŸ¥è¯¢</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°æ•°æ®æ“ä½œ:</span></span><br><span class="line">db.table.update(&#123;å®šä½å­—å…¸&#125;, &#123;æŒ‡å®šä¿®æ”¹çš„é”®å€¼&#125;)</span><br><span class="line"><span class="comment"># ç¤ºä¾‹:æ›´æ–°æ•°æ®æ“ä½œ:</span></span><br><span class="line">	db.goods.update(&#123;<span class="string">"price"</span>:<span class="number">0.5</span>&#125;,&#123;$set:&#123;<span class="string">"price"</span>:<span class="number">5</span>&#125;&#125;)  </span><br><span class="line">        <span class="comment"># å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå­—å…¸ç”¨äºå®šä½è¦ä¿®æ”¹çš„æ•°æ®</span></span><br><span class="line">        <span class="comment"># å‚æ•°ä¸­çš„ç¬¬äºŒä¸ªå­—å…¸æ˜¯æŒ‡å®šè¦æ›´æ–°å·²å®šä½çš„æ•°æ®</span></span><br><span class="line">        <span class="comment"># ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å­—å…¸æ˜¯æŒ‡å®šè¦å°†å“ªä¸ªå­—æ®µçš„ä¿®æ”¹ä¸ºä»€ä¹ˆ</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤æ•°æ®æ“ä½œ:</span></span><br><span class="line">db.tablename.remove(&#123;å®šä½å­—å…¸&#125;)</span><br><span class="line"><span class="comment"># ç¤ºä¾‹:åˆ é™¤æ•°æ®æ“ä½œ:</span></span><br><span class="line">db.goods.remove(&#123;<span class="string">"price"</span>:<span class="number">5</span>&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€Pythonä¸mongoäº¤äº’"><a href="#2ã€Pythonä¸mongoäº¤äº’" class="headerlink" title="2ã€Pythonä¸mongoäº¤äº’"></a>2ã€Pythonä¸mongoäº¤äº’</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥MongoDBæ•°æ®åº“</span></span><br><span class="line">conn = pymongo.MongoClient(<span class="string">'localhost'</span>, <span class="number">27017</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºåº“</span></span><br><span class="line">db = conn.goods</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºé›†åˆ</span></span><br><span class="line">table = db.snacks</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®æ“ä½œ: æ’å…¥æ•°æ®</span></span><br><span class="line">table.insert(dict)</span><br><span class="line">table.insert_one(dict)</span><br><span class="line">table.insert_many([dict1, dict2, dict3])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ•°æ®æ“ä½œ: æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">table.find_one(&#123;dict&#125;)   <span class="comment"># è¿”å›ä¸€ä¸ªå­—å…¸å½¢å¼æ•°æ®</span></span><br><span class="line">table.find()  <span class="comment"># è¿”å›ä¸€ä¸ªmongoå¯¹è±¡, éœ€è¦ä½¿ç”¨forå¾ªç¯éå†å–å€¼</span></span><br><span class="line">table.find(&#123;dict&#125;)  <span class="comment"># åŒä¸Š</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¤ºä¾‹:</span></span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line">conn = pymongo.MongoClient(<span class="string">"localhost"</span>, <span class="number">27017</span>)</span><br><span class="line">db = conn.tst</span><br><span class="line">table = db.goods</span><br><span class="line"><span class="comment"># æ’å…¥æ•°æ®</span></span><br><span class="line">table.insert(&#123;<span class="string">'name'</span>: <span class="string">"å®‰æ…•å¸Œ"</span>, <span class="string">"price"</span>:<span class="number">6</span>&#125;)</span><br><span class="line">table.insert_one(&#123;<span class="string">'name'</span>: <span class="string">"è€å¹²å¦ˆ"</span>, <span class="string">"price"</span>:<span class="number">5.5</span>&#125;)</span><br><span class="line">table.insert_many([&#123;<span class="string">"name"</span>:<span class="string">"å°æµ£ç†Š"</span>, <span class="string">"price"</span>:<span class="number">1</span>&#125;, &#123;<span class="string">"name"</span>:<span class="string">"è„‰åŠ¨"</span>, <span class="string">"price"</span>:<span class="number">4.5</span>&#125;])</span><br><span class="line">print(dir(table))</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥è¯¢æ•°æ®:</span></span><br><span class="line">res_one = table.find_one(&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>&#125;)</span><br><span class="line">print(<span class="string">"find_oneçš„æŸ¥è¯¢ç»“æœ:"</span>, res_one)</span><br><span class="line"></span><br><span class="line">res = table.find(&#123;<span class="string">"name"</span>:<span class="string">"è¾£æ¡"</span>&#125;)  <span class="comment"># res = table.find()è·å¾—çš„æŸ¥è¯¢ç»“æœç±»å‹åŠå–å€¼æ“ä½œä¸€æ ·</span></span><br><span class="line">print(res)</span><br><span class="line">print(type(res))</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">    print(item)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># æ›´æ–°æ•°æ®:</span></span><br><span class="line">table.update(&#123;<span class="string">"name"</span>:<span class="string">"å•èº«ç‹—ç²®"</span>&#125;,&#123;<span class="string">"$set"</span>:&#123;<span class="string">"name"</span>:<span class="string">"å•èº«ç‹—å‡‰å‡‰"</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>BS4æ¨¡å—çš„ä½¿ç”¨</title>
    <url>/blog/Spider/Spider_id_01.html</url>
    <content><![CDATA[<h2 id="1ã€BS4åº“ä»‹ç»åŠå®‰è£…"><a href="#1ã€BS4åº“ä»‹ç»åŠå®‰è£…" class="headerlink" title="1ã€BS4åº“ä»‹ç»åŠå®‰è£…"></a>1ã€BS4åº“ä»‹ç»åŠå®‰è£…</h2><a id="more"></a>

<p>ã€€ã€€BeautifulSoupåº“ä»‹ç»:<br>ã€€ã€€BeautifulSoupä¹Ÿæ˜¯ä¸€ä¸ªè§£æåº“<br>ã€€ã€€BSè§£ææ•°æ®æ˜¯ä¾èµ–è§£æå™¨çš„, BSæ”¯æŒçš„è§£æå™¨æœ‰html.parser, lxml, xml, html5libç­‰, å…¶ä¸­lxmlè§£æå™¨è§£æé€Ÿåº¦å¿«, å®¹é”™èƒ½åŠ›å¼º.<br>ã€€ã€€BSç°é˜¶æ®µåº”ç”¨çš„è§£æå™¨å¤šæ•°æ˜¯lxml<br>ã€€ã€€å®‰è£…bs4ï¼špip install bs4</p>
<h2 id="2ã€BS4ç¼–ç æµç¨‹"><a href="#2ã€BS4ç¼–ç æµç¨‹" class="headerlink" title="2ã€BS4ç¼–ç æµç¨‹"></a>2ã€BS4ç¼–ç æµç¨‹</h2><p>ã€€ã€€bs4 çš„ç¼–ç æµç¨‹:<br>ã€€ã€€from bs4 import BeautifulSoup<br>ã€€ã€€soup = BeautifulSoup(res.text, â€˜lxmlâ€™)<br>ã€€ã€€tag = soup.select(â€œCSSé€‰æ‹©å™¨è¡¨è¾¾å¼â€)   # è¿”å›ä¸€ä¸ªåˆ—è¡¨<br>ã€€ã€€tab = soup.find_all(name , attrs , text)</p>
<h2 id="3ã€é€‰æ‹©å™¨ä»‹ç»"><a href="#3ã€é€‰æ‹©å™¨ä»‹ç»" class="headerlink" title="3ã€é€‰æ‹©å™¨ä»‹ç»"></a>3ã€é€‰æ‹©å™¨ä»‹ç»</h2><p>ã€€ã€€é€‰æ‹©å™¨ä»‹ç»ï¼š<br>ã€€ã€€ã€€ã€€1ã€èŠ‚ç‚¹é€‰æ‹©å™¨<br>ã€€ã€€ã€€ã€€2ã€æ–¹æ³•é€‰æ‹©å™¨<br>ã€€ã€€ã€€ã€€3ã€CSSé€‰æ‹©å™¨</p>
<h2 id="3ã€1-èŠ‚ç‚¹é€‰æ‹©å™¨"><a href="#3ã€1-èŠ‚ç‚¹é€‰æ‹©å™¨" class="headerlink" title="3ã€1  èŠ‚ç‚¹é€‰æ‹©å™¨"></a>3ã€1  èŠ‚ç‚¹é€‰æ‹©å™¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">html = <span class="string">'''</span></span><br><span class="line"><span class="string">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="string">&lt;html lang="en"&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">    &lt;meta charset="UTF-8"&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;Title&lt;/title&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;a href="https://www.baidu.com"&gt;è·³è½¬åˆ°ç™¾åº¦&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">ret = soup.select(<span class="string">'a'</span>)[<span class="number">0</span>]</span><br><span class="line">print(ret.string)	       <span class="comment"># ç¬¬ä¸€ç§æ–¹æ³•---è·å–æ–‡æœ¬</span></span><br><span class="line">print(ret.get_text())	<span class="comment"># ç¬¬äºŒç§æ–¹æ³•--è·å–æ–‡æœ¬</span></span><br><span class="line">print(ret[<span class="string">'href'</span>])		<span class="comment"># è·å–é“¾æ¥</span></span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€2-æ–¹æ³•é€‰æ‹©å™¨"><a href="#3ã€2-æ–¹æ³•é€‰æ‹©å™¨" class="headerlink" title="3ã€2  æ–¹æ³•é€‰æ‹©å™¨"></a>3ã€2  æ–¹æ³•é€‰æ‹©å™¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">html = <span class="string">'''</span></span><br><span class="line"><span class="string">    &lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">            &lt;h4&gt;BeautifulSoupç»ƒä¹ &lt;/h4&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div&gt;</span></span><br><span class="line"><span class="string">        	è¿™æ˜¯ä¸€ä¸ªdivçš„ç›´æ¥å­æ–‡æœ¬</span></span><br><span class="line"><span class="string">        	&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">		&lt;a href="https://www.baidu.com"&gt;è¿™æ˜¯ç™¾åº¦çš„è·³è½¬è¿æ¥&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">            &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element ele"&gt;ç¬¬ä¸€ä¸ªliæ ‡ç­¾&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;ç¬¬äºŒä¸ªliæ ‡ç­¾&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;ç¬¬ä¸‰ä¸ªliæ ‡ç­¾&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;ul class="list list-small"&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element" name="english"&gt;one&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;two&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;123456789&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;æµ‹è¯•å¤šå±‚çº§é€‰æ‹©å™¨&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="comment"># æ–¹æ³•é€‰æ‹©å™¨: find_all(name, attrs, text)</span></span><br><span class="line">ret1 = soup.find_all(name=<span class="string">'h4'</span>)[<span class="number">0</span>].string	<span class="comment"># find_all	nameé€šè¿‡æ ‡ç­¾è·å–çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨å¯¹è±¡ï¼Œ[0]æ˜¯å–åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒStringæ˜¯è·å–å­—ç¬¦ä¸²æ–‡æœ¬</span></span><br><span class="line">print(ret1)	</span><br><span class="line">ret5 = soup.find(name=<span class="string">'h4'</span>).string		<span class="comment"># find	nameé€šè¿‡æ ‡ç­¾è·å–çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œstringæ˜¯è·å–å­—ç¬¦ä¸²æ–‡æœ¬</span></span><br><span class="line">print(ret5)	</span><br><span class="line">ret2 = soup.find_all(attrs=&#123;<span class="string">'class'</span>: <span class="string">'element'</span>&#125;, limit=<span class="number">3</span>)	<span class="comment"># attrsæ˜¯é€šè¿‡ç±»å¯¹è±¡è·å–å¯¹è±¡ï¼Œlimit=3æ˜¯åªè·å–å‰ä¸‰æ¡</span></span><br><span class="line">print(ret2)</span><br><span class="line">ret3 = soup.find_all(text=<span class="string">'è¿™æ˜¯ç™¾åº¦çš„è·³è½¬è¿æ¥'</span>)	<span class="comment"># textæ˜¯é€šè¿‡æ–‡æœ¬è·å–æ–‡æœ¬å†…å®¹	(æœ‰ç‚¹é¸¡è‚‹)</span></span><br><span class="line">ret4 = soup.find_all(text=re.compile(<span class="string">r'\d+'</span>))	<span class="comment"># æ­£åˆ™è¡¨è¾¾å¼ï¼Œè·å–æ•°å­—æ–‡æœ¬</span></span><br><span class="line">print(ret4)</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€3-CSSé€‰æ‹©å™¨"><a href="#3ã€3-CSSé€‰æ‹©å™¨" class="headerlink" title="3ã€3  CSSé€‰æ‹©å™¨"></a>3ã€3  CSSé€‰æ‹©å™¨</h2><p>ã€€ã€€1.æ ¹æ®èŠ‚ç‚¹ååŠèŠ‚ç‚¹å±‚æ¬¡å…³ç³»å®šä½æ ‡ç­¾: æ ‡ç­¾é€‰æ‹©å™¨ ã€ç±»é€‰æ‹©å™¨ã€IDé€‰æ‹©å™¨ã€ å±‚çº§é€‰æ‹©å™¨ï¼šå•å±‚çº§é€‰æ‹©å™¨ã€å¤šå±‚çº§é€‰æ‹©å™¨ã€åµŒå¥—é€‰æ‹©</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">soup.select(<span class="string">'title'</span>)</span><br><span class="line">soup.select(<span class="string">'div &gt; ul &gt; li'</span>)   <span class="comment"># å•å±‚çº§é€‰æ‹©å™¨</span></span><br><span class="line">soup.select(<span class="string">'div li'</span>)  <span class="comment"># å¤šå±‚çº§é€‰æ‹©å™¨</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€2.æ ¹æ®èŠ‚ç‚¹çš„classå±æ€§å®šä½æ ‡ç­¾: classé€‰æ‹©å™¨(classical)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">soup.select(<span class="string">'.panel'</span>)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€3.æ ¹æ®idå±æ€§å®šä½æ ‡ç­¾: idé€‰æ‹©å™¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">soup.select(<span class="string">'#item'</span>)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€4.åµŒå¥—é€‰æ‹©:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ul_list = soup.select(<span class="string">'ul'</span>)</span><br><span class="line"><span class="keyword">for</span> ul <span class="keyword">in</span> ul_list:</span><br><span class="line">  print(ul.select(<span class="string">'li'</span>))</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€5.è·å–èŠ‚ç‚¹çš„æ–‡æœ¬æˆ–å±æ€§:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">tag_obj.string: è·å–ç›´æ¥å­æ–‡æœ¬--&gt;å¦‚æœèŠ‚ç‚¹å†…æœ‰ä¸ç›´ç³»æ–‡æœ¬å¹³è¡Œçš„èŠ‚ç‚¹, è¯¥æ–¹æ³•æ‹¿åˆ°çš„æ˜¯None</span><br><span class="line">tag_obj.get_text(): è·å–å­å­™èŠ‚ç‚¹çš„æ‰€æœ‰æ–‡æœ¬</span><br><span class="line">tag_obj[<span class="string">'attribute'</span>]: è·å–èŠ‚ç‚¹å±æ€§</span><br></pre></td></tr></table></figure></div>

<h2 id="ç»ƒä¹ ç¤ºä¾‹"><a href="#ç»ƒä¹ ç¤ºä¾‹" class="headerlink" title="ç»ƒä¹ ç¤ºä¾‹:"></a>ç»ƒä¹ ç¤ºä¾‹:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">html = <span class="string">'''</span></span><br><span class="line"><span class="string">    &lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">            &lt;h4&gt;BeautifulSoupç»ƒä¹ &lt;/h4&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="divtag"&gt;</span></span><br><span class="line"><span class="string">        	è¿™æ˜¯ä¸€ä¸ªdivçš„ç›´æ¥å­æ–‡æœ¬</span></span><br><span class="line"><span class="string">        	&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">		&lt;a href="https://www.baidu.com"&gt;è¿™æ˜¯ç™¾åº¦çš„è·³è½¬è¿æ¥&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">            &lt;ul class="list xxx" id="list-1"&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element ele"&gt;ç¬¬ä¸€ä¸ªliæ ‡ç­¾&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;ç¬¬äºŒä¸ªliæ ‡ç­¾&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;ç¬¬ä¸‰ä¸ªliæ ‡ç­¾&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;ul class="list list-small"&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;one&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;li class="element"&gt;two&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;/ul&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;æµ‹è¯•å¤šå±‚çº§é€‰æ‹©å™¨&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;div class="element"&gt;æˆ‘æ˜¯divæ ‡ç­¾.....&lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="comment"># ç±»é€‰æ‹©å™¨</span></span><br><span class="line">ret1 = soup.select(<span class="string">'.element'</span>)</span><br><span class="line">print(ret1)</span><br><span class="line"><span class="comment"># ID é€‰æ‹©å™¨</span></span><br><span class="line">ret2 = soup.select(<span class="string">'#list-1'</span>)</span><br><span class="line">print(ret2)</span><br><span class="line"><span class="comment"># å¤šå±‚çº§é€‰æ‹©å™¨: div &gt; ul &gt; li</span></span><br><span class="line">ret3 = soup.select(<span class="string">'.panel-body &gt; ul &gt; li'</span>)</span><br><span class="line">print(ret3)</span><br><span class="line"><span class="comment"># å•å±‚çº§é€‰æ‹©å™¨</span></span><br><span class="line">ret4 = soup.select(<span class="string">'.panel-body li'</span>)</span><br><span class="line">print(ret4)</span><br><span class="line"><span class="comment"># åµŒå¥—é€‰æ‹©</span></span><br><span class="line">ul_list = soup.select(<span class="string">'.panel-body ul'</span>)</span><br><span class="line"><span class="keyword">for</span> ul <span class="keyword">in</span> ul_list:</span><br><span class="line">    xxx = ul.select(<span class="string">'li'</span>)</span><br><span class="line">    print(xxx)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ–‡æœ¬çš„: stringåŠget_text()</span></span><br><span class="line">text_string = soup.select(<span class="string">'h4'</span>)[<span class="number">0</span>].string</span><br><span class="line">print(text_string)</span><br><span class="line">text_string_1 = soup.select(<span class="string">'.divtag'</span>)[<span class="number">0</span>].get_text().replace(soup.select(<span class="string">'.divtag p'</span>)[<span class="number">0</span>].string, <span class="string">""</span>).strip()</span><br><span class="line">print(text_string_1)</span><br><span class="line"><span class="comment"># è·å–å±æ€§:</span></span><br><span class="line">ret5 = soup.select(<span class="string">'#list-1'</span>)[<span class="number">0</span>][<span class="string">'class'</span>]</span><br></pre></td></tr></table></figure></div>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>BS4</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€å•çš„è´­ç‰©è½¦</title>
    <url>/blog/Django/Django_id_26.html</url>
    <content><![CDATA[<p>ã€€åŠ å…¥è´­ç‰©è½¦ï¼Œè¿›å…¥è´­ç‰©è½¦ï¼Œä½ æ„Ÿè§‰å“ªä¸ªç®€å•ï¼Ÿå¯¹ï¼Œç›¸å¯¹äºåŠ å…¥è´­ç‰©è½¦ï¼Œè¿›å…¥è´­ç‰©è½¦åªéœ€è¦ä¸€ä¸ªç®€ç®€å•å•çš„aæ ‡ç­¾å°±å¯ä»¥æå®šäº†</p>
<a id="more"></a>
<p>ä»Šå¤©è¦å†™çš„æ˜¯ä¸€ä¸ªä¿å­˜åˆ°localStorageä¸­çš„ç®€å•è´­ç‰©è½¦é€»è¾‘</p>
<h2 id="ç‚¹å‡»è´­ç‰©è½¦éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ"><a href="#ç‚¹å‡»è´­ç‰©è½¦éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ç‚¹å‡»è´­ç‰©è½¦éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ"></a>ç‚¹å‡»è´­ç‰©è½¦éœ€è¦å‡†å¤‡ä»€ä¹ˆï¼Ÿ</h2><p> ã€€ã€€<strong>å½“æˆ‘ä»¬ç‚¹å‡»è´­ç‰©è½¦æŒ‰é’®æ—¶ï¼Œéœ€è¦å®ç°çš„é€»è¾‘éƒ½æœ‰äº›ä»€ä¹ˆå‘¢ï¼Ÿ</strong></p>
<ol>
    <li>å°†éœ€è¦çš„å•†å“ä¿¡æ¯æ·»åŠ åˆ°è´­ç‰©è½¦ä¸­(å¦‚ï¼šå•†å“æ•°é‡ï¼Œå•†å“åç§°ï¼Œå•†å“ä»·æ ¼ï¼Œå•†å“å›¾ç‰‡ç­‰ç­‰)</li>
    <li>æŸ¥çœ‹è´­ç‰©è½¦ä¸­æ˜¯å¦å­˜åœ¨è¯¥å•†å“ï¼š<span style="color:red">ä¸å­˜åœ¨</span>:åˆ™å°†æ­¤å•†å“æ”¾å…¥è´­ç‰©è½¦ä¸­ï¼Œé»˜è®¤æ·»åŠ æ•°é‡ä¸º1;
        <span style="color:green">å­˜åœ¨</span>:åˆ™å°†è¯¥å•†å“çš„æ•°é‡+1</li>
    <li>å°†å•†å“è½¬æ¢æˆå­—ç¬¦ä¸²(å› ä¸ºlocalStorageä¸­åªèƒ½ä¿å­˜å­—ç¬¦ä¸²ç±»å‹æ•°æ®)</li>
    <li>å°†éœ€è¦åŠ å…¥è´­ç‰©è½¦çš„å•†å“å†™å…¥åˆ°localStorageä¸­è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨</li>
</ol>

<p>ã€€ã€€<strong>æˆ‘ä»¬å°†è¿™äº›éœ€è¦åœ¨ç‚¹å‡»åŠ å…¥è´­ç‰©è½¦æ—¶éœ€è¦å®ç°çš„é€»è¾‘ï¼Œå…¨éƒ¨æ”¾åœ¨ç»‘å®šäº‹ä»¶ä¸­</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ å…¥è´­ç‰©è½¦äº‹ä»¶</span></span><br><span class="line">addcart() &#123;</span><br><span class="line">	<span class="keyword">let</span> find = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// éå†è´­ç‰©è½¦</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.cart_list.length; i++) &#123;</span><br><span class="line">		<span class="comment">// å¦‚æœæ‰¾åˆ°äº†</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">this</span>.gid === <span class="keyword">this</span>.cart_list[i][<span class="string">'gid'</span>]) &#123;</span><br><span class="line">			<span class="comment">// å°†è¯¥å•†å“çš„æ•°é‡+1</span></span><br><span class="line">			<span class="keyword">this</span>.cart_list[i][<span class="string">'num'</span>]++;</span><br><span class="line">			find = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// å¦‚æœæ²¡æ‰¾åˆ°</span></span><br><span class="line">	<span class="keyword">if</span> (find === <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="comment">// å°†è¯¥å•†å“æ”¾å…¥è´­ç‰©è½¦åˆ—è¡¨</span></span><br><span class="line">		<span class="keyword">this</span>.cart_list.push(&#123; <span class="string">'name'</span>: <span class="keyword">this</span>.name, <span class="string">'gid'</span>: <span class="keyword">this</span>.gid, <span class="string">'price'</span>: <span class="keyword">this</span>.price, <span class="string">'num'</span>: <span class="number">1</span>, <span class="string">'img'</span>: <span class="keyword">this</span>.img &#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>.cart_list)</span><br><span class="line">	<span class="comment">// å­˜å…¥localStorageä¸­</span></span><br><span class="line">	localStorage[<span class="string">'cart'</span>] = <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.cart_list)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>

<h2 id="å½“åšå®Œè¿™äº›ä¹‹åéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"><a href="#å½“åšå®Œè¿™äº›ä¹‹åéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å½“åšå®Œè¿™äº›ä¹‹åéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"></a>å½“åšå®Œè¿™äº›ä¹‹åéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</h2><p>ã€€ã€€<strong>å°†è´­ç‰©è½¦å†™å…¥åˆ°localStorageä¸­åï¼Œå¦‚æœä½ å°†localStorageä¸­çš„è´­ç‰©è½¦æ‰‹åŠ¨åˆ é™¤ï¼Œæˆ–è€…éœ€è¦æ¸…é™¤ç¼“å­˜æ¥åˆ·æ–°é¡µé¢æ—¶ä¼šäº§ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</strong><br>(å°±å¥½æ¯”ä¸€ä¸ªé©¬èœ‚çªå¥½å¥½çš„åœ¨æ ‘ä¸ŠæŒ‚ç€ï¼Œè€Œä½ éè¦ç”¨ç«¹ç«¿å»æ…å®ƒä¸‹æ¥ä¸€æ ·ï¼Œä¸€å‘ä¸å¯æ”¶æ‹¾)<br>å½“ä½ åˆ·æ–°é¡µé¢ä¹‹åï¼Œæ§åˆ¶å°è¿æ¥è€Œæ¥çš„æ˜¯ä¸€ç‰‡çº¢ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åšçš„è´­ç‰©è½¦æ˜¯å­˜åœ¨localStorageä¸­çš„ï¼Œè€Œæˆ‘ä»¬å±•ç¤ºè´­ç‰©è½¦ä¸­å•†å“æ˜¯å†™åœ¨myheaderå…¬ç”¨ç»„ä»¶ä¸­çš„ï¼Œ<br>æ‰€ä»¥ï¼Œä¸ç®¡ä½ åœ¨å“ªä¸ªé¡µé¢ï¼Œå½“ä½ æ¸…é™¤ä¹‹åï¼Œå°±ä¼šæŠ¥å‡ºå¾ˆå¤šå¼‚å¸¸</p>
<p>ã€€ã€€<strong>è§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨mountedé’©å­å‡½æ•°ä¸­æ·»åŠ åˆå§‹åŒ–è´­ç‰©è½¦é€»è¾‘</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–è´­ç‰©è½¦é€»è¾‘</span></span><br><span class="line">init_cart() &#123;</span><br><span class="line">	<span class="keyword">let</span> cart = <span class="built_in">JSON</span>.parse(localStorage[<span class="string">'cart'</span>])</span><br><span class="line">	<span class="keyword">if</span> (cart) &#123;</span><br><span class="line">		<span class="comment">// å°†localstorageçš„æ•°æ®ç»™cart_list</span></span><br><span class="line">		<span class="keyword">this</span>.cart_list = <span class="built_in">JSON</span>.parse(localStorage[<span class="string">'cart'</span>])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Django,Cart</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºRedisçš„æ’è¡Œæ¦œ</title>
    <url>/blog/Python/Python_id_03.html</url>
    <content><![CDATA[<p>ã€€ã€€æ‰€è°“æ’è¡Œæ¦œï¼Œå°±æ˜¯è¦å°†ä¸€ç»„æ•°æ®æ ¹æ®æŸç§æ¡ä»¶æ¥è¿›è¡Œæ’åºï¼Œå°±å¥½æ¯”æ¸¸æˆï¼Œå¯ä»¥æ ¹æ®ç»éªŒå€¼ï¼Œç­‰çº§æ¥è¿›è¡Œé€’å‡æ’è¡Œï¼Œç”µå½±ï¼Œå¯ä»¥æ ¹æ®çƒ­åº¦æˆ–è€…è¯„åˆ†æ¥è¿›è¡Œæ’è¡Œ<br>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ çš„å†…å®¹å°±æ˜¯åšä¸€ä¸ªåŸºäºredisçš„å•†å“ç‚¹å‡»é‡æ’è¡Œæ¦œ</p>
<a id="more"></a>

<h2 id="1ã€æ–°çš„å•†å“å‚ä¸æ’åæ¥å£"><a href="#1ã€æ–°çš„å•†å“å‚ä¸æ’åæ¥å£" class="headerlink" title="1ã€æ–°çš„å•†å“å‚ä¸æ’åæ¥å£"></a>1ã€æ–°çš„å•†å“å‚ä¸æ’åæ¥å£</h2><p>ã€€ã€€æ¥å£ä½œç”¨ï¼š<br>ã€€ã€€ã€€ã€€å¦‚æœæ­¤å•†å“æ˜¯ç¬¬ä¸€æ¬¡è¢«è®¿é—®ï¼Œé‚£ä¹ˆæ­¤æ—¶è¯¥å•†å“çš„è®¿é—®æ¬¡æ•°ï¼Œå°±é»˜è®¤ä»1å¼€å§‹<br>ã€€ã€€ã€€ã€€å¦‚æœæ­¤å•†å“éç¬¬ä¸€æ¬¡è¢«è®¿é—®ï¼Œé‚£ä¹ˆæ­¤æ—¶è¯¥å•†å“çš„è®¿é—®æ¬¡æ•°ä¼šåœ¨åŸæœ‰çš„æ¬¡æ•°ä¸Šé¢+1</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥redis</span></span><br><span class="line">host = <span class="string">'localhost'</span></span><br><span class="line">port = <span class="number">6379</span></span><br><span class="line">r = redis.Redis(host=host, port=port)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°çš„å•†å“å‚ä¸æ’å</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodsClick</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="comment"># æ¥æ”¶å‚æ•°</span></span><br><span class="line">        gid = request.GET.get(<span class="string">'gid'</span>,<span class="literal">None</span>)</span><br><span class="line">        <span class="comment"># ä¿®æ”¹å•†å“çš„ç‚¹å‡»æ•°</span></span><br><span class="line">        r.zincrby(<span class="string">"good_rank"</span>,<span class="number">1</span>,int(gid))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">"message"</span>:<span class="string">"è®¿é—®+1"</span>&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€2-å‰ç«¯è°ƒç”¨å‚ä¸æ’åæ¥å£"><a href="#1ã€2-å‰ç«¯è°ƒç”¨å‚ä¸æ’åæ¥å£" class="headerlink" title="1ã€2  å‰ç«¯è°ƒç”¨å‚ä¸æ’åæ¥å£"></a>1ã€2  å‰ç«¯è°ƒç”¨å‚ä¸æ’åæ¥å£</h2><p>ã€€ã€€æ–°çš„å•†å“å‚ä¸æ’åæ¥å£ï¼Œå¯ä»¥æ”¾åœ¨å‰ç«¯çš„å•†å“è¯¦æƒ…é¡µé¢(item.vue)çš„mountedé’©å­ä¸­ï¼Œè¿™æ ·æ¯æ¬¡è¿›å…¥è¯¦æƒ…é¡µï¼Œéƒ½å¯ä»¥ä¸ºè¯¥å•†å“å¢åŠ ä¸€æ¬¡è®¿é—®é‡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">  </span><br><span class="line">  mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è·å–è¯·æ±‚è¯¦æƒ…ä¿¡æ¯çš„å•†å“id</span></span><br><span class="line">    <span class="keyword">this</span>.gid = <span class="keyword">this</span>.$route.query.gid;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å¢åŠ è®¿é—®æ¥å£</span></span><br><span class="line">    <span class="keyword">this</span>.add_rank();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// è®¿é—®ä¸€æ¬¡å¢åŠ ä¸€æ¬¡è®¿é—®æ•°</span></span><br><span class="line">	add_rank() &#123;</span><br><span class="line">		<span class="keyword">this</span>.axios(&#123;</span><br><span class="line">			url: config[<span class="string">'baseurl'</span>] + <span class="string">'goodsclick/'</span>,</span><br><span class="line">			params: &#123;</span><br><span class="line">				gid: <span class="keyword">this</span>.gid</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;).then(<span class="function"><span class="params">resp</span> =&gt;</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(<span class="string">"å·å·+1"</span>)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€æ’è¡Œæ¦œæ•°æ®è¿›è¡Œå±•ç¤ºæ¥å£åŠå®šä¹‰å·¥å…·æ–¹æ³•"><a href="#2ã€æ’è¡Œæ¦œæ•°æ®è¿›è¡Œå±•ç¤ºæ¥å£åŠå®šä¹‰å·¥å…·æ–¹æ³•" class="headerlink" title="2ã€æ’è¡Œæ¦œæ•°æ®è¿›è¡Œå±•ç¤ºæ¥å£åŠå®šä¹‰å·¥å…·æ–¹æ³•"></a>2ã€æ’è¡Œæ¦œæ•°æ®è¿›è¡Œå±•ç¤ºæ¥å£åŠå®šä¹‰å·¥å…·æ–¹æ³•</h2><p>ã€€ã€€æ¥å£ä½œç”¨ï¼š<br>ã€€ã€€ã€€ã€€å°†è·å–åˆ°çš„æ•°æ®è¿”å›ï¼Œç”±å‰ç«¯è·å–åˆ°åè¿›è¡Œå±•ç¤º<br>ã€€ã€€å·¥å…·çš„ä½œç”¨ï¼š<br>ã€€ã€€ã€€ã€€è¯¥å·¥å…·æ–¹æ³•ç”¨æ¥è·å–æ’è¡Œæ¦œå‰Nåçš„æ•°æ®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å·¥å…·æ–¹æ³•ï¼Œè·å–å‰Nåçš„æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_top_n</span><span class="params">(num)</span>:</span></span><br><span class="line">    <span class="comment"># è·å–redisä¸­çš„æ•°æ®</span></span><br><span class="line">    goods_click = r.zrange(<span class="string">"good_rank"</span>,<span class="number">0</span>,<span class="number">-1</span>,desc=<span class="literal">True</span>,withscores=<span class="literal">True</span>)[:num]</span><br><span class="line">    <span class="comment"># è·å–mysqlä¸­æ•°æ®</span></span><br><span class="line">    goods = Goods.objects.in_bulk([int(item[<span class="number">0</span>]) <span class="keyword">for</span> item <span class="keyword">in</span> goods_click])</span><br><span class="line">    <span class="comment"># åˆå¹¶æ“ä½œ</span></span><br><span class="line">    resp = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> goods_click:</span><br><span class="line">        <span class="comment"># éå†åˆ—è¡¨</span></span><br><span class="line">        <span class="comment"># æ•è·å¼‚å¸¸ï¼Œé˜²æ­¢mysqlå’Œredisæ•°æ®ä¸åŒæ­¥é—®é¢˜</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp.append(&#123;int(item[<span class="number">1</span>]): goods[int(item[<span class="number">0</span>])]&#125;)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> resp</span><br><span class="line"></span><br><span class="line"><span class="comment"># å•†å“æ’è¡Œæ¦œæ•°æ®è§†å›¾</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GoodRank</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="comment"># è·å–æ’åå‰10çš„æ•°æ®</span></span><br><span class="line">        get_resp = get_top_n(<span class="number">10</span>)</span><br><span class="line">        resp = []</span><br><span class="line">        <span class="comment"># éå†è¿›è¡Œåºåˆ—åŒ–</span></span><br><span class="line">        <span class="keyword">for</span> dic <span class="keyword">in</span> get_resp:</span><br><span class="line">            <span class="keyword">for</span> k,v <span class="keyword">in</span> dic.items():</span><br><span class="line">                <span class="comment"># åºåˆ—åŒ–</span></span><br><span class="line">                data = GoodsSer(v).data</span><br><span class="line">                <span class="comment"># å°†å•†å“ç‚¹å‡»æ•°é™„åŠ åˆ°å•†å“åºåˆ—åŒ–æ•°æ®ä¸­</span></span><br><span class="line">                data[<span class="string">'clicks'</span>] = k</span><br><span class="line">                resp.append(data)</span><br><span class="line">        <span class="comment"># è¿”å›</span></span><br><span class="line">        <span class="keyword">return</span> Response(resp)</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€ä»Šå¤©å†™å•†å“æ’è¡Œæ¦œé‡åˆ°çš„bug"><a href="#3ã€ä»Šå¤©å†™å•†å“æ’è¡Œæ¦œé‡åˆ°çš„bug" class="headerlink" title="3ã€ä»Šå¤©å†™å•†å“æ’è¡Œæ¦œé‡åˆ°çš„bug"></a>3ã€ä»Šå¤©å†™å•†å“æ’è¡Œæ¦œé‡åˆ°çš„bug</h2><p>ã€€ã€€ä»Šå¤©å¥½åƒå…¶å®ƒåŒå­¦é‡åˆ°äº†ä¸åŒçš„é—®é¢˜ï¼Œ<br>æœ‰ORMæ¡†æ¶æŠ¥é”™çš„(å¸è½½ORMæ¡†æ¶åé‡æ–°å®‰è£…ï¼Œé—®é¢˜è§£å†³)ï¼Œ<br>ä¹Ÿæœ‰å› ä¸ºæŸ¥æ‰¾çš„å•†å“ä¸å­˜åœ¨æŠ¥é”™çš„(åœ¨å·¥å…·æ–¹æ³•çš„éå†ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæ•è·å¼‚å¸¸çš„åŠŸèƒ½ï¼Œé¿å…å› ä¸ºå•†å“ä¸å­˜åœ¨è€ŒæŠ¥é”™)<br>è€Œæˆ‘æ‰€é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œè·å–åˆ°çš„æ’è¡Œæ¦œï¼Œå…¨éƒ¨ä¸ºåŒä¸€å•†å“ï¼Œåªæ˜¯ç‚¹å‡»é‡ä¸åŒï¼Œç»ä¸è€å¸ˆä»£ç è¿›è¡Œæ’é™¤ï¼Œå‘ç°é—®é¢˜å‡ºç°åœ¨å·¥å…·æ–¹æ³•ä¸­</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨å·¥å…·æ–¹æ³•ä¸­ï¼Œå‘respä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œæˆ‘å°†goodsçš„å€¼å›ºå®šæˆäº†ä¸€ä¸ªå•†å“</span></span><br><span class="line">resp.append(&#123;int(item[<span class="number">1</span>]): goods[int(<span class="number">1</span>)]&#125;)</span><br><span class="line"><span class="comment"># æ­£ç¡®ä¸ºï¼šï¼š</span></span><br><span class="line">resp.append(&#123;int(item[<span class="number">1</span>]): goods[int(item[<span class="number">0</span>])]&#125;)</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Redis</tag>
        <tag>æ’è¡Œæ¦œ</tag>
      </tags>
  </entry>
  <entry>
    <title>å›½é™…åŒ–è¯­è¨€æ“ä½œ</title>
    <url>/blog/Vue/Vue_id_11.html</url>
    <content><![CDATA[<p>ã€€ã€€å¥½è®°æ€§ä¸å¦‚ä¸€é¢—çƒ‚ç¬”å¤´ï¼Œå¤äººè¯šä¸æ¬ºæˆ‘ä¹Ÿ<br>ä¹‹å‰ä¸€ç›´æ²¡æœ‰å†™ç¬”è®°ï¼Œä»è€Œè¯¾å ‚ä¸Šæœ‰äº›bugéƒ½å·®ä¸å¤šå¿˜è®°äº†ï¼Œä»ä»Šå¤©å¼€å§‹ï¼Œæ¯å¤©ä¸€è®°</p>
<a id="more"></a>

<p>é¦–å…ˆè¿˜æ˜¯è¦å…ˆå°†ä¸€äº›æ²¡æœ‰å¿˜è®°çš„bugå†™ä¸‹æ¥</p>
<h2 id="1ã€å›½é™…åŒ–è¯­è¨€æ“ä½œ"><a href="#1ã€å›½é™…åŒ–è¯­è¨€æ“ä½œ" class="headerlink" title="1ã€å›½é™…åŒ–è¯­è¨€æ“ä½œ"></a>1ã€å›½é™…åŒ–è¯­è¨€æ“ä½œ</h2><p>ã€€ã€€è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æŸ¥çœ‹å½“å‰æµè§ˆå™¨é»˜è®¤æ‰€ä½¿ç”¨çš„è¯­è¨€ç§ç±»<br>ã€€ã€€åœ¨ç½‘é¡µä¸­æŒ‰F12ï¼Œæ‰“å¼€Consoleæ§åˆ¶å°ï¼Œå¯ä»¥é€‰æ‹©å°†å†…å®¹æ¸…ç©ºï¼Œç„¶ååœ¨æ§åˆ¶å°è¾“å…¥æŸ¥è¯¢è¯­æ³•ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">window</span><span class="selector-class">.navigator</span><span class="selector-class">.language</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æœ‰äº†è¿™ä¸ªå‘½ä»¤ï¼Œä½ å¯ä»¥åœ¨å†™é¡¹ç›®æ—¶å…ˆè·å–æµè§ˆå™¨è¯­è¨€ï¼Œè®©é¡¹ç›®é»˜è®¤è¯­è¨€ç›´æ¥åŒ¹é…æµè§ˆå™¨è¯­è¨€ï¼Œè¿›è¡Œé€‰æ‹©æ‰€è¦æ˜¾ç¤ºçš„è¯­è¨€</p>
<h2 id="1ã€1-åšå›½é™…åŒ–è¯­è¨€æ“ä½œæ—¶ï¼Œé¦–å…ˆè¦å®‰è£…å›½é™…åŒ–ç»„ä»¶"><a href="#1ã€1-åšå›½é™…åŒ–è¯­è¨€æ“ä½œæ—¶ï¼Œé¦–å…ˆè¦å®‰è£…å›½é™…åŒ–ç»„ä»¶" class="headerlink" title="1ã€1  åšå›½é™…åŒ–è¯­è¨€æ“ä½œæ—¶ï¼Œé¦–å…ˆè¦å®‰è£…å›½é™…åŒ–ç»„ä»¶"></a>1ã€1  åšå›½é™…åŒ–è¯­è¨€æ“ä½œæ—¶ï¼Œé¦–å…ˆè¦å®‰è£…å›½é™…åŒ–ç»„ä»¶</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">npm</span> <span class="selector-tag">install</span> <span class="selector-tag">vue-i18n</span> <span class="selector-tag">--save</span></span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€2-ç„¶ååœ¨main-jså…¥å£ä¸­å¯¼å…¥ä½¿ç”¨"><a href="#1ã€2-ç„¶ååœ¨main-jså…¥å£ä¸­å¯¼å…¥ä½¿ç”¨" class="headerlink" title="1ã€2  ç„¶ååœ¨main.jså…¥å£ä¸­å¯¼å…¥ä½¿ç”¨"></a>1ã€2  ç„¶ååœ¨main.jså…¥å£ä¸­å¯¼å…¥ä½¿ç”¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line">// å¼•å…¥å›½é™…åŒ–ç»„ä»¶</span><br><span class="line">import VueI18n from 'vue-i18n';</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">Vue</span><span class="selector-class">.use</span>(<span class="selector-tag">VueI18n</span>);</span><br><span class="line">// è°ƒç”¨è¯­è¨€åŒ…</span><br><span class="line">const i18n = new VueI18n(&#123;</span><br><span class="line">  //é»˜è®¤è¯­è¨€åŒ…(è®¿é—®ç½‘é¡µæ—¶å…ˆåˆ¤æ–­æ‰€ä½¿ç”¨çš„è¯­è¨€ï¼Œç„¶åå°†ä»–å†™å…¥åˆ°webStorageä¸­ï¼Œåœ¨å…¥å£ç›´æ¥è¿›è¡Œè·å–)</span><br><span class="line">  <span class="selector-tag">locale</span>: <span class="selector-tag">localStorage</span><span class="selector-attr">[<span class="string">'locale'</span>]</span>,</span><br><span class="line">  // é»˜è®¤ä½¿ç”¨ä¸­æ–‡</span><br><span class="line">  // locale: 'zh',</span><br><span class="line">  <span class="selector-tag">messages</span>: &#123;</span><br><span class="line">    'zh': require('./lang/zh'),</span><br><span class="line">    'en': require('./lang/en'),</span><br><span class="line">  &#125;,</span><br><span class="line">  silentTranslationWarn: true,  // å¯ä»¥å»æ‰Consoleæ§åˆ¶å°ä¸­çš„è­¦å‘Š</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">new</span> <span class="selector-tag">Vue</span>(&#123;</span><br><span class="line">  // è£…è½½è¯­è¨€åŒ…</span><br><span class="line">  <span class="selector-tag">i18n</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€3-ç„¶ååˆ†åˆ«åˆ›å»ºzh-js-ä¸­æ–‡-è¯­è¨€åŒ…åŠen-js-è‹±æ–‡-è¯­è¨€åŒ…-å…¶å®ƒè¯­è¨€æ“ä½œä¸€æ ·"><a href="#1ã€3-ç„¶ååˆ†åˆ«åˆ›å»ºzh-js-ä¸­æ–‡-è¯­è¨€åŒ…åŠen-js-è‹±æ–‡-è¯­è¨€åŒ…-å…¶å®ƒè¯­è¨€æ“ä½œä¸€æ ·" class="headerlink" title="1ã€3  ç„¶ååˆ†åˆ«åˆ›å»ºzh.js(ä¸­æ–‡)è¯­è¨€åŒ…åŠen.js(è‹±æ–‡)è¯­è¨€åŒ…(å…¶å®ƒè¯­è¨€æ“ä½œä¸€æ ·)"></a>1ã€3  ç„¶ååˆ†åˆ«åˆ›å»ºzh.js(ä¸­æ–‡)è¯­è¨€åŒ…åŠen.js(è‹±æ–‡)è¯­è¨€åŒ…(å…¶å®ƒè¯­è¨€æ“ä½œä¸€æ ·)</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">zh</span><span class="selector-class">.js</span> æ–‡ä»¶</span><br><span class="line">export const m = &#123;</span><br><span class="line">  chinese: 'ä¸­æ–‡',</span><br><span class="line">  english: 'è‹±æ–‡',</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">en</span><span class="selector-class">.js</span>  æ–‡ä»¶</span><br><span class="line">export const m = &#123;</span><br><span class="line">  chinese: 'Chinese',</span><br><span class="line">  english: 'English',</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€4-åœ¨ç½‘é¡µä¸­å¼•å…¥ä½¿ç”¨æ ¼å¼"><a href="#1ã€4-åœ¨ç½‘é¡µä¸­å¼•å…¥ä½¿ç”¨æ ¼å¼" class="headerlink" title="1ã€4  åœ¨ç½‘é¡µä¸­å¼•å…¥ä½¿ç”¨æ ¼å¼"></a>1ã€4  åœ¨ç½‘é¡µä¸­å¼•å…¥ä½¿ç”¨æ ¼å¼</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å›½é™…åŒ–è¯­è¨€å¼€å…³ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h-switch</span> <span class="attr">v-model</span>=<span class="string">"lang"</span> @<span class="attr">change</span>=<span class="string">"lang_change"</span>&gt;</span>&#123;&#123; $t('m.chinese') &#125;&#125;/&#123;&#123; $t('m.english') &#125;&#125;<span class="tag">&lt;/<span class="name">h-switch</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="1ã€5-å›½é™…åŒ–è¯­è¨€æ‰€é‡åˆ°çš„å‘"><a href="#1ã€5-å›½é™…åŒ–è¯­è¨€æ‰€é‡åˆ°çš„å‘" class="headerlink" title="1ã€5  å›½é™…åŒ–è¯­è¨€æ‰€é‡åˆ°çš„å‘"></a>1ã€5  å›½é™…åŒ–è¯­è¨€æ‰€é‡åˆ°çš„å‘</h2><p>ã€€ã€€å›½é™…åŒ–è¯­è¨€jsåŒ…çš„åç§°å¹¶ä¸æ˜¯å¯ä»¥éšä¾¿å–çš„ï¼Œè¦æ ¹æ®è¯­è¨€ç§ç±»æ¥å‘½å<br>å°±æ¯”å¦‚å½“æ—¶è¯¾å ‚åˆ›å»ºä¸­æ–‡jsè¯­è¨€åŒ…æ—¶ï¼Œå‘½åä¸ºcn.jsï¼Œè¿™å¯¼è‡´äº†è¯­è¨€åˆ‡æ¢æ—¶å‡ºç°ä¹±ç çš„æƒ…å†µï¼Œå½“ç„¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰éƒ½æ˜¾ç¤ºä¹±ç ï¼Œ<br>ä¸ªäººç†è§£ï¼šä¹±ç åŸå› å¯èƒ½æ˜¯è·Ÿä¸€äº›ç¬¬ä¸‰æ–¹ç»„ä»¶äº§ç”Ÿè¯­è¨€å†²çªè€Œå¯¼è‡´çš„ï¼Œå°±æ¯”å¦‚å½“æ—¶HeyUIä¸­çš„åˆ†é¡µå™¨æ˜¾ç¤ºä¹±ç ï¼Œè€Œå…¶å®ƒåœ°æ–¹å¹¶æ²¡æœ‰ä¹±ç ï¼Œ<br>ä¹Ÿå¯èƒ½æ˜¯ä¸ªäººæœªè¿›è¡Œå…¨é¢çš„å®éªŒï¼Œæ‰€ä»¥ä¸çŸ¥é“å§ï¼Œå“ˆå“ˆ</p>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>ã€€ã€€ç°åœ¨åšé¡¹ç›®åŸºæœ¬ä¸Šéƒ½ä¼šæ¶‰åŠåˆ°å›½é™…åŒ–è¯­è¨€æ“ä½œï¼Œæ‰€ä»¥ï¼Œåœ¨å†™jsè¯­è¨€åŒ…æ—¶ï¼Œè¯·åŠ¡å¿…æŸ¥æ¸…æ¥šå„ç§è¯­è¨€çš„å‘½åè§„èŒƒï¼Œä»¥å…å‡ºç°ä¹±ç æƒ…å†µ</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>å›½é™…åŒ–è¯­è¨€æ“ä½œ</tag>
      </tags>
  </entry>
  <entry>
    <title>å•†å“æ£€ç´¢æ™ºèƒ½æç¤ºåŠŸèƒ½</title>
    <url>/blog/Django/Django_id_01.html</url>
    <content><![CDATA[<p>ã€€ã€€ä»Šå¤©ä¸»è¦åšçš„æ˜¯å•†å“çš„<strong>æ£€ç´¢åŠŸèƒ½</strong>ï¼Œå…¶å®æ£€ç´¢åŠŸèƒ½ä½ å¯ä»¥ç›´æ¥ç†è§£ä¸º<strong>æœç´¢åŠŸèƒ½</strong>ï¼Œè€Œåƒæˆ‘ä»¬åœ¨æ·˜å®æˆ–è€…äº¬ä¸œç­‰ç­‰æœç´¢éœ€è¦è´­ä¹°çš„ä¸œè¥¿æ—¶ï¼Œè¿˜æœ‰æˆ‘ä»¬åœ¨ç™¾åº¦æœç´¢é—®é¢˜æ—¶ï¼Œ<br>éƒ½ä¼šæ ¹æ®ä½ è¾“å…¥çš„å†…å®¹ï¼Œæ¥ä¸ºä½ æ¨èç›¸å…³çš„å•†å“æˆ–è€…é—®é¢˜ï¼Œè¿™ä¸ªå°±æ˜¯æ™ºèƒ½æç¤ºåŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯åŸºäº<strong>HeyUI</strong>ç¬¬ä¸‰æ–¹åº“<strong>AutoComplete æ¨¡ç³ŠåŒ¹é…</strong>æ¥å®ç°çš„ï¼Œ<a href="https://www.heyui.top/component/data/plugin/autocomplete" target="_blank" rel="noopener">ç‚¹å‡»è·³è½¬</a>åˆ°HeyUI<br>æŸ¥çœ‹æ•ˆæœ</p>
<a id="more"></a>

<h2 id="å®‰è£…æ¨¡å—"><a href="#å®‰è£…æ¨¡å—" class="headerlink" title="å®‰è£…æ¨¡å—"></a>å®‰è£…æ¨¡å—</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">npm install fetch-jsonp --save</span><br></pre></td></tr></table></figure></div>

<h2 id="åœ¨Vueä¸­å¼•å…¥fetch-jsonpæ¨¡å—"><a href="#åœ¨Vueä¸­å¼•å…¥fetch-jsonpæ¨¡å—" class="headerlink" title="åœ¨Vueä¸­å¼•å…¥fetch-jsonpæ¨¡å—"></a>åœ¨Vueä¸­å¼•å…¥fetch-jsonpæ¨¡å—</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¨¡ç³ŠæŸ¥è¯¢æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> jsonp <span class="keyword">from</span> <span class="string">'fetch-jsonp'</span>;</span><br><span class="line"><span class="keyword">const</span> loadData = <span class="function"><span class="keyword">function</span> (<span class="params">filter, callback</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// this ä¸º option é…ç½®</span></span><br><span class="line">        <span class="comment">// this.orgId ä½¿ç”¨ä¼ é€’çš„å‚æ•°è·å–æ•°æ®ï¼Œä¾‹ï¼šæœç´¢æŸå…¬å¸ä¸‹çš„å‘˜å·¥</span></span><br><span class="line">        jsonp(<span class="string">`https://suggest.taobao.com/sug?code=utf-8&amp;q=<span class="subst">$&#123;filter&#125;</span>`</span>)</span><br><span class="line">                .then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">                .then(<span class="function">(<span class="params">d</span>) =&gt;</span> &#123;</span><br><span class="line">                        callback(d.result.map(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">                            <span class="keyword">return</span> r[<span class="number">0</span>];</span><br><span class="line">                        &#125;));</span><br><span class="line">        	&#125;);</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ·»åŠ å˜é‡"><a href="#æ·»åŠ å˜é‡" class="headerlink" title="æ·»åŠ å˜é‡"></a>æ·»åŠ å˜é‡</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                        <span class="comment">// æ¨¡ç³ŠæŸ¥è¯¢å˜é‡</span></span><br><span class="line">                        value: <span class="string">''</span>,</span><br><span class="line">                        param: &#123;</span><br><span class="line">                                orgId: <span class="number">1</span>, <span class="comment">// è‡ªå®šä¹‰å‚æ•°ä¼ é€’</span></span><br><span class="line">                                loadData,</span><br><span class="line">                                minWord: <span class="number">1</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ·»åŠ æ–¹æ³•"><a href="#æ·»åŠ æ–¹æ³•" class="headerlink" title="æ·»åŠ æ–¹æ³•"></a>æ·»åŠ æ–¹æ³•</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">        <span class="comment">// å°†æ•°æ®ä¼ é€’ç»™æ·˜å®(å…³é”®è¯å¹¶æ›´)</span></span><br><span class="line">        onChange(data, trigger) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(data, trigger);</span><br><span class="line">                <span class="comment">// è·³è½¬åˆ°searchæ£€ç´¢é¡µé¢</span></span><br><span class="line">                <span class="keyword">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">'/search'</span>, <span class="attr">query</span>: &#123; <span class="attr">word</span>: data.value &#125; &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="æ·»åŠ æ™ºèƒ½æç¤ºæ ‡ç­¾"><a href="#æ·»åŠ æ™ºèƒ½æç¤ºæ ‡ç­¾" class="headerlink" title="æ·»åŠ æ™ºèƒ½æç¤ºæ ‡ç­¾"></a>æ·»åŠ æ™ºèƒ½æç¤ºæ ‡ç­¾</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">AutoComplete</span> <span class="attr">:option</span>=<span class="string">"param"</span> <span class="attr">v-model</span>=<span class="string">"value"</span> @<span class="attr">change</span>=<span class="string">"onChange"</span> <span class="attr">type</span>=<span class="string">"title"</span>&gt;</span><span class="tag">&lt;/<span class="name">AutoComplete</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>æ›´å¤šå…³äºAutoComplete æ¨¡ç³ŠåŒ¹é…çš„å‚æ•°ã€äº‹ä»¶åŠæ–¹æ³•ï¼Œå¯å‚è€ƒ<a href="https://www.heyui.top/component/data/plugin/autocomplete" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></strong></p>
<h2 id="ä»Šå¤©æ‰€è¸©çš„å‘"><a href="#ä»Šå¤©æ‰€è¸©çš„å‘" class="headerlink" title="ä»Šå¤©æ‰€è¸©çš„å‘"></a>ä»Šå¤©æ‰€è¸©çš„å‘</h2><p>ã€€ã€€1ã€åœ¨æœç´¢ç»“æœå±•ç¤ºé¡µé¢ï¼Œå†æ¬¡è¿›è¡Œæœç´¢æ—¶ï¼Œä¼šå‡ºç°ç½‘é¡µæ— ååº”çš„æƒ…å†µï¼Œè¿™æ˜¯this.$router.push()ç½‘é¡µè·³è½¬çš„ä¸€ä¸ªå¼Šç«¯ï¼Œåœ¨å½“å‰é¡µé¢è·³è½¬åˆ°å½“å‰é¡µé¢æ—¶ï¼Œ<br>å®ƒä¸ä¼šå†å¸®ä½ è¯·æ±‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç›‘å¬å±æ€§æ¥å¸®æˆ‘ä»¬è§£å†³æ­¤é—®é¢˜(è¯¥é—®é¢˜è§£å†³)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// ç›‘å¬å±æ€§</span></span><br><span class="line">watch: &#123;</span><br><span class="line">        $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">            <span class="comment">// å¼ºåˆ·é¡µé¢</span></span><br><span class="line">            <span class="keyword">this</span>.$router.go()</span><br><span class="line">        &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€2ã€å½“ä½ åœ¨æ™ºèƒ½æç¤ºæ¡†ä¸­è¾“å…¥æœç´¢çš„å†…å®¹ï¼ŒæŒ‰Enteré”®ä¹‹åï¼Œæ— æ³•è·å–åˆ°è¾“å…¥çš„å†…å®¹ï¼Œæ­¤é—®é¢˜ç›´æ¥å¯¼è‡´æˆ‘è®¤ä¸ºè·å–çš„æ–¹å¼æœ‰é—®é¢˜ï¼Œä»è€Œè¿›è¡Œäº†å¤šæ¬¡è°ƒè¯•ï¼Œ<br>å¯æ˜¯ä¸ç®¡æˆ‘å¦‚ä½•è°ƒè¯•ï¼Œéƒ½æ— æ³•è·å–åˆ°å€¼(å¾ˆæ— å¥ˆ)ï¼Œåœ¨è¿™æ—¶ï¼Œæˆ‘æ— æ„é—´çš„ä¸€ä¸ªåŠ¨ä½œï¼Œè®©æˆ‘å‘ç°äº†åŸå› ï¼Œ<strong>è¾“å…¥çš„å†…å®¹ï¼Œæ˜¯ä¸ºäº†æ™ºèƒ½æç¤ºè€Œå­˜åœ¨ï¼Œå¹¶ä¸èƒ½åšä¸ºæœç´¢å€¼è¢«è¿”å›ï¼Œ</strong><br><strong>è€Œåªæœ‰é€‰æ‹©æ™ºèƒ½æç¤ºä¸­çš„é€‰é¡¹ï¼Œæ‰ä¼šè¢«å½“åšæœç´¢å€¼è¿”å›</strong>(ä¸€å¥MMPæ¥å‘æ³„ä¸€ä¸‹)(è¯¥é—®é¢˜è§£å†³)</p>
<p>ã€€ã€€3ã€è¿™æ˜¯æ™ºèƒ½æç¤ºçš„ä¸€ä¸ªbugï¼Œå½“ç„¶ï¼Œæˆ–è®¸ä¼šæœ‰äººè¯´ï¼Œè°ä¼šé—²çš„å»è¿™æ ·æ“ä½œï¼Œä½†æ˜¯æˆ‘å°±è¦è¯´ï¼Œå°±å› ä¸ºè¿™ä¸ªï¼Œå®ƒå°±æ˜¯æœ‰é—®é¢˜çš„ï¼Œå°±æ˜¯æœ‰ç¼ºé™·çš„ï¼Œå½“ä½ åœ¨æ™ºèƒ½æ<br>ç¤ºæ¡†ä¸­è¾“å…¥å†…å®¹æ—¶ï¼Œ<strong>æ‰“å­—æ—¶ä¸è¦ç”¨ç©ºæ ¼æ¥ç”Ÿæˆæ–‡å­—ï¼Œç”¨é¼ æ ‡æ¥é€‰æ‹©ä½ è¦è¾“å‡ºçš„å­—</strong>ï¼Œä½ ä¼šå‘ç°ï¼Œæç¤ºæ¡†ä¼šå‘Šè¯‰ä½ <strong>æœªæœç´¢åˆ°ç›¸å…³æ•°æ®</strong>ï¼Œä¹Ÿæˆ–è€…ä¼šåŒ¹é…åˆ°è·Ÿä½ è¾“å…¥<br>çš„å†…å®¹å®Œå…¨ä¸æ­è¾¹çš„æ•°æ®ï¼Œæ‰€ä»¥è¯´ï¼Œæ­¤åŠŸèƒ½çš„bugè¿˜æ˜¯æŒºå¤šçš„ï¼Œå¸Œæœ›HeyUIå®˜æ–¹å¯ä»¥åšçš„è¶Šæ¥è¶Šå¥½å§ï¼Œå¿…å®šæ˜¯å…è´¹çš„ï¼Œå“ˆå“ˆ</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>å•†å“æ£€ç´¢æ™ºèƒ½æç¤º</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueä¸­çš„è‡ªå®šä¹‰è¿‡æ»¤å™¨</title>
    <url>/blog/Vue/Vue_id_07.html</url>
    <content><![CDATA[<p>ã€€ã€€ç°åœ¨å¾ˆå¤šé¡µé¢æ˜¾ç¤ºçš„æ—¶é—´ã€é‡‘é’±ç­‰ç­‰éƒ½éœ€è¦è½¬æ¢æ ¼å¼åå†è¿›è¡Œå±•ç¤ºï¼Œè€Œå¦‚ä½•è¿›è¡Œè½¬æ¢å‘¢ï¼Ÿæˆ‘æƒ³å¾ˆå¤šäººéƒ½æƒ³åˆ°äº†â€”è‡ªå®šä¹‰è¿‡æ»¤å™¨</p>
<a id="more"></a>

<h2 id="ï¼‘ã€è‡ªå®šä¹‰è¿‡æ»¤å™¨"><a href="#ï¼‘ã€è‡ªå®šä¹‰è¿‡æ»¤å™¨" class="headerlink" title="ï¼‘ã€è‡ªå®šä¹‰è¿‡æ»¤å™¨"></a>ï¼‘ã€è‡ªå®šä¹‰è¿‡æ»¤å™¨</h2><p>ã€€ã€€ä»Šå¤©è¯¾å ‚ä¸Šï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªuidè½¬æ¢æˆusernameæ¥å±•ç¤ºçš„ç‚¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in commentlist"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¼•ç”¨è¿‡æ»¤å™¨--myfilter --&gt;</span></span><br><span class="line">        &#123;&#123; item.uid | myfilter &#125;&#125;:&#123;&#123; item.content &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€è¿‡æ»¤å™¨é”™è¯¯å†™æ³•"><a href="#2ã€è¿‡æ»¤å™¨é”™è¯¯å†™æ³•" class="headerlink" title="2ã€è¿‡æ»¤å™¨é”™è¯¯å†™æ³•"></a>2ã€è¿‡æ»¤å™¨é”™è¯¯å†™æ³•</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">  <span class="comment">// è‡ªå®šç”¨æˆ·ä¹‰æ–¹æ³•</span></span><br><span class="line">  user_filter(value) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡key(ç”¨æˆ·id)å–ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.myuser[value]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€è¿‡æ»¤å™¨è¯­æ³•è§„èŒƒ"><a href="#3ã€è¿‡æ»¤å™¨è¯­æ³•è§„èŒƒ" class="headerlink" title="3ã€è¿‡æ»¤å™¨è¯­æ³•è§„èŒƒ"></a>3ã€è¿‡æ»¤å™¨è¯­æ³•è§„èŒƒ</h2><p>ã€€ã€€å½“è¿‡æ»¤å™¨returnç”¨thisè¯­æ³•æ¥å†™æ—¶ï¼ŒConsoleæ§åˆ¶å°ä¼šæŠ¥å‡ºthis is undefinedï¼Œé¡¾åæ€ä¹‰ï¼Œthisæœªå®šä¹‰ï¼Œå› ä¸ºè¿‡æ»¤å™¨ä¸­ä¸æ”¯æŒthisè¯­æ³•<br>ã€€ã€€è¿™æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨mountedè¯·æ±‚ä¸­ï¼Œå…ˆå£°æ˜ä¸€ä¸ªå˜é‡æ¥ä»£æ›¿this</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">mounted: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜å˜é‡</span></span><br><span class="line">  <span class="built_in">window</span>.that = <span class="keyword">this</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€è¿‡æ»¤å™¨æ­£ç¡®å†™æ³•"><a href="#4ã€è¿‡æ»¤å™¨æ­£ç¡®å†™æ³•" class="headerlink" title="4ã€è¿‡æ»¤å™¨æ­£ç¡®å†™æ³•"></a>4ã€è¿‡æ»¤å™¨æ­£ç¡®å†™æ³•</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">  <span class="comment">// è‡ªå®šç”¨æˆ·ä¹‰æ–¹æ³•</span></span><br><span class="line">  user_filter(value) &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡key(ç”¨æˆ·id)å–ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.that.myuser[value]</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>è¿‡æ»¤å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS8æŸ¥çœ‹ç›‘å¬ç«¯å£</title>
    <url>/blog/CentOS/CentOS_id_02.html</url>
    <content><![CDATA[<h4 id="1ã€CentOS-8åœç”¨ã€å¯ç”¨ã€æŸ¥çœ‹å½“å‰å¯ç”¨çš„ç«¯å£"><a href="#1ã€CentOS-8åœç”¨ã€å¯ç”¨ã€æŸ¥çœ‹å½“å‰å¯ç”¨çš„ç«¯å£" class="headerlink" title="1ã€CentOS 8åœç”¨ã€å¯ç”¨ã€æŸ¥çœ‹å½“å‰å¯ç”¨çš„ç«¯å£"></a>1ã€CentOS 8åœç”¨ã€å¯ç”¨ã€æŸ¥çœ‹å½“å‰å¯ç”¨çš„ç«¯å£</h4><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=5672/tcp --permanent   <span class="comment"># å¼€æ”¾5672ç«¯å£</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --zone=public --remove-port=5672/tcp --permanent  <span class="comment">#å…³é—­5672ç«¯å£</span></span><br><span class="line"></span><br><span class="line">firewall-cmd --reload   <span class="comment"># é…ç½®ç«‹å³ç”Ÿæ•ˆ</span></span><br></pre></td></tr></table></figure></div>

<h4 id="2ã€æŸ¥çœ‹é˜²ç«å¢™æ‰€æœ‰å¼€æ”¾çš„ç«¯å£"><a href="#2ã€æŸ¥çœ‹é˜²ç«å¢™æ‰€æœ‰å¼€æ”¾çš„ç«¯å£" class="headerlink" title="2ã€æŸ¥çœ‹é˜²ç«å¢™æ‰€æœ‰å¼€æ”¾çš„ç«¯å£"></a>2ã€æŸ¥çœ‹é˜²ç«å¢™æ‰€æœ‰å¼€æ”¾çš„ç«¯å£</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --list-ports</span><br></pre></td></tr></table></figure></div>

<h4 id="3-ã€å…³é—­é˜²ç«å¢™"><a href="#3-ã€å…³é—­é˜²ç«å¢™" class="headerlink" title="3.ã€å…³é—­é˜²ç«å¢™"></a>3.ã€å…³é—­é˜²ç«å¢™</h4><p>å¦‚æœè¦å¼€æ”¾çš„ç«¯å£å¤ªå¤šï¼Œå«Œéº»çƒ¦ï¼Œå¯ä»¥å…³é—­é˜²ç«å¢™ï¼Œå®‰å…¨æ€§è‡ªè¡Œè¯„ä¼°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure></div>

<h4 id="4ã€æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€"><a href="#4ã€æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€" class="headerlink" title="4ã€æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€"></a>4ã€æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">firewall-cmd --state</span><br></pre></td></tr></table></figure></div>

<h4 id="5ã€æŸ¥çœ‹ç›‘å¬çš„ç«¯å£"><a href="#5ã€æŸ¥çœ‹ç›‘å¬çš„ç«¯å£" class="headerlink" title="5ã€æŸ¥çœ‹ç›‘å¬çš„ç«¯å£"></a>5ã€æŸ¥çœ‹ç›‘å¬çš„ç«¯å£</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">netstat -lnpt</span><br></pre></td></tr></table></figure></div>

<p><strong>PS:centos7é»˜è®¤æ²¡æœ‰ netstat å‘½ä»¤ï¼Œéœ€è¦å®‰è£… net-tools å·¥å…·ï¼Œyum install -y net-tools</strong></p>
<h4 id="6ã€æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨"><a href="#6ã€æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨" class="headerlink" title="6ã€æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨"></a>6ã€æ£€æŸ¥ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">netstat -lnpt |grep 5672</span><br></pre></td></tr></table></figure></div>

<h4 id="7ã€æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯"><a href="#7ã€æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯" class="headerlink" title="7ã€æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯"></a>7ã€æŸ¥çœ‹è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">ps 6832</span><br></pre></td></tr></table></figure></div>

<h4 id="8ã€ä¸­æ­¢è¿›ç¨‹"><a href="#8ã€ä¸­æ­¢è¿›ç¨‹" class="headerlink" title="8ã€ä¸­æ­¢è¿›ç¨‹"></a>8ã€ä¸­æ­¢è¿›ç¨‹</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 6832</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu18.04é…ç½®mysql</title>
    <url>/blog/Ubuntu/Ubuntu_id_03.html</url>
    <content><![CDATA[<p>ã€€ã€€è®¾ç½®Ubuntu 18.04ç‰ˆæœ¬ç³»ç»Ÿé…ç½®mysql</p>
<a id="more"></a>

<h2 id="1ã€å®‰è£…mysqlå‘½ä»¤"><a href="#1ã€å®‰è£…mysqlå‘½ä»¤" class="headerlink" title="1ã€å®‰è£…mysqlå‘½ä»¤"></a>1ã€å®‰è£…mysqlå‘½ä»¤</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure></div>

<h2 id="2ã€é…ç½®mysql"><a href="#2ã€é…ç½®mysql" class="headerlink" title="2ã€é…ç½®mysql"></a>2ã€é…ç½®mysql</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo mysql_secure_installation</span><br></pre></td></tr></table></figure></div>

<h2 id="3ã€æ£€æŸ¥mysqlæœåŠ¡çŠ¶æ€"><a href="#3ã€æ£€æŸ¥mysqlæœåŠ¡çŠ¶æ€" class="headerlink" title="3ã€æ£€æŸ¥mysqlæœåŠ¡çŠ¶æ€"></a>3ã€æ£€æŸ¥mysqlæœåŠ¡çŠ¶æ€</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">systemctl status mysql.service</span><br></pre></td></tr></table></figure></div>

<h2 id="4ã€æŸ¥çœ‹åˆå§‹å¯†ç "><a href="#4ã€æŸ¥çœ‹åˆå§‹å¯†ç " class="headerlink" title="4ã€æŸ¥çœ‹åˆå§‹å¯†ç "></a>4ã€æŸ¥çœ‹åˆå§‹å¯†ç </h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo cat /etc/mysql/debian.cnf</span><br></pre></td></tr></table></figure></div>

<h2 id="5ã€å¯åŠ¨mysqlæŠ¥é”™-ERROR-1698-28000-Access-denied-for-user-â€˜rootâ€™-â€™localhost"><a href="#5ã€å¯åŠ¨mysqlæŠ¥é”™-ERROR-1698-28000-Access-denied-for-user-â€˜rootâ€™-â€™localhost" class="headerlink" title="5ã€å¯åŠ¨mysqlæŠ¥é”™ ERROR 1698 (28000): Access denied for user â€˜rootâ€™@â€™localhost"></a>5ã€å¯åŠ¨mysqlæŠ¥é”™ ERROR 1698 (28000): Access denied for user â€˜rootâ€™@â€™localhost</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line"><span class="comment"># æ·»åŠ </span></span><br><span class="line">skip-grant-tables	(è·³è¿‡å¯†ç éªŒè¯)</span><br></pre></td></tr></table></figure></div>

<p>ä¿å­˜:wqï¼Œé€€å‡ºã€‚è¾“å…¥ï¼šservice mysql restartï¼Œé‡æ–°å¯åŠ¨mysql<br>é‡æ–°è¿æ¥mysqlï¼Œæç¤ºéœ€è¦è¾“å…¥å¯†ç æ—¶ï¼Œç›´æ¥æŒ‰å›è½¦é”®è·³è¿‡<br>è¿›å…¥mysqlä¹‹åï¼Œæ‰§è¡Œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">use mysql; ç„¶åæ•²å›è½¦</span><br><span class="line">update user <span class="built_in">set</span> authentication_string=password(â€œä½ çš„å¯†ç â€) <span class="built_in">where</span> user=â€œrootâ€ ç„¶åæ•²å›è½¦</span><br><span class="line">flush privileges ç„¶åæ•²å›è½¦</span><br><span class="line">select user,plugin from user;	<span class="comment"># çœ‹åˆ°rootåé¢å¯¹åº”çš„æ˜¯auth_socket</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œå‘½ä»¤ä¿®æ”¹(æ”¹æˆ%åˆ™ä»£è¡¨è®¾ç½®æˆæ‰€æœ‰ä¸»æœºéƒ½å¯ä»¥è¿æ¥)</span></span><br><span class="line">update user <span class="built_in">set</span> authentication_string=password(<span class="string">"xiaojian"</span>),plugin=<span class="string">'%'</span> <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line"><span class="comment"># å¦‚æœä¸Šé¢å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå¯å…ˆæ‰§è¡Œ</span></span><br><span class="line">update user <span class="built_in">set</span> authentication_string=password(<span class="string">"ln122920"</span>),plugin=<span class="string">'mysql_native_password'</span> <span class="built_in">where</span> user=<span class="string">'root'</span></span><br><span class="line"><span class="comment"># å†æ‰§è¡Œ</span></span><br><span class="line">update user <span class="built_in">set</span> plugin=<span class="string">'mysql_native_password'</span> <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line"><span class="comment"># å†æ¬¡æŸ¥çœ‹</span></span><br><span class="line">select user,plugin from user	<span class="comment"># å¦‚æœæ”¹æ‰äº†ï¼Œå°±æˆåŠŸäº†</span></span><br></pre></td></tr></table></figure></div>

<h2 id="6ã€é€€å‡ºmysqlï¼Œé‡æ–°è¿›å…¥é…ç½®æ–‡ä»¶"><a href="#6ã€é€€å‡ºmysqlï¼Œé‡æ–°è¿›å…¥é…ç½®æ–‡ä»¶" class="headerlink" title="6ã€é€€å‡ºmysqlï¼Œé‡æ–°è¿›å…¥é…ç½®æ–‡ä»¶"></a>6ã€é€€å‡ºmysqlï¼Œé‡æ–°è¿›å…¥é…ç½®æ–‡ä»¶</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br><span class="line"><span class="comment"># å°†åœ¨ç¬¬å››æ­¥æ·»åŠ çš„å†…å®¹åˆ é™¤æ‰æˆ–æ³¨é‡Šæ‰</span></span><br><span class="line">skip-grant-tables	(è·³è¿‡å¯†ç éªŒè¯)</span><br></pre></td></tr></table></figure></div>

<p>ä¿å­˜:wqï¼Œé€€å‡ºã€‚</p>
<p><strong>å†æ¬¡å¯åŠ¨mysqlæ—¶ï¼Œä¸ä¼šå†æŠ¥é”™è¯¯</strong></p>
]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu18.04ç³»ç»Ÿä¸€äº›å¸¸è§é—®é¢˜</title>
    <url>/blog/Ubuntu/Ubuntu_id_02.html</url>
    <content><![CDATA[<p>ã€€ã€€Ubuntu 18.04ç‰ˆæœ¬ç³»ç»Ÿçš„ä¸€äº›å¸¸è§é—®é¢˜</p>
<a id="more"></a>

<h2 id="ä¸€ã€å®‰è£…vimå‘½ä»¤æ—¶çš„é—®é¢˜"><a href="#ä¸€ã€å®‰è£…vimå‘½ä»¤æ—¶çš„é—®é¢˜" class="headerlink" title="ä¸€ã€å®‰è£…vimå‘½ä»¤æ—¶çš„é—®é¢˜"></a>ä¸€ã€å®‰è£…vimå‘½ä»¤æ—¶çš„é—®é¢˜</h2><p><strong>æç¤ºæ‰¾ä¸åˆ°å®‰è£…åŒ…ï¼Œæˆ–å®‰è£…åŒ…å·²è¢«å ç”¨</strong></p>
<p>è®¾ç½®å›½å†…åŸã€å¯è§£å†³æ¬¡é—®é¢˜<a href="/2020/04/23/Ubuntu18.04è®¾ç½®å›½å†…æº/">Ubuntuè®¾ç½®å›½å†…åŸ</a></p>
]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu18.04è®¾ç½®åˆ†è¾¨ç‡</title>
    <url>/blog/Ubuntu/Ubuntu_id_04.html</url>
    <content><![CDATA[<p>ã€€ã€€è®¾ç½®Ubuntu 18.04ç‰ˆæœ¬ç³»ç»Ÿçš„åˆ†è¾¨ç‡ä¸º1920x1080</p>
<a id="more"></a>

<p>1ã€æ‰“å¼€ç»ˆç«¯å‘½ä»¤çª—å£</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">Ctrl + Alt + T</span><br></pre></td></tr></table></figure></div>

<p>2ã€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo xrandr --newmode <span class="string">"1920x1080_60.00"</span> 173.00 1920 2048 2248 2576 1080 1083 1088 1120 -hsync +vsync</span><br><span class="line">sudo xrandr --addmode Virtual1 <span class="string">"1920x1080_60.00"</span>	<span class="comment"># Virtual1æ˜¯Ubuntuç³»ç»Ÿçš„æ˜¾ç¤ºå™¨åç§°</span></span><br><span class="line"><span class="comment"># æ­¤æ—¶ç³»ç»Ÿè®¾ç½®é‡Œå·²ç»æœ‰ 1920*1080 çš„åˆ†è¾¨ç‡é€‰é¡¹</span></span><br></pre></td></tr></table></figure></div>

<p>3ã€æ‰“å¼€å¼€æœºå¯åŠ¨é…ç½®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="VIM"><figure class="iseeu highlight /vim"><table><tr><td class="code"><pre><span class="line">sudo <span class="keyword">vim</span> /etc/<span class="keyword">profile</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æŒ‰é”® i è¿›å…¥ç¼–è¾‘æ¨¡å¼, æŒ‰ç®­å¤´ä¸‹é”®æŠŠå…‰æ ‡ç§»åŠ¨åˆ°æ–‡ä»¶æœ€åº•éƒ¨æ·»åŠ ä¸‹é¢çš„å†…å®¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">xrandr --newmode <span class="string">"1920x1080_60.00"</span> 173.00 1920 2048 2248 2576 1080 1083 1088 1120 -hsync +vsync</span><br><span class="line">xrandr --addmode Virtual1 <span class="string">"1920x1080_60.00"</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æŒ‰é”® Esc ç„¶åè¾“å…¥ :wq å›è½¦, ä¿å­˜é€€å‡º.</p>
<p>ã€€ã€€é‡å¯</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æœåŠ¡å™¨é…ç½®redisä¸»ä»ä¸å“¨å…µ</title>
    <url>/blog/CentOS/CentOS_id_03.html</url>
    <content><![CDATA[<h2 id="è¿™æ¬¡æ˜¯é…ç½®redisä¸»ä»"><a href="#è¿™æ¬¡æ˜¯é…ç½®redisä¸»ä»" class="headerlink" title="è¿™æ¬¡æ˜¯é…ç½®redisä¸»ä»"></a>è¿™æ¬¡æ˜¯é…ç½®redisä¸»ä»</h2><a id="more"></a>

<ol>
<li><p>ä¸»redisæ•°æ®åº“é…ç½®æ–¹å¼çœç•¥,å› ä¸ºåªæ˜¯æ­£å¸¸çš„é…ç½®rediså¤–ç½‘è®¿é—®çš„æµç¨‹,  <del>å¹¶ä¸æ˜¯ä½œè€…å¿˜äº†</del></p>
</li>
<li><p>åœ¨å®Œæˆä¸Šè¿°æ“ä½œä¹‹å,ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">redis-server info</span><br></pre></td></tr></table></figure></div>

<p>å¯ä»¥æŸ¥çœ‹å½“å‰redisè¿è¡ŒçŠ¶å†µ,replicationä¸­æ˜¾ç¤ºçš„roleä¸ºå½“å‰æ•°æ®åº“èº«ä»½,ä¸»æ•°æ®åº“æ˜¾ç¤ºmaster,å³ä¸ºå¯åŠ¨é…ç½®ä¸»æ•°æ®åº“æˆåŠŸ</p>
</li>
<li><p>é…ç½®ä»æ•°æ®åº“</p>
<ul>
<li><p>è¿™é‡Œçš„é…ç½®ä¸åŒäºä¸»æ•°æ®åº“,å¹¶ä¸éœ€è¦å¤ªè¿‡äºå¤æ‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">protected-mode no # æŠŠä¿æŠ¤æ¨¡å¼è®¾ç½®ä¸ºnoï¼Œå¦‚æœè¿™é‡Œæ˜¯yesï¼Œé‚£ä¹ˆä¿®æ”¹ä¸ºno</span><br><span class="line">port 6379  #ç«¯å£å·6379ä¿æŒä¸å˜</span><br><span class="line">daemonize no  #è¿™é‡Œä¿®æ”¹ä¸ºnoï¼Œè¡¨ç¤ºredisæœåŠ¡å¯ä»¥åå°è¿è¡Œ</span><br><span class="line">slaveof 192.168.124.20 6379  #ç”±äºæ˜¯ä»æœåŠ¡å™¨ï¼Œæ‰€ä»¥è¦é…ç½®å…¶ä¸»æœåŠ¡å™¨ï¼Œé…ç½®æ ¼å¼ï¼šslaveof  ä¸»IP  ä¸»ç«¯å£å·</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>é…ç½®å¥½ä¹‹å,å¯åŠ¨ä»æ•°æ®åº“</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AXAPTA"><figure class="iseeu highlight /axapta"><table><tr><td class="code"><pre><span class="line">redis-<span class="keyword">server</span> redis.conf</span><br><span class="line"><span class="meta"># è¿™é‡Œå¿…é¡»æŒ‡å®šæˆ‘ä»¬è®¾å®šçš„confæ–‡ä»¶è¿›è¡Œå¯åŠ¨,å¦åˆ™ä¹‹å‰çš„ä¿®æ”¹å°†ä¸ç”Ÿæ•ˆ</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>å†æ¬¡è¾“å…¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="code"><pre><span class="line">redis-<span class="keyword">server</span> <span class="keyword">info</span></span><br></pre></td></tr></table></figure></div>

<p>æŸ¥çœ‹,å¯çœ‹åˆ°æ˜¾ç¤ºroleä¸ºslave</p>
</li>
</ul>
</li>
</ol>
<h3 id="è®¾ç½®å“¨å…µé›†ç¾¤çš„æ–¹å¼"><a href="#è®¾ç½®å“¨å…µé›†ç¾¤çš„æ–¹å¼" class="headerlink" title="è®¾ç½®å“¨å…µé›†ç¾¤çš„æ–¹å¼"></a>è®¾ç½®å“¨å…µé›†ç¾¤çš„æ–¹å¼</h3><ol>
<li><p>åœ¨redisæ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶sentinel.conf</p>
<ul>
<li><pre><code># å½“å‰SentinelæœåŠ¡è¿è¡Œçš„ç«¯å£
port 26379
# ä¿æŠ¤æ¨¡å¼ no
protected-mode no

# Sentinelå»ç›‘è§†ä¸€ä¸ªåä¸ºmymasterçš„ä¸»rediså®ä¾‹ï¼Œ
# è¿™ä¸ªä¸»å®ä¾‹çš„IPåœ°å€ä¸ºæœ¬æœºåœ°å€127.0.0.1ï¼Œç«¯å£å·ä¸º6379ï¼Œ
# è€Œå°†è¿™ä¸ªä¸»å®ä¾‹åˆ¤æ–­ä¸ºå¤±æ•ˆè‡³å°‘éœ€è¦2ä¸ªSentinelè¿›ç¨‹çš„åŒæ„ï¼Œåªè¦åŒæ„Sentinelçš„æ•°é‡ä¸è¾¾æ ‡ï¼Œè‡ªåŠ¨failoverå°±ä¸ä¼šæ‰§è¡Œ
# å¦‚æœæä¾›å¤–ç½‘è®¿é—®ï¼Œå®ä¾‹çš„IPåœ°å€ä¸ºæœåŠ¡å™¨åœ°å€10.0.128.144ã€‚
sentinel myid ca7a3602308b20f77464a51bd29e26e48055fd1a

# down-after-millisecondsæŒ‡å®šäº†Sentinelè®¤ä¸ºRediså®ä¾‹å·²ç»å¤±æ•ˆæ‰€éœ€çš„æ¯«ç§’æ•°ã€‚
# å½“å®ä¾‹è¶…è¿‡è¯¥æ—¶é—´æ²¡æœ‰è¿”å›PINGï¼Œæˆ–è€…ç›´æ¥è¿”å›é”™è¯¯ï¼Œé‚£ä¹ˆSentinelå°†è¿™ä¸ªå®ä¾‹æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ã€‚
# åªæœ‰ä¸€ä¸ªSentinelè¿›ç¨‹å°†å®ä¾‹æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿å¹¶ä¸ä¸€å®šä¼šå¼•èµ·å®ä¾‹çš„è‡ªåŠ¨æ•…éšœè¿ç§»ï¼šåªæœ‰åœ¨è¶³å¤Ÿæ•°é‡çš„Sentineléƒ½å°†ä¸€ä¸ªå®ä¾‹æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ä¹‹åï¼Œå®ä¾‹æ‰ä¼šè¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ã€‚
# è¿™æ—¶è‡ªåŠ¨æ•…éšœè¿ç§»æ‰ä¼šæ‰§è¡Œ
sentinel deny-scripts-reconfig yes

# parallel-syncsæŒ‡å®šäº†åœ¨æ‰§è¡Œæ•…éšœè½¬ç§»æ—¶ï¼Œæœ€å¤šå¯ä»¥æœ‰å¤šå°‘ä¸ªä»Rediså®ä¾‹åœ¨åŒæ­¥æ–°çš„ä¸»å®ä¾‹ï¼Œ
# åœ¨ä»Rediså®ä¾‹è¾ƒå¤šçš„æƒ…å†µä¸‹è¿™ä¸ªæ•°å­—è¶Šå°ï¼ŒåŒæ­¥çš„æ—¶é—´è¶Šé•¿ï¼Œå®Œæˆæ•…éšœè½¬ç§»æ‰€éœ€çš„æ—¶é—´å°±è¶Šé•¿
sentinel monitor mymaster 120.26.175.79 6379 2

# å¦‚æœåœ¨failover-timeoutè¯¥æ—¶é—´ï¼ˆmsï¼‰å†…æœªèƒ½å®Œæˆfailoveræ“ä½œï¼Œåˆ™è®¤ä¸ºè¯¥failoverå¤±è´¥
sentinel down-after-milliseconds mymaster 5000
# Generated by CONFIG REWRITE
dir &quot;C:\\Users\\Administrator&quot;
sentinel failover-timeout mymaster 15000
sentinel config-epoch mymaster 0
sentinel leader-epoch mymaster 0
sentinel known-slave mymaster 115.59.41.123 6379
sentinel current-epoch 0

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> ä½¿ç”¨æ­¤æ–‡ä»¶å¯åŠ¨å“¨å…µ</span><br></pre></td></tr></table></figure></div>
redis-server sentinel.conf --sentinel</code></pre></li>
</ul>
</li>
<li><p>é‡å¤ä»¥ä¸Šæ­¥éª¤,å³å¯å®ç°å“¨å…µé›†ç¾¤</p>
</li>
</ol>
<p>ç›¸æ¯”è¾ƒèµ·æ¥, éƒ¨ç½²è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„.</p>
<p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯,  windowsç‰ˆæœ¬çš„redisä»…ä»…åªåˆ°3.2, rediså®˜æ–¹å¹¶æœªç»§ç»­ç¼–è¯‘åç»­ç‰ˆæœ¬çš„redis, ä¹Ÿå°±æ˜¯è¯´,å¦‚æœä½ ä½¿ç”¨çš„ä¸»æ•°æ®åº“ä¸ºlinuxçš„é«˜ç‰ˆæœ¬çš„è¯,å¯èƒ½ä¼šå‡ºç°æ— æ³•è§£ærdbæ–‡ä»¶çš„æƒ…å†µ.</p>
<p>è¿™ç§æƒ…å†µçš„è¯,æ¨èä¸‹è½½é«˜ç‰ˆæœ¬çš„rediså®‰è£…åŒ….</p>
<p><a href="https://github.com/tporadowski/redis/releases" target="_blank" rel="noopener">é«˜ç‰ˆæœ¬ä¸‹è½½</a></p>
<p>éå®˜æ–¹ç¼–è¯‘, é…Œæƒ…ä¸‹è½½.</p>
<p>è¯¸å›è‡ªè¡Œè€ƒé‡å…¶ä¸­åˆ©å¼Š,  æˆ‘åœ¨è¿™é‡Œå°±ä¸å¤šè¨€äº†.</p>
<p>ä»¥ä¸Š.</p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æœåŠ¡å™¨é…ç½®æ±‡æ€»</title>
    <url>/blog/CentOS/CentOS_id_04.html</url>
    <content><![CDATA[<ol>
<li><p>æ„å»ºcentos7ç¯å¢ƒ</p>
<p>æœåŠ¡å™¨æ„å»ºcentos7ç¯å¢ƒ,æ²¡å•¥å¥½å†™çš„,æ¯•ç«Ÿåªéœ€è¦åœ¨æ§åˆ¶å°æ“ä½œä¸€ä¸‹å°±å¯ä»¥è‡ªåŠ¨è¿›è¡Œç³»ç»Ÿé‡è£….</p>
<a id="more"></a>

<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯, é˜¿é‡Œäº‘å®‰è£…çš„centos7ç³»ç»Ÿä¸æ­£å¸¸ä½ åœ¨è‡ªå·±è™šæ‹Ÿæœºä¸Šå®‰è£…çš„centosä¸åŒ,åœ¨å®‰è£…äº†å›¾å½¢åŒ–ç•Œé¢ä¹‹å,ä½¿ç”¨init 5 å’ŒstartXéƒ½æ˜¯æ— æ³•ç›´æ¥å¼€å¯å›¾å½¢åŒ–ç•Œé¢çš„.</p>
<p>è¿™é‡Œéœ€è¦è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ä¸­,åœ¨è¿œç¨‹è¿æ¥é€‰é¡¹ä¸­é€‰æ‹©VNCè¿æ¥, è¿™æ ·æ‰èƒ½è¿›è¡Œå›¾å½¢åŒ–ç•Œé¢æ“ä½œ.</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯,è¯·åŠ¡å¿…è®°ä½ä½ ç¬¬ä¸€æ¬¡è¿›è¡ŒVNCè¿æ¥æ—¶ç”Ÿæˆçš„è¿æ¥å¯†ç ,å®ƒå…³ç³»åˆ°ä½ æ¯æ¬¡èƒ½å¦è¿æ¥,å¦‚æœä½ å¿˜è®°äº†â€¦..</p>
<p>è¿˜æ˜¯é‡è£…ç³»ç»Ÿå§</p>
</li>
<li><p>é…ç½®pythonç¯å¢ƒ</p>
<ol>
<li><p>è¿™ä¸ªçš„è¯,åº”è¯¥ä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„å§,æ¯•ç«Ÿ,centosæœ¬èº«è‡ªå¸¦äº†pythonç¯å¢ƒ(2.7)</p>
</li>
<li><p>å¦‚æœæœ‰éœ€è¦å‡çº§çš„è¯,å¯ä»¥å‚è€ƒä¸‹åˆ—æ“ä½œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="VALA"><figure class="iseeu highlight /vala"><table><tr><td class="code"><pre><span class="line">wget  https:<span class="comment">//www.python.org/ftp/python/3.7.1/Python-3.7.1.tgz </span></span><br><span class="line"><span class="meta"># ä¸‹è½½python 3.7.1 å®‰è£…åŒ…</span></span><br><span class="line">tar -zxvf Python<span class="number">-3.7</span><span class="number">.1</span>.tgz  -C  /usr/local/</span><br><span class="line"><span class="meta"># è§£å‹å®‰è£…åŒ…</span></span><br><span class="line">cd Python<span class="number">-3.7</span><span class="number">.1</span></span><br><span class="line"><span class="meta"># åˆ‡æ¢è·¯å¾„è‡³pythonæ–‡ä»¶å¤¹</span></span><br><span class="line">./configure --prefix=/usr/local/Python<span class="number">-3.7</span><span class="number">.1</span>  --enable-shared CFLAGS=-fPIC</span><br><span class="line"><span class="meta"># é…ç½®ç¼–è¯‘</span></span><br><span class="line">make&amp;&amp;make install</span><br><span class="line"><span class="meta"># ç¼–è¯‘æºç ,æ‰§è¡Œå®‰è£…</span></span><br><span class="line">python <span class="number">3</span></span><br><span class="line"><span class="meta"># æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</span></span><br></pre></td></tr></table></figure></div>

<p><img src="/fcg22450.github.io/img/online_course/centos_python.png" alt="å®‰è£…æˆåŠŸçš„æ˜¾ç¤º"></p>
</li>
</ol>
</li>
<li><p>é…ç½®mysqlæ•°æ®åº“ + ä¸»ä»å¤åˆ¶</p>
<p> è¿™é‡Œå¯ä»¥å‚è€ƒæˆ‘çš„åšå®¢:    <a href="/fcg22450.github.io/2020/05/10/online_course/003/">Centos7 ç¯å¢ƒä¸‹é…ç½®mysqlä¸»ä»æœåŠ¡</a></p>
</li>
<li><p>é…ç½®redisæ•°æ®åº“ + ä¸»ä»å¤åˆ¶ + å“¨å…µé›†ç¾¤</p>
<p>è¿™ä¸ªé—®é¢˜æˆ‘åŒæ ·æœ‰å¦å¤–ä¸€ç¯‡åšå®¢,å°±ä¸åœ¨è¿™é‡Œå¤šè¯´äº†:  <a href="/fcg22450.github.io/2020/05/11/online_course/005/">centos7æœåŠ¡å™¨é…ç½®redisä¸»ä»ä¸å“¨å…µé›†ç¾¤</a></p>
</li>
<li><p>é…ç½®nodeç¯å¢ƒ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CRMSH"><figure class="iseeu highlight /crmsh"><table><tr><td class="code"><pre><span class="line">wget https://nodejs.org/dist/v10.<span class="number">13.0</span>/<span class="keyword">node</span><span class="title">-v10</span>.<span class="number">13.0</span>-linux-x64.tar.xz</span><br><span class="line"><span class="comment"># ä¸‹è½½nodejså®‰è£…åŒ…</span></span><br><span class="line">tar xvf <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">13.0</span>-linux-x64.tar.xz </span><br><span class="line"><span class="comment"># è§£å‹ç¼©</span></span><br><span class="line">mv <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">13.0</span>-linux-x64 <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">13</span> </span><br><span class="line"><span class="comment"># é‡å‘½å</span></span><br><span class="line">cd <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">13</span>/bin</span><br><span class="line">./<span class="keyword">node</span> <span class="title">-v</span></span><br><span class="line"><span class="comment"># è¿›å…¥ç›®å½•æŸ¥çœ‹å…¶ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure></div>

<p>è¿›å…¥etc/profile ä¿®æ”¹ç¯å¢ƒå˜é‡,ä½¿nodeå‘½ä»¤èƒ½åœ¨ä»»æ„ç›®å½•è¿è¡Œ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PROPERTIES"><figure class="iseeu highlight /properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">vim</span> <span class="string">/etc/profile</span></span><br><span class="line"><span class="attr">//ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="attr">NODE_HOME</span>=<span class="string">/ä½ çš„å®‰è£…è·¯å¾„/node-v10.13</span></span><br><span class="line"><span class="attr">PATH</span>=<span class="string">$NODE_HOME/bin:$PATH</span></span><br><span class="line"><span class="attr">export</span> <span class="string">NODE_HOME</span></span><br><span class="line"><span class="attr">export</span> <span class="string">PATH</span></span><br></pre></td></tr></table></figure></div>

<p>é‡å¯æœåŠ¡å™¨:  reboot</p>
</li>
</ol>
<p>ä»¥ä¸Š.</p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æœåŠ¡å™¨é…ç½®ä¸»ä»</title>
    <url>/blog/CentOS/CentOS_id_05.html</url>
    <content><![CDATA[<h2 id="Centos7-ç¯å¢ƒä¸‹é…ç½®mysqlä¸»ä»æœåŠ¡"><a href="#Centos7-ç¯å¢ƒä¸‹é…ç½®mysqlä¸»ä»æœåŠ¡" class="headerlink" title="Centos7 ç¯å¢ƒä¸‹é…ç½®mysqlä¸»ä»æœåŠ¡"></a>Centos7 ç¯å¢ƒä¸‹é…ç½®mysqlä¸»ä»æœåŠ¡</h2><a id="more"></a>

<ol>
<li><p>å®‰è£…è¿‡ç¨‹åœ¨è¿™é‡Œä¸åœ¨èµ˜è¿°, æƒ³è¦å®ç°ä¸»ä», éœ€è¦å…ˆé…ç½®å¥½mysqlçš„å¤–ç½‘è®¿é—®. åœ¨é…ç½®å·å¤–ç½‘è®¿é—®ä¹‹å, å°±å¯ä»¥å¼€å§‹ç€æ‰‹è®¾ç½®ä¸»ä»å¤åˆ¶äº†</p>
</li>
<li><p>é¦–å…ˆåœ¨ä¸»æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªåŒæ­¥è´¦å·,æ¯ä¸ªä»æ•°æ®åº“ä¼šä½¿ç”¨ä¸€ä¸ªmysqlè´¦å·æ¥è¿æ¥ä¸»æ•°æ®åº“,æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ä¸»æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè´¦å·, å¹¶æˆäºˆè¯¥è´¦å·replication slave æƒé™, è¿™é‡Œå¯ä»¥ä¸ºæ¯ä¸€ä¸ªä»æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªè´¦å·,å½“ç„¶,ä¹Ÿå¯ä»¥ç”¨åŒä¸€ä¸ª,  åˆ›å»ºæ–°è´¦å·ä½¿ç”¨ â€˜create userâ€™å‘½ä»¤, æˆäºˆæƒé™ä½¿ç”¨â€™grantâ€™å‘½ä»¤, </p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªè´¦å·:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">create user &#39;repl&#39;@&#39;%&#39; identified by &#39;repl_Pass1&#39;;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>æˆäºˆæƒé™:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">grant replication slave on *.* to &#39;repl&#39;@&#39;%&#39;;</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
</li>
</ol>
<ol start="3">
<li><p>é…ç½®ä¸»æ•°æ®åº“</p>
<ol>
<li><p>ç¼–è¾‘my.cnfæ–‡ä»¶å†…å®¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨[mysqld]ä¸‹é¢æ·»åŠ ä¸€ä¸‹å†…å®¹</span></span><br><span class="line"><span class="attr">server-id</span> = <span class="number">1</span></span><br><span class="line"><span class="attr">log_bin</span> = master-bin</span><br><span class="line"><span class="attr">log_bin_index</span> = master-bin.index</span><br><span class="line"><span class="comment"># binlog_do_db ä¸ºè¦å¤åˆ¶çš„æ•°æ®åº“</span></span><br><span class="line"><span class="attr">binlog_do_db</span> = test</span><br><span class="line"><span class="comment"># binlog_ignore_db ä¸ºå¿½ç•¥çš„æ•°æ®åº“,å¯ä»¥å†™å¤šæ¡</span></span><br><span class="line"><span class="attr">binlog_ignore_db</span> = mysql</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
</li>
</ol>
<ol start="2">
<li>é€šå¸¸æƒ…å†µä¸‹,centos7çš„é»˜è®¤æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸º  /etc/my.cnf</li>
</ol>
<ol start="4">
<li><p>é…ç½®å®Œæˆä¹‹å,é‡å¯æ•°æ®åº“</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="EBNF"><figure class="iseeu highlight /ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">systemctl restart mysqld</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>è¿›å…¥æ•°æ®åº“,æŸ¥çœ‹ä¸»æœåŠ¡å™¨çŠ¶æ€</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">show master status;</span><br></pre></td></tr></table></figure></div>

<p><img src="/fcg22450.github.io/img/online_course/mysql_slave.png" alt="çŠ¶æ€"></p>
<p>æ³¨æ„è¿™é‡Œçš„file å’Œ  position ä¸¤ä¸ªå­—æ®µçš„å†…å®¹,å°†ä¼šåœ¨ä»æœåŠ¡å™¨é…ç½®æ—¶ç”¨åˆ°.</p>
</li>
</ol>
<hr>
<p>ä»æœåŠ¡å™¨é…ç½®:</p>
<ol>
<li><p>åŒæ ·çš„,åœ¨æ•°æ®åº“é…ç½®æ–‡ä»¶[mysqld]åé¢æ·»åŠ ä¸€ä¸‹å†…å®¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="STATA"><figure class="iseeu highlight /stata"><table><tr><td class="code"><pre><span class="line">server-id = 2</span><br><span class="line"># replicate-<span class="keyword">do</span>-<span class="keyword">db</span> è¦åŒæ­¥çš„æ•°æ®åº“åç§°</span><br><span class="line">replicate-<span class="keyword">do</span>-<span class="keyword">db</span>=<span class="keyword">test</span></span><br><span class="line"># replicate-wild-<span class="keyword">do</span>-<span class="keyword">table</span>  å•ç‹¬åŒæ­¥æŸä¸€ä¸ªè¡¨æ—¶ä½¿ç”¨</span><br><span class="line">replicate-wild-<span class="keyword">do</span>-<span class="keyword">table</span> =<span class="keyword">test</span>.<span class="keyword">test</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>é‡æ–°å¯åŠ¨ä»æ•°æ®åº“</p>
</li>
<li><p>æŒ‡å®šä¸»åº“</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">change master to master_host&#x3D;&#39;120.26.175.79&#39;, master_port&#x3D;3306, master_user&#x3D;&#39;lab_admin&#39;, master_password&#x3D;&#39;lab123&#39;, master_log_file&#x3D;&#39;master-bin.000001&#39;, master_log_pos&#x3D;154;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>å¯åŠ¨å¤åˆ¶åŠŸèƒ½</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">start slave;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>æŸ¥çœ‹ä»æ•°æ®åº“çŠ¶æ€</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">show slave status \G;</span><br></pre></td></tr></table></figure></div>





</li>
</ol>
<p>ä»¥ä¸Šé…ç½®å®Œæˆä¹‹å,ä»æœåŠ¡å™¨å°†ä¼šè‡ªåŠ¨ä»ä¸»æœåŠ¡å™¨ä¸ŠåŒæ­¥æ•°æ®åº“</p>
<p>ä»¥ä¸Š,å°±æ˜¯mysqlä¸»ä»é…ç½®çš„æ“ä½œ</p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS7æœåŠ¡å™¨é…ç½®ä¸»ä»ä¹‹åçš„ä¸€äº›æ“ä½œ</title>
    <url>/blog/CentOS/CentOS_id_06.html</url>
    <content><![CDATA[<h2 id="ä»Šå¤©é…ç½®ä¸»ä»-ç®€ç›´è„‘è¢‹çˆ†ç‚¸-ç½‘è·¯ä¸Šå„ç§è™šè™šå®å®çš„æ”»ç•¥ä¸€ä¸ªæ¯”ä¸€ä¸ªæ‰¯æ·¡-è¸©å‘è¸©äº†ä¸€å †-åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹-å…å¾—ä¸‹æ¬¡é‡åˆ°åŒæ ·çš„æƒ…å†µå¯¼è‡´æ— æ³•å¤„ç†"><a href="#ä»Šå¤©é…ç½®ä¸»ä»-ç®€ç›´è„‘è¢‹çˆ†ç‚¸-ç½‘è·¯ä¸Šå„ç§è™šè™šå®å®çš„æ”»ç•¥ä¸€ä¸ªæ¯”ä¸€ä¸ªæ‰¯æ·¡-è¸©å‘è¸©äº†ä¸€å †-åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹-å…å¾—ä¸‹æ¬¡é‡åˆ°åŒæ ·çš„æƒ…å†µå¯¼è‡´æ— æ³•å¤„ç†" class="headerlink" title="ä»Šå¤©é…ç½®ä¸»ä»,  ç®€ç›´è„‘è¢‹çˆ†ç‚¸,  ç½‘è·¯ä¸Šå„ç§è™šè™šå®å®çš„æ”»ç•¥ä¸€ä¸ªæ¯”ä¸€ä¸ªæ‰¯æ·¡,  è¸©å‘è¸©äº†ä¸€å †,  åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹,  å…å¾—ä¸‹æ¬¡é‡åˆ°åŒæ ·çš„æƒ…å†µå¯¼è‡´æ— æ³•å¤„ç†"></a>ä»Šå¤©é…ç½®ä¸»ä»,  ç®€ç›´è„‘è¢‹çˆ†ç‚¸,  ç½‘è·¯ä¸Šå„ç§è™šè™šå®å®çš„æ”»ç•¥ä¸€ä¸ªæ¯”ä¸€ä¸ªæ‰¯æ·¡,  è¸©å‘è¸©äº†ä¸€å †,  åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹,  å…å¾—ä¸‹æ¬¡é‡åˆ°åŒæ ·çš„æƒ…å†µå¯¼è‡´æ— æ³•å¤„ç†</h2><a id="more"></a>

<ol>
<li><p>é¦–å…ˆè¯´è¯´é…ç½®ä¸»ä»æ•°æ®åº“çš„é—®é¢˜</p>
<ul>
<li><p>é¦–å…ˆ,ä¸»ä»æ•°æ®åº“çš„ç‰ˆæœ¬å¿…é¡»ä¸€æ ·,  å®æµ‹ç¡®å®å¦‚æ­¤,  è™½ç„¶æˆ‘ä¹Ÿä¸ç¡®å®šæœ€å¼€å§‹æ˜¯ä¸æ˜¯æˆ‘ä¸ç†Ÿç»ƒå¯¼è‡´çš„å°±æ˜¯äº†.</p>
</li>
<li><p>ç¬¬äºŒç‚¹, ä¸è¦ç”¨å®˜ç½‘ç»™çš„å®‰è£…åŒ…,è¦ç”¨zip! zip! è™½ç„¶é…ç½®èµ·æ¥å¾—æ‰‹åŠ¨,  ä½†æ˜¯è¯´å®è¯,  æ‰€æœ‰é…ç½®æ–‡ä»¶è‡ªå·±è®¾å®šè¿™ä¸€ç‚¹å°±è¶³å¤Ÿè®©äººç‰¹æ„å»è´¹è¿™ç•ªåŠŸå¤«äº†.ä¸»ä»éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹,  æˆ‘ä¸€å¼€å§‹è£…äº†ä¸€ä¸ªå®‰è£…åŒ…çš„mysql, å„ç§å‡ºé”™,æœ€é‡è¦çš„æ˜¯,ä¿®æ”¹äº†é…ç½®é€‰é¡¹ä¹‹åå¹¶ä¸èµ·ä½œç”¨,è¿™ä¸€ç‚¹æ‹–äº†æˆ‘ä¸€ä¸ªå°æ—¶,æœ€ç»ˆä¸€æ°”ä¹‹ä¸‹é€‰æ‹©å¸è½½,é‡æ–°å¸è½½äº†å®˜ç½‘çš„zipå®‰è£…åŒ…,è§£å‹åæ‰‹åŠ¨é…ç½®äº†my.iniæ–‡ä»¶,æ–¹æ‰å®Œæˆäº†ä»å±æœåŠ¡å™¨çš„é…ç½®.</p>
</li>
<li><p>ç¬¬ä¸‰ç‚¹,å¯åŠ¨ä¹‹åæŠ¥é”™,è¿™é‡Œä¸€å…±é‡åˆ°äº†ä¸¤ç§æŠ¥é”™</p>
<ul>
<li><p>ç¬¬ä¸€ç§:   Slave_SQL_Running: No</p>
<ul>
<li>è¿™ä¸ªå±æ€§å’Œå¦å¤–ä¸€ä¸ªå±æ€§(Slave_IO_Running)ä¸€æ ·é‡è¦,å¯ä»¥è¯´,è¿™ä¸¤ä¸ªä¸­åªè¦æœ‰ä¸€ä¸ªå€¼ä¸ºno,å°±æ„å‘³ç€ä½ çš„ä»æ•°æ®åº“æŒ‚äº†,å°±è¿™ä¹ˆææ€–</li>
</ul>
</li>
<li><p>ç¬¬äºŒç§:   Error executing row event: â€˜Table â€˜lab.django_migrationsâ€™ doesnâ€™t existâ€™</p>
<ul>
<li>ç±»ä¼¼è¿™ç§å½¢å¼çš„æŠ¥é”™</li>
<li>æˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯ä¸»æ•°æ®åº“çš„é—®é¢˜,ç”šè‡³æƒ³ç€è¦ä¸è¦ç›´æ¥é‡ç½®ä¸€ä¸‹ä¸»æ•°æ®åº“,ä½†ä¸‡ä¸‡æ²¡æƒ³åˆ°é—®é¢˜å±…ç„¶ä¼šè¿™æ ·è§£å†³</li>
</ul>
</li>
<li><p>è¯´è¯´è§£å†³æ–¹æ¡ˆ:</p>
<ul>
<li><p>ç½‘ä¸Šæœç´¢åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªåŠæ ·,ä¼°è®¡éƒ½æ˜¯æŠ„çš„åŒä¸€ç¯‡æ–‡ç« ,å…·ä½“æºå¤´ä¸å¯è€ƒæ®.</p>
</li>
<li><pre><code class="mysql">stop slave;  
SET GLOBAL SQL_SLAVE_SKIP_COUNTER=1;
start slave;
show slave status\G  </code></pre>
</li>
<li><p>å—¯,å°±è¿™å››æ¡,ä¹ä¸€è¿è¡Œæ²¡å•¥åµç”¨,ä½†æ˜¯åœ¨æˆ‘ç¿»éç½‘ä¸Šçš„æ–‡ç« ä¹‹å,ä¸€å“¥ä»¬çš„æ–‡ç« å¸å¼•äº†æˆ‘çš„æ³¨æ„åŠ›<img src="/fcg22450.github.io/img/online_course/slave_code.png" alt="æˆªå›¾"></p>
</li>
<li><p><del>å¤Ÿæ‰¯æ·¡,æˆ‘å–œæ¬¢</del><img src="https://www./fcg22450.github.io/images/meme/%E5%A4%9F%E6%89%AF%E6%B7%A1.png" alt="å¤Ÿæ‰¯æ·¡"></p>
</li>
<li><p>ç»¼ä¸Šæ‰€è¿°,  é‚£æ—¶å€™åŸºæœ¬ä¸æŠ±å¸Œæœ›çš„æˆ‘è¯•äº†è¯•â€¦..</p>
</li>
<li><p>ç„¶åâ€¦..</p>
</li>
<li><img src="https://www.f322.xyz/images/meme/what.png" alt="what">
</li>
<li><p>å±…ç„¶æ˜¯çœŸçš„??????????</p>
</li>
</ul>
</li>
<li><p>æ€»ä¹‹,å¤šå†™å‡ éå°±è§£å†³äº†,  å°±è¿™ä¹ˆç®€å•</p>
</li>
</ul>
</li>
<li><p>è¿˜èƒ½è¯´ä»€ä¹ˆ</p>
</li>
</ul>
</li>
<li><p>ç„¶åå°±æ˜¯å…³äºä¸€äº›åœ¨æ•°æ®åº“ä¸­ä¼šç”¨åˆ°çš„å‘½ä»¤</p>
<ol>
<li><del>ä½ æ˜¯ä¸æ˜¯ä»¥ä¸ºæˆ‘ä¼šå†™ä¸€å †</del><img src="/fcg22450.github.io/images/meme/%E6%83%B3%E9%83%BD%E4%B8%8D%E8%A6%81%E6%83%B3.png" alt="æƒ³éƒ½ä¸è¦æƒ³"></li>
</ol>
</li>
</ol>
<p>å½“ç„¶,ä»¥ä¸Šçº¯å±æ‰¯æ·¡,å“ˆå“ˆå“ˆå“ˆ,<del>è™½ç„¶æˆ‘å°±æ˜¯è¿™ä¹ˆæƒ³çš„</del>,é‚£ä¹ˆ,æœ¬æœŸçš„è®°å½•åˆ°æ­¤ç»“æŸ,æ‹œæ‹œ~~ãƒ¾(â€¢Ï‰â€¢`)o.</p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Datetimeæ¨¡å—å¸¸ç”¨æ–¹æ³•</title>
    <url>/blog/Python/Python_id_01.html</url>
    <content><![CDATA[<p>ã€€ã€€<strong>Datetimeæ¨¡å—å¸¸ç”¨æ–¹æ³•</strong></p>
<a id="more"></a>

<h4 id="Datetimeæ ¼å¼"><a href="#Datetimeæ ¼å¼" class="headerlink" title="Datetimeæ ¼å¼"></a>Datetimeæ ¼å¼</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">%Y å¹´ä»½ e.g. <span class="number">1970</span>, <span class="number">1988</span>, <span class="number">2001</span>, <span class="number">2013</span></span><br><span class="line">%y å¹´ä»½ï¼ˆæœªå¸¦ä¸–çºªï¼‰ e.g. <span class="number">00</span>, <span class="number">01</span>, â€¦, <span class="number">99</span></span><br><span class="line">%m æœˆä»½ e.g. <span class="number">01</span>, <span class="number">02</span>, â€¦, <span class="number">12</span></span><br><span class="line">%b æœˆä»½ e.g. Jan, Feb, â€¦, Dec</span><br><span class="line">%d å¤© e.g. <span class="number">01</span>, <span class="number">02</span>, â€¦, <span class="number">31</span></span><br><span class="line">%j å¤©ï¼ˆdecimal numberï¼‰e.g. <span class="number">001</span>, <span class="number">002</span>, â€¦, <span class="number">366</span></span><br><span class="line">%a æ˜ŸæœŸ e.g. Sun, Mon, â€¦, Sat (en_US)</span><br><span class="line">%A æ˜ŸæœŸ e.g. Sunday, Monday, â€¦, Saturday (en_US)</span><br><span class="line">%w æ˜ŸæœŸ e.g. <span class="number">0</span>, <span class="number">1</span>, â€¦, <span class="number">6</span></span><br><span class="line">%H å°æ—¶(<span class="number">24</span>å°æ—¶åˆ¶) e.g. <span class="number">00</span>, <span class="number">01</span>, â€¦, <span class="number">23</span></span><br><span class="line">%I å°æ—¶(<span class="number">12</span>å°æ—¶åˆ¶) e.g. <span class="number">01</span>, <span class="number">02</span>, â€¦, <span class="number">12</span></span><br><span class="line">%p ä¸Š/ä¸‹åˆæ ‡è¯† e.g. AM, PM</span><br><span class="line">%M åˆ†é’Ÿ e.g. <span class="number">00</span>, <span class="number">01</span>, â€¦,<span class="number">59</span></span><br><span class="line">%S ç§’ e.g. <span class="number">00</span>, <span class="number">01</span>, â€¦, <span class="number">59</span></span><br><span class="line">%f å¾®ç§’ï¼ˆ<span class="number">6</span>ä½é•¿åº¦ï¼‰ e.g. <span class="number">000000</span>, <span class="number">000001</span>, â€¦, <span class="number">999999</span></span><br><span class="line">=====================</span><br><span class="line">%W ä¸€å¹´çš„ç¬¬å‡ å‘¨ e.g. <span class="number">00</span>, <span class="number">01</span>, â€¦, <span class="number">53</span></span><br><span class="line">%% æ ‡è¯†å­—ç¬¦%</span><br></pre></td></tr></table></figure></div>

<h4 id="å¹´çš„åŠ å‡"><a href="#å¹´çš„åŠ å‡" class="headerlink" title="å¹´çš„åŠ å‡"></a>å¹´çš„åŠ å‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedelta</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´+3å¹´</span></span><br><span class="line">date_time = datetime.datetime.date(datetime.datetime.now()) + relativedelta(years=<span class="number">3</span>)</span><br><span class="line">print(date_time)</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´-3å¹´</span></span><br><span class="line">date_time = datetime.datetime.date(datetime.datetime.now()) + relativedelta(years=<span class="number">-3</span>)</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<h4 id="æœˆçš„åŠ å‡"><a href="#æœˆçš„åŠ å‡" class="headerlink" title="æœˆçš„åŠ å‡"></a>æœˆçš„åŠ å‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedelta</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´+3æœˆ</span></span><br><span class="line">date_time = datetime.datetime.now() + relativedelta(months=<span class="number">3</span>)</span><br><span class="line">print(date_time)</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´-3æœˆ</span></span><br><span class="line">date_time = datetime.datetime.now() + relativedelta(months=<span class="number">-3</span>)</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<h4 id="æ—¥çš„åŠ å‡"><a href="#æ—¥çš„åŠ å‡" class="headerlink" title="æ—¥çš„åŠ å‡"></a>æ—¥çš„åŠ å‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´+3å¤©</span></span><br><span class="line">date_time = datetime.datetime.now() + datetime.timedelta(days=<span class="number">3</span>)</span><br><span class="line">print(date_time)</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´-3å¤©</span></span><br><span class="line">date_time = datetime.datetime.now() + datetime.timedelta(days=<span class="number">-3</span>)</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<h4 id="å°æ—¶çš„åŠ å‡"><a href="#å°æ—¶çš„åŠ å‡" class="headerlink" title="å°æ—¶çš„åŠ å‡"></a>å°æ—¶çš„åŠ å‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´+3å°æ—¶</span></span><br><span class="line">date_time = datetime.datetime.now() + datetime.timedelta(hours=<span class="number">3</span>)</span><br><span class="line">print(date_time)</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´-3å°æ—¶</span></span><br><span class="line">date_time = datetime.datetime.now() + datetime.timedelta(hours=<span class="number">-3</span>)</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<h4 id="åˆ†é’Ÿçš„åŠ å‡"><a href="#åˆ†é’Ÿçš„åŠ å‡" class="headerlink" title="åˆ†é’Ÿçš„åŠ å‡"></a>åˆ†é’Ÿçš„åŠ å‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´+3åˆ†é’Ÿ</span></span><br><span class="line">date_time = datetime.datetime.now() + datetime.timedelta(minutes=<span class="number">3</span>)</span><br><span class="line">print(date_time)</span><br><span class="line"><span class="comment"># å½“å‰æ—¶é—´-3åˆ†é’Ÿ</span></span><br><span class="line">date_time = datetime.datetime.now() + datetime.timedelta(minutes=<span class="number">-3</span>)</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<h4 id="æ—¶é—´ä¸å­—ç¬¦ä¸²çš„è½¬æ¢"><a href="#æ—¶é—´ä¸å­—ç¬¦ä¸²çš„è½¬æ¢" class="headerlink" title="æ—¶é—´ä¸å­—ç¬¦ä¸²çš„è½¬æ¢"></a>æ—¶é—´ä¸å­—ç¬¦ä¸²çš„è½¬æ¢</h4><p>ã€€ã€€<strong>ç‰¹æ®Šçš„å­—ç¬¦ä¸²ç±»å‹</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">date_time = <span class="string">'2012-05-29T19:30:03.283Z'</span></span><br><span class="line">date_time = datetime.datetime.strptime(date_time, <span class="string">"%Y-%m-%dT%H:%M:%S.%fZ"</span>)</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>å¸¸è§çš„å­—ç¬¦ä¸²ç±»å‹</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">date_time = <span class="string">'2012-05-29 19:30:03'</span></span><br><span class="line">date_time = datetime.datetime.strptime(date_time, <span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€<strong>æ—¶é—´è½¬æ¢æˆå­—ç¬¦ä¸²</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">date_time = str(datetime.datetime.now())</span><br><span class="line">print(date_time)</span><br></pre></td></tr></table></figure></div>

<h4 id="ä¸¤ä¸ªæ—¥æœŸè®¡ç®—ç›¸å·®å¤šå°‘å¤©"><a href="#ä¸¤ä¸ªæ—¥æœŸè®¡ç®—ç›¸å·®å¤šå°‘å¤©" class="headerlink" title="ä¸¤ä¸ªæ—¥æœŸè®¡ç®—ç›¸å·®å¤šå°‘å¤©"></a>ä¸¤ä¸ªæ—¥æœŸè®¡ç®—ç›¸å·®å¤šå°‘å¤©</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">d1 = datetime.datetime(<span class="number">2005</span>, <span class="number">2</span>, <span class="number">16</span>)</span><br><span class="line">d2 = datetime.datetime(<span class="number">2004</span>, <span class="number">12</span>, <span class="number">31</span>)</span><br><span class="line">print((d1 - d2).days)</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Datetime</tag>
      </tags>
  </entry>
  <entry>
    <title>æ”¯ä»˜å®æ²™ç®±æ”¯ä»˜</title>
    <url>/blog/Python/Python_id_05.html</url>
    <content><![CDATA[<p>ã€€ã€€Pythonæ”¯ä»˜å®æ²™ç®±æ”¯ä»˜ä»£ç æ¥å£</p>
<a id="more"></a>

<h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install</span> python-alipay-sdk <span class="comment">--upgrade</span></span><br></pre></td></tr></table></figure></div>

<h2 id="è¯·æ±‚æ”¯ä»˜é¡µé¢"><a href="#è¯·æ±‚æ”¯ä»˜é¡µé¢" class="headerlink" title="è¯·æ±‚æ”¯ä»˜é¡µé¢"></a>è¯·æ±‚æ”¯ä»˜é¡µé¢</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ²™ç®±æ”¯ä»˜</span></span><br><span class="line"><span class="comment"># è¿›å…¥æ”¯ä»˜é¡µé¢</span></span><br><span class="line"><span class="comment"># æ²™ç®±æ”¯ä»˜æ‰€éœ€åŒ…</span></span><br><span class="line"><span class="keyword">from</span> alipay <span class="keyword">import</span> AliPay</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alipay</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="comment"># éšæœºç”Ÿæˆè®¢å•å·</span></span><br><span class="line">        order = datetime.datetime.now().strftime(<span class="string">"%Y%m%d%H%M%S"</span>) + str(random.randint(<span class="number">10</span>, <span class="number">99</span>))</span><br><span class="line">        <span class="comment"># åˆ¤æ–­è®¢å•æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        order_id = Order.objects.filter(order=order).first()</span><br><span class="line">        <span class="keyword">if</span> order_id:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>:<span class="number">405</span>,<span class="string">"message"</span>:<span class="string">"è¯¥è®¢å•å·²å­˜åœ¨ï¼Œè¯·é‡æ–°ä¸‹å•"</span>&#125;)</span><br><span class="line">        <span class="comment"># è·å–æ”¯ä»˜ä»·æ ¼</span></span><br><span class="line">        price = request.GET.get(<span class="string">"price"</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="comment"># è·å–token</span></span><br><span class="line">        jwt_token = request.GET.get(<span class="string">"token"</span>,<span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user_json = jwt_decode_handler(jwt_token)</span><br><span class="line">            <span class="comment"># è·å–tokenä¸­çš„uid</span></span><br><span class="line">            user_id = user_json[<span class="string">'user_id'</span>]</span><br><span class="line">            r.set(<span class="string">"payuid"</span>,user_id)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            r.set(<span class="string">"payuid"</span>,str())</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>:<span class="number">405</span>,<span class="string">"message"</span>:<span class="string">"ç”¨æˆ·ä¿¡æ¯å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•"</span>&#125;)</span><br><span class="line">        <span class="comment"># è¯»å–ç§é’¥åŠå…¬é’¥</span></span><br><span class="line">        app_private_key_string = open(<span class="string">"pay/private.txt"</span>).read()</span><br><span class="line">        alipay_public_key_string = open(<span class="string">"pay/public.txt"</span>).read()</span><br><span class="line"></span><br><span class="line">        alipay = AliPay(</span><br><span class="line">            appid=<span class="string">"2016102400753303"</span>,</span><br><span class="line">            app_notify_url= <span class="literal">None</span>,  <span class="comment"># é»˜è®¤å›è°ƒurl</span></span><br><span class="line">            app_private_key_string=app_private_key_string,</span><br><span class="line">            alipay_public_key_string=alipay_public_key_string,</span><br><span class="line">            <span class="comment"># æ”¯ä»˜å®çš„å…¬é’¥ï¼ŒéªŒè¯æ”¯ä»˜å®å›ä¼ æ¶ˆæ¯ä½¿ç”¨ï¼Œä¸æ˜¯ä½ è‡ªå·±çš„å…¬é’¥,</span></span><br><span class="line">            sign_type=<span class="string">"RSA2"</span>,  <span class="comment"># RSA æˆ–è€… RSA2</span></span><br><span class="line">            debug=<span class="literal">True</span>  <span class="comment"># é»˜è®¤False</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”µè„‘ç½‘ç«™æ”¯ä»˜ï¼Œéœ€è¦è·³è½¬åˆ°https://openapi.alipay.com/gateway.do? + order_string</span></span><br><span class="line">        order_str = alipay.api_alipay_trade_page_pay(</span><br><span class="line">            subject=<span class="string">"å®éªŒæ¥¼æ¶ˆè´¹"</span>,</span><br><span class="line">            notify_url=<span class="literal">None</span>,</span><br><span class="line">            out_trade_no=order,      <span class="comment"># è®¢å•å·</span></span><br><span class="line">            total_amount=price,         <span class="comment"># è®¢å•ä»·æ ¼</span></span><br><span class="line">            return_url=<span class="string">"http://127.0.0.1:8000/get_alipy/"</span></span><br><span class="line">        )</span><br><span class="line">	<span class="comment"># æ‹¼æ¥æ”¯ä»˜å®æ”¯ä»˜é¡µé¢ç½‘å€url</span></span><br><span class="line">        request_url = <span class="string">'https://openapi.alipaydev.com/gateway.do?'</span> + order_str</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;</span><br><span class="line">            <span class="string">"code"</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="string">"msg"</span>: <span class="string">"è¯·æ±‚æˆåŠŸï¼Œè·³è½¬æ”¯ä»˜é¡µé¢"</span>,</span><br><span class="line">            <span class="string">"data"</span>: request_url</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="è·å–å›è°ƒç½‘å€-returnURL-ä¸­çš„å‚æ•°"><a href="#è·å–å›è°ƒç½‘å€-returnURL-ä¸­çš„å‚æ•°" class="headerlink" title="è·å–å›è°ƒç½‘å€(returnURL)ä¸­çš„å‚æ•°"></a>è·å–å›è°ƒç½‘å€(returnURL)ä¸­çš„å‚æ•°</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ”¯ä»˜å›è°ƒ(è·å–å›è°ƒç½‘å€ä¸­çš„å‚æ•°)</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨æ‚²è§‚é”ä¿®æ”¹æ•°æ®</span></span><br><span class="line"><span class="comment"># æ‚²è§‚é”åŒ…</span></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> transaction</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Get_Alipy</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        user = request.query_params</span><br><span class="line">        <span class="comment"># è·å–æ”¯ä»˜ç”¨æˆ·id</span></span><br><span class="line">        uid = r.get(<span class="string">"payuid"</span>)</span><br><span class="line">        <span class="comment"># è·å–è®¢å•å·åŠä»·æ ¼  å¹¶å°†å•ä½æ¢ç®—æˆåˆ†</span></span><br><span class="line">        price = int(float(user[<span class="string">"total_amount"</span>])*<span class="number">100</span>)</span><br><span class="line">        order = user[<span class="string">"out_trade_no"</span>]</span><br><span class="line">        <span class="comment"># è®¢å•è¡¨ä¸­ç”Ÿæˆè®¢å•</span></span><br><span class="line">        Order.objects.create(uid=int(uid),order=order,price=price)</span><br><span class="line">        <span class="keyword">with</span> transaction.atomic():</span><br><span class="line">            save =transaction.savepoint()</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># è·å–è¯¥ä»·æ ¼åœ¨ä¼šå‘˜ä¸­çš„ç­‰çº§</span></span><br><span class="line">                price = VIP.objects.filter(price=price).first()</span><br><span class="line">                <span class="comment"># ä¿®æ”¹è¯¥ç”¨æˆ·çš„ä¼šå‘˜ç­‰çº§</span></span><br><span class="line">                user = User.objects.select_for_update().get(id=int(uid))</span><br><span class="line">                <span class="comment"># ä¿®æ”¹ç”¨æˆ·çš„vipç­‰çº§</span></span><br><span class="line">                user.vid = price.id</span><br><span class="line">                <span class="comment"># ä¿®æ”¹åè¿›è¡Œä¿å­˜</span></span><br><span class="line">                user.save()</span><br><span class="line">                <span class="comment"># æäº¤æ‰€æœ‰ä¿®æ”¹</span></span><br><span class="line">                transaction.savepoint_commit(save)</span><br><span class="line">                <span class="keyword">return</span> HttpResponseRedirect(<span class="string">'http://127.0.0.1:8080/vip'</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="comment"># å¤±è´¥å…¨éƒ¨å›æ»š</span></span><br><span class="line">                transaction.savepoint_rollback(save)</span><br><span class="line">        r.delete(<span class="string">"payuid"</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>:<span class="number">500</span>,<span class="string">"message"</span>:<span class="string">"ä¿®æ”¹å¤±è´¥"</span>&#125;)</span><br></pre></td></tr></table></figure></div>

<h2 id="å‘æ”¯ä»˜å®å‘èµ·ç¡®è®¤æ”¯ä»˜ç»“æœè¯·æ±‚"><a href="#å‘æ”¯ä»˜å®å‘èµ·ç¡®è®¤æ”¯ä»˜ç»“æœè¯·æ±‚" class="headerlink" title="å‘æ”¯ä»˜å®å‘èµ·ç¡®è®¤æ”¯ä»˜ç»“æœè¯·æ±‚"></a>å‘æ”¯ä»˜å®å‘èµ·ç¡®è®¤æ”¯ä»˜ç»“æœè¯·æ±‚</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å‘æ”¯ä»˜å®ç¡®è®¤æ”¯ä»˜ç»“æœ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Get_Alipy</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="comment"># è®¢å•å·</span></span><br><span class="line">        order = request.GET.get(<span class="string">"order"</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="comment"># è·å–token</span></span><br><span class="line">        jwt_token = request.GET.get(<span class="string">"token"</span>, <span class="literal">None</span>)</span><br><span class="line">        user_json = jwt_decode_handler(jwt_token)</span><br><span class="line">        <span class="comment"># è·å–tokenä¸­çš„uid</span></span><br><span class="line">        user_id = user_json.get(<span class="string">"user_id"</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆ¤æ–­æ˜¯å¦ç™»å½•</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> user_id:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>: <span class="number">405</span>, <span class="string">"message"</span>: <span class="string">"ç”¨æˆ·ä¿¡æ¯å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•"</span>&#125;)</span><br><span class="line">            <span class="comment"># æŸ¥è¯¢è®¢å•æ˜¯å¦å­˜åœ¨ï¼Œæˆ–è®¢å•æ˜¯å¦å·²ç»æ”¯ä»˜è¿‡</span></span><br><span class="line">        order_id = Order.objects.filter(order=order, uid=int(user_id)).first()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> order_id <span class="keyword">or</span> order_id.is_succeed == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>: <span class="number">405</span>, <span class="string">"message"</span>: <span class="string">"è®¢å•ä¸å­˜åœ¨æˆ–å·²ä»˜æ¬¾ï¼Œè¯·åˆ·æ–°åæŸ¥çœ‹"</span>&#125;)</span><br><span class="line"></span><br><span class="line">        alipay = AliPay(</span><br><span class="line">            appid=<span class="string">"2016102400753303"</span>,</span><br><span class="line">            app_notify_url=<span class="literal">None</span>,  <span class="comment"># é»˜è®¤å›è°ƒurl</span></span><br><span class="line">            app_private_key_string=app_private_key_string,</span><br><span class="line">            alipay_public_key_string=alipay_public_key_string,</span><br><span class="line">            <span class="comment"># æ”¯ä»˜å®çš„å…¬é’¥ï¼ŒéªŒè¯æ”¯ä»˜å®å›ä¼ æ¶ˆæ¯ä½¿ç”¨ï¼Œä¸æ˜¯ä½ è‡ªå·±çš„å…¬é’¥,</span></span><br><span class="line">            sign_type=<span class="string">"RSA2"</span>,  <span class="comment"># RSA æˆ–è€… RSA2</span></span><br><span class="line">            debug=<span class="literal">True</span>  <span class="comment"># é»˜è®¤False</span></span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># æ”¯ä»˜å®äº¤æ˜“æŸ¥è¯¢æ¥å£ï¼šalipay.api_alipay_trade_query(è®¢å•å·)</span></span><br><span class="line">        response = alipay.api_alipay_trade_query(order)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> response.get(<span class="string">"code"</span>) != <span class="string">"10000"</span> <span class="keyword">or</span> response.get(<span class="string">"trade_status"</span>) != <span class="string">"TRADE_SUCCESS"</span>:</span><br><span class="line">            <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>: <span class="number">405</span>, <span class="string">"message"</span>: <span class="string">"å¼€é€šå¤±è´¥"</span>&#125;)</span><br><span class="line">        order_id = Order.objects.filter(order=order, uid=int(user_id)).first()</span><br><span class="line">        <span class="comment"># å°†æ”¯ä»˜çŠ¶æ€ä¿®æ”¹ä¸ºå·²æ”¯ä»˜</span></span><br><span class="line"></span><br><span class="line">        order_id.is_succeed = <span class="number">1</span></span><br><span class="line">        <span class="comment"># æŸ¥è¯¢å¼€é€šçš„ä¼šå‘˜çº§åˆ«</span></span><br><span class="line">        vip = VIP.objects.filter(grade=order_id.behoof).first()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä¿®æ”¹å¯¹åº”ç”¨æˆ·çš„vipçº§åˆ«</span></span><br><span class="line">        user = User.objects.get(id=int(user_id))</span><br><span class="line">        user.vid = vip.id</span><br><span class="line"></span><br><span class="line">        user.vip_start_time = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line">        order_id.save()</span><br><span class="line">        user.save()</span><br><span class="line">        <span class="comment"># æäº¤æ‰€æœ‰ä¿®æ”¹</span></span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">"code"</span>: <span class="number">200</span>, <span class="string">"message"</span>: <span class="string">"æ­å–œæ‚¨ï¼Œä¼šå‘˜å¼€é€šæˆåŠŸ"</span>&#125;)</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>æ”¯ä»˜å®</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntuå‘½ä»¤å¤§å…¨</title>
    <url>/blog/Ubuntu/Ubuntu_id_06.html</url>
    <content><![CDATA[<p>cd .. // è¿”å›ä¸Šä¸€çº§ç›®å½•</p>
<a id="more"></a>

<p>cd - // è¿”å›ä¸Šä¸€æ¬¡ç›®å½•</p>
<p>cdæˆ–cd ~ // è¿”å›å®¶ç›®å½•</p>
<p>cd / // è¿›å…¥æ ¹ç›®å½•</p>
<p>pwd // æ˜¾ç¤ºå½“å‰ç›®å½•</p>
<p>ls // æ˜¾ç¤ºå½“å‰ç›®å½•æ–‡ä»¶</p>
<p>ls localrepo/ // æ˜¾ç¤ºæŒ‡å®šç›®å½•çš„æ–‡ä»¶</p>
<p>ll // æŸ¥çœ‹ç›®å½•æ–‡ä»¶çš„çš„è¯¦ç»†ä¿¡æ¯</p>
<p>la // æŸ¥çœ‹å…¨éƒ¨åŒ…æ‹¬éšè—çš„ç›®å½•æ–‡ä»¶</p>
<p>tree // æŸ¥çœ‹å½“å‰ç›®å½•æ–‡ä»¶æ ‘</p>
<p>tree mydir // æŸ¥çœ‹æŒ‡å®šç›®å½•çš„æ–‡ä»¶æ ‘</p>
<p>touch hello.py // åˆ›å»ºç©ºæ–‡ä»¶</p>
<p>mkdir mydir // åˆ›å»ºæ–‡ä»¶å¤¹</p>
<p>mkdir -p a/b/c // åˆ›å»ºå±‚çº§ç›®å½•</p>
<p>mkdir -p a/{b,c}/{d,e} // åŒä¸€çº§åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹</p>
<p>cp hello.py ~/hello2.py // æ‹·è´æ–‡ä»¶</p>
<p>cp hello.py -i hello2.py // æ‹·è´æ–‡ä»¶ï¼Œå¦‚æœæœ‰åŒåæ–‡ä»¶è¯¢é—®æ˜¯å¦è¦†ç›–</p>
<p>cp hello.py -f hello2.py // æ‹·è´æ–‡ä»¶ï¼Œå¦‚æœæœ‰åŒåæ–‡ä»¶å¼ºåˆ¶è¦†ç›–</p>
<p>cp hello.py -n hello2.py // æ‹·è´æ–‡ä»¶ï¼Œå¦‚æœæœ‰åŒåæ–‡ä»¶ä¸è¦†ç›–</p>
<p>mv hello2.py hellocp.py // é‡å‘½åæ–‡ä»¶</p>
<p>mv hello.py ~/Desktop // ç§»åŠ¨æ–‡ä»¶</p>
<p>rm hellocp.py // åˆ é™¤æ–‡ä»¶</p>
<p>rm -rf localrepo/ // é€’å½’åˆ é™¤ç›®å½•</p>
<p>find ~/Desktop/ -name â€˜*.pyâ€™ // åœ¨æŒ‡å®šç›®å½•ä¸­æŸ¥æ‰¾æ–‡ä»¶</p>
<p>whereis python // æŸ¥æ‰¾å¯æ‰§è¡Œç¨‹åº</p>
<p>which python // æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ªç›®å½•ä¸­çš„python</p>
<p>ln -s /usr/bin/python ./mypylink // åˆ›å»ºå¯æ‰§è¡Œç¨‹åºçš„è½¯é“¾æ¥</p>
<p>alias rrm=â€™rm -rfâ€™ // ç»™å‘½ä»¤èµ·åˆ«åï¼Œéœ€è¦rootæƒé™(ä¸å»ºè®®ä½¿ç”¨)</p>
<p>history // æŸ¥çœ‹å‘½ä»¤å†å²</p>
<p>clear // æ¸…å±(å¿«æ·é”®Ctrl+l)</p>
<p><strong>@å‘½ä»¤é€ŸæŸ¥</strong></p>
<p>rm â€“help // æŸ¥çœ‹rmå‘½ä»¤å¸®åŠ©</p>
<p>man rm // æŸ¥çœ‹rmå‘½ä»¤çš„æ‰‹å†Œè§£é‡Š</p>
<p>info rm // æŸ¥çœ‹rmå‘½ä»¤è¯¦ç»†ä¿¡æ¯</p>
<p><strong>@æ›´å¤šæŸ¥æ‰¾</strong></p>
<p>find ~/ -name â€˜*.pyâ€™ -exec rm {} ;    æŸ¥æ‰¾å®¶ç›®å½•ä¸‹æ‰€æœ‰çš„pyæ–‡ä»¶å¹¶åˆ é™¤ï¼Œ{}ä¸execç»“åˆåŒ¹é…æ‰€æœ‰æ–‡ä»¶</p>
<p>find ~/ -name â€˜*.pyâ€™ -exec chown wife {} ;        æŸ¥æ‰¾å®¶ç›®å½•ä¸‹æ‰€æœ‰pyæ–‡ä»¶å¹¶å°†æ‰€æœ‰æƒè½¬è®©ç»™wifeç”¨æˆ·</p>
<p>find ~/ -name â€˜*.pyâ€™ -exec cat {} ;&gt; record.txt    æŸ¥æ‰¾æ–‡ä»¶å¹¶å°†å…¨éƒ¨å†…å®¹æ‹¼æ¥å¹¶å†™å…¥æ–‡ä»¶ä¸­</p>
<p>find ~/ -name â€˜*.pyâ€™ -exec cp {} mydir ;        æŸ¥æ‰¾æ–‡ä»¶å¹¶æ‹·è´åˆ°æŒ‡å®šç›®å½•</p>
<p>grep â€˜def.*â€™ a.py    åœ¨a.pyä¸­æŸ¥æ‰¾æŒ‡å®šå†…å®¹</p>
<p>grep â€˜def.*â€™ a.py b.py c.py    åœ¨å¤šä¸ªæ–‡ä»¶ä¸­å¯»æ‰¾æŒ‡å®šå†…å®¹</p>
<p>grep -v â€˜def.*â€™ a.py    åœ¨a.pyä¸­æŸ¥æ‰¾æŒ‡å®šå†…å®¹ä»¥å¤–çš„å†…å®¹</p>
<p>grep -i â€œHELLOâ€ a.py    åœ¨a.pyä¸­æŸ¥æ‰¾æŒ‡å®šå†…å®¹å¹¶å¿½ç•¥å¤§å°å†™</p>
<p>grep -E â€œ[1-9]+â€ a.py    åœ¨a.pyä¸­æŸ¥æ‰¾æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ï¼ˆåŒ¹é…1åˆ°å¤šä¸ªæ•°å­—ï¼‰</p>
<p>grep -F â€œ[1-9]+â€ a.py    åœ¨a.pyä¸­æŸ¥æ‰¾çº¯æ–‡æœ¬å†…å®¹ï¼ˆä¸¥æ ¼åŒ¹é…å­—ç¬¦ä¸²â€[1-9]+â€ï¼‰</p>
<p>grep -e â€œdef.*â€ -e â€œclass.*â€ a.py    åœ¨a.pyä¸­æŸ¥æ‰¾å¤šä¸ªå†…å®¹</p>
<p>grep â€œtextâ€ ./ -r -n    åœ¨å½“å‰ç›®å½•ä¸‹é€’å½’æŸ¥æ‰¾å†…å®¹</p>
<p><strong>@ç³»ç»Ÿç®¡ç†</strong></p>
<p>poweroff    å…³æœº</p>
<p>reboot    é‡å¯</p>
<p>shutdown -h 12:00    å®šæ—¶å…³æœº</p>
<p>shutdown -h now        ç«‹åˆ»å…³æœº</p>
<p>shutdown -c            å–æ¶ˆå®šæ—¶å…³æœº</p>
<p>#ç»“åˆ1,æŸ¥çœ‹æ‰€æœ‰CPUå¹³å‡è´Ÿè½½/æ¯ä¸ªCPUçš„å…·ä½“è´Ÿè½½</p>
<p>#ç»“åˆM/P/T,æŒ‰å†…å­˜å ç”¨/CPUå ç”¨/è¿è¡Œæ—¶é—´çš„é™åºï¼ŒæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</p>
<p>top                    æ˜¾ç¤ºæ‰€æœ‰ç³»ç»Ÿä»»åŠ¡</p>
<p>free -m             æŸ¥çœ‹å†…å­˜å ç”¨ï¼Œä»¥Mä¸ºå•ä½</p>
<p>uname -a            æ‰“å°æ“ä½œç³»ç»Ÿä¿¡æ¯</p>
<p>uptime -p            æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´</p>
<p>echo $PATH            æŸ¥çœ‹ç¯å¢ƒå˜é‡</p>
<p>export PATH=$PATH:/home/sirouyang/Desktop/    è¿½åŠ ç¯å¢ƒå˜é‡</p>
<p>lsof | head -n 10    æŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ï¼ˆä¸€åˆ‡çš†æ–‡ä»¶ï¼Œæ•°æ®æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ã€ç¡¬ä»¶è®¾å¤‡ï¼‰</p>
<p>lscpu                æŸ¥çœ‹CPUä¿¡æ¯</p>
<p>time lsof        ç»Ÿè®¡å‘½ä»¤æ‰§è¡Œæ—¶é—´</p>
<p>cal/date            æŸ¥çœ‹æ—¥å†å’Œæ—¶é—´</p>
<p>date +%y-%m-%d-%H-%M-%S    æ ¼å¼åŒ–åœ°æŸ¥çœ‹æ—¶é—´</p>
<p># 0-6:0åœæœº-1å•ç”¨æˆ·å®‰å…¨æ¨¡å¼-2å¤šç”¨æˆ·å®‰å…¨æ¨¡å¼-3å¤šç”¨æˆ·ç½‘ç»œæ¨¡å¼-4ç³»ç»Ÿä¿ç•™çº§åˆ«-5å›¾å½¢ç•Œé¢-6é‡å¯</p>
<p>runlevel        æ˜¾ç¤ºå½“å‰è¿è¡Œçº§åˆ«</p>
<p>init 6            åˆ‡æ¢è¿è¡Œçº§åˆ«</p>
<p><strong>@è½¯ä»¶å®‰è£…</strong></p>
<p>//æ–¹å¼ä¸€ï¼šé€šè¿‡åŒ…ç®¡ç†å·¥å…·aptè¿›è¡Œç®¡ç†</p>
<p>sudo apt update // æ›´æ–°è½¯ä»¶æº</p>
<p>sudo apt search xxx//æŸ¥æ‰¾xxxè½¯ä»¶åŒ…</p>
<p>sudo apt install net-tools //å®‰è£…net-tools</p>
<p>sudo apt remove â€“purge net-tools //å½»åº•å¸è½½net-tools</p>
<p>//æ–¹å¼äºŒï¼šç¼–è¯‘æºç </p>
<p>wget â€œhttp://â€¦â€¦â€¦..xxx.tar.gzâ€ //ä¸‹è½½æºç åŒ…</p>
<p>tar -zxvf xxx.tar.gz //è§£å‹æºç åŒ…</p>
<p>make clean    æ¸…é™¤ç¼–è¯‘çš„åƒåœ¾</p>
<p>make        æ‰§è¡Œç¼–è¯‘</p>
<p>make install    å®‰è£…</p>
<p>make uninstall    å¸è½½</p>
<p>å¯é€‰ï¼š./configure    å¦‚æœæºç åŒ…ä¸­è‡ªå¸¦é…ç½®ç¨‹åºåˆ™æ‰§è¡Œä¹‹</p>
<p>å¯é€‰ï¼šsudo apt search libxxx //å¦‚æœç¼–è¯‘å¤±è´¥é€šå¸¸ä¼šæç¤ºç¼ºå°‘xxxä¾èµ–ï¼Œæ­¤æ—¶åº”è¯¥æœç´¢å¹¶å®‰è£…è¯¥ä¾èµ–</p>
<p>å¯é€‰ï¼šsudo apt install libxxx-dev //å®‰è£…æ£€ç´¢åˆ°çš„ä¾èµ–</p>
<p><strong>@æ–‡æœ¬å‘½ä»¤</strong></p>
<p>cat hello.py // æŸ¥çœ‹æ–‡ä»¶</p>
<p>gedit hello.py // ä½¿ç”¨geditæŸ¥çœ‹æ–‡ä»¶</p>
<p>head -n 10 hello.py // æŸ¥çœ‹å‰10è¡Œ</p>
<p>tail -n 10 hello.py // æŸ¥çœ‹å10è¡Œ</p>
<p>less hello.py // ä¸€æ¬¡æŸ¥çœ‹å°‘é‡å†…å®¹ï¼ŒPageUpå’ŒPageDowné”®ç¿»é¡µ</p>
<p>vim hello.py // ä½¿ç”¨vimæ‰“å¼€æ–‡ä»¶</p>
<p><strong>@ç®¡é“ä¸é‡å®šå‘</strong></p>
<p>sort hello.py | uniq -c // æ’åºåç»Ÿè®¡æ¬¡æ•°</p>
<p>sort hello.py | uniq -d // æ’åºåæ‰¾å‡ºé‡å¤çš„è¡Œ</p>
<p>cat /proc/cpuinfo | grep -c processor // æ˜¾ç¤ºCPUæ ¸å¿ƒæ•°</p>
<p>echo â€˜newlineâ€™ &gt; hello.py // å°†ç»“æœå†™å…¥æ–‡ä»¶ï¼ˆè¦†ç›–ï¼‰</p>
<p>echo â€˜newlineâ€™ &gt;&gt; hello.py // å°†ç»“æœè¿½åŠ åˆ°æ–‡ä»¶</p>
<p>cat &lt; ~/proc/cpuinfo //å°†æŒ‡å®šçš„æ–‡ä»¶ä½œä¸ºcatçš„è¾“å…¥</p>
<p><strong>@å‹ç¼©å’Œè§£å‹</strong></p>
<p>tar -cvf /home/abc.tar /home/abc  åªæ‰“åŒ…ï¼Œä¸å‹ç¼©ï¼ˆc=åˆ›å»ºå‹ç¼©åŒ…,v=æ‰“å°ä¿¡æ¯,f=æŒ‡å®šæ–‡ä»¶åï¼‰</p>
<p>tar -zcvf /home/abc.tar.gz /home/abc  æ‰“åŒ…ï¼Œå¹¶ç”¨gzipå‹ç¼©</p>
<p>tar -jcvf /home/abc.tar.bz2 /home/abc  æ‰“åŒ…ï¼Œå¹¶ç”¨bzip2å‹ç¼©</p>
<p>tar -xvf abc.tar è§£å‹æ™®é€štaråŒ…(x=è§£å‹ç¼©)</p>
<p>tar -zxvf abc.tar.gz è§£å‹gzå‹ç¼©åŒ…</p>
<p>tar -jxvf abc.tar.bz2 è§£å‹bz2å‹ç¼©åŒ…</p>
<p>zip -r xxx.zip abc/* fuck/* temp/* é€’å½’å‹ç¼©å¤šä¸ªæ–‡ä»¶å¤¹åˆ°xxx.zip</p>
<p>unzip xxx.zip #è§£å‹zipå‹ç¼©åŒ…</p>
<p><strong>@ç£ç›˜ç®¡ç†</strong></p>
<p>df -h /                    æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ</p>
<p>sudo du -h ~            æŸ¥çœ‹ç”¨æˆ·ç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</p>
<p>du -sh                    å½“å‰ç›®å½•çš„æ€»ä½“å ç”¨æƒ…å†µ</p>
<p>du abc.tar.gz abc.tar    æŸ¥çœ‹æ–‡ä»¶å’Œç›®å½•çš„ç£ç›˜å ç”¨</p>
<p>dd if=/dev/zero of=temp.txt bs=1K count=1024    å†™å…¥ä¸€ä¸ªå……æ»¡0çš„æ–‡ä»¶ï¼Œæ¯å—1Kï¼Œå…±1024å—ï¼Œæ€»å¤§å°1M</p>
<p>time dd if=/dev/zero of=temp.txt bs=1M count=1024    æµ‹è¯•å†™å…¥1Gæ–‡ä»¶çš„æ—¶é—´ï¼ˆä»¥æ­¤è¡¡é‡ç£ç›˜çš„è¯»å†™æ•ˆç‡ï¼‰</p>
<p><strong>@ç™»å½•æ—¥å¿—</strong></p>
<p>last æŸ¥çœ‹ç”¨æˆ·è¿‘æœŸç™»é™†æƒ…å†µ</p>
<p>last -2 æœ€è¿‘ç™»é™†çš„ä¸¤ä¸ªç”¨æˆ·</p>
<p>last -2 root æŸ¥çœ‹rootç”¨æˆ·æœ€è¿‘ä¸¤æ¬¡ç™»é™†æƒ…å†µ</p>
<p>id    æ˜¾ç¤ºç”¨æˆ·åŠå…¶ç¾¤ç»„ä¿¡æ¯</p>
<p>groups    æŸ¥çœ‹å½“å‰ç”¨æˆ·æ‰€åŠ å…¥çš„ç»„</p>
<p>whoami    æ˜¾ç¤ºå½“å‰ç”¨æˆ·åç§°</p>
<p><strong>@ç”¨æˆ·ä¸æƒé™</strong></p>
<p>groups // æŸ¥çœ‹æ‰€å±çš„å·¥ä½œç»„</p>
<p>whoami // æ˜¾ç¤ºå½“å‰ç”¨æˆ·åç§°</p>
<p>sudo useradd -m wife // æ–°å»ºwifeç”¨æˆ·ï¼Œ-m=è‡ªåŠ¨åˆ›å»ºå®¶ç›®å½•</p>
<p>sudo useradd -d /home/myson -m son //åˆ›å»ºsonç”¨æˆ·ï¼ŒæŒ‡å®šå…¶å®¶ç›®å½•ä¸º/home/myson</p>
<p>sudo useradd -g guests -G root,adm -m him //åˆ›å»ºhimç”¨æˆ·ï¼Œå±äºgroupç»„ï¼Œå…¶æ¬¡ä¹Ÿå±äºadm,rootç»„</p>
<p>sudo useradd -G guests,sudo -m -s /bin/bash mywife // æ–°å¢ä¸€ä¸ªç”¨æˆ·,-m=è‡ªåŠ¨åˆ›å»ºå®¶ç›®å½•,-sæŒ‡å®šbash</p>
<p>userdel rose åˆ é™¤rose è´¦å·</p>
<p>userdel -r rose åˆ é™¤ç”¨æˆ·åŠç›¸å…³ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆ/etc/passwd, /etc/shadow, /etc/groupç­‰ï¼‰</p>
<p>usermod -s /bin/ksh -d /home/z â€“g developer him // ä¿®æ”¹himç”¨æˆ·çš„shellã€å®¶ç›®å½•ã€æ‰€å±ç»„ç­‰ä¿¡æ¯</p>
<p>sudo passwd // ä¿®æ”¹è‡ªå·±çš„å¯†ç </p>
<p>sudo passwd mywife // ä¿®æ”¹mywifeçš„å¯†ç </p>
<p>sudo su mywife // åˆ‡æ¢ç”¨æˆ·</p>
<p>sudo su // åˆ‡æ¢åˆ°rootç”¨æˆ·</p>
<p>sudo groupadd guests // æ·»åŠ guestsç»„</p>
<p>sudo groupadd -g 101 group1 //æ·»åŠ ç»„group1ï¼Œè¯†åˆ«å·ä¸º101</p>
<p>groupdel group1 //åˆ é™¤ç»„</p>
<p>groupmod â€“g 10000 -n group3 group2 //å°†ç»„group2çš„æ ‡è¯†å·æ”¹ä¸º10000ï¼Œç»„åä¿®æ”¹ä¸ºgroup3</p>
<p>gpasswd -a u1 g1 å°†u1 åŠ å…¥åˆ° g1 ç»„</p>
<p>gpasswd -d u1 g1 å°†u1 é€€å‡º g1 ç»„</p>
<p>gpasswd -A u1 g1 å°†g1 ç»„çš„ç®¡ç†å‘˜æŒ‡æ´¾ç»™u1</p>
<p>chmod 421 hello.py // è®¾ç½®è‡ªå·±ã€ç”¨æˆ·ç»„ã€å…¶ä»–äººçš„æƒé™åˆ†åˆ«ä¸ºåªè¯»ã€åªå†™ã€åªæ‰§è¡Œ</p>
<p>chmod a+r,u+wx,g+x,o-wx hello.py // è¯¦ç»†ä¿®æ”¹å…¨éƒ¨ç”¨æˆ·ã€æ‹¥æœ‰è€…ã€ç”¨æˆ·ç»„ã€å…¶ä»–äººçš„æƒé™</p>
<p>/etc/passwdæ–‡ä»¶è¯´æ˜ï¼š</p>
<p>æ˜¯ç”¨æˆ·ç®¡ç†å·¥ä½œæ¶‰åŠçš„æœ€é‡è¦çš„ä¸€ä¸ªæ–‡ä»¶</p>
<p>å†…å®¹åŒ…å«7ä¸ªå­—æ®µï¼Œä¾‹å¦‚ himâŒ200:50:Sam san:/usr/sam:/bin/sh</p>
<p>å«ä¹‰åˆ†åˆ«ä¸º ç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</p>
<p><strong>@ç½‘ç»œç®¡ç†</strong></p>
<p>sudo apt install net-tools å®‰è£…ç½‘ç»œå·¥å…·</p>
<p>ifconfig // æŸ¥çœ‹ç½‘å¡çŠ¶æ€</p>
<p>ping 192.168.59.129    // æ£€æŸ¥ç½‘ç»œæ˜¯å¦è¿é€š</p>
<p>wget â€œ<a href="http://download.redis.io/releases/redis-4.0.9.tar.gz&quot;" target="_blank" rel="noopener">http://download.redis.io/releases/redis-4.0.9.tar.gz&quot;</a> // ä¸‹è½½redis</p>
<p>sudo apt install traceroute å®‰è£…è·¯å¾„è¿½è¸ªå·¥å…·</p>
<p>traceroute -m 100 <a href="http://www.sina.com" target="_blank" rel="noopener">www.sina.com</a>        è¿½è¸ªè·¯ç”±ä¿¡æ¯ï¼Œæœ€å¤§100è·³</p>
<p>netstat -t        åˆ—å‡ºæ‰€æœ‰TCPç«¯å£</p>
<p>netstat -r        æ˜¾ç¤ºè·¯ç”±è¡¨</p>
<p>netstat -i        æ˜¾ç¤ºæ¥å£ï¼ˆç½‘å¡ï¼‰åˆ—è¡¨</p>
<p>netstat -tpnl    æŸ¥çœ‹å·²è¿æ¥çš„TCPç«¯å£å’Œç¨‹åºå</p>
<p>netstat -anp | grep 3306 -c        æŸ¥çœ‹MySQLçš„è¿æ¥æ•°</p>
<p><strong>@è¿œç¨‹ç™»å½•</strong></p>
<p>//å®‰è£…å¹¶å¯åŠ¨sshæœåŠ¡</p>
<p>sudo apt install openssh-server å®‰è£…openssh-server</p>
<p>sudo ps -ef | grep ssh æŸ¥çœ‹SSHæœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œè¿˜å¯ä»¥netstat -tl | grep 22æˆ–systemctl status ssh</p>
<p>sudo systemctl start ssh å¦‚æœæ²¡æœ‰å¯åŠ¨åˆ™å¯åŠ¨SSHæœåŠ¡</p>
<p>//è®¿é—®è¿œç¨‹ä¸»æœºï¼ˆå‰æï¼šå¯¹æ–¹å¼€å¯äº†sshæœåŠ¡ï¼Œä¸”ä½ çŸ¥é“å¯¹æ–¹çš„å¯†ç ï¼Œæˆ–å¯¹æ–¹æŒæœ‰ä½ çš„sshå…¬é’¥ï¼‰</p>
<p>ssh <a href="mailto:root@127.0.0.1">root@127.0.0.1</a> è®¿é—®è¿œç¨‹ä¸»æœº</p>
<p>exit é€€å‡ºè¿œç¨‹è®¿é—®</p>
<p>//æ‰§è¡Œè¿œç¨‹æ‹·è´</p>
<p>scp -r <a href="mailto:sirouyang@192.168.158.129">sirouyang@192.168.158.129</a>:/abc /home/wife/Desktop/        ä»è¿œç¨‹ä¸»æœºæ‹·è´å†…å®¹åˆ°æœ¬åœ°</p>
<p>scp -r /abc <a href="mailto:sirouyang@192.168.158.129">sirouyang@192.168.158.129</a>:/home/sirouyang/Desktop/    ä»æœ¬åœ°æ‹·è´å†…å®¹å¼„åˆ°è¿œç¨‹ä¸»æœºï¼ˆå¯¹æ–¹æ²¡æœ‰æœ¬åœ°çš„å…¬é’¥æ—¶éœ€è¦å¯†ç è®¤è¯ï¼‰</p>
<p># sshå…¬é’¥äº¤æ¢è¿‡ç¨‹ï¼šè¿œç¨‹ä¸»æœºæŒæœ‰æœ¬åœ°çš„å…¬é’¥æ—¶ï¼Œsshä»¥åŠscpå¯ä»¥å…å¯†æ‰§è¡Œ</p>
<p>ssh-keygen -t rsa    ç”Ÿæˆsshç§˜é’¥å¯¹</p>
<p>scp ~/.ssh/id_rsa.pub <a href="mailto:sirouyang@192.168.158.129">sirouyang@192.168.158.129</a>:/home/sirouyang/.ssh/    ä¸Šä¼ å…¬é’¥ç»™è¿œç¨‹ä¸»æœº</p>
<p>ssh <a href="mailto:sirouyang@192.168.158.129">sirouyang@192.168.158.129</a>    sshç™»å½•è¿œç¨‹ä¸»æœº</p>
<p>cat Desktop/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys    æ“ä½œè¿œç¨‹ä¸»æœºæ·»åŠ å…¬é’¥è®¤è¯ï¼ˆä»Šåè¿œç¨‹å¯¹æœ¬åœ°sshå…å¯†ï¼‰</p>
<p>//ä¸€ç«™å¼è®©è¿œç¨‹æŒæœ‰è‡ªå·±çš„å…¬é’¥</p>
<p>ssh-copy-id <a href="mailto:sirouyang@192.168.158.128">sirouyang@192.168.158.128</a>    è®©è¿œç¨‹æŒæœ‰è‡ªå·±çš„å…¬é’¥ï¼ˆå¯¹æ–¹ä¸å¿…æ·»åŠ å…¬é’¥åˆ°authorized_keysï¼‰</p>
<p>å¦‚æœè¿œç¨‹æŒæœ‰è‡ªå·±çš„å…¬é’¥åä¾ç„¶æ— æ³•å…å¯†ç™»å½•ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè¯·å‚è€ƒï¼š <a href="https://blog.csdn.net/b_x_p/article/details/78534423" target="_blank" rel="noopener">https://blog.csdn.net/b_x_p/article/details/78534423</a></p>
<p><strong>@è¿›ç¨‹ç®¡ç†</strong></p>
<p>ps -ef // æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ï¼ˆåŒ…æ‹¬ç™»å½•çš„å…¶å®ƒç”¨æˆ·çš„è¿›ç¨‹ï¼‰</p>
<p>ps -aux //æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ï¼ˆä»…å½“å‰ç”¨æˆ·çš„è¿›ç¨‹ï¼‰</p>
<p>ps -ef | grep redis    // æŸ¥æ‰¾redisè¿›ç¨‹</p>
<p>kill -9 77157    // å¼ºè¡Œæ€æ­»æŒ‡å®špidçš„è¿›ç¨‹</p>
<p>kill -15 77157    // ç»ˆæ­¢æŒ‡å®šè¿›ç¨‹</p>
<p><strong>@æœåŠ¡ç®¡ç†</strong></p>
<p>#chkconfigæœåŠ¡ç®¡ç†</p>
<p>apt-get install sysv-rc-conf    å®‰è£…chkconfigæœåŠ¡</p>
<p>cp /usr/sbin/sysv-rc-conf /usr/sbin/chkconfig    é‡å‘½åä¸€ä¸‹å¯æ‰§è¡Œç¨‹åº</p>
<p>chkconfig â€“list            æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„å¼€æœºå¯åŠ¨çŠ¶æ€</p>
<p>chkconfig â€“list mysqld        æŸ¥çœ‹mysqlçš„å¼€æœºå¯åŠ¨çŠ¶æ€</p>
<p>chkconfig mysqld on            è®¾ç½®mysqlå¼€æœºå¯åŠ¨</p>
<p>chkconfig mysqld off        ç¦æ­¢mysqlå¼€æœºå¯åŠ¨</p>
<p>sudo apt install firewalld    å®‰è£…firewalld</p>
<p>firewall-cmd â€“state        æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p>
<p>#åŸç”Ÿçš„serviceæœåŠ¡ç®¡ç†</p>
<p>service mysql start            å¯åŠ¨mysql</p>
<p>service mysql stop            åœæ­¢mysql</p>
<p>service mysql restart        é‡å¯mysql</p>
<p>/etc/init.d/mysql start        å¯åŠ¨mysql</p>
<p>/etc/init.d/mysql stop        åœæ­¢mysql</p>
<p>/etc/init.d/mysql restart    é‡å¯mysql</p>
<p>#systemctlæœåŠ¡ç®¡ç†ï¼ˆæ¨èæ–¹å¼ï¼‰</p>
<p>systemctl status firewalld        æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p>
<p>systemctl start firewalld         å¯åŠ¨æœåŠ¡</p>
<p>systemctl stop firewalld         åœæ­¢æœåŠ¡</p>
<p>systemctl restart firewalld     é‡å¯æœåŠ¡</p>
<p>systemctl is-enabled firewalld     æŸ¥çœ‹æ˜¯å¦å¼€æœºå¯åŠ¨</p>
<p>systemctl enable firewalld        è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯</p>
<p>systemctl disable firewalld     ç¦æ­¢æœåŠ¡å¼€æœºè‡ªå¯</p>
<p><strong>@å…¶å®ƒå‘½ä»¤</strong></p>
<p>ls -i /usr/bin/python //æŸ¥çœ‹æ–‡ä»¶çš„inode</p>
<p>ln /usr/bin/python ./phln // åˆ›å»ºç¡¬é“¾æ¥ï¼ˆå…±äº«æ–‡ä»¶å…¥å£ï¼‰(ç¡¬é“¾æ¥ä¸èƒ½è·¨ç£ç›˜)</p>
<p>source ~/.bashrc // ä½¿ä¿®æ”¹åçš„bashrcç”Ÿæ•ˆ</p>
<p><strong>@ä¸€é”®å®‰è£…Ubuntuå¸¸ç”¨åº“</strong></p>
<p>sudo apt install man gcc make sudo lsof ssh openssl tree vim dnsutils iputilsâ€‘ping netâ€‘</p>
<p>tools psmisc sysstat curl telnet traceroute wget libbz2â€‘dev libpcre3 libpcre3â€‘dev</p>
<p>libreadlineâ€‘dev libsqlite3â€‘dev libsslâ€‘dev zlib1gâ€‘dev git mysqlâ€‘server mysqlâ€‘client zip</p>
<p>p7zip golang-go libncurses5-dev libmysqlclient-dev</p>
]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntu18.04è®¾ç½®å›½å†…æº</title>
    <url>/blog/Ubuntu/Ubuntu_id_05.html</url>
    <content><![CDATA[<p>ã€€ã€€Ubuntuæœ¬èº«çš„æºä½¿ç”¨çš„æ˜¯å›½å†…çš„æºï¼Œä¸‹è½½é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä¸åƒCentOSä¸€æ ·yumå®‰è£…çš„æ—¶å€™å¯¹é•œåƒç«™ç‚¹è¿›é¡¹é€‰æ‹©ï¼Œ </p>
<a id="more"></a>

<p>ã€€ã€€æ‰€ä»¥é€‰æ‹©äº†æ›´æ¢æˆå›½å†…çš„æºã€‚<br>ã€€ã€€ä»¥ä¸‹å†…å®¹æ•´åˆè‡ªç½‘ç»œ</p>
<h2 id="å¤‡ä»½-etc-apt-sources-listæ–‡ä»¶"><a href="#å¤‡ä»½-etc-apt-sources-listæ–‡ä»¶" class="headerlink" title="å¤‡ä»½/etc/apt/sources.listæ–‡ä»¶"></a>å¤‡ä»½/etc/apt/sources.listæ–‡ä»¶</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">mv /etc/apt/sources.list /etc/apt/sourses.list.backup</span><br></pre></td></tr></table></figure></div>

<h2 id="æ–°å»º-etc-apt-sources-listæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹"><a href="#æ–°å»º-etc-apt-sources-listæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹" class="headerlink" title="æ–°å»º/etc/apt/sources.listæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹"></a>æ–°å»º/etc/apt/sources.listæ–‡ä»¶å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LSL"><figure class="iseeu highlight /lsl"><table><tr><td class="code"><pre><span class="line"># æ–°å»ºsources.<span class="type">list</span></span><br><span class="line"><span class="section">touch</span> /etc/apt/sources.<span class="type">list</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€sources.listæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># å¦‚æœæ²¡æœ‰å®‰è£…vimå‘½ä»¤ï¼Œå¯ä»¥æ‰‹åŠ¨æ·»åŠ </span></span><br><span class="line">sudo gedit /etc/apt/sources.list</span><br><span class="line"><span class="comment"># æ·»åŠ å®Œæˆåä¿å­˜ï¼Œç„¶åå…³é—­</span></span><br><span class="line"><span class="comment"># å¦‚æœå·²ç»å®‰è£…äº†vimå‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span></span><br><span class="line">sudo vim /etc/apt/sources.list</span><br><span class="line"><span class="comment"># è¾“å…¥iï¼Œè¿›å…¥ç¼–è¾‘ï¼Œæ·»åŠ ä¸€ä¸‹ä»£ç ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#163æº</span></span><br><span class="line">deb http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.163.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">æ·»åŠ åæŒ‰Escé€€å‡ºç¼–è¾‘æ¨¡å¼</span><br><span class="line">è¾“å…¥ï¼š:wq    <span class="comment"># ä¿å­˜é€€å‡º</span></span><br></pre></td></tr></table></figure></div>

<h2 id="æ›´æ”¹å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤"><a href="#æ›´æ”¹å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤" class="headerlink" title="æ›´æ”¹å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤"></a>æ›´æ”¹å®Œæˆä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt upgrade</span><br></pre></td></tr></table></figure></div>

<h2 id="å…¶ä»–çš„ä¸€äº›aptå‘½ä»¤"><a href="#å…¶ä»–çš„ä¸€äº›aptå‘½ä»¤" class="headerlink" title="å…¶ä»–çš„ä¸€äº›aptå‘½ä»¤"></a>å…¶ä»–çš„ä¸€äº›aptå‘½ä»¤</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">sudo apt-get update  æ›´æ–°æº</span><br><span class="line">sudo apt-get install package å®‰è£…åŒ…</span><br><span class="line">sudo apt-get remove package åˆ é™¤åŒ…</span><br><span class="line">sudo apt-cache search package æœç´¢è½¯ä»¶åŒ…</span><br><span class="line">sudo apt-cache show package  è·å–åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚è¯´æ˜ã€å¤§å°ã€ç‰ˆæœ¬ç­‰</span><br><span class="line">sudo apt-get install package --reinstall  é‡æ–°å®‰è£…åŒ…</span><br><span class="line">sudo apt-get -f install  ä¿®å¤å®‰è£…</span><br><span class="line">sudo apt-get remove package --purge åˆ é™¤åŒ…ï¼ŒåŒ…æ‹¬é…ç½®æ–‡ä»¶ç­‰</span><br><span class="line">sudo apt-get build-dep package å®‰è£…ç›¸å…³çš„ç¼–è¯‘ç¯å¢ƒ</span><br><span class="line">sudo apt-get upgrade æ›´æ–°å·²å®‰è£…çš„åŒ…</span><br><span class="line">sudo apt-get dist-upgrade å‡çº§ç³»ç»Ÿ</span><br><span class="line">sudo apt-cache depends package äº†è§£ä½¿ç”¨è¯¥åŒ…ä¾èµ–é‚£äº›åŒ…</span><br><span class="line">sudo apt-cache rdepends package æŸ¥çœ‹è¯¥åŒ…è¢«å“ªäº›åŒ…ä¾èµ–</span><br><span class="line">sudo apt-get <span class="built_in">source</span> package  ä¸‹è½½è¯¥åŒ…çš„æºä»£ç </span><br><span class="line">sudo apt-get clean &amp;&amp; sudo apt-get autoclean æ¸…ç†æ— ç”¨çš„åŒ…</span><br><span class="line">sudo apt-get check æ£€æŸ¥æ˜¯å¦æœ‰æŸåçš„ä¾èµ–</span><br></pre></td></tr></table></figure></div>

<h2 id="å…¶ä»–å‡ ä¸ªå›½å†…çš„æºï¼š"><a href="#å…¶ä»–å‡ ä¸ªå›½å†…çš„æºï¼š" class="headerlink" title="å…¶ä»–å‡ ä¸ªå›½å†…çš„æºï¼š"></a>å…¶ä»–å‡ ä¸ªå›½å†…çš„æºï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸­ç§‘å¤§æº</span></span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"><span class="comment">#é˜¿é‡Œäº‘æº</span></span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¸…åæº</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>Ubuntu</tag>
      </tags>
  </entry>
  <entry>
    <title>axioså°è£…</title>
    <url>/blog/Vue/Vue_id_02.html</url>
    <content><![CDATA[<h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>ã€€ã€€å°è£…è¯·æ±‚çš„æ–¹å¼æœ‰å¤šç§å¤šæ ·ï¼Œç›®çš„æ˜¯å¯ä»¥ç®¡ç†vueé¡¹ç›®ä¸­axiosè¯·æ±‚çš„è·¯ç”±ã€‚</p>
<a id="more"></a>

<h2 id="åˆ›å»ºæ–‡ä»¶"><a href="#åˆ›å»ºæ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ–‡ä»¶"></a>åˆ›å»ºæ–‡ä»¶</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"># åœ¨ä¸‹é¢ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶</span><br><span class="line">components/axios_api/http.js</span><br></pre></td></tr></table></figure></div>

<h2 id="Vue-axioså°è£…"><a href="#Vue-axioså°è£…" class="headerlink" title="Vue-axioså°è£…"></a>Vue-axioså°è£…</h2><p>ã€€ã€€<strong>å°è£…åˆ°æ–‡ä»¶ï¼šcomponents/axios_api/http.jsä¸­</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line">axios.defaults.baseURL=<span class="string">"http://127.0.0.1:8000/"</span></span><br><span class="line">axios.defaults.timeout = <span class="number">10000</span>;</span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/json'</span>;</span><br><span class="line">axios.defaults.headers.put[<span class="string">'Content-Type'</span>] = <span class="string">'application/json'</span>;</span><br><span class="line"></span><br><span class="line">axios.interceptors.request.use(    </span><br><span class="line">    config =&gt; &#123;</span><br><span class="line">        <span class="comment">// æ¯æ¬¡å‘é€è¯·æ±‚ä¹‹å‰åˆ¤æ–­æ˜¯å¦å­˜åœ¨tokenï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ç»Ÿä¸€åœ¨httpè¯·æ±‚çš„headeréƒ½åŠ ä¸Štokenï¼Œä¸ç”¨æ¯æ¬¡è¯·æ±‚éƒ½æ‰‹åŠ¨æ·»åŠ äº†</span></span><br><span class="line">        <span class="comment">// å³ä½¿æœ¬åœ°å­˜åœ¨tokenï¼Œä¹Ÿæœ‰å¯èƒ½tokenæ˜¯è¿‡æœŸçš„ï¼Œæ‰€ä»¥åœ¨å“åº”æ‹¦æˆªå™¨ä¸­è¦å¯¹è¿”å›çŠ¶æ€è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">const</span> token = sessionStorage.getItem(<span class="string">"jwt_token"</span>)        </span><br><span class="line">        token &amp;&amp; (config.headers.Authorization = token)        </span><br><span class="line">        <span class="keyword">return</span> config;    </span><br><span class="line">    &#125;,    </span><br><span class="line">    error =&gt; &#123;        </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.error(error);    </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">axios.interceptors.response.use(    </span><br><span class="line">    <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">    res =&gt; res.status === <span class="number">200</span> ? <span class="built_in">Promise</span>.resolve(res) : <span class="built_in">Promise</span>.reject(res),    </span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; response &#125; = error;</span><br><span class="line">        <span class="keyword">if</span> (response) &#123;</span><br><span class="line">            <span class="comment">// è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´ </span></span><br><span class="line">            errorHandle(response.status, response.data.message);</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¤„ç†æ–­ç½‘çš„æƒ…å†µ</span></span><br><span class="line">            <span class="comment">// eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€</span></span><br><span class="line">            <span class="comment">// networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—</span></span><br><span class="line">            <span class="comment">// å…³äºæ–­ç½‘ç»„ä»¶ä¸­çš„åˆ·æ–°é‡æ–°è·å–æ•°æ®ï¼Œä¼šåœ¨æ–­ç½‘ç»„ä»¶ä¸­è¯´æ˜</span></span><br><span class="line">            store.commit(<span class="string">'changeNetwork'</span>, <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">axios_get</span>(<span class="params">url,params</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">        (resolve,reject)=&gt;&#123;</span><br><span class="line">            axios.get(url,&#123;<span class="attr">params</span>:params&#125;)</span><br><span class="line">            .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å°è£…ä¿¡æ¯çš„çš„res"</span>,res)</span><br><span class="line">                resolve(res.data)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">                reject(err.data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">axios_post</span>(<span class="params">url,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">        (resolve,reject)=&gt;&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data)</span><br><span class="line">            axios.post(url,<span class="built_in">JSON</span>.stringify(data))</span><br><span class="line">            .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å°è£…ä¿¡æ¯çš„çš„res"</span>,res)</span><br><span class="line">                resolve(res.data)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">                reject(err.data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">axios_put</span>(<span class="params">url,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">        (resolve,reject)=&gt;&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data)</span><br><span class="line">            axios.put(url,<span class="built_in">JSON</span>.stringify(data))</span><br><span class="line">            .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å°è£…ä¿¡æ¯çš„çš„res"</span>,res)</span><br><span class="line">                resolve(res.data)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">                reject(err.data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">axios_delete</span>(<span class="params">url,data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">        (resolve,reject)=&gt;&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data)</span><br><span class="line">            axios.delete(url,&#123;<span class="attr">params</span>:data&#125;)</span><br><span class="line">            .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"å°è£…ä¿¡æ¯çš„çš„res"</span>,res)</span><br><span class="line">                resolve(res.data)</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">                reject(err.data)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h2 id="å¯¼å‡ºä½¿ç”¨ï¼š"><a href="#å¯¼å‡ºä½¿ç”¨ï¼š" class="headerlink" title="å¯¼å‡ºä½¿ç”¨ï¼š"></a>å¯¼å‡ºä½¿ç”¨ï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;axios_get,axios_post,axios_delete,axios_put&#125; <span class="keyword">from</span> <span class="string">'./http.js'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> jwt_send_get = <span class="function"><span class="params">p</span>  =&gt;</span> axios_get(<span class="string">"/appjwt/index01/"</span>,p)</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Gité…ç½®å¯†é’¥</title>
    <url>/blog/Git/Git_id_05.html</url>
    <content><![CDATA[<p>1.æœ¬åœ°å®‰è£…å¥½gitï¼›</p>
<p>2.æ¡Œé¢å³é”® Git Bash Here æ‰“å¼€gitå‘½ä»¤è¡Œï¼›</p>
<a id="more"></a>

<p>3.ssh-keygen -t rsa -C â€œ<a href="mailto:XXXXX@XXX.com">XXXXX@XXX.com</a>â€œ   ï¼ˆä½ çš„é‚®ç®±,å…¨éƒ¨æŒ‰enterï¼‰ï¼›</p>
<p>4.cd ~/.ssh   ï¼ˆå¦‚æœæ²¡æœ‰æ‰§è¡Œç¬¬ä¸‰æ­¥ï¼Œåˆ™ä¸ä¼šæœ‰è¿™ä¸ªæ–‡ä»¶å¤¹ï¼‰ï¼›</p>
<p>5.cat id_rsa.pub     åœ¨å‘½ä»¤è¡Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šç›´æ¥è¾“å‡ºå¯†é’¥ï¼›</p>
<p>6.å¤åˆ¶ï¼Œæ‰“å¼€github   ï¼Œç‚¹è‡ªå·±å¤´åƒ &gt;&gt; settings &gt;&gt; SSH and GPG keys &gt;&gt;New SSH key </p>
<p>7.titile  éšä¾¿å†™ã€‚  keyé‡Œ    ç²˜è´´ç¬¬å…­æ­¥çš„å†…å®¹ï¼›å®Œæˆã€‚</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitå¸¸ç”¨å‘½ä»¤</title>
    <url>/blog/Git/Git_id_04.html</url>
    <content><![CDATA[<h3 id="1-å¼ºåˆ¶æ¨é€ï¼ˆæ…ç”¨ï¼Œé™¤éä½ è®¤ä¸ºå…¶ä»–å†²çªç­‰å¯ä»¥ä¸¢å¼ƒ-æˆ–è€…ä¸æ˜¯å¾ˆé‡è¦ï¼‰"><a href="#1-å¼ºåˆ¶æ¨é€ï¼ˆæ…ç”¨ï¼Œé™¤éä½ è®¤ä¸ºå…¶ä»–å†²çªç­‰å¯ä»¥ä¸¢å¼ƒ-æˆ–è€…ä¸æ˜¯å¾ˆé‡è¦ï¼‰" class="headerlink" title="1.å¼ºåˆ¶æ¨é€ï¼ˆæ…ç”¨ï¼Œé™¤éä½ è®¤ä¸ºå…¶ä»–å†²çªç­‰å¯ä»¥ä¸¢å¼ƒ æˆ–è€…ä¸æ˜¯å¾ˆé‡è¦ï¼‰"></a>1.å¼ºåˆ¶æ¨é€ï¼ˆæ…ç”¨ï¼Œé™¤éä½ è®¤ä¸ºå…¶ä»–å†²çªç­‰å¯ä»¥ä¸¢å¼ƒ æˆ–è€…ä¸æ˜¯å¾ˆé‡è¦ï¼‰</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ADA"><figure class="iseeu highlight /ada"><table><tr><td class="code"><pre><span class="line">git push <span class="comment">-- force</span></span><br></pre></td></tr></table></figure></div>

<a id="more"></a>

<h3 id="2-åˆ›å»ºæ–‡ä»¶ç­‰å°å‘½ä»¤"><a href="#2-åˆ›å»ºæ–‡ä»¶ç­‰å°å‘½ä»¤" class="headerlink" title="2.åˆ›å»ºæ–‡ä»¶ç­‰å°å‘½ä»¤"></a>2.åˆ›å»ºæ–‡ä»¶ç­‰å°å‘½ä»¤</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="STATA"><figure class="iseeu highlight /stata"><table><tr><td class="code"><pre><span class="line">touch a <span class="comment">// åˆ›å»ºä¸€ä¸ªaæ–‡ä»¶</span></span><br><span class="line">echo 1234 &gt;&gt; a <span class="comment">// æŠŠ1234è¿™ä¸ªå†…å®¹æ”¾å…¥aæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">cat</span> a <span class="comment">// æ‰“å¼€aæ–‡ä»¶ è¯»å–å‡ºaæ–‡ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">mkdir</span> <span class="keyword">test</span> <span class="comment">// åˆ›å»ºtestæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">rm</span> æ–‡ä»¶å <span class="comment">// åˆ é™¤æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">pwd</span> <span class="comment">// æ‰“å°å½“å‰å·¥ä½œè·¯å¾„</span></span><br></pre></td></tr></table></figure></div>

<h3 id="3-å®‰è£…gitçš„æ—¶å€™-éƒ½ä¼šå®‰è£…git-bashå’Œgit-GUI-æˆ‘ä»¬å®Œå…¨ä¹Ÿå¯ä»¥ä½¿ç”¨git-GUIæ¥æäº¤ç‰ˆæœ¬-ä¸sourcetreeç­‰åŠŸèƒ½ç›¸åŒ"><a href="#3-å®‰è£…gitçš„æ—¶å€™-éƒ½ä¼šå®‰è£…git-bashå’Œgit-GUI-æˆ‘ä»¬å®Œå…¨ä¹Ÿå¯ä»¥ä½¿ç”¨git-GUIæ¥æäº¤ç‰ˆæœ¬-ä¸sourcetreeç­‰åŠŸèƒ½ç›¸åŒ" class="headerlink" title="3.å®‰è£…gitçš„æ—¶å€™ éƒ½ä¼šå®‰è£…git bashå’Œgit GUI æˆ‘ä»¬å®Œå…¨ä¹Ÿå¯ä»¥ä½¿ç”¨git GUIæ¥æäº¤ç‰ˆæœ¬ ä¸sourcetreeç­‰åŠŸèƒ½ç›¸åŒ"></a>3.å®‰è£…gitçš„æ—¶å€™ éƒ½ä¼šå®‰è£…git bashå’Œgit GUI æˆ‘ä»¬å®Œå…¨ä¹Ÿå¯ä»¥ä½¿ç”¨git GUIæ¥æäº¤ç‰ˆæœ¬ ä¸sourcetreeç­‰åŠŸèƒ½ç›¸åŒ</h3><figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line">gitk <span class="comment">// ç”¨gitå‘½ä»¤å¿«é€Ÿæ‰“å¼€git GUI</span></span><br></pre></td></tr></table></figure>

<h3 id="4-æ–‡ä»¶ä¿¡æ¯"><a href="#4-æ–‡ä»¶ä¿¡æ¯" class="headerlink" title="4.æ–‡ä»¶ä¿¡æ¯"></a>4.æ–‡ä»¶ä¿¡æ¯</h3><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ls</span> <span class="string">//</span> æŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶å</span><br><span class="line"><span class="keyword">ls</span> æ–‡ä»¶å¤¹å <span class="string">//</span> æŸ¥çœ‹å¯¹åº”æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹</span><br><span class="line"><span class="keyword">ls</span> -l <span class="string">//</span> æ‹‰å‡ºæœ€è¿‘gitæäº¤è®°å½•ä»¥åŠå¯¹åº”ä¿®æ”¹çš„æ–‡ä»¶å</span><br><span class="line"><span class="keyword">ls</span> -l -a <span class="string">//</span> æ‹‰å‡ºæœ€è¿‘gitæäº¤è®°å½•ä»¥åŠå¯¹åº”ä¿®æ”¹çš„æ–‡ä»¶åï¼Œéšè—çš„æ–‡ä»¶ä¹Ÿä¼šæ˜¾ç¤º</span><br></pre></td></tr></table></figure>

<h3 id="5-cdå¿«é€Ÿåˆ‡æ¢è·¯å¾„"><a href="#5-cdå¿«é€Ÿåˆ‡æ¢è·¯å¾„" class="headerlink" title="5.cdå¿«é€Ÿåˆ‡æ¢è·¯å¾„"></a>5.cdå¿«é€Ÿåˆ‡æ¢è·¯å¾„</h3><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~ <span class="string">//</span> å°†å·¥ä½œè·¯å¾„å¿«é€Ÿåˆ‡æ¢åˆ°root</span><br><span class="line"><span class="keyword">cd</span> - <span class="string">//</span> å°†å·¥ä½œè·¯å¾„åˆ‡æ¢åˆ°ä¸Šä¸€çŠ¶æ€</span><br><span class="line"><span class="keyword">cd</span> <span class="string">../</span> <span class="string">//</span> åˆ‡å›åˆ°ä¸Šä¸€ä¸ªå·¥ä½œè·¯å¾„</span><br><span class="line"><span class="keyword">cd</span> æ–‡ä»¶å¤¹å <span class="string">//</span> è¿›å…¥æŸä¸ªç›®å½•</span><br><span class="line"><span class="keyword">cd</span> / <span class="string">//</span> è¿›å…¥æ ¹ç›®å½•</span><br></pre></td></tr></table></figure>

<h3 id="6-vimæ¨¡å¼"><a href="#6-vimæ¨¡å¼" class="headerlink" title="6.vimæ¨¡å¼"></a>6.vimæ¨¡å¼</h3><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">vim æ–‡ä»¶å <span class="string">//</span> æ–°å»ºä¸€ä¸ªæ–‡ä»¶</span><br><span class="line">i æ’å…¥å†…å®¹</span><br><span class="line">æŒ‰ä¸‹esc <span class="function">:wq</span> ä¿å­˜å¹¶é€€å‡º</span><br><span class="line">æŒ‰ä¸‹esc <span class="function">:q</span> ç›´æ¥é€€å‡º</span><br><span class="line">vim æ¨¡å¼ä¸‹ æ–‡ä»¶ä¸­<span class="comment">#å·å¼€å¤´çš„ä¸ºæ³¨é‡Š</span></span><br><span class="line"><span class="string">.project</span> å¿½ç•¥<span class="string">.project</span>æ–‡ä»¶</span><br><span class="line">*<span class="string">.obj</span> æˆ–è€… *<span class="string">.exe</span> å¿½ç•¥ä¸€ç±»æ–‡ä»¶ ä¾‹å¦‚ä»¥<span class="string">.obj</span> <span class="string">.exe</span> ç»“å°¾çš„æ–‡ä»¶</span><br><span class="line">git check-ignore -v <span class="string">.project</span> æŸ¥çœ‹ignoreä¸­<span class="string">.project</span>çš„ä½ç½®</span><br></pre></td></tr></table></figure>

<h3 id="7-å¸¸ç”¨git-å‘½ä»¤"><a href="#7-å¸¸ç”¨git-å‘½ä»¤" class="headerlink" title="7.å¸¸ç”¨git å‘½ä»¤"></a>7.å¸¸ç”¨git å‘½ä»¤</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CS"><figure class="iseeu highlight /cs"><table><tr><td class="code"><pre><span class="line">git init <span class="comment">// åˆå§‹åŒ– åœ¨å·¥ä½œè·¯å¾„ä¸Šåˆ›å»ºä¸»åˆ†æ”¯</span></span><br><span class="line">git clone åœ°å€ <span class="comment">// å…‹éš†è¿œç¨‹ä»“åº“</span></span><br><span class="line">git clone -b åˆ†æ”¯å åœ°å€ <span class="comment">// å…‹éš†åˆ†æ”¯çš„ä»£ç åˆ°æœ¬åœ°</span></span><br><span class="line">git status <span class="comment">// æŸ¥çœ‹çŠ¶æ€</span></span><br><span class="line">git <span class="keyword">add</span> æ–‡ä»¶å <span class="comment">// å°†æŸä¸ªæ–‡ä»¶å­˜å…¥æš‚å­˜åŒº</span></span><br><span class="line">git <span class="keyword">add</span> b c <span class="comment">//æŠŠbå’Œcå­˜å…¥æš‚å­˜åŒº</span></span><br><span class="line">git <span class="keyword">add</span> . <span class="comment">// å°†æ‰€æœ‰æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git <span class="keyword">add</span> -p æ–‡ä»¶å <span class="comment">// ä¸€ä¸ªæ–‡ä»¶åˆ†å¤šæ¬¡æäº¤</span></span><br><span class="line">git stash -u -k <span class="comment">// æäº¤éƒ¨åˆ†æ–‡ä»¶å†…å®¹ åˆ°ä»“åº“ ä¾‹å¦‚æœ¬åœ°æœ‰3ä¸ªæ–‡ä»¶ a b c åªæƒ³æäº¤a båˆ°è¿œç¨‹ä»“åº“ git add a b ç„¶å git stash -u -k å†ç„¶ågit commit -m "å¤‡æ³¨ä¿¡æ¯" ç„¶åå†push pushä¹‹å git stash pop æŠŠä¹‹å‰æ”¾å…¥å †æ ˆçš„cæ‹¿å‡ºæ¥ ç»§ç»­ä¸‹ä¸€æ³¢æ“ä½œ</span></span><br><span class="line">git commit -m <span class="string">"æäº¤çš„å¤‡æ³¨ä¿¡æ¯"</span>  <span class="comment">// æäº¤åˆ°ä»“åº“</span></span><br><span class="line">è‹¥å·²ç»æœ‰è‹¥å¹²æ–‡ä»¶æ”¾å…¥ä»“åº“ï¼Œå†æ¬¡æäº¤å¯ä»¥ä¸ç”¨git <span class="keyword">add</span>å’Œgit commit -m <span class="string">"å¤‡æ³¨ä¿¡æ¯"</span> è¿™<span class="number">2</span>æ­¥ï¼Œ ç›´æ¥ç”¨</span><br><span class="line">git commit -am <span class="string">"å¤‡æ³¨ä¿¡æ¯"</span> <span class="comment">// å°†å†…å®¹æ”¾è‡³ä»“åº“ ä¹Ÿå¯ç”¨git commit -a -m "å¤‡æ³¨ä¿¡æ¯"</span></span><br><span class="line"></span><br><span class="line">* git commitä¸­çš„å¤‡æ³¨ä¿¡æ¯å°½é‡å®Œå–„ å…»æˆè‰¯å¥½æäº¤ä¹ æƒ¯ ä¾‹å¦‚ git commit -m <span class="string">"å˜æ›´(èŒƒå›´)ï¼šå˜æ›´çš„å†…å®¹"</span></span><br></pre></td></tr></table></figure></div>

<h3 id="8-å­˜å‚¨å¯†ç å‡­è¯-è®¾ç½®åˆ«å-è·å–configä¿¡æ¯ä»¥åŠé…ç½®"><a href="#8-å­˜å‚¨å¯†ç å‡­è¯-è®¾ç½®åˆ«å-è·å–configä¿¡æ¯ä»¥åŠé…ç½®" class="headerlink" title="8.å­˜å‚¨å¯†ç å‡­è¯ è®¾ç½®åˆ«å è·å–configä¿¡æ¯ä»¥åŠé…ç½®"></a>8.å­˜å‚¨å¯†ç å‡­è¯ è®¾ç½®åˆ«å è·å–configä¿¡æ¯ä»¥åŠé…ç½®</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="VERILOG"><figure class="iseeu highlight /verilog"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">config</span> --list <span class="comment">// è·å–configä¿¡æ¯</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> core<span class="variable">.safecrlf</span> false <span class="comment">// å»æ‰git add å‘½ä»¤å å‡ºç°çš„ä¸€å †CR LFæç¤ºä¿¡æ¯</span></span><br><span class="line">å…¶ä¸­CRæ˜¯å›è½¦çš„æ„æ€ LFæ˜¯æ¢è¡Œ</span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> credential<span class="variable">.helper</span> wincred <span class="comment">// å­˜å‚¨å‡­è¯ (å¯ç”¨äºè¾“å…¥ä¸€æ¬¡ç”¨æˆ·å¯†ç åï¼Œä¸å†è¾“å…¥ æœ‰æ—¶æˆ‘ä»¬å·²ç»ç”¨SSH key ç»‘å®šå…³è”å¥½äº† ä½†æ˜¯æ¯æ¬¡gitæäº¤çš„æ—¶å€™ è¿˜æ˜¯éœ€è¦ä½ è¾“å…¥ç”¨æˆ·åå¯†ç  åœ¨è¿™ä¸ªæ—¶å€™ æ•²å…¥è¿™ä¸ªå‘½ä»¤ å°†å‡­è¯å­˜å‚¨èµ·æ¥ ç”¨æˆ·åå¯†ç å°±ä¸éœ€è¦å†æ¬¡è¾“å…¥äº†)</span></span><br><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> <span class="keyword">alias</span><span class="variable">.ci</span> commit <span class="comment">// å°†commitå‘½ä»¤è®¾ç½®åˆ«åci git commitå‘½ä»¤å°†ç”±git ciæ¥ä»£æ›¿</span></span><br></pre></td></tr></table></figure></div>

<h3 id="9-æŸ¥çœ‹gitå¸¸ç”¨å‘½ä»¤"><a href="#9-æŸ¥çœ‹gitå¸¸ç”¨å‘½ä»¤" class="headerlink" title="9.æŸ¥çœ‹gitå¸¸ç”¨å‘½ä»¤"></a>9.æŸ¥çœ‹gitå¸¸ç”¨å‘½ä»¤</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DELPHI"><figure class="iseeu highlight /delphi"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">helper</span> -a <span class="comment">// æŸ¥çœ‹å…¨éƒ¨gitå­å‘½ä»¤</span></span><br></pre></td></tr></table></figure></div>

<h3 id="10-é€è¡ŒæŸ¥çœ‹æ–‡ä»¶çš„ä¿®æ”¹å†å²"><a href="#10-é€è¡ŒæŸ¥çœ‹æ–‡ä»¶çš„ä¿®æ”¹å†å²" class="headerlink" title="10.é€è¡ŒæŸ¥çœ‹æ–‡ä»¶çš„ä¿®æ”¹å†å²"></a>10.é€è¡ŒæŸ¥çœ‹æ–‡ä»¶çš„ä¿®æ”¹å†å²</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">git blame æ–‡ä»¶å <span class="comment">// æŸ¥çœ‹è¯¥æ–‡ä»¶çš„ä¿®æ”¹å†å²</span></span><br><span class="line">git blame -L <span class="number">100</span>,<span class="number">10</span> æ–‡ä»¶å <span class="comment">// ä»100è¡Œå¼€å§‹ï¼Œåˆ°110è¡Œ é€è¡ŒæŸ¥çœ‹æ–‡ä»¶çš„ä¿®æ”¹å†å²</span></span><br></pre></td></tr></table></figure></div>

<h3 id="11-æ¸…é™¤"><a href="#11-æ¸…é™¤" class="headerlink" title="11.æ¸…é™¤"></a>11.æ¸…é™¤</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ASPECTJ"><figure class="iseeu highlight /aspectj"><table><tr><td class="code"><pre><span class="line">git clean -n <span class="comment">// åˆ—å‡ºæ‰“ç®—æ¸…é™¤çš„æ¡£æ¡ˆ(é¦–å…ˆä¼šå¯¹å·¥ä½œåŒºçš„å†…å®¹è¿›è¡Œæç¤º)</span></span><br><span class="line">git clean -f <span class="comment">// çœŸæ­£çš„åˆ é™¤</span></span><br><span class="line">git clean -x -f <span class="comment">// è¿.gitignoreä¸­å¿½ç•¥çš„æ¡£æ¡ˆä¹Ÿåˆ é™¤</span></span><br><span class="line">git status -sb (sbæ˜¯ <span class="keyword">short</span> branch) <span class="comment">// ç®€æ´çš„è¾“å‡ºgit statusä¸­çš„ä¿¡æ¯</span></span><br></pre></td></tr></table></figure></div>

<h3 id="12-åˆ é™¤æ”¾å…¥æš‚å­˜åŒºæ–‡ä»¶çš„æ–¹æ³•ï¼ˆå·²commitåï¼‰"><a href="#12-åˆ é™¤æ”¾å…¥æš‚å­˜åŒºæ–‡ä»¶çš„æ–¹æ³•ï¼ˆå·²commitåï¼‰" class="headerlink" title="12.åˆ é™¤æ”¾å…¥æš‚å­˜åŒºæ–‡ä»¶çš„æ–¹æ³•ï¼ˆå·²commitåï¼‰"></a>12.åˆ é™¤æ”¾å…¥æš‚å­˜åŒºæ–‡ä»¶çš„æ–¹æ³•ï¼ˆå·²commitåï¼‰</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">git rm æ–‡ä»¶å // å°†è¯¥æ–‡ä»¶ä»<span class="keyword">commit</span>åæ’¤å›åˆ°<span class="keyword">add</span>å</span><br><span class="line">git <span class="keyword">reset</span> <span class="keyword">HEAD</span>^ <span class="comment">--hard // åˆ é™¤å å¯ä»¥ç”¨git rm æ–‡ä»¶åå†å›æ’¤ä¸€æ­¥</span></span><br></pre></td></tr></table></figure></div>

<h3 id="13-æŸ¥çœ‹æäº¤å†…å®¹"><a href="#13-æŸ¥çœ‹æäº¤å†…å®¹" class="headerlink" title="13.æŸ¥çœ‹æäº¤å†…å®¹"></a>13.æŸ¥çœ‹æäº¤å†…å®¹</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">git hi <span class="number">-5</span> <span class="comment">// æŸ¥çœ‹å‰5æ¡å†…å®¹</span></span><br><span class="line">git hi --grep hello <span class="comment">// è¿‡æ»¤æäº¤ä¿¡æ¯é‡Œæœ‰helloå­—çœ¼çš„å†…å®¹</span></span><br></pre></td></tr></table></figure></div>

<h3 id="14-ä¿®æ”¹æ–‡ä»¶åä»¥åŠç§»åŠ¨"><a href="#14-ä¿®æ”¹æ–‡ä»¶åä»¥åŠç§»åŠ¨" class="headerlink" title="14.ä¿®æ”¹æ–‡ä»¶åä»¥åŠç§»åŠ¨"></a>14.ä¿®æ”¹æ–‡ä»¶åä»¥åŠç§»åŠ¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="STYLUS"><figure class="iseeu highlight /stylus"><table><tr><td class="code"><pre><span class="line">git mv <span class="selector-tag">a</span> <span class="selector-tag">b</span> <span class="comment">// æŠŠaæ–‡ä»¶åå­—æ”¹æˆb å¹¶ä¸”ç›´æ¥æ”¾å…¥git addåçš„æš‚å­˜åŒº</span></span><br><span class="line">git mv <span class="selector-tag">b</span> ./demos/ <span class="comment">// æŠŠbæ–‡ä»¶ç§»åŠ¨åˆ°demosæ–‡ä»¶å¤¹ä¸‹</span></span><br></pre></td></tr></table></figure></div>

<h3 id="15-å¯¹æ¯”å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œä»“åº“çš„å·®å¼‚"><a href="#15-å¯¹æ¯”å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œä»“åº“çš„å·®å¼‚" class="headerlink" title="15.å¯¹æ¯”å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œä»“åº“çš„å·®å¼‚"></a>15.å¯¹æ¯”å·¥ä½œåŒºï¼Œæš‚å­˜åŒºï¼Œä»“åº“çš„å·®å¼‚</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">git diff <span class="comment">// æŸ¥çœ‹å˜æ›´ å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„å·®å¼‚æ¯”å¯¹</span></span><br><span class="line">git diff --cached <span class="comment">// æš‚å­˜åŒºä¸æäº¤ç‰ˆæœ¬çš„å·®å¼‚</span></span><br><span class="line">git diff HEAD <span class="comment">// å·¥ä½œåŒºä¸ä»“åº“ä¸­æœ€åä¸€æ¬¡æäº¤ç‰ˆæœ¬çš„å·®åˆ«</span></span><br><span class="line">git diff ç‰ˆæœ¬å“ˆå¸Œå€¼ ç‰ˆæœ¬å“ˆå¸Œå€¼ <span class="comment">// æŸ¥çœ‹è¿™2ä¸ªç‰ˆæœ¬å“ˆå¸Œä¹‹é—´çš„åŒºåˆ«</span></span><br><span class="line">æˆ–è€… git diff HEAD~æ•°å­— HEAD~æ•°å­—</span><br><span class="line"></span><br><span class="line">git tag tt HEAD~<span class="number">4</span> ç»™å€’æ•°ç¬¬<span class="number">5</span>æ¬¡æäº¤æ‰“ä¸€ä¸ªtag tagåå­—æ˜¯tt</span><br><span class="line">git diff tt å°±æ˜¯å€’æ•°ç¬¬<span class="number">5</span>ä¸ªç‰ˆæœ¬ä¸ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚</span><br><span class="line">git diff --cached tt æš‚å­˜åŒºä¸å€’æ•°ç¬¬<span class="number">5</span>ä¸ªç‰ˆæœ¬ä¹‹é—´çš„æ¯”å¯¹</span><br></pre></td></tr></table></figure></div>

<h3 id="16-æŸ¥çœ‹æäº¤ä¿¡æ¯"><a href="#16-æŸ¥çœ‹æäº¤ä¿¡æ¯" class="headerlink" title="16.æŸ¥çœ‹æäº¤ä¿¡æ¯"></a>16.æŸ¥çœ‹æäº¤ä¿¡æ¯</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">show</span> <span class="keyword">HEAD</span> // æŸ¥çœ‹æœ€åä¸€æ¬¡æäº¤ä¿®æ”¹çš„è¯¦ç»†ä¿¡æ¯ ä¹Ÿå¯ä»¥ç”¨git <span class="keyword">show</span> å“ˆå¸Œå€¼ æŸ¥çœ‹å¯¹åº”çš„å†…å®¹</span><br><span class="line">git <span class="keyword">show</span> <span class="keyword">HEAD</span>^ // æŸ¥çœ‹å€’æ•°ç¬¬äºŒæ¬¡çš„æäº¤ä¿®æ”¹è¯¦ç»†ä¿¡æ¯</span><br><span class="line">git <span class="keyword">show</span> <span class="keyword">HEAD</span>^^ æˆ–è€…git <span class="keyword">show</span> <span class="keyword">HEAD</span>~<span class="number">2</span> æŸ¥çœ‹å‰<span class="number">2</span>æ¬¡å˜æ›´</span><br><span class="line">git <span class="keyword">show</span> <span class="keyword">HEAD</span> æˆ– git <span class="keyword">show</span> å“ˆå¸Œå€¼ æˆ–è€…git <span class="keyword">show</span> tag(æ ‡ç­¾å) éƒ½å¯ä»¥æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡æäº¤çš„è¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure></div>

<h3 id="17-æŸ¥çœ‹ä¿¡æ¯"><a href="#17-æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="17.æŸ¥çœ‹ä¿¡æ¯"></a>17.æŸ¥çœ‹ä¿¡æ¯</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LIVECODESERVER"><figure class="iseeu highlight /livecodeserver"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">log</span> <span class="comment">--pretty=format:'%h %ad | %s%d [%an]' --graph --date=short</span></span><br><span class="line">// è·å–git <span class="built_in">log</span>é‡Œçš„æ ‘å½¢è¯¦ç»†ä¿¡æ¯ åŒ…æ‹¬hasg æ—¥æœŸ æäº¤ä¿¡æ¯ æäº¤äººç­‰</span><br><span class="line">git <span class="built_in">log</span> <span class="comment">--oneline //æ‹‰å‡ºæ‰€æœ‰æäº¤ä¿¡æ¯ qæ˜¯é€€å‡º</span></span><br><span class="line">git <span class="built_in">log</span> <span class="number">-5</span><span class="comment"> // æŸ¥çœ‹å‰5æ¬¡çš„æäº¤è®°å½•</span></span><br><span class="line">git <span class="built_in">log</span> <span class="comment">--oneline -5 // æ‰“å°å‡ºçš„æ—¥å¿—é‡Œé¢åªæœ‰å“ˆå¸Œå€¼å’Œä¿®æ”¹çš„å†…å®¹å¤‡æ³¨</span></span><br><span class="line">git <span class="built_in">log</span> æ–‡ä»¶å<span class="comment"> // æŸ¥çœ‹è¯¥æ–‡ä»¶çš„æäº¤</span></span><br><span class="line">git <span class="built_in">log</span> <span class="comment">--grep // æƒ³è¿‡æ»¤çœ‹åˆ°çš„å†…å®¹   è¿‡æ»¤æ—¥å¿—</span></span><br><span class="line">git <span class="built_in">log</span> -n<span class="comment"> // æŸ¥çœ‹è¿‘æœŸæäº¤çš„næ¡ä¿¡æ¯å†…å®¹</span></span><br><span class="line">git <span class="built_in">log</span> -p<span class="comment"> // æŸ¥çœ‹è¯¦ç»†æäº¤è®°å½•</span></span><br></pre></td></tr></table></figure></div>

<h3 id="18-å˜åŸºæ“ä½œï¼Œæ”¹å†™å†å²æäº¤-æŠŠå¤šæ¬¡æäº¤åˆå¹¶èµ·æ¥"><a href="#18-å˜åŸºæ“ä½œï¼Œæ”¹å†™å†å²æäº¤-æŠŠå¤šæ¬¡æäº¤åˆå¹¶èµ·æ¥" class="headerlink" title="18.å˜åŸºæ“ä½œï¼Œæ”¹å†™å†å²æäº¤ æŠŠå¤šæ¬¡æäº¤åˆå¹¶èµ·æ¥"></a>18.å˜åŸºæ“ä½œï¼Œæ”¹å†™å†å²æäº¤ æŠŠå¤šæ¬¡æäº¤åˆå¹¶èµ·æ¥</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">git rebase -i HEAD~<span class="number">3</span> å˜åŸºä¹‹åçš„å“ˆå¸Œå€¼ä¸ä¹‹å‰çš„ä¸åŒ è¯æ˜å˜åŸºæ˜¯é‡æ–°åšçš„æäº¤ æŠŠå¤šæ¬¡æäº¤åˆå¹¶æˆäº†å‡ æ¬¡æäº¤</span><br></pre></td></tr></table></figure></div>

<h3 id="19-å›æ’¤æ“ä½œ"><a href="#19-å›æ’¤æ“ä½œ" class="headerlink" title="19.å›æ’¤æ“ä½œ"></a>19.å›æ’¤æ“ä½œ</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">commit</span> <span class="comment">--amend -m "æäº¤ä¿¡æ¯" // å›æ’¤ä¸Šä¸€æ¬¡æäº¤å¹¶ä¸æœ¬æ¬¡å·¥ä½œåŒºä¸€èµ·æäº¤</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="keyword">HEAD</span>~<span class="number">2</span> <span class="comment">--hard // å›æ’¤2æ­¥</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--files // ä»ä»“åº“å›æ’¤åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="keyword">HEAD</span> // å›æ’¤æš‚å­˜åŒºå†…å®¹åˆ°å·¥ä½œç›®å½•</span><br><span class="line">git <span class="keyword">reset</span> <span class="keyword">HEAD</span> <span class="comment">--soft å›æ’¤æäº¤åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="keyword">HEAD</span> <span class="comment">--hard // å›æ’¤æäº¤ æ”¾å¼ƒå˜æ›´ (æ…ç”¨)</span></span><br><span class="line">git <span class="keyword">reset</span> <span class="keyword">HEAD</span>^  // å›æ’¤ä»“åº“æœ€åä¸€æ¬¡æäº¤</span><br><span class="line">git <span class="keyword">reset</span> <span class="comment">--hard commitid // å›æ’¤åˆ°è¯¥æ¬¡æäº¤idçš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line">git push -f -u origin åˆ†æ”¯å æ‰€æœ‰å†…å®¹éƒ½å›æ’¤å®Œäº† å°†å›æ’¤åçš„æ“ä½œå¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯</span><br></pre></td></tr></table></figure></div>

<h3 id="20-æ ‡ç­¾æ“ä½œ"><a href="#20-æ ‡ç­¾æ“ä½œ" class="headerlink" title="20.æ ‡ç­¾æ“ä½œ"></a>20.æ ‡ç­¾æ“ä½œ</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LASSO"><figure class="iseeu highlight /lasso"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">tag</span> <span class="comment">// æŸ¥çœ‹åˆ—å‡ºæ‰€æœ‰æ‰“è¿‡çš„æ ‡ç­¾å</span></span><br><span class="line">git <span class="built_in">tag</span> <span class="params">-d</span> æ ‡ç­¾å <span class="comment">// åˆ é™¤å¯¹åº”æ ‡ç­¾</span></span><br><span class="line">git <span class="built_in">tag</span> æ ‡ç­¾åå­— <span class="comment">// åœ¨å½“å‰ä»“åº“æ‰“ä¸ªæ ‡ç­¾</span></span><br><span class="line">git <span class="built_in">tag</span> foo <span class="params">-m</span> <span class="string">"message"</span> <span class="comment">// åœ¨å½“å‰æäº¤ä¸Šï¼Œæ‰“æ ‡ç­¾foo å¹¶ç»™messageä¿¡æ¯æ³¨é‡Š</span></span><br><span class="line">git <span class="built_in">tag</span> æ ‡ç­¾å å“ˆå¸Œå€¼ <span class="params">-m</span> <span class="string">"message"</span> <span class="comment">// åœ¨æŸä¸ªå“ˆå¸Œå€¼ä¸Šæ‰“æ ‡ç­¾å¹¶ä¸”å†™ä¸Šæ ‡ç­¾çš„ä¿¡æ¯</span></span><br><span class="line">git <span class="built_in">tag</span> foo HEAD~<span class="number">4</span> <span class="comment">// åœ¨å½“å‰æäº¤ä¹‹å‰çš„ç¬¬4ä¸ªç‰ˆæœ¬ä¸Š æ‰“æ ‡ç­¾foo</span></span><br><span class="line">git push origin -<span class="params">-tags</span> <span class="comment">// æŠŠæ‰€æœ‰æ‰“å¥½çš„æ ‡ç­¾æ¨é€åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">git push origin æ ‡ç­¾å <span class="comment">// æŠŠæŒ‡å®šæ ‡ç­¾æ¨é€åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line">git stash <span class="comment">// æŠŠæš‚å­˜åŒºçš„å†…å®¹ æš‚æ—¶æ”¾åœ¨å…¶ä»–ä¸­ ä½¿æš‚å­˜åŒºå˜ç©º</span></span><br><span class="line">git stash <span class="built_in">list</span> <span class="comment">// æŸ¥çœ‹stashäº†å“ªäº›å­˜å‚¨</span></span><br><span class="line">git stash pop <span class="comment">// å°†stashä¸­çš„å†…å®¹æ¢å¤åˆ°å½“å‰ç›®å½•ï¼Œå°†ç¼“å­˜å †æ ˆä¸­çš„å¯¹åº”stashåˆ é™¤</span></span><br><span class="line">git stash apply <span class="comment">// å°†stashä¸­çš„å†…å®¹æ¢å¤åˆ°å½“å‰ç›®å½•ï¼Œä¸ä¼šå°†ç¼“å­˜å †æ ˆä¸­çš„å¯¹åº”stashåˆ é™¤</span></span><br><span class="line">git stash clear <span class="comment">// åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„stash</span></span><br><span class="line">git pull -<span class="params">-tags</span> <span class="comment">// æŠŠè¿œç¨‹ä»“åº“çš„æ ‡ç­¾ä¹Ÿæ‹‰å–ä¸‹æ¥</span></span><br><span class="line">git push origin :refs/tags/è¿œç¨‹æ ‡ç­¾å <span class="comment">// åˆ é™¤è¿œç¨‹ä»“åº“çš„æ ‡ç­¾</span></span><br></pre></td></tr></table></figure></div>

<h3 id="21-åˆ†æ”¯"><a href="#21-åˆ†æ”¯" class="headerlink" title="21.åˆ†æ”¯"></a>21.åˆ†æ”¯</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="GROOVY"><figure class="iseeu highlight /groovy"><table><tr><td class="code"><pre><span class="line">git branch åˆ†æ”¯å <span class="comment">// æ–°å»ºåˆ†æ”¯</span></span><br><span class="line">git branch <span class="comment">// æŸ¥çœ‹å½“å‰æ‰€æœ‰åˆ†æ”¯</span></span><br><span class="line">git checkout åˆ†æ”¯å <span class="comment">// æ£€å‡ºåˆ†æ”¯</span></span><br><span class="line">git checkout -b åˆ†æ”¯å <span class="comment">// åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯</span></span><br><span class="line">git checkout commitId æ–‡ä»¶åï¼ˆæ–‡ä»¶è·¯å¾„ä¸‹çš„æ–‡ä»¶åï¼‰ è¿˜åŸè¿™ä¸ªæ–‡ä»¶åˆ°å¯¹åº”çš„commitIdçš„ç‰ˆæœ¬</span><br><span class="line">ï¼ˆä¾‹å¦‚src<span class="regexp">/page/</span>attendance<span class="regexp">/attendanceSum.vueæˆ‘æƒ³æŠŠå®ƒè¿˜åŸåˆ°2ä¸ªç‰ˆæœ¬ä¹‹å‰ é¦–å…ˆgit log src/</span>page<span class="regexp">/attendance/</span>attendanceSum.vueæ‰¾åˆ°å¯¹åº”æƒ³è¦è¿˜åŸçš„ç‰ˆæœ¬</span><br><span class="line">å¤åˆ¶ç‰ˆæœ¬æäº¤çš„commitID ç„¶åæ‰§è¡Œgit checkout commitID src<span class="regexp">/page/</span>attendance/attendanceSum.vue</span><br><span class="line">è¿™æ ·å°±æŠŠattendanceSum.vueè¿™ä¸ªå•ä¸ªæ–‡ä»¶ è¿˜åŸåˆ°äº†å¯¹åº”ç‰ˆæœ¬ï¼‰</span><br><span class="line">git branch -v <span class="comment">// æŸ¥çœ‹åˆ†æ”¯ä»¥åŠæäº¤hashå€¼å’Œcommitä¿¡æ¯</span></span><br><span class="line">git merge åˆ†æ”¯å <span class="comment">// æŠŠè¯¥åˆ†æ”¯çš„å†…å®¹åˆå¹¶åˆ°ç°æœ‰åˆ†æ”¯ä¸Š</span></span><br><span class="line">git branch -d åˆ†æ”¯å <span class="comment">// åˆ é™¤åˆ†æ”¯</span></span><br><span class="line">git branch -D åˆ†æ”¯å <span class="comment">// å¼ºåˆ¶åˆ é™¤ è‹¥æ²¡æœ‰å…¶ä»–åˆ†æ”¯åˆå¹¶å°±åˆ é™¤ dä¼šæç¤º Dä¸ä¼š</span></span><br><span class="line">git branch -m æ—§åˆ†æ”¯å æ–°åˆ†æ”¯å <span class="comment">// ä¿®æ”¹åˆ†æ”¯å</span></span><br><span class="line">git branch -M æ—§åˆ†æ”¯å æ–°åˆ†æ”¯å <span class="comment">// ä¿®æ”¹åˆ†æ”¯å Må¼ºåˆ¶ä¿®æ”¹ è‹¥ä¸å…¶ä»–åˆ†æ”¯æœ‰å†²çªä¹Ÿä¼šåˆ›å»º(æ…ç”¨)</span></span><br><span class="line">git branch -r <span class="comment">// åˆ—å‡ºè¿œç¨‹åˆ†æ”¯(è¿œç¨‹æ‰€æœ‰åˆ†æ”¯å)</span></span><br><span class="line">git branch -a <span class="comment">// æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯(åˆ—å‡ºè¿œç¨‹åˆ†æ”¯ä»¥åŠæœ¬åœ°åˆ†æ”¯å)</span></span><br><span class="line">git fetch <span class="comment">// æ›´æ–°remoteç´¢å¼•</span></span><br><span class="line">git push -u origin åˆ†æ”¯å <span class="comment">// å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°originä¸»æœºï¼ŒåŒæ—¶æŒ‡å®šoriginä¸ºé»˜è®¤ä¸»æœºï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git push</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>MarkDownè¯­æ³•</title>
    <url>/blog/Other/Other_id_01.html</url>
    <content><![CDATA[<h1 id="æ¬¢è¿ä½¿ç”¨Markdownç¼–è¾‘å™¨"><a href="#æ¬¢è¿ä½¿ç”¨Markdownç¼–è¾‘å™¨" class="headerlink" title="æ¬¢è¿ä½¿ç”¨Markdownç¼–è¾‘å™¨"></a>æ¬¢è¿ä½¿ç”¨Markdownç¼–è¾‘å™¨</h1><p>ä½ å¥½ï¼ è¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨ <strong>Markdownç¼–è¾‘å™¨</strong> æ‰€å±•ç¤ºçš„æ¬¢è¿é¡µã€‚å¦‚æœä½ æƒ³å­¦ä¹ å¦‚ä½•ä½¿ç”¨Markdownç¼–è¾‘å™¨, å¯ä»¥ä»”ç»†é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œäº†è§£ä¸€ä¸‹Markdownçš„åŸºæœ¬è¯­æ³•çŸ¥è¯†ã€‚</p>
<a id="more"></a>

<h2 id="æ–°çš„æ”¹å˜"><a href="#æ–°çš„æ”¹å˜" class="headerlink" title="æ–°çš„æ”¹å˜"></a>æ–°çš„æ”¹å˜</h2><p>æˆ‘ä»¬å¯¹Markdownç¼–è¾‘å™¨è¿›è¡Œäº†ä¸€äº›åŠŸèƒ½æ‹“å±•ä¸è¯­æ³•æ”¯æŒï¼Œé™¤äº†æ ‡å‡†çš„Markdownç¼–è¾‘å™¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¢åŠ äº†å¦‚ä¸‹å‡ ç‚¹æ–°åŠŸèƒ½ï¼Œå¸®åŠ©ä½ ç”¨å®ƒå†™åšå®¢ï¼š</p>
<ol>
<li><strong>å…¨æ–°çš„ç•Œé¢è®¾è®¡</strong> ï¼Œå°†ä¼šå¸¦æ¥å…¨æ–°çš„å†™ä½œä½“éªŒï¼›</li>
<li>åœ¨åˆ›ä½œä¸­å¿ƒè®¾ç½®ä½ å–œçˆ±çš„ä»£ç é«˜äº®æ ·å¼ï¼ŒMarkdown <strong>å°†ä»£ç ç‰‡æ˜¾ç¤ºé€‰æ‹©çš„é«˜äº®æ ·å¼</strong> è¿›è¡Œå±•ç¤ºï¼›</li>
<li>å¢åŠ äº† <strong>å›¾ç‰‡æ‹–æ‹½</strong> åŠŸèƒ½ï¼Œä½ å¯ä»¥å°†æœ¬åœ°çš„å›¾ç‰‡ç›´æ¥æ‹–æ‹½åˆ°ç¼–è¾‘åŒºåŸŸç›´æ¥å±•ç¤ºï¼›</li>
<li>å…¨æ–°çš„ <strong>KaTeXæ•°å­¦å…¬å¼</strong> è¯­æ³•ï¼›</li>
<li>å¢åŠ äº†æ”¯æŒ<strong>ç”˜ç‰¹å›¾çš„mermaidè¯­æ³•<a href="[mermaidè¯­æ³•è¯´æ˜](https://mermaidjs.github.io/)">^1</a></strong> åŠŸèƒ½ï¼›</li>
<li>å¢åŠ äº† <strong>å¤šå±å¹•ç¼–è¾‘</strong> Markdownæ–‡ç« åŠŸèƒ½ï¼›</li>
<li>å¢åŠ äº† <strong>ç„¦ç‚¹å†™ä½œæ¨¡å¼ã€é¢„è§ˆæ¨¡å¼ã€ç®€æ´å†™ä½œæ¨¡å¼ã€å·¦å³åŒºåŸŸåŒæ­¥æ»šè½®è®¾ç½®</strong> ç­‰åŠŸèƒ½ï¼ŒåŠŸèƒ½æŒ‰é’®ä½äºç¼–è¾‘åŒºåŸŸä¸é¢„è§ˆåŒºåŸŸä¸­é—´ï¼›</li>
<li>å¢åŠ äº† <strong>æ£€æŸ¥åˆ—è¡¨</strong> åŠŸèƒ½ã€‚</li>
</ol>
<h2 id="åŠŸèƒ½å¿«æ·é”®"><a href="#åŠŸèƒ½å¿«æ·é”®" class="headerlink" title="åŠŸèƒ½å¿«æ·é”®"></a>åŠŸèƒ½å¿«æ·é”®</h2><p>æ’¤é”€ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Z</kbd><br>é‡åšï¼š<kbd>Ctrl/Command</kbd> + <kbd>Y</kbd><br>åŠ ç²—ï¼š<kbd>Ctrl/Command</kbd> + <kbd>B</kbd><br>æ–œä½“ï¼š<kbd>Ctrl/Command</kbd> + <kbd>I</kbd><br>æ ‡é¢˜ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>H</kbd><br>æ— åºåˆ—è¡¨ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>U</kbd><br>æœ‰åºåˆ—è¡¨ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>O</kbd><br>æ£€æŸ¥åˆ—è¡¨ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>C</kbd><br>æ’å…¥ä»£ç ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>K</kbd><br>æ’å…¥é“¾æ¥ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>L</kbd><br>æ’å…¥å›¾ç‰‡ï¼š<kbd>Ctrl/Command</kbd> + <kbd>Shift</kbd> + <kbd>G</kbd><br>æŸ¥æ‰¾ï¼š<kbd>Ctrl/Command</kbd> + <kbd>F</kbd><br>æ›¿æ¢ï¼š<kbd>Ctrl/Command</kbd> + <kbd>G</kbd></p>
<h2 id="åˆç†çš„åˆ›å»ºæ ‡é¢˜ï¼Œæœ‰åŠ©äºç›®å½•çš„ç”Ÿæˆ"><a href="#åˆç†çš„åˆ›å»ºæ ‡é¢˜ï¼Œæœ‰åŠ©äºç›®å½•çš„ç”Ÿæˆ" class="headerlink" title="åˆç†çš„åˆ›å»ºæ ‡é¢˜ï¼Œæœ‰åŠ©äºç›®å½•çš„ç”Ÿæˆ"></a>åˆç†çš„åˆ›å»ºæ ‡é¢˜ï¼Œæœ‰åŠ©äºç›®å½•çš„ç”Ÿæˆ</h2><p>ç›´æ¥è¾“å…¥1æ¬¡<kbd>#</kbd>ï¼Œå¹¶æŒ‰ä¸‹<kbd>space</kbd>åï¼Œå°†ç”Ÿæˆ1çº§æ ‡é¢˜ã€‚<br>è¾“å…¥2æ¬¡<kbd>#</kbd>ï¼Œå¹¶æŒ‰ä¸‹<kbd>space</kbd>åï¼Œå°†ç”Ÿæˆ2çº§æ ‡é¢˜ã€‚<br>ä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬æ”¯æŒ6çº§æ ‡é¢˜ã€‚æœ‰åŠ©äºä½¿ç”¨<code>TOC</code>è¯­æ³•åç”Ÿæˆä¸€ä¸ªå®Œç¾çš„ç›®å½•ã€‚</p>
<h2 id="å¦‚ä½•æ”¹å˜æ–‡æœ¬çš„æ ·å¼"><a href="#å¦‚ä½•æ”¹å˜æ–‡æœ¬çš„æ ·å¼" class="headerlink" title="å¦‚ä½•æ”¹å˜æ–‡æœ¬çš„æ ·å¼"></a>å¦‚ä½•æ”¹å˜æ–‡æœ¬çš„æ ·å¼</h2><p><em>å¼ºè°ƒæ–‡æœ¬</em> <em>å¼ºè°ƒæ–‡æœ¬</em></p>
<p><strong>åŠ ç²—æ–‡æœ¬</strong> <strong>åŠ ç²—æ–‡æœ¬</strong></p>
<p>==æ ‡è®°æ–‡æœ¬==</p>
<p><del>åˆ é™¤æ–‡æœ¬</del></p>
<blockquote>
<p>å¼•ç”¨æ–‡æœ¬</p>
</blockquote>
<p>H<del>2</del>O isæ˜¯æ¶²ä½“ã€‚</p>
<p>2^10^ è¿ç®—ç»“æœæ˜¯ 1024.</p>
<h2 id="æ’å…¥é“¾æ¥ä¸å›¾ç‰‡"><a href="#æ’å…¥é“¾æ¥ä¸å›¾ç‰‡" class="headerlink" title="æ’å…¥é“¾æ¥ä¸å›¾ç‰‡"></a>æ’å…¥é“¾æ¥ä¸å›¾ç‰‡</h2><p>é“¾æ¥: <a href="https://www.csdn.net/" target="_blank" rel="noopener">link</a>.</p>
<p>å›¾ç‰‡:<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw"></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">Alt</span>](<span class="link">https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw</span>)</span><br></pre></td></tr></table></figure></div>



<p>å¸¦å°ºå¯¸çš„å›¾ç‰‡: </p>
<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw" style="zoom:30%">

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">Alt</span>](<span class="link">https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw =30x30</span>)</span><br></pre></td></tr></table></figure></div>



<p>å±…ä¸­çš„å›¾ç‰‡: <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw" style="align-center:center"></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">Alt</span>](<span class="link">https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw#pic_center</span>)</span><br></pre></td></tr></table></figure></div>



<p>å±…ä¸­å¹¶ä¸”å¸¦å°ºå¯¸çš„å›¾ç‰‡: <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw" style="align-center:center;zoom:30%"></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">Alt</span>](<span class="link">https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hdmF0YXIuY3Nkbi5uZXQvNy83L0IvMV9yYWxmX2h4MTYzY29tLmpwZw#pic_center =30x30</span>)</span><br></pre></td></tr></table></figure></div>



<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¸ºäº†è®©ç”¨æˆ·æ›´åŠ ä¾¿æ·ï¼Œæˆ‘ä»¬å¢åŠ äº†å›¾ç‰‡æ‹–æ‹½åŠŸèƒ½ã€‚</p>
<h2 id="å¦‚ä½•æ’å…¥ä¸€æ®µæ¼‚äº®çš„ä»£ç ç‰‡"><a href="#å¦‚ä½•æ’å…¥ä¸€æ®µæ¼‚äº®çš„ä»£ç ç‰‡" class="headerlink" title="å¦‚ä½•æ’å…¥ä¸€æ®µæ¼‚äº®çš„ä»£ç ç‰‡"></a>å¦‚ä½•æ’å…¥ä¸€æ®µæ¼‚äº®çš„ä»£ç ç‰‡</h2><p>å»<a href="https://mp.csdn.net/console/configBlog" target="_blank" rel="noopener">åšå®¢è®¾ç½®</a>é¡µé¢ï¼Œé€‰æ‹©ä¸€æ¬¾ä½ å–œæ¬¢çš„ä»£ç ç‰‡é«˜äº®æ ·å¼ï¼Œä¸‹é¢å±•ç¤ºåŒæ ·é«˜äº®çš„ <code>ä»£ç ç‰‡</code>.</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// An highlighted block</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">'bar'</span>;</span><br></pre></td></tr></table></figure></div>

<h2 id="ç”Ÿæˆä¸€ä¸ªé€‚åˆä½ çš„åˆ—è¡¨"><a href="#ç”Ÿæˆä¸€ä¸ªé€‚åˆä½ çš„åˆ—è¡¨" class="headerlink" title="ç”Ÿæˆä¸€ä¸ªé€‚åˆä½ çš„åˆ—è¡¨"></a>ç”Ÿæˆä¸€ä¸ªé€‚åˆä½ çš„åˆ—è¡¨</h2><ul>
<li>é¡¹ç›®<ul>
<li>é¡¹ç›®<ul>
<li>é¡¹ç›®</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol>
<li>é¡¹ç›®1</li>
<li>é¡¹ç›®2</li>
<li>é¡¹ç›®3</li>
</ol>
<ul>
<li><input disabled="" type="checkbox"> è®¡åˆ’ä»»åŠ¡</li>
<li><input checked="" disabled="" type="checkbox"> å®Œæˆä»»åŠ¡</li>
</ul>
<h2 id="åˆ›å»ºä¸€ä¸ªè¡¨æ ¼"><a href="#åˆ›å»ºä¸€ä¸ªè¡¨æ ¼" class="headerlink" title="åˆ›å»ºä¸€ä¸ªè¡¨æ ¼"></a>åˆ›å»ºä¸€ä¸ªè¡¨æ ¼</h2><p>ä¸€ä¸ªç®€å•çš„è¡¨æ ¼æ˜¯è¿™ä¹ˆåˆ›å»ºçš„ï¼š<br>| é¡¹ç›® | Value |<br>| â€”- | â€”â€“ |<br>| ç”µè„‘ | $1600 |<br>| æ‰‹æœº | $12   |<br>| å¯¼ç®¡ | $1    |</p>
<h3 id="è®¾å®šå†…å®¹å±…ä¸­ã€å±…å·¦ã€å±…å³"><a href="#è®¾å®šå†…å®¹å±…ä¸­ã€å±…å·¦ã€å±…å³" class="headerlink" title="è®¾å®šå†…å®¹å±…ä¸­ã€å±…å·¦ã€å±…å³"></a>è®¾å®šå†…å®¹å±…ä¸­ã€å±…å·¦ã€å±…å³</h3><p>ä½¿ç”¨<code>:---------:</code>å±…ä¸­<br>ä½¿ç”¨<code>:----------</code>å±…å·¦<br>ä½¿ç”¨<code>----------:</code>å±…å³<br>|     ç¬¬ä¸€åˆ—     |         ç¬¬äºŒåˆ— | ç¬¬ä¸‰åˆ—         |<br>| :â€”â€”â€”â€”: | â€”â€”â€”â€”-: | :â€”â€”â€”â€”- |<br>| ç¬¬ä¸€åˆ—æ–‡æœ¬å±…ä¸­ | ç¬¬äºŒåˆ—æ–‡æœ¬å±…å³ | ç¬¬ä¸‰åˆ—æ–‡æœ¬å±…å·¦ |</p>
<h3 id="SmartyPants"><a href="#SmartyPants" class="headerlink" title="SmartyPants"></a>SmartyPants</h3><p>SmartyPantså°†ASCIIæ ‡ç‚¹å­—ç¬¦è½¬æ¢ä¸ºâ€œæ™ºèƒ½â€å°åˆ·æ ‡ç‚¹HTMLå®ä½“ã€‚ä¾‹å¦‚ï¼š<br>|    TYPE   |ASCII                          |HTML<br>|â€”â€”â€”â€”â€”-|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-|â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“|<br>|Single backticks|<code>&#39;Isn&#39;t this fun?&#39;</code>            |â€™Isnâ€™t this fun?â€™            |<br>|Quotes          |<code>&quot;Isn&#39;t this fun?&quot;</code>            |â€Isnâ€™t this fun?â€            |<br>|Dashes          |<code>-- is en-dash, --- is em-dash</code>|â€“ is en-dash, â€” is em-dash|</p>
<h2 id="åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åˆ—è¡¨"><a href="#åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åˆ—è¡¨" class="headerlink" title="åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åˆ—è¡¨"></a>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åˆ—è¡¨</h2><dl><dt>Markdown</dt><dd>Text-to-HTML conversion tool</dd></dl><dl><dt>Authors<br>:  John</dt><dd>Luke</dd></dl><h2 id="å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ³¨è„š"><a href="#å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ³¨è„š" class="headerlink" title="å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ³¨è„š"></a>å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ³¨è„š</h2><p>ä¸€ä¸ªå…·æœ‰æ³¨è„šçš„æ–‡æœ¬ã€‚<a href="æ³¨è„šçš„è§£é‡Š">^2</a></p>
<h2 id="æ³¨é‡Šä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„"><a href="#æ³¨é‡Šä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„" class="headerlink" title="æ³¨é‡Šä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„"></a>æ³¨é‡Šä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„</h2><p>Markdownå°†æ–‡æœ¬è½¬æ¢ä¸º HTMLã€‚</p>
<p>*[HTML]:   è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p>
<h2 id="KaTeXæ•°å­¦å…¬å¼"><a href="#KaTeXæ•°å­¦å…¬å¼" class="headerlink" title="KaTeXæ•°å­¦å…¬å¼"></a>KaTeXæ•°å­¦å…¬å¼</h2><p>æ‚¨å¯ä»¥ä½¿ç”¨æ¸²æŸ“LaTeXæ•°å­¦è¡¨è¾¾å¼ <a href="https://khan.github.io/KaTeX/" target="_blank" rel="noopener">KaTeX</a>:</p>
<p>Gammaå…¬å¼å±•ç¤º $\Gamma(n) = (n-1)!\quad\forall<br>n\in\mathbb N$ æ˜¯é€šè¿‡æ¬§æ‹‰ç§¯åˆ†</p>
<p>$$<br>\Gamma(z) = \int_0^\infty t^{z-1}e^{-t}dt,.<br>$$</p>
<blockquote>
<p>ä½ å¯ä»¥æ‰¾åˆ°æ›´å¤šå…³äºçš„ä¿¡æ¯ <strong>LaTeX</strong> æ•°å­¦è¡¨è¾¾å¼<a href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" target="_blank" rel="noopener">here</a>.</p>
</blockquote>
<h2 id="æ–°çš„ç”˜ç‰¹å›¾åŠŸèƒ½ï¼Œä¸°å¯Œä½ çš„æ–‡ç« "><a href="#æ–°çš„ç”˜ç‰¹å›¾åŠŸèƒ½ï¼Œä¸°å¯Œä½ çš„æ–‡ç« " class="headerlink" title="æ–°çš„ç”˜ç‰¹å›¾åŠŸèƒ½ï¼Œä¸°å¯Œä½ çš„æ–‡ç« "></a>æ–°çš„ç”˜ç‰¹å›¾åŠŸèƒ½ï¼Œä¸°å¯Œä½ çš„æ–‡ç« </h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">gantt</span><br><span class="line">        dateFormat  YYYY-MM-DD</span><br><span class="line">        title Adding GANTT diagram functionality to mermaid</span><br><span class="line">        section ç°æœ‰ä»»åŠ¡</span><br><span class="line">        å·²å®Œæˆ               :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">        è¿›è¡Œä¸­               :active,  des2, 2014-01-09, 3d</span><br><span class="line">        è®¡åˆ’ä¸€               :         des3, after des2, 5d</span><br><span class="line">        è®¡åˆ’äºŒ               :         des4, after des3, 5d</span><br></pre></td></tr></table></figure></div>
<ul>
<li>å…³äº <strong>ç”˜ç‰¹å›¾</strong> è¯­æ³•ï¼Œå‚è€ƒ <a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">è¿™å„¿</a>,</li>
</ul>
<h2 id="UML-å›¾è¡¨"><a href="#UML-å›¾è¡¨" class="headerlink" title="UML å›¾è¡¨"></a>UML å›¾è¡¨</h2><p>å¯ä»¥ä½¿ç”¨UMLå›¾è¡¨è¿›è¡Œæ¸²æŸ“ã€‚ <a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">Mermaid</a>. ä¾‹å¦‚ä¸‹é¢äº§ç”Ÿçš„ä¸€ä¸ªåºåˆ—å›¾ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">å¼ ä¸‰ -&gt;&gt; æå››: ä½ å¥½ï¼æå››, æœ€è¿‘æ€ä¹ˆæ ·?</span><br><span class="line">æå››--&gt;&gt;ç‹äº”: ä½ æœ€è¿‘æ€ä¹ˆæ ·ï¼Œç‹äº”ï¼Ÿ</span><br><span class="line">æå››--x å¼ ä¸‰: æˆ‘å¾ˆå¥½ï¼Œè°¢è°¢!</span><br><span class="line">æå››-x ç‹äº”: æˆ‘å¾ˆå¥½ï¼Œè°¢è°¢!</span><br><span class="line">Note right of ç‹äº”: æå››æƒ³äº†å¾ˆé•¿æ—¶é—´, æ–‡å­—å¤ªé•¿äº†&lt;br&#x2F;&gt;ä¸é€‚åˆæ”¾åœ¨ä¸€è¡Œ.</span><br><span class="line"></span><br><span class="line">æå››--&gt;&gt;å¼ ä¸‰: æ‰“é‡ç€ç‹äº”...</span><br><span class="line">å¼ ä¸‰-&gt;&gt;ç‹äº”: å¾ˆå¥½... ç‹äº”, ä½ æ€ä¹ˆæ ·?</span><br></pre></td></tr></table></figure></div>

<p>è¿™å°†äº§ç”Ÿä¸€ä¸ªæµç¨‹å›¾ã€‚:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[é•¿æ–¹å½¢] -- é“¾æ¥ --&gt; B((åœ†))</span><br><span class="line">A --&gt; C(åœ†è§’é•¿æ–¹å½¢)</span><br><span class="line">B --&gt; D&#123;è±å½¢&#125;</span><br><span class="line">C --&gt; D</span><br></pre></td></tr></table></figure></div>

<ul>
<li>å…³äº <strong>Mermaid</strong> è¯­æ³•ï¼Œå‚è€ƒ <a href="https://mermaidjs.github.io/" target="_blank" rel="noopener">è¿™å„¿</a>,</li>
</ul>
<h2 id="FLowchartæµç¨‹å›¾"><a href="#FLowchartæµç¨‹å›¾" class="headerlink" title="FLowchartæµç¨‹å›¾"></a>FLowchartæµç¨‹å›¾</h2><p>æˆ‘ä»¬ä¾æ—§ä¼šæ”¯æŒflowchartçš„æµç¨‹å›¾ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">flowchat</span><br><span class="line">st&#x3D;&gt;start: å¼€å§‹</span><br><span class="line">e&#x3D;&gt;end: ç»“æŸ</span><br><span class="line">op&#x3D;&gt;operation: æˆ‘çš„æ“ä½œ</span><br><span class="line">cond&#x3D;&gt;condition: ç¡®è®¤ï¼Ÿ</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure></div>

<ul>
<li>å…³äº <strong>Flowchartæµç¨‹å›¾</strong> è¯­æ³•ï¼Œå‚è€ƒ <a href="http://adrai.github.io/flowchart.js/" target="_blank" rel="noopener">è¿™å„¿</a>.</li>
</ul>
<h2 id="å¯¼å‡ºä¸å¯¼å…¥"><a href="#å¯¼å‡ºä¸å¯¼å…¥" class="headerlink" title="å¯¼å‡ºä¸å¯¼å…¥"></a>å¯¼å‡ºä¸å¯¼å…¥</h2><h3 id="å¯¼å‡º"><a href="#å¯¼å‡º" class="headerlink" title="å¯¼å‡º"></a>å¯¼å‡º</h3><p>å¦‚æœä½ æƒ³å°è¯•ä½¿ç”¨æ­¤ç¼–è¾‘å™¨, ä½ å¯ä»¥åœ¨æ­¤ç¯‡æ–‡ç« ä»»æ„ç¼–è¾‘ã€‚å½“ä½ å®Œæˆäº†ä¸€ç¯‡æ–‡ç« çš„å†™ä½œ, åœ¨ä¸Šæ–¹å·¥å…·æ æ‰¾åˆ° <strong>æ–‡ç« å¯¼å‡º</strong> ï¼Œç”Ÿæˆä¸€ä¸ª.mdæ–‡ä»¶æˆ–è€….htmlæ–‡ä»¶è¿›è¡Œæœ¬åœ°ä¿å­˜ã€‚</p>
<h3 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h3><p>å¦‚æœä½ æƒ³åŠ è½½ä¸€ç¯‡ä½ å†™è¿‡çš„.mdæ–‡ä»¶ï¼Œåœ¨ä¸Šæ–¹å·¥å…·æ å¯ä»¥é€‰æ‹©å¯¼å…¥åŠŸèƒ½è¿›è¡Œå¯¹åº”æ‰©å±•åçš„æ–‡ä»¶å¯¼å…¥ï¼Œ<br>ç»§ç»­ä½ çš„åˆ›ä½œã€‚</p>
]]></content>
      <categories>
        <category>MarkDown</category>
      </categories>
      <tags>
        <tag>MarkDown</tag>
      </tags>
  </entry>
  <entry>
    <title>å›½é™…åŒ–è¯­è¨€æ“ä½œ</title>
    <url>/blog/Vue/Vue_id_12.html</url>
    <content><![CDATA[<p>ã€€ã€€ã€€ã€€è¿™æ˜¯ä¸€ç¯‡æ•™ä½ å¦‚ä½•è®¾ç½®å›½å†…æºæ¥å¿«é€Ÿå®‰è£…Vueè„šæ‰‹æ¶çš„æ•™ç¨‹</p>
<a id="more"></a>

<h2 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h2><p>ã€€ã€€é¦–å…ˆè®¾ç½®å›½å†…æºï¼Œè¿™æ ·ä½ çš„ä¸‹è½½é€Ÿåº¦ä¼šéå¸¸å¿«ï¼š</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm set registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>

<p>ã€€ã€€æŸ¥çœ‹æºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">npm<span class="built_in"> config </span>list</span><br></pre></td></tr></table></figure></div>

<h2 id="ç¬¬äºŒæ­¥"><a href="#ç¬¬äºŒæ­¥" class="headerlink" title="ç¬¬äºŒæ­¥"></a>ç¬¬äºŒæ­¥</h2><p>ã€€ã€€é¦–å…ˆè¦å¸è½½åŸæœ‰çš„vueç‰ˆæœ¬ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">npm uninstall vue-cli -g</span><br></pre></td></tr></table></figure></div>

<h2 id="ç¬¬ä¸‰æ­¥"><a href="#ç¬¬ä¸‰æ­¥" class="headerlink" title="ç¬¬ä¸‰æ­¥"></a>ç¬¬ä¸‰æ­¥</h2><p>ã€€ã€€å®‰è£…vueï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">npm install @vue/cli -g</span><br></pre></td></tr></table></figure></div>

<h2 id="ç¬¬å››æ­¥"><a href="#ç¬¬å››æ­¥" class="headerlink" title="ç¬¬å››æ­¥"></a>ç¬¬å››æ­¥</h2><p>ã€€ã€€åˆ›å»ºé¡¹ç›®å‰è¦å…ˆæ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CMD"><figure class="iseeu highlight /cmd"><table><tr><td class="code"><pre><span class="line">npm install -g @vue/cli-init</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æ‰§è¡Œå®Œåå†æ‰§è¡Œå‘½ä»¤ï¼š(æ–‡ä»¶åè‡ªå·±å–)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CMD"><figure class="iseeu highlight /cmd"><table><tr><td class="code"><pre><span class="line">vue init webpack æ–‡ä»¶å</span><br></pre></td></tr></table></figure></div>


<p>ã€€ã€€å®‰è£…è¿‡ç¨‹ä¸­ä¸€æ¬¡æç¤ºå¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">project nameï¼ˆé¡¹ç›®åç§°ï¼‰	  <span class="comment"># æŒ‰å›è½¦</span></span><br><span class="line">project descriptionï¼ˆé¡¹ç›®æè¿°ï¼‰	 <span class="comment"># æŒ‰å›è½¦</span></span><br><span class="line">authorï¼ˆä½œè€…ï¼‰	 <span class="comment"># æŒ‰å›è½¦</span></span><br><span class="line">vue buildï¼ˆè§£é‡Šå™¨ï¼‰	 <span class="comment"># æŒ‰å›è½¦</span></span><br><span class="line">Install vue-router(è·¯ç”±) 		<span class="comment"># æŒ‰yæŒ‰å›è½¦</span></span><br><span class="line">use aslantto lint your code(ä»£ç æ£€æŸ¥) 	<span class="comment"># æŒ‰næŒ‰å›è½¦</span></span><br><span class="line"><span class="built_in">set</span> up unit tests(æµ‹è¯•æ¨¡å—) 	<span class="comment"># æŒ‰næŒ‰å›è½¦</span></span><br><span class="line">setup e2e tests with night watch(æ˜¯å¦å®‰è£…e2e) 	<span class="comment"># æŒ‰næŒ‰å›è½¦</span></span><br><span class="line">should we run â€™npm installâ€™(æ˜¯å¦é€‰æ‹©npmæ–¹å¼)	<span class="comment"># é€‰ç¬¬ä¸€ä¸ªï¼ŒæŒ‰å›è½¦</span></span><br></pre></td></tr></table></figure></div>

<h2 id="ç¬¬äº”æ­¥"><a href="#ç¬¬äº”æ­¥" class="headerlink" title="ç¬¬äº”æ­¥"></a>ç¬¬äº”æ­¥</h2><p>ã€€ã€€è¿è¡Œå®Œä¹‹åï¼š<br>    ã€€ã€€cd åˆ°é¡¹ç›®ä¸­ï¼Œå¯ä»¥å®‰è£…ä¸€äº›å¸¸ç”¨çš„åŒ…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">npm install axios --save</span><br><span class="line">npm install style-loader â€”-save</span><br><span class="line">npm install heyui --save</span><br><span class="line">npm install js-md5 --save</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€å®‰è£…å®Œä¹‹åå¯ä»¥ç›´æ¥å¯åŠ¨ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CMD"><figure class="iseeu highlight /cmd"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€é€€å‡ºæœåŠ¡ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LLVM"><figure class="iseeu highlight /llvm"><table><tr><td class="code"><pre><span class="line">ctrl + <span class="keyword">c</span></span><br></pre></td></tr></table></figure></div>

<h2 id="ç¬¬å…­æ­¥"><a href="#ç¬¬å…­æ­¥" class="headerlink" title="ç¬¬å…­æ­¥"></a>ç¬¬å…­æ­¥</h2><p>ã€€ã€€ã€€ã€€å¦‚æœå‡ºç°ä»»ä½•å…³äºnodeä¾èµ–çš„é—®é¢˜å¯¼è‡´æœåŠ¡æ— æ³•å¯åŠ¨ï¼Œæ‰§è¡Œnpm installæ— æ³•è§£å†³çš„ï¼Œåˆ™å®‰è£…rimraf,ç„¶åè¿›å…¥é¡¹ç›®ç›®å½•ä¸‹ï¼Œ<br>ã€€ã€€æ‰§è¡Œrimraf node_modules åˆ é™¤åï¼Œé‡æ–°æ‰§è¡Œ npm install å®‰è£…ä¾èµ–<br>ã€€ã€€å®‰è£…rimrafï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CMAKE"><figure class="iseeu highlight /cmake"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> rimraf -g</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€åˆ é™¤node_modulesï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="EBNF"><figure class="iseeu highlight /ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">rimraf node_modules</span></span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€é‡æ–°å®‰è£…node_modulesï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CMAKE"><figure class="iseeu highlight /cmake"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span></span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–‡æ˜ä¸Šç½‘å®ç°æ­£å¸¸è®¿é—®googleç½‘ç«™</title>
    <url>/blog/Google/Google_id_01.html</url>
    <content><![CDATA[<p>ã€€ã€€å›½å†…æ–‡æ˜ä¸Šç½‘ï¼Œå®ç°æ­£å¸¸è®¿é—®Googleç½‘ç«™</p>
<a id="more"></a>
<p>ã€€ã€€ä½ ä»¬çŸ¥é“åœ¨å›½å†…ä¸ºä»€ä¹ˆæ— æ³•è®¿é—®Googleç½‘ç«™ä¹ˆï¼Ÿæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ç™¾åº¦æœç´¢ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œå°±ä¸å¤šè¯´äº†<br>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒGoogleæ˜¯æœç´¢å¼•æ“ç•Œçš„å¤§å“¥å¤§ï¼Œè€Œæˆ‘ä»¬åœ¨å›½å†…å´æ— æ³•ä½¿ç”¨ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰éå¸¸é—æ†¾ï¼Ÿåœ¨è¿™é‡Œï¼Œæˆ‘æ¥å‘Šè¯‰å¤§å®¶ï¼Œ<br>åœ¨å›½å†…ï¼ŒåŒæ ·å¯ä»¥æ­£å¸¸è®¿é—®Googleæ——ä¸‹çš„æ‰€æœ‰ç½‘ç«™çš„æ–¹æ³•ï¼š</p>
<h2 id="å®‰è£…Chromeæµè§ˆå™¨ä»¥åŠä¸‹è½½æ’ä»¶"><a href="#å®‰è£…Chromeæµè§ˆå™¨ä»¥åŠä¸‹è½½æ’ä»¶" class="headerlink" title="å®‰è£…Chromeæµè§ˆå™¨ä»¥åŠä¸‹è½½æ’ä»¶"></a>å®‰è£…Chromeæµè§ˆå™¨ä»¥åŠä¸‹è½½æ’ä»¶</h2><p>ã€€ã€€1ã€Chromeæµè§ˆå™¨è‡ªè¡Œå®‰è£…ï¼Œè¿™é‡Œä¸å¤šè¯´<br>ã€€ã€€2ã€å…¶æ¬¡ï¼Œè®¿é—®ç½‘ç«™ï¼š<a href="https://chrome.zzzmh.cn/index" target="_blank" rel="noopener">https://chrome.zzzmh.cn/index</a><br>ã€€ã€€ã€€ã€€2.1ã€åœ¨ç½‘ç«™é¦–é¡µå³ä¾§ï¼Œç‚¹å‡»ï¼šè°·æ­Œä¸Šç½‘åŠ©æ‰‹<span style="color:red">(å›¾ä¸€)</span><br>ã€€ã€€ã€€ã€€2.2ã€ç‚¹å‡»åè¿›å…¥é¡µé¢ï¼Œåœ¨å³ä¾§æœ‰å°è´´å£«æç¤ºï¼š<br>ã€€ã€€ã€€ã€€ã€€ã€€ã€€è¯·æ³¨æ„ï¼šæœ¬é¡µé¢çš„ç‰ˆæœ¬åŸä½œè€…å·²åœæ­¢æ›´æ–°ï¼Œè¯·ç‚¹å‡»è·³è½¬æ–°ç‰ˆæœ¬ è°·æ­Œä¸Šç½‘åŠ©æ‰‹ Ghelper Beta<span style="color:red">(å›¾äºŒ)</span><br>ã€€ã€€ã€€ã€€2.3ã€ç‚¹å‡»è¿›å…¥æœ€æ–°ç‰ˆæœ¬ä¸‹è½½é¡µé¢è¿›è¡Œä¸‹è½½<span style="color:red">(å›¾ä¸‰)</span></p>
<h2 id="å¦‚å›¾ï¼š"><a href="#å¦‚å›¾ï¼š" class="headerlink" title="å¦‚å›¾ï¼š"></a>å¦‚å›¾ï¼š</h2><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google1.png" style="zoom:43%">

<p align="center" style="color:blue">å›¾ä¸€</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google2.png" style="zoom:50%">

<p align="center" style="color:blue">å›¾äºŒ</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google3.png" style="zoom:50%">

<p align="center" style="color:blue">å›¾ä¸‰</p>

<h2 id="è§£å‹æ’ä»¶å¹¶è¿›è¡Œå®‰è£…ä½¿ç”¨"><a href="#è§£å‹æ’ä»¶å¹¶è¿›è¡Œå®‰è£…ä½¿ç”¨" class="headerlink" title="è§£å‹æ’ä»¶å¹¶è¿›è¡Œå®‰è£…ä½¿ç”¨"></a>è§£å‹æ’ä»¶å¹¶è¿›è¡Œå®‰è£…ä½¿ç”¨</h2><p>ã€€ã€€1ã€å°†ä¸‹è½½å¥½çš„æ’ä»¶è¿›è¡Œè§£å‹<span style="color:red">(å›¾å››)</span>ï¼Œç›®æ ‡æ–‡ä»¶ï¼š<span style="color:red">Ghelper Beta_2.1.2_chrome.zzzmh.cn.crx</span><br>ã€€ã€€2ã€å°†ç›®æ ‡æ–‡ä»¶æ‹–åˆ°Chromeæµè§ˆå™¨çš„æ’ä»¶ç®¡ç†ä¸­ï¼Œè¿›è¡Œå®‰è£…<span style="color:red">(å›¾äº”)</span>;æ³¨æ„ï¼šéœ€æ‰“å¼€Chromeæµè§ˆå™¨å³ä¸Šè§’çš„å¼€å‘è€…æ¨¡å¼<span style="color:red">(å›¾å…­)</span><br>ã€€ã€€3ã€å½“æ’ä»¶æ‹–è¿›å»å®‰è£…æ—¶ï¼Œä¼šå‡ºç°æç¤ºæ¡†<span style="color:red">(å›¾ä¸ƒ)</span>ï¼Œç„¶åè¿™é‡Œé€‰æ‹©ç‚¹å‡»æ·»åŠ æ‰©å±•ç¨‹åºï¼Œåˆ°è¿™é‡Œï¼Œè¯¥æ’ä»¶åŸºæœ¬ä¸Šå·²ç»OKäº†<br>ã€€ã€€4ã€å®‰è£…å¥½ä¹‹åï¼Œç‚¹å‡»æµè§ˆå™¨ç½‘å€è¾“å…¥æ¡†å³ä¾§æ–°å®‰è£…çš„æ’ä»¶å›¾æ ‡<span style="color:red">(å›¾å…«)</span>ï¼Œè¿™é‡Œéœ€è¦æ³¨å†Œç™»å½•ï¼Œä¸éœ€è¦è´­ä¹°VIPå“¦<br>ã€€ã€€5ã€åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œä½ ç°åœ¨å°±å¯ä»¥æ­£å¸¸çš„è®¿é—®Googleæ——ä¸‹çš„ç½‘å€äº†ï¼Œè€Œä¸”ä½ ä¼šå‘ç°ï¼ŒChromeæµè§ˆå™¨è®¿é—®ç½‘é¡µçš„é€Ÿåº¦å˜å¿«äº†å¾ˆå¤š</p>
<h2 id="å¦‚å›¾"><a href="#å¦‚å›¾" class="headerlink" title="å¦‚å›¾:"></a>å¦‚å›¾:</h2><img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google4.png" style="zoom:70%">

<p align="center" style="color:blue">å›¾å››</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google5.png" style="zoom:50%">

<p align="center" style="color:blue">å›¾äº”</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google6.png" style="zoom:64%">

<p align="center" style="color:blue">å›¾å…­</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google7.png" style="zoom:109%">

<p align="center" style="color:blue">å›¾ä¸ƒ</p>
<img src="https://gitee.com/tian_yu_ting/blog_img/raw/master/Google8.png" style="zoom:102%">

<p align="center" style="color:blue">å›¾å…«</p>
## æ€»ç»“

<p>ã€€ã€€Chromeæ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨çš„æµè§ˆå™¨ï¼Œå®ƒå¯ä»¥å®‰è£…å¤šç§æ’ä»¶ï¼Œå·²æ»¡è¶³ç”¨æˆ·çš„å„ç§éœ€æ±‚ï¼Œæ›´å¤šåŠŸèƒ½éœ€è¦è‡ªè¡Œæ…¢æ…¢ç ”ç©¶æ¢ç´¢å“¦</p>
]]></content>
      <categories>
        <category>Chrome</category>
      </categories>
      <tags>
        <tag>Google</tag>
      </tags>
  </entry>
  <entry>
    <title>è‡ªå®šä¹‰è´­ç‰©è½¦ç³»ç»Ÿ</title>
    <url>/blog/Vue/Vue_id_13.html</url>
    <content><![CDATA[<h2 id="ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ "><a href="#ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ "></a>ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ </h2><a id="more"></a>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å°†å•†å“æ·»åŠ åˆ°è´­ç‰©è½¦</span></span><br><span class="line">add_cart()&#123;</span><br><span class="line">    <span class="keyword">let</span> find = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// éå†è´­ç‰©è½¦</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,l=<span class="keyword">this</span>.cartlist.length;i++)&#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæ‰¾åˆ°äº†</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.id == <span class="keyword">this</span>.cartlist[i][<span class="string">'id'</span>])&#123;</span><br><span class="line">            <span class="comment">// å°†è¯¥å•†å“çš„æ•°é‡+1</span></span><br><span class="line">            <span class="keyword">this</span>.cartlist[i][<span class="string">'num'</span>]++;</span><br><span class="line">            find = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æ‰¾åˆ°</span></span><br><span class="line">    <span class="keyword">if</span>(find == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">// å°†è¯¥å•†å“æ”¾å…¥è´­ç‰©è½¦åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">this</span>.cartlist.push(&#123;</span><br><span class="line">            name:<span class="keyword">this</span>.name,</span><br><span class="line">            id: <span class="keyword">this</span>.id,</span><br><span class="line">            price: <span class="keyword">this</span>.price,</span><br><span class="line">            num: <span class="number">1</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.cartlist)</span><br><span class="line">	<span class="comment">// å°†è´­ç‰©è½¦ä¿¡æ¯å­˜å‚¨åˆ°LocalStorage</span></span><br><span class="line">	LocalStorage.setItem(<span class="string">'cart'</span>, <span class="built_in">JSON</span>.Stringify(<span class="keyword">this</span>.cartlist))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>


<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–è´­ç‰©è½¦é€»è¾‘</span></span><br><span class="line"><span class="comment">// æ­¤æ¡éœ€è¿è¡Œ</span></span><br><span class="line">init_cart()&#123;</span><br><span class="line">    <span class="keyword">this</span>.cartlist = LocalStorage.getItem(<span class="string">'cart)</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—è´­ç‰©è½¦æ€»æ•°</span></span><br><span class="line"></span><br><span class="line">totalcount()&#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,l = <span class="keyword">this</span>.cartlist.length;i &lt; l;i++)&#123;</span><br><span class="line">        total += <span class="keyword">this</span>.cartlist[i].num</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—å•†å“ä»·æ ¼</span></span><br><span class="line">totalprice()&#123;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>,l=<span class="keyword">this</span>.cartlist.length;i &lt; l;i++)&#123;</span><br><span class="line">        total += (<span class="keyword">this</span>.cartlist[i].num + <span class="keyword">this</span>.cartlist[i].price)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Cart</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoä¸»é¢˜å¦‚ä½•å°†æ–‡ç« ç½®é¡¶</title>
    <url>/blog/Hexo/Hexo_id_02.html</url>
    <content><![CDATA[<p>ã€€ã€€æƒ³å°†å†™å¥½çš„ä¸€äº›æ–‡ç« ç½®é¡¶ï¼Œä½†æ˜¯hexoå¥½åƒé»˜è®¤ä¸æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œå¸Œæœ›ä»¥åçš„ç‰ˆæœ¬ä¼šæœ‰ã€‚</p>
<a id="more"></a>
<p>è¿™é‡Œç®€å•å†™ä¸€ä¸‹å®ç°hexoæ–‡ç« ç½®é¡¶åŠŸèƒ½</p>
<h2 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h2><p>ã€€ã€€æ‰¾åˆ°node_modules/hexo-generator-index/lib/generator.jsè¿™ä¸ªæ–‡ä»¶ã€‚<br>ã€€ã€€åœ¨ä»£ç ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> posts = locals.posts.sort(config.index_generator.order_by);</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€ä¸‹é¢æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line">posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(a.top &amp;&amp; b.top) &#123; <span class="comment">// å¦‚æœä¸¤ç¯‡æ–‡ç« topéƒ½æœ‰å®šä¹‰</span></span><br><span class="line">		<span class="keyword">if</span>(a.top == b.top) <span class="keyword">return</span> b.date - a.date; <span class="comment">// å¦‚æœtopå€¼ä¸€æ ·åˆ™æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’</span></span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> b.top - a.top; 		<span class="comment">// å¦åˆ™æŒ‰ç…§topå€¼é™åºæ’</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(a.top &amp;&amp; !b.top) &#123; 		<span class="comment">// å¦‚æœåªæœ‰ä¸€ç¯‡æ–‡ç« topæœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†æœ‰topçš„æ’åœ¨å‰é¢</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(!a.top &amp;&amp; b.top) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; <span class="comment">// éƒ½æ²¡å®šä¹‰æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’</span></span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure></div>

<h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JS"><figure class="iseeu highlight /js"><table><tr><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pagination = <span class="built_in">require</span>(<span class="string">'hexo-pagination'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">locals</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> config = <span class="keyword">this</span>.config;</span><br><span class="line">            <span class="keyword">const</span> posts = locals.posts.sort(config.index_generator.order_by);</span><br><span class="line"></span><br><span class="line">            posts.data = posts.data.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(a.top &amp;&amp; b.top) &#123; <span class="comment">// ä¸¤ç¯‡æ–‡ç« topéƒ½æœ‰å®šä¹‰</span></span><br><span class="line">                                <span class="keyword">if</span>(a.top == b.top) <span class="keyword">return</span> b.date - a.date; <span class="comment">// è‹¥topå€¼ä¸€æ ·åˆ™æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’</span></span><br><span class="line">                                <span class="keyword">else</span> <span class="keyword">return</span> b.top - a.top; <span class="comment">// å¦åˆ™æŒ‰ç…§topå€¼é™åºæ’</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(a.top &amp;&amp; !b.top) &#123; <span class="comment">// ä»¥ä¸‹æ˜¯åªæœ‰ä¸€ç¯‡æ–‡ç« topæœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†æœ‰topçš„æ’åœ¨å‰é¢ï¼ˆè¿™é‡Œç”¨å¼‚æˆ–æ“ä½œå±…ç„¶ä¸è¡Œ233ï¼‰</span></span><br><span class="line">                                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(!a.top &amp;&amp; b.top) &#123;</span><br><span class="line">                                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; <span class="comment">// éƒ½æ²¡å®šä¹‰æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">const</span> paginationDir = config.pagination_dir || <span class="string">'page'</span>;</span><br><span class="line">            <span class="keyword">const</span> path = config.index_generator.path || <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> pagination(path, posts, &#123;</span><br><span class="line">                perPage: config.index_generator.per_page,</span><br><span class="line">                layout: [<span class="string">'index'</span>, <span class="string">'archive'</span>],</span><br><span class="line">                format: paginationDir + <span class="string">'/%d/'</span>,</span><br><span class="line">                data: &#123;</span><br><span class="line">                    __index: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div>

<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ–‡ç« å</span><br><span class="line">date: æ–‡ç« å‘å¸ƒæ—¶é—´</span><br><span class="line">tags: æ–‡ç« æ ‡ç­¾</span><br><span class="line">top: 100(æ–‡ç« ç½®é¡¶)</span><br><span class="line">---</span><br></pre></td></tr></table></figure></div>

<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>ã€€ã€€è¿ç§»æ—¶ï¼Œåˆ‡è«å¿˜è®°å¤‡ä»½node_modules/hexo-generator-index/lib/generator.jsè¿™ä¸ªæ–‡ä»¶</p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Giteeå–æ¶ˆè¾“å…¥ç”¨æˆ·ååŠå¯†ç </title>
    <url>/blog/Git/Git_id_01.html</url>
    <content><![CDATA[<p>ã€€ã€€æ¯æ¬¡æäº¤é¡¹ç›®æ—¶ï¼Œéƒ½ä¼šè¢«è¦æ±‚è¾“å…¥ç”¨æˆ·ååŠå¯†ç ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•è·³è¿‡è¿™ä¸€æ­¥éª¤å‘¢ï¼Ÿ</p>
<a id="more"></a>
<p>æœ¬ç¯‡æ–‡ç« ä¸ºæ‚¨æ­æ™“â€¦</p>
<h2 id="ç¬¬ä¸€æ­¥ã€æŸ¥çœ‹é€šä¿¡æ–¹å¼"><a href="#ç¬¬ä¸€æ­¥ã€æŸ¥çœ‹é€šä¿¡æ–¹å¼" class="headerlink" title="ç¬¬ä¸€æ­¥ã€æŸ¥çœ‹é€šä¿¡æ–¹å¼"></a>ç¬¬ä¸€æ­¥ã€æŸ¥çœ‹é€šä¿¡æ–¹å¼</h2><p>ã€€ã€€åœ¨ä½ çš„æœ¬åœ°ä»“åº“ä¸­,æ‰“å¼€å‘½ä»¤çª—å£,æ‰§è¡Œä»¥ä¸‹ä»£ç </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€å¦‚æœæ˜¯ï¼š<br>ã€€ã€€ã€€ã€€origin  <a href="https://gitee.com/fortunamajor/um.git" target="_blank" rel="noopener">https://gitee.com/fortunamajor/um.git</a> (fetch)<br>ã€€ã€€ã€€ã€€origin  <a href="https://gitee.com/fortunamajor/um.git" target="_blank" rel="noopener">https://gitee.com/fortunamajor/um.git</a> (push)<br>ã€€ã€€åˆ™è¯æ˜æ˜¯https é€šä¿¡ï¼Œè¿™æ ·æ¯æ¬¡éƒ½ä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶åæˆ‘ä»¬å°†å…¶ä¿®æ”¹ä¸ºsshç»‘å®šgiteeä»“åº“æœåŠ¡ç«¯</p>
<h2 id="ç¬¬äºŒæ­¥ã€é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ é™¤åŸæœ‰originçš„é€šä¿¡æ–¹å¼"><a href="#ç¬¬äºŒæ­¥ã€é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ é™¤åŸæœ‰originçš„é€šä¿¡æ–¹å¼" class="headerlink" title="ç¬¬äºŒæ­¥ã€é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ é™¤åŸæœ‰originçš„é€šä¿¡æ–¹å¼"></a>ç¬¬äºŒæ­¥ã€é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ é™¤åŸæœ‰originçš„é€šä¿¡æ–¹å¼</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">git remote rm origin</span><br></pre></td></tr></table></figure></div>

<h2 id="ç¬¬ä¸‰æ­¥ã€é‡æ–°add-ï¼Œé€šè¿‡sshç»‘å®šgiteeä»“åº“æœåŠ¡ç«¯"><a href="#ç¬¬ä¸‰æ­¥ã€é‡æ–°add-ï¼Œé€šè¿‡sshç»‘å®šgiteeä»“åº“æœåŠ¡ç«¯" class="headerlink" title="ç¬¬ä¸‰æ­¥ã€é‡æ–°add ï¼Œé€šè¿‡sshç»‘å®šgiteeä»“åº“æœåŠ¡ç«¯"></a>ç¬¬ä¸‰æ­¥ã€é‡æ–°add ï¼Œé€šè¿‡sshç»‘å®šgiteeä»“åº“æœåŠ¡ç«¯</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">git remote add origin git@gitee.com:USERNAME/UM.git</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€usernameå¡«å†™giteeæˆ·åï¼Œum.git å¡«å†™ä»“åº“å.git<br>ã€€ã€€è‹¥æ€•è¾“é”™ï¼Œä¹Ÿå¯ä»¥å»ä»“åº“é‡Œã€å…‹éš†/ä¸‹è½½ã€‘çš„åœ°æ–¹ï¼Œç›´æ¥å¤åˆ¶SSHè·¯ç”±</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoå¸¸ç”¨å‘½ä»¤</title>
    <url>/blog/Hexo/Hexo_id_01.html</url>
    <content><![CDATA[<p>ã€€ã€€Hexoæ˜¯ä¸€æ¬¾éå¸¸æµè¡Œä¸”å¥½ç”¨çš„ä¸ªäººåšå®¢æ¨¡æ¿ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹Hexoçš„å¸¸ç”¨å‘½ä»¤æ˜¯ä»€ä¹ˆå§â€¦â€¦</p>
<a id="more"></a>

<h2 id="å¸¸è§å‘½ä»¤ï¼š"><a href="#å¸¸è§å‘½ä»¤ï¼š" class="headerlink" title="å¸¸è§å‘½ä»¤ï¼š"></a>å¸¸è§å‘½ä»¤ï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">"postName"</span> 			<span class="comment">#æ–°å»ºæ–‡ç« </span></span><br><span class="line">hexo new page <span class="string">"pageName"</span> 		<span class="comment">#æ–°å»ºé¡µé¢</span></span><br><span class="line">hexo generate 				<span class="comment">#ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•</span></span><br><span class="line">hexo server 					<span class="comment">#å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰</span></span><br><span class="line">hexo deploy 					<span class="comment">#éƒ¨ç½²åˆ°GitHub</span></span><br><span class="line">hexo <span class="built_in">help</span>  					<span class="comment"># æŸ¥çœ‹å¸®åŠ©</span></span><br><span class="line">hexo version  					<span class="comment">#æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure></div>

<h2 id="ç¼©å†™ï¼š"><a href="#ç¼©å†™ï¼š" class="headerlink" title="ç¼©å†™ï¼š"></a>ç¼©å†™ï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure></div>

<h2 id="ç»„åˆå‘½ä»¤ï¼š"><a href="#ç»„åˆå‘½ä»¤ï¼š" class="headerlink" title="ç»„åˆå‘½ä»¤ï¼š"></a>ç»„åˆå‘½ä»¤ï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">hexo s -g <span class="comment">#ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆ</span></span><br><span class="line">hexo d -g <span class="comment">#ç”Ÿæˆå¹¶ä¸Šä¼ </span></span><br></pre></td></tr></table></figure></div>

<h2 id="å†™åšå®¢ï¼š"><a href="#å†™åšå®¢ï¼š" class="headerlink" title="å†™åšå®¢ï¼š"></a>å†™åšå®¢ï¼š</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">å®šä½åˆ°æˆ‘ä»¬çš„hexoæ ¹ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</span><br><span class="line">	hexo new <span class="string">'my-first-blog'</span></span><br><span class="line">hexoä¼šå¸®æˆ‘ä»¬åœ¨`_posts`ä¸‹ç”Ÿæˆç›¸å…³mdæ–‡ä»¶ï¼š</span><br><span class="line"><span class="comment"># å‘½ä»¤çª—å£ä¸­ï¼š</span></span><br><span class="line">F:\blog\hexo&gt;hexo new <span class="string">"my-first-blog"</span></span><br><span class="line">INFO  Created: F:\blog\hexo\<span class="built_in">source</span>\_posts\hexoå¸¸ç”¨å‘½ä»¤-1.md</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€æˆ‘ä»¬åªéœ€è¦æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥å¼€å§‹å†™åšå®¢äº†</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤ç”Ÿæˆå¦‚ä¸‹å†…å®¹ï¼š</span></span><br><span class="line">---</span><br><span class="line">title: my-first-blog</span><br><span class="line">date: 2013-12-02 15:30:16 </span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure></div>

<p>ã€€ã€€å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥è‡ªå·±æ–°å»ºmdæ–‡ä»¶ï¼Œç”¨è¿™ä¸ªå‘½ä»¤çš„å¥½å¤„æ˜¯å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆäº†æ—¶é—´ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸€èˆ¬å®Œæ•´æ ¼å¼å¦‚ä¸‹ï¼š</span></span><br><span class="line">---</span><br><span class="line">title: postName <span class="comment">#æ–‡ç« é¡µé¢ä¸Šçš„æ˜¾ç¤ºåç§°ï¼Œä¸€èˆ¬æ˜¯ä¸­æ–‡</span></span><br><span class="line">date: 2013-12-02 15:30:16 <span class="comment">#æ–‡ç« ç”Ÿæˆæ—¶é—´ï¼Œä¸€èˆ¬ä¸æ”¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»»æ„ä¿®æ”¹</span></span><br><span class="line">categories: é»˜è®¤åˆ†ç±» <span class="comment">#åˆ†ç±»</span></span><br><span class="line">tags: [tag1,tag2,tag3] <span class="comment">#æ–‡ç« æ ‡ç­¾ï¼Œå¯ç©ºï¼Œå¤šæ ‡ç­¾è¯·ç”¨æ ¼å¼ï¼Œæ³¨æ„:åé¢æœ‰ä¸ªç©ºæ ¼</span></span><br><span class="line">description: é™„åŠ ä¸€æ®µæ–‡ç« æ‘˜è¦ï¼Œå­—æ•°æœ€å¥½åœ¨140å­—ä»¥å†…ï¼Œä¼šå‡ºç°åœ¨metaçš„descriptioné‡Œé¢</span><br><span class="line">---</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHubè®¿é—®åŠcloneç¼“æ…¢çš„æ–¹æ³•</title>
    <url>/blog/Git/Git_id_02.html</url>
    <content><![CDATA[<p>ã€€ã€€ä½ ä»¬åœ¨è®¿é—®GitHubç½‘ç«™æ—¶æœ‰æ²¡æœ‰å‡ºç°åŠ è½½ç¼“æ…¢ï¼Œç”šè‡³åŠ è½½å¤±è´¥çš„æƒ…å†µå‘¢ï¼Ÿ</p>
<a id="more"></a>
<p>é‚£ä¹ˆï¼Œè¿™ç§æƒ…å†µè¯¥å¦‚ä½•æœç»å‘¢ï¼Ÿè¯·ç»§ç»­å¾€ä¸‹é˜…è¯»â€¦â€¦</p>
<h2 id="ç¬¬ä¸€æ­¥ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼š"></a>ç¬¬ä¸€æ­¥ï¼š</h2><p>ã€€ã€€ç‚¹å‡»è®¿é—®ç½‘å€ï¼š<a href="https://www.ipaddress.com/" target="_blank" rel="noopener">https://www.ipaddress.com/</a><br>ã€€ã€€åœ¨è¯¥ç½‘å€ä¸­æœç´¢ï¼š<br>ã€€ã€€ã€€ã€€github.global.ssl.fastly.net<br>ã€€ã€€ã€€ã€€github.com<br>ã€€ã€€å¾—åˆ°ç›¸åº”çš„ipåœ°å€<span style="color:red">(å¦‚å›¾ä¸€ï¼Œå›¾äºŒ)</span></p>
<h2 id="å¦‚å›¾"><a href="#å¦‚å›¾" class="headerlink" title="å¦‚å›¾:"></a>å¦‚å›¾:</h2><img src="http://q72tcv6j6.bkt.clouddn.com/GitHub%E8%AE%BF%E9%97%AE%E5%8F%8Aclone%E7%BC%93%E6%85%A2%E7%9A%84%E6%96%B9%E6%B3%951.png" style="zoom:67%;" />

<p style="color:blue;text-align:center">å›¾ä¸€</p>
<img src="http://q72tcv6j6.bkt.clouddn.com/GitHub%E8%AE%BF%E9%97%AE%E5%8F%8Aclone%E7%BC%93%E6%85%A2%E7%9A%84%E6%96%B9%E6%B3%952.png" style="zoom:67%;" />

<p style="color:blue;text-align:center">å›¾äºŒ</p>
ç¬¬äºŒæ­¥ï¼š
---

<p>ã€€ã€€æ‰¾åˆ°ä¸ªäººç”µè„‘ä¸­çš„hostsæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶åœ¨æ¯ä¸ªç”µè„‘ä¸Šçš„è·¯å¾„åŸºæœ¬ä¸Šæ˜¯ä¸€è‡´çš„ï¼šC:\Windows\System32\drivers\etc<br>ã€€ã€€æ‰“å¼€åå°†è·å–åˆ°çš„ipåœ°å€åŠç½‘å€æ·»åŠ åˆ°postsæ–‡ä»¶çš„æœ€ä¸‹é¢ï¼Œä¿å­˜åé€€å‡º<br>ã€€ã€€ä¾‹å¦‚ï¼š<br>ã€€ã€€ã€€ã€€151.101.185.194 github.global-ssl.fastly.net<br>ã€€ã€€ã€€ã€€192.30.253.112 github.com<br>ã€€ã€€æ³¨æ„ï¼š<br>ã€€ã€€ã€€ã€€å› æ­¤æ–‡ä»¶åœ¨ç³»ç»Ÿç›®å½•ä¸­ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ä¿å­˜ï¼Œå¯å°†postsæ–‡ä»¶å¤åˆ¶åˆ°æ¡Œé¢è¿›è¡Œä¿®æ”¹<br>ã€€ã€€ã€€ã€€ä¿®æ”¹å®Œæˆåç²˜è´´åˆ°C:\Windows\System32\drivers\etcç›®å½•ä¸­è¿›è¡Œå–ä»£ä¹‹å‰çš„postsæ–‡ä»¶</p>
<h2 id="ç¬¬ä¸‰æ­¥ï¼š"><a href="#ç¬¬ä¸‰æ­¥ï¼š" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼š"></a>ç¬¬ä¸‰æ­¥ï¼š</h2><p>ã€€ã€€å½“ç¬¬äºŒæ­¥å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°DNS<br>ã€€ã€€Winodwsç³»ç»Ÿçš„åšæ³•ï¼šæ‰“å¼€CMDï¼Œè¾“å…¥ipconfig /flushdns<br>ã€€ã€€Linuxçš„åšæ³•ï¼šåœ¨ç»ˆç«¯è¾“å…¥sudo /etc/init.d/networking restart</p>
<h2 id="å¦ï¼š"><a href="#å¦ï¼š" class="headerlink" title="å¦ï¼š"></a>å¦ï¼š</h2><p>ã€€ã€€å¦‚æœæ·»åŠ ä¸Šé¢ä¸¤æ¡ipåæ— ä»»ä½•ä½œç”¨ï¼Œå¯å¤åˆ¶ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°postsæ–‡ä»¶ä¸­</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">151.101.44.249 github.global.ssl.fastly.net</span><br><span class="line">192.30.253.113 github.com</span><br><span class="line">103.245.222.133 assets-cdn.github.com</span><br><span class="line">23.235.47.133 assets-cdn.github.com</span><br><span class="line">203.208.39.104 assets-cdn.github.com</span><br><span class="line">204.232.175.78 documentcloud.github.com</span><br><span class="line">204.232.175.94 gist.github.com</span><br><span class="line">107.21.116.220 help.github.com</span><br><span class="line">207.97.227.252 nodeload.github.com</span><br><span class="line">199.27.76.130 raw.github.com</span><br><span class="line">107.22.3.110 status.github.com</span><br><span class="line">204.232.175.78 training.github.com</span><br><span class="line">207.97.227.243 www.github.com</span><br><span class="line">185.31.16.184 github.global.ssl.fastly.net</span><br><span class="line">185.31.18.133 avatars0.githubusercontent.com</span><br><span class="line">185.31.19.133 avatars1.githubusercontent.com</span><br></pre></td></tr></table></figure></div>

<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>ã€€ã€€åªè¦è„‘å­ä¸æ»‘å¡ï¼ŒåŠæ³•æ€»æ¯”å›°éš¾å¤šï¼Œç¥å„ä½æœºå‹è¶Šå­¦è¶Šå¹´è½»ï¼Œéƒ½èƒ½æœ‰è‡ªå·±æ»¡æ„çš„æˆæœ<br>ã€€ã€€å¦‚æœæ„Ÿè§‰éº»çƒ¦ï¼Œæˆ–è€…ä¸æƒ³ä¿®æ”¹ç”µè„‘Cç›˜ä¸­çš„æ–‡ä»¶ï¼Œåˆ™å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« æ¥å®ç°å¿«é€Ÿè®¿é—®<a href="https://www.onlyyu.cn/2020/04/02/07/" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œé˜…è¯»</a></p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘æ——ä¸‹ecsäº‘æœåŠ¡å™¨é…ç½®ä½¿ç”¨è¯¦æƒ…</title>
    <url>/blog/CentOS/CentOS_id_08.html</url>
    <content><![CDATA[<h2 id="å‰æ®µæ—¶é—´-ä¸æœ‹å‹åœ¨é˜¿é‡Œäº‘å¹³å°ä¸Šä¸€èµ·è´­ä¹°äº†ä¸€å°äº‘æœåŠ¡å™¨"><a href="#å‰æ®µæ—¶é—´-ä¸æœ‹å‹åœ¨é˜¿é‡Œäº‘å¹³å°ä¸Šä¸€èµ·è´­ä¹°äº†ä¸€å°äº‘æœåŠ¡å™¨" class="headerlink" title="å‰æ®µæ—¶é—´,ä¸æœ‹å‹åœ¨é˜¿é‡Œäº‘å¹³å°ä¸Šä¸€èµ·è´­ä¹°äº†ä¸€å°äº‘æœåŠ¡å™¨"></a>å‰æ®µæ—¶é—´,ä¸æœ‹å‹åœ¨é˜¿é‡Œäº‘å¹³å°ä¸Šä¸€èµ·è´­ä¹°äº†ä¸€å°äº‘æœåŠ¡å™¨</h2><h2 id="åŸå®šè®¡åˆ’æ˜¯å®‰è£…ubuntuç³»ç»Ÿæ¥ä½¿ç”¨-æ–¹ä¾¿é…ç½®-åé¢å› ä¸ºæˆ‘ä»¬ä¸¤ä¸ªä¾§é‡ç‚¹éƒ½åœ¨pythonä¸Š-äºæ˜¯é€‰æ‹©äº†æœ¬èº«è‡ªå¸¦pythonç¯å¢ƒçš„centosç³»ç»Ÿ-åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­-é‡åˆ°äº†å„ç§å„æ ·çš„é—®é¢˜"><a href="#åŸå®šè®¡åˆ’æ˜¯å®‰è£…ubuntuç³»ç»Ÿæ¥ä½¿ç”¨-æ–¹ä¾¿é…ç½®-åé¢å› ä¸ºæˆ‘ä»¬ä¸¤ä¸ªä¾§é‡ç‚¹éƒ½åœ¨pythonä¸Š-äºæ˜¯é€‰æ‹©äº†æœ¬èº«è‡ªå¸¦pythonç¯å¢ƒçš„centosç³»ç»Ÿ-åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­-é‡åˆ°äº†å„ç§å„æ ·çš„é—®é¢˜" class="headerlink" title="åŸå®šè®¡åˆ’æ˜¯å®‰è£…ubuntuç³»ç»Ÿæ¥ä½¿ç”¨,æ–¹ä¾¿é…ç½®,åé¢å› ä¸ºæˆ‘ä»¬ä¸¤ä¸ªä¾§é‡ç‚¹éƒ½åœ¨pythonä¸Š,äºæ˜¯é€‰æ‹©äº†æœ¬èº«è‡ªå¸¦pythonç¯å¢ƒçš„centosç³»ç»Ÿ,åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­,é‡åˆ°äº†å„ç§å„æ ·çš„é—®é¢˜"></a>åŸå®šè®¡åˆ’æ˜¯å®‰è£…ubuntuç³»ç»Ÿæ¥ä½¿ç”¨,æ–¹ä¾¿é…ç½®,åé¢å› ä¸ºæˆ‘ä»¬ä¸¤ä¸ªä¾§é‡ç‚¹éƒ½åœ¨pythonä¸Š,äºæ˜¯é€‰æ‹©äº†æœ¬èº«è‡ªå¸¦pythonç¯å¢ƒçš„centosç³»ç»Ÿ,åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­,é‡åˆ°äº†å„ç§å„æ ·çš„é—®é¢˜</h2><a id="more"></a>

<h2 id="æˆ‘æœ¬èº«æ˜¯è´Ÿè´£æœåŠ¡å™¨æ­å»ºè¿™ä¸€å—å„¿çš„-æœåŠ¡å™¨è¿™è¾¹çš„å„ç§é—®é¢˜åŸºæœ¬éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººåœ¨æŠ˜è…¾-åˆ°ä»Šå¤©-åŸºæœ¬å·²ç»å®Œæˆæ¶æ„-å‰åç«¯é¡¹ç›®ä¹Ÿå·²ç»åœ¨æœåŠ¡å™¨ä¸Šè·‘äº†èµ·æ¥-äºæ˜¯è…¾å‡ºæ‰‹æ¥-æŠŠä¹‹å‰é‡åˆ°çš„ä¸€äº›é—®é¢˜è¿›è¡Œä¸€ä¸‹æ±‡æ€»"><a href="#æˆ‘æœ¬èº«æ˜¯è´Ÿè´£æœåŠ¡å™¨æ­å»ºè¿™ä¸€å—å„¿çš„-æœåŠ¡å™¨è¿™è¾¹çš„å„ç§é—®é¢˜åŸºæœ¬éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººåœ¨æŠ˜è…¾-åˆ°ä»Šå¤©-åŸºæœ¬å·²ç»å®Œæˆæ¶æ„-å‰åç«¯é¡¹ç›®ä¹Ÿå·²ç»åœ¨æœåŠ¡å™¨ä¸Šè·‘äº†èµ·æ¥-äºæ˜¯è…¾å‡ºæ‰‹æ¥-æŠŠä¹‹å‰é‡åˆ°çš„ä¸€äº›é—®é¢˜è¿›è¡Œä¸€ä¸‹æ±‡æ€»" class="headerlink" title="æˆ‘æœ¬èº«æ˜¯è´Ÿè´£æœåŠ¡å™¨æ­å»ºè¿™ä¸€å—å„¿çš„,æœåŠ¡å™¨è¿™è¾¹çš„å„ç§é—®é¢˜åŸºæœ¬éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººåœ¨æŠ˜è…¾,åˆ°ä»Šå¤©,åŸºæœ¬å·²ç»å®Œæˆæ¶æ„,å‰åç«¯é¡¹ç›®ä¹Ÿå·²ç»åœ¨æœåŠ¡å™¨ä¸Šè·‘äº†èµ·æ¥,äºæ˜¯è…¾å‡ºæ‰‹æ¥,æŠŠä¹‹å‰é‡åˆ°çš„ä¸€äº›é—®é¢˜è¿›è¡Œä¸€ä¸‹æ±‡æ€»"></a>æˆ‘æœ¬èº«æ˜¯è´Ÿè´£æœåŠ¡å™¨æ­å»ºè¿™ä¸€å—å„¿çš„,æœåŠ¡å™¨è¿™è¾¹çš„å„ç§é—®é¢˜åŸºæœ¬éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººåœ¨æŠ˜è…¾,åˆ°ä»Šå¤©,åŸºæœ¬å·²ç»å®Œæˆæ¶æ„,å‰åç«¯é¡¹ç›®ä¹Ÿå·²ç»åœ¨æœåŠ¡å™¨ä¸Šè·‘äº†èµ·æ¥,äºæ˜¯è…¾å‡ºæ‰‹æ¥,æŠŠä¹‹å‰é‡åˆ°çš„ä¸€äº›é—®é¢˜è¿›è¡Œä¸€ä¸‹æ±‡æ€»</h2><h2 id="çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„æœ‹å‹å¦‚æœæœ‰ä»€ä¹ˆç–‘é—®-å¯ä»¥ç»™ä½œè€…å‘ç§ä¿¡"><a href="#çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„æœ‹å‹å¦‚æœæœ‰ä»€ä¹ˆç–‘é—®-å¯ä»¥ç»™ä½œè€…å‘ç§ä¿¡" class="headerlink" title="çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„æœ‹å‹å¦‚æœæœ‰ä»€ä¹ˆç–‘é—®,å¯ä»¥ç»™ä½œè€…å‘ç§ä¿¡"></a>çœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„æœ‹å‹å¦‚æœæœ‰ä»€ä¹ˆç–‘é—®,å¯ä»¥ç»™ä½œè€…å‘ç§ä¿¡</h2><ol>
<li><h3 id="å®‰è£…redis"><a href="#å®‰è£…redis" class="headerlink" title="å®‰è£…redis"></a>å®‰è£…redis</h3><p>ä¸‹è½½rediså®‰è£…åŒ…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AWK"><figure class="iseeu highlight /awk"><table><tr><td class="code"><pre><span class="line">wget hhhttp:<span class="regexp">//</span>downloac.redis.io<span class="regexp">/releases/</span>redis-<span class="number">4.0</span>.<span class="number">6</span>.tar.gz</span><br></pre></td></tr></table></figure></div>

<p>è§£å‹å‹ç¼©åŒ…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">redis-4</span><span class="selector-class">.0</span><span class="selector-class">.6</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure></div>

<p>yum å®‰è£…gccä¾èµ–</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CMAKE"><figure class="iseeu highlight /cmake"><table><tr><td class="code"><pre><span class="line">yum <span class="keyword">install</span> gcc</span><br></pre></td></tr></table></figure></div>

<p>è·³è½¬åˆ°redisè§£å‹ç›®å½•ä¸‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">cd redis<span class="number">-4.0</span><span class="number">.6</span></span><br></pre></td></tr></table></figure></div>

<p>ç¼–è¯‘å®‰è£…</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="GAUSS"><figure class="iseeu highlight /gauss"><table><tr><td class="code"><pre><span class="line"><span class="built_in">make</span> MAKKOC=libc</span><br><span class="line"><span class="meta"># å°†/usr/local/redis-4.0.6/srcç›®å½•ä¸‹çš„æ–‡ä»¶æ·»åŠ åˆ°/usr/local/bin ç›®å½•</span></span><br><span class="line">cd src &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure></div>

<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line"># å°†åŸæœ¬ç»‘å®šçš„ip127<span class="number">.0</span><span class="number">.0</span><span class="number">.1</span>ä¿®æ”¹ä¸º<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">bind <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line"># å…³é—­ä¿æŠ¤æ¨¡å¼</span><br><span class="line"><span class="keyword">protected</span>-mode yes ä¿®æ”¹ä¸ºno</span><br></pre></td></tr></table></figure></div>

<p>åœ¨æœåŠ¡å™¨å®‰å…¨ç­–ç•¥ä¸­å¼€æ”¾6379ç«¯å£</p>
</li>
<li><h1 id="é˜¿é‡Œäº‘æœåŠ¡å™¨çš„å›¾å½¢ç•Œé¢"><a href="#é˜¿é‡Œäº‘æœåŠ¡å™¨çš„å›¾å½¢ç•Œé¢" class="headerlink" title="é˜¿é‡Œäº‘æœåŠ¡å™¨çš„å›¾å½¢ç•Œé¢"></a>é˜¿é‡Œäº‘æœåŠ¡å™¨çš„å›¾å½¢ç•Œé¢</h1><p>â€‹    é˜¿é‡Œäº‘çš„centosæœåŠ¡å™¨,åœ¨å®‰è£…å›¾å½¢ç•Œé¢ä¹‹å,å…¶å®ä¾ç„¶æ˜¯æ— æ³•è®¿é—®çš„,æˆ‘ä¹‹å‰çº ç»“äºè¿™ä¸ªé—®é¢˜,ç›´    åˆ°æœ€åå‘ç°äº†è¿™ä¸ªé—®é¢˜.</p>
<p>â€‹    åœ¨é˜¿é‡Œäº‘çš„è¿œç¨‹è¿æ¥,å…¶å®è¿˜æœ‰è¿™ä¸ªå¦å¤–ä¸€ä¸ªvncé€‰é¡¹,é€šè¿‡è¿™ä¸ªé€‰é¡¹è¿›è¡Œè¿æ¥çš„è¯,å°†ä¼šè‡ªåŠ¨å¸®ä½ é…ç½®å¥½å›¾å½¢åŒ–ç•Œé¢,è€Œç›¸åçš„æ˜¯,å¦‚æœä½ åœ¨é»˜è®¤çš„è¿œç¨‹è¿æ¥çª—å£è¿›è¡Œå›¾å½¢åŒ–ç•Œé¢çš„é…ç½®çš„è¯,å°†ä¼šç™¾åˆ†ç™¾çš„å¤±è´¥,å¤±å»å“åº”</p>
<p>â€‹    åˆ‡è®°,åœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œvncè¿æ¥çš„æ—¶å€™,å°†ä¼šæœ‰ä¸€ä¸ªè¿œç¨‹è¿æ¥å¯†ç ç”Ÿæˆ</p>
<p>â€‹    è¿™ä¸ªå¯†ç å°†ä¼šæ˜¯å›ºå®šçš„,ä¸€å®šè¦æŠŠä»–è®°ä¸‹æ¥,å¦åˆ™çš„è¯ä½ å°†æ— æ³•è¿æ¥è¿™ä¸ªå›¾å½¢ç•Œé¢</p>
<h4 id="åˆ‡è®°"><a href="#åˆ‡è®°" class="headerlink" title="åˆ‡è®°!!!"></a>åˆ‡è®°!!!</h4></li>
<li><h1 id="Centos7æœ¬èº«çš„pythonç¯å¢ƒé—®é¢˜"><a href="#Centos7æœ¬èº«çš„pythonç¯å¢ƒé—®é¢˜" class="headerlink" title="Centos7æœ¬èº«çš„pythonç¯å¢ƒé—®é¢˜"></a>Centos7æœ¬èº«çš„pythonç¯å¢ƒé—®é¢˜</h1><p>centos7æœ¬èº«å†…ç½®äº†ä¸€ä¸ª2.7çš„pythonç¯å¢ƒ,åœ¨å½“å‰çš„ç‰ˆæœ¬ä¸‹,å¾ˆå¤šåŠŸèƒ½éƒ½æ— æ³•ä½¿ç”¨,æ‰€ä»¥æ¨èé‡æ–°å®‰è£…ä¸€ä¸ªæ–°ç‰ˆçš„pythonç¯å¢ƒ,å¦åˆ™ä½ å°†ä¼šåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°è¯¸å¦‚: pythonç‰ˆæœ¬è¿‡ä½,æ— æ³•å®‰è£…åŒ…/pipç‰ˆæœ¬è¿‡ä½,æ— æ³•å®‰è£…åŒ…/åŒ…å·²åºŸå¼ƒâ€¦..ç­‰ç­‰æƒ…å†µ,æ‰€ä»¥æ–°äººçš„è¯æ¨èè¿˜æ˜¯ç¨³å¦¥ä¸€ç‚¹,æ¢ä¸€ä¸ªè‡ªå·±é¡ºæ‰‹çš„ç‰ˆæœ¬</p>
</li>
<li><h1 id="éƒ¨ç½²Vue"><a href="#éƒ¨ç½²Vue" class="headerlink" title="éƒ¨ç½²Vue"></a>éƒ¨ç½²Vue</h1><p>Vueçš„éƒ¨ç½²æ¯”è¾ƒç®€å•,åªéœ€è¦å°†config/index.jsä¸­çš„å…³äºipå’Œç«¯å£çš„é…ç½®ä¿®æ”¹å³å¯,hostä¿®æ”¹ä¸º0.0.0.0,</p>
<p>ç«¯å£çš„è¯å¯ä»¥éšæ„è®¾å®š,å½“ç„¶,è®¾å®šå®Œè®°å¾—åœ¨æœåŠ¡å™¨å®‰å…¨ç­–ç•¥ä¸­å¼€æ”¾å¯¹åº”çš„ç«¯å£,ä»¥å…å‡ºç°ç«¯å£æ— æ³•è®¿é—®çš„æƒ…å†µ</p>
</li>
<li><h1 id="éƒ¨ç½²Django"><a href="#éƒ¨ç½²Django" class="headerlink" title="éƒ¨ç½²Django"></a>éƒ¨ç½²Django</h1><p>Djangoçš„éƒ¨ç½²,éœ€è¦åœ¨settingsè®¾ç½®ä¸­æ·»åŠ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">ALLOWED_HOSTS</span> = [<span class="string">'*'</span>]</span><br></pre></td></tr></table></figure></div>

<p>å³å…è®¸ä»»ä½•ipè®¿é—®,éƒ¨ç½²æ—¶ä½¿ç”¨ python manage.py runserver 0.0.0.0:8000 çš„å½¢å¼è¿›è¡Œå¯åŠ¨</p>
</li>
</ol>
<p>â€‹    </p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰åå…­)</title>
    <url>/blog/Python/Python_id_54.html</url>
    <content><![CDATA[<h2 id="pymssqlæ¨¡å—"><a href="#pymssqlæ¨¡å—" class="headerlink" title="pymssqlæ¨¡å—"></a>pymssqlæ¨¡å—</h2><p>è¿æ¥<code>mysql</code>éœ€è¦ç”¨åˆ°<code>pymysql</code>æ¨¡å—<br>è€Œè¿æ¥<code>Microsoft SQL server</code> éœ€è¦ç”¨åˆ°<code>pymssql</code>æ¨¡å—</p>
<a id="more"></a>

<p>å‰é¢ç« èŠ‚ä»‹ç»äº†åŸºæœ¬çš„sqlè¯­å¥å’Œ<code>sqlite3</code>æ¨¡å—çš„ç”¨æ³•ã€‚<br><code>pymssql</code>æ¨¡å—ä¸<code>sqlite3</code>æ¨¡å—æ–¹æ³•åŸºæœ¬ä¸€è‡´</p>
<h3 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h3><p>ç›´æ¥<code>pip install pymssql</code>å®‰è£…ã€‚<br>å¯èƒ½ä¼šæŠ¥é”™ï¼š<br>å¯ä»¥åˆ°<a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/ä¸Šå¯»æ‰¾å¯¹åº”ç‰ˆæœ¬ä¸‹è½½`.whl`æ–‡ä»¶" target="_blank" rel="noopener">https://www.lfd.uci.edu/~gohlke/pythonlibs/ä¸Šå¯»æ‰¾å¯¹åº”ç‰ˆæœ¬ä¸‹è½½`.whl`æ–‡ä»¶</a><br>ç„¶åä½¿ç”¨å¦‚<code>pip install pymssql-2.1.4-cp38-cp38-win_amd64</code>æ¥å®‰è£…</p>
<h3 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h3><h4 id="æŒ‡å®šç”¨æˆ·åå¯†ç è¿æ¥"><a href="#æŒ‡å®šç”¨æˆ·åå¯†ç è¿æ¥" class="headerlink" title="æŒ‡å®šç”¨æˆ·åå¯†ç è¿æ¥"></a>æŒ‡å®šç”¨æˆ·åå¯†ç è¿æ¥</h4><p>æ³¨æ„ï¼šhost:è®¡ç®—æœºå\å®ä¾‹åï¼Œåœ¨pythonä»£ç æ–œçº¿éœ€è¦è½¬ä¹‰ï¼Œæ•°æ®åº“çš„è¿æ¥å·¥å…·é‡Œä¸è¦è½¬ä¹‰ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymssql</span><br><span class="line"></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">"host"</span>: <span class="string">'192.168.10.1\\nnr'</span>,</span><br><span class="line">    <span class="string">"user"</span>: <span class="string">"sa"</span>,</span><br><span class="line">    <span class="string">"database"</span>: <span class="string">"demo_project"</span>,</span><br><span class="line">    <span class="string">"password"</span>: <span class="string">"114514"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">conn = pymssql.connect(**DATABASES)</span><br><span class="line">cur = conn.cursor()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> cur:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">"æ•°æ®åº“è¿æ¥å¤±è´¥"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"æ•°æ®åº“è¿æ¥æˆåŠŸ"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æŸ¥è¯¢å¹¶æ‰“å°ç»“æœ</span></span><br><span class="line">cur.execute(<span class="string">'select * from sys.tables'</span>)</span><br><span class="line">query_set = cur.fetchall()</span><br><span class="line">print(query_set, width=<span class="number">60</span>, compact=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®°å¾—å…³é—­ä»¥é‡Šæ”¾èµ„æº</span></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure></div>

<h4 id="Windowsè´¦æˆ·è¿æ¥"><a href="#Windowsè´¦æˆ·è¿æ¥" class="headerlink" title="Windowsè´¦æˆ·è¿æ¥"></a>Windowsè´¦æˆ·è¿æ¥</h4><p>ç™»å½•è‡ªå·±ç”µè„‘ä¸Šçš„æ•°æ®åº“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨Windowsèº«ä»½è®¤è¯çš„æ–¹å¼ç™»é™†æ˜¯ä¸ªå¾ˆå¥½ç”¨çš„æ–¹æ³•ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">"host"</span>: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">    <span class="string">"database"</span>: <span class="string">"demo_project"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>åªè¦ä¸å¡«è´¦å·å¯†ç ï¼Œå°±ä¼šè‡ªåŠ¨ç”¨Windowsèº«ä»½è®¤è¯çš„æ–¹å¼æ¥ç™»å½•äº†ã€‚</p>
<h4 id="connectçš„å…¶ä»–å¸¸ç”¨å‚æ•°"><a href="#connectçš„å…¶ä»–å¸¸ç”¨å‚æ•°" class="headerlink" title="connectçš„å…¶ä»–å¸¸ç”¨å‚æ•°"></a>connectçš„å…¶ä»–å¸¸ç”¨å‚æ•°</h4><ul>
<li><code>as_dict</code>(bool) ï¼šå¦‚æœè®¾ç½®ä¸ºTrueï¼Œåˆ™åé¢çš„æŸ¥è¯¢ç»“æœè¿”å›çš„æ˜¯å­—å…¸ï¼Œå…³é”®å­—ä¸ºæŸ¥è¯¢ç»“æœçš„åˆ—åï¼›å¦åˆ™(é»˜è®¤)è¿”å›çš„ä¸ºlistã€‚</li>
<li><code>autocommit</code>(bool)ï¼šé»˜è®¤ä¸ºFalseï¼Œè¿™æ ·å¦‚æœå¯¹æ•°æ®è¡¨è¿›è¡Œæ›´æ”¹ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒç”¨commitæ¥æäº¤æ“ä½œã€‚</li>
<li><code>port</code>(str)ï¼šæŒ‡å®šæœåŠ¡å™¨çš„TCPç«¯å£ï¼Œå¦‚æœä½ æ²¡æœ‰æ”¹è¿‡çš„è¯ä½¿ç”¨é»˜è®¤çš„å°±å¥½ã€‚</li>
</ul>
<h3 id="æ‰§è¡ŒSQLè¯­å¥"><a href="#æ‰§è¡ŒSQLè¯­å¥" class="headerlink" title="æ‰§è¡ŒSQLè¯­å¥"></a>æ‰§è¡ŒSQLè¯­å¥</h3><h4 id="execute"><a href="#execute" class="headerlink" title="execute"></a>execute</h4><p>å®ƒç±»ä¼¼äºä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œä½¿ç”¨ä¹‹åæ¸¸æ ‡å¯¹è±¡cursorä¼šå˜æˆä¸€ä¸ªç»“æœé›†è¿­ä»£å™¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">'select top 5 * from t1'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–æ‰€æœ‰æŸ¥è¯¢ç»“æœè¿”å›åˆ—è¡¨,è§ä¸‹</span></span><br><span class="line">querylist = list(cur)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ ‡å‡†åº“ä¸­çš„pprintæ¨¡å—ï¼Œæ›´ç¾è§‚çš„æ‰“å°æ•°æ®</span></span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line">pprint(querylist, width=<span class="number">60</span>, compact=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#fetchall()è¿”å›å‡ºåˆ—è¡¨åµŒå¥—å…ƒç»„çš„ç»“æ„ï¼Œæ¯ä¸ªæ•°æ®è¡Œæ˜¯ä¸€ä¸ªå…ƒç»„ã€‚</span></span><br><span class="line"></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ç”¨å¯¹SQLè¯­å¥æ ¼å¼åŒ–</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">curs.execute(<span class="string">'SELECT * FROM t1 WHERE username=%s'</span>, <span class="string">'John Doe'</span>)</span><br></pre></td></tr></table></figure></div>

<h4 id="executemany"><a href="#executemany" class="headerlink" title="executemany"></a>executemany</h4><p>å¯ä»¥æ‰§è¡Œå¤šæ¡è¯­å¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ’å…¥ä¸‰æ¡æµ‹è¯•æ•°æ®</span></span><br><span class="line">cursor.executemany(</span><br><span class="line">    <span class="string">"INSERT INTO t1 VALUES (%d, %s, %s)"</span>,</span><br><span class="line">    [(<span class="number">1</span>, <span class="string">'John Smith'</span>, <span class="string">'John Doe'</span>),</span><br><span class="line">     (<span class="number">2</span>, <span class="string">'Jane Doe'</span>, <span class="string">'Joe Dog'</span>),</span><br><span class="line">     (<span class="number">3</span>, <span class="string">'Mike T.'</span>, <span class="string">'Sarah H.'</span>)])</span><br><span class="line"><span class="comment"># æäº¤ä¿®æ”¹ï¼Œè§ä¸‹</span></span><br><span class="line">conn.commit()</span><br></pre></td></tr></table></figure></div>

<h4 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h4><p>å¦‚æœå¯¹æ•°æ®è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¸”åœ¨è¿æ¥æ—¶æ²¡æœ‰è®¾ç½®<code>autocommit</code>ä¸ºTrueï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒç”¨commitè¿›è¡Œæäº¤ä¿®æ”¹:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">conn.commit() <span class="comment">#ä¿®æ”¹æ•°æ®åæäº¤äº‹åŠ¡</span></span><br></pre></td></tr></table></figure></div>

<h3 id="æŸ¥è¯¢ç»“æœè·å–"><a href="#æŸ¥è¯¢ç»“æœè·å–" class="headerlink" title="æŸ¥è¯¢ç»“æœè·å–"></a>æŸ¥è¯¢ç»“æœè·å–</h3><h4 id="ç›´æ¥éå†Cursorå¯¹è±¡"><a href="#ç›´æ¥éå†Cursorå¯¹è±¡" class="headerlink" title="ç›´æ¥éå†Cursorå¯¹è±¡"></a>ç›´æ¥éå†Cursorå¯¹è±¡</h4><p>æ¸¸æ ‡å¯¹è±¡cursoråœ¨executeä¹‹åè¿”å›ç»“æœé›†ï¼Œç±»ä¼¼äºä¸€ä¸ªè¿­ä»£å™¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">'select top 5 * from t1'</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cur:</span><br><span class="line">    print(<span class="string">'row = %r'</span> % (row,))</span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœè¿æ¥æ—¶æŒ‡å®šäº†<code>as_dict</code>ä¸ºTrueï¼Œåˆ™è¿”å›ç»“æœå˜ä¸ºå­—å…¸ç±»å‹ï¼Œå°±èƒ½åˆ—åæ¥è®¿é—®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">'select top 5 * from t1'</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cur:</span><br><span class="line">    print(<span class="string">"ID=%d, Name=%s"</span> % (row[<span class="string">'id'</span>], row[<span class="string">'username'</span>]))</span><br></pre></td></tr></table></figure></div>

<h4 id="fetchç³»åˆ—æ–¹æ³•"><a href="#fetchç³»åˆ—æ–¹æ³•" class="headerlink" title="fetchç³»åˆ—æ–¹æ³•"></a>fetchç³»åˆ—æ–¹æ³•</h4><p>fetchç³»åˆ—æ–¹æ³•ï¼Œç±»ä¼¼<code>cur.next()</code></p>
<p><code>fetchone()</code>ä¼š<strong>å¼¹å‡º</strong>ç¬¬ä¸€æ¡ï¼ˆä¸‹ä¸€æ¡ï¼‰æ•°æ®ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">'select top 5 * from nnr_t1'</span>)</span><br><span class="line">row = cur.fetchone()</span><br><span class="line"><span class="keyword">while</span> row:</span><br><span class="line">    print(<span class="string">"ID=%d, Name=%s"</span> % (row[<span class="number">0</span>], row[<span class="number">1</span>]))</span><br><span class="line">    row = cur.fetchone()</span><br></pre></td></tr></table></figure></div>

<p>å¦å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>fetchmany</code>å’Œ<code>fetchall</code>æ¥ä¸€æ¬¡æ€§è·å–æŒ‡å®šæ•°é‡æˆ–è€…æ‰€æœ‰ï¼ˆå‰©ä¸‹çš„ï¼‰çš„ç»“æœã€‚</p>
<p>å…³äºæ¸¸æ ‡å¯¹è±¡Cursor</p>
<p>ä¸pymysqlä¸€æ ·ï¼Œä»»ä½•æ—¶å€™åªä¼šæœ‰ä¸€ä¸ªCursorå¯¹è±¡å¤„äºæŸ¥è¯¢çŠ¶æ€ï¼Œå³ä½¿å®ä¾‹åŒ–å¤šä¸ªCursorå¯¹è±¡ã€‚<br>å»ºè®®å°†å‰ä¸€ä¸ªæŸ¥è¯¢<code>fetchall()</code>ä¹‹å,å†æ¥è¿›è¡Œå¦å¤–ä¸€ä¸ªæŸ¥è¯¢,å¦åˆ™æ°¸è¿œæ˜¯æœ€åä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœã€‚</p>
<h3 id="å­˜å‚¨è¿‡ç¨‹"><a href="#å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹"></a>å­˜å‚¨è¿‡ç¨‹</h3><p>å¦‚æœè¦è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œåˆ™ä½¿ç”¨Cursorå¯¹è±¡çš„<code>callproc</code>æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">cur.execute(<span class="string">"""</span></span><br><span class="line"><span class="string">CREATE PROCEDURE FindPerson</span></span><br><span class="line"><span class="string">     @username VARCHAR(100)</span></span><br><span class="line"><span class="string"> AS BEGIN</span></span><br><span class="line"><span class="string">     SELECT * FROM nnr_t1 WHERE username = @username</span></span><br><span class="line"><span class="string">END</span></span><br><span class="line"><span class="string">"""</span>)</span><br><span class="line"><span class="comment"># è°ƒç”¨ä¸Šé¢çš„å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">cur.callproc(<span class="string">'FindPerson'</span>, (<span class="string">'Jane Doe'</span>,))</span><br></pre></td></tr></table></figure></div>

<p>æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ä¹Ÿå¯ä»¥ç›´æ¥ç”¨è¯­å¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">"exec SP_NAME å‚æ•°1, å‚æ•°2"</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="å…³é—­é“¾æ¥"><a href="#å…³é—­é“¾æ¥" class="headerlink" title="å…³é—­é“¾æ¥"></a>å…³é—­é“¾æ¥</h3><p>æ“ä½œå®Œæˆååº”è¯¥è°ƒç”¨closeæ–¹æ³•æ¥å…³é—­é“¾æ¥å¹¶é‡Šæ”¾èµ„æºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">conn.close()</span><br></pre></td></tr></table></figure></div>

<h4 id="ä¸Šä¸‹æ–‡ç®¡ç†"><a href="#ä¸Šä¸‹æ–‡ç®¡ç†" class="headerlink" title="ä¸Šä¸‹æ–‡ç®¡ç†"></a>ä¸Šä¸‹æ–‡ç®¡ç†</h4><p>å¯ä»¥ä½¿ç”¨withè¯­å¥æ¥å¤„ç†Connectionå’Œcursorå¯¹è±¡ï¼Œè¿™æ ·å°±ä¸éœ€è¦æ‰‹åŠ¨å…³é—­ä»–ä»¬äº†ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> pymssql.connect(**DATABASES) <span class="keyword">as</span> conn:</span><br><span class="line">    <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cur:</span><br><span class="line">        cur.execute(<span class="string">'SELECT * FROM t1'</span>)</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> cur:</span><br><span class="line">            print(row)</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¾‹ï¼šå°†ç”µå­è¡¨æ ¼å†™å…¥æ•°æ®åº“"><a href="#ä¾‹ï¼šå°†ç”µå­è¡¨æ ¼å†™å…¥æ•°æ®åº“" class="headerlink" title="ä¾‹ï¼šå°†ç”µå­è¡¨æ ¼å†™å…¥æ•°æ®åº“"></a>ä¾‹ï¼šå°†ç”µå­è¡¨æ ¼å†™å…¥æ•°æ®åº“</h3><p>è¿™é‡Œä½¿ç”¨<code>openpyxl</code>æ¨¡å—åªè¯»ç”µå­è¡¨æ ¼ï¼ˆ.xlsxï¼‰</p>
<h4 id="è¯»å–ç”µå­è¡¨æ ¼"><a href="#è¯»å–ç”µå­è¡¨æ ¼" class="headerlink" title="è¯»å–ç”µå­è¡¨æ ¼"></a>è¯»å–ç”µå­è¡¨æ ¼</h4><p>è¯»å–ç”µå­è¡¨æ ¼çš„æ—¶å€™å¯ä»¥é€šè¿‡å„ç§æ–¹æ³•å¤„ç†ä½¿å…¶å’Œæ•°æ®åº“æŸ¥è¯¢ç»“æœçš„æ ¼å¼ä¸€è‡´ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook</span><br><span class="line">wb = load_workbook(<span class="string">'./xls.xlsx'</span>, read_only=<span class="literal">True</span>)</span><br><span class="line">table = wb[wb.sheetnames[<span class="number">0</span>]]</span><br><span class="line"><span class="comment">#æœ€å¤§è¡Œ</span></span><br><span class="line">rows = table.max_row</span><br><span class="line"><span class="comment">#æœ€å¤§åˆ—</span></span><br><span class="line">cols = table.max_column </span><br><span class="line"><span class="comment">#å•å…ƒæ ¼è¯»å–</span></span><br><span class="line"><span class="comment">#print(table.cell(row = 1, column = 1).value)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é€è¡Œè¯»å–ï¼Œå‚æ•°min_rowå¼€å§‹ min_row=2å¯ä»¥ç›´æ¥è·³è¿‡è¡¨å¤´ max_colå’Œmax_rowé™åˆ¶æœ€å¤§çš„è¡Œåˆ—æ•°</span></span><br><span class="line">data_list = map(<span class="keyword">lambda</span> row: tuple(map(<span class="keyword">lambda</span> col: str(col.value).strip(), row)),table.iter_rows(min_row=<span class="number">1</span>, max_col=cols, max_row=rows))</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœè¦å¾—åˆ°è¡¨å¤´ï¼ˆå»é™¤è¡¨å¤´ï¼‰</span></span><br><span class="line">header = next(data_list)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿™é‡Œçš„data_listä¹Ÿæ˜¯åˆ—è¡¨åµŒå¥—å…ƒç»„çš„ç»“æ„ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªå…ƒç»„ã€‚</span></span><br><span class="line">pprint(list(data_list), width=<span class="number">60</span>, compact=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></div>

<h4 id="å†™å…¥æ•°æ®åº“"><a href="#å†™å…¥æ•°æ®åº“" class="headerlink" title="å†™å…¥æ•°æ®åº“"></a>å†™å…¥æ•°æ®åº“</h4><p>åˆ›å»ºè¡¨çš„è¿‡ç¨‹çœç•¥ï¼Œè¡¨åt2</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> data_list:</span><br><span class="line">    cur.execute(<span class="string">'INSERT INTO t2 VALUES '</span>+ i.__repr__())</span><br><span class="line">conn.commit() <span class="comment">#ä¹Ÿå¯ä½¿ç”¨executemany</span></span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰åäº”)</title>
    <url>/blog/Python/Python_id_53.html</url>
    <content><![CDATA[<h2 id="SQLè¯­å¥"><a href="#SQLè¯­å¥" class="headerlink" title="SQLè¯­å¥"></a>SQLè¯­å¥</h2><p>è¿™é‡Œä»¥mysqlæ•°æ®åº“ä¸ºä¾‹</p>
<p>MySQLæ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”±ç‘å…¸MySQL AB å…¬å¸å¼€å‘ï¼Œç›®å‰å±äº Oracle æ——ä¸‹å…¬å¸ã€‚MySQL æœ€æµè¡Œçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåœ¨ WEB åº”ç”¨æ–¹é¢MySQLæ˜¯æœ€å¥½çš„ RDBMS (Relational Database Management Systemï¼Œå…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ) åº”ç”¨è½¯ä»¶ä¹‹ä¸€ã€‚</p>
<p>å…³äºæ•°æ®åº“</p>
<a id="more"></a>

<p>æœ¬ç¬”è®°åªè®°å½•åŸºç¡€å‘½ä»¤ï¼Œè¯¦ç»†çš„æ•°æ®åº“ç”¨æ³•è¯·å·¦è½¬å…¶å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h3 id="å®‰è£…å¯åŠ¨å’Œç»ˆç«¯é“¾æ¥"><a href="#å®‰è£…å¯åŠ¨å’Œç»ˆç«¯é“¾æ¥" class="headerlink" title="å®‰è£…å¯åŠ¨å’Œç»ˆç«¯é“¾æ¥"></a>å®‰è£…å¯åŠ¨å’Œç»ˆç«¯é“¾æ¥</h3><h4 id="Linuxç‰ˆæœ¬"><a href="#Linuxç‰ˆæœ¬" class="headerlink" title="Linuxç‰ˆæœ¬"></a>Linuxç‰ˆæœ¬</h4><h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">yum install mysql-server</span><br></pre></td></tr></table></figure></div>

<p>ä¸ªäººæ¨èä½¿ç”¨ å®å¡”Linuxé¢æ¿ ä¸€é”®å®‰è£… ç„¶åé‡ç½®å¯†ç </p>
<h5 id="æœåŠ¡ç«¯å¯åŠ¨"><a href="#æœåŠ¡ç«¯å¯åŠ¨" class="headerlink" title="æœåŠ¡ç«¯å¯åŠ¨"></a>æœåŠ¡ç«¯å¯åŠ¨</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">[root@akokono.com ~]<span class="comment"># service mysqld start</span></span><br><span class="line">Starting mysqld:                                           [  OK  ]</span><br></pre></td></tr></table></figure></div>

<h5 id="å®¢æˆ·ç«¯è¿æ¥"><a href="#å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="å®¢æˆ·ç«¯è¿æ¥"></a>å®¢æˆ·ç«¯è¿æ¥</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">è¿æ¥ï¼š</span><br><span class="line">	<span class="comment">#å’Œwinä¸€æ ·</span></span><br><span class="line">    mysql -h host -u user -p</span><br><span class="line"> </span><br><span class="line">å¸¸è§é”™è¯¯ï¼š</span><br><span class="line">    ERROR 2002 (HY000):</span><br><span class="line">    	Can<span class="string">'t connect to local MySQL server through socket '</span>/tmp/mysql.sock<span class="string">' (2), </span></span><br><span class="line"><span class="string">    	it means that the MySQL server daemon (Unix) or service (Windows) is not running.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é€€å‡ºï¼š</span></span><br><span class="line"><span class="string">    QUIT æˆ–è€… Control+D</span></span><br></pre></td></tr></table></figure></div>

<h4 id="Windowsç‰ˆæœ¬"><a href="#Windowsç‰ˆæœ¬" class="headerlink" title="Windowsç‰ˆæœ¬"></a>Windowsç‰ˆæœ¬</h4><p>MySQLè§£å‹åçš„ bin ç›®å½•ä¸‹æœ‰ä¸€å¤§å †çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆå§‹åŒ–æ•°æ®ï¼š</p>
<p>å…¶é»˜è®¤æœªç»™rootè´¦æˆ·è®¾ç½®å¯†ç </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> c:\mysql-5.7.16-winx64\bin</span><br><span class="line">mysqld --initialize-insecure</span><br></pre></td></tr></table></figure></div>

<p>è¿›å…¥å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•å¯åŠ¨,æˆ–å°†MySQLå¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ :</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> c:\mysql-5.7.16-winx64\bin</span><br><span class="line"><span class="comment"># å¯åŠ¨MySQLæœåŠ¡</span></span><br><span class="line">mysqld</span><br></pre></td></tr></table></figure></div>

<p>å¯åŠ¨MySQLå®¢æˆ·ç«¯å¹¶è¿æ¥MySQLæœåŠ¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> c:\mysql-5.7.16-winx64\bin</span><br><span class="line"><span class="comment"># è¿æ¥MySQLæœåŠ¡å™¨</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment"># æç¤ºè¯·è¾“å…¥å¯†ç ï¼Œç›´æ¥å›è½¦</span></span><br></pre></td></tr></table></figure></div>

<p>å¦‚æƒ³æ—¥åæ“ä½œç®€ä¾¿ï¼Œå¯ä»¥åšå¦‚ä¸‹æ“ä½œï¼šå°†MySQLæœåŠ¡åˆ¶ä½œæˆwindowsæœåŠ¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åˆ¶ä½œMySQLçš„WindowsæœåŠ¡ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</span></span><br><span class="line"><span class="string">"c:\mysql-5.7.16-winx64\bin\mysqld"</span> --install</span><br><span class="line"><span class="comment"># ç§»é™¤MySQLçš„WindowsæœåŠ¡ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œæ­¤å‘½ä»¤ï¼š</span></span><br><span class="line"><span class="string">"c:\mysql-5.7.16-winx64\bin\mysqld"</span> --remove</span><br></pre></td></tr></table></figure></div>

<p>æ³¨å†ŒæˆæœåŠ¡ä¹‹åï¼Œä»¥åå†å¯åŠ¨å’Œå…³é—­MySQLæœåŠ¡æ—¶ï¼Œä»…éœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨MySQLæœåŠ¡</span></span><br><span class="line">net start mysql</span><br><span class="line"><span class="comment"># å…³é—­MySQLæœåŠ¡</span></span><br><span class="line">net stop mysql</span><br></pre></td></tr></table></figure></div>

<h3 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h3><h5 id="æ˜¾ç¤ºæ•°æ®åº“"><a href="#æ˜¾ç¤ºæ•°æ®åº“" class="headerlink" title="æ˜¾ç¤ºæ•°æ®åº“"></a>æ˜¾ç¤ºæ•°æ®åº“</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br></pre></td></tr></table></figure></div>

<p>é»˜è®¤å·²å­˜åœ¨çš„æ•°æ®åº“ï¼š</p>
<ul>
<li>mysql - ç”¨æˆ·æƒé™ç›¸å…³æ•°æ®</li>
<li>test - ç”¨äºç”¨æˆ·æµ‹è¯•æ•°æ®</li>
<li>information_schema - MySQLæœ¬èº«æ¶æ„ç›¸å…³æ•°æ®</li>
</ul>
<h5 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># utf-8</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> æ•°æ®åº“åç§° <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"><span class="comment"># gbk</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> æ•°æ®åº“åç§° <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> gbk <span class="keyword">COLLATE</span> gbk_chinese_ci;</span><br></pre></td></tr></table></figure></div>

<h5 id="ä½¿ç”¨æ•°æ®åº“"><a href="#ä½¿ç”¨æ•°æ®åº“" class="headerlink" title="ä½¿ç”¨æ•°æ®åº“"></a>ä½¿ç”¨æ•°æ®åº“</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">use</span> æ•°æ®åº“åç§°;</span><br><span class="line"><span class="comment">#æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ï¼š</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure></div>

<h6 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h6><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IPåœ°å€'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'å¯†ç '</span>;</span><br><span class="line"><span class="comment">#åˆ é™¤ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IPåœ°å€'</span>;</span><br><span class="line"><span class="comment">#ä¿®æ”¹ç”¨æˆ·</span></span><br><span class="line">    <span class="keyword">rename</span> <span class="keyword">user</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IPåœ°å€'</span>; to 'æ–°ç”¨æˆ·å'@'IPåœ°å€';;</span><br><span class="line"><span class="comment">#ä¿®æ”¹å¯†ç </span></span><br><span class="line">    <span class="keyword">set</span> <span class="keyword">password</span> <span class="keyword">for</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IPåœ°å€'</span> = <span class="keyword">Password</span>(<span class="string">'æ–°å¯†ç '</span>)</span><br><span class="line"><span class="comment">#ç”¨æˆ·æƒé™ç›¸å…³æ•°æ®ä¿å­˜åœ¨mysqlæ•°æ®åº“çš„userè¡¨ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment">#æ‰€ä»¥ä¹Ÿå¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œæ“ä½œï¼ˆä¸å»ºè®®ï¼‰</span></span><br></pre></td></tr></table></figure></div>

<h6 id="æˆæƒç®¡ç†"><a href="#æˆæƒç®¡ç†" class="headerlink" title="æˆæƒç®¡ç†"></a>æˆæƒç®¡ç†</h6><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">grants</span> <span class="keyword">for</span> <span class="string">'ç”¨æˆ·'</span>@<span class="string">'IPåœ°å€'</span>               <span class="comment">-- æŸ¥çœ‹æƒé™</span></span><br><span class="line"><span class="keyword">grant</span>  æƒé™ <span class="keyword">on</span> æ•°æ®åº“.è¡¨ <span class="keyword">to</span>   <span class="string">'ç”¨æˆ·'</span>@<span class="string">'IPåœ°å€'</span>   <span class="comment">-- æˆæƒ</span></span><br><span class="line"><span class="keyword">revoke</span> æƒé™ <span class="keyword">on</span> æ•°æ®åº“.è¡¨ <span class="keyword">from</span> <span class="string">'ç”¨æˆ·'</span>@<span class="string">'IPåœ°å€'</span>   <span class="comment">-- å–æ¶ˆæƒé™</span></span><br></pre></td></tr></table></figure></div>

<h5 id="æ•°æ®åº“è¡¨çš„è¡¨ç¤º"><a href="#æ•°æ®åº“è¡¨çš„è¡¨ç¤º" class="headerlink" title="æ•°æ®åº“è¡¨çš„è¡¨ç¤º"></a>æ•°æ®åº“è¡¨çš„è¡¨ç¤º</h5><p>å†…éƒ¨</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">æ•°æ®åº“å.*           -- æ•°æ®åº“ä¸­çš„æ‰€æœ‰</span><br><span class="line">æ•°æ®åº“å.è¡¨          <span class="comment">-- æŒ‡å®šæ•°æ®åº“ä¸­çš„æŸå¼ è¡¨</span></span><br><span class="line">æ•°æ®åº“å.å­˜å‚¨è¿‡ç¨‹     <span class="comment">-- æŒ‡å®šæ•°æ®åº“ä¸­çš„å­˜å‚¨è¿‡ç¨‹</span></span><br><span class="line">*.*                -- æ‰€æœ‰æ•°æ®åº“</span><br></pre></td></tr></table></figure>

<p>å¤–éƒ¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">ç”¨æˆ·å@IPåœ°å€         <span class="comment">-- ç”¨æˆ·åªèƒ½åœ¨æ”¹IPä¸‹æ‰èƒ½è®¿é—®</span></span><br><span class="line">ç”¨æˆ·å@192.168.1.%   <span class="comment">-- ç”¨æˆ·åªèƒ½åœ¨æ”¹IPæ®µä¸‹æ‰èƒ½è®¿é—®(é€šé…ç¬¦%è¡¨ç¤ºä»»æ„)</span></span><br><span class="line">ç”¨æˆ·å@%             <span class="comment">-- ç”¨æˆ·å¯ä»¥å†ä»»æ„IPä¸‹è®¿é—®(é»˜è®¤IPåœ°å€ä¸º%)</span></span><br></pre></td></tr></table></figure></div>

<p>ç¤ºä¾‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> db1.tb1 <span class="keyword">TO</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IP'</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> db1.* <span class="keyword">TO</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IP'</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">insert</span> <span class="keyword">on</span> *.* <span class="keyword">TO</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IP'</span></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> db1.tb1 <span class="keyword">from</span> <span class="string">'ç”¨æˆ·å'</span>@<span class="string">'IP'</span></span><br></pre></td></tr></table></figure></div>

<p>ç‰¹æ®Šçš„ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">flush</span> <span class="keyword">privileges</span>  <span class="comment">#å°†æ•°æ®è¯»å–åˆ°å†…å­˜ä¸­ï¼Œä»è€Œç«‹å³ç”Ÿæ•ˆã€‚</span></span><br></pre></td></tr></table></figure></div>

<p>å¿˜è®°å¯†ç :</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨å…æˆæƒæœåŠ¡ç«¯</span></span><br><span class="line">mysqld --skip-grant-tables</span><br><span class="line"><span class="comment"># å®¢æˆ·ç«¯</span></span><br><span class="line">mysql -u root -p</span><br><span class="line"><span class="comment"># ä¿®æ”¹ç”¨æˆ·åå¯†ç </span></span><br><span class="line">update mysql.user <span class="built_in">set</span> authentication_string=password(<span class="string">'666'</span>) <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure></div>

<h3 id="æ•°æ®è¡¨åŸºæœ¬æ“ä½œ"><a href="#æ•°æ®è¡¨åŸºæœ¬æ“ä½œ" class="headerlink" title="æ•°æ®è¡¨åŸºæœ¬æ“ä½œ"></a>æ•°æ®è¡¨åŸºæœ¬æ“ä½œ</h3><h5 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h5><p>not null ä¸å¯ä¸ºç©º<br>defalut é»˜è®¤å€¼<br>null å¯ä»¥ä¸ºç©º</p>
<p><code>engine=innodb</code> mysqlæ”¯æŒäº‹åŠ¡æ€§æ“ä½œ å¤±è´¥å›æ»š <code>engine=myisam</code> mysqlæ”¯æŒå…¨å±€ç´¢å¼• å¤±è´¥ä¸å›æ»š é»˜è®¤</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(</span><br><span class="line">    nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> defalut <span class="number">2</span>,</span><br><span class="line">    <span class="keyword">num</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">)<span class="keyword">engine</span>=<span class="keyword">innodb</span> <span class="keyword">default</span> <span class="keyword">charset</span>=utf8</span><br></pre></td></tr></table></figure></div>

<p><code>auto_increment</code> è‡ªå¢<br><code>primary key</code> ä¸»é”®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(</span><br><span class="line">    nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">num</span> <span class="built_in">int</span> <span class="literal">null</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">--    æˆ–</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(</span><br><span class="line">    nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line">    <span class="keyword">num</span> <span class="built_in">int</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">index</span>(nid)</span><br><span class="line">)</span><br><span class="line"><span class="comment">-- æ³¨æ„ï¼š</span></span><br><span class="line"><span class="comment">-- å¯¹äºè‡ªå¢åˆ—ï¼Œå¿…é¡»æ˜¯ç´¢å¼•ï¼ˆå«ä¸»é”®ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">-- å¯¹äºè‡ªå¢å¯ä»¥è®¾ç½®æ­¥é•¿å’Œèµ·å§‹å€¼</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">session</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'auto_inc%'</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> auto_increment_increment=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">session</span> auto_increment_offset=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">shwo global  variables like 'auto_inc%';</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> auto_increment_increment=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> auto_increment_offset=<span class="number">10</span>;</span><br><span class="line"><span class="comment">#ä¸»é”®ï¼Œ</span></span><br><span class="line"><span class="comment">-- ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œä¸å…è®¸æœ‰ç©ºå€¼ï¼Œ</span></span><br><span class="line"><span class="comment">-- å¦‚æœä¸»é”®ä½¿ç”¨å•ä¸ªåˆ—ï¼Œåˆ™å®ƒçš„å€¼å¿…é¡»å”¯ä¸€ï¼Œ</span></span><br><span class="line"><span class="comment">-- å¦‚æœæ˜¯å¤šåˆ—ï¼Œåˆ™å…¶ç»„åˆå¿…é¡»å”¯ä¸€ã€‚</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(</span><br><span class="line">    nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment primary <span class="keyword">key</span>,</span><br><span class="line">    <span class="keyword">num</span> <span class="built_in">int</span> <span class="literal">null</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">-- æˆ–</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb1(</span><br><span class="line">    nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    <span class="keyword">num</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    primary <span class="keyword">key</span>(nid,<span class="keyword">num</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<p><code>foreign key</code> å¤–é”®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">creat table color(</span><br><span class="line">	nid int not null primary key,</span><br><span class="line">	name char(16) not null</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> fruit(</span><br><span class="line">	nid <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> primary <span class="keyword">key</span>,</span><br><span class="line">	smt <span class="built_in">char</span>(<span class="number">32</span>) <span class="literal">null</span> ,</span><br><span class="line">	color_id <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">	<span class="keyword">constraint</span> fk_cc <span class="keyword">foreign</span> <span class="keyword">key</span> (color_id) <span class="keyword">references</span> color(nid)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>

<h5 id="é™æ€è¡¨å‹æ•°æ®"><a href="#é™æ€è¡¨å‹æ•°æ®" class="headerlink" title="é™æ€è¡¨å‹æ•°æ®"></a>é™æ€è¡¨å‹æ•°æ®</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> (<span class="keyword">values</span>(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">3</span>,<span class="number">4</span>)) <span class="keyword">as</span> è¡¨å(ç¬¬ä¸€è¡Œ,ç¬¬äºŒè¡Œ)</span><br></pre></td></tr></table></figure></div>

<h5 id="åˆ é™¤è¡¨"><a href="#åˆ é™¤è¡¨" class="headerlink" title="åˆ é™¤è¡¨"></a>åˆ é™¤è¡¨</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> è¡¨å</span><br></pre></td></tr></table></figure></div>

<h5 id="æ¸…ç©ºè¡¨"><a href="#æ¸…ç©ºè¡¨" class="headerlink" title="æ¸…ç©ºè¡¨"></a>æ¸…ç©ºè¡¨</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> è¡¨å</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> è¡¨å</span><br></pre></td></tr></table></figure></div>

<h5 id="ä¿®æ”¹è¡¨"><a href="#ä¿®æ”¹è¡¨" class="headerlink" title="ä¿®æ”¹è¡¨"></a>ä¿®æ”¹è¡¨</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ åˆ—ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">add</span> åˆ—å ç±»å‹</span><br><span class="line"><span class="comment">#åˆ é™¤åˆ—ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">drop</span> <span class="keyword">column</span> åˆ—å</span><br><span class="line"><span class="comment">#ä¿®æ”¹åˆ—ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">modify</span> <span class="keyword">column</span> åˆ—å ç±»å‹;  <span class="comment">-- ç±»å‹</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">change</span> åŸåˆ—å æ–°åˆ—å ç±»å‹; <span class="comment">-- åˆ—åï¼Œç±»å‹</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#æ·»åŠ ä¸»é”®ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">add</span> primary <span class="keyword">key</span>(åˆ—å);</span><br><span class="line"><span class="comment">#åˆ é™¤ä¸»é”®ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å  <span class="keyword">modify</span>  åˆ—å <span class="built_in">int</span>, <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line">  </span><br><span class="line"><span class="comment">#æ·»åŠ å¤–é”®ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> ä»è¡¨ <span class="keyword">add</span> <span class="keyword">constraint</span> å¤–é”®åç§°ï¼ˆå½¢å¦‚ï¼šFK_ä»è¡¨_ä¸»è¡¨ï¼‰</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span> ä»è¡¨(å¤–é”®å­—æ®µ) <span class="keyword">references</span> ä¸»è¡¨(ä¸»é”®å­—æ®µ);</span><br><span class="line"><span class="comment">#åˆ é™¤å¤–é”®ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> è¡¨å <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> å¤–é”®åç§°</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¿®æ”¹é»˜è®¤å€¼ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">alter</span> i <span class="keyword">set</span> <span class="keyword">default</span> <span class="number">1000</span>;</span><br><span class="line"><span class="comment">#åˆ é™¤é»˜è®¤å€¼ï¼š</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> testalter_tbl <span class="keyword">alter</span> i <span class="keyword">drop</span> <span class="keyword">default</span>;</span><br></pre></td></tr></table></figure></div>

<h4 id="è¡¨å†…å®¹åŸºæœ¬æ“ä½œ"><a href="#è¡¨å†…å®¹åŸºæœ¬æ“ä½œ" class="headerlink" title="è¡¨å†…å®¹åŸºæœ¬æ“ä½œ"></a>è¡¨å†…å®¹åŸºæœ¬æ“ä½œ</h4><p>mysqlå­˜å€¼çš„åŸºæœ¬æ•°æ®ç±»å‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">bit[(m)]</span><br><span class="line">  <span class="comment">#äºŒè¿›åˆ¶ä½ï¼ˆ101001ï¼‰ï¼Œmè¡¨ç¤ºäºŒè¿›åˆ¶ä½çš„é•¿åº¦ï¼ˆ1-64ï¼‰ï¼Œé»˜è®¤mï¼1</span></span><br><span class="line"></span><br><span class="line">tinyint[(m)] [unsigned] [zerofill]</span><br><span class="line">  <span class="comment">#å°æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´ï¼š</span></span><br><span class="line">  <span class="comment">#ç‰¹åˆ«çš„ï¼š MySQLä¸­æ— å¸ƒå°”å€¼ï¼Œä½¿ç”¨tinyint(1)æ„é€ ã€‚</span></span><br><span class="line"></span><br><span class="line">int[(m)][unsigned][zerofill]</span><br><span class="line">  <span class="comment">#æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´</span></span><br><span class="line"></span><br><span class="line">bigint[(m)][unsigned][zerofill]</span><br><span class="line">  <span class="comment">#å¤§æ•´æ•°ï¼Œæ•°æ®ç±»å‹ç”¨äºä¿å­˜ä¸€äº›èŒƒå›´çš„æ•´æ•°æ•°å€¼èŒƒå›´</span></span><br><span class="line"></span><br><span class="line">decimal[(m[,d])] [unsigned] [zerofill]</span><br><span class="line">  <span class="comment">#å‡†ç¡®çš„åè¿›åˆ¶ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼ˆè´Ÿå·ä¸ç®—ï¼‰ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚ mæœ€å¤§å€¼ä¸º65ï¼Œdæœ€å¤§å€¼ä¸º30ã€‚</span></span><br><span class="line"></span><br><span class="line">float[(m,d)] [unsigned] [zerofill]</span><br><span class="line">  <span class="comment">#å•ç²¾åº¦æµ®ç‚¹æ•°ï¼ˆéå‡†ç¡®å°æ•°å€¼ï¼‰ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚æ•°å€¼è¶Šå¤§ï¼Œè¶Šä¸å‡†ç¡®</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">double[(m,d)] [unsigned] [zerofill]</span><br><span class="line">  <span class="comment">#åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆéå‡†ç¡®å°æ•°å€¼ï¼‰ï¼Œmæ˜¯æ•°å­—æ€»ä¸ªæ•°ï¼Œdæ˜¯å°æ•°ç‚¹åä¸ªæ•°ã€‚æ•°å€¼è¶Šå¤§ï¼Œè¶Šä¸å‡†ç¡®</span></span><br><span class="line">  </span><br><span class="line">char (m)</span><br><span class="line">  <span class="comment">#charæ•°æ®ç±»å‹ç”¨äºè¡¨ç¤ºå›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«æœ€å¤šè¾¾255ä¸ªå­—ç¬¦ã€‚</span></span><br><span class="line">  <span class="comment">#å…¶ä¸­mä»£è¡¨å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å³ä½¿æ•°æ®å°äºmé•¿åº¦ï¼Œä¹Ÿä¼šå ç”¨mé•¿åº¦</span></span><br><span class="line">  </span><br><span class="line">varchar(m)</span><br><span class="line">  <span class="comment">#varcharsæ•°æ®ç±»å‹ç”¨äºå˜é•¿çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åŒ…å«æœ€å¤šè¾¾255ä¸ªå­—ç¬¦ã€‚</span></span><br><span class="line">  <span class="comment">/**å…¶ä¸­mä»£è¡¨è¯¥æ•°æ®ç±»å‹æ‰€å…è®¸ä¿å­˜çš„å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œ</span></span><br><span class="line"><span class="comment">    	åªè¦é•¿åº¦å°äºè¯¥æœ€å¤§å€¼çš„å­—ç¬¦ä¸²éƒ½å¯ä»¥è¢«ä¿å­˜åœ¨è¯¥æ•°æ®ç±»å‹ä¸­ã€‚</span></span><br><span class="line"><span class="comment">    	æ³¨ï¼šè™½ç„¶varcharä½¿ç”¨èµ·æ¥è¾ƒä¸ºçµæ´»ï¼Œä½†æ˜¯ä»æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½è§’åº¦æ¥è¯´ï¼Œ</span></span><br><span class="line"><span class="comment">    	charæ•°æ®ç±»å‹çš„å¤„ç†é€Ÿåº¦æ›´å¿«ï¼Œæœ‰æ—¶ç”šè‡³å¯ä»¥è¶…å‡ºvarcharå¤„ç†é€Ÿåº¦çš„50%ã€‚</span></span><br><span class="line"><span class="comment">    	å› æ­¤ï¼Œç”¨æˆ·åœ¨è®¾è®¡æ•°æ®åº“æ—¶åº”å½“ç»¼åˆè€ƒè™‘å„æ–¹é¢çš„å› ç´ ï¼Œä»¥æ±‚è¾¾åˆ°æœ€ä½³çš„å¹³è¡¡**/</span></span><br><span class="line"></span><br><span class="line">text</span><br><span class="line">  <span class="comment">#textæ•°æ®ç±»å‹ç”¨äºä¿å­˜å˜é•¿çš„å¤§å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç»„å¤šåˆ°65535 (2**16 âˆ’ 1)ä¸ªå­—ç¬¦ã€‚</span></span><br><span class="line"></span><br><span class="line">mediumtext</span><br><span class="line">  <span class="comment">#A TEXT column with a maximum length of 16,777,215 (2**24 âˆ’ 1) characters.</span></span><br><span class="line"></span><br><span class="line">longtext</span><br><span class="line">  <span class="comment">#A TEXT column with a maximum length of 4,294,967,295 or 4GB (2**32 âˆ’ 1) characters.</span></span><br><span class="line"></span><br><span class="line">enum</span><br><span class="line">  <span class="comment">#æšä¸¾ç±»å‹</span></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> shirts (</span><br><span class="line">      <span class="keyword">name</span> <span class="built_in">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">      <span class="keyword">size</span> ENUM(<span class="string">'x-small'</span>, <span class="string">'small'</span>, <span class="string">'medium'</span>, <span class="string">'large'</span>, <span class="string">'x-large'</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> shirts (<span class="keyword">name</span>, <span class="keyword">size</span>) <span class="keyword">VALUES</span> </span><br><span class="line">      (<span class="string">'dress shirt'</span>,<span class="string">'large'</span>), (<span class="string">'t-shirt'</span>,<span class="string">'medium'</span>),(<span class="string">'polo shirt'</span>,<span class="string">'small'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span></span><br><span class="line">  <span class="comment">#é›†åˆç±»å‹</span></span><br><span class="line">  <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> myset (<span class="keyword">col</span> <span class="keyword">SET</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>));</span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> myset (<span class="keyword">col</span>) <span class="keyword">VALUES</span> (<span class="string">'a,d'</span>), (<span class="string">'d,a'</span>), (<span class="string">'a,d,a'</span>), (<span class="string">'a,d,d'</span>), (<span class="string">'d,a,d'</span>);</span><br><span class="line"></span><br><span class="line">DATE</span><br><span class="line">  <span class="comment">#YYYY-MM-DDï¼ˆ1000-01-01/9999-12-31ï¼‰</span></span><br><span class="line"></span><br><span class="line">TIME</span><br><span class="line">  <span class="comment">#HH:MM:SSï¼ˆ'-838:59:59'/'838:59:59'ï¼‰</span></span><br><span class="line"></span><br><span class="line">YEAR</span><br><span class="line">  <span class="comment">#YYYYï¼ˆ1901/2155ï¼‰</span></span><br><span class="line"></span><br><span class="line">DATETIME</span><br><span class="line">  <span class="comment">#YYYY-MM-DD HH:MM:SSï¼ˆ1000-01-01 00:00:00/9999-12-31 23:59:59    Yï¼‰</span></span><br><span class="line"></span><br><span class="line">TIMESTAMP</span><br><span class="line">  <span class="comment">#YYYYMMDD HHMMSSï¼ˆ1970-01-01 00:00:00/2037 å¹´æŸæ—¶ï¼‰</span></span><br></pre></td></tr></table></figure></div>

<p><em>äºŒè¿›åˆ¶æ•°æ®ï¼šTinyBlobã€Blobã€MediumBlobã€LongBlob</em></p>
<h4 id="å¢"><a href="#å¢" class="headerlink" title="#å¢"></a><a href="http://nanarino.metoyun.com/py/30-SQLè¯­å¥.html#å¢" target="_blank" rel="noopener">#</a>å¢</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> è¡¨ (åˆ—å,åˆ—å...) <span class="keyword">values</span> (å€¼,å€¼,å€¼...)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> è¡¨ (åˆ—å,åˆ—å...) <span class="keyword">values</span> (å€¼,å€¼,å€¼...),(å€¼,å€¼,å€¼...)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> è¡¨ (åˆ—å,åˆ—å...) <span class="keyword">select</span> (åˆ—å,åˆ—å...) <span class="keyword">from</span> è¡¨</span><br></pre></td></tr></table></figure></div>

<h5 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a>åˆ </h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> è¡¨</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span>ï¼<span class="number">1</span> <span class="keyword">and</span> <span class="keyword">name</span>ï¼<span class="string">'alex'</span><span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<h5 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a>æ”¹</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> è¡¨ <span class="keyword">set</span> <span class="keyword">name</span> ï¼ <span class="string">'alex'</span> <span class="keyword">where</span> <span class="keyword">id</span>&gt;<span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<h5 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a>æŸ¥</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ‰“å°å®Œæ•´è¡¨</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> è¡¨</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> &gt; <span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> nid,<span class="keyword">name</span>,gender <span class="keyword">as</span> gg <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> &gt; <span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<h5 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">aã€æ¡ä»¶</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> &gt; <span class="number">1</span> <span class="keyword">and</span> <span class="keyword">name</span> != <span class="string">'alex'</span> <span class="keyword">and</span> <span class="keyword">num</span> = <span class="number">12</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">between</span> <span class="number">5</span> <span class="keyword">and</span> <span class="number">16</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>)</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>)</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">id</span> <span class="keyword">in</span> (<span class="keyword">select</span> nid <span class="keyword">from</span> è¡¨)</span><br><span class="line"> </span><br><span class="line">bã€é€šé…ç¬¦</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'ale%'</span>  - aleå¼€å¤´çš„æ‰€æœ‰ï¼ˆå¤šä¸ªå­—ç¬¦ä¸²ï¼‰</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'ale_'</span>  - aleå¼€å¤´çš„æ‰€æœ‰ï¼ˆä¸€ä¸ªå­—ç¬¦ï¼‰</span><br><span class="line"> </span><br><span class="line">cã€é™åˆ¶</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">limit</span> <span class="number">5</span>;            - å‰5è¡Œ</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">limit</span> <span class="number">4</span>,<span class="number">5</span>;          - ä»ç¬¬4è¡Œå¼€å§‹çš„5è¡Œ</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">limit</span> <span class="number">5</span> <span class="keyword">offset</span> <span class="number">4</span>    - ä»ç¬¬<span class="number">4</span>è¡Œå¼€å§‹çš„<span class="number">5</span>è¡Œ</span><br><span class="line"> </span><br><span class="line">dã€æ’åº</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">order</span> <span class="keyword">by</span> åˆ— <span class="keyword">asc</span>              - æ ¹æ® â€œåˆ—â€ ä»å°åˆ°å¤§æ’åˆ—</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">order</span> <span class="keyword">by</span> åˆ— <span class="keyword">desc</span>             - æ ¹æ® â€œåˆ—â€ ä»å¤§åˆ°å°æ’åˆ—</span><br><span class="line">    <span class="keyword">select</span> * <span class="keyword">from</span> è¡¨ <span class="keyword">order</span> <span class="keyword">by</span> åˆ—<span class="number">1</span> <span class="keyword">desc</span>, åˆ—<span class="number">2</span> <span class="keyword">asc</span>    - æ ¹æ® â€œåˆ—<span class="number">1</span>â€ ä»å¤§åˆ°å°æ’åˆ—ï¼Œå¦‚æœç›¸åŒåˆ™æŒ‰åˆ—<span class="number">2</span>ä»å°åˆ°å¤§æ’åº</span><br><span class="line"> </span><br><span class="line">eã€åˆ†ç»„</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">num</span> <span class="keyword">from</span> è¡¨ <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">num</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">num</span>,nid <span class="keyword">from</span> è¡¨ <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">num</span>,nid</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">num</span>,nid <span class="keyword">from</span> è¡¨  <span class="keyword">where</span> nid &gt; <span class="number">10</span> <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">num</span>,nid <span class="keyword">order</span> nid <span class="keyword">desc</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">num</span>,nid,<span class="keyword">count</span>(*),<span class="keyword">sum</span>(score),<span class="keyword">max</span>(score),<span class="keyword">min</span>(score) <span class="keyword">from</span> è¡¨ <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">num</span>,nid</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">num</span> <span class="keyword">from</span> è¡¨ <span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">num</span> <span class="keyword">having</span> <span class="keyword">max</span>(<span class="keyword">id</span>) &gt; <span class="number">10</span></span><br><span class="line"> </span><br><span class="line">    ç‰¹åˆ«çš„ï¼š<span class="keyword">group</span> <span class="keyword">by</span> å¿…é¡»åœ¨<span class="keyword">where</span>ä¹‹åï¼Œ<span class="keyword">order</span> <span class="keyword">by</span>ä¹‹å‰</span><br><span class="line"> </span><br><span class="line">fã€è¿è¡¨</span><br><span class="line">    æ— å¯¹åº”å…³ç³»åˆ™ä¸æ˜¾ç¤º</span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A,B</span><br><span class="line">    <span class="keyword">Where</span> A.nid = B.nid</span><br><span class="line"> </span><br><span class="line">    æ— å¯¹åº”å…³ç³»åˆ™ä¸æ˜¾ç¤º</span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">inner</span> <span class="keyword">join</span> B <span class="keyword">on</span> A.nid = B.nid</span><br><span class="line"> </span><br><span class="line">    Aè¡¨æ‰€æœ‰æ˜¾ç¤ºï¼Œå¦‚æœBä¸­æ— å¯¹åº”å…³ç³»ï¼Œåˆ™å€¼ä¸º<span class="literal">null</span></span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">left</span> <span class="keyword">join</span> B <span class="keyword">on</span> A.nid = B.nid</span><br><span class="line"> </span><br><span class="line">    Bè¡¨æ‰€æœ‰æ˜¾ç¤ºï¼Œå¦‚æœBä¸­æ— å¯¹åº”å…³ç³»ï¼Œåˆ™å€¼ä¸º<span class="literal">null</span></span><br><span class="line">    <span class="keyword">select</span> A.num, A.name, B.name</span><br><span class="line">    <span class="keyword">from</span> A <span class="keyword">right</span> <span class="keyword">join</span> B <span class="keyword">on</span> A.nid = B.nid</span><br><span class="line"> </span><br><span class="line">gã€ç»„åˆ</span><br><span class="line">    ç»„åˆï¼Œè‡ªåŠ¨å¤„ç†é‡åˆ</span><br><span class="line">    <span class="keyword">select</span> nickname</span><br><span class="line">    <span class="keyword">from</span> A</span><br><span class="line">    <span class="keyword">union</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">name</span></span><br><span class="line">    <span class="keyword">from</span> B</span><br><span class="line"> </span><br><span class="line">    ç»„åˆï¼Œä¸å¤„ç†é‡åˆ</span><br><span class="line">    <span class="keyword">select</span> nickname</span><br><span class="line">    <span class="keyword">from</span> A</span><br><span class="line">    <span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">name</span></span><br><span class="line">    <span class="keyword">from</span> B</span><br></pre></td></tr></table></figure></div>

<p>mysqlä¹‹å¤–çš„å…¶ä»–å…³ç³»å‹æ•°æ®åº“çš„ç”¨æ³•å¤§è‡´ç›¸åŒã€‚ä½¿ç”¨pymysqlå¯ç”¨åŒæ­¥æ‰§è¡Œmysqlçš„äº‹åŠ¡ã€‚</p>
<p>ç¯‡å¹…æœ‰é™ã€‚å˜é‡ï¼Œå‡½æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹ï¼Œè§¦å‘å™¨ç­‰çŸ¥è¯†ç•¥è¿‡ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰åå››)</title>
    <url>/blog/Python/Python_id_52.html</url>
    <content><![CDATA[<h2 id="åç¨‹"><a href="#åç¨‹" class="headerlink" title="åç¨‹"></a>åç¨‹</h2><p>åç¨‹æ˜¯å•çº¿ç¨‹ä¸‹çš„å¹¶å‘ï¼Œåˆç§°å¾®çº¿ç¨‹ï¼Œçº¤ç¨‹ã€‚è‹±æ–‡åCoroutineã€‚<br>Pythoné€šè¿‡<code>yield</code>ï¼Œ<code>.send()</code>æä¾›äº†å¯¹åç¨‹çš„åŸºæœ¬æ”¯æŒï¼Œä½†æ˜¯ä¸å®Œå…¨ã€‚<br>åœ¨pythonä¸­ï¼Œç”±äºGILé”çš„å­˜åœ¨ï¼Œå¹¶å‘ç¼–ç¨‹çš„æœ€ä½³å®è·µæ˜¯<strong>å¤šè¿›ç¨‹</strong>+<strong>åç¨‹</strong>çš„æ–¹å¼ã€‚</p>
<h3 id="greenletæ¨¡å—"><a href="#greenletæ¨¡å—" class="headerlink" title="greenletæ¨¡å—"></a>greenletæ¨¡å—</h3><a id="more"></a>

<p>ç¬¬ä¸‰æ–¹æ¨¡å—<code>greenlet</code>å·²ç»å®ç°äº†åç¨‹ï¼Œæ— éœ€å†™ç”Ÿæˆå™¨ï¼Œ<code>.switch()</code>ä»£æ›¿äº†<code>.send()</code>ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> greenlet <span class="keyword">import</span> greenlet</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">'%s eat 1'</span> %name)</span><br><span class="line">    g2.switch(<span class="string">'egon'</span>)</span><br><span class="line">    print(<span class="string">'%s eat 2'</span> %name)</span><br><span class="line">    g2.switch()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">play</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">'%s play 1'</span> %name)</span><br><span class="line">    g1.switch()</span><br><span class="line">    print(<span class="string">'%s play 2'</span> %name)</span><br><span class="line"></span><br><span class="line">g1=greenlet(eat)</span><br><span class="line">g2=greenlet(play)</span><br><span class="line"></span><br><span class="line">g1.switch(<span class="string">'egon'</span>) <span class="comment"># å¯ä»¥åœ¨ç¬¬ä¸€æ¬¡switchæ—¶ä¼ å…¥å‚æ•°ï¼Œä»¥åéƒ½ä¸éœ€è¦</span></span><br></pre></td></tr></table></figure></div>

<h3 id="geventæ¨¡å—"><a href="#geventæ¨¡å—" class="headerlink" title="geventæ¨¡å—"></a>geventæ¨¡å—</h3><p>ç¬¬ä¸‰æ–¹åº“<code>gevent</code>å®ç°å¹¶å‘åŒæ­¥æˆ–å¼‚æ­¥ç¼–ç¨‹ï¼Œå†…éƒ¨ä»¥<code>greenlet</code>æ–¹å¼<strong>è‡ªåŠ¨è°ƒåº¦å®ƒè‡ªå·±çš„IO</strong>ï¼Œå®ƒæ˜¯ä»¥Cæ‰©å±•æ¨¡å—å½¢å¼æ¥å…¥Pythonçš„è½»é‡çº§åç¨‹ã€‚æ˜¯python2ç‰ˆæœ¬åç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚å®ƒçš„APIä¸è¿›ç¨‹ï¼Œçº¿ç¨‹ç›¸è¿‘ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> gevent</span><br><span class="line"></span><br><span class="line">g1=gevent.spawn(func,<span class="number">2</span>,<span class="number">3</span>,x=<span class="number">4</span>,y=<span class="number">5</span>)</span><br><span class="line">g2=gevent.spawn(func2)</span><br><span class="line"></span><br><span class="line">g1.join() <span class="comment">#ç­‰å¾…g1ç»“æŸ</span></span><br><span class="line">g2.join() <span class="comment">#ç­‰å¾…g2ç»“æŸ</span></span><br><span class="line"><span class="comment">#æˆ–è€…ä¸Šè¿°ä¸¤æ­¥åˆä½œä¸€æ­¥ï¼šgevent.joinall([g1,g2])</span></span><br><span class="line"></span><br><span class="line">print(g1.value) <span class="comment">#æ‹¿åˆ°func1çš„è¿”å›å€¼</span></span><br></pre></td></tr></table></figure></div>

<p>å®ƒè‡ªå·±çš„IOæœ‰ï¼š<code>gevent.sleep()</code>ï¼Œ<code>gevent.socket</code>ç­‰</p>
<h4 id="çŒ´å­è¡¥ä¸"><a href="#çŒ´å­è¡¥ä¸" class="headerlink" title="çŒ´å­è¡¥ä¸"></a>çŒ´å­è¡¥ä¸</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> spawn,joinall,monkey;monkey.patch_all()</span><br></pre></td></tr></table></figure></div>

<p>åœ¨å®ƒä¹‹åå¯¼å…¥çš„æ¨¡å—å°†è¢«æ›¿æ¢ä¸ºå®ƒè‡ªå·±çš„ioï¼ŒåŠ¨æ€æ›¿æ¢å·²æœ‰çš„æ ‡å‡†åº“ã€‚</p>
<h3 id="å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“"><a href="#å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“" class="headerlink" title="å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“"></a>å…¶ä»–ç¬¬ä¸‰æ–¹å¼‚æ­¥åº“</h3><p><code>eventlet</code>ï¼šåŒ<code>gevent</code>æ¨¡å—ï¼Œå†…éƒ¨ä»¥<code>greenlet</code>æ–¹å¼ï¼Œä¹Ÿæœ‰çŒ´å­è¡¥ä¸æ–¹æ³•ï¼Œä½†æ²¡<code>gevent</code>å¥½ç”¨ã€‚<br><code>twisted</code>ï¼šåŸºäºäº‹ä»¶é©±åŠ¨çš„ç½‘ç»œå¼•æ“æ¡†æ¶ã€‚<br><code>tornado</code>ï¼šæœ€ç®€å•çš„å›è°ƒå®ç°å¼‚æ­¥åç¨‹ï¼Œä½œä¸ºhttpserverå’Œhttpclientï¼ŒåŒæ—¶ä¹Ÿæ˜¯Webæ¡†æ¶ã€‚</p>
<h3 id="asyncioæ¨¡å—"><a href="#asyncioæ¨¡å—" class="headerlink" title="asyncioæ¨¡å—"></a>asyncioæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/asyncio.html" target="_blank" rel="noopener"><code>asyncio</code></a>æ˜¯Python 3.4ç‰ˆæœ¬å¼•å…¥çš„æ ‡å‡†åº“ï¼Œç›´æ¥å†…ç½®äº†å¯¹å¼‚æ­¥IOçš„æ”¯æŒã€‚</p>
<p><strong>è¿è¡Œå’Œä¼‘çœ </strong></p>
<ul>
<li><code>asyncio.run(å¯ç­‰å¾…å¯¹è±¡)</code></li>
<li><code>asyncio.sleep(ç§’æ•°)</code></li>
</ul>
<p><strong>å¯ç­‰å¾…å¯¹è±¡</strong></p>
<ul>
<li>coroutineï¼šåç¨‹å¯¹è±¡ï¼Œ<code>async def</code>å®šä¹‰çš„å‡½æ•°è¿”å›çš„å¯¹è±¡</li>
<li>taskï¼šä»»åŠ¡å¯¹è±¡ï¼ŒåŒ…å«åç¨‹å¯¹è±¡çš„å„ç§çŠ¶æ€</li>
<li>futureï¼šå°†æ¥æ‰§è¡Œçš„taskï¼Œç»™äºˆé«˜å±‚å»ç­‰å¾…</li>
</ul>
<h4 id="awaitè¯­å¥"><a href="#awaitè¯­å¥" class="headerlink" title="awaitè¯­å¥"></a><code>await</code>è¯­å¥</h4><p>await å¯ç­‰å¾…å¯¹è±¡<br>python3.7ä»¥ä¸Šçš„å†™æ³•ï¼ˆå¸¦è£…é¥°å™¨çš„ç”Ÿæˆå™¨å’Œ<code>yield from</code>å†™æ³•å°†åœ¨3.10ä¸­åºŸå¼ƒï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">say</span><span class="params">(delay, what)</span>:</span></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(delay)</span><br><span class="line">    print(what)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">f"start <span class="subst">&#123;time.strftime(<span class="string">'%X'</span>)&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> say(<span class="number">1</span>, <span class="string">'hello'</span>)</span><br><span class="line">    <span class="keyword">await</span> say(<span class="number">2</span>, <span class="string">'world'</span>)</span><br><span class="line"></span><br><span class="line">    print(<span class="string">f"finish <span class="subst">&#123;time.strftime(<span class="string">'%X'</span>)&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">asyncio.run(main())</span><br></pre></td></tr></table></figure></div>

<p>å®ƒå°†ä¼šæ‰“å° â€œstartâ€ï¼Œ<br>ç­‰å¾… 1 ç§’ï¼Œå†æ‰“å° â€œhelloâ€<br>ç­‰å¾… 2 ç§’ï¼Œå†æ‰“å° â€œworldâ€<br>æœ€åæ‰“å° â€œfinishâ€</p>
<h4 id="create-task"><a href="#create-task" class="headerlink" title=".create_task()"></a><code>.create_task()</code></h4><p>å°†åç¨‹å¯¹è±¡åŠå…¶å„ç§çŠ¶æ€æ‰“åŒ…ä¸º Task å¯¹è±¡ï¼Œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¹¶è¿”å›ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    task1 = asyncio.create_task(say(<span class="number">1</span>, <span class="string">'hello'</span>))</span><br><span class="line"></span><br><span class="line">    task2 = asyncio.create_task(say(<span class="number">2</span>, <span class="string">'world'</span>))</span><br><span class="line"></span><br><span class="line">    print(<span class="string">f"start <span class="subst">&#123;time.strftime(<span class="string">'%X'</span>)&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> task1</span><br><span class="line">    <span class="keyword">await</span> task2</span><br><span class="line"></span><br><span class="line">    print(<span class="string">f"finish <span class="subst">&#123;time.strftime(<span class="string">'%X'</span>)&#125;</span>"</span>)</span><br></pre></td></tr></table></figure></div>

<p>å®ƒå°†ä¼šæ‰“å° â€œstartâ€ï¼Œ<br>ç­‰å¾… 1 ç§’ï¼Œå†æ‰“å° â€œhelloâ€<br>ç­‰å¾… 1 ç§’ï¼Œå†æ‰“å° â€œworldâ€<br>æœ€åæ‰“å° â€œfinishâ€<br>å®ƒä»¬å¹¶å‘è¿è¡Œäº†ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰åä¸‰)</title>
    <url>/blog/Python/Python_id_51.html</url>
    <content><![CDATA[<h2 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h2><p>è¿›ç¨‹ï¼ˆProcessï¼‰æ˜¯è®¡ç®—æœºä¸­çš„ç¨‹åºå…³äºæŸæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€‚</p>
<p>ä½¿ç”¨å¤šè¿›ç¨‹æ¥å¹¶å‘å¯ä»¥ä½¿pythonç¨‹åºæœ‰æ•ˆåˆ©ç”¨å¤šæ ¸CPUã€‚</p>
<p><a href="https://docs.python.org/zh-cn/3/library/multiprocessing.html" target="_blank" rel="noopener"><code>multiprocessing</code></a>æ¨¡å—æ˜¯æœ€å¸¸ç”¨çš„å¤šè¿›ç¨‹æ¨¡å—ã€‚</p>
<a id="more"></a>

<p>åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­ç”±äºæ²¡æœ‰forkï¼Œåœ¨åˆ›å»ºå­è¿›ç¨‹çš„æ—¶å€™ä¼šè‡ªåŠ¨ä»¥ import å¯åŠ¨ï¼Œå¯¼è‡´é€’å½’ã€‚æ‰€ä»¥å¿…é¡»æŠŠåˆ›å»ºå­è¿›ç¨‹çš„éƒ¨åˆ†å†™åœ¨<code>if __name__ ==&#39;__main__&#39;</code>ä¸­ã€‚</p>
<h3 id="å­è¿›ç¨‹"><a href="#å­è¿›ç¨‹" class="headerlink" title="å­è¿›ç¨‹"></a>å­è¿›ç¨‹</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(name)</span>:</span></span><br><span class="line">    print(<span class="string">'æˆ‘å•æ¨'</span>, name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    p = Process(target=f, args=(<span class="string">'ayame'</span>,))</span><br><span class="line">    p.start()</span><br><span class="line">    print(<span class="string">'æ‘¸äº†'</span>)</span><br></pre></td></tr></table></figure></div>

<p>å­è¿›ç¨‹å¯¹è±¡æ–¹æ³•</p>
<ul>
<li><code>.start()</code> å¯åŠ¨ã€‚å­è¿›ç¨‹çš„æ‰§è¡Œé¡ºåºä¸æ˜¯æ ¹æ®å¯åŠ¨é¡ºåºå†³å®šçš„ã€‚</li>
<li><code>.join(timeout = None)</code> é˜»å¡ä¸»è¿›ç¨‹ï¼Œç›´è‡³å­è¿›ç¨‹è¿è¡Œå®Œæ¯•æˆ–è¶…æ—¶ã€‚</li>
<li><code>.daemon=True</code> è®¾ç½®ä¸º<strong>å®ˆæŠ¤è¿›ç¨‹</strong>ï¼Œè¦åœ¨startä¹‹å‰è®¾ç½®ã€‚ä¸»è¿›ç¨‹ä»£ç è¿è¡Œç»“æŸï¼Œå®ˆæŠ¤è¿›ç¨‹éšå³ç»ˆæ­¢ã€‚</li>
<li><code>terminate()</code> å…³é—­è¿›ç¨‹ï¼ˆä¸ä¼šç«‹å³å…³é—­ï¼‰</li>
</ul>
<p>å¤šä¸ªå­è¿›ç¨‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(name)</span>:</span></span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">'æˆ‘å•æ¨'</span>, name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    dd_list = [<span class="string">'shishi'</span>,<span class="string">'hima'</span>,<span class="string">'sasaki'</span>]</span><br><span class="line">    dd_list_p = []</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> dd_list:</span><br><span class="line">        p = Process(target=f, args=(name,))</span><br><span class="line">        p.start()</span><br><span class="line">        dd_list_p.append(p)</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> dd_list_p:</span><br><span class="line">        p.join()</span><br><span class="line">    print(<span class="string">'ä¸€ç§’å•æ¨ä¸€ä¸ªä¹Ÿæ˜¯å•æ¨(å¹¶å‘)'</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="é”å’Œç®¡é“"><a href="#é”å’Œç®¡é“" class="headerlink" title="é”å’Œç®¡é“"></a>é”å’Œç®¡é“</h3><h4 id="é”Lock"><a href="#é”Lock" class="headerlink" title="é”Lock()"></a>é”<code>Lock()</code></h4><p>åŠ é”å¯ä»¥ä¿è¯å¤šä¸ªè¿›ç¨‹ä¿®æ”¹åŒä¸€å—æ•°æ®æ—¶ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªä»»åŠ¡å¯ä»¥è¿›è¡Œä¿®æ”¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process,Lock</span><br><span class="line"><span class="keyword">import</span> os, time, random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">watch</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''è¿™é‡Œç”¨sleepä»£æ›¿äº†å¯¹é”æŠ¢å çš„å†…å­˜èµ„æºçš„è¯»å†™'''</span></span><br><span class="line">    time.sleep(random.random())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span><span class="params">(lock, name)</span>:</span></span><br><span class="line">    lock.acquire()</span><br><span class="line">    print(<span class="string">f'ä½ å…³æ³¨çš„<span class="subst">&#123;name&#125;</span>å¼€æ’­äº†ï¼Œæˆ¿é—´å·æ˜¯<span class="subst">&#123;os.getpid()&#125;</span>'</span>)</span><br><span class="line">    watch()</span><br><span class="line">    print(<span class="string">f'ä½ å…³æ³¨çš„<span class="subst">&#123;name&#125;</span>ä¸‹æ’­äº†ï¼Œæˆ¿é—´å·æ˜¯<span class="subst">&#123;os.getpid()&#125;</span>'</span>)</span><br><span class="line">    lock.release()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lock = Lock()</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> [<span class="string">'shishi'</span>,<span class="string">'hima'</span>,<span class="string">'sasaki'</span>]:</span><br><span class="line">        p = Process(target=work,args=(lock,name))</span><br><span class="line">        p.start()</span><br></pre></td></tr></table></figure></div>

<p>æµªè´¹äº†æ—¶é—´ï¼Œå´ä¿è¯äº†æ•°æ®çš„å®‰å…¨ã€‚</p>
<p>é™¤äº†æœ€ç®€å•çš„é”<code>Lock()</code> ï¼Œè¿˜æœ‰</p>
<ul>
<li><code>RLock()</code> é€’å½’é”</li>
<li><code>Semaphore(value=1)</code> è®¡æ•°å™¨é”</li>
<li><code>BoundedSemaphore(value=1)</code> å¸¦ä¸Šé™çš„è®¡æ•°å™¨é”</li>
</ul>
<h4 id="ç®¡é“Pipe-duplex-True"><a href="#ç®¡é“Pipe-duplex-True" class="headerlink" title="ç®¡é“Pipe(duplex=True)"></a>ç®¡é“<code>Pipe(duplex=True)</code></h4><p>å‚æ•°<em>duplex</em> æ˜¯å¦åŒå‘</p>
<p>è¿”å›åŒ…å«ä¸¤ä¸ªconnectionå¯¹è±¡çš„å…ƒç»„ï¼Œconnectionç›¸å½“äºé¢å‘æ¶ˆæ¯çš„å¥—æ¥å­—ï¼Œæ•°æ®æ˜¯å­˜åœ¨äºå†…å­˜ä¸­çš„ã€‚</p>
<h4 id="é˜Ÿåˆ—Queue-maxsize"><a href="#é˜Ÿåˆ—Queue-maxsize" class="headerlink" title="é˜Ÿåˆ—Queue([maxsize])"></a>é˜Ÿåˆ—<code>Queue([maxsize])</code></h4><p>é˜Ÿåˆ— <a href="https://docs.python.org/zh-cn/3/library/multiprocessing.html#multiprocessing.Queue" target="_blank" rel="noopener"><code>Queue</code></a> åˆæ˜¯åŸºäºï¼ˆç®¡é“+é”ï¼‰å®ç°çš„å†…å­˜ä¸­çš„å…±äº«æ•°æ®ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä»å¤æ‚çš„é”é—®é¢˜ä¸­è§£è„±å‡ºæ¥ï¼Œ æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…ä½¿ç”¨å…±äº«æ•°æ®ï¼Œå°½å¯èƒ½ä½¿ç”¨æ¶ˆæ¯ä¼ é€’å’Œé˜Ÿåˆ—ï¼Œé¿å…å¤„ç†å¤æ‚çš„åŒæ­¥å’Œé”é—®é¢˜ï¼Œè€Œä¸”åœ¨è¿›ç¨‹æ•°ç›®å¢å¤šæ—¶ï¼Œå¾€å¾€å¯ä»¥è·å¾—æ›´å¥½çš„å¯è·å±•æ€§ã€‚</p>
<p>é˜Ÿåˆ—å¯¹è±¡æ–¹æ³•</p>
<ul>
<li><code>.empty()</code> æ˜¯å¦ç©º</li>
<li><code>.full()</code> æ˜¯å¦æ»¡</li>
<li><code>.put(obj, block=True, timeout=None)</code> å‹å…¥é˜Ÿåˆ—</li>
<li><code>.get(block=True, timeout=None)</code> å¼¹å‡ºé˜Ÿåˆ—</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing, os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">push</span><span class="params">(queue, name)</span>:</span></span><br><span class="line">    <span class="string">'''å‘queueä¸­putæ•°æ®'''</span></span><br><span class="line">    info = <span class="string">f'YouTubeé¢‘é“<span class="subst">&#123;os.getpid():&lt;<span class="number">5</span>d&#125;</span>:<span class="subst">&#123;name:&gt;<span class="number">7</span>s&#125;</span>-Channelæ’­äº†'</span></span><br><span class="line">    queue.put(info)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shift</span><span class="params">(queue, name)</span>:</span></span><br><span class="line">    <span class="string">'''ä»queueä¸­getæ•°æ®'''</span></span><br><span class="line">    info = queue.get()</span><br><span class="line">    print(<span class="string">f'bilibiliæˆ¿é—´å·<span class="subst">&#123;os.getpid():&lt;<span class="number">5</span>d&#125;</span>:<span class="subst">&#123;name:&gt;<span class="number">7</span>s&#125;</span>-OfficialåŒä¼ --&gt;<span class="subst">&#123;info&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    youtube = []</span><br><span class="line">    bilibili = []</span><br><span class="line">    queue = multiprocessing.Queue(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å­è¿›ç¨‹ æ²¹ç®¡å¼€æ’­</span></span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> [<span class="string">'shishi'</span>,<span class="string">'hima'</span>,<span class="string">'sasaki'</span>]:</span><br><span class="line">        process = multiprocessing.Process(target=push,args=(queue, name))</span><br><span class="line">        process.start()</span><br><span class="line">        youtube.append(process)</span><br><span class="line">    <span class="comment"># å­è¿›ç¨‹ å“”å“©å“”å“©è½¬æ’­</span></span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> [<span class="string">'shishi'</span>,<span class="string">'hima'</span>,<span class="string">'sasaki'</span>]:</span><br><span class="line">        process = multiprocessing.Process(target=shift,args=(queue, name))</span><br><span class="line">        process.start()</span><br><span class="line">        bilibili.append(process)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> youtube:</span><br><span class="line">        p.join()</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> bilibili:</span><br><span class="line">        p.join()</span><br></pre></td></tr></table></figure></div>

<h5 id="ç”¨äºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„JoinableQueue-maxsize"><a href="#ç”¨äºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„JoinableQueue-maxsize" class="headerlink" title="ç”¨äºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„JoinableQueue([maxsize])"></a>ç”¨äºç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çš„<code>JoinableQueue([maxsize])</code></h5><p><a href="https://docs.python.org/zh-cn/3/library/multiprocessing.html#multiprocessing.JoinableQueue" target="_blank" rel="noopener"><code>JoinableQueue</code></a> ç±»æ˜¯ <code>Queue</code> çš„å­ç±»ï¼Œé¢å¤–æ·»åŠ äº† <code>task_done()</code>å’Œ <code>join()</code>æ–¹æ³•ã€‚</p>
<ul>
<li><code>.task_done()</code> æŒ‡å‡ºä¹‹å‰è¿›å…¥é˜Ÿåˆ—çš„ä¸€ä¸ªä»»åŠ¡å·²ç»å®Œæˆ</li>
<li><code>.join()</code> é˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ‰€æœ‰ä»»åŠ¡å‡è¢«<code>task_done()</code></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Process, JoinableQueue</span><br><span class="line"><span class="keyword">import</span> time, random, os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">consumer</span><span class="params">(q)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        res = q.get()</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        print(<span class="string">f'   DD   - id<span class="subst">&#123;os.getpid():&lt;<span class="number">5</span>d&#125;</span>ï¼š<span class="subst">&#123;res&#125;</span>çœ‹å®Œäº†'</span>)</span><br><span class="line">        q.task_done()</span><br><span class="line">    print(<span class="string">'consumer ok'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">producer</span><span class="params">(name, q)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">        time.sleep(random.randint(<span class="number">1</span>,<span class="number">3</span>))</span><br><span class="line">        res = <span class="string">f'<span class="subst">&#123;name&#125;</span>-<span class="subst">&#123;i&#125;</span>å›ç›®'</span></span><br><span class="line">        q.put(res)</span><br><span class="line">        print(<span class="string">f'Official- id<span class="subst">&#123;os.getpid():&lt;<span class="number">5</span>d&#125;</span>ï¼š<span class="subst">&#123;res&#125;</span>çƒ¤å¥½äº†'</span>)</span><br><span class="line">    q.join()</span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;name&#125;</span>ç»„æ”¶ç›Šäº†'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    q = JoinableQueue()</span><br><span class="line">    <span class="comment">#ç”Ÿäº§è€…ä»¬:çƒ¤è‚‰man</span></span><br><span class="line">    nana_offic = Process(target=producer,args=(<span class="string">'nana'</span>,q))</span><br><span class="line">    aqua_offic = Process(target=producer,args=(<span class="string">'aqua'</span>,q))</span><br><span class="line">    peko_offic = Process(target=producer,args=(<span class="string">'peko'</span>,q))</span><br><span class="line">    officials = [nana_offic, aqua_offic, peko_offic]</span><br><span class="line"></span><br><span class="line">    <span class="comment">#æ¶ˆè´¹è€…ä»¬:DD</span></span><br><span class="line">    dd1 = Process(target=consumer,args=(q,))</span><br><span class="line">    dd2 = Process(target=consumer,args=(q,))</span><br><span class="line">    dd1.daemon = <span class="literal">True</span></span><br><span class="line">    dd2.daemon = <span class="literal">True</span></span><br><span class="line">    dd_list = [dd1, dd2]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> officials + dd_list:</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> officials:</span><br><span class="line">        p.join()</span><br><span class="line">    print(<span class="string">'ç†¬æ­»DDäº†'</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="è¿›ç¨‹æ± "><a href="#è¿›ç¨‹æ± " class="headerlink" title="è¿›ç¨‹æ± "></a>è¿›ç¨‹æ± </h3><p>è¿›ç¨‹æ± <a href="https://docs.python.org/zh-cn/3/library/multiprocessing.html#multiprocessing.pool.Pool" target="_blank" rel="noopener"><code>Pool</code></a>æ§åˆ¶åŒä¸€æ—¶é—´æœ€å¤šæœ‰å›ºå®šæ•°é‡çš„è¿›ç¨‹åœ¨è¿è¡Œã€‚</p>
<p>å®ƒæ”¯æŒå¸¦æœ‰è¶…æ—¶å’Œå›è°ƒçš„å¼‚æ­¥ç»“æœï¼Œä»¥åŠä¸€ä¸ªå¹¶è¡Œçš„ map å®ç°ã€‚</p>
<p>åˆ›å»ºè¿›ç¨‹æ± </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">multiprocessing.Pool([numprocess  [,initializer [, initargs]]])</span><br></pre></td></tr></table></figure></div>

<p>åˆ›å»ºæ—¶å‚æ•°</p>
<ul>
<li><code>numprocess</code> è¦åˆ›å»ºçš„è¿›ç¨‹æ•°ï¼Œå¦‚æœçœç•¥ï¼Œå°†é»˜è®¤ä½¿ç”¨cpu_count()çš„å€¼</li>
<li><code>initializer</code> æ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œé»˜è®¤ä¸ºNone</li>
<li><code>initargs</code> æ˜¯è¦ä¼ ç»™initializerçš„å‚æ•°ç»„</li>
</ul>
<p>è¿›ç¨‹æ± å¯¹è±¡æ–¹æ³•</p>
<ul>
<li><code>.apply(func [, args [, kwargs]])</code> æ’é˜Ÿæ‰§è¡Œ<code>func(*args,**kwargs)</code>è¿”å›ç»“æœ</li>
<li><code>.apply_async(func [, args [, kwargs]])</code> å¹¶è¡Œæ‰§è¡Œï¼Œè¿”å›AsyncResulçš„å®ä¾‹</li>
<li><code>.map(func, iterable)</code> å†…ç½®å‡½æ•°mapçš„å¹¶è¡Œç‰ˆæœ¬ (åªæ”¯æŒä¸€ä¸ª <em>iterable</em> å‚æ•°)</li>
<li><code>.map_async(func, iterable)</code> åŒmapï¼Œè¿”å›çš„æ˜¯AsyncResulçš„å®ä¾‹</li>
<li><code>.imap(func, iterable)</code> å»¶è¿Ÿæ‰§è¡Œçš„mapï¼Œæ‰€éœ€çš„å†…å­˜å°ï¼Œ <em>chunksize</em>å‚æ•°å¯è°ƒé€Ÿ</li>
</ul>
<p><code>_async</code>çš„æ–¹æ³•æ”¯æŒ<em>callback</em> , <em>error_callback</em> å‚æ•°ï¼Œè¡¨ç¤ºå°†ç»“æœ<code>.get</code>ä¼ å…¥å›è°ƒå’Œé”™è¯¯å›è°ƒ</p>
<ul>
<li><code>.close()</code> å…³é—­è¿›ç¨‹æ± </li>
<li><code>.jion()</code> ç­‰å¾…é€€å‡ºã€‚è¦åœ¨closeä¹‹åè°ƒç”¨</li>
</ul>
<p>AsyncResulå¯¹è±¡æ–¹æ³•</p>
<ul>
<li><code>.get([timeout])</code> è·å–æ‰§è¡Œç»“æœã€‚å¯é€‰timeoutæŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li><code>.ready()</code> æ˜¯å¦è°ƒç”¨å®Œæˆã€‚</li>
<li><code>.successful()</code> æ˜¯å¦è°ƒç”¨å®Œæˆä¸”æ²¡æœ‰å¼•å‘å¼‚å¸¸ã€‚å¦‚æœå°±ç»ªä¹‹å‰è°ƒç”¨å°†å¼•å‘å¼‚å¸¸ã€‚</li>
<li><code>.wait([timeout])</code> ç­‰å¾…ç»“æœå˜ä¸ºå¯ç”¨ã€‚</li>
<li><code>.terminate()</code> ç«‹å³ç»ˆæ­¢æ‰€æœ‰å·¥ä½œè¿›ç¨‹ï¼Œä¸æ‰§è¡Œä»»ä½•æŒ‚èµ·å·¥ä½œã€‚</li>
</ul>
<p>ç”¨ä¾‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request <span class="keyword">as</span> request</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os, re</span><br><span class="line"></span><br><span class="line">User_Agent = <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:47.0) Gecko/20100101 Firefox/47.0'</span></span><br><span class="line">headers = dict.fromkeys((<span class="string">'User-Agent'</span>,),User_Agent)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span><span class="params">(url)</span>:</span></span><br><span class="line">    req = request.Request(url=url, headers=headers)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        res = request.urlopen(req).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(os.getpid(), <span class="string">'è¯·æ±‚å¤±è´¥'</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(os.getpid(), <span class="string">'è¯·æ±‚æˆåŠŸ'</span>)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_title</span><span class="params">(res)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> title:=re.search(<span class="string">r'(?&lt;=\&lt;title\&gt;).*?(?=&lt;/title&gt;)'</span>, res):</span><br><span class="line">        print(os.getpid(), <span class="string">'è§£æç½‘é¡µæ ‡é¢˜ä¸º'</span>, title.group())</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(os.getpid(), <span class="string">'è§£æä¸åˆ°ç½‘é¡µæ ‡é¢˜'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"></span><br><span class="line">    urls=[</span><br><span class="line">        <span class="string">'https://www.baidu.com'</span>,</span><br><span class="line">        <span class="string">'https://www.bilibili.com'</span>,</span><br><span class="line">        <span class="string">'https://cn.bing.com/'</span>,</span><br><span class="line">        <span class="string">'https://mail.163.com/'</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    p = Pool(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">        res = p.apply_async(get_page, args=(url,), callback=get_title)</span><br><span class="line">        </span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    print(<span class="string">'å®Œæˆ'</span>)</span><br></pre></td></tr></table></figure></div>

<p>æ•°æ®å…±äº«</p>
<p>è¿›ç¨‹æ± callbackï¼Œé˜Ÿåˆ—putç­‰éƒ½åªèƒ½æ¥å—<strong>å¯åºåˆ—åŒ–</strong>çš„å¯¹è±¡ä½œä¸ºå‚æ•°</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰åäºŒ)</title>
    <url>/blog/Python/Python_id_50.html</url>
    <content><![CDATA[<h2 id="å¥—æ¥å­—socket"><a href="#å¥—æ¥å­—socket" class="headerlink" title="å¥—æ¥å­—socket"></a>å¥—æ¥å­—socket</h2><blockquote>
<p>å¥—æ¥å­—èµ·æºäº 20 ä¸–çºª 70 å¹´ä»£åŠ åˆ©ç¦å°¼äºšå¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ç‰ˆæœ¬çš„ Unix,å³äººä»¬æ‰€è¯´çš„ BSD Unixã€‚ å› æ­¤,æœ‰æ—¶äººä»¬ä¹ŸæŠŠå¥—æ¥å­—ç§°ä¸ºâ€œä¼¯å…‹åˆ©å¥—æ¥å­—â€æˆ–â€œBSD å¥—æ¥å­—â€ã€‚ä¸€å¼€å§‹,å¥—æ¥å­—è¢«è®¾è®¡ç”¨åœ¨åŒ ä¸€å°ä¸»æœºä¸Šå¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šè®¯ã€‚è¿™ä¹Ÿè¢«ç§°è¿›ç¨‹é—´é€šè®¯æˆ–IPCã€‚</p>
</blockquote>
<h3 id="socketæ¨¡å—"><a href="#socketæ¨¡å—" class="headerlink" title="socketæ¨¡å—"></a>socketæ¨¡å—</h3><a id="more"></a>

<p><a href="https://docs.python.org/zh-cn/3/library/socket.html" target="_blank" rel="noopener"><code>socket</code></a>æ¨¡å—æä¾›äº†è®¿é—® BSDå¥—æ¥å­—çš„æ¥å£</p>
<h4 id="åˆ›å»ºå¥—æ¥å­—"><a href="#åˆ›å»ºå¥—æ¥å­—" class="headerlink" title="åˆ›å»ºå¥—æ¥å­—"></a>åˆ›å»ºå¥—æ¥å­—</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">s = socket.socket()</span><br></pre></td></tr></table></figure></div>

<h5 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h5><ul>
<li>AF_INET é¢å‘ç½‘ç»œçš„å¥—æ¥å­—ï¼ˆé»˜è®¤ç§æ—ï¼‰</li>
<li>AF_UNIX åŸºäºæ–‡ä»¶çš„å¥—æ¥å­—</li>
<li>TCPå¥—æ¥å­—çš„åSOCK_STREAMï¼ˆé»˜è®¤ç±»å‹ï¼‰</li>
<li>UDPå¥—æ¥å­—çš„åSOCK_DGRAM</li>
</ul>
<table>
<thead>
<tr>
<th>å¸¸ç”¨æ–¹æ³•</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>s.bind()</code></td>
<td>ç»‘å®š(ä¸»æœº,ç«¯å£å·)åˆ°å¥—æ¥å­—</td>
</tr>
<tr>
<td><code>s.listen()</code></td>
<td>å¼€å§‹TCPç›‘å¬</td>
</tr>
<tr>
<td><code>s.accept()</code></td>
<td>è¢«åŠ¨æ¥å—TCPå®¢æˆ·çš„è¿æ¥,(é˜»å¡å¼)ç­‰å¾…è¿æ¥çš„åˆ°æ¥</td>
</tr>
<tr>
<td><code>s.connect()</code></td>
<td>ä¸»åŠ¨åˆå§‹åŒ–TCPæœåŠ¡å™¨è¿æ¥</td>
</tr>
<tr>
<td><code>s.connect_ex()</code></td>
<td><code>connect()</code>å‡½æ•°çš„æ‰©å±•ç‰ˆæœ¬,å‡ºé”™æ—¶è¿”å›å‡ºé”™ç ,è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸</td>
</tr>
<tr>
<td><code>s.recv()</code></td>
<td>#æ¥æ”¶TCPæ•°æ®</td>
</tr>
<tr>
<td><code>s.send()</code></td>
<td>#å‘é€TCPæ•°æ®</td>
</tr>
<tr>
<td><code>s.sendall()</code></td>
<td>#å‘é€TCPæ•°æ®</td>
</tr>
<tr>
<td><code>s.recvfrom()</code></td>
<td>#æ¥æ”¶UDPæ•°æ®</td>
</tr>
<tr>
<td><code>s.sendto()</code></td>
<td>#å‘é€UDPæ•°æ®</td>
</tr>
<tr>
<td><code>s.getpeername()</code></td>
<td>#è¿æ¥åˆ°å½“å‰å¥—æ¥å­—çš„è¿œç«¯çš„åœ°å€</td>
</tr>
<tr>
<td><code>s.getsockname()</code></td>
<td>#å½“å‰å¥—æ¥å­—çš„åœ°å€</td>
</tr>
<tr>
<td><code>s.getsockopt()</code></td>
<td>#è¿”å›æŒ‡å®šå¥—æ¥å­—çš„å‚æ•°</td>
</tr>
<tr>
<td><code>s.setsockopt()</code></td>
<td>#è®¾ç½®æŒ‡å®šå¥—æ¥å­—çš„å‚æ•°</td>
</tr>
<tr>
<td><code>s.close()</code></td>
<td>#å…³é—­å¥—æ¥å­—ï¼Œä¹Ÿæ”¯æŒwithä¸Šä¸‹æ–‡ç®¡ç†<code>socket.socket()</code></td>
</tr>
</tbody></table>
<h4 id="åŸºäºTCPåè®®çš„socket"><a href="#åŸºäºTCPåè®®çš„socket" class="headerlink" title="åŸºäºTCPåè®®çš„socket"></a>åŸºäºTCPåè®®çš„socket</h4><h5 id="serverç«¯"><a href="#serverç«¯" class="headerlink" title="serverç«¯"></a>serverç«¯</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket() <span class="comment">#å³socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span></span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8898</span>))  <span class="comment">#æŠŠåœ°å€ç»‘å®šåˆ°å¥—æ¥å­—</span></span><br><span class="line">sk.listen()          <span class="comment">#ç›‘å¬é“¾æ¥</span></span><br><span class="line">conn,addr = sk.accept() <span class="comment">#æ¥å—å®¢æˆ·ç«¯é“¾æ¥ ä¼šå’Œinputä¸€æ ·ä¸€ç›´ç­‰å¾…è¿æ¥</span></span><br><span class="line">ret = conn.recv(<span class="number">1024</span>)  <span class="comment">#æ¥æ”¶å®¢æˆ·ç«¯ä¿¡æ¯ ä¼šå’Œinputä¸€æ ·ä¸€ç›´ç­‰å¾…ç€ä¿¡</span></span><br><span class="line">print(ret)       <span class="comment">#æ‰“å°å®¢æˆ·ç«¯ä¿¡æ¯</span></span><br><span class="line">conn.send(<span class="string">b'hi'</span>)        <span class="comment">#å‘å®¢æˆ·ç«¯å‘é€ä¿¡æ¯</span></span><br><span class="line">conn.close()       <span class="comment">#å…³é—­å®¢æˆ·ç«¯å¥—æ¥å­—</span></span><br><span class="line">sk.close()        <span class="comment">#å…³é—­æœåŠ¡å™¨å¥—æ¥å­—(å¯é€‰)</span></span><br></pre></td></tr></table></figure></div>

<h5 id="clientç«¯"><a href="#clientç«¯" class="headerlink" title="clientç«¯"></a>clientç«¯</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket() <span class="comment"># åˆ›å»ºå®¢æˆ·å¥—æ¥å­—</span></span><br><span class="line">sk.connect((<span class="string">'127.0.0.1'</span>,<span class="number">8898</span>))    <span class="comment"># å°è¯•è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line">sk.send(<span class="string">b'hello!'</span>)</span><br><span class="line">ret = sk.recv(<span class="number">1024</span>)         <span class="comment"># å¯¹è¯(å‘é€/æ¥æ”¶)</span></span><br><span class="line">print(ret)</span><br><span class="line">sk.close()            <span class="comment"># å…³é—­å®¢æˆ·å¥—æ¥å­—</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¸¸è§æŠ¥é”™"><a href="#å¸¸è§æŠ¥é”™" class="headerlink" title="å¸¸è§æŠ¥é”™"></a>å¸¸è§æŠ¥é”™</h4><p>Traceback(most recent call last):</p>
<p>OSError: [Error 48] Address already in use</p>
<p>è§£å†³æ–¹æ³•ï¼š åŠ å…¥ä¸€æ¡socketé…ç½®ï¼Œé‡ç”¨ipå’Œç«¯å£</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> SOL_SOCKET,SO_REUSEADDR</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.setsockopt(SOL_SOCKET,SO_REUSEADDR,<span class="number">1</span>) <span class="comment">#å°±æ˜¯å®ƒï¼Œåœ¨bindå‰åŠ </span></span><br><span class="line">sk.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8898</span>))</span><br><span class="line">sk.listen()</span><br></pre></td></tr></table></figure></div>

<p>Traceback(most recent call last):</p>
<p>ConnectionRefusedError: [WinError 10061] ç”±äºç›®æ ‡è®¡ç®—æœºç§¯ææ‹’ç»ï¼Œæ— æ³•è¿æ¥ã€‚</p>
<p>è§£å†³æ–¹æ³•ï¼š ä¿®æ”¹é˜²ç«å¢™è®¾ç½®æˆ–è€…æ¢ä¸€ä¸ªç«¯å£å·</p>
<h4 id="åŸºäºUDPåè®®çš„socket"><a href="#åŸºäºUDPåè®®çš„socket" class="headerlink" title="åŸºäºUDPåè®®çš„socket"></a>åŸºäºUDPåè®®çš„socket</h4><p>udpæ— éœ€ç›‘å¬å’Œå»ºç«‹è¿æ¥ã€‚</p>
<p>udpæ”¶å‘æ¶ˆæ¯ä¼šåˆ†åˆ«æ¥æ”¶å’Œå‘é€å¯¹æ–¹çš„åœ°å€ï¼ˆaddrï¼‰ã€‚</p>
<h5 id="serverç«¯-1"><a href="#serverç«¯-1" class="headerlink" title="serverç«¯"></a>serverç«¯</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">udp_sk = socket.socket(type=socket.SOCK_DGRAM)   <span class="comment">#åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨çš„å¥—æ¥å­—</span></span><br><span class="line">udp_sk.bind((<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>))        <span class="comment">#ç»‘å®šæœåŠ¡å™¨å¥—æ¥å­—</span></span><br><span class="line">msg,addr = udp_sk.recvfrom(<span class="number">1024</span>)</span><br><span class="line">print(msg)</span><br><span class="line">udp_sk.sendto(<span class="string">b'hi'</span>,addr)                 <span class="comment"># å¯¹è¯(æ¥æ”¶ä¸å‘é€)</span></span><br><span class="line">udp_sk.close()                         <span class="comment"># å…³é—­æœåŠ¡å™¨å¥—æ¥å­—</span></span><br></pre></td></tr></table></figure></div>

<h5 id="clientç«¯-1"><a href="#clientç«¯-1" class="headerlink" title="clientç«¯"></a>clientç«¯</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port=(<span class="string">'127.0.0.1'</span>,<span class="number">9000</span>)</span><br><span class="line">udp_sk=socket.socket(type=socket.SOCK_DGRAM)</span><br><span class="line">udp_sk.sendto(<span class="string">b'hello'</span>,ip_port)</span><br><span class="line">back_msg,addr=udp_sk.recvfrom(<span class="number">1024</span>)</span><br><span class="line">print(back_msg.decode(<span class="string">'utf-8'</span>),addr)</span><br></pre></td></tr></table></figure></div>

<h4 id="æ›´å¤šæ–¹æ³•ä»‹ç»"><a href="#æ›´å¤šæ–¹æ³•ä»‹ç»" class="headerlink" title="æ›´å¤šæ–¹æ³•ä»‹ç»"></a>æ›´å¤šæ–¹æ³•ä»‹ç»</h4><ul>
<li><p>é¢å‘é”</p>
<table>
<thead>
<tr>
<th><code>s.setblocking()</code></th>
<th>è®¾ç½®å¥—æ¥å­—çš„é˜»å¡ä¸éé˜»å¡æ¨¡å¼</th>
</tr>
</thead>
<tbody><tr>
<td><code>s.settimeout()</code></td>
<td>è®¾ç½®é˜»å¡å¥—æ¥å­—æ“ä½œçš„è¶…æ—¶æ—¶é—´</td>
</tr>
<tr>
<td><code>s.gettimeout()</code></td>
<td>å¾—åˆ°é˜»å¡å¥—æ¥å­—æ“ä½œçš„è¶…æ—¶æ—¶é—´</td>
</tr>
</tbody></table>
</li>
<li><p>é¢å‘æ–‡ä»¶</p>
<table>
<thead>
<tr>
<th><code>s.fileno()</code></th>
<th>å¥—æ¥å­—çš„æ–‡ä»¶æè¿°ç¬¦</th>
</tr>
</thead>
<tbody><tr>
<td><code>s.makefile()</code></td>
<td>åˆ›å»ºä¸€ä¸ªä¸è¯¥å¥—æ¥å­—ç›¸å…³çš„æ–‡ä»¶</td>
</tr>
</tbody></table>
</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£å¯¹socketæ¨¡å—ä¸‹çš„<code>socket.send()</code>å’Œ<code>socket.sendall()</code>è§£é‡Šå¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">socket.send(string[, flags]):</span><br><span class="line"><span class="string">'''Send data to the socket. The socket must be connected to a remote socket.</span></span><br><span class="line"><span class="string">The optional flags argument has the same meaning as for recv() above. </span></span><br><span class="line"><span class="string">Returns the number of bytes sent. </span></span><br><span class="line"><span class="string">Applications are responsible for checking that all data has been sent; </span></span><br><span class="line"><span class="string">if only some of the data was transmitted, </span></span><br><span class="line"><span class="string">the application needs to attempt delivery of the remaining data.</span></span><br><span class="line"><span class="string">send()çš„è¿”å›å€¼æ˜¯å‘é€çš„å­—èŠ‚æ•°é‡ï¼Œè¿™ä¸ªæ•°é‡å€¼å¯èƒ½å°äºè¦å‘é€çš„stringçš„å­—èŠ‚æ•°ï¼Œ</span></span><br><span class="line"><span class="string">ä¹Ÿå°±æ˜¯è¯´å¯èƒ½æ— æ³•å‘é€stringä¸­æ‰€æœ‰çš„æ•°æ®ã€‚å¦‚æœæœ‰é”™è¯¯åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚'''</span></span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">socket.sendall(string[, flags]):</span><br><span class="line"><span class="string">'''Send data to the socket. </span></span><br><span class="line"><span class="string">The socket must be connected to a remote socket. </span></span><br><span class="line"><span class="string">The optional flags argument has the same meaning as for recv() above. </span></span><br><span class="line"><span class="string">Unlike send(), this method continues to send data </span></span><br><span class="line"><span class="string">from string until either all data has been sent or an error occurs. </span></span><br><span class="line"><span class="string">None is returned on success. </span></span><br><span class="line"><span class="string">On error, an exception is raised, </span></span><br><span class="line"><span class="string">and there is no way to determine how much data, </span></span><br><span class="line"><span class="string">if any, was successfully sent.</span></span><br><span class="line"><span class="string">å°è¯•å‘é€stringçš„æ‰€æœ‰æ•°æ®ï¼ŒæˆåŠŸåˆ™è¿”å›Noneï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</span></span><br><span class="line"><span class="string">æ•…ï¼Œä¸‹é¢ä¸¤æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š'''</span></span><br><span class="line"><span class="comment">#sock.sendall('Hello world\n')</span></span><br><span class="line"><span class="comment">#buffer = 'Hello world\n'</span></span><br><span class="line"><span class="comment">#while buffer:</span></span><br><span class="line"><span class="comment">#    bytes = sock.send(buffer)</span></span><br><span class="line"><span class="comment">#    buffer = buffer[bytes:]</span></span><br><span class="line">	<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<h3 id="socketserveræ¨¡å—"><a href="#socketserveræ¨¡å—" class="headerlink" title="socketserveræ¨¡å—"></a>socketserveræ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/socketserver.html" target="_blank" rel="noopener"><code>socketserver</code></a>æ¨¡å—ä½¿ä¸€ä¸ªserverç«¯å¯ä»¥åŒæ—¶å’Œå¤šä¸ªclientç«¯è¿æ¥ï¼ˆå¤šçº¿ç¨‹)</p>
<p>ä¸åªä½¿ç”¨socketæ—¶<code>conn,addr = sk.accept()</code>ç›¸åŒçš„æ˜¯<br>ç»§æ‰¿<code>socketserver.BaseRequestHandler</code>ä¹‹å<br><code>self.request</code> å°±ç›¸å½“äºconn<br><code>self.client_address</code> å°±ç›¸å½“äºaddr</p>
<h4 id="serverç«¯-2"><a href="#serverç«¯-2" class="headerlink" title="serverç«¯"></a>serverç«¯</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Myserver</span><span class="params">(socketserver.BaseRequestHandler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.data = self.request.recv(<span class="number">1024</span>).strip()</span><br><span class="line">        print(<span class="string">"&#123;&#125; wrote:"</span>.format(self.client_address[<span class="number">0</span>]))</span><br><span class="line">        print(self.data)</span><br><span class="line">        self.request.sendall(self.data.upper())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    HOST, PORT = <span class="string">"127.0.0.1"</span>, <span class="number">9999</span></span><br><span class="line">    <span class="comment"># è®¾ç½®allow_reuse_addresså…è®¸æœåŠ¡å™¨é‡ç”¨åœ°å€</span></span><br><span class="line">    socketserver.TCPServer.allow_reuse_address = <span class="literal">True</span></span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªserver, å°†æœåŠ¡åœ°å€ç»‘å®šåˆ°127.0.0.1:9999</span></span><br><span class="line">    server = socketserver.TCPServer((HOST, PORT),Myserver)</span><br><span class="line">    <span class="comment"># è®©serveræ°¸è¿œè¿è¡Œä¸‹å»ï¼Œé™¤éå¼ºåˆ¶åœæ­¢ç¨‹åº</span></span><br><span class="line">    server.serve_forever()</span><br></pre></td></tr></table></figure></div>

<h4 id="clientç«¯-2"><a href="#clientç«¯-2" class="headerlink" title="clientç«¯"></a>clientç«¯</h4><p>å°±æ˜¯æœ€å‰é¢çš„åŸºäºTCPçš„å¥—æ¥å­—çš„Cç«¯ï¼Œè¿™é‡Œä½¿ç”¨withä¸Šä¸‹æ–‡ç®¡ç†çš„å†™æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">HOST, PORT = <span class="string">"127.0.0.1"</span>, <span class="number">9999</span></span><br><span class="line">data = <span class="string">"hello"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> socket.socket(socket.AF_INET, socket.SOCK_STREAM) <span class="keyword">as</span> sock:</span><br><span class="line">    sock.connect((HOST, PORT))</span><br><span class="line">    sock.sendall(bytes(data + <span class="string">"\n"</span>, <span class="string">"utf-8"</span>))</span><br><span class="line">    received = str(sock.recv(<span class="number">1024</span>), <span class="string">"utf-8"</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">"Sent:     &#123;&#125;"</span>.format(data))</span><br><span class="line">print(<span class="string">"Received: &#123;&#125;"</span>.format(received))</span><br></pre></td></tr></table></figure></div>

<h3 id="é»åŒ…"><a href="#é»åŒ…" class="headerlink" title="é»åŒ…"></a>é»åŒ…</h3><p>ç°è±¡ : åŒæ—¶æ‰§è¡Œå¤šæ¡å‘½ä»¤ä¹‹åï¼Œå¾—åˆ°çš„ç»“æœå¾ˆå¯èƒ½åªæœ‰ä¸€éƒ¨åˆ†ï¼Œåœ¨æ‰§è¡Œå…¶ä»–å‘½ä»¤çš„æ—¶å€™åˆæ¥æ”¶åˆ°ä¹‹å‰æ‰§è¡Œçš„å¦å¤–ä¸€éƒ¨åˆ†ç»“æœï¼Œè¿™ç§æ˜¾ç°å°±æ˜¯é»åŒ…ã€‚</p>
<h4 id="é»åŒ…æˆå› "><a href="#é»åŒ…æˆå› " class="headerlink" title="é»åŒ…æˆå› "></a>é»åŒ…æˆå› </h4><ul>
<li>TCPåè®®çš„æ‹†åŒ…æœºåˆ¶<br>å½“å‘é€ç«¯ç¼“å†²åŒºçš„é•¿åº¦å¤§äºç½‘å¡çš„MTUæ—¶TCPä¼šå°†è¿™æ¬¡å‘é€çš„æ•°æ®æ‹†æˆå‡ ä¸ªæ•°æ®åŒ…å‘é€å‡ºå»ã€‚</li>
<li>é¢å‘æµçš„é€šä¿¡ç‰¹ç‚¹å’ŒNagleç®—æ³•<br>Nagleç®—æ³•ä¼˜åŒ–åå°†å¤šæ¬¡é—´éš”è¾ƒå°ä¸”æ•°æ®é‡å°çš„æ•°æ®ï¼Œåˆå¹¶æˆä¸€ä¸ªå¤§çš„æ•°æ®å—ï¼Œç„¶åè¿›è¡Œå°åŒ…ã€‚</li>
</ul>
<p><img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAAAAD/4QMqaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUUyMEZGNjM5N0MyMTFFOTlCODhDNjc0NTEzNTdGRjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUUyMEZGNjQ5N0MyMTFFOTlCODhDNjc0NTEzNTdGRjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBRTIwRkY2MTk3QzIxMUU5OUI4OEM2NzQ1MTM1N0ZGMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBRTIwRkY2Mjk3QzIxMUU5OUI4OEM2NzQ1MTM1N0ZGMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEABsaGikdKUEmJkFCLy8vQkc/Pj4/R0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0cBHSkpNCY0PygoP0c/NT9HR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR//AABEIARIBtQMBIgACEQEDEQH/xACAAAEBAQEBAQEAAAAAAAAAAAAABQQDAgEGAQEAAAAAAAAAAAAAAAAAAAAAEAACAQIDAggJCgcAAgMAAAAAAQIRAyESBDEUQVFh0SKSE1NxgZHB4TJSMwWhsUJyorJDY3MV8GLCI4OjRCQ08YLiEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD9MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5Tv27bpOUYvlaR43ux3kOtHnA0Az73Y7yHWjzje7HeQ60ecDQDPvdjvIdaPON7sd5DrR5wNAM+92O8h1o843ux3kOtHnA0Az73Y7yHWjzje7HeQ60ecDQDPvdjvIdaPON7sd5DrR5wNAM+92O8h1o853TTVVimB9AAAAAAAAAAAAAAAAAAAAAAAABwlqbMXRzgmuDMuc+b3Y7yHWjzgaAZ97sd5DrR5xvdjvIdaPOBoBn3ux3kOtHnG92O8h1o84GgGfe7HeQ60ecb3Y7yHWjzgaAZ97sd5DrR5xvdjvIdaPOBoBn3ux3kOtHnG92O8h1o84GgHCOpsydFODb4FJc53AAAAAAAAAAAAAAJs7cbmspNKS7HhVfpmrdLHdw6seYz/8Ab/h/rKAGfdLHdw6seYbpY7uHVjzGgAZ90sd3Dqx5hulju4dWPMaABn3Sx3cOrHmG6WO7h1Y8xoAGfdLHdw6seYbpY7uHVjzGgAZ90sd3Dqx5hulju4dWPMaABg1WlsxszahBNQl9FcT5DvpPcW/qR+6hq/cXPqS+6xpPcW/qR+6gNAAAAAAAAAAAAAAAAAAAAAAAAJejsW7juucYyfbT2pPiNm6WO7h1Y8xn0H4v60/MUAM+6WO7h1Y8w3Sx3cOrHmNAAz7pY7uHVjzDdLHdw6seY0ADPulju4dWPMN0sd3Dqx5jQAM+6WO7h1Y8w3Sx3cOrHmNAAz7pY7uHVjzDdLHdw6seY0ACXrLFu27ThGMX20NiS4yoT9f+F+tDzlAAAAAAAAAAAAAAAn/9v+H+soE//t/w/wBZQAAw6yeRxdcMegpOMpbPVpta9nhqeLs1nmrk5Qa9RJtVVNqS9Z5q4Y+ACieIzUm0vouj8NE/OYXNuUVfk7ayRe1xrP6WKpswoqnOEmr0lJuNvtNq4ZZIUUnwL53g+UKp4lcjFOTeEdvJhX5ibGdyV2jklLPsc36tdnZ5aYx2Sry14A1GK1Cq8zzOmZ7HCOOWtNuFacmzADbvVutOlXHDLKuFOCn8y8onqrcIdo60rTY61rR4PHAmTTjOVW4JZs2WTby0sV6UlXZj8h2cJQsxnVUo9tFJqTqlXJKrfDsqwNy1EHJQxUnsrGS+dHclWrM7UoL1HPB5ZZtka7JQdFhsUsKlUDPq/cXPqS+6xpPcW/qR+6hq/cXPqS+6xpPcW/qR+6gNAON3UW7PvJKP8cW06QmpxUo7JKq8YHoAAAAABxnfjCWV1rSuEZS219lPiZ8t6iF1pRrisyrGSqsMVVKu1AdwZnrLKaWeOPDmVPHie3ftpKTnGj2PMsacQHYGaGrsz+nFYtesuB04+Hg5DSAAAAAAAZ46q1KThmWZOlHh8+3xGgCfoPxf1p+YoE/Qfi/rT8xQAAwKdNQ41zV2JSfR6P0o7KPglxuhxt3KqDUpO85LPGr/APtWOyKXA6LgxAqN0PkJqcVKOKkqowwnGUpdpJq5mlSGZrDGnR2NUxrRnDTXJq1w9orS7OPA1l2rjlXbxbNmLCseJXYRSk5JRextqjMGncp1WZSi4YpXJSdePGMcvDgvIebbS00XCryqsmnVxaj0vWfRw4EsOBAbVq7LbWeOHKj1d1Fu168knStKqviqSoxlCikpOFaZa3VXM6JSzRUaY/ym+k5XpODUaRgnVOWPSfBKPGB2t37d31JKTpWiePkOxnjbudopzcWlGSwi1tcf5peyaAJ+v/C/Wh5ygT9f+F+tDzlAAAAAAAAAAAAAAAn/APb/AIf6ygT/APt/w/1lAAAAAB4uKsGuNMDm9RBRzY+rKVOHo+t5Do8tysXjR0fyPmIzpNdBRrJ7KQpF1hD2JcMq7dhv0NMjoqYp8HDGL+jGPA1wAdt2t1Taq1ji29tON4+qtuymB6jYtxo1FYbOSvFxeI6gDmrUIyc1FKT2uir5ToABn1fuLn1JfdZPen1F2xDsrmVZI9HZ9FfSWJQ1fuLn1JfdY0nuLf1I/dQH5W/or9rGcX4dvy85d09jUO1BxvZU4xouzi6YbKlUAT931Pf/AOuI3fU9/wD64lAAT931Pf8A+uI3fU9//riUABOdqcrj+m4wgm88rePS4IJ8fi4DlpE7fZylguxk/XlLu+B4R8C8xUjBRba2ydX83mOK01tcGGXLRttZcMKN04FXj4QOWnhejags0VSMfoPi+uc7jlYhlcu8nLKsaVcsKvo7afSxa8JRPjSeDAnJbvRRbi+FUzJxTSzNJrgaq1Rva4uh63fU9/8A64myFmFv1Ixj4EkdAJ+76nv/APXEbvqe/wD9cSgAJ+76nv8A/XEbvqe//wBcSgAPx13TXbl6cUnckpOskqehFXR6HVW9tzIvZ9b5NhcAE/4fsu176fmKBP0H4v60/MUAAAAHic1BOT2I9mXWNKGaSTUXWkqecDs7sU1Hhcsvjy5vmHRvQ44zXlTRGcatKOWSwVf7eOEFh/aeFZx4XgmV9O07UGtmVfN4gPm7WsHkimmngktjrwHWMVGtFtdWegAAAE/X/hfrQ85QJ+v/AAv1oecoAAAAAAAAAAAAAAE//t/w/wBZQJ//AG/4f6ygAAAA+NJqj2H0AeHbi2nTZs8qfzpCFuNuqiqVx83zYU4D2AAAAAADPq/cXPqS+6xpPcW/qR+6hq/cXPqS+6xpPcW/qR+6gNAAAAAAAAAAAAAAAAAAAAAAAAJ+g/F/Wn5igT9B+L+tPzFAAAAB8cU9qqfQBzdqDrVett+TyeqtnCk9p6jFRSisEsEegAAAAAAT9f8AhfrQ85QJ+v8Awv1oecoAAAAAAAAAAAAAAEy/OVnVdpknOPZZehGuOap73/8AKvdT0lAAT9//ACr3U9I3/wDKvdT0lAAT9/8Ayr3U9I3/APKvdT0lAATpfEoxpmt3VV0VYbXxbdp93/8AKvdT0jX/AIX60POUAJ+//lXup6Rv/wCVe6npKAAn7/8AlXup6Rv/AOVe6npKAAl39Y7luUFavVlFr1ONeE26aLjZgng1CNfIjuAAAAAAAAAAAAAAAAAAAAAAAAAJFi/LTSuRlbuyzXZSTjGqozvv/wCVe6npKAAn7/8AlXup6Rv/AOVe6npKAAn7/wDlXup6Rv8A+Ve6npKAAnfuUc2Xs7ualaZMacdK7D7v/wCVe6npPv8A2/4f6zeBP3/8q91PSN//ACr3U9JQAE/f/wAq91PSN/8Ayr3U9JQAEi/flqJW4xt3Y5bsZNyjRURXAAAAAAAAAAAAAAAAAAAAAAAJ+v8Awv1oecoE/X/hfrQ85QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnv/3V+j/WUCe//cX6T+8UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACXr79tu2lKNY3oVxWFK1rxUKMLkbirBqS5HU/LfFbPZ321sn0uf5S/8Os9jYiuF9J+P0AbQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+NpKr2IDBL/3I/pP7xQJMtTa3qM88cvZtVqqbSpGSms0XVPhA9AAAAAAAAAAAAAAAAAAAAAABmv6mNmkaOc5erFbXzLlA0gwqGquYuUbS4orM/G3h5Bu19bLzrywiwNx5lOMFWTSXKT53dXb6LhG43hGcdi+sv4R7hoIPpX32s+OWzxR2UAyfEHY1LhScejLHFeq9pXhOM1WDTXIeN2tbMkafVRnn8Pt1zWv7U+OPnWygG4GTS35TzW7mFy26SpsfFJeE1gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADxOcYKsmorldAPZ8argzPvljZ2kOsjvGSkqxdVyAfjbuncL7srbmovHsP2MIKEVFbIqnkI19xerjctp3XFdKMV9LFKr2f/Bt7fVPFWkvDNAbwT9+lb9/blbXtLpR8bRuhNTSlF1T4UB6AAAAAAAAAAAAAAAAAAHmUlFOT2JVMWghmi78/Xu4+CPAlyH3W36RdmKzXLiaUVy4VfEjTYtu3bjB7YxS8iA6gAAAAAAAx3tBZvTzzVXSm1r5jn+22Y+7zW3xxk/PUoADBbu3LE1avPMpepPZV+zLl4uM3mXW289mXGlmXhjijrZn2kIz9qKflQHUAAAAAAAAAAAAAAAAAAAAAAAAAAAABhvX5zn2Fj1tspcEV55M9Q0NqPSmu0l7U+l6Dn8N6Vt3XtuSlJ+WhQA5OxbeDjGn1UZLnw6DxtN2W9uXY14CgAOVmzCzFQgqJHUAD5tJbluV5qMZStXFXLFVpLk8JVAGD9xivXhdguOUMPOarV6F5ZrbUlyHUn6mz2X/kWVSUcZJbJx4a8vEwKAPEJqcVKOySqj2AAAAAAAAAAAA8TmoRcnsim/Iezndh2kJQ9pNeVAZNBbbj28/eXcfAuBLkobzHoLmeyovCVvoSXE44GwAAAMz1KTaScnWmFMeN4tYJ9Hwny3qlOryySST2ZtuzCNfRwk7UW6Zlgs0s2MEl0frbeLYszlto2IJq3ccZJSUXRZIwlRLGqWK4l5aVoBRhq4TVUp0+pPHlwiaIyU1VV8aa+R0ZO1GlzSjH+3Scqe7xooyaxzfy0wy+Y32oOEVF0w4lReSr+cDoAAM+rlkszf8AK/mPuljlswT4Ix+Yy/En0Iwfq3JxjJ8hzvfF7NrCNZteJfLzAVQfm/3i5O5GtIQzLNwulcfk4kVP3TTe39mXMBQBP/dNN7f2Zcw/dNN7f2ZcwFAE/wDdNN7f2Zcw/dNN7f2ZcwFAE/8AdNN7f2Zcx9WtjeajYkm3KjbjLDoyls6Ps8YG8EtX7iV2SnCWSsqZZY5YpYdPBVTXDjXwHueqlC5cTcYqEY0xcuF/R6OLVK44YbQKIJ9i9OVc04USq3lwT9nNnxy7Xhs4Uc+3uynWLTil7Esa0xUc/Sy0Wz2sEwKgMD+IWbeFyabePRjL/wDWPj8R8/dNN7f2ZcwFAE/9003t/ZlzD9003t/ZlzAUAT/3TTe39mXMP3TTe39mXMBQBP8A3TTe39mXMSl8YuQm9k4VdOB0rh/DQH6Un6i7O9Pd7Lo/pz9lcS/mf8cnOx8Ws3cJVg/L8x0+GKtrtH61yUpPy0A12bMbEFbhsidQAABO1GonCU9sVFLGsdnJX6UtlHwLDFgUQS7N+TnRz4JbXbfgqoyTwjt5eJI+q9fUe0dHCWKeVUpwbbsXjtpjt8QFMHGxKc4Zp4N8GXL5Vml8/iOwA+NVwZ9OV652UJTf0U2Bm+Gv/wAeK4sy8kmbjJoIdnYgntpXy4+c1gAAAAAAAAAAAAAGC/Znan29hVf04e0uT+Zfxy6LGohqI5oeNcKfEzuT7P8Ab1VyPeRjNeLB/KBQAAHwOKkqNVTPoA8ZI5s9Fm46Y+U9gAAABj+IQzaefIs3kxPbs29TBSuRUsyT5fLtOfxCeWxLjl0V4XgarcckFH2Ul5AJv7RbjcjcttxyyUqbVg6+H5yqAAAAAAADhfs9rlT2RlV4tYZZLg8J3AGPU6ftIKEIx2NJ1ay1VMKJ18GB5uWJKUpQT6SjsarXNPNi9mEljxbDcAMFvTTg69HGLS/k8HtV+k3Rt8mz67F2LeRrHZJydV0Yx2ZWpbM2L2m4Ac7cMiaq2q4V4OQ6AAAAAAAAkr4Rbc3O43LM26bFi/KVgBxtae3ZwtxUf44zJZlut12ZYQuPNbfh2x5iicb9iF+OSaw+blQHYGDTXLkLj09x58sc0ZcLjWmPKbwBivaVzbksvS2qlG1xZsX5OA2gDBY0rtvpKEk1Sqw+SlJY7XVeA8PSp27cXbTn/bzSpHDLlrV7XgmsK+QpADxC3G2qQSiuRUPYAAxfEYOenmlwKvkxNp4mk4tPZRgfLU1cgpLZJJnQxfDnXTwrxedm0AAAAAAAAAAAAAAGPVWJTy3bXvLezlXDF+E2ADLY1cL3R9Wa2wlg1zmo43dPbve8ipfxx7TP+22OFOnFmlT5wPt34hZtSUHKrbphjTw8RtOC01qMHbUUovauMyqxqNPhZkpw9me1eCS84FE8TmoRcpOiWLMXa6t4dnFcucLSXLzT1Mk0voRwj4+FgIfE7EvWbhX2lTnXynuXxGwtksz4o1bNbimqNYCMIx2JLwAYIW56q4rt1ZIQxhB7W/al5l/DogAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/VPsb0L79X3cuSuz5SgeLkI3IuElVPaYoq/peil21tbPbjyfzfOBQBh3+PsXa8WRnOd3VXl/Zh2S457XyUxp4wKQMun1cLyo+jcXrQe1M1AAZtRqoWF0nWXBFes/EZoLW0zNwebHLLDLyVXnApGPXXuztNL159GK5XzHjPq5YKNuPK238x7s6TLPtbsu0ucfBH6qA72LfZW4w9lJHUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADPe0tq/7yKb4+Hyoz/tsPauU4s5QAGazo7Vh1hHHjeL8rNIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH//Z" alt="img"></p>
<h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>æ€è·¯ï¼šåˆ¶ä½œæŠ¥å¤´ï¼Œæå‰è®©æ¥æ”¶ç«¯çŸ¥æ™“è‡ªå·±å°†è¦å‘é€çš„å­—èŠ‚æµæ€»å¤§å°</p>
<p>è®©å‘é€ç«¯åœ¨å‘é€æ•°æ®å‰ï¼Œå‘é€<strong>å›ºå®šé•¿åº¦</strong>çš„æŠ¥å¤´ï¼Œç„¶åæ¥æ”¶ç«¯å¾ªç¯æ¥æ”¶å®Œæ‰€æœ‰æ•°æ®ã€‚</p>
<h3 id="structæ¨¡å—"><a href="#structæ¨¡å—" class="headerlink" title="structæ¨¡å—"></a>structæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/struct.html" target="_blank" rel="noopener"><code>struct</code></a>å¯ä»¥æŠŠä»¥ä¸‹ç±»å‹è½¬æˆå›ºå®šé•¿åº¦çš„bytes</p>
<table>
<thead>
<tr>
<th>Format</th>
<th>C Type</th>
<th>Python type</th>
<th>Standard size</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>pad byte</td>
<td>no value</td>
<td></td>
<td></td>
</tr>
<tr>
<td>c</td>
<td>char</td>
<td>string of length 1</td>
<td>1</td>
<td></td>
</tr>
<tr>
<td>b</td>
<td>signed char</td>
<td>integer</td>
<td>1</td>
<td>(3)</td>
</tr>
<tr>
<td>B</td>
<td>unsigned char</td>
<td>integer</td>
<td>1</td>
<td>(3)</td>
</tr>
<tr>
<td>?</td>
<td>_Bool</td>
<td>bool</td>
<td>1</td>
<td>(1)</td>
</tr>
<tr>
<td>h</td>
<td>short</td>
<td>integer</td>
<td>2</td>
<td>(3)</td>
</tr>
<tr>
<td>H</td>
<td>unsigned short</td>
<td>integer</td>
<td>2</td>
<td>(3)</td>
</tr>
<tr>
<td>i</td>
<td>int</td>
<td>integer</td>
<td>4</td>
<td>(3)</td>
</tr>
<tr>
<td>I</td>
<td>unsigned int</td>
<td>integer</td>
<td>4</td>
<td>(3)</td>
</tr>
<tr>
<td>l</td>
<td>long</td>
<td>integer</td>
<td>4</td>
<td>(3)</td>
</tr>
<tr>
<td>L</td>
<td>unsigned long</td>
<td>integer</td>
<td>4</td>
<td>(3)</td>
</tr>
<tr>
<td>q</td>
<td>long long</td>
<td>integer</td>
<td>8</td>
<td>(2)(3)</td>
</tr>
<tr>
<td>Q</td>
<td>unsigned long long</td>
<td>integer</td>
<td>8</td>
<td>(2)(3)</td>
</tr>
<tr>
<td>f</td>
<td>float</td>
<td>float</td>
<td>4</td>
<td>(4)</td>
</tr>
<tr>
<td>d</td>
<td>double</td>
<td>float</td>
<td>8</td>
<td>(4)</td>
</tr>
<tr>
<td>s</td>
<td>char[]</td>
<td>string</td>
<td></td>
<td></td>
</tr>
<tr>
<td>P</td>
<td>char[]</td>
<td>string</td>
<td></td>
<td></td>
</tr>
<tr>
<td>p</td>
<td>void *</td>
<td>integer</td>
<td></td>
<td>(5)(3)</td>
</tr>
</tbody></table>
<ul>
<li><code>struct.pack()</code></li>
<li><code>struct.unpack()</code></li>
</ul>
<p><code>.pack()</code>å’Œ<code>.unpack()</code>çš„å‚æ•°ä¸€æ ·ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>struct.pack(<span class="string">'i'</span>,<span class="number">1111111111111</span>)</span><br><span class="line"></span><br><span class="line">struct.error: <span class="string">'i'</span> format requires <span class="number">-2147483648</span> &lt;= number &lt;= <span class="number">2147483647</span> <span class="comment">#è¿™ä¸ªæ˜¯èŒƒå›´</span></span><br></pre></td></tr></table></figure></div>

<p><code>.unpack()</code>å°†è¿”å›ä¸€ä¸ªå…ƒç»„ã€‚</p>
<h5 id="ä½¿ç”¨structè‡ªåˆ¶æŠ¥å¤´"><a href="#ä½¿ç”¨structè‡ªåˆ¶æŠ¥å¤´" class="headerlink" title="ä½¿ç”¨structè‡ªåˆ¶æŠ¥å¤´"></a>ä½¿ç”¨structè‡ªåˆ¶æŠ¥å¤´</h5><p>ä»¥è¿œç¨‹ç»ˆç«¯åŠŸèƒ½ï¼ˆé›¾ï¼‰ä¸ºä¾‹ï¼š</p>
<p>æœåŠ¡ç«¯ï¼ˆè‡ªå®šåˆ¶æŠ¥å¤´ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket, struct, os, subprocess</span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">s.bind((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line">s.listen()</span><br><span class="line">conn, addr = s.accept()</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    cmd = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    cd = cmd.split(<span class="string">b'cd '</span>)</span><br><span class="line">    <span class="keyword">if</span> len(cd) == <span class="number">2</span>:</span><br><span class="line">        os.chdir(str(cd[<span class="number">-1</span>].strip(), <span class="string">'utf-8'</span>))</span><br><span class="line">    print(<span class="string">'cmd: %s'</span> % cmd)</span><br><span class="line">    res = subprocess.Popen(cmd.decode(<span class="string">'utf-8'</span>),</span><br><span class="line">                           shell=<span class="literal">True</span>,</span><br><span class="line">                           stdout=subprocess.PIPE,</span><br><span class="line">                           stderr=subprocess.PIPE)</span><br><span class="line">    back_msg = res.stderr.read() <span class="keyword">or</span> res.stdout.read()</span><br><span class="line">    conn.send(struct.pack(<span class="string">'i'</span>, len(back_msg)))  <span class="comment">#å…ˆå‘æŠ¥å¤´ï¼šback_msgçš„é•¿åº¦</span></span><br><span class="line">    conn.sendall(back_msg)  <span class="comment">#å†å‘çœŸå®çš„å†…å®¹</span></span><br><span class="line">conn.close()</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></div>

<p>å®¢æˆ·ç«¯ï¼ˆè‡ªå®šåˆ¶æŠ¥å¤´ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket, struct</span><br><span class="line">s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">res = s.connect_ex((<span class="string">'127.0.0.1'</span>, <span class="number">8080</span>))</span><br><span class="line">res <span class="keyword">and</span> print(res)</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    msg = input(<span class="string">'&gt;&gt;&gt; '</span>).strip()</span><br><span class="line">    <span class="keyword">if</span> len(msg) == <span class="number">0</span>: <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> msg == <span class="string">':q'</span>: <span class="keyword">break</span></span><br><span class="line">    s.send(msg.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">    data_len = struct.unpack(<span class="string">'i'</span>, s.recv(<span class="number">4</span>))[<span class="number">0</span>]  <span class="comment">#æ¥æ”¶æŠ¥å¤´</span></span><br><span class="line">    now_len = <span class="number">0</span></span><br><span class="line">    all_data = <span class="string">b''</span></span><br><span class="line">    <span class="keyword">while</span> now_len &lt; data_len:</span><br><span class="line">        now_data = s.recv(<span class="number">1024</span>)</span><br><span class="line">        all_data += now_data</span><br><span class="line">        now_len += len(now_data)</span><br><span class="line">    print(all_data.decode(<span class="string">'gbk'</span>))  <span class="comment">#windowsé»˜è®¤gbkç¼–ç </span></span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure></div>

<p>è‡ªæ­¤ï¼Œé»åŒ…é—®é¢˜è¢«å®Œç¾è§£å†³ã€‚äº‹å®ä¸Šï¼Œåº”ç”¨å±‚çš„åè®®ï¼ˆFTPç­‰ï¼‰æœ¬è´¨ä¸Šå°±æ˜¯å®šåˆ¶çš„ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æŠ¥å¤´ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰åä¸€)</title>
    <url>/blog/Python/Python_id_49.html</url>
    <content><![CDATA[<h2 id="ç³»ç»Ÿæœ‰å…³æ¨¡å—"><a href="#ç³»ç»Ÿæœ‰å…³æ¨¡å—" class="headerlink" title="ç³»ç»Ÿæœ‰å…³æ¨¡å—"></a>ç³»ç»Ÿæœ‰å…³æ¨¡å—</h2><h3 id="sysæ¨¡å—"><a href="#sysæ¨¡å—" class="headerlink" title="sysæ¨¡å—"></a>sysæ¨¡å—</h3><blockquote>
<p><a href="https://docs.python.org/zh-cn/3/library/sys.html" target="_blank" rel="noopener"><code>sys</code></a>æ¨¡å—æ˜¯ä¸pythonè§£é‡Šå™¨äº¤äº’çš„ä¸€ä¸ªæ¥å£</p>
</blockquote>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">sys.argv           <span class="comment">#å‘½ä»¤è¡Œå‚æ•°Listï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ç¨‹åºæœ¬èº«è·¯å¾„</span></span><br><span class="line">sys.exit(n)        <span class="comment">#é€€å‡ºç¨‹åºï¼Œæ­£å¸¸é€€å‡ºæ—¶exit(0),é”™è¯¯é€€å‡ºsys.exit(1)</span></span><br><span class="line">sys.version        <span class="comment">#è·å–Pythonè§£é‡Šç¨‹åºçš„ç‰ˆæœ¬ä¿¡æ¯</span></span><br><span class="line">sys.path           <span class="comment">#è¿”å›æ¨¡å—çš„æœç´¢è·¯å¾„ï¼Œåˆå§‹åŒ–æ—¶ä½¿ç”¨PYTHONPATHç¯å¢ƒå˜é‡çš„å€¼</span></span><br><span class="line">sys.platform       <span class="comment">#è¿”å›æ“ä½œç³»ç»Ÿå¹³å°åç§°</span></span><br></pre></td></tr></table></figure></div>

<p>è¯•å›¾é”™è¯¯é€€å‡º</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">except</span> SystemExit <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br></pre></td></tr></table></figure></div>

<h4 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LUA"><figure class="iseeu highlight /lua"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">'hello'</span>)`çš„æœ¬è´¨æ˜¯`sys.<span class="built_in">stdout</span>.<span class="built_in">write</span>(<span class="string">'hello'</span>+<span class="string">'\n'</span>)`</span><br><span class="line">`sys.<span class="built_in">stdout</span>.<span class="built_in">flush</span>()`å°†ç¼“å†²åŒºçš„å†…å®¹å¼ºåˆ¶æ‰“å°</span><br><span class="line">åœ¨æ§åˆ¶å°æ‰“å°å­—ç¬¦è¿›åº¦æ¡ä½¿ç”¨`sys.<span class="built_in">stdout</span>.<span class="built_in">flush</span>()`ä¼šæ›´åŠ å¹³æ»‘</span><br><span class="line">Windowsç³»ç»Ÿçš„å›è½¦ç¬¦`<span class="string">'\r'</span>`å¯ä»¥é‡å†™æœ¬è¡Œçš„å†…å®¹ï¼Œå®Œæˆè¿›åº¦æ¡çš„æ•ˆæœã€‚</span><br><span class="line">æ‰“å°å¼‚å¸¸åˆ™æ˜¯`sys.<span class="built_in">stderr</span></span><br></pre></td></tr></table></figure></div>

<p>è¿›åº¦æ¡ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment">#Compatible module of terminal color for Win7 and more</span></span><br><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> init, Fore</span><br><span class="line">init(autoreset=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Colormsg</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="string">'''å¸¦é¢œè‰²çš„æ¶ˆæ¯ç±» é»˜è®¤æ˜¯ç™½è‰²'''</span></span><br><span class="line">    color = <span class="string">'WHITE'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, msg:str)</span>:</span></span><br><span class="line">        self._msg = msg</span><br><span class="line">        super().__init__()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_color</span><span class="params">(self, color: str)</span>:</span></span><br><span class="line">        <span class="string">'''è®¾ç½®coloramaæ”¯æŒçš„å­—ä½“å‰æ™¯è‰²å å…¨éƒ¨å¤§å†™'''</span></span><br><span class="line">        self.color = color</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">&#123;getattr(Fore, self.color)&#125;</span><span class="subst">&#123;super().__str__()&#125;</span><span class="subst">&#123;Fore.RESET&#125;</span>'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">proportion_bar</span><span class="params">(proportion: float, color: str)</span>:</span></span><br><span class="line">    <span class="string">'''ç›´æ¥åœ¨CMDä¸­æ‰“å°çš„è¿›åº¦æ¡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            proportion: è¿›åº¦æ¯” 0-1</span></span><br><span class="line"><span class="string">            color: coloramaæ”¯æŒçš„å­—ä½“å‰æ™¯è‰²å å…¨éƒ¨å¤§å†™</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    num = int(proportion * <span class="number">25</span>)</span><br><span class="line">    sys.stdout.write(<span class="string">'\r%s%s'</span> % (Colormsg(<span class="string">"â–ˆ"</span> * num).set_color(color), <span class="string">"â–ˆ"</span> *</span><br><span class="line">                                 (<span class="number">25</span> - num)))</span><br><span class="line">    sys.stdout.write(<span class="string">'\t%d%%'</span> % (<span class="number">100</span> * proportion))</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">'å¼€å§‹å¯åŠ¨...'</span>)</span><br><span class="line">    <span class="keyword">import</span> time</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">101</span>):</span><br><span class="line">        time.sleep(<span class="number">0.02</span>)</span><br><span class="line">        proportion_bar(i / <span class="number">100</span>, <span class="string">'MAGENTA'</span>)</span><br><span class="line">    print(<span class="string">'\nå¯åŠ¨å®Œæˆã€‚'</span>)</span><br><span class="line">    shell()</span><br></pre></td></tr></table></figure></div>

<h3 id="osæ¨¡å—"><a href="#osæ¨¡å—" class="headerlink" title="osæ¨¡å—"></a>osæ¨¡å—</h3><blockquote>
<p><a href="https://docs.python.org/zh-cn/3/library/os.html" target="_blank" rel="noopener"><code>os</code></a>æ¨¡å—æ˜¯ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„ä¸€ä¸ªæ¥å£</p>
</blockquote>
<h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">os.sep        <span class="comment">#è¾“å‡ºæ“ä½œç³»ç»Ÿç‰¹å®šçš„è·¯å¾„åˆ†éš”ç¬¦ï¼Œwinä¸‹ä¸º"\\",Linuxä¸‹ä¸º"/"</span></span><br><span class="line">os.linesep    <span class="comment">#è¾“å‡ºå½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦ï¼Œwinä¸‹ä¸º"\r\n",Linuxä¸‹ä¸º"\n"</span></span><br><span class="line">os.pathsep    <span class="comment">#è¾“å‡ºç”¨äºåˆ†å‰²æ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸² winä¸‹ä¸º;,Linuxä¸‹ä¸º:</span></span><br><span class="line">os.name       <span class="comment">#è¾“å‡ºå­—ç¬¦ä¸²æŒ‡ç¤ºå½“å‰ä½¿ç”¨å¹³å°ã€‚win-&gt;'nt'; Linux-&gt;'posix'</span></span><br><span class="line">os.curdir     <span class="comment">#è¿”å›å½“å‰ç›®å½•:"."</span></span><br><span class="line">os.pardir     <span class="comment">#è·å–å½“å‰ç›®å½•çš„çˆ¶ç›®å½•å­—ç¬¦ä¸²å:".."</span></span><br><span class="line">os.path       <span class="comment">#è·å–ç¯å¢ƒå˜é‡</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">os.getcwd() <span class="comment">#è·å–å·¥ä½œç›®å½• å³å½“å‰pythonè„šæœ¬å·¥ä½œçš„ç›®å½•è·¯å¾„</span></span><br><span class="line">os.chdir(<span class="string">"dirname"</span>) <span class="comment">#æ”¹ç‰ˆå½“å‰è„šæœ¬å·¥ä½œç›®å½• ç›¸å½“äºcd</span></span><br><span class="line">os.makedirs(<span class="string">'dirname1/dirname2'</span>)    <span class="comment">#å¯ç”Ÿæˆå¤šå±‚é€’å½’ç›®å½•</span></span><br><span class="line">os.removedirs(<span class="string">'dirname1'</span>)    <span class="comment">#è‹¥ç›®å½•ä¸ºç©ºï¼Œåˆ™åˆ é™¤ï¼Œå¹¶é€’å½’åˆ°ä¸Šä¸€çº§ç›®å½•ï¼Œå¦‚è‹¥ä¹Ÿä¸ºç©ºï¼Œåˆ™åˆ é™¤ï¼Œä¾æ­¤ç±»æ¨</span></span><br><span class="line">os.mkdir(<span class="string">'dirname'</span>)    <span class="comment">#ç”Ÿæˆå•çº§ç›®å½•ï¼›ç›¸å½“äºshellä¸­mkdir dirname</span></span><br><span class="line">os.rmdir(<span class="string">'dirname'</span>)    <span class="comment">#åˆ é™¤å•çº§ç©ºç›®å½•ï¼Œè‹¥ç›®å½•ä¸ä¸ºç©ºåˆ™æ— æ³•åˆ é™¤ï¼ŒæŠ¥é”™ï¼›ç›¸å½“äºshellä¸­rmdir dirname</span></span><br><span class="line">os.listdir(<span class="string">'dirname'</span>)    <span class="comment">#åˆ—å‡ºæŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ï¼Œå¹¶ä»¥åˆ—è¡¨æ–¹å¼æ‰“å°</span></span><br><span class="line">os.remove()  <span class="comment">#åˆ é™¤ä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">os.rename(<span class="string">"oldname"</span>,<span class="string">"newname"</span>)  <span class="comment">#é‡å‘½åæ–‡ä»¶/ç›®å½•</span></span><br><span class="line">os.stat(<span class="string">'path/filename'</span>)  <span class="comment">#è·å–æ–‡ä»¶/ç›®å½•ä¿¡æ¯</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">	st_mode: inode ä¿æŠ¤æ¨¡å¼</span></span><br><span class="line"><span class="string">	st_ino: inode èŠ‚ç‚¹å·ã€‚</span></span><br><span class="line"><span class="string">	st_dev: inode é©»ç•™çš„è®¾å¤‡ã€‚</span></span><br><span class="line"><span class="string">	st_nlink: inode çš„é“¾æ¥æ•°ã€‚</span></span><br><span class="line"><span class="string">	st_uid: æ‰€æœ‰è€…çš„ç”¨æˆ·IDã€‚</span></span><br><span class="line"><span class="string">	st_gid: æ‰€æœ‰è€…çš„ç»„IDã€‚</span></span><br><span class="line"><span class="string">	st_size: æ™®é€šæ–‡ä»¶ä»¥å­—èŠ‚ä¸ºå•ä½çš„å¤§å°ï¼›åŒ…å«ç­‰å¾…æŸäº›ç‰¹æ®Šæ–‡ä»¶çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="string">	st_atime: ä¸Šæ¬¡è®¿é—®çš„æ—¶é—´ã€‚</span></span><br><span class="line"><span class="string">	st_mtime: æœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ã€‚</span></span><br><span class="line"><span class="string">	st_ctime: ç”±æ“ä½œç³»ç»ŸæŠ¥å‘Šçš„"ctime"ã€‚åœ¨æŸäº›ç³»ç»Ÿä¸Šï¼ˆå¦‚Unixï¼‰æ˜¯æœ€æ–°çš„å…ƒæ•°æ®æ›´æ”¹çš„æ—¶é—´ï¼Œ</span></span><br><span class="line"><span class="string">			åœ¨å…¶å®ƒç³»ç»Ÿä¸Šï¼ˆå¦‚Windowsï¼‰æ˜¯åˆ›å»ºæ—¶é—´ï¼ˆè¯¦ç»†ä¿¡æ¯å‚è§å¹³å°çš„æ–‡æ¡£ï¼‰ã€‚</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">os.system(<span class="string">"bash command"</span>)  <span class="comment">#è¿è¡Œshellå‘½ä»¤ï¼Œç›´æ¥æ˜¾ç¤º</span></span><br><span class="line">os.popen(<span class="string">"bash command"</span>).read()  <span class="comment">#è¿è¡Œshellå‘½ä»¤ï¼Œè·å–æ‰§è¡Œç»“æœ</span></span><br><span class="line">os.getpid() <span class="comment">#è·å–å½“å‰è¿›ç¨‹PID</span></span><br><span class="line">os.getppid() <span class="comment">#è·å–çˆ¶è¿›ç¨‹PID</span></span><br><span class="line">os.chdir(<span class="string">"dirname"</span>)  <span class="comment">#æ”¹å˜å½“å‰è„šæœ¬å·¥ä½œç›®å½•ï¼›ç›¸å½“äºshellä¸‹cd</span></span><br><span class="line">os.path.abspath(path) <span class="comment">#è¿”å›pathè§„èŒƒåŒ–çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">os.path.split(path) <span class="comment">#å°†pathåˆ†å‰²æˆç›®å½•å’Œæ–‡ä»¶åäºŒå…ƒç»„è¿”å› </span></span><br><span class="line">os.path.dirname(path) <span class="comment">#è¿”å›pathçš„ç›®å½•ã€‚å…¶å®å°±æ˜¯os.path.split(path)[0]</span></span><br><span class="line">os.path.basename(path) <span class="comment">#è¿”å›pathæœ€åçš„æ–‡ä»¶åã€‚å³os.path.split(path)[1]</span></span><br><span class="line">os.path.exists(path)  <span class="comment">#å¦‚æœpathå­˜åœ¨ï¼Œè¿”å›Trueï¼›å¦‚æœpathä¸å­˜åœ¨ï¼Œè¿”å›False</span></span><br><span class="line">os.path.isabs(path)  <span class="comment">#å¦‚æœpathæ˜¯ç»å¯¹è·¯å¾„ï¼Œè¿”å›True</span></span><br><span class="line">os.path.isfile(path)  <span class="comment">#å¦‚æœpathæ˜¯ä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶ï¼Œè¿”å›Trueã€‚å¦åˆ™è¿”å›False</span></span><br><span class="line">os.path.isdir(path)  <span class="comment">#å¦‚æœpathæ˜¯ä¸€ä¸ªå­˜åœ¨çš„ç›®å½•ï¼Œåˆ™è¿”å›Trueã€‚å¦åˆ™è¿”å›False</span></span><br><span class="line">os.path.join(path1[, path2[, ...]])  <span class="comment">#å°†å¤šä¸ªè·¯å¾„ç»„åˆåè¿”å›ï¼Œç¬¬ä¸€ä¸ªç»å¯¹è·¯å¾„ä¹‹å‰çš„å‚æ•°å°†è¢«å¿½ç•¥</span></span><br><span class="line">os.path.getatime(path)  <span class="comment">#è¿”å›pathæ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„æœ€åè®¿é—®æ—¶é—´</span></span><br><span class="line">os.path.getmtime(path)  <span class="comment">#è¿”å›pathæ‰€æŒ‡å‘çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„æœ€åä¿®æ”¹æ—¶é—´</span></span><br><span class="line">os.path.getsize(path) <span class="comment">#è¿”å›pathçš„å¤§å° æ–‡ä»¶å¤¹å›ºå®š4096ä¸å‡†ç¡®</span></span><br></pre></td></tr></table></figure></div>

<p>å…³äº<strong>file</strong>çš„ä½¿ç”¨</p>
<p>ä¸è¦ç›´æ¥ä½¿ç”¨<code>__file__</code>ï¼Œå› ä¸ºå®ƒåœ¨shellã€IDLEã€Pycharmä¸­çš„è¡¨ç¤ºå½¢å¼å„ä¸ç›¸åŒã€‚</p>
<p>å¯ä»¥ä»¥<code>os.path.abspath(__file__)</code>çš„æ–¹å¼æ¥ä½¿ç”¨</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œç‰¹åˆ«æ˜¯GUIç¨‹åºï¼Œ<code>os.popen</code>å‡½æ•°ä¸æ¨èä½¿ç”¨ï¼Œè€Œæ¨èä½¿ç”¨subprocessæ¨¡å—çš„<code>popen</code></p>
<h3 id="subprocessæ¨¡å—"><a href="#subprocessæ¨¡å—" class="headerlink" title="subprocessæ¨¡å—"></a>subprocessæ¨¡å—</h3><p>subprocessæ¨¡å—æ˜¯åœ¨python2.4ç‰ˆæœ¬ä¸­æ–°å¢çš„ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æè¿°ä¸ºå¯ä»¥ç”¨æ¥æ›¿æ¢ä»¥ä¸‹å‡½æ•°ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AUTOHOTKEY"><figure class="iseeu highlight /autohotkey"><table><tr><td class="code"><pre><span class="line">os.system`ã€`os.spawn`ã€`os.popen`ã€`popen2</span><br></pre></td></tr></table></figure></div>

<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>subprocess.run()</td>
<td>Python 3.5ä¸­æ–°å¢çš„å‡½æ•°ã€‚æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œç­‰å¾…å‘½ä»¤æ‰§è¡Œå®Œæˆåè¿”å›ä¸€ä¸ªåŒ…å«æ‰§è¡Œç»“æœçš„CompletedProcessç±»çš„å®ä¾‹ã€‚</td>
</tr>
<tr>
<td>subprocess.call()</td>
<td>æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œè¿”å›å‘½ä»¤æ‰§è¡ŒçŠ¶æ€ï¼Œå…¶åŠŸèƒ½ç±»ä¼¼äºos.system(cmd)ã€‚</td>
</tr>
<tr>
<td>subprocess.check_call()</td>
<td>Python 2.5ä¸­æ–°å¢çš„å‡½æ•°ã€‚ æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸåˆ™è¿”å›çŠ¶æ€ç ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚å…¶åŠŸèƒ½ç­‰ä»·äºsubprocess.run(â€¦, check=True)ã€‚</td>
</tr>
<tr>
<td>subprocess.check_output()</td>
<td>Python 2.7ä¸­æ–°å¢çš„çš„å‡½æ•°ã€‚æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œå¦‚æœæ‰§è¡ŒçŠ¶æ€ç ä¸º0åˆ™è¿”å›å‘½ä»¤æ‰§è¡Œç»“æœï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</td>
</tr>
<tr>
<td>subprocess.getoutput(cmd)</td>
<td>æ¥æ”¶å­—ç¬¦ä¸²æ ¼å¼çš„å‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤å¹¶è¿”å›æ‰§è¡Œç»“æœï¼Œå…¶åŠŸèƒ½ç±»ä¼¼äºos.popen(cmd).read()å’Œcommands.getoutput(cmd)ã€‚</td>
</tr>
<tr>
<td>subprocess.getstatusoutput(cmd)</td>
<td>æ‰§è¡Œcmdå‘½ä»¤ï¼Œè¿”å›ä¸€ä¸ªå…ƒç»„(å‘½ä»¤æ‰§è¡ŒçŠ¶æ€, å‘½ä»¤æ‰§è¡Œç»“æœè¾“å‡º)ï¼Œå…¶åŠŸèƒ½ç±»ä¼¼äºcommands.getstatusoutput()ã€‚</td>
</tr>
</tbody></table>
<h4 id="æ¨¡å—æ–¹æ³•è¯´æ˜"><a href="#æ¨¡å—æ–¹æ³•è¯´æ˜" class="headerlink" title="æ¨¡å—æ–¹æ³•è¯´æ˜"></a>æ¨¡å—æ–¹æ³•è¯´æ˜</h4><ol>
<li>åœ¨Python 3.5ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æå€¡é€šè¿‡<code>subprocess.run()</code>å‡½æ•°æ›¿ä»£å…¶ä»–å‡½æ•°æ¥ä½¿ç”¨subproccessæ¨¡å—çš„åŠŸèƒ½ï¼›</li>
<li>åœ¨Python 3.5ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>subprocess.call()</code>ï¼Œ<code>subprocess.getoutput()</code>ç­‰ä¸Šé¢åˆ—å‡ºçš„å…¶ä»–å‡½æ•°æ¥ä½¿ç”¨subprocessæ¨¡å—çš„åŠŸèƒ½ï¼›</li>
<li><code>subprocess.run()</code>ã€<code>subprocess.call()</code>ã€<code>subprocess.check_call()</code>å’Œ<code>subprocess.check_output()</code>éƒ½æ˜¯é€šè¿‡å¯¹<code>subprocess.Popen</code>çš„å°è£…æ¥å®ç°çš„é«˜çº§å‡½æ•°ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬éœ€è¦æ›´å¤æ‚åŠŸèƒ½æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>subprocess.Popen</code>æ¥å®Œæˆã€‚</li>
<li><code>subprocess.getoutput()</code>å’Œ<code>subprocess.getstatusoutput()</code>å‡½æ•°æ˜¯æ¥è‡ªPython 2.xçš„commandsæ¨¡å—çš„ä¸¤ä¸ªé—ç•™å‡½æ•°ã€‚å®ƒä»¬éšå¼çš„è°ƒç”¨ç³»ç»Ÿshellï¼Œå¹¶ä¸”ä¸ä¿è¯å…¶ä»–å‡½æ•°æ‰€å…·æœ‰çš„å®‰å…¨æ€§å’Œå¼‚å¸¸å¤„ç†çš„ä¸€è‡´æ€§ã€‚å¦å¤–ï¼Œå®ƒä»¬ä»Python 3.3.4å¼€å§‹æ‰æ”¯æŒWindowså¹³å°ã€‚</li>
</ol>
<p>subprocessæ¨¡å—ç›®çš„æ˜¯<strong>å¯åŠ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹å¹¶ä¸ä¹‹é€šä¿¡</strong>ï¼Œæœ€å¸¸ç”¨æ˜¯å®šä¹‰ç±»<code>Popen</code>ï¼Œ<br>ä½¿ç”¨<code>Popen</code>å¯ä»¥åˆ›å»ºè¿›ç¨‹ï¼Œå¹¶ä¸è¿›ç¨‹è¿›è¡Œå¤æ‚çš„äº¤äº’ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = subprocess.Popen(<span class="string">'dir'</span>, stdout=subprocess.PIPE, shell=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(p.stdout.read())</span><br></pre></td></tr></table></figure></div>

<h4 id="Popenç±»å‚æ•°è¯´æ˜"><a href="#Popenç±»å‚æ•°è¯´æ˜" class="headerlink" title="Popenç±»å‚æ•°è¯´æ˜"></a><code>Popen</code>ç±»å‚æ•°è¯´æ˜</h4><ul>
<li>args è¦æ‰§è¡Œçš„shellå‘½ä»¤ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å‘½ä»¤å„ä¸ªå‚æ•°ç»„æˆçš„åºåˆ—ã€‚</li>
<li>bufsize æŒ‡å®šç¼“å­˜ç­–ç•¥ï¼Œ0ä¸ç¼“å†²ï¼Œ1è¡Œç¼“å†²ï¼Œå¤§äº1è¡¨ç¤ºç¼“å†²åŒºå¤§å°ï¼Œè´Ÿæ•°è¡¨ç¤ºç³»ç»Ÿé»˜è®¤ã€‚</li>
<li>stdin, stdout, stderr ç¨‹åºæ ‡å‡†è¾“å…¥ã€è¾“å‡ºã€é”™è¯¯å¥æŸ„ã€‚</li>
<li>preexec_fn æŒ‡å®šä¸€ä¸ªå°†åœ¨å­è¿›ç¨‹è¿è¡Œä¹‹å‰è¢«è°ƒç”¨çš„å¯æ‰§è¡Œå¯¹è±¡ï¼Œåªåœ¨Unixå¹³å°ä¸‹æœ‰æ•ˆã€‚</li>
<li>close_fds é™¤äº†0,1å’Œ2ä¹‹å¤–çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ æ˜¯å¦åœ¨å­è¿›ç¨‹æ‰§è¡Œä¹‹å‰å…³é—­ã€‚</li>
<li>shell æ˜¯å¦ä½¿ç”¨shellä½œä¸ºè¦æ‰§è¡Œçš„ç¨‹åºï¼ŒTrueæ—¶å»ºè®®argså‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</li>
<li>cwd å¦‚æœè¯¥å‚æ•°å€¼ä¸æ˜¯Noneï¼Œåˆ™è¯¥å‡½æ•°å°†ä¼šåœ¨æ‰§è¡Œè¿™ä¸ªå­è¿›ç¨‹ä¹‹å‰æ”¹å˜å½“å‰å·¥ä½œç›®å½•ã€‚</li>
<li>env ç”¨äºæŒ‡å®šå­è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ï¼Œé»˜è®¤ä»çˆ¶è¿›ç¨‹ä¸­ç»§æ‰¿ã€‚</li>
<li>universal_newlines æ˜¯å¦å°†stdinï¼Œstdoutå’Œstderrä½œä¸ºæ–‡æœ¬æµæ‰“å¼€</li>
<li>startupinfoå’Œcreationflags è¿™ä¸¤ä¸ªå‚æ•°åªåœ¨Windowsä¸‹æœ‰æ•ˆï¼Œå®ƒä»¬å°†è¢«ä¼ é€’ç»™åº•å±‚çš„CreateProcess()å‡½æ•°ï¼Œç”¨äºè®¾ç½®å­è¿›ç¨‹çš„ä¸€äº›å±æ€§ï¼Œå¦‚ä¸»çª—å£çš„å¤–è§‚ï¼Œè¿›ç¨‹ä¼˜å…ˆçº§ç­‰ã€‚</li>
</ul>
<p>ä½¿ç”¨pythonè°ƒç”¨cmdä¸­çš„pythonæ‰“å°helloworldï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>obj = subprocess.Popen([<span class="string">"python"</span>], </span><br><span class="line">                           stdin=subprocess.PIPE, </span><br><span class="line">                           stdout=subprocess.PIPE, </span><br><span class="line">                           stderr=subprocess.PIPE)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>out,err = obj.communicate(input=<span class="string">'print("helloworldï¼") \n'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(out)</span><br><span class="line">helloworldï¼</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(err)</span><br></pre></td></tr></table></figure></div>

<h4 id="Popenç±»æ–¹æ³•è¯´æ˜"><a href="#Popenç±»æ–¹æ³•è¯´æ˜" class="headerlink" title="Popenç±»æ–¹æ³•è¯´æ˜"></a><code>Popen</code>ç±»æ–¹æ³•è¯´æ˜</h4><table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>Popen.poll()</td>
<td>ç”¨äºæ£€æŸ¥å­è¿›ç¨‹ï¼ˆå‘½ä»¤ï¼‰æ˜¯å¦å·²ç»æ‰§è¡Œç»“æŸï¼Œæ²¡ç»“æŸè¿”å›Noneï¼Œç»“æŸåè¿”å›çŠ¶æ€ç ã€‚</td>
</tr>
<tr>
<td>Popen.wait(timeout=None)</td>
<td>ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œå¹¶è¿”å›çŠ¶æ€ç ï¼›å¦‚æœåœ¨timeoutæŒ‡å®šçš„ç§’æ•°ä¹‹åè¿›ç¨‹è¿˜æ²¡æœ‰ç»“æŸï¼Œå°†ä¼šæŠ›å‡ºä¸€ä¸ªTimeoutExpiredå¼‚å¸¸ã€‚</td>
</tr>
<tr>
<td>Popen.communicate(input=None, timeout=None)</td>
<td>è¯¥æ–¹æ³•å¯ç”¨æ¥ä¸è¿›ç¨‹è¿›è¡Œäº¤äº’ï¼Œæ¯”å¦‚å‘é€æ•°æ®åˆ°stdinï¼Œä»stdoutå’Œstderrè¯»å–æ•°æ®ï¼Œç›´åˆ°åˆ°è¾¾æ–‡ä»¶æœ«å°¾ã€‚</td>
</tr>
<tr>
<td>Popen.send_signal(signal)</td>
<td>å‘é€æŒ‡å®šçš„ä¿¡å·ç»™è¿™ä¸ªå­è¿›ç¨‹ã€‚</td>
</tr>
<tr>
<td>Popen.terminate()</td>
<td>åœæ­¢è¯¥å­è¿›ç¨‹ã€‚</td>
</tr>
<tr>
<td>Popen.kill()</td>
<td>æ€æ­»è¯¥å­è¿›ç¨‹ã€‚</td>
</tr>
</tbody></table>
<p>å…¶å®ä¾‹åŒ–å¯¹è±¡å¯ä»¥ç”¨<code>.wait()</code>æ–¹æ³•æ¥ç­‰è¿”å›ç»“æœï¼Œå¦åˆ™ä¸ä¼šé˜»å¡ã€‚</p>
<p>è®¾å®šä¸€å°æ—¶åå…³æœº</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = subprocess.Popen(<span class="string">"shutdown -s -t 3600"</span>, shell=<span class="literal">True</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s.wait()<span class="comment">#é˜»å¡è¿›ç¨‹ç­‰å¾…shellå‘½ä»¤æ‰§è¡Œå®Œæ¯•</span></span><br></pre></td></tr></table></figure></div>

<p>å­è¿›ç¨‹ï¼šã€æ‹’ç»è®¿é—®ã€‚(5)ã€‘çš„æ¨èè§£å†³åŠæ³•</p>
<p>è¿è¡Œgpedit.mscï¼šè®¡ç®—æœºé…ç½®â€”â€“&gt;windowsè®¾ç½®â€”â€“&gt;å®‰å…¨è®¾ç½®â€”â€“&gt;æœ¬åœ°ç­–ç•¥â€”â€“&gt;å®‰å…¨é€‰é¡¹â€”â€“&gt;ç”¨æˆ·å¸æˆ·æ§åˆ¶ï¼šç”¨äºå†…ç½®ç®¡ç†å‘˜å¸æˆ·çš„ç®¡ç†å‘˜æ‰¹å‡†æ¨¡å¼â€”â€“&gt;ç¦ç”¨</p>
<p>å®¶åº­ç‰ˆï¼šã€æ‰¾ä¸åˆ°gpedit.mscã€‘çš„æ¨èè§£å†³åŠæ³•</p>
<p>ä½¿ç”¨DISMå‘½ä»¤ï¼šéƒ¨ç½²æ˜ åƒæœåŠ¡å’Œç®¡ç†å·¥å…·ï¼Œwin10å®¶åº­ç‰ˆæ‰¹å¤„ç†å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">pushd</span> <span class="string">"%~dp0"</span></span><br><span class="line">dir /b C:\Windows\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientExtensions-Package~3*.mum &gt;List.txt</span><br><span class="line">dir /b C:\Windows\servicing\Packages\Microsoft-Windows-GroupPolicy-ClientTools-Package~3*.mum &gt;&gt;List.txt</span><br><span class="line"><span class="keyword">for</span> /f %%i <span class="keyword">in</span> (<span class="string">'findstr /i . List.txt 2^&gt;nul'</span>) <span class="keyword">do</span> dism /online /norestart /add-package:<span class="string">"C:\Windows\servicing\Packages\%%i"</span></span><br><span class="line">pause</span><br></pre></td></tr></table></figure></div>

<p>è´¦æˆ·è·å–ç®¡ç†å‘˜æƒé™</p>
<p>å®¶åº­ç‰ˆç­‰Administratorè´¦æˆ·æ˜¯é»˜è®¤éšè—å’Œå…³é—­çš„ï¼Œ<br>ä¸è¦ä½¿ç”¨å‘½ä»¤<code>net user administrator /active:yes</code>å»å¼€å¯<br>åº”è¯¥è¿è¡Œnetplwizå»ä¿®æ”¹ç»„ï¼ˆé‡å¯ï¼‰</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰å)</title>
    <url>/blog/Python/Python_id_48.html</url>
    <content><![CDATA[<h2 id="æ•°å­¦æœ‰å…³æ¨¡å—"><a href="#æ•°å­¦æœ‰å…³æ¨¡å—" class="headerlink" title="æ•°å­¦æœ‰å…³æ¨¡å—"></a>æ•°å­¦æœ‰å…³æ¨¡å—</h2><h3 id="randomæ¨¡å—"><a href="#randomæ¨¡å—" class="headerlink" title="randomæ¨¡å—"></a>randomæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/random.html" target="_blank" rel="noopener"><code>random</code></a>æ¨¡å—å®ç°äº†å„ç§åˆ†å¸ƒçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> random</span><br><span class="line"><span class="comment">#éšæœºå°æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.random()      <span class="comment"># å¤§äº0ä¸”å°äº1ä¹‹é—´çš„å°æ•°</span></span><br><span class="line"><span class="number">0.7664338663654585</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.uniform(<span class="number">1</span>,<span class="number">3</span>) <span class="comment">#å¤§äº1å°äº3çš„å°æ•°</span></span><br><span class="line"><span class="number">1.6270147180533838</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#éšæœºæ•´æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randint(<span class="number">1</span>,<span class="number">5</span>)  <span class="comment"># å¤§äºç­‰äº1ä¸”å°äºç­‰äº5ä¹‹é—´çš„æ•´æ•° å·¦é—­å³é—­</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.randrange(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>) <span class="comment"># å¤§äºç­‰äº1ä¸”å°äº10ä¹‹é—´çš„å¥‡æ•° å·¦é—­å³å¼€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#éšæœºé€‰æ‹©ä¸€ä¸ªè¿”å›</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.choice([<span class="number">1</span>,<span class="string">'23'</span>,[<span class="number">4</span>,<span class="number">5</span>]])  <span class="comment"># #1æˆ–è€…23æˆ–è€…[4,5]</span></span><br><span class="line"><span class="comment">#éšæœºé€‰æ‹©å¤šä¸ªè¿”å›ï¼Œè¿”å›çš„ä¸ªæ•°ä¸ºå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.sample([<span class="number">1</span>,<span class="string">'23'</span>,[<span class="number">4</span>,<span class="number">5</span>]],<span class="number">2</span>) <span class="comment"># #åˆ—è¡¨å…ƒç´ ä»»æ„2ä¸ªç»„åˆ</span></span><br><span class="line">[[<span class="number">4</span>, <span class="number">5</span>], <span class="string">'23'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“ä¹±åˆ—è¡¨é¡ºåº</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item=[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(item) <span class="comment"># æ‰“ä¹±æ¬¡åº</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">[<span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>random.shuffle(item)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>item</span><br><span class="line">[<span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure></div>

<h3 id="decimalæ¨¡å—"><a href="#decimalæ¨¡å—" class="headerlink" title="decimalæ¨¡å—"></a>decimalæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/decimal.html" target="_blank" rel="noopener"><code>decimal</code></a>æ¨¡å—æä¾›åè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œå¹¶èƒ½ç•Œå®šç²¾åº¦ï¼Œç”±æ•°å­—çš„å­—é¢é‡ç²¾å‡†ç”Ÿæˆã€‚</p>
<h4 id="è®¡ç®—"><a href="#è®¡ç®—" class="headerlink" title="è®¡ç®—"></a>è®¡ç®—</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.2</span></span><br><span class="line"><span class="number">0.30000000000000004</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> decimal <span class="keyword">import</span> *</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'0.1'</span>) + Decimal(<span class="string">'0.2'</span>)</span><br><span class="line">Decimal(<span class="string">'0.3'</span>)</span><br></pre></td></tr></table></figure></div>

<p>è¿ç®—ç¬¦%</p>
<p>å’Œæ™®é€šæµ®ç‚¹è¿ç®—ç•¥æœ‰åŒºåˆ«ï¼ŒDecimalå¯¹è±¡æ˜¯å–ä½™è¿ç®—è€Œä¸æ˜¯å–æ¨¡è¿ç®—</p>
<p>ä½¿ç”¨æ•°å­—å­—é¢é‡å¯ä»¥ç²¾å‡†ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥ä»æ•°å­—ç”Ÿæˆï¼Œå¹¶æ¥å›è½¬æ¢</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="number">0.3</span>)</span><br><span class="line">Decimal(<span class="string">'0.299999999999999988897769753748434595763683319091796875'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal.from_float(<span class="number">0.3</span>) <span class="comment">#ä½ç‰ˆæœ¬pythonç”¨</span></span><br><span class="line">Decimal(<span class="string">'0.299999999999999988897769753748434595763683319091796875'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(Decimal(<span class="number">0.3</span>))</span><br><span class="line"><span class="string">'0.299999999999999988897769753748434595763683319091796875'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>float(Decimal(<span class="number">0.3</span>))</span><br><span class="line"><span class="number">0.3</span></span><br></pre></td></tr></table></figure></div>

<p>å…¶ä»–è¿ç®—æ–¹æ³•ï¼š</p>
<ul>
<li><code>.sqrt()</code> å¹³æ–¹æ ¹</li>
<li><code>.exp()</code> æŒ‡æ•°</li>
<li><code>.ln()</code> è‡ªç„¶å¯¹æ•°</li>
<li><code>.log10()</code> 10 ä¸ºåº•çš„å¯¹æ•°</li>
</ul>
<h4 id="ç²¾åº¦ç•Œå®š"><a href="#ç²¾åº¦ç•Œå®š" class="headerlink" title="ç²¾åº¦ç•Œå®š"></a>ç²¾åº¦ç•Œå®š</h4><p><code>getcontext().prec</code>è®¾ç½®æœ‰æ•ˆæ•°å­—ï¼Œé»˜è®¤æœ‰æ•ˆæ•°å­—ä¸º28ä½</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>getcontext().prec = <span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="number">1</span>) / Decimal(<span class="number">7</span>)</span><br><span class="line">Decimal(<span class="string">'0.142857'</span>)</span><br></pre></td></tr></table></figure></div>

<p><code>getcontext().rounding</code>è®¾ç½®å–èˆæ–¹å¼ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_CEILING" target="_blank" rel="noopener"><code>ROUND_CEILING</code></a> å‘Infinityå–èˆ</li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_DOWN" target="_blank" rel="noopener"><code>ROUND_DOWN</code></a> å‘0å–èˆ</li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_FLOOR" target="_blank" rel="noopener"><code>ROUND_FLOOR</code></a> å‘-Infinityå–èˆ</li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_HALF_DOWN" target="_blank" rel="noopener"><code>ROUND_HALF_DOWN</code></a> åŠæ—¶å‘0å–èˆ</li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_HALF_EVEN" target="_blank" rel="noopener"><code>ROUND_HALF_EVEN</code></a> äº”èˆå…­å…¥ ç›¸å½“äºå†…ç½®å‡½æ•°<code>round()</code></li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_HALF_UP" target="_blank" rel="noopener"><code>ROUND_HALF_UP</code></a> åŠæ—¶å‘0åæ–¹å‘å–èˆ</li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_UP" target="_blank" rel="noopener"><code>ROUND_UP</code></a> å‘0åæ–¹å‘å–èˆ</li>
<li><a href="https://docs.python.org/zh-cn/3/library/decimal.html#decimal.ROUND_05UP" target="_blank" rel="noopener"><code>ROUND_05UP</code></a> ç•Œå®šåæ˜¯05åˆ™æ˜¯10 å¦åˆ™æ˜¯00</li>
</ul>
<p><code>.quantize()</code>èˆå…¥ä¸ºå›ºå®šæŒ‡æ•°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'7.325'</span>).quantize(Decimal(<span class="string">'.01'</span>), rounding=ROUND_DOWN)</span><br><span class="line">Decimal(<span class="string">'7.32'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Decimal(<span class="string">'7.325'</span>).quantize(Decimal(<span class="string">'1.'</span>), rounding=ROUND_UP)</span><br><span class="line">Decimal(<span class="string">'8'</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="mathæ¨¡å—å’Œcmathæ¨¡å—"><a href="#mathæ¨¡å—å’Œcmathæ¨¡å—" class="headerlink" title="mathæ¨¡å—å’Œcmathæ¨¡å—"></a>mathæ¨¡å—å’Œcmathæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/math.html" target="_blank" rel="noopener"><code>math</code></a>æ¨¡å—æä¾›äº†å¯¹Cæ ‡å‡†å®šä¹‰çš„æ•°å­¦å‡½æ•°çš„è®¿é—®ï¼Œä¸é€‚ç”¨äºå¤æ•°ã€‚</p>
<p>å¦‚æœæƒ³å¾—åˆ°å¤æ•°ç»“æœè¯·ä½¿ç”¨<a href="https://docs.python.org/zh-cn/3/library/cmath.html" target="_blank" rel="noopener">cmath</a>æ¨¡å—çš„åŒåæ–¹æ³•</p>
<h4 id="å¸¸ç”¨æ•°å­¦å¸¸æ•°"><a href="#å¸¸ç”¨æ•°å­¦å¸¸æ•°" class="headerlink" title="å¸¸ç”¨æ•°å­¦å¸¸æ•°"></a>å¸¸ç”¨æ•°å­¦å¸¸æ•°</h4><ul>
<li><em>pi</em> åœ†å‘¨ç‡</li>
<li><em>e</em> è‡ªç„¶å¯¹æ•°åº•æ•°</li>
</ul>
<h4 id="å¸¸ç”¨æ•°å­¦å‡½æ•°"><a href="#å¸¸ç”¨æ•°å­¦å‡½æ•°" class="headerlink" title="å¸¸ç”¨æ•°å­¦å‡½æ•°"></a>å¸¸ç”¨æ•°å­¦å‡½æ•°</h4><ul>
<li><code>gcd</code>(<em>a</em>, <em>b</em>) æœ€å¤§å…¬çº¦æ•°</li>
<li><code>factorial</code>(<em>x</em>) é˜¶ä¹˜</li>
<li><code>sqrt</code>(<em>x</em>) å¼€å¹³æ–¹</li>
<li><code>log</code>(<em>x</em>[, <em>base</em>]) å¯¹æ•°</li>
<li><code>pow</code>(<em>x</em>, <em>y</em>) æŒ‡æ•°</li>
<li><code>cos</code>(<em>x</em>) ä¸‰è§’</li>
<li><code>asin</code>(<em>x</em>) åä¸‰è§’</li>
<li><code>degrees</code>(<em>x</em>) <code>radians</code>(<em>x</em>) è§’åº¦å¼§åº¦è½¬åŒ–</li>
<li><code>ceil</code>(<em>x</em>) <code>floor</code>(<em>x</em>) ä¸Šä¸‹å–æ•´</li>
</ul>
<p><code>canonical</code>(<em>x</em>) è¿”å›ç›¸åŒçš„ Decimal å¯¹è±¡ <em>x</em></p>
<h3 id="statisticsæ¨¡å—"><a href="#statisticsæ¨¡å—" class="headerlink" title="statisticsæ¨¡å—"></a>statisticsæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/statistics.html" target="_blank" rel="noopener"><code>statistics</code></a>æ¨¡å—ç”¨äºæ•°ç†ç»Ÿè®¡ï¼Œå®ƒä¸»è¦æä¾›äº†ä¸€ä¸ªæ­£æ€åˆ†å¸ƒç±» <a href="https://docs.python.org/zh-cn/3/library/statistics.html#statistics.NormalDist" target="_blank" rel="noopener"><code>NormalDist</code></a></p>
<h4 id="å¸¸ç”¨ç»Ÿè®¡å‡½æ•°"><a href="#å¸¸ç”¨ç»Ÿè®¡å‡½æ•°" class="headerlink" title="å¸¸ç”¨ç»Ÿè®¡å‡½æ•°"></a>å¸¸ç”¨ç»Ÿè®¡å‡½æ•°</h4><ul>
<li><code>mean()</code> <code>fmean()</code> ç®—æœ¯å¹³å‡æ•° æµ®ç‚¹æ•°çš„ç®—æ•°å¹³å‡æ•°</li>
<li><code>median()</code> <code>median_low()</code> <code>median_high()</code> ä¸­ä½æ•° ä½ä¸­ä½ é«˜ä¸­ä½æ•°</li>
<li><code>geometric_mean()</code> <code>harmonic_mean()</code> å‡ ä½•å¹³å‡æ•° è°ƒå’Œå¹³å‡æ•°</li>
<li><code>stdev()</code> <code>variance()</code> æ ‡å‡†å·® æ–¹å·®</li>
</ul>
<h3 id="NumPyæ¨¡å—"><a href="#NumPyæ¨¡å—" class="headerlink" title="NumPyæ¨¡å—"></a>NumPyæ¨¡å—</h3><p>ç¬¬ä¸‰æ–¹æ¨¡å—<a href="https://www.numpy.org.cn/alopecia/#é¢„é˜²è„±å‘é£Ÿç‰©" target="_blank" rel="noopener"><code>NumPy</code></a>æ˜¯ä½¿ç”¨Pythonè¿›è¡Œç§‘å­¦è®¡ç®—çš„åŸºç¡€åŒ…ã€‚é™¤äº†æ•°å­¦å‡½æ•°ï¼Œéšæœºæ•°å®ƒåŒ…å«å¦‚ä¸‹çš„å†…å®¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªå¼ºå¤§çš„Nç»´æ•°ç»„å¯¹è±¡<code>.ndarray</code></li>
<li>å¤æ‚çš„ï¼ˆå¹¿æ’­ï¼‰åŠŸèƒ½<code>.ufunc</code></li>
<li>ç”¨äºé›†æˆC / C ++å’ŒFortranä»£ç çš„å·¥å…·</li>
<li>æœ‰ç”¨çš„çº¿æ€§ä»£æ•°<code>.linalg</code>ï¼Œå‚…é‡Œå¶å˜æ¢<code>.fft</code></li>
</ul>
<p>é™¤äº†æ˜æ˜¾çš„ç§‘å­¦ç”¨é€”å¤–ï¼ŒNumPyè¿˜å¯ä»¥ç”¨ä½œé€šç”¨æ•°æ®çš„é«˜æ•ˆå¤šç»´å®¹å™¨ã€‚å¯ä»¥å®šä¹‰ä»»æ„æ•°æ®ç±»å‹ã€‚è¿™ä½¿NumPyèƒ½å¤Ÿæ— ç¼å¿«é€Ÿåœ°ä¸å„ç§æ•°æ®åº“é›†æˆã€‚</p>
<h4 id="ç»˜åˆ¶ä¸Šå¸æŒ‡çº¹"><a href="#ç»˜åˆ¶ä¸Šå¸æŒ‡çº¹" class="headerlink" title="ç»˜åˆ¶ä¸Šå¸æŒ‡çº¹"></a>ç»˜åˆ¶ä¸Šå¸æŒ‡çº¹</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mandelbrot</span><span class="params">(w, h=None, maxit=<span class="number">20</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Returns an image of the Mandelbrot fractal of size (h,w)."""</span></span><br><span class="line">    <span class="keyword">if</span> h <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        h = w</span><br><span class="line">    y, x = np.ogrid[<span class="number">-3</span>/<span class="number">2</span>:<span class="number">3</span>/<span class="number">2</span>:h * <span class="number">1j</span>, <span class="number">-15</span>/<span class="number">8</span>:<span class="number">9</span>/<span class="number">8</span>:w * <span class="number">1j</span>]  <span class="comment">#ç•Œå®šçš„å¤å¹³é¢åæ ‡ç³»çš„æ¨ªçºµè½´</span></span><br><span class="line">    c = x + y * <span class="number">1j</span>  <span class="comment">#ç•Œå®šçš„å¤å¹³é¢åæ ‡ç³»çŸ©é˜µ</span></span><br><span class="line">    divtime = maxit + np.zeros(c.shape, dtype=int)  <span class="comment">#åˆå§‹åŒ–çš„æƒé‡çŸ©é˜µ = è½®æ•°+é›¶çŸ©é˜µ</span></span><br><span class="line">    z = c  <span class="comment">#åˆå§‹åŒ–çš„ç”¨äºè¿­ä»£çš„å¤å¹³é¢åæ ‡ç³»çŸ©é˜µz</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(maxit):</span><br><span class="line">        z = z**<span class="number">2</span> + c  <span class="comment">#mandelbroté›†åˆè¿­ä»£å…¬å¼</span></span><br><span class="line">        diverge = z * np.conj(z) &gt; <span class="number">2</span>**<span class="number">2</span>  <span class="comment">#è®¡ç®—æœ¬è½®å‘æ•£çš„å¸ƒå°”ç´¢å¼•</span></span><br><span class="line">        div_now = diverge &amp; (divtime == maxit)  <span class="comment">#è®¡ç®—æ¯”ä¸Šè½®æ–°å¢çš„å¸ƒå°”ç´¢å¼•</span></span><br><span class="line">        divtime[div_now] = i  <span class="comment">#ä¸ºæ–°å¢çš„å‘æ•£è®¾ç½®æƒé‡</span></span><br><span class="line">        z[diverge] = <span class="number">2</span>  <span class="comment">#ä¸ºå‘æ•£ç‚¹çš„å€¼èµ‹å€¼ ç®€åŒ–åç»­è¿ç®—</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">            è¿™ä¸ªå€¼è¦å¤§äºæ ¹å·2 å¦‚æœä¸èµ‹å€¼ åç»­å¾ªç¯ä¸­å°†ä¼šæº¢å‡º</span></span><br><span class="line"><span class="string">            RuntimeWarning: overflow encountered in multiply</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">    <span class="keyword">return</span> divtime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">w = int(input(<span class="string">"è¾“å…¥åƒç´ å€¼"</span>))</span><br><span class="line">plt.imshow(mandelbrot(w))</span><br><span class="line"></span><br><span class="line">ax = plt.gca()</span><br><span class="line">ax.grid(<span class="literal">True</span>, linestyle=<span class="string">'-.'</span>)</span><br><span class="line">plt.yticks(np.mgrid[<span class="number">0</span>:w:<span class="number">9j</span>], np.mgrid[<span class="number">3</span>/<span class="number">2</span>:<span class="number">-3</span>/<span class="number">2</span>:<span class="number">9j</span>])</span><br><span class="line">plt.xticks(np.mgrid[<span class="number">0</span>:w:<span class="number">9j</span>], np.mgrid[<span class="number">-9</span>/<span class="number">4</span>:<span class="number">3</span>/<span class="number">4</span>:<span class="number">9j</span>])</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_position((<span class="string">'data'</span>, <span class="number">1</span> / <span class="number">2</span> * w))</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_position((<span class="string">'data'</span>, <span class="number">3</span> / <span class="number">4</span> * w))</span><br><span class="line">ax.spines[<span class="string">'bottom'</span>].set_color(<span class="string">'white'</span>)</span><br><span class="line">ax.spines[<span class="string">'left'</span>].set_color(<span class="string">'white'</span>)</span><br><span class="line">plt.tick_params(axis=<span class="string">'x'</span>, colors=<span class="string">'white'</span>)</span><br><span class="line">plt.tick_params(axis=<span class="string">'y'</span>, colors=<span class="string">'white'</span>)</span><br><span class="line">plt.savefig(<span class="string">'./mandelbrot.png'</span>, format=<span class="string">'png'</span>, transparent=<span class="literal">True</span>,</span><br><span class="line">            dpi=<span class="number">300</span>, pad_inches = <span class="number">0</span> ,bbox_inches = <span class="string">'tight'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div>

<p>æ•ˆæœå›¾</p>
<p><img src="/fcg22450.github.io/img/python_img/%E4%B8%8A%E5%B8%9D%E6%8C%87%E7%BA%B9.jpg" alt="ä¸Šå¸æŒ‡çº¹"></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåå…«)</title>
    <url>/blog/Python/Python_id_46.html</url>
    <content><![CDATA[<h2 id="æ­£åˆ™æœ‰å…³æ¨¡å—"><a href="#æ­£åˆ™æœ‰å…³æ¨¡å—" class="headerlink" title="æ­£åˆ™æœ‰å…³æ¨¡å—"></a>æ­£åˆ™æœ‰å…³æ¨¡å—</h2><p>æœ¬ç¯‡ä¸ä¼šè¿‡å¤šä»‹ç»æ­£åˆ™è¡¨è¾¾å¼å†…å®¹ï¼Œå¯å‚è€ƒjsç¯‡çš„æ­£åˆ™å¯¹è±¡ç« èŠ‚ã€‚</p>
<h3 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><a id="more"></a>

<p>pythonä¸æ”¯æŒä¸å®šé•¿çš„åè¡Œæ–­è¨€ï¼ˆé€†åºç¯è§†ï¼‰</p>
<p>error: look-behind requires fixed-width pattern</p>
<blockquote>
<p>æ­£åˆ™å°±æ˜¯ç”¨ä¸€äº›å…·æœ‰ç‰¹æ®Šå«ä¹‰çš„ç¬¦å·ç»„åˆåˆ°ä¸€èµ·ï¼ˆç§°ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼‰æ¥æè¿°å­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚æˆ–è€…è¯´ï¼šæ­£åˆ™å°±æ˜¯ç”¨æ¥æè¿°ä¸€ç±»äº‹ç‰©çš„è§„åˆ™ã€‚ï¼ˆåœ¨Pythonä¸­ï¼‰å®ƒå†…åµŒåœ¨Pythonä¸­ï¼Œå¹¶é€šè¿‡ re æ¨¡å—å®ç°ã€‚æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼è¢«ç¼–è¯‘æˆä¸€ç³»åˆ—çš„å­—èŠ‚ç ï¼Œç„¶åç”±ç”¨ C ç¼–å†™çš„åŒ¹é…å¼•æ“æ‰§è¡Œã€‚</p>
</blockquote>
<table>
<thead>
<tr>
<th>æ­£åˆ™è¡¨è¾¾å¼</th>
<th>ç±»å‹</th>
<th>åŒ¹é…å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td><code>.</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td><code>\w</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿ï¼Œå¤§å†™å³éæ•°å­—å­—æ¯ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…ä»»æ„çš„ç©ºç™½ç¬¦ï¼Œå¤§å†™å³éç©ºå­—ç¬¦</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…æ•°å­—ï¼Œå¤§å†™å³éæ•°å­—</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œä¹Ÿå±äº<code>\s</code></td>
</tr>
<tr>
<td><code>\t</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼Œä¹Ÿå±äº<code>\s</code></td>
</tr>
<tr>
<td><code>\b</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…ä¸€ä¸ªå•è¯çš„è¾¹ç•Œ</td>
</tr>
<tr>
<td><code>^</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹</td>
</tr>
<tr>
<td><code>$</code></td>
<td>å…ƒå­—ç¬¦</td>
<td>åŒ¹é…å­—ç¬¦ä¸²çš„ç»“å°¾</td>
</tr>
<tr>
<td>`a</td>
<td>b`</td>
<td>é€»è¾‘</td>
</tr>
<tr>
<td><code>(...)</code></td>
<td>åˆ†ç»„</td>
<td>åŒ¹é…æ‹¬å·å†…çš„ç»„ï¼Œæ•è·</td>
</tr>
<tr>
<td><code>(?:...)</code></td>
<td>åˆ†ç»„</td>
<td>åŒ¹é…æ‹¬å·å†…çš„ç»„ï¼Œä¸æ•è·</td>
</tr>
<tr>
<td><code>(?...)</code></td>
<td>å‘½ååˆ†ç»„</td>
<td>åŒ¹é…æ‹¬å·å†…çš„ç»„ï¼Œæ•è·å¹¶å‘½åï¼ˆpythonæ”¯æŒï¼‰</td>
</tr>
<tr>
<td><code>(?&gt;...)</code></td>
<td>å›ºåŒ–åˆ†ç»„</td>
<td>åŒ¹é…è¿‡ç¨‹ä¸­ä¸äº¤è¿˜æ‹¬å·å†…çš„ç»„ï¼ˆpythonä¸æ”¯æŒï¼‰</td>
</tr>
<tr>
<td><code>[...]</code></td>
<td>å­—ç¬¦é›†</td>
<td>åŒ¹é…å­—ç¬¦ç»„ä¸­çš„å­—ç¬¦</td>
</tr>
<tr>
<td><code>[^...]</code></td>
<td>å­—ç¬¦é›†</td>
<td>åŒ¹é…é™¤äº†å­—ç¬¦ç»„ä¸­å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦</td>
</tr>
<tr>
<td><code>*</code></td>
<td>é‡è¯</td>
<td>è´ªå©ªåŒ¹é…ï¼Œé‡å¤é›¶æ¬¡æˆ–æ›´å¤šæ¬¡</td>
</tr>
<tr>
<td><code>+</code></td>
<td>é‡è¯</td>
<td>è´ªå©ªåŒ¹é…ï¼Œé‡å¤ä¸€æ¬¡æˆ–æ›´å¤šæ¬¡</td>
</tr>
<tr>
<td><code>?</code></td>
<td>é‡è¯</td>
<td>è´ªå©ªåŒ¹é…ï¼Œé‡å¤é›¶æ¬¡æˆ–ä¸€æ¬¡</td>
</tr>
<tr>
<td><code>{n}</code></td>
<td>é‡è¯</td>
<td>é‡å¤næ¬¡</td>
</tr>
<tr>
<td><code>{n,}</code></td>
<td>é‡è¯</td>
<td>é‡å¤næ¬¡æˆ–æ›´å¤šæ¬¡</td>
</tr>
<tr>
<td><code>{n,m}</code></td>
<td>é‡è¯</td>
<td>é‡å¤nåˆ°mæ¬¡</td>
</tr>
<tr>
<td><code>(?=pattern)</code></td>
<td>æ–­è¨€</td>
<td>åé¢æœ‰ï¼Œæ–­è¨€ä¹Ÿå«ç¯è§†look-behind</td>
</tr>
<tr>
<td><code>(?!pattern)</code></td>
<td>æ–­è¨€</td>
<td>åé¢æ²¡æœ‰</td>
</tr>
<tr>
<td><code>(?&lt;=pattern)</code></td>
<td>æ–­è¨€</td>
<td>å‰é¢æœ‰ï¼ˆpythonä¸æ”¯æŒä¸å®šé•¿é€†åºç¯è§†ï¼‰</td>
</tr>
<tr>
<td>`(?</td>
<td>æ–­è¨€</td>
<td>å‰é¢æ²¡æœ‰ï¼ˆpythonä¸æ”¯æŒä¸å®šé•¿é€†åºç¯è§†ï¼‰</td>
</tr>
</tbody></table>
<p>æ³¨æ„</p>
<ul>
<li>pythonä¸­æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸æ˜¯çœŸå®å­—ç¬¦ä¸²ï¼Œéœ€è¦äºŒé‡è½¬ä¹‰ï¼Œæ¨èä½¿ç”¨çœŸå®å­—ç¬¦ä¸²(<code>r&quot;&quot;</code>)</li>
<li>è´ªå©ªåŒ¹é…ä¼šå°½å¯èƒ½åŒ¹é…ï¼Œåé¢åŠ ?å·ä½¿å…¶å˜æˆæƒ°æ€§åŒ¹é…ï¼ŒåŒ¹é…å°½å¯èƒ½å°‘çš„ã€‚</li>
<li>æ–­è¨€ï¼ˆç¯è§†ï¼‰çš„æ‹¬å·ä¸­çš„åŒ¹é…åˆ°çš„å†…å®¹åªä¼šç”¨æ¥åˆ¤æ–­ä¸ä¼šè¢«æ­£åˆ™è¡¨è¾¾å¼æ•è·ã€‚</li>
</ul>
<h3 id="å¸¸ç”¨èŒƒå›´"><a href="#å¸¸ç”¨èŒƒå›´" class="headerlink" title="å¸¸ç”¨èŒƒå›´"></a>å¸¸ç”¨èŒƒå›´</h3><table>
<thead>
<tr>
<th>æ­£åˆ™</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><code>[0-9]</code></td>
<td>å’Œ<code>[0123456789]</code>å’Œ<code>\d</code>æ˜¯ä¸€ä¸ªæ„æ€</td>
</tr>
<tr>
<td><code>[a-z]+</code></td>
<td>ä¸å®šé•¿çš„å°å†™å­—æ¯ï¼Œå°½å¯èƒ½å¤šï¼Œä¸€ä¸ªä»¥ä¸Š</td>
</tr>
<tr>
<td><code>[A-Z]*?</code></td>
<td>ä¸å®šé•¿çš„å¤§å†™å­—æ¯ï¼Œå°½å¯èƒ½å°‘ï¼Œå¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰</td>
</tr>
<tr>
<td><code>[0-9a-fA-F]</code></td>
<td>åå…­è¿›åˆ¶å­—ç¬¦</td>
</tr>
<tr>
<td>`^.*(?=.jpg$</td>
<td>.png)`</td>
</tr>
<tr>
<td><code>^(?!-).*</code></td>
<td>ä¸ä»¥<code>-</code>å¼€å¤´çš„è¡Œï¼ˆ<code>re.M</code>æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td><code>[a-z0-9_\.-]{3,15}@[a-z]{2,5}\.[a-z]{2,6}</code></td>
<td>Email</td>
</tr>
</tbody></table>
<h3 id="reæ¨¡å—"><a href="#reæ¨¡å—" class="headerlink" title="reæ¨¡å—"></a>reæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/re.html" target="_blank" rel="noopener"><code>re</code></a>æ¨¡å—æä¾›äº†ä¸ Perl è¯­è¨€ç±»ä¼¼çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ“ä½œ</p>
<p>æœ€å¸¸ç”¨æ–¹æ³•</p>
<ul>
<li><code>re.findall(r,txt)</code> æŸ¥æ‰¾æ‰€æœ‰æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç»“æœ,æ”¾åœ¨åˆ—è¡¨é‡Œ</li>
<li><code>re.match(r,txt)</code> åŒ¹é…ç¬¬ä¸€ä¸ªç„¶åè¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…ä¿¡æ¯çš„å¯¹è±¡</li>
<li><code>re.sub(r,s,txt)</code> å°†æ‰€æœ‰æ»¡è¶³åŒ¹é…æ¡ä»¶çš„æ›¿æ¢æˆå­—ç¬¦ä¸²s</li>
</ul>
<h4 id="æ¨¡å¼flags"><a href="#æ¨¡å¼flags" class="headerlink" title="æ¨¡å¼flags"></a>æ¨¡å¼<code>flags</code></h4><p>ä¸åŒæ¨¡å¼ä¸»è¦ä¼šæ”¹å˜<code>^</code>å’Œ<code>$</code>çš„åŒ¹é…è¡Œä¸º</p>
<ul>
<li><code>None</code> é¦–è¡Œæ¨¡å¼ï¼Œé»˜è®¤çš„</li>
<li><code>re.S</code> / <code>re.DOTALL</code>å•è¡Œæ¨¡å¼ï¼Œæ•´ä¸ªæ–‡æœ¬çœ‹æˆä»¥æ¢è¡Œç¬¦è¿æ¥åœ¨ä¸€èµ·çš„ä¸€è¡Œ</li>
<li><code>re.M</code> / <code>re.MULTILINE</code> å¤šè¡Œæ¨¡å¼ï¼Œæ¯ä¸€è¡Œéƒ½æœ‰å¼€å¤´å’Œç»“å°¾</li>
<li><code>re.I</code> å¿½ç•¥å¤§å°å†™æ¨¡å¼</li>
</ul>
<p>å¤šæ¨¡å¼å¯ä»¥ç›´æ¥ç›¸åŠ </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">s = <span class="string">'''few.JPG</span></span><br><span class="line"><span class="string">oij.png</span></span><br><span class="line"><span class="string">ade.jpg</span></span><br><span class="line"><span class="string">ade.jpg.rename</span></span><br><span class="line"><span class="string">ytr.GIF</span></span><br><span class="line"><span class="string">pow.PNG'''</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">r'^.*(?=\.jpg$|\.png)'</span>, s, re.M+re.I)</span><br><span class="line">[<span class="string">'few'</span>, <span class="string">'oij'</span>, <span class="string">'ade'</span>, <span class="string">'pow'</span>]</span><br></pre></td></tr></table></figure></div>

<h4 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„(...)"></a>åˆ†ç»„<code>(...)</code></h4><p>åˆ†ç»„åœ¨æŸç§ç¨‹åº¦ä¸Šå®Œå…¨å¯ä»¥ä»£æ›¿æ–­è¨€çš„åŠŸèƒ½ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.findall(<span class="string">'(.*?)_sb'</span>, <span class="string">'alex_sb wusir_sb æ—¥å¤©_sb'</span>)</span><br><span class="line">[<span class="string">'alex'</span>, <span class="string">'wusir'</span>, <span class="string">'æ—¥å¤©'</span>]</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>HTML = <span class="string">'&lt;a href="http://www.baidu.com"&gt;ç‚¹å‡»&lt;/a&gt;'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(re.findall(<span class="string">'href="(.*?)"'</span>, HTML))</span><br><span class="line">[<span class="string">'http://www.baidu.com'</span>]</span><br></pre></td></tr></table></figure></div>

<p>åˆ†ç»„<code>()</code>ä¸­åŠ å…¥<code>?:</code> è¡¨ç¤ºæ•´ä½“ï¼Œè€Œä¸æ˜¯åªé’ˆå¯¹æ€§æ•è·<code>()</code>é‡Œé¢çš„å†…å®¹ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">'www.(baidu|oldboy).com'</span>, <span class="string">'www.oldboy.com'</span>)</span><br><span class="line">print(ret)  <span class="comment"># ['oldboy']è¿™æ˜¯å› ä¸ºfindallä¼šä¼˜å…ˆæŠŠåŒ¹é…ç»“æœç»„é‡Œå†…å®¹è¿”å›,å¦‚æœæƒ³è¦åŒ¹é…ç»“æœ,å–æ¶ˆæƒé™å³å¯</span></span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">'www.(?:baidu|oldboy).com'</span>, <span class="string">'www.oldboy.com'</span>)</span><br><span class="line">print(ret)  <span class="comment"># ['www.oldboy.com']</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¸¸ç”¨æ–¹æ³•ç”¨ä¾‹"><a href="#å¸¸ç”¨æ–¹æ³•ç”¨ä¾‹" class="headerlink" title="å¸¸ç”¨æ–¹æ³•ç”¨ä¾‹"></a>å¸¸ç”¨æ–¹æ³•ç”¨ä¾‹</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">ret = re.findall(<span class="string">'a'</span>, <span class="string">'eva egon yuan'</span>)  <span class="comment"># è¿”å›æ‰€æœ‰æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç»“æœ,æ”¾åœ¨åˆ—è¡¨é‡Œ</span></span><br><span class="line">print(ret) <span class="comment">#ç»“æœ : ['a', 'a']</span></span><br><span class="line"></span><br><span class="line">ret = re.search(<span class="string">'a'</span>, <span class="string">'eva egon yuan'</span>).group()</span><br><span class="line">print(ret) <span class="comment">#ç»“æœ : 'a'</span></span><br><span class="line"><span class="comment"># å‡½æ•°ä¼šåœ¨å­—ç¬¦ä¸²å†…æŸ¥æ‰¾æ¨¡å¼åŒ¹é…,åªåˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ç„¶åè¿”å›ä¸€ä¸ªåŒ…å«åŒ¹é…ä¿¡æ¯çš„å¯¹è±¡,è¯¥å¯¹è±¡å¯ä»¥</span></span><br><span class="line"><span class="comment"># é€šè¿‡è°ƒç”¨group()æ–¹æ³•å¾—åˆ°åŒ¹é…çš„å­—ç¬¦ä¸²,å¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›Noneã€‚</span></span><br><span class="line"></span><br><span class="line">ret = re.match(<span class="string">'a'</span>, <span class="string">'abc'</span>).group()  <span class="comment"># åŒsearch,ä¸è¿‡å°½åœ¨å­—ç¬¦ä¸²å¼€å§‹å¤„è¿›è¡ŒåŒ¹é…</span></span><br><span class="line">print(ret) <span class="comment">#ç»“æœ : 'a'</span></span><br><span class="line"></span><br><span class="line">ret = re.split(<span class="string">'[ab]'</span>, <span class="string">'abcd'</span>)  <span class="comment"># å…ˆæŒ‰'a'åˆ†å‰²å¾—åˆ°''å’Œ'bcd',åœ¨å¯¹''å’Œ'bcd'åˆ†åˆ«æŒ‰'b'åˆ†å‰²</span></span><br><span class="line">print(ret)  <span class="comment"># ['', '', 'cd']</span></span><br><span class="line"></span><br><span class="line">ret = re.sub(<span class="string">'\d'</span>, <span class="string">'H'</span>, <span class="string">'eva3egon4yuan4'</span>, <span class="number">1</span>)<span class="comment">#å°†æ•°å­—æ›¿æ¢æˆ'H'ï¼Œå‚æ•°1è¡¨ç¤ºåªæ›¿æ¢1ä¸ª</span></span><br><span class="line">print(ret) <span class="comment">#evaHegon4yuan4</span></span><br><span class="line"></span><br><span class="line">ret = re.subn(<span class="string">'\d'</span>, <span class="string">'H'</span>, <span class="string">'eva3egon4yuan4'</span>)<span class="comment">#å°†æ•°å­—æ›¿æ¢æˆ'H'ï¼Œè¿”å›å…ƒç»„(æ›¿æ¢çš„ç»“æœ,æ›¿æ¢äº†å¤šå°‘æ¬¡)</span></span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line">obj = re.compile(<span class="string">'\d&#123;3&#125;'</span>)  <span class="comment">#å°†æ­£åˆ™è¡¨è¾¾å¼ç¼–è¯‘æˆä¸ºä¸€ä¸ª æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œè§„åˆ™è¦åŒ¹é…çš„æ˜¯3ä¸ªæ•°å­—</span></span><br><span class="line">ret = obj.search(<span class="string">'abc123eeee'</span>) <span class="comment">#æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡è°ƒç”¨searchï¼Œå‚æ•°ä¸ºå¾…åŒ¹é…çš„å­—ç¬¦ä¸²</span></span><br><span class="line">print(ret.group())  <span class="comment">#ç»“æœ ï¼š 123</span></span><br><span class="line"></span><br><span class="line">ret = re.finditer(<span class="string">'\d'</span>, <span class="string">'ds3sy4784a'</span>)   <span class="comment">#finditerè¿”å›ä¸€ä¸ªå­˜æ”¾åŒ¹é…ç»“æœçš„è¿­ä»£å™¨</span></span><br><span class="line">print(next(ret).group())  <span class="comment">#æŸ¥çœ‹ç¬¬ä¸€ä¸ªç»“æœ</span></span><br><span class="line">print(next(ret).group())  <span class="comment">#æŸ¥çœ‹ç¬¬äºŒä¸ªç»“æœ</span></span><br><span class="line">print([i.group() <span class="keyword">for</span> i <span class="keyword">in</span> ret])  <span class="comment">#æŸ¥çœ‹å‰©ä½™çš„å·¦å³ç»“æœ</span></span><br></pre></td></tr></table></figure></div>

<h5 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h5><ul>
<li>å¤šè¡Œæ¨¡å¼(<code>MULTILINE</code>)ä¸­<code>match()</code>åªåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹ï¼Œä½†<code>search()</code>å’Œä»¥ <code>&#39;^&#39;</code> å¼€å¤´çš„æ­£åˆ™ä¼šæ¯è¡ŒåŒ¹é…</li>
<li><code>split()</code>çš„ä¼˜å…ˆçº§æŸ¥è¯¢</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ret=re.split(<span class="string">"\d+"</span>,<span class="string">"eva3egon4yuan"</span>)</span><br><span class="line">print(ret) <span class="comment">#ç»“æœ ï¼š ['eva', 'egon', 'yuan']</span></span><br><span class="line"></span><br><span class="line">ret=re.split(<span class="string">"(\d+)"</span>,<span class="string">"eva3egon4yuan"</span>)</span><br><span class="line">print(ret) <span class="comment">#ç»“æœ ï¼š ['eva', '3', 'egon', '4', 'yuan']</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨åŒ¹é…éƒ¨åˆ†åŠ ä¸Š<code>()</code>ä¹‹åæ‰€åˆ‡å‡ºçš„ç»“æœæ˜¯ä¸åŒçš„ï¼Œ æ²¡æœ‰<code>()</code>çš„æ²¡æœ‰ä¿ç•™æ‰€åŒ¹é…çš„é¡¹ï¼Œä½†æ˜¯æœ‰<code>()</code>çš„å´èƒ½å¤Ÿä¿ç•™äº†åŒ¹é…çš„é¡¹ï¼Œ è¿™ä¸ªåœ¨æŸäº›éœ€è¦ä¿ç•™åŒ¹é…éƒ¨åˆ†çš„ä½¿ç”¨è¿‡ç¨‹æ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<ul>
<li><code>.sub()</code>æ›¿æ¢æ—¶å¯ä»¥æ¥å—å‡½æ•°ï¼ˆè¿™åŒæ—¶æ˜¯ä¸€ä¸ªå‘½ååˆ†ç»„çš„ä¾‹å­ï¼‰</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>size = <span class="string">'height165weight21deep213'</span> <span class="comment">#è¦æ±‚æ‰€æœ‰æ•°å­—å†…å®¹éƒ½åŠ 5</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>re.sub(<span class="string">r'(?P&lt;num&gt;\d+)'</span>, <span class="keyword">lambda</span> x:str(int(x.group(<span class="string">"num"</span>))+<span class="number">5</span>), size)</span><br><span class="line"><span class="string">'height170weight26deep218'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="regexæ¨¡å—"><a href="#regexæ¨¡å—" class="headerlink" title="regexæ¨¡å—"></a>regexæ¨¡å—</h3><p>Pythonè‡ªå¸¦äº†æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼ˆå†…ç½®çš„reæ¨¡å—ï¼‰ï¼Œä½†æ˜¯ä¸æ”¯æŒä¸€äº›é«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å‡ ä¸ªï¼š</p>
<ul>
<li>å›ºåŒ–åˆ†ç»„ Atomic grouping</li>
<li>å æœ‰ä¼˜å…ˆé‡è¯ Possessive quantifiers</li>
<li>å¯å˜é•¿åº¦çš„é€†åºç¯è§† Variable-length lookbehind</li>
<li>é€’å½’åŒ¹é… Recursive patterns</li>
<li>ï¼ˆèµ·å§‹/ç»§ç»­ï¼‰ä½ç½®é”š\G Search anchor</li>
</ul>
<p>ç¬¬ä¸‰æ–¹æ¨¡å—regexå®ç°äº†å¦‚ä¸Šé«˜çº§ç‰¹æ•ˆï¼Œä¸”APIä¸reæ¨¡å—ä¸€è‡´ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåä¹)</title>
    <url>/blog/Python/Python_id_47.html</url>
    <content><![CDATA[<h2 id="æ—¶é—´æœ‰å…³æ¨¡å—"><a href="#æ—¶é—´æœ‰å…³æ¨¡å—" class="headerlink" title="æ—¶é—´æœ‰å…³æ¨¡å—"></a>æ—¶é—´æœ‰å…³æ¨¡å—</h2><h3 id="timeitæ¨¡å—"><a href="#timeitæ¨¡å—" class="headerlink" title="timeitæ¨¡å—"></a>timeitæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/timeit.html" target="_blank" rel="noopener"><code>timeit</code></a>æ¨¡å—æä¾›ç®€å•çš„æ–¹æ³•æ¥è®¡ç®—ä¸€å°æ®µ Python ä»£ç çš„è€—æ—¶ã€‚ç®€å•ä½¿ç”¨å¦‚ä¸‹</p>
<p><code>timeit.timeit(eval/lambda, number=10000)</code> è¿è¡Œ10000æ¬¡ä¸­çš„æœ€å¿«ç”¨æ—¶</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line">print(timeit.timeit(<span class="string">'test()'</span>, globals=globals()))</span><br></pre></td></tr></table></figure></div>

<h3 id="timeæ¨¡å—"><a href="#timeæ¨¡å—" class="headerlink" title="timeæ¨¡å—"></a>timeæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/time.html" target="_blank" rel="noopener"><code>time</code></a>æ¨¡å—æä¾›äº†å„ç§æ—¶é—´ç›¸å…³çš„åº•å±‚å‡½æ•°ã€‚æœ€å¸¸ç”¨æ–¹æ³•æœ‰ï¼š</p>
<ul>
<li><code>time.sleep()</code> çº¿ç¨‹ç¡çœ ï¼Œæ¥æ”¶æµ®ç‚¹ç§’æ•°ã€‚</li>
<li><code>time.time()</code> æˆ³ä¸€ä¸ªæ—¶é—´ã€‚</li>
</ul>
<h4 id="æ ¼å¼è½¬æ¢"><a href="#æ ¼å¼è½¬æ¢" class="headerlink" title="æ ¼å¼è½¬æ¢"></a>æ ¼å¼è½¬æ¢</h4><p>åœ¨Pythonä¸­ï¼Œé€šå¸¸æœ‰è¿™ä¸‰ç§æ–¹å¼æ¥è¡¨ç¤ºæ—¶é—´</p>
<ul>
<li>æ—¶é—´å…ƒç»„(struct_time)</li>
<li>æ—¶é—´æˆ³(timestamp)</li>
<li>æ ¼å¼åŒ–æ—¶é—´(Format String)</li>
</ul>
<h5 id="æ—¶é—´æˆ³-timestamp"><a href="#æ—¶é—´æˆ³-timestamp" class="headerlink" title="æ—¶é—´æˆ³(timestamp)"></a>æ—¶é—´æˆ³(timestamp)</h5><p>å½¢å¦‚ï¼š<code>1588218207.4545252</code></p>
<p>é€šå¸¸æ¥è¯´ï¼Œæ—¶é—´æˆ³è¡¨ç¤ºçš„æ˜¯ä»1970å¹´1æœˆ1æ—¥00:00:00å¼€å§‹æŒ‰ç§’è®¡ç®—çš„åç§»é‡ã€‚</p>
<p>æˆ‘ä»¬è¿è¡Œ<code>time.time()</code>ï¼Œè¿”å›çš„æ˜¯å½“å‰æ—¶é—´æˆ³ï¼Œæ˜¯floatç±»å‹ã€‚</p>
<h5 id="æ ¼å¼åŒ–æ—¶é—´-Format-String"><a href="#æ ¼å¼åŒ–æ—¶é—´-Format-String" class="headerlink" title="æ ¼å¼åŒ–æ—¶é—´(Format String)"></a>æ ¼å¼åŒ–æ—¶é—´(Format String)</h5><p>å½¢å¦‚ï¼š<code>&#39;2017-07-24 13:54:37&#39;</code></p>
<p>è¿è¡Œ<code>time.strftime(&quot;%Y-%m-%d %H-%M-%S&quot;)</code>ï¼Œè¿”å›å½“å‰æ ¼å¼åŒ–æ—¶é—´ï¼Œå‚æ•°ä¸­å®ƒæ”¯æŒä»¥ä¸‹æŒ‡ä»¤</p>
<table>
<thead>
<tr>
<th align="left">æŒ‡ä»¤</th>
<th align="left">æ„ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>%a</code></td>
<td align="left">æœ¬åœ°åŒ–çš„ç¼©å†™æ˜ŸæœŸä¸­æ¯æ—¥çš„åç§°ã€‚</td>
</tr>
<tr>
<td align="left"><code>%A</code></td>
<td align="left">æœ¬åœ°åŒ–çš„æ˜ŸæœŸä¸­æ¯æ—¥çš„å®Œæ•´åç§°ã€‚</td>
</tr>
<tr>
<td align="left"><code>%b</code></td>
<td align="left">æœ¬åœ°åŒ–çš„æœˆç¼©å†™åç§°ã€‚</td>
</tr>
<tr>
<td align="left"><code>%B</code></td>
<td align="left">æœ¬åœ°åŒ–çš„æœˆå®Œæ•´åç§°ã€‚</td>
</tr>
<tr>
<td align="left"><code>%c</code></td>
<td align="left">æœ¬åœ°åŒ–çš„é€‚å½“æ—¥æœŸå’Œæ—¶é—´è¡¨ç¤ºã€‚</td>
</tr>
<tr>
<td align="left"><code>%d</code></td>
<td align="left">åè¿›åˆ¶æ•° [01,31] è¡¨ç¤ºçš„æœˆä¸­æ—¥ã€‚</td>
</tr>
<tr>
<td align="left"><code>%H</code></td>
<td align="left">åè¿›åˆ¶æ•° [00,23] è¡¨ç¤ºçš„å°æ—¶ï¼ˆ24å°æ—¶åˆ¶ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left"><code>%I</code></td>
<td align="left">åè¿›åˆ¶æ•° [01,12] è¡¨ç¤ºçš„å°æ—¶ï¼ˆ12å°æ—¶åˆ¶ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left"><code>%j</code></td>
<td align="left">åè¿›åˆ¶æ•° [001,366] è¡¨ç¤ºçš„å¹´ä¸­æ—¥ã€‚</td>
</tr>
<tr>
<td align="left"><code>%m</code></td>
<td align="left">åè¿›åˆ¶æ•° [01,12] è¡¨ç¤ºçš„æœˆã€‚</td>
</tr>
<tr>
<td align="left"><code>%M</code></td>
<td align="left">åè¿›åˆ¶æ•° [00,59] è¡¨ç¤ºçš„åˆ†é’Ÿã€‚</td>
</tr>
<tr>
<td align="left"><code>%p</code></td>
<td align="left">æœ¬åœ°åŒ–çš„ AM æˆ– PM ã€‚</td>
</tr>
<tr>
<td align="left"><code>%S</code></td>
<td align="left">åè¿›åˆ¶æ•° [00,61] è¡¨ç¤ºçš„ç§’ã€‚</td>
</tr>
<tr>
<td align="left"><code>%U</code></td>
<td align="left">åè¿›åˆ¶æ•° [00,53] è¡¨ç¤ºçš„ä¸€å¹´ä¸­çš„å‘¨æ•°ï¼ˆæ˜ŸæœŸæ—¥ä½œä¸ºä¸€å‘¨çš„ç¬¬ä¸€å¤©ï¼‰ã€‚åœ¨ç¬¬ä¸€ä¸ªæ˜ŸæœŸæ—¥ä¹‹å‰çš„æ–°å¹´ä¸­çš„æ‰€æœ‰æ—¥å­éƒ½è¢«è®¤ä¸ºæ˜¯åœ¨ç¬¬0å‘¨ã€‚</td>
</tr>
<tr>
<td align="left"><code>%w</code></td>
<td align="left">åè¿›åˆ¶æ•° [0(<strong>æ˜ŸæœŸæ—¥</strong>),6] è¡¨ç¤ºçš„å‘¨ä¸­æ—¥ã€‚</td>
</tr>
<tr>
<td align="left"><code>%W</code></td>
<td align="left">åè¿›åˆ¶æ•° [00,53] è¡¨ç¤ºçš„ä¸€å¹´ä¸­çš„å‘¨æ•°ï¼ˆæ˜ŸæœŸä¸€ä½œä¸ºä¸€å‘¨çš„ç¬¬ä¸€å¤©ï¼‰ã€‚åœ¨ç¬¬ä¸€ä¸ªæ˜ŸæœŸä¸€ä¹‹å‰çš„æ–°å¹´ä¸­çš„æ‰€æœ‰æ—¥å­è¢«è®¤ä¸ºæ˜¯åœ¨ç¬¬0å‘¨ã€‚</td>
</tr>
<tr>
<td align="left"><code>%x</code></td>
<td align="left">æœ¬åœ°åŒ–çš„é€‚å½“æ—¥æœŸè¡¨ç¤ºã€‚</td>
</tr>
<tr>
<td align="left"><code>%X</code></td>
<td align="left">æœ¬åœ°åŒ–çš„é€‚å½“æ—¶é—´è¡¨ç¤ºã€‚</td>
</tr>
<tr>
<td align="left"><code>%y</code></td>
<td align="left">åè¿›åˆ¶æ•° [00,99] è¡¨ç¤ºçš„æ²¡æœ‰ä¸–çºªçš„å¹´ä»½ã€‚</td>
</tr>
<tr>
<td align="left"><code>%Y</code></td>
<td align="left">åè¿›åˆ¶æ•°è¡¨ç¤ºçš„å¸¦ä¸–çºªçš„å¹´ä»½ã€‚</td>
</tr>
<tr>
<td align="left"><code>%z</code></td>
<td align="left">æ—¶åŒºåç§»ä»¥æ ¼å¼ +HHMM æˆ– -HHMM å½¢å¼çš„ UTC/GMT çš„æ­£æˆ–è´Ÿæ—¶å·®æŒ‡ç¤ºï¼Œå…¶ä¸­Hè¡¨ç¤ºåè¿›åˆ¶å°æ—¶æ•°å­—ï¼ŒMè¡¨ç¤ºå°æ•°åˆ†é’Ÿæ•°å­— [-23:59, +23:59] ã€‚</td>
</tr>
<tr>
<td align="left"><code>%Z</code></td>
<td align="left">æ—¶åŒºåç§°ï¼ˆå¦‚æœä¸å­˜åœ¨æ—¶åŒºï¼Œåˆ™ä¸åŒ…å«å­—ç¬¦ï¼‰ã€‚</td>
</tr>
<tr>
<td align="left"><code>%%</code></td>
<td align="left">å­—é¢çš„ <code>&#39;%&#39;</code> å­—ç¬¦ã€‚</td>
</tr>
</tbody></table>
<h5 id="struct-time"><a href="#struct-time" class="headerlink" title="struct_time"></a>struct_time</h5><p>struct_timeå…ƒç»„å…±æœ‰9ä¸ªå…ƒç´ å…±ä¹ä¸ªå…ƒç´ :(å¹´ï¼Œæœˆï¼Œæ—¥ï¼Œæ—¶ï¼Œåˆ†ï¼Œç§’ï¼Œä¸€å¹´ä¸­ç¬¬å‡ å‘¨ï¼Œä¸€å¹´ä¸­ç¬¬å‡ å¤©ç­‰ï¼‰</p>
<table>
<thead>
<tr>
<th>ç´¢å¼•ï¼ˆIndexï¼‰</th>
<th>å±æ€§ï¼ˆAttributeï¼‰</th>
<th>å€¼ï¼ˆValuesï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>tm_zone</td>
<td>æ—¶åŒºåç§°çš„ç¼©å†™</td>
</tr>
<tr>
<td>.</td>
<td>tm_gmtoff</td>
<td>ä»¥ç§’ä¸ºå•ä½çš„UTCä»¥ä¸œåç¦»</td>
</tr>
<tr>
<td>0</td>
<td>tm_yearï¼ˆå¹´ï¼‰</td>
<td>æ¯”å¦‚2011</td>
</tr>
<tr>
<td>1</td>
<td>tm_monï¼ˆæœˆï¼‰</td>
<td>1 - 12</td>
</tr>
<tr>
<td>2</td>
<td>tm_mdayï¼ˆæ—¥ï¼‰</td>
<td>1 - 31</td>
</tr>
<tr>
<td>3</td>
<td>tm_hourï¼ˆæ—¶ï¼‰</td>
<td>0 - 23</td>
</tr>
<tr>
<td>4</td>
<td>tm_minï¼ˆåˆ†ï¼‰</td>
<td>0 - 59</td>
</tr>
<tr>
<td>5</td>
<td>tm_secï¼ˆç§’ï¼‰</td>
<td>0 - 61</td>
</tr>
<tr>
<td>6</td>
<td>tm_wdayï¼ˆæ˜ŸæœŸå‡ ï¼‰</td>
<td>0 - 6 (æ˜ŸæœŸä¸€æ˜¯0ä¾æ¬¡)</td>
</tr>
<tr>
<td>7</td>
<td>tm_ydayï¼ˆä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼‰</td>
<td>1 - 366</td>
</tr>
<tr>
<td>8</td>
<td>tm_isdstï¼ˆæ˜¯å¦æ˜¯å¤ä»¤æ—¶ï¼‰</td>
<td>é»˜è®¤ä¸º0</td>
</tr>
</tbody></table>
<h5 id="å½“å‰æ—¶é—´çš„ä¸‰ç§æ ¼å¼"><a href="#å½“å‰æ—¶é—´çš„ä¸‰ç§æ ¼å¼" class="headerlink" title="å½“å‰æ—¶é—´çš„ä¸‰ç§æ ¼å¼"></a>å½“å‰æ—¶é—´çš„ä¸‰ç§æ ¼å¼</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¯¼å…¥æ—¶é—´æ¨¡å—</span></span><br><span class="line">&gt;&gt;&gt;<span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¶é—´æˆ³</span></span><br><span class="line">&gt;&gt;&gt;time.time()</span><br><span class="line"><span class="number">1500875844.800804</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¶é—´å­—ç¬¦ä¸²</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d %X"</span>)</span><br><span class="line"><span class="string">'2017-07-24 13:54:37'</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d %H-%M-%S"</span>)</span><br><span class="line"><span class="string">'2017-07-24 13-55-04'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¶é—´å…ƒç»„</span></span><br><span class="line"><span class="comment">#localtimeå°†ä¸€ä¸ªæ—¶é—´æˆ³è½¬æ¢ä¸ºå½“å‰æ—¶åŒºçš„struct_time</span></span><br><span class="line">&gt;&gt;&gt;time.localtime()</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">24</span>,</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€tm_hour=<span class="number">13</span>, tm_min=<span class="number">59</span>, tm_sec=<span class="number">37</span>, </span><br><span class="line">                 tm_wday=<span class="number">0</span>, tm_yday=<span class="number">205</span>, tm_isdst=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></div>

<h5 id="ä¸‰ç§æ ¼å¼çš„è½¬æ¢"><a href="#ä¸‰ç§æ ¼å¼çš„è½¬æ¢" class="headerlink" title="ä¸‰ç§æ ¼å¼çš„è½¬æ¢"></a>ä¸‰ç§æ ¼å¼çš„è½¬æ¢</h5><p><img src="/fcg22450.github.io/img/python_img/%E6%97%B6%E9%97%B4%E6%A8%A1%E5%9D%97.jpg" alt=""></p>
<h6 id="timestamp-â‡„-struct-time"><a href="#timestamp-â‡„-struct-time" class="headerlink" title="timestamp â‡„ struct_time"></a>timestamp â‡„ struct_time</h6><ul>
<li><code>time.gmtime(timestamp) -&gt; struct_time</code></li>
<li><code>time.localtime(timestamp) -&gt; struct_time</code></li>
<li><code>time.mktime(struct_time) -&gt; timestamp</code></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#UTCæ—¶é—´ã€‚ä¸è‹±å›½ä¼¦æ•¦å½“åœ°æ—¶é—´ä¸€è‡´</span></span><br><span class="line">&gt;&gt;&gt;time.gmtime(<span class="number">1500000000</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">14</span>, tm_hour=<span class="number">2</span>,</span><br><span class="line">                 tm_min=<span class="number">40</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">4</span>, tm_yday=<span class="number">195</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å½“åœ°æ—¶é—´ã€‚åŒ—äº¬ä¸UTCæ—¶é—´ç›¸å·®+8å°æ—¶</span></span><br><span class="line">&gt;&gt;&gt;time.localtime(<span class="number">1500000000</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">14</span>, tm_hour=<span class="number">10</span>,</span><br><span class="line">                 tm_min=<span class="number">40</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">4</span>, tm_yday=<span class="number">195</span>, tm_isdst=<span class="number">0</span>)</span><br><span class="line"><span class="comment">#ä¸time.localtimeç›¸åæ•ˆæœ</span></span><br><span class="line">&gt;&gt;&gt;time_tuple = time.localtime(<span class="number">1500000000</span>)</span><br><span class="line">&gt;&gt;&gt;time.mktime(time_tuple)</span><br><span class="line"><span class="number">1500000000.0</span></span><br></pre></td></tr></table></figure></div>

<h6 id="struct-time-â‡„-Format-String"><a href="#struct-time-â‡„-Format-String" class="headerlink" title="struct_time â‡„ Format String"></a>struct_time â‡„ Format String</h6><ul>
<li><code>time.strftime(æ¨¡æ¿å­—ç¬¦ä¸², struct_time=å½“å‰) -&gt; FormatString</code></li>
<li><code>time.strptime(FormatString, æ¨¡æ¿å­—ç¬¦ä¸²) -&gt; struct_time</code></li>
</ul>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨Python3.8ä¹‹å‰ï¼Œæ—¶é—´çš„æ¨¡æ¿å­—ç¬¦ä¸²é‡Œä¸æ”¯æŒéAsciiå­—ç¬¦ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç»“æ„åŒ–æ—¶é—´å‚æ•°è‹¥ä¸ä¼ ï¼Œåˆ™æ˜¾ç¤ºå½“å‰æ—¶é—´</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d %X"</span>)</span><br><span class="line"><span class="string">'2017-07-24 14:55:36'</span></span><br><span class="line">&gt;&gt;&gt;time.strftime(<span class="string">"%Y-%m-%d"</span>,time.localtime(<span class="number">1500000000</span>))</span><br><span class="line"><span class="string">'2017-07-14'</span></span><br><span class="line">&gt;&gt;&gt;time.strptime(<span class="string">"2017-03-16"</span>,<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">3</span>, tm_mday=<span class="number">16</span>, tm_hour=<span class="number">0</span>,</span><br><span class="line">                 tm_min=<span class="number">0</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">3</span>, tm_yday=<span class="number">75</span>, tm_isdst=<span class="number">-1</span>)</span><br><span class="line">&gt;&gt;&gt;time.strptime(<span class="string">"07/24/2017"</span>,<span class="string">"%m/%d/%Y"</span>)</span><br><span class="line">time.struct_time(tm_year=<span class="number">2017</span>, tm_mon=<span class="number">7</span>, tm_mday=<span class="number">24</span>, tm_hour=<span class="number">0</span>,</span><br><span class="line">                 tm_min=<span class="number">0</span>, tm_sec=<span class="number">0</span>, tm_wday=<span class="number">0</span>, tm_yday=<span class="number">205</span>, tm_isdst=<span class="number">-1</span>)</span><br></pre></td></tr></table></figure></div>

<h6 id="ä¸æ ‡å‡†-a-b-d-H-M-S-Yæ ¼å¼çš„Format-Stringä¹‹é—´çš„è½¬æ¢"><a href="#ä¸æ ‡å‡†-a-b-d-H-M-S-Yæ ¼å¼çš„Format-Stringä¹‹é—´çš„è½¬æ¢" class="headerlink" title="ä¸æ ‡å‡†%a %b %d %H:%M:%S %Yæ ¼å¼çš„Format Stringä¹‹é—´çš„è½¬æ¢"></a>ä¸æ ‡å‡†<code>%a %b %d %H:%M:%S %Y</code>æ ¼å¼çš„Format Stringä¹‹é—´çš„è½¬æ¢</h6><ul>
<li><code>time.asctime(struct_time) â†’ Format %a %b %d %H:%M:%S %Y String</code></li>
<li><code>time.ctime(timestamp) â†’ Format %a %b %d %H:%M:%S %Y String</code></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¦‚æœä¸ä¼ å‚æ•°ï¼Œç›´æ¥è¿”å›å½“å‰æ—¶é—´çš„æ ¼å¼åŒ–ä¸²</span></span><br><span class="line">&gt;&gt;&gt;time.asctime(time.localtime(<span class="number">1500000000</span>))</span><br><span class="line"><span class="string">'Fri Jul 14 10:40:00 2017'</span></span><br><span class="line">&gt;&gt;&gt;time.asctime()</span><br><span class="line"><span class="string">'Mon Jul 24 15:18:33 2017'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœä¸ä¼ å‚æ•°ï¼Œç›´æ¥è¿”å›å½“å‰æ—¶é—´çš„æ ¼å¼åŒ–ä¸²</span></span><br><span class="line">&gt;&gt;&gt;time.ctime()</span><br><span class="line"><span class="string">'Mon Jul 24 15:19:07 2017'</span></span><br><span class="line">&gt;&gt;&gt;time.ctime(<span class="number">1500000000</span>)</span><br><span class="line"><span class="string">'Fri Jul 14 10:40:00 2017'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="calendaræ¨¡å—"><a href="#calendaræ¨¡å—" class="headerlink" title="calendaræ¨¡å—"></a>calendaræ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/calendar.html" target="_blank" rel="noopener"><code>calendar</code></a>æ¨¡å—æä¾›äº†æ—¥å†ç›¸å…³çš„å‡½æ•°ï¼Œå’Œæ ¼å¼åŒ–è¾“å‡ºæ—¥å†ã€‚</p>
<p>å¸¸é‡</p>
<ul>
<li><code>.MONDAY</code> = 0</li>
<li><code>.TUESDAY</code> = 1</li>
<li><code>.WEDNESDAY</code> = 2</li>
<li><code>.THURSDAY</code> = 3</li>
<li><code>.FRIDAY</code> = 4</li>
<li><code>SATURDAY</code> = 5</li>
<li><code>.SUNDAY</code> = 6</li>
</ul>
<p>å¸¸ç”¨å‡½æ•°</p>
<ul>
<li><code>.isleap</code>(<em>year</em>) æ˜¯å¦æ˜¯é—°å¹´</li>
<li><code>.weekday</code>(<em>year</em>, <em>month</em>, <em>day</em>) æ˜¯æ˜ŸæœŸå‡ ï¼ˆæ˜ŸæœŸä¸€æ˜¯0ä¾æ¬¡ï¼‰</li>
<li><code>.weekheader</code>(<em>n</em>) å¾—åˆ°æ˜ŸæœŸå‡ çš„ç¼©å†™å¤´ï¼Œnæ˜¯å­—ç¬¦å®½åº¦</li>
<li><code>.monthrange</code>(<em>year</em>, <em>month</em>) å¾—åˆ°ä¸€ä¸ªæœˆç¬¬ä¸€å¤©æ˜¯æ˜ŸæœŸå‡ å’Œè¿™ä¸ªæœˆçš„å¤©æ•°</li>
<li><code>.timegm</code>(struct_time) ä¸<code>time.gmtime()</code>ç›¸åæ•ˆæœ</li>
</ul>
<p>å¸¸ç”¨ç±»</p>
<ul>
<li><code>.TextCalendar</code>(<em>firstweekday=0</em>) ç®€å•æ–‡æœ¬æ—¥å†</li>
<li><code>.HTMLCalendar</code>(<em>firstweekday=0</em>) è¶…æ–‡æœ¬æ—¥å†</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> calendar</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦æ˜ŸæœŸæ—¥åœ¨ç¬¬ä¸€ä½ éœ€è¦è®¾ç½®firstweekday=6æˆ–è€…SUNDAY</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(calendar.TextCalendar(<span class="number">6</span>).formatmonth(<span class="number">2020</span>, <span class="number">4</span>))</span><br><span class="line">     April <span class="number">2020</span></span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">          <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span></span><br><span class="line"> <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span></span><br><span class="line"><span class="number">12</span> <span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span></span><br><span class="line"><span class="number">19</span> <span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span> <span class="number">24</span> <span class="number">25</span></span><br><span class="line"><span class="number">26</span> <span class="number">27</span> <span class="number">28</span> <span class="number">29</span> <span class="number">30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æœ¬åœ°åŒ–  å‰ç¼€Locale-</span></span><br><span class="line"><span class="comment">#â€œja-JPâ€ æ—¥è¯­</span></span><br><span class="line"><span class="comment">#"fr-FR" æ³•è¯­</span></span><br><span class="line"><span class="comment">#â€œzh-CNâ€ å›½è¯­</span></span><br><span class="line"><span class="comment">#'en-US' å˜¤è¯­</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>frc = calendar.LocaleTextCalendar(locale=<span class="string">"fr-FR"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span> print(frc.formatmonth(<span class="number">2020</span>, <span class="number">4</span>))</span><br><span class="line">     avril <span class="number">2020</span></span><br><span class="line">lu ma me je ve sa di</span><br><span class="line">       <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span></span><br><span class="line"> <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span> <span class="number">11</span> <span class="number">12</span></span><br><span class="line"><span class="number">13</span> <span class="number">14</span> <span class="number">15</span> <span class="number">16</span> <span class="number">17</span> <span class="number">18</span> <span class="number">19</span></span><br><span class="line"><span class="number">20</span> <span class="number">21</span> <span class="number">22</span> <span class="number">23</span> <span class="number">24</span> <span class="number">25</span> <span class="number">26</span></span><br><span class="line"><span class="number">27</span> <span class="number">28</span> <span class="number">29</span> <span class="number">30</span></span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>æœ¬è´¨è°ƒç”¨<code>locale.setlocale()</code>ï¼Œä½¿ç”¨åä¼šä¸€ç›´ç”Ÿæ•ˆï¼Œä¸”éçº¿ç¨‹å®‰å…¨ã€‚</li>
<li>ç”±äºç­‰å®½å­—ä½“çš„é™åˆ¶ï¼Œä¸æ¨èä½¿ç”¨éå­—æ¯çš„æœ¬åœ°è¯­è¨€ã€‚</li>
<li>éå­—æ¯çš„æœ¬åœ°è¯­è¨€å¦‚æœè¦ä½¿ç”¨ï¼Œè¿˜éœ€è¦è°ƒæ•´<code>formatmonth</code>çš„<code>w</code>å‚æ•°å¤§äº2</li>
<li>å¦‚æœå‡ºç°ä¹±ç ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ï¼š<ul>
<li>é‡ç¼–ç ï¼ˆæ¨èï¼‰</li>
<li>æ”¹è¿æ¥ç¬¦ä¸ºä¸‹åˆ’çº¿å†åŠ å­—ç¬¦é›†ï¼Œå¦‚<code>ja_JP.UTF-8</code><br>ï¼ˆå¯èƒ½éœ€è¦æ•è·ç¬¬ä¸€æ¬¡setlocaleçš„å¼‚å¸¸ï¼Œä¸”python3.8ä»¥ä¸‹å¯èƒ½ä¾ç„¶ä¹±ç ï¼‰</li>
</ul>
</li>
</ul>
<h3 id="datetimeæ¨¡å—"><a href="#datetimeæ¨¡å—" class="headerlink" title="datetimeæ¨¡å—"></a>datetimeæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/datetime.html" target="_blank" rel="noopener"><code>datetime</code></a>æ¨¡å—æä¾›ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ç±»ã€‚</p>
<p>æ—¶é—´å¯¹è±¡åˆ†ä¸ºæ„ŸçŸ¥å‹å’Œç®€å•å‹ï¼Œæ„ŸçŸ¥å‹ç›¸æ¯”ç®€å•å‹å¤šäº†æ—¶åŒºï¼Œå¤ä»¤æ—¶ç­‰ä¿¡æ¯ã€‚</p>
<h4 id="å¸¸ç”¨ç±»"><a href="#å¸¸ç”¨ç±»" class="headerlink" title="å¸¸ç”¨ç±»"></a>å¸¸ç”¨ç±»</h4><table>
<thead>
<tr>
<th align="center">ç±»å</th>
<th align="center">åŠŸèƒ½è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">timedelta</td>
<td align="center">æ—¶é—´é—´éš”ç±»</td>
</tr>
<tr>
<td align="center">tzinfo</td>
<td align="center">æ„ŸçŸ¥å‹ä¿¡æ¯æŠ½è±¡ç±»</td>
</tr>
<tr>
<td align="center">timezone</td>
<td align="center">tzinfoç±»çš„å­ç±»ï¼Œæ—¶åŒºä¿¡æ¯ç±»</td>
</tr>
<tr>
<td align="center">date</td>
<td align="center">ç®€å•å‹æ—¥æœŸç±»</td>
</tr>
<tr>
<td align="center">time</td>
<td align="center">æ—¶é—´ç±»</td>
</tr>
<tr>
<td align="center">datetime</td>
<td align="center">dateç±»çš„å­ç±»ï¼Œæ—¥æœŸæ—¶é—´ç±»</td>
</tr>
</tbody></table>
<p>å®ä¾‹åŒ–timedelta æ—¶é—´é—´éš”ç±»</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> datetime</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>jp_offset = datetime.timedelta(hours=<span class="number">9</span>)</span><br></pre></td></tr></table></figure></div>

<p>å®ä¾‹åŒ–timezone æ—¶åŒºä¿¡æ¯ç±»</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>JST = datetime.timezone(jp_offset, name = <span class="string">'Tokyo'</span>)</span><br></pre></td></tr></table></figure></div>

<p>å¤æ—¶åˆ¶ä¸æ·±å…¥è®¨è®ºï¼Œéœ€è¦å®ç°æŠ½è±¡åŸºç±»tzinfoä¸Šçš„<code>.dst()</code>æ–¹æ³•ï¼Œtimezoneç±»å¹¶æœªå°†å…¶å®ç°ã€‚</p>
<h4 id="dateç±»"><a href="#dateç±»" class="headerlink" title="dateç±»"></a>dateç±»</h4><p>ä»£è¡¨ä¸€ä¸ªç†æƒ³åŒ–å†æ³•ä¸­çš„æ—¥æœŸï¼ˆå¹´ã€æœˆå’Œæ—¥ï¼‰ï¼Œå³å½“ä»Šçš„æ ¼åˆ—é«˜åˆ©å†å‘å‰åä¸¤ä¸ªæ–¹å‘æ— é™å»¶ä¼¸</p>
<p>å®ƒæ˜¯ä¸€ä¸ªä¸å¯å˜ç±»å‹ï¼ˆhashableï¼‰</p>
<h5 id="å®ä¾‹åŒ–ç”Ÿæˆ"><a href="#å®ä¾‹åŒ–ç”Ÿæˆ" class="headerlink" title="å®ä¾‹åŒ–ç”Ÿæˆ"></a>å®ä¾‹åŒ–ç”Ÿæˆ</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">a = datetime.date(<span class="number">2017</span>, <span class="number">3</span>, <span class="number">15</span>)</span><br></pre></td></tr></table></figure></div>

<h5 id="é™æ€æ–¹æ³•ç”Ÿæˆ"><a href="#é™æ€æ–¹æ³•ç”Ÿæˆ" class="headerlink" title="é™æ€æ–¹æ³•ç”Ÿæˆ"></a>é™æ€æ–¹æ³•ç”Ÿæˆ</h5><ul>
<li><code>datetime.date.today</code>() è¿”å›æœ¬åœ°æ—¥æœŸdateå¯¹è±¡</li>
<li><code>date.fromisoformat</code>(<em>date_string</em>) æ ¼å¼åŒ–å­—ç¬¦ä¸²â†’æœ¬åœ°æ—¥æœŸdateå¯¹è±¡ï¼Œåªæ”¯æŒ<code>YYYY-MM-DD</code></li>
<li><code>date.fromtimestamp</code>(<em>timestamp</em>) æ—¶é—´æˆ³â†’æœ¬åœ°æ—¥æœŸdateå¯¹è±¡</li>
</ul>
<h5 id="å¯¹è±¡å±æ€§å’Œæ–¹æ³•"><a href="#å¯¹è±¡å±æ€§å’Œæ–¹æ³•" class="headerlink" title="å¯¹è±¡å±æ€§å’Œæ–¹æ³•"></a>å¯¹è±¡å±æ€§å’Œæ–¹æ³•</h5><ul>
<li><code>.year</code>, <code>.month</code>, <code>.day</code> æ•°æ®æè¿°ç¬¦ï¼ˆåªè¯»ï¼‰</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = datetime.date.today()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">datetime.date(<span class="number">2017</span>, <span class="number">3</span>, <span class="number">22</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.year</span><br><span class="line"><span class="number">2017</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.month</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.day</span><br><span class="line"><span class="number">22</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>.replace()</code> æ›¿æ¢æ•°æ®æè¿°ç¬¦çš„å±æ€§å€¼</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.replace(day=<span class="number">26</span>)</span><br><span class="line">datetime.date(<span class="number">2017</span>, <span class="number">3</span>, <span class="number">26</span>)</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>.timetuple()</code> è½¬struct_timeå…ƒç»„ï¼Œè¡¥0</li>
<li><code>.weekday()</code> æ˜ŸæœŸå‡  æ˜ŸæœŸä¸€ä¸º0ä¾æ¬¡</li>
<li><code>.isoweekday()</code> æ˜ŸæœŸå‡  æ²¡æœ‰0ï¼Œæ˜ŸæœŸä¸€ä¸º1ä¾æ¬¡</li>
<li><code>.isocalendar()</code> è¿”å›å…ƒç»„<code>(å¹´, å‘¨ï¼Œæ˜ŸæœŸ)</code> æ˜ŸæœŸè§„åˆ™åŒ<code>.isoweekday()</code></li>
</ul>
<h6 id="æ¯”è¾ƒå’Œåšå·®"><a href="#æ¯”è¾ƒå’Œåšå·®" class="headerlink" title="æ¯”è¾ƒå’Œåšå·®"></a>æ¯”è¾ƒå’Œåšå·®</h6><p>ç”±äºå®ç°äº†è¯¸å¤šé­”æœ¯æ–¹æ³•ï¼Œä¸¤ä¸ªdateå¯¹è±¡ä¹‹é—´å¯ä»¥æ¯”è¾ƒå’Œåšå·®</p>
<p>åšå·®å°†è¿”å›datetime.timedeltaå¯¹è±¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b &lt; a</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b - a</span><br><span class="line">datetime.timedelta(days=<span class="number">7</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>(b - a).days</span><br><span class="line"><span class="number">7</span></span><br></pre></td></tr></table></figure></div>

<h6 id="æ ¼å¼åŒ–è¾“å‡º"><a href="#æ ¼å¼åŒ–è¾“å‡º" class="headerlink" title="æ ¼å¼åŒ–è¾“å‡º"></a>æ ¼å¼åŒ–è¾“å‡º</h6><ul>
<li><code>.strftime(æ¨¡æ¿å­—ç¬¦ä¸²)</code> æ ¼å¼åŒ–æ–¹æ³•</li>
<li><code>.isoformat()</code> è¿”å›ç¬¦åˆISO 8601æ ‡å‡† (<code>YYYY-MM-DD</code>) çš„æ—¥æœŸå­—ç¬¦ä¸²</li>
<li>é­”æœ¯æ–¹æ³•<code>__str__()</code>å’Œ<code>.__format__()</code> å¯ä»¥ä½¿ç”¨æ ¼å¼åŒ–çš„ä¸€åˆ‡æ–¹æ³•ã€‚</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.__format__(<span class="string">'%Y-%m-%d'</span>)</span><br><span class="line"><span class="string">'2017-03-22'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.isoformat()</span><br><span class="line"><span class="string">'2017-03-22'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.strftime(<span class="string">'%y'</span>)</span><br><span class="line"><span class="string">'17'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(b,<span class="string">'%D'</span>)</span><br><span class="line"><span class="string">'03/22/17'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(b)</span><br><span class="line"><span class="string">'2017-03-22'</span></span><br></pre></td></tr></table></figure></div>

<h4 id="timeç±»"><a href="#timeç±»" class="headerlink" title="timeç±»"></a>timeç±»</h4><p>ä¸€ä¸ª timeå¯¹è±¡ä»£è¡¨æŸæ—¥çš„ï¼ˆæœ¬åœ°ï¼‰æ—¶é—´ï¼Œå®ƒç‹¬ç«‹äºä»»ä½•ç‰¹å®šæ—¥æœŸï¼Œå¹¶å¯é€šè¿‡ tzinfoå¯¹è±¡æ¥è°ƒæ•´ã€‚</p>
<h5 id="å®ä¾‹åŒ–ç”Ÿæˆ-1"><a href="#å®ä¾‹åŒ–ç”Ÿæˆ-1" class="headerlink" title="å®ä¾‹åŒ–ç”Ÿæˆ"></a>å®ä¾‹åŒ–ç”Ÿæˆ</h5><p><code>datetime.time</code>(<em>hour=0</em>, <em>minute=0</em>, <em>second=0</em>, <em>microsecond=0</em>, <em>tzinfo=None</em>)</p>
<h5 id="é™æ€æ–¹æ³•ç”Ÿæˆ-1"><a href="#é™æ€æ–¹æ³•ç”Ÿæˆ-1" class="headerlink" title="é™æ€æ–¹æ³•ç”Ÿæˆ"></a>é™æ€æ–¹æ³•ç”Ÿæˆ</h5><p><code>.fromisoformat</code>(<em>time_string</em>) .isoformatçš„é€†æ“ä½œ</p>
<h5 id="å¯¹è±¡å±æ€§å’Œæ–¹æ³•-1"><a href="#å¯¹è±¡å±æ€§å’Œæ–¹æ³•-1" class="headerlink" title="å¯¹è±¡å±æ€§å’Œæ–¹æ³•"></a>å¯¹è±¡å±æ€§å’Œæ–¹æ³•</h5><p>å’Œdateå¯¹è±¡ä¸€æ ·ï¼Œå®ä¾‹åŒ–æ—¶çš„å‚æ•°å°†æˆä¸ºå®ä¾‹å¯¹è±¡çš„æ•°æ®æè¿°ç¬¦ï¼ˆåªè¯»ï¼‰</p>
<p><code>.replace()</code> æ›¿æ¢æ•°æ®æè¿°ç¬¦çš„å±æ€§å€¼</p>
<h5 id="æ¯”è¾ƒå’Œåšå·®è¿ç®—"><a href="#æ¯”è¾ƒå’Œåšå·®è¿ç®—" class="headerlink" title="æ¯”è¾ƒå’Œåšå·®è¿ç®—"></a>æ¯”è¾ƒå’Œåšå·®è¿ç®—</h5><p>timeå¯¹è±¡ä¸èƒ½åšå·®ï¼Œæ¯”è¾ƒçš„æ—¶å€™è¦æ±‚tzinfoå±æ€§ä¸€è‡´ã€‚</p>
<h5 id="æ ¼å¼åŒ–è¾“å‡º-1"><a href="#æ ¼å¼åŒ–è¾“å‡º-1" class="headerlink" title="æ ¼å¼åŒ–è¾“å‡º"></a>æ ¼å¼åŒ–è¾“å‡º</h5><ul>
<li><p><code>.strftime(æ¨¡æ¿å­—ç¬¦ä¸²)</code> æ ¼å¼åŒ–æ–¹æ³•</p>
</li>
<li><p><code>.isoformat</code>(<em>timespec=â€™autoâ€™</em>) è¿”å›ç¬¦åˆISO 8601æ ‡å‡† (<code>HH:MM:SS.ffffff</code>) çš„æ—¶é—´å­—ç¬¦ä¸²</p>
<p>é»˜è®¤çš„<code>auto</code>ä¼šåœ¨<code>.ffffff</code>ä¸º<code>.000000</code>çš„æ—¶å€™ä¸æ˜¾ç¤ºï¼Œå³æ•´ç§’æ—¶ä¸º<code>HH:MM:SS</code></p>
<p>å¯è®¾ç½®çš„å…¶ä»–å€¼ï¼š</p>
<ul>
<li><code>&#39;hours&#39;</code>: ä»¥ä¸¤ä¸ªæ•°ç çš„ <code>HH</code> æ ¼å¼</li>
<li><code>&#39;minutes&#39;</code>: ä»¥ <code>HH:MM</code> æ ¼å¼</li>
<li><code>&#39;seconds&#39;</code>: ä»¥ <code>HH:MM:SS</code> æ ¼å¼</li>
<li><code>&#39;milliseconds&#39;</code>: åŒ…å«å®Œæ•´æ—¶é—´ï¼Œä½†å°†ç§’å€¼æˆªæ–­è‡³å¾®ç§’ã€‚ æ ¼å¼ä¸º <code>HH:MM:SS.sss</code></li>
<li><code>&#39;microseconds&#39;</code>: ä»¥ <code>HH:MM:SS.ffffff</code> æ ¼å¼åŒ…å«å®Œæ•´æ—¶é—´ã€‚</li>
</ul>
</li>
<li><p>é­”æœ¯æ–¹æ³•<code>__str__()</code>, <code>__format__()</code></p>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>offset = datetime.timedelta(hours=<span class="number">8</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shanghai_timez = datetime.timezone(offset, name = <span class="string">'Shanghai'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bonjour = datetime.time(<span class="number">7</span>,<span class="number">30</span>,tzinfo=shanghai_timez)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bonjour.isoformat()</span><br><span class="line"><span class="string">'07:30:00+08:00'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bonjour.strftime(<span class="string">"%H:%M:%S %Z"</span>)</span><br><span class="line"><span class="string">'07:30:00 Shanghai'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(bonjour,<span class="string">'%z'</span>)</span><br><span class="line"><span class="string">'+0800'</span></span><br></pre></td></tr></table></figure></div>

<h4 id="datetimeç±»"><a href="#datetimeç±»" class="headerlink" title="datetimeç±»"></a>datetimeç±»</h4><p>datetimeç±»å¯ä»¥çœ‹åšæ˜¯dateç±»å’Œtimeç±»çš„åˆä½“</p>
<p>ç”±äºæ˜¯ç»§æ‰¿çš„dateç±»ï¼Œè¿™é‡Œ<strong>åªä»‹ç»æ´¾ç”Ÿçš„æ–¹æ³•</strong>ã€‚</p>
<h5 id="å®ä¾‹åŒ–ç”Ÿæˆ-2"><a href="#å®ä¾‹åŒ–ç”Ÿæˆ-2" class="headerlink" title="å®ä¾‹åŒ–ç”Ÿæˆ"></a>å®ä¾‹åŒ–ç”Ÿæˆ</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="EXCEL"><figure class="iseeu highlight /excel"><table><tr><td class="code"><pre><span class="line">datetime.datetime(<span class="built_in">year</span>, <span class="built_in">month</span>, <span class="built_in">day</span>, <span class="built_in">hour</span>, <span class="built_in">minute</span>, <span class="built_in">second</span>, microsecond,tzinfo)</span><br></pre></td></tr></table></figure></div>

<h5 id="é™æ€æ–¹æ³•ç”Ÿæˆ-2"><a href="#é™æ€æ–¹æ³•ç”Ÿæˆ-2" class="headerlink" title="é™æ€æ–¹æ³•ç”Ÿæˆ"></a>é™æ€æ–¹æ³•ç”Ÿæˆ</h5><ul>
<li><code>datetime.now</code>(<em>tz=None</em>) å½“å‰çš„datetimeå¯¹è±¡ï¼Œå¯ä¼ å…¥æ—¶åŒºï¼Œé»˜è®¤ç³»ç»Ÿæ—¶åŒº</li>
<li><code>datetime.utcnow</code>() ç”Ÿæˆç®€å•å‹datetimeå¯¹è±¡ï¼Œæ¶ˆé™¤æ—¶åŒºä¿¡æ¯</li>
<li><code>datetime.utcfromtimestamp</code>(<em>timestamp</em>) ç”±<em>timestamp</em>ç”Ÿæˆdatetimeå¯¹è±¡ï¼Œæ¶ˆé™¤æ—¶åŒºä¿¡æ¯</li>
<li><code>datetime.combine</code>(<em>date</em>, <em>time</em>[, <em>tzinfo</em>]) ç”±dateå¯¹è±¡å’Œtimeå¯¹è±¡ç”Ÿæˆ</li>
<li><code>datetime.strptime</code>(<em>date_string</em>, <em>format</em>) ç”±date_stringç”Ÿæˆdatetimeå¯¹è±¡</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>datetime.datetime.strptime(<span class="string">'2017-3-22 15:25'</span>,<span class="string">'%Y-%m-%d %H:%M'</span>)</span><br><span class="line">datetime.datetime(<span class="number">2017</span>, <span class="number">3</span>, <span class="number">22</span>, <span class="number">15</span>, <span class="number">25</span>)</span><br></pre></td></tr></table></figure></div>

<h5 id="å¯¹è±¡å±æ€§å’Œæ–¹æ³•-2"><a href="#å¯¹è±¡å±æ€§å’Œæ–¹æ³•-2" class="headerlink" title="å¯¹è±¡å±æ€§å’Œæ–¹æ³•"></a>å¯¹è±¡å±æ€§å’Œæ–¹æ³•</h5><ul>
<li><code>.date()</code> æ‹†è§£å‡ºdateå¯¹è±¡</li>
<li><code>.time()</code> æ‹†è§£å‡ºtimeå¯¹è±¡</li>
<li><code>.timestamp()</code> 6ä½æµ®ç‚¹çš„æ—¶é—´æˆ³</li>
<li><code>.utctimetuple()</code> è¿”å›æ¶ˆé™¤æ—¶åŒºä¿¡æ¯çš„struct_time</li>
</ul>
<h6 id="æ ¼å¼åŒ–è¾“å‡º-2"><a href="#æ ¼å¼åŒ–è¾“å‡º-2" class="headerlink" title="æ ¼å¼åŒ–è¾“å‡º"></a>æ ¼å¼åŒ–è¾“å‡º</h6><p><code>.isoformat</code>(<em>sep=â€™Tâ€™, timespec=â€™autoâ€™</em>) åŒdateç±»çš„åŒåæ–¹æ³•ï¼Œsepæ˜¯æ—¥æœŸå’Œæ—¶é—´ä¹‹é—´çš„åˆ†éš”ç¬¦ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåä¸ƒ)</title>
    <url>/blog/Python/Python_id_45.html</url>
    <content><![CDATA[<h2 id="åºåˆ—åŒ–æœ‰å…³æ¨¡å—"><a href="#åºåˆ—åŒ–æœ‰å…³æ¨¡å—" class="headerlink" title="åºåˆ—åŒ–æœ‰å…³æ¨¡å—"></a>åºåˆ—åŒ–æœ‰å…³æ¨¡å—</h2><a id="more"></a>

<blockquote>
<p>å°†åŸæœ¬çš„å­—å…¸ã€åˆ—è¡¨ç­‰å†…å®¹è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²çš„è¿‡ç¨‹å°±å«åš<strong>åºåˆ—åŒ–</strong>ã€‚</p>
<p><strong>åºåˆ—åŒ–çš„ç›®çš„</strong></p>
<p>1ã€ä»¥æŸç§å­˜å‚¨å½¢å¼ä½¿è‡ªå®šä¹‰<a href="https://baike.baidu.com/item/å¯¹è±¡æŒä¹…åŒ–" target="_blank" rel="noopener">å¯¹è±¡æŒä¹…åŒ–</a>ï¼› 2ã€å°†å¯¹è±¡ä»ä¸€ä¸ªåœ°æ–¹ä¼ é€’åˆ°å¦ä¸€ä¸ªåœ°æ–¹ã€‚ 3ã€ä½¿ç¨‹åºæ›´å…·ç»´æŠ¤æ€§ã€‚ <img src="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAAAAD/4QMqaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAxNCA3OS4xNTE0ODEsIDIwMTMvMDMvMTMtMTI6MDk6MTUgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0I2OTlBOTE5N0MxMTFFOUJENThFRjEyNDgxREI0NEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0I2OTlBOTI5N0MxMTFFOUJENThFRjEyNDgxREI0NEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQjY5OUE4Rjk3QzExMUU5QkQ1OEVGMTI0ODFEQjQ0RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQjY5OUE5MDk3QzExMUU5QkQ1OEVGMTI0ODFEQjQ0RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEABsaGikdKUEmJkFCLy8vQkc/Pj4/R0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0cBHSkpNCY0PygoP0c/NT9HR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR//AABEIAQ4EDAMBIgACEQEDEQH/xACYAAEAAwEBAQAAAAAAAAAAAAAAAQQFAwIGAQEBAQEBAQAAAAAAAAAAAAAAAQMCBAUQAQABAgIHAwYMBQQCAQUAAAABAgMRBDFRodESUhQhQQXwYYGCEyRxkbHBIjJCorIzNBXhYnLC4tIjU7OSQ/Fjc4M1RREBAAIDAAICAgMBAQEAAAAAAAESUZECETFhYiFBcYEDsfAy/9oADAMBAAIRAxEAPwD6YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEGKBnaVTiYoEtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInFLymHUSJAdoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgxRIzmVTiYoEtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtInExQFpE4mKAtI9CIS0j8oAKAAPIDBQAAAAAAAAAAAAAAAAAAAAABMITDrn2JAaoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8yEjGfagCAAAAAAAAAAAAAAAAAAAAAAAAAAAACYSiEtefSADoAAeQGCgAAAAAAAAAAAAAAAAAAAAACYQmHXPsSA1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5kJGM+1AEAAAAAAAAAAAAAAAAAAAAAAAAAAAAEwlEJa8+kAHQAA8gMFAAAAAAAAAABj+I565Yqimjs8/Z5tcNhfAAIAAAAAAAACYQmHXPsSA1QAAAAAAAAAAAAAAAAAAAAByvXabNE119lMf/AADqM392sc2yr/S8/utru7fj/wBINQZX7py04+t/B3y2bqvVYVUcEf1Y/MC8PNVUU6Xj21GsHUZmbztVmqmae2ntx2Ydy97ajWDqOcXaZnCJU7/iVuxXNurTHw6sdQNAZP7xa8sf9J+72vLH/SDWBn05mqc1VZ+zTh+HEGgChazk3L1VqI+jTh9LHXTjowBfFDPZ3pIpnh4uLHvw0Yeada+AAAAAAAAAAAAAAAAAAAAAAAADzISMZ9qAIOVN6iqqaIn6VOn0q053DMRl+H1sf5eLRh87jfydcX4vWu/HHRy4Rplwn/8AYx5f+t14GpdzNuzMRXOHFo093wIzOYixbm5pww+WIZ0ZKu/fmu99WO7s7fo4d0vPjN3Cmm3Hfjj92TwNTLXvb24uYcOOPZjj3zDuzLPiGWt0RTx6P5atzvb8QsXKoppqxmfNVuTwO9+7Fmia57t+CMvei/bi5HZFWOycGdn87ZqtVW4q+l2dmE64nU8ZDP2LNimiurCqMcYwq5pnuhfH4GnXmbdE8NU4THml56y1zbJ3MmuzRez1VNcYx2a+TzND9ry3J96refgdustc2ydz1Rmbdc8NM4zPmlX/AGvLcn3qt7Ot2aLOfiiiMKYx/wCvzniB9Aq3s5RZriirTPw7liuuKI4p0MXI0Tmbs5ivzYfFNM6tWpIG4KGbz8ZaKZw4uPHvw0Yeadan+9Ryfe/xXxI0Orp9t7D7X+PFq+dbfKddHU9Rh2asf5eHTh8zQ/eo5Pvf4rMDbU83nIy00xMY8WOzDzTrecvnqbtE11RwxHp82pm+K36Lk2+GccOLX/KkR+R9Aq5rNRlqOKYx83xeadb3RmbdyeGmcZnzTuYPid/2t2KI7Yo+eIIj8j6G1c9pTFWt0YceMTH/AK/v/wCKf3mf+P7/APieJG2M/JZ/qpmOHh4cO/HTj5o1NBAAQTCUQlrz6QAdAADyAwUAAAAAAYl/xKuqv2diO3X2asftR8LbfLWa5yF76ceWHmx1uoFqbuft9tej/wDG1b1V2qzM2fzO7Rr7dPZoerOat3/qTj6J+eFgmR8fnPb8XvH1vV83L6G1let9pHtvy+3H6mqcNHbpUfGPzI8u6l9Isz+Bk+K5q5l+D2c8PFxY9kTo4dcONWczF76OX7ZjTP0fkqj4Xnxz/wBfrf2tPI24t2aYjz/LJ+h7yk3JtUzd+v246Nc4aOzQsA5ABAAAAATCFe/7Xs9l6dHzu+I8z4SZ8QtDN978uA978uB6KfbnbO/x1ppDN978uA978uAp9udl/jrTSGb735cB735cBT7c7L/HWmkM33vy4D3vy4Cn252X+OtNIZvvflwHvflwFPtzsv8AHWmkM33vy4D3vy4Cn252X+OtNIZvvflwHvflwFPtzsv8daaQzfe/LgPe/LgKfbnZf4600hm+9+XAe9+XAU+3Oy/x1ppDN978uA978uAp9udl/jrTSGb735cB735cBT7c7L/HWmkz/FP01fq/ih5978uB68U/TV+r+KHM81/cT/DqJ8/qY/lOVv26bcRM9vbr1ysdTb17JYOZyVFFiLtEdsY8XbPNhHe0rXh+Vu0xXTR2T/NVvculzqbevZLpRcpr+rOLLzOSyti3Nc0aP5qtcRrevCLE27XHP2/mmoHPxr6lPp+WlzzGWyeXmIrjDHz1/M6eM/Up9Py0tWZpnSD5/HIav+wxyGr/ALFi5XdylXFP+7b9FO+dMudFNfiH0qp4LersndOmAWMlZytyqa7MdtH9Xfjra1VUURjOhxsWbdmOG3GHx/Oo+J3pqwsUfWr0+jCrv3gpZLOWqK6rl2cKqsO6e7GO6GtZz9m9VFFE4zPmn4dRlqLNVGFvtiPh8+tSylMXs1Vcp+rTw4emmYB7t/rq/V/Ai3+ur9X8Cbf66v1fwIt/rq/V/AC/m8xGXtzX3/xhT8JtYWvad9f9s1Qo52qrN1zh9S3h96I+CdMNPwv9NR634pBT8b0Uet/a0s1mqctTxVae6Pi8062T41dpq4aYntpxx+67ZfJV36vbZjTq2aaZ+AHXw6i7VM3rk/Xw7Ozuxjuaozfe/LgdRzb9xH8uZnx+pn+GkM33vy4D3vy4HVPtztzf4600hm+9+XAe9+XAU+3Oy/x1ppDN978uA978uAp9udl/jrTSGb735cB735cBT7c7L/HWmkM33vy4D3vy4Cn252X+OtNIZvvflwHvflwFPtzsv8daaQzfe/LgPe/LgKfbnZf4600hm+9+XAe9+XAU+3Oy/wAdaaQzfe/LgPe/LgKfbnZf460nM5iu1XhE9n8E0Z+J+tGHl8Clf9pxf7mn0fM4vRHHMxHncMJ7mJb1F6i59WcXV84vWfb/AGdHqs+v8vH7205/08/rTTkeaccO3S9PDPt6BExilzu01VUzFM8M69KDCzORsZeMaqu3ujCrfOtmU24iuIrjCP4eZuWMhFr/AHb841fJ3d0/AZW3GavdVE4fy+iadPZqx0NPIrWcll71PFTV2Rp7Kt6r7WM1mYqrj6M93q+jU2p8Nt+0i5HZHfHbqw04qXiOXpy9NFVuMOHi24ayJF67kbFFMzw7at6n4Tl6KqfaVR2933oXM/eiMvMx34Yf+UPXh1vgsUxOnt/FLn9Dhn8paptVVxT9Ls7cZ1xGt4yGTs3bFNddONU49880+c8Qz1qq3VbpnGqcO6dcTqVvD8zdwptUR9GnHHR34yv58BfszeztVMVcM9nbhj9hZ/a7n/L9yN6pf9rOcqmx9bs1cnn9Kxh4jr/61HHLZWczjNF3R/J/GNSzl/Dq7N+Lk1cURj24RH2cNbNyMZnCrp51Y/V8+H1vSv4eI6/+skR4vfmIi1oidP3Zca/EqabXsrUYapx8+PfDZir2dvjvaY0/H5mXlLc5y7N+v6vdHomnuw1akgXfDsr09vt+tVp9Ez52g4Zmx1FubeOHFh2/BOLL/ZY5/u/5J79jz/8A0vL/AI26xP2WOf7v+R+yxz/d/wAlnwNa9ZovU8NcYx6fmfOeIWLVq5FFuOHTj2zqjDS+hsWoy9uKMcYp7/hl8tmKpvVxdnRX/bGByNy7lrWVp9tZo+nTo+lPf2TpxjRKPDcv7Giblemr5pmO5wte0yNyLf1qKtGiNEYzrnTLv4pf4aPZU/Wr+aYk+B3yWd6rH6OHDh368fNGpeY81z4dbppwxxxxnHz9nZ262vTVFUYxocyMTwjtruT/AE/3Nxh+C9s3J/p/ubiz7AByJhKIS159IAOgAB5AYKAAAAAAOdy1TdjCqMYdHz9OVzljstTjHqfPKwOfiGSpy2Fy32Rq+KO+Z1trJ3ZvWaa6tM4/LMMroczmZj284Yean+2Y1Q3LduLdMU06IdSPnvGPzI8u6l9HpZviOSnMxE0fWp244eeNTlk7eborpi72W4x5NU6u3Se4HHxz/wBfrf2tfLflx6flUPFcrczHB7OOLh4se2I08OuWjZpmmiInT/FP0OoDkAAAAAAEwhMOufYkBqgAAAAAAAAAAAAAAAAAAAAyvF68LPDzfNNLVYl+rqszFH2LeOM/1U4+adMA1abUcHBVo/iyLNyfD6/ZXPy50T6MZ7IxnTLvd8Xt09lv6c+mPlpcacpezk8V+eGnuj6M7aZjVAPP0vErn/0qfnj0TphuxGHZDE6fMZL8qeOjV9GPlxnTLrZ8Wprnhqp4Z+HH+0Hnxb6U0Ua+L+12nwmzM44fi/1OFHvWb4vsW/7qPROmGxXVwxiDHzHhlm3bmqI7Yw16/hc8j4davWablUds46+aY1veZ8TtXLc00z2zhr1/Au+G0zRl6aZ0/S/FIM7KZeiM1ja+rb+H7VM62hZyfBdqu1TjM4YfFhrXKbdNMzMR2zpUs7nenwppjGqf4ebDQDPz1vpa4rszw1Vd2GOiI75x1tTJZbp7cUz9bv8Ajn4davk8lVFXtr3bcnZpjunDRg1AZFv9dX6v4EW/11fq/gd8z4jTl6+CqNvweadapkapzGYqvxGETh+GafNq1A0M5TFNqqY78Plhn5e3euZW3TanCPpcWjm7NLSzv5NXo+WHHwv9NR634pBj+IZKnK004dtU44z8XnnW+oY/jFqquimqn7OOPpmkp8Zt4dsYT6f9IL13N02rkW501Y7Ix1LTAs1TnMzFyIwop+enDzTphvgAAAAAAAAAAAAAAAAAAzszl67teMR2fwTRkIj604+XwtAaX68eIZ0jz5cqLNFv6sYOoOPPlp6eZCRhPtRzvW5uUTTE8OPfpdBB8xmsvXbri1FfHNWmOHDRESu0+E10xhF3s/o/yWc7lbNccdf0Z5u2dXdEsPqr3DNumrio7O6I8+rHS09i7kKapzHZVx0UaZww00z6dLXzdn29qaNeHyxKl4Xds8PBR9fv0+efg0Iz/iHs/wDbt/X+TRPfGE4wk+xk0VV5ngy/Lxau/wCl5tWt9ZEREYQ+Zqyl7KUxfjTGOOjs7tc4446m3lM5RmY7Oyrvj4/NGokU83kbVqzVXEfS7O3t1x51nwv9NR634pT4jVHT1ej8UKNrMdPkqZ+1OOH/AJ9p7j+xwtZjgruZjDi4eDs0aY4fLsWqfFq6oxi12f1/4q8WPZZGuqdNXDsrWcnn7FqzTRXVhVGPdVrnzKKOSzFeUiY4OLiw+1EaMfh1tLLeJTeuxamjhn+rHux1Ov7pluf7tW5n2btN7PcdE40z/ow709/oXPE8vdvxTFvtjtx0ebDSqUeH35jhmrhj4KZ+dfzefpy04TGM/D8HmnWpR4hfv/lUYetT88EeR7u5Tpctc+lxTPD3Yfa+GdarlfDZzFuLnHw8WPZw46JmNbvepzHT3JzH8uH1eb+X0PWQz9izYporqwqjHGMKuaZ7oX8+BH7NP/J9z/JRz2UnKcP0uLix7sNGHnnW2v3TLc/3atzK8UzVrMRT7OeLDix7JjVrgjz5Gt4jTXVZmKPNq1xrZfiFmLFNqiO7j+aX0TE8Z02/X/tcwNe7XFumap7nzdnOU1XpvXdPd8WHdHzPp5jFypy9unRG2SJGPmfEbV+iaMNPw64nU6eFZnGn2VX2dHp4pnua9M09yreotWMb0xhVOHb2/Aef0KHgkdlfq/3Nxj+DU4UTOvD5amwT7AByJhKIS159IAOgAB5AYKAAAAAAAAAAAAAAAAAAAAAAJhCYdc+xIDVAAAAAAAAAAAAAAAAAAAAB5imImZjTOl6AcqLNFucaYw+N1AB4mimZ4u+HsB5imImZjTKUgOfsqdToACMO9IAAAADzVTFUYToRRRFuOGnsiHsAAAAAAAAAAAAAAAAAAAAAAAAAAB5kJGM+1HO7RNdM0xOE63QQYtvwniniu1cXmww+SprW7VNqOGiMIdBfPkVLmTpmKuD6NVWHbp0eaZV8l4dTY+lV21/Jp8+Ghph5ETGPZLNp8Moouxcp+ry9urDTi0w8jHueERcrmri092H+Tvc8Nt1zTy049nb24+loh5kV8zY9vam1jw8WHbp0TEuVnIW7dEU1fSmO/tj510PIrdHa5ds73Cjw+Ld/21M9nLh/Lhpx9LQDyPFVumqcZjth7BBXzVn29ubcThjh8sSq2PDLVFERXHFV3zjMd+qJaQvkUv27L8u2rerZnwqi5h7P6GGOOmflqaweZBRzmS6qaZ4uHgx7sdOHnjUvAACDHveERdrmqK8Mf5f8ninwWIntrx9X/JtjrzI52rVNqmKKeyIdAcgACYSiEtefSADoAAeQGCgAAAAAAAAAAAAAAAAAAAAACYQmHXPsSA1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5kJGM+1AEAAAAAAAAAAAAAAAAAAAAAAAAAAAAEwlEJa8+kAHQAA8gMFAAAAAAAAAAAAAAAAAAAAAAEwhMOufYkBqgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADzISMZ9qAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAJhKIS1j0gA6AAEGCRPECMDBIlYEYGCQrAjAwSFYEYGCQrAjAwSFYFe9di1hj3u+DF8RucVfDy/PENWxc9pRFWve16/ziOees/+hnHXnqYdcDBIyrDRGBgkKwIwMEhWBGBgkKwIwMEhWBGCQXx4ABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBgkTxEiMDBIlYEYGCQrAjAwSFYEYGCQrAjAwSFYEYGCQrAjAwSFYFO1mfaVzRhhh34+bHUt4MrK/nT6Pwy1mnfHPM/jEOOJmY/OUYGCRnWHaMDBIVgRgYJCsCMDBIVgRgYJCsCMDBIVgRgYJDxAAOgAAAAAAAAAAAAAARM4RjKVPPXOC3Md874dcxaYhJnxHlh3K+Oqap72p4bcxiaZ7sPnZC1k7ns7kT3fwl7++fPMw8XE+OvL6EB857gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTlfzp9H4ZazJyv50+j8MtZt/p7/AKhl/n6/uQBi1AAAAAAAAAAAAAAAAAAAAAAAAAAAAFbMZaL+GM6FkWJmJ8wkxE/iWDnMtFjhw+1jswXf26nX5fG5eKfY9b5ms9HXfVeZ8+/LGOObdR4whIPM3AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAc6rtNMxTM9s6AdAAAAAABzi7TNXBj9KO7a6ACMYxwJnAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAycr+dPo/DLWZOV/On0fhlrNv9Pf8AUMv8/X9yAMWoAAAAAAAAAAAAAAAAAAAAAAAAAAAAADJ8U+x63zNZk+KfY9b5lvrrPNsq3N5iZ448Rn/rGJiOuvPx/wAWxU66zzbKtx11nm2VbmdOsTppbnMbWxU66zzbKtx11nm2VbinWJ0W5zG1sVOus82yrcddZ5tlW4p1idFucxtbFTrrPNsq3HXWebZVuKdYnRbnMbWxU66zzbKtx11nm2VbinWJ0W5zG1sVOus82yrcddZ5tlW4p1idFucxtbFTrrPNsq3HXWebZVuKdYnRbnMbWxU66zzbKtx11nm2VbinWJ0W5zG1sVOus82yrcddZ5tlW4p1idFucxtbFTrrPNsq3HXWebZVuKdYnRbnMbWxU66zzbKtx11nm2VbinWJ0W5zG1sVOus82yrcddZ5tlW4p1idFucxtbFTrrPNsq3HXWebZVuKdYnRbnMbWxU66zzbKtx11nm2VbinWJ0W5zG1sVOus82yrcddZ5tlW4p1idFucxtbFTrrPNsq3HXWebZVuKdYnRbnMbWxU66zzbKtx11nm2VbinWJ0W5zG1sVOus82yrcddZ5tlW4p1idFucxtbFTrrPNsq3HXWebZVuKdYnRbnMbW1DP5ucrTExGOP8ADzTrdOus82yrco+NfUp9Py0uZiY9wsTE+nvqc3/xffoVMzRmMxhM28Jp/np78Pg1NTM2LtyYm3XwR/TE/KzbPtL1XDTe7f8A7cIqz1Ob/wCP79DpZv5iquIrt8NOviplm5i5dszwxd4qtXBEbdGhqZCi/TEzfntnDCPo+fl9AF/J3Ltc103OCJ7uCJ7teLNy9q7frqoi52UYfS4Y741NfO5j2Fuau/u+OGZlclmKKMaK+DHu4aZ1+cFj9vu/833I3rVOb4r9Vjh+rh2466eLRh86jl7l+nM+yrq4ojT9GmPs4xoe7f66v1fwAi3+ur9X8DXmYpjGWRb/AF1fq/gR4tmuCn2VOmrT6OGdQI8Pib92rMVebD4ppnywefG9FHrf2rnhf6aj1vxSp+N6KPW/tBtqdjO0X65op+zh268Y+BQzOaqzdXsLGjvn4p+1Eap72nlctTlqOGn0z8fnnWCyKnXWebZVuOus82yrc7p1idObc5ja2KnXWebZVuOus82yrcU6xOi3OY2tip11nm2VbjrrPNsq3FOsTotzmNrYqddZ5tlW466zzbKtxTrE6Lc5ja2KnXWebZVuOus82yrcU6xOi3OY2tip11nm2VbjrrPNsq3FOsTotzmNrYqddZ5tlW466zzbKtxTrE6Lc5ja2KnXWebZVuOus82yrcU6xOi3OY2tip11nm2VbjrrPNsq3FOsTotzmNrYqddZ5tlW466zzbKtxTrE6Lc5ja2KnXWebZVuOus82yrcU6xOi3OY2tip11nm2VbjrrPNsq3FOsTotzmNrYqddZ5tlW466zzbKtxTrE6Lc5ja2KnXWebZVuOus82yrcU6xOi3OY2tip11nm2VbjrrPNsq3FOsTotzmNrYqddZ5tlW466zzbKtxTrE6Lc5ja2KnXWebZVuOus82yrcU6xOi3OY2tip11nm2VbjrrPNsq3FOsTotzmNrYqddZ5tlW466zzbKtxTrE6Lc5ja2KnXWebZVuOus82yrcU6xOi3OY2qZX86fR+GWsyMnVFV6ZjR/CWu7/1/+v6hx/n6/uQBi1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcrtmi79eMcPhcehs8u2retjqOpj1MuZ5ifcKnQ2eXbVvOhs8u2reti36zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW9R8Z7aaY+H+1ssbPf72Yt2o7uL8MS5mZn3KxER6dJzmYiey19+ncoZybl6OKq1wzH2uOJ1dz6RVzn5NXo+WEViZCu5ao4qLfFj9rjiNfdLRsZ+5Xei1XRw44/aie7Huh08L/TUet+KU2MrVTeru19szw4fFhOiQU64nO5jhn8u3/dT6J0w90Z+uxXNvM+iduimPgas8NGNU+liXap8SuRRR+XTpq+GMdE4TpgFjwyia+K/Vprww9GNPl2It/rq/V/A1aaYojCNCrTlOG/Vfx+th2YaqcNOPzAp2/11fq/gReyfBFy7XOMzw4fJPem3+ur9X8C9nfyavR8sAo5PNUZbK0TXOniw080+adbLz2YuZiKa6o4aO3h7YnVj59LY8Os0XMtbmqMcOLD/wApV/G9FHrf2g1bGXoy9PDRDuhkZm5VOaoopnm/DiC70Nnl21bzobPLtq3rY7v1mdua84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0qdDZ5dtW86Gzy7at62F+szsrziNKnQ2eXbVvOhs8u2rethfrM7K84jSp0Nnl21bzobPLtq3rYX6zOyvOI0428vbtdtEYemXYHMzM+1iPHoARQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQsZObd2q7VPFM4Yd3dhrXwHiuOKMIZFWQzFccNVzsn+Wne2gHGxZixRFuNEb8XYAUM3k5zMxjVhTGPZh8HnjUt2rVNqnhojCHQAZ2ZyFV+vjpr4PVx1edogM/J5CMtM1TPHVPfhhr8861nM25uW5pjTOHyu4CrkrM2LNNurTGPyzJmsrTmaeGrsnun4vPGpaAY8eF3KYwi72f0Rvd8r4dFiv2lVXHVrww1xraIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//Z" alt="img"></p>
</blockquote>
<h3 id="jsonæ¨¡å—"><a href="#jsonæ¨¡å—" class="headerlink" title="jsonæ¨¡å—"></a>jsonæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/json.html" target="_blank" rel="noopener"><code>json</code></a>æ¨¡å—ä¸»è¦æä¾›äº†2ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li><code>dumps()</code> ååºåˆ—åŒ–</li>
<li><code>loads()</code> åºåˆ—åŒ–</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> json</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic = &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>,<span class="string">'k3'</span>:<span class="string">'v3'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_dic = json.dumps(dic)  <span class="comment">#åºåˆ—åŒ–ï¼šå°†ä¸€ä¸ªå­—å…¸è½¬æ¢æˆä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>type(str_dic)</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">str</span>'&gt;</span></span><br><span class="line"><span class="class">&gt;&gt;&gt; <span class="title">str_dic</span></span></span><br><span class="line">'&#123;"k3": "v3", "k1": "v1", "k2": "v2"&#125;'</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic2 = json.loads(str_dic)  <span class="comment">#ååºåˆ—åŒ–ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²æ ¼å¼çš„å­—å…¸è½¬æ¢æˆä¸€ä¸ªå­—å…¸</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dic2</span><br><span class="line">&#123;<span class="string">'k1'</span>: <span class="string">'v1'</span>, <span class="string">'k2'</span>: <span class="string">'v2'</span>, <span class="string">'k3'</span>: <span class="string">'v3'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list_dic = [<span class="number">1</span>,[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>],<span class="number">3</span>,&#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>&#125;]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_dic = json.dumps(list_dic) <span class="comment">#ä¹Ÿå¯ä»¥å¤„ç†åµŒå¥—çš„æ•°æ®ç±»å‹ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str_dic</span><br><span class="line"><span class="string">'[1, ["a", "b", "c"], 3, &#123;"k1": "v1", "k2": "v2"&#125;]'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list_dic2 = json.loads(str_dic)</span><br><span class="line">[<span class="number">1</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">3</span>, &#123;<span class="string">'k1'</span>: <span class="string">'v1'</span>, <span class="string">'k2'</span>: <span class="string">'v2'</span>&#125;]</span><br></pre></td></tr></table></figure></div>

<p>jsonå­—ç¬¦ä¸²ä¸­çš„å¼•å·åªèƒ½ç”¨åŒå¼•å·ï¼ˆ<code>&quot;</code>ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="code"><pre><span class="line">dump()`å’Œ`<span class="keyword">load</span>()</span><br><span class="line"><span class="keyword">import</span> <span class="type">json</span></span><br><span class="line">f = <span class="keyword">open</span>(<span class="string">'json_file'</span>,<span class="string">'w'</span>)</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>,<span class="string">'k3'</span>:<span class="string">'v3'</span>&#125;</span><br><span class="line"><span class="type">json</span>.dump(dic,f)  #dumpæ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œç›´æ¥å°†å­—å…¸è½¬æ¢æˆ<span class="type">json</span>å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶</span><br><span class="line">f.<span class="keyword">close</span>()</span><br><span class="line"></span><br><span class="line">f = <span class="keyword">open</span>(<span class="string">'json_file'</span>)</span><br><span class="line">dic2 = <span class="type">json</span>.<span class="keyword">load</span>(f)  #<span class="keyword">load</span>æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œç›´æ¥å°†æ–‡ä»¶ä¸­çš„<span class="type">json</span>å­—ç¬¦ä¸²è½¬æ¢æˆæ•°æ®ç»“æ„è¿”å›</span><br><span class="line">f.<span class="keyword">close</span>()</span><br><span class="line">print(<span class="keyword">type</span>(dic2),dic2)</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p><code>ensure_ascii</code>å‚æ•°</p>
<p>å½“å®ƒä¸ºTrueçš„æ—¶å€™ï¼Œæ‰€æœ‰éASCIIç å­—ç¬¦æ˜¾ç¤ºä¸º\uXXXXåºåˆ—ï¼Œåªéœ€åœ¨dumpæ—¶å°†ensure_asciiè®¾ç½®ä¸ºFalseå³å¯ï¼Œæ­¤æ—¶å­˜å…¥jsonçš„ä¸­æ–‡å³å¯æ­£å¸¸æ˜¾ç¤º</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">f = open(<span class="string">'file'</span>,<span class="string">'w'</span>)</span><br><span class="line">json.dump(&#123;<span class="string">'å›½ç±'</span>:<span class="string">'ä¸­å›½'</span>&#125;,f)</span><br><span class="line">ret = json.dumps(&#123;<span class="string">'å›½ç±'</span>:<span class="string">'ä¸­å›½'</span>&#125;)</span><br><span class="line">f.write(ret+<span class="string">'\n'</span>)</span><br><span class="line">json.dump(&#123;<span class="string">'å›½ç±'</span>:<span class="string">'ç¾å›½'</span>&#125;,f,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">ret = json.dumps(&#123;<span class="string">'å›½ç±'</span>:<span class="string">'ç¾å›½'</span>&#125;,ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">f.write(ret+<span class="string">'\n'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></div>
</li>
<li><p><code>separators</code>å‚æ•°</p>
<p>å®é™…ä¸Šæ˜¯<code>(item_separator, dict_separator)</code>çš„ä¸€ä¸ªå…ƒç»„ï¼Œ<br>é»˜è®¤çš„å°±æ˜¯<code>(&#39;, &#39;, &#39;: &#39;)</code>ï¼Œæ³¨æ„ï¼Œå®ƒå«æœ‰ç©ºæ ¼ã€‚<br>è¿™è¡¨ç¤ºå­—å…¸å†…keysä¹‹é—´ç”¨<code>,</code>éš”å¼€ï¼Œè€Œkeyå’Œvalueä¹‹é—´ç”¨<code>:</code>éš”å¼€ã€‚</p>
</li>
<li><p><code>Skipkeys</code>å‚æ•°</p>
<p>é»˜è®¤å€¼æ˜¯Falseï¼Œ<br>å½“å«æœ‰éåŸºæœ¬ç±»å‹<code>(str,unicode,int,long,float,bool,None)</code>ï¼Œå°±ä¼šæŠ¥<code>TypeError</code>çš„é”™è¯¯ã€‚<br>æ­¤æ—¶è®¾ç½®æˆTrueï¼Œåˆ™ä¼šè·³è¿‡è¿™äº›ç±»</p>
</li>
<li><p><code>sort_keys</code>å‚æ•°</p>
<p>æ˜¯å¦å¯¹å­—å…¸æ’åºï¼ˆæŒ‰ASCIIï¼‰</p>
</li>
<li><p><code>indent</code>å‚æ•°</p>
<p>ç¼©è¿›æ˜¾ç¤ºçš„ç¼©è¿›æ•°ï¼Œå¦‚æœä¸ä¸º0ï¼Œä¼šç”Ÿæˆpretty-printed jsonã€‚</p>
</li>
</ul>
<h3 id="pickle-æ¨¡å—"><a href="#pickle-æ¨¡å—" class="headerlink" title="pickle æ¨¡å—"></a>pickle æ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/pickle.html" target="_blank" rel="noopener"><code>pickle</code></a>æ¨¡å—æä¾›äº†å››ä¸ªåŠŸèƒ½ï¼š</p>
<ul>
<li>dumpsã€dump(åºåˆ—åŒ–ï¼Œå­˜ï¼‰</li>
<li>loadsï¼ˆååºåˆ—åŒ–ï¼Œè¯»ï¼‰</li>
<li>load  ï¼ˆä¸ä»…å¯ä»¥åºåˆ—åŒ–å­—å…¸ï¼Œåˆ—è¡¨â€¦<strong>å¯ä»¥æŠŠpythonä¸­ä»»æ„çš„æ•°æ®ç±»å‹åºåˆ—åŒ–</strong>ï¼‰</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">'v1'</span>,<span class="string">'k2'</span>:<span class="string">'v2'</span>,<span class="string">'k3'</span>:<span class="string">'v3'</span>&#125;</span><br><span class="line">str_dic = pickle.dumps(dic)</span><br><span class="line">print(str_dic)  <span class="comment">#ä¸€ä¸²äºŒè¿›åˆ¶å†…å®¹</span></span><br><span class="line"></span><br><span class="line">dic2 = pickle.loads(str_dic)</span><br><span class="line">print(dic2)    <span class="comment">#å­—å…¸</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">struct_time  = time.localtime(<span class="number">1000000000</span>)</span><br><span class="line">print(struct_time)</span><br><span class="line">f = open(<span class="string">'pickle_file'</span>,<span class="string">'wb'</span>)</span><br><span class="line">pickle.dump(struct_time,f)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'pickle_file'</span>,<span class="string">'rb'</span>)</span><br><span class="line">struct_time2 = pickle.load(f)</span><br><span class="line">print(struct_time2.tm_year)</span><br></pre></td></tr></table></figure></div>

<h3 id="shelveæ¨¡å—"><a href="#shelveæ¨¡å—" class="headerlink" title="shelveæ¨¡å—"></a>shelveæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/shelve.html" target="_blank" rel="noopener"><code>shelve</code></a>æ¨¡å—æ˜¯ç§ç®€å•çš„æ•°æ®å­˜å‚¨æ–¹æ¡ˆï¼Œå®ƒåªæœ‰ä¸€ä¸ªå‡½æ•°å°±æ˜¯open()ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°å°±æ˜¯æ–‡ä»¶åï¼Œå¹¶ä¸”æ–‡ä»¶åå¿…é¡»æ˜¯.batç±»å‹çš„ã€‚ç„¶åè¿”å›ä¸€ä¸ªshelfå¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å­˜å‚¨ä¸œè¥¿ï¼Œå®ƒå°±åƒä¸€ä¸ªæ™®é€šçš„å­—å…¸ï¼Œkeyå¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼Œè€Œå€¼å¯ä»¥æ˜¯pythonæ‰€æ”¯æŒçš„æ•°æ®ç±»å‹ ï¼Œå½“ä½ å­˜å‚¨å®Œæ¯•çš„æ—¶å€™ï¼Œå°±è°ƒç”¨closeå‡½æ•°æ¥å…³é—­ã€‚<br>æŠŠopenæ–¹æ³•çš„<strong>writeback</strong>å‚æ•°çš„å€¼èµ‹ä¸ºTrueï¼Œè¿™æ ·çš„è¯ï¼Œä½ openåæ‰€æœ‰çš„å†…å®¹éƒ½å°†åœ¨cacheä¸­ï¼Œå½“ä½ closeçš„æ—¶å€™ï¼Œå°†å…¨éƒ¨ä¸€æ¬¡æ€§å†™åˆ°ç¡¬ç›˜é‡Œé¢ã€‚å¦‚æœæ•°æ®é‡ä¸æ˜¯å¾ˆå¤§çš„æ—¶å€™ï¼Œå»ºè®®è¿™ä¹ˆåšã€‚</p>
<h4 id="å†™å…¥"><a href="#å†™å…¥" class="headerlink" title="å†™å…¥"></a>å†™å…¥</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> shelve</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"> </span><br><span class="line">info = &#123;<span class="string">'name'</span>: <span class="string">'bigberg'</span>, <span class="string">'age'</span>: <span class="number">22</span>&#125;</span><br><span class="line">name = [<span class="string">'Apoll'</span>, <span class="string">'Zous'</span>, <span class="string">'Luna'</span>]</span><br><span class="line">t = datetime.datetime.now()</span><br><span class="line"> </span><br><span class="line"><span class="keyword">with</span> shelve.open(<span class="string">'shelve.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">  f[<span class="string">'name'</span>] = name  <span class="comment"># æŒä¹…åŒ–åˆ—è¡¨</span></span><br><span class="line">  f[<span class="string">'info'</span>] = info     <span class="comment"># æŒä¹…åŒ–å­—å…¸</span></span><br><span class="line">  f[<span class="string">'time'</span>] = t      <span class="comment"># æŒä¹…åŒ–æ—¶é—´ç±»å‹</span></span><br></pre></td></tr></table></figure></div>

<p>æ‰§è¡Œä»£ç åä¼šç”Ÿæˆ3ä¸ªæ–‡ä»¶ï¼š<code>shelve.txt.bak</code>ã€<code>shelve.txt.dat</code>ã€<code>shelve.txt.dir</code>ã€‚</p>
<h4 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> shelve</span><br><span class="line"> </span><br><span class="line"><span class="keyword">with</span> shelve.open(<span class="string">'shelve.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">  n = f.get(<span class="string">'name'</span>)</span><br><span class="line">  i = f.get(<span class="string">'info'</span>)</span><br><span class="line">  now = f.get(<span class="string">'time'</span>)</span><br><span class="line"> </span><br><span class="line">print(n)</span><br><span class="line">print(i)</span><br><span class="line">print(now)</span><br><span class="line"> </span><br><span class="line"><span class="comment">#è¾“å‡º</span></span><br><span class="line"> </span><br><span class="line">[<span class="string">'Apoll'</span>, <span class="string">'Zous'</span>, <span class="string">'Luna'</span>]</span><br><span class="line">&#123;<span class="string">'age'</span>: <span class="number">22</span>, <span class="string">'name'</span>: <span class="string">'bigberg'</span>&#125;</span><br><span class="line"><span class="number">2017</span><span class="number">-07</span><span class="number">-08</span> <span class="number">11</span>:<span class="number">07</span>:<span class="number">34.865022</span></span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåå…­)</title>
    <url>/blog/Python/Python_id_44.html</url>
    <content><![CDATA[<h2 id="åŠ å¯†æœ‰å…³æ¨¡å—"><a href="#åŠ å¯†æœ‰å…³æ¨¡å—" class="headerlink" title="åŠ å¯†æœ‰å…³æ¨¡å—"></a>åŠ å¯†æœ‰å…³æ¨¡å—</h2><h3 id="hashlibæ¨¡å—"><a href="#hashlibæ¨¡å—" class="headerlink" title="hashlibæ¨¡å—"></a>hashlibæ¨¡å—</h3><p>å†…ç½®æ¨¡å—<a href="https://docs.python.org/zh-cn/3/library/hashlib.html" target="_blank" rel="noopener"><code>hashlib</code></a>æä¾›äº†å¸¸è§çš„æ‘˜è¦ç®—æ³•ï¼Œå¦‚MD5ï¼ŒSHA1ç­‰ç­‰ã€‚</p>
<a id="more"></a>

<blockquote>
<p>ä»€ä¹ˆæ˜¯æ‘˜è¦ç®—æ³•å‘¢ï¼Ÿæ‘˜è¦ç®—æ³•åˆç§°å“ˆå¸Œç®—æ³•ã€æ•£åˆ—ç®—æ³•ã€‚å®ƒé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠä»»æ„é•¿åº¦çš„æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªé•¿åº¦å›ºå®šçš„æ•°æ®ä¸²ï¼ˆé€šå¸¸ç”¨16è¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰ã€‚ æ‘˜è¦ç®—æ³•å°±æ˜¯é€šè¿‡æ‘˜è¦å‡½æ•°f()å¯¹ä»»æ„é•¿åº¦çš„æ•°æ®dataè®¡ç®—å‡ºå›ºå®šé•¿åº¦çš„æ‘˜è¦digestï¼Œç›®çš„æ˜¯ä¸ºäº†å‘ç°åŸå§‹æ•°æ®æ˜¯å¦è¢«äººç¯¡æ”¹è¿‡ã€‚ æ‘˜è¦ç®—æ³•ä¹‹æ‰€ä»¥èƒ½æŒ‡å‡ºæ•°æ®æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ï¼Œå°±æ˜¯å› ä¸ºæ‘˜è¦å‡½æ•°æ˜¯ä¸€ä¸ªå•å‘å‡½æ•°ï¼Œè®¡ç®—f(data)å¾ˆå®¹æ˜“ï¼Œä½†é€šè¿‡digeståæ¨dataå´éå¸¸å›°éš¾ã€‚è€Œä¸”ï¼Œå¯¹åŸå§‹æ•°æ®åšä¸€ä¸ªbitçš„ä¿®æ”¹ï¼Œéƒ½ä¼šå¯¼è‡´è®¡ç®—å‡ºçš„æ‘˜è¦å®Œå…¨ä¸åŒã€‚</p>
</blockquote>
<p>æˆ‘ä»¬ä»¥å¸¸è§çš„æ‘˜è¦ç®—æ³•MD5ä¸ºä¾‹ï¼Œè®¡ç®—å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„MD5å€¼ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line">md5 = hashlib.md5()</span><br><span class="line">md5.update(<span class="string">'how to use md5 in python hashlib?'</span>.encode())</span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¡ç®—ç»“æœå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>md5.hexdigest()</span><br><span class="line"><span class="string">'d26a53750bc40b38b65a520292f69306'</span></span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œå¯ä»¥åˆ†å—å¤šæ¬¡è°ƒç”¨update()ï¼Œæœ€åè®¡ç®—çš„ç»“æœæ˜¯ä¸€æ ·çš„</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">md5 = hashlib.md5()</span><br><span class="line">md5.update(<span class="string">'how to use md5 in '</span>.encode())</span><br><span class="line">md5.update(<span class="string">'python hashlib?'</span>.encode())</span><br><span class="line">print(md5.hexdigest())</span><br></pre></td></tr></table></figure></div>

<p>MD5æ˜¯æœ€å¸¸è§çš„æ‘˜è¦ç®—æ³•ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œç”Ÿæˆç»“æœæ˜¯å›ºå®šçš„128 bitå­—èŠ‚ï¼Œé€šå¸¸ç”¨ä¸€ä¸ª32ä½çš„16è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å¦ä¸€ç§å¸¸è§çš„æ‘˜è¦ç®—æ³•æ˜¯SHA1ï¼Œè°ƒç”¨SHA1å’Œè°ƒç”¨MD5å®Œå…¨ç±»ä¼¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"> </span><br><span class="line">sha1 = hashlib.sha1()</span><br><span class="line">sha1.update(<span class="string">'how to use sha1 in '</span>.encode())</span><br><span class="line">sha1.update(<span class="string">'python hashlib?'</span>.encode())</span><br><span class="line">print(md5.hexdigest())</span><br></pre></td></tr></table></figure></div>

<p>SHA1çš„ç»“æœæ˜¯160 bitå­—èŠ‚ï¼Œé€šå¸¸ç”¨ä¸€ä¸ª40ä½çš„16è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æ¯”SHA1æ›´å®‰å…¨çš„ç®—æ³•æ˜¯SHA256å’ŒSHA512ï¼Œä¸è¿‡è¶Šå®‰å…¨çš„ç®—æ³•è¶Šæ…¢ï¼Œè€Œä¸”æ‘˜è¦é•¿åº¦æ›´é•¿ã€‚</p>
<h3 id="hmacæ¨¡å—"><a href="#hmacæ¨¡å—" class="headerlink" title="hmacæ¨¡å—"></a>hmacæ¨¡å—</h3><p>Keyed-Hashing for Message Authenticationã€‚å®ƒé€šè¿‡ä¸€ä¸ªæ ‡å‡†ç®—æ³•ï¼Œåœ¨è®¡ç®—å“ˆå¸Œçš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠkeyæ··å…¥è®¡ç®—è¿‡ç¨‹ä¸­ã€‚Hmacç®—æ³•é’ˆå¯¹æ‰€æœ‰å“ˆå¸Œç®—æ³•éƒ½é€šç”¨ï¼Œæ— è®ºæ˜¯MD5è¿˜æ˜¯SHA-1ã€‚é‡‡ç”¨Hmacæ›¿ä»£æˆ‘ä»¬è‡ªå·±çš„saltç®—æ³•ï¼Œå¯ä»¥ä½¿ç¨‹åºç®—æ³•æ›´æ ‡å‡†åŒ–ï¼Œä¹Ÿæ›´å®‰å…¨ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> hmac</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>message = <span class="string">b'Hello, world!'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>key = <span class="string">b'secret'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h = hmac.new(key, message, digestmod=<span class="string">'MD5'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># å¦‚æœæ¶ˆæ¯å¾ˆé•¿ï¼Œå¯ä»¥å¤šæ¬¡è°ƒç”¨h.update(msg)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>h.hexdigest()</span><br><span class="line"><span class="string">'fa4ee7d173f2d97ee79022d1a7355bcf'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="base64æ¨¡å—"><a href="#base64æ¨¡å—" class="headerlink" title="base64æ¨¡å—"></a>base64æ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/base64.html" target="_blank" rel="noopener"><code>base64</code></a>æ¨¡å—å®ƒä¹Ÿä¸ç®—åŠ å¯†ï¼Œåªæ˜¯äºŒè¿›åˆ¶æ˜¾ç¤ºçš„åŒºåˆ«ã€‚<br>è§£ç éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½æ•°ä¸å¤Ÿ ç­‰å·æ¥å‡‘ã€‚<br>å…·ä½“ç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ã€‚æœ€å¸¸ç”¨çš„ç¼–ç å’Œè§£ç çš„APIä¸ºï¼š</p>
<ul>
<li><code>base64.b64encode(s, altchars=None)</code></li>
<li><code>base64.b64decode(s, altchars=None, validate=False)</code></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>base64.b64encode(<span class="string">b'nanarino'</span>, altchars=<span class="literal">None</span>)</span><br><span class="line"><span class="string">b'bmFuYXJpbm8='</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>base64.b64decode(<span class="string">b'bmFuYXJpbm8='</span>,altchars=<span class="literal">None</span>, validate=<span class="literal">False</span>)</span><br><span class="line"><span class="string">b'nanarino'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="pycryptæ¨¡å—"><a href="#pycryptæ¨¡å—" class="headerlink" title="pycryptæ¨¡å—"></a>pycryptæ¨¡å—</h3><p>åŠ å¯†ä¸åŒäºæ‘˜è¦ï¼ŒåŠ å¯†æ˜¯ä¸€ä¸ªå¯é€†çš„è¿‡ç¨‹ã€‚<br>Pythonä¸­å¸¸ç”¨çš„åŠ å¯†æ¨¡å—æ˜¯ç¬¬ä¸‰æ–¹æ¨¡å—<code>pycrypt</code><br>åœ¨Windowsç³»ç»Ÿä¸­å¯ç”¨çš„æ¨¡å—åå­—å«<code>pycryptodomex</code></p>
<p>æä¾›äº†å¸¸ç”¨çš„å‡ ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼ˆAESç­‰ï¼‰<br>å…·ä½“ç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ã€‚ä½¿ç”¨ASEåŠ å¯†å’Œè§£å¯†çš„ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">from</span> Cryptodome.Cipher <span class="keyword">import</span> AES</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯†é’¥é•¿åº¦å¿…é¡»ä¸º16ã€24æˆ–32ä½ï¼Œåˆ†åˆ«å¯¹åº”AES-128ã€AES-192å’ŒAES-256,è¿™é‡Œä½¿ç”¨16ä½</span></span><br><span class="line">aes = AES.new(str.encode(<span class="string">'1234567890123456'</span>), AES.MODE_ECB)</span><br><span class="line"></span><br><span class="line">msg = <span class="string">'å¾…åŠ å¯†æ–‡æœ¬'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¾…åŠ å¯†æ–‡æœ¬é•¿åº¦éœ€è¦æ˜¯ä¸º16çš„å€æ•° ä¸å¤Ÿéœ€è¦è¡¥'\0'ï¼Œåä¹‹ è§£å¯†åä¹Ÿéœ€è¦å»é™¤å¤šä½™çš„'\0'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_to_16</span><span class="params">(s)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> len(s) % <span class="number">16</span> != <span class="number">0</span>:</span><br><span class="line">        s += <span class="string">'\0'</span></span><br><span class="line">    <span class="keyword">return</span> str.encode(s)</span><br><span class="line"></span><br><span class="line">encrypted_text = str(base64.encodebytes(aes.encrypt(add_to_16(msg))),</span><br><span class="line">                     encoding=<span class="string">'utf8'</span>).replace(<span class="string">'\n'</span>, <span class="string">''</span>)  <span class="comment"># åŠ å¯†</span></span><br><span class="line">decrypted_text = str(</span><br><span class="line">    aes.decrypt(base64.decodebytes(bytes(</span><br><span class="line">        encrypted_text, encoding=<span class="string">'utf8'</span>))).rstrip(<span class="string">b'\0'</span>).decode(<span class="string">"utf8"</span>))  <span class="comment"># è§£å¯†</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'åŠ å¯†å€¼ï¼š'</span>, encrypted_text)</span><br><span class="line">print(<span class="string">'è§£å¯†å€¼ï¼š'</span>, decrypted_text)</span><br></pre></td></tr></table></figure></div>

<h3 id="zlibæ¨¡å—"><a href="#zlibæ¨¡å—" class="headerlink" title="zlibæ¨¡å—"></a>zlibæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/zlib.html" target="_blank" rel="noopener"><code>zlib</code></a>æ¨¡å—é€šè¿‡å“ˆå¤«æ›¼ç¼–ç å¯¹äºŒè¿›åˆ¶æ•°æ®çš„å‹ç¼©ï¼Œå…·ä½“ç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ã€‚å¸¸ç”¨APIï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å‹ç¼©äºŒè¿›åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line">msg = zlib.compress(msg)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è§£å‹äºŒè¿›åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line">msg = zlib.decompress(msg)</span><br></pre></td></tr></table></figure></div>

<h3 id="uuidæ¨¡å—"><a href="#uuidæ¨¡å—" class="headerlink" title="uuidæ¨¡å—"></a>uuidæ¨¡å—</h3><p><a href="https://docs.python.org/zh-cn/3/library/uuid.html" target="_blank" rel="noopener"><code>uuid</code></a>æ¨¡å¼æ˜¯ç”¨æ¥ç”Ÿæˆå”¯ä¸€æ ‡è¯†çš„å·¥å…·<br>å…·ä½“ç”¨æ³•è¯·å‚è€ƒæ–‡æ¡£ã€‚ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line">print(uuid.uuid3(uuid.NAMESPACE_DNS,<span class="string">"alice"</span>))</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåäº”)</title>
    <url>/blog/Python/Python_id_43.html</url>
    <content><![CDATA[<h2 id="æ¨¡å—å’ŒåŒ…"><a href="#æ¨¡å—å’ŒåŒ…" class="headerlink" title="æ¨¡å—å’ŒåŒ…"></a>æ¨¡å—å’ŒåŒ…</h2><blockquote>
<p>pythonçš„æ¨¡å—éƒ½æ˜¯å¤©ç„¶çš„å•ä¾‹</p>
</blockquote>
<h3 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h3><a id="more"></a>

<p>importåŠ è½½çš„æ¨¡å—åˆ†ä¸ºå››ä¸ªé€šç”¨ç±»åˆ«ï¼š</p>
<ul>
<li>ä½¿ç”¨pythonç¼–å†™çš„ä»£ç ï¼ˆ.pyæ–‡ä»¶ï¼‰</li>
<li>å·²è¢«ç¼–è¯‘ä¸ºå…±äº«åº“æˆ–DLLçš„Cæˆ–C++æ‰©å±•</li>
<li>åŒ…å¥½ä¸€ç»„æ¨¡å—çš„åŒ…</li>
<li>ä½¿ç”¨Cç¼–å†™å¹¶é“¾æ¥åˆ°pythonè§£é‡Šå™¨çš„å†…ç½®æ¨¡å—</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä»<code>sys.modules</code>ä¸­æ‰¾åˆ°å½“å‰å·²ç»åŠ è½½çš„æ¨¡å—ï¼Œ<br><code>sys.modules</code>æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå†…éƒ¨åŒ…å«æ¨¡å—åä¸æ¨¡å—å¯¹è±¡çš„æ˜ å°„ï¼Œ<br>è¯¥å­—å…¸å†³å®šäº†å¯¼å…¥æ¨¡å—æ—¶æ˜¯å¦éœ€è¦é‡æ–°å¯¼å…¥ã€‚</p>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>è‡ªå®šä¹‰æ¨¡å—æ–‡ä»¶å<code>my_module.py</code>,æ¨¡å—å<code>my_module</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#my_module.py</span></span><br><span class="line">print(<span class="string">'from the my_module.py'</span>)</span><br><span class="line"></span><br><span class="line">money = <span class="number">1000</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'my_module-&gt;read1-&gt;money'</span>,money)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'my_module-&gt;read2 calling read1'</span>)</span><br><span class="line">    read1()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">global</span> money</span><br><span class="line">    money=<span class="number">0</span></span><br></pre></td></tr></table></figure></div>

<p>æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åç§°ç©ºé—´ï¼Œå®šä¹‰åœ¨è¿™ä¸ªæ¨¡å—ä¸­çš„å‡½æ•°ï¼ŒæŠŠè¿™ä¸ªæ¨¡å—çš„åç§°ç©ºé—´å½“åšå…¨å±€åç§°ç©ºé—´ï¼Œ<br>è¿™æ ·æˆ‘ä»¬åœ¨ç¼–å†™è‡ªå·±çš„æ¨¡å—æ—¶ï¼Œå°±ä¸ç”¨æ‹…å¿ƒæˆ‘ä»¬å®šä¹‰åœ¨è‡ªå·±æ¨¡å—ä¸­å…¨å±€å˜é‡ä¼šåœ¨è¢«å¯¼å…¥æ—¶ï¼Œä¸ä½¿ç”¨è€…çš„å…¨å±€å˜é‡å†²çª<br>åŒæ—¶æ¨¡å—ä¹Ÿæ˜¯å•ä¾‹ç±»ï¼Œå¤šæ¬¡å¯¼å…¥ï¼Œâ€™from the my_module.pyâ€™ä¹Ÿåªè¢«printä¸€æ¬¡ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æµ‹è¯•ï¼šæ‰§è¡Œmy_module.change()æ“ä½œçš„å…¨å±€å˜é‡moneyä»ç„¶æ˜¯my_moduleä¸­çš„</span></span><br><span class="line"><span class="comment">#demo.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> my_module</span><br><span class="line"></span><br><span class="line">money = <span class="number">1</span></span><br><span class="line">my_module.change() <span class="comment"># æ”¹å˜çš„æ˜¯my_module.money</span></span><br><span class="line"></span><br><span class="line">print(money)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">æ‰§è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="string">from the my_module.py</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>

<h4 id="åœ¨ä¸€è¡Œå¯¼å…¥å¤šä¸ªæ¨¡å—"><a href="#åœ¨ä¸€è¡Œå¯¼å…¥å¤šä¸ªæ¨¡å—" class="headerlink" title="åœ¨ä¸€è¡Œå¯¼å…¥å¤šä¸ªæ¨¡å—"></a>åœ¨ä¸€è¡Œå¯¼å…¥å¤šä¸ªæ¨¡å—</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> sys, os, re</span><br></pre></td></tr></table></figure></div>

<h4 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> my_module <span class="keyword">as</span> sm</span><br></pre></td></tr></table></figure></div>

<h4 id="from-â€¦-importâ€¦"><a href="#from-â€¦-importâ€¦" class="headerlink" title="from â€¦ importâ€¦"></a>from â€¦ importâ€¦</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> my_module <span class="keyword">import</span> read1, read2</span><br><span class="line"></span><br><span class="line">my_module.read1() <span class="comment">#å¯ç”¨</span></span><br><span class="line">read1() <span class="comment">#å¯ç”¨</span></span><br></pre></td></tr></table></figure></div>

<p>å¦‚æœå½“å‰å‘½åç©ºé—´æœ‰é‡åread1æˆ–è€…read2ï¼Œé‚£ä¹ˆä¼šæœ‰è¦†ç›–æ•ˆæœã€‚</p>
<h5 id="å¯¼å…¥å¤šè¡Œ"><a href="#å¯¼å…¥å¤šè¡Œ" class="headerlink" title="å¯¼å…¥å¤šè¡Œ"></a>å¯¼å…¥å¤šè¡Œ</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> my_module <span class="keyword">import</span> (read1,</span><br><span class="line">                  read2,</span><br><span class="line">                  money)</span><br></pre></td></tr></table></figure></div>

<h5 id="åˆ«å-1"><a href="#åˆ«å-1" class="headerlink" title="åˆ«å"></a>åˆ«å</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> my_module <span class="keyword">import</span> read1 <span class="keyword">as</span> read</span><br></pre></td></tr></table></figure></div>

<h5 id="å…¨éƒ¨å¯¼å…¥"><a href="#å…¨éƒ¨å¯¼å…¥" class="headerlink" title="å…¨éƒ¨å¯¼å…¥"></a>å…¨éƒ¨å¯¼å…¥</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> my_module <span class="keyword">import</span> * <span class="comment">#å°†æ¨¡å—my_moduleä¸­æ‰€æœ‰çš„åå­—éƒ½å¯¼å…¥åˆ°å½“å‰åç§°ç©ºé—´</span></span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ—¶éœ€è¦åœ¨åœ¨<code>my_module.py</code>ä¸­æ–°å¢ä¸€è¡Œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">__all__ = [<span class="string">'money'</span>,<span class="string">'read1'</span>]</span><br></pre></td></tr></table></figure></div>

<p>è¿™æ ·åœ¨å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸­ç”¨<code>from my_module import *</code>å°±è¿™èƒ½å¯¼å…¥åˆ—è¡¨ä¸­è§„å®šçš„ä¸¤ä¸ªåå­—</p>
<h4 id="æ¨¡å—çš„åŠ è½½ä¸ä¿®æ”¹"><a href="#æ¨¡å—çš„åŠ è½½ä¸ä¿®æ”¹" class="headerlink" title="æ¨¡å—çš„åŠ è½½ä¸ä¿®æ”¹"></a>æ¨¡å—çš„åŠ è½½ä¸ä¿®æ”¹</h4><p>æ¯ä¸ªæ¨¡å—ç›¸å½“äºå•ä¾‹ç±»ï¼Œå¯¼å…¥ä¸€æ¬¡ç«‹è¢«å®ä¾‹åŒ–ï¼Œæ”¾å…¥å­—å…¸<code>sys.modules</code>ä¸­äº†ã€‚<br>pythonä¸æ”¯æŒé‡æ–°åŠ è½½æˆ–å¸è½½ä¹‹å‰å¯¼å…¥çš„æ¨¡å—<br>å¦‚æœåªæ˜¯ä½ æƒ³äº¤äº’æµ‹è¯•çš„ä¸€ä¸ªæ¨¡å—ï¼Œä½¿ç”¨<code>importlib.reload(modulename)</code>ï¼Œ<br>è€Œä¸”è¿™åªèƒ½ç”¨äºæµ‹è¯•ç¯å¢ƒã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#aa.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'func1'</span>)</span><br><span class="line"><span class="keyword">import</span> time, importlib</span><br><span class="line"><span class="keyword">import</span> aa</span><br><span class="line"> </span><br><span class="line">time.sleep(<span class="number">20</span>)</span><br><span class="line"><span class="comment"># importlib.reload(aa)</span></span><br><span class="line">aa.func1()</span><br></pre></td></tr></table></figure></div>

<p>åœ¨20ç§’çš„ç­‰å¾…æ—¶é—´é‡Œï¼Œä¿®æ”¹aa.pyä¸­func1çš„å†…å®¹ï¼Œç­‰å¾…test.pyçš„ç»“æœã€‚<br>æ‰“å¼€importlibæ³¨é‡Šï¼Œé‡æ–°æµ‹è¯•</p>
<h4 id="æŠŠæ¨¡å—å½“åšè„šæœ¬æ‰§è¡Œ"><a href="#æŠŠæ¨¡å—å½“åšè„šæœ¬æ‰§è¡Œ" class="headerlink" title="æŠŠæ¨¡å—å½“åšè„šæœ¬æ‰§è¡Œ"></a>æŠŠæ¨¡å—å½“åšè„šæœ¬æ‰§è¡Œ</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡å—çš„å…¨å±€å˜é‡<code>__name__</code>æ¥æŸ¥çœ‹æ¨¡å—åï¼š<br>å½“åšè„šæœ¬è¿è¡Œï¼š<br><code>__name__</code>ç­‰äº<code>&#39;__main__&#39;</code><br>å½“åšæ¨¡å—å¯¼å…¥ï¼š<br><code>__name__</code>= æ¨¡å—å<br>ä½œç”¨ï¼šç”¨æ¥æ§åˆ¶.pyæ–‡ä»¶åœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸‹æ‰§è¡Œä¸åŒçš„é€»è¾‘</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line">if <span class="strong">__name__</span> == '<span class="strong">__main__</span>':</span><br></pre></td></tr></table></figure></div>

<h4 id="æ¨¡å—æœç´¢è·¯å¾„"><a href="#æ¨¡å—æœç´¢è·¯å¾„" class="headerlink" title="æ¨¡å—æœç´¢è·¯å¾„"></a>æ¨¡å—æœç´¢è·¯å¾„</h4><p>pythonè§£é‡Šå™¨åœ¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åŠ è½½ä¸€äº›æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨<code>sys.modules</code>æŸ¥çœ‹<br>æ¨¡å—çš„æŸ¥æ‰¾é¡ºåºæ˜¯ï¼šå†…å­˜ä¸­å·²ç»åŠ è½½çš„æ¨¡å—-&gt;å†…ç½®æ¨¡å—-&gt;sys.pathè·¯å¾„ä¸­åŒ…å«çš„æ¨¡å—<br>åœ¨åˆå§‹åŒ–åï¼Œpythonç¨‹åºå¯ä»¥ä¿®æ”¹<code>sys.path</code>,è·¯å¾„æ”¾åˆ°å‰é¢çš„ä¼˜å…ˆäºæ ‡å‡†åº“è¢«åŠ è½½</p>
<h4 id="ç¼–è¯‘pythonæ–‡ä»¶"><a href="#ç¼–è¯‘pythonæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘pythonæ–‡ä»¶"></a>ç¼–è¯‘pythonæ–‡ä»¶</h4><p>ä¸ºäº†æé«˜åŠ è½½æ¨¡å—çš„é€Ÿåº¦ï¼Œå¼ºè°ƒå¼ºè°ƒå¼ºè°ƒï¼šæé«˜çš„æ˜¯åŠ è½½é€Ÿåº¦è€Œç»éè¿è¡Œé€Ÿåº¦ã€‚<br>pythonè§£é‡Šå™¨ä¼šåœ¨<code>__pycache__</code>ç›®å½•ä¸­ä¸‹ç¼“å­˜æ¯ä¸ªæ¨¡å—ç¼–è¯‘åçš„ç‰ˆæœ¬ï¼Œ<br>æ ¼å¼ä¸ºï¼šmodule.version.pycã€‚<br>é€šå¸¸ä¼šåŒ…å«pythonçš„ç‰ˆæœ¬å·ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨CPython3.3ç‰ˆæœ¬ä¸‹ï¼Œ<br><code>my_module.py</code>æ¨¡å—ä¼šè¢«ç¼“å­˜æˆ<code>__pycache__/my_module.cpython-33.pyc</code>ã€‚<br>è¿™ç§å‘½åè§„èŒƒä¿è¯äº†ç¼–è¯‘åçš„ç»“æœå¤šç‰ˆæœ¬å…±å­˜ã€‚</p>
<h4 id="dir-å‡½æ•°"><a href="#dir-å‡½æ•°" class="headerlink" title="dir()å‡½æ•°"></a><code>dir()</code>å‡½æ•°</h4><p>å†…ç½®å‡½æ•°<code>dir()</code>å¯ä»¥ç”¨æ¥æŸ¥æ‰¾æ¨¡å—ä¸­å®šä¹‰çš„åå­—ï¼Œè¿”å›ä¸€ä¸ªæœ‰åºå­—ç¬¦ä¸²åˆ—è¡¨</p>
<h3 id="åŒ…"><a href="#åŒ…" class="headerlink" title="åŒ…"></a>åŒ…</h3><p>åŒ…æ˜¯ä¸€ç§é€šè¿‡ä½¿ç”¨<code>.æ¨¡å—å</code>æ¥ç»„ç»‡pythonæ¨¡å—åç§°ç©ºé—´çš„æ–¹å¼ã€‚</p>
<ul>
<li>æ— è®ºæ˜¯importå½¢å¼è¿˜æ˜¯fromâ€¦importå½¢å¼ï¼Œå‡¡æ˜¯åœ¨å¯¼å…¥è¯­å¥ä¸­ï¼ˆè€Œä¸æ˜¯åœ¨ä½¿ç”¨æ—¶ï¼‰é‡åˆ°å¸¦ç‚¹çš„ï¼Œéƒ½æ˜¯å…³äºåŒ…ç‹¬æœ‰çš„å¯¼å…¥è¯­æ³•ï¼Œå¦‚<code>from moviepy.editor import *</code></li>
<li>åŒ…æ˜¯ç›®å½•çº§çš„ï¼ˆæ–‡ä»¶å¤¹çº§ï¼‰ï¼ŒåŒ…çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªåŒ…å«<code>__init__.py</code>æ–‡ä»¶çš„ç›®å½•</li>
<li><ul>
<li>importå¯¼å…¥æ–‡ä»¶æ—¶ï¼Œäº§ç”Ÿåç§°ç©ºé—´ä¸­çš„åå­—æ¥æºäºæ–‡ä»¶ï¼Œ</li>
<li>import åŒ…æ—¶ï¼Œäº§ç”Ÿçš„åç§°ç©ºé—´çš„åå­—åŒæ ·æ¥æºäºæ–‡ä»¶ï¼Œå³åŒ…ä¸‹çš„<code>__init__.py</code>ï¼Œå¯¼å…¥åŒ…æœ¬è´¨å°±æ˜¯åœ¨å¯¼å…¥è¯¥æ–‡ä»¶</li>
</ul>
</li>
</ul>
<p><strong>å¼ºè°ƒï¼š</strong></p>
<p>\1. è€Œåœ¨python2ä¸­ï¼ŒåŒ…ä¸‹æ²¡æœ‰<code>__init__.py</code>æ–‡ä»¶ï¼ŒimportåŒ…ä¼šæŠ¥é”™ ã€€ã€€2. åˆ›å»ºåŒ…çš„ç›®çš„ä¸æ˜¯ä¸ºäº†è¿è¡Œï¼Œè€Œæ˜¯è¢«å¯¼å…¥ä½¿ç”¨ï¼Œè®°ä½ï¼ŒåŒ…åªæ˜¯æ¨¡å—çš„ä¸€ç§å½¢å¼è€Œå·²ï¼ŒåŒ…å³æ¨¡å—</p>
<h4 id="ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥"><a href="#ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥" class="headerlink" title="ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥"></a>ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥</h4><h5 id="å†…éƒ¨äº’è°ƒ"><a href="#å†…éƒ¨äº’è°ƒ" class="headerlink" title="å†…éƒ¨äº’è°ƒ"></a>å†…éƒ¨äº’è°ƒ</h5><p>æˆ‘ä»¬çš„æœ€é¡¶çº§åŒ…glanceæ˜¯å†™ç»™åˆ«äººç”¨çš„ï¼Œ(ç»“æ„å›¾è§æœ€ä¸‹)<br>ç„¶ååœ¨glanceåŒ…å†…éƒ¨ä¹Ÿä¼šæœ‰å½¼æ­¤ä¹‹é—´äº’ç›¸å¯¼å…¥çš„éœ€æ±‚ï¼Œè¿™æ—¶å€™å°±æœ‰ç»å¯¹å¯¼å…¥å’Œç›¸å¯¹å¯¼å…¥ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç»å¯¹å¯¼å…¥ï¼šä»¥glanceä½œä¸ºèµ·å§‹</li>
<li>ç›¸å¯¹å¯¼å…¥ï¼šç”¨<code>.</code>æˆ–è€…<code>..</code>çš„æ–¹å¼ä¸ºèµ·å§‹ï¼ˆåªèƒ½åœ¨ä¸€ä¸ªåŒ…ä¸­ä½¿ç”¨ï¼Œä¸èƒ½ç”¨äºä¸åŒç›®å½•å†…ï¼‰</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç»å¯¹å¯¼å…¥</span></span><br><span class="line"><span class="keyword">from</span> glance.cmd <span class="keyword">import</span> manage</span><br><span class="line">manage.main()</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç›¸å¯¹å¯¼å…¥</span></span><br><span class="line"><span class="keyword">from</span> ..cmd <span class="keyword">import</span> manage</span><br><span class="line">manage.main()</span><br></pre></td></tr></table></figure></div>

<p>å¤–éƒ¨æµ‹è¯•ç»“æœï¼šæ³¨æ„ä¸€å®šè¦åœ¨äºglanceåŒçº§çš„æ–‡ä»¶ä¸­æµ‹è¯•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> glance.api <span class="keyword">import</span> versions</span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„ï¼š</p>
<p>åœ¨ä½¿ç”¨pycharmæ—¶ï¼Œæœ‰çš„æƒ…å†µä¼šä¸ºä½ å¤šåšä¸€äº›äº‹æƒ…<br>å› è€Œåœ¨æµ‹è¯•æ—¶ï¼Œä¸€å®šè¦å›åˆ°å‘½ä»¤è¡Œå»æ‰§è¡Œ</p>
<p><strong><code>__init__.py</code>å†³å®šçš„å¤–éƒ¨ç”¨ä¾‹</strong></p>
<p>å•ç‹¬å¯¼å…¥åŒ…åç§°æ—¶ï¼Œä¸ä¼šå¯¼å…¥åŒ…ä¸­æ‰€æœ‰åŒ…å«çš„æ‰€æœ‰å­æ¨¡å—ï¼Œ<br>å³ä¸ä¼šè‡ªåŠ¨å¯¼å…¥åŒçº§æ‰€æœ‰ç›®å½•å’Œpythonæ–‡ä»¶(å­æ¨¡å—)ã€‚<br>æ¨¡å—å†…æ–¹æ³•çš„è°ƒç”¨æ–¹å¼å–å†³äºå„çº§çš„<code>__init__.py</code>æ–‡ä»¶ã€‚</p>
<h5 id="é»˜è®¤çš„"><a href="#é»˜è®¤çš„" class="headerlink" title="é»˜è®¤çš„"></a>é»˜è®¤çš„</h5><p>å¾ˆå¤šç¬¬ä¸‰æ–¹æ¨¡å—çš„å„çº§<code>__init__.py</code>æ–‡ä»¶æ˜¯å¦‚ä¸‹ä¹¦å†™çš„</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#glance/__init__.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> cmd</span><br><span class="line"></span><br><span class="line"><span class="comment">#glance/cmd/__init__.py</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> manage</span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ—¶å¤–éƒ¨å¯ä»¥è¿™æ ·è°ƒç”¨ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> glance</span><br><span class="line">glance.cmd.manage.main()</span><br></pre></td></tr></table></figure></div>

<h5 id="æƒ¯ä¾‹çš„"><a href="#æƒ¯ä¾‹çš„" class="headerlink" title="æƒ¯ä¾‹çš„"></a>æƒ¯ä¾‹çš„</h5><p>ä¹Ÿå¯ä»¥è¿™æ ·ä¹¦å†™ä½¿æ— è®ºä»€ä¹ˆæ–¹å¼éƒ½å¯ä»¥è°ƒç”¨ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">glance/                   </span><br><span class="line">â”œâ”€â”€ __init__.py     <span class="keyword">from</span> .api <span class="keyword">import</span> *</span><br><span class="line">â”‚                   __version__ = <span class="string">"1.0.0"</span></span><br><span class="line">â”‚                   __all__ = [<span class="string">'api'</span>,<span class="string">'cmd'</span>,<span class="string">'db'</span>]   </span><br><span class="line">â”œâ”€â”€ api                  </span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â”œâ”€â”€ __init__.py   __all__ = [<span class="string">'policy'</span>,<span class="string">'versions'</span>]</span><br><span class="line">â”‚   â”‚                <span class="keyword">from</span> .versions <span class="keyword">import</span> * </span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â”œâ”€â”€ policy.py</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â””â”€â”€ versions.py  <span class="function"><span class="keyword">def</span> <span class="title">get_now_version</span><span class="params">()</span>:</span></span><br><span class="line">â”‚                        print(<span class="string">"1.0.0"</span>)</span><br><span class="line">â”‚    </span><br><span class="line">â”œâ”€â”€ cmd  </span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â”œâ”€â”€ __init__.py	  __all__ = [<span class="string">'manage'</span>]</span><br><span class="line">â”‚   â”‚</span><br><span class="line">â”‚   â””â”€â”€ manage.py    </span><br><span class="line">â”‚   </span><br><span class="line">â””â”€â”€ db           </span><br><span class="line">    â”‚</span><br><span class="line">    â”œâ”€â”€ __init__.py   __all__ = [<span class="string">'models'</span>]</span><br><span class="line">    â”‚</span><br><span class="line">    â””â”€â”€ models.py</span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ—¶å¤–éƒ¨æ€æ ·è°ƒç”¨éƒ½è¡Œï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> glance</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.api.versions.get_now_version()</span><br><span class="line"><span class="string">"1.0.0"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.versions.get_now_version()</span><br><span class="line"><span class="string">"1.0.0"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.get_now_version()</span><br><span class="line"><span class="string">"1.0.0"</span></span><br></pre></td></tr></table></figure></div>

<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œçš„<code>__init__.py</code>é‡Œå†™äº†<br><code>from .api import *</code> å®ƒçš„æ•ˆæœæ˜¯å«æœ‰ <code>from . import api</code> çš„<br>å½“å¤šé‡è°ƒç”¨æ–¹å¼æœ‰é‡åçš„æ—¶å€™ï¼Œ<strong>æ·±åº¦ä¼˜å…ˆ</strong>ï¼š<br>å¦‚æœ<code>get_now_version</code>å‡½æ•°å°±å«<code>versions</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> glance</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.api.versions.versions()</span><br><span class="line">AttributeError: <span class="string">'function'</span> object has no attribute <span class="string">'versions'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.versions.versions()</span><br><span class="line">AttributeError: <span class="string">'function'</span> object has no attribute <span class="string">'versions'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.api.versions()</span><br><span class="line"><span class="string">"1.0.0"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>glance.versions()</span><br><span class="line"><span class="string">"1.0.0"</span></span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåå››)</title>
    <url>/blog/Python/Python_id_42.html</url>
    <content><![CDATA[<h2 id="é­”æœ¯æ–¹æ³•"><a href="#é­”æœ¯æ–¹æ³•" class="headerlink" title="é­”æœ¯æ–¹æ³•"></a>é­”æœ¯æ–¹æ³•</h2><blockquote>
<p>åœ¨Pythonä¸­,æ‰€æœ‰ä»¥â€œ__â€åŒä¸‹åˆ’çº¿åŒ…èµ·æ¥çš„æ–¹æ³•,éƒ½ç»Ÿç§°ä¸ºâ€œMagic Methodâ€,ä¸­æ–‡ç§°:â€é­”æœ¯æ–¹æ³•â€</p>
</blockquote>
<p>è¿™é‡Œåªè¡¥å……å†…ç½®(ç±»)æ–¹æ³•ä¸­çš„é­”æœ¯æ–¹æ³•</p>
<a id="more"></a>

<h3 id="å­—ç¬¦ä¸²ç›¸å…³"><a href="#å­—ç¬¦ä¸²ç›¸å…³" class="headerlink" title="å­—ç¬¦ä¸²ç›¸å…³"></a>å­—ç¬¦ä¸²ç›¸å…³</h3><p>æ”¹å˜å¯¹è±¡çš„å­—ç¬¦ä¸²æ˜¾ç¤ºçš„é­”æœ¯æ–¹æ³•</p>
<ul>
<li>ç”¨äºæ§åˆ¶å°è¾“å‡ºæ˜¾ç¤ºçš„<code>__str__</code></li>
<li>ç”¨äºç¨‹åºè°ƒè¯•æ˜¾ç¤ºçš„<code>__repr__</code></li>
<li>è‡ªå®šåˆ¶æ ¼å¼åŒ–å­—ç¬¦ä¸²<code>__format__</code></li>
</ul>
<p>å†…ç½®å‡½æ•°<code>str</code>æˆ–è€…<code>print</code> ä¼šè°ƒç”¨ <code>obj.__str__()</code><br>å†…ç½®å‡½æ•°<code>repr</code>ä¼šè°ƒç”¨ <code>obj.__repr__()</code><br>å¦‚æœ<code>__str__</code>æ²¡æœ‰è¢«å®šä¹‰,é‚£ä¹ˆå°±ä¼šä½¿ç”¨<code>__repr__</code>æ¥ä»£æ›¿è¾“å‡º</p>
<p>æ³¨æ„ï¼šè¿™ä¿©æ–¹æ³•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²,å¦åˆ™æŠ›å‡ºå¼‚å¸¸</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#_*_coding:utf-8_*_</span></span><br><span class="line">format_dict=&#123;</span><br><span class="line">    <span class="string">'nat'</span>:<span class="string">'&#123;obj.name&#125;-&#123;obj.addr&#125;-&#123;obj.type&#125;'</span>,<span class="comment">#å­¦æ ¡å-å­¦æ ¡åœ°å€-å­¦æ ¡ç±»å‹</span></span><br><span class="line">    <span class="string">'tna'</span>:<span class="string">'&#123;obj.type&#125;:&#123;obj.name&#125;:&#123;obj.addr&#125;'</span>,<span class="comment">#å­¦æ ¡ç±»å‹:å­¦æ ¡å:å­¦æ ¡åœ°å€</span></span><br><span class="line">    <span class="string">'tan'</span>:<span class="string">'&#123;obj.type&#125;/&#123;obj.addr&#125;/&#123;obj.name&#125;'</span>,<span class="comment">#å­¦æ ¡ç±»å‹/å­¦æ ¡åœ°å€/å­¦æ ¡å</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">School</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,addr,type)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.addr=addr</span><br><span class="line">        self.type=type</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'School(%s,%s)'</span> %(self.name,self.addr)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'(%s,%s)'</span> %(self.name,self.addr)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__format__</span><span class="params">(self, format_spec)</span>:</span></span><br><span class="line">        <span class="comment"># if format_spec</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> format_spec <span class="keyword">or</span> format_spec <span class="keyword">not</span> <span class="keyword">in</span> format_dict:</span><br><span class="line">            format_spec=<span class="string">'nat'</span></span><br><span class="line">        fmt = format_dict[format_spec]</span><br><span class="line">        <span class="keyword">return</span> fmt.format(obj=self)</span><br><span class="line"></span><br><span class="line">s1 = School(<span class="string">'oldboy1'</span>,<span class="string">'åŒ—äº¬'</span>,<span class="string">'ç§ç«‹'</span>)</span><br><span class="line">print(<span class="string">'from repr: '</span>,repr(s1))</span><br><span class="line">print(<span class="string">'from str: '</span>,str(s1))</span><br><span class="line">print(s1)</span><br><span class="line">print(format(s1,<span class="string">'nat'</span>))</span><br><span class="line">print(format(s1,<span class="string">'tna'</span>))</span><br><span class="line">print(format(s1,<span class="string">'tan'</span>))</span><br><span class="line">print(format(s1,<span class="string">'asfdasdffd'</span>))</span><br><span class="line">%s`å’Œ`%r</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'str : class B'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'repr : class B'</span></span><br><span class="line"></span><br><span class="line">b=B()</span><br><span class="line">print(<span class="string">'%s'</span>%b)</span><br><span class="line">print(<span class="string">'%r'</span>%b)</span><br></pre></td></tr></table></figure></div>

<p>åœ¨ä¹‹å‰ç« èŠ‚ä¸­æåˆ°çš„ï¼š</p>
<p>åœ¨åŸºç¡€å­—ç¬¦ä¸²ç±»å‹ä¸­ï¼Œé­”æœ¯æ–¹æ³•<code>__repr__</code>è¿”å›çš„æ˜¯åŸå§‹å­—ç¬¦ä¸²ç±»å‹ã€‚<br>è€ŒåŸºç¡€çš„å®¹å™¨ç±»å‹ä¸­<code>__str__</code>å¯¹å®¹å™¨å†…éƒ¨æˆå‘˜ä¸€èˆ¬æ˜¯ç”¨çš„<code>__repr__</code>æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'\\'</span>.__str__()</span><br><span class="line"><span class="string">'\\'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'\\'</span>.__repr__()</span><br><span class="line"><span class="string">"'\\\\'"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'\\'</span>].__str__()</span><br><span class="line"><span class="string">"['\\\\']"</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

<p>é‡å†™<code>__repr__()</code>æ–¹æ³•ä½¿å®¹å™¨å¤–è®¿é—®å’Œå®¹å™¨å†…åå·®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> init, Fore</span><br><span class="line">init(autoreset = <span class="literal">False</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color_str</span><span class="params">(str)</span>:</span></span><br><span class="line">    color = <span class="string">'WHITE'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_color</span><span class="params">(self,color)</span>:</span></span><br><span class="line">        self.color = color</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">    <span class="string">'''å‰ç« ç»§æ‰¿çš„åŸºæœ¬ç±»ï¼Œç°åœ¨é‡å†™å®ƒçš„repræ–¹æ³•'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''æ³¨æ„ä¸è¦åœ¨è¿™é‡Œè§¦å‘self.__repr__()ï¼Œå¦‚f'&#123;self=&#125;',å¦åˆ™é€’å½’'''</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f'<span class="subst">&#123;getattr(Fore, self.color)&#125;</span><span class="subst">&#123;self&#125;</span><span class="subst">&#123;Fore.RESET&#125;</span>'</span></span><br><span class="line">        </span><br><span class="line">arr = [Color_str(<span class="string">'Y'</span>).set_color(<span class="string">'GREEN'</span>),Color_str(<span class="string">'N'</span>).set_color(<span class="string">"RED"</span>)]</span><br><span class="line"></span><br><span class="line">print(arr[<span class="number">0</span>], arr[<span class="number">1</span>])</span><br><span class="line">print(arr)</span><br></pre></td></tr></table></figure></div>

<p><code>print(arr[0], arr[1])</code>æ˜¯msgæœ¬ä½“æ­£å¸¸é¢œè‰²çš„Yå’ŒN<br><code>print(arr)</code>æ‰“å°å‡ºæ¥çš„æ˜¯ç»¿è‰²çš„Yå’Œçº¢è‰²çš„Nï¼š[Y, N]</p>
<h3 id="ç´¢å¼•ç›¸å…³"><a href="#ç´¢å¼•ç›¸å…³" class="headerlink" title="ç´¢å¼•ç›¸å…³"></a>ç´¢å¼•ç›¸å…³</h3><ul>
<li><code>__getitem__</code></li>
<li><code>__setitem__</code></li>
<li><code>__delitem__</code></li>
</ul>
<p>åœ¨è¯»å–ã€ä¿®æ”¹ã€åˆ é™¤å¯¹è±¡æˆå‘˜æŒ‰ç´¢å¼•<code>[0]</code>çš„æ—¶å€™å¯ä»¥åˆ†åˆ«å®šä¹‰ä»¥ä¸Šæ–¹æ³•ã€‚<br>äº‹å®ä¸Šå†…ç½®æ¨¡å—<a href="https://docs.python.org/zh-cn/3/library/operator.html" target="_blank" rel="noopener"><code>operator</code></a>é‡Œå°±åŒ…æ‹¬è¿™äº›åŒåçš„æ–¹æ³•æ˜ å°„äº†ç´¢å¼•çš„æ“ä½œã€‚<br>è€Œåœ¨éœ€è¦åˆ‡ç‰‡<code>[0:1]</code>æ—¶åˆ™å¯ä»¥ç”¨è¿™äº›æ–¹æ³•ç»“åˆå†…ç½®å‡½æ•°<code>slice(start, stop, step)</code>æ¥è‡ªå®šä¹‰ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        print(self.__dict__[item])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        self.__dict__[key]=value</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        print(<span class="string">'del obj[key]æ—¶,æˆ‘æ‰§è¡Œ'</span>)</span><br><span class="line">        self.__dict__.pop(key)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delattr__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        print(<span class="string">'del obj.keyæ—¶,æˆ‘æ‰§è¡Œ'</span>)</span><br><span class="line">        self.__dict__.pop(item)</span><br><span class="line"></span><br><span class="line">f1=Foo(<span class="string">'sb'</span>)</span><br><span class="line">f1[<span class="string">'age'</span>]=<span class="number">18</span></span><br><span class="line">f1[<span class="string">'age1'</span>]=<span class="number">19</span></span><br><span class="line"><span class="keyword">del</span> f1.age1</span><br><span class="line"><span class="keyword">del</span> f1[<span class="string">'age'</span>]</span><br><span class="line">f1[<span class="string">'name'</span>]=<span class="string">'alex'</span></span><br><span class="line">print(f1.__dict__)</span><br></pre></td></tr></table></figure></div>

<p>ä¸¾ä¾‹:çº¸ç‰Œæ¸¸æˆ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FranchDeck</span>:</span></span><br><span class="line">    ranks = [str(n) <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">2</span>,<span class="number">11</span>)] + list(<span class="string">'JQKA'</span>)</span><br><span class="line">    suits = [<span class="string">'çº¢å¿ƒ'</span>,<span class="string">'æ–¹æ¿'</span>,<span class="string">'æ¢…èŠ±'</span>,<span class="string">'é»‘æ¡ƒ'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self._cards = [Card(rank,suit) <span class="keyword">for</span> rank <span class="keyword">in</span> FranchDeck.ranks</span><br><span class="line">                                        <span class="keyword">for</span> suit <span class="keyword">in</span> FranchDeck.suits]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self._cards)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self._cards[item]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        self._cards[key] = value</span><br><span class="line"></span><br><span class="line">deck = FranchDeck()</span><br><span class="line">print(deck[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> choice</span><br><span class="line">print(choice(deck))</span><br><span class="line">print(choice(deck))</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> random <span class="keyword">import</span> shuffle</span><br><span class="line">shuffle(deck)</span><br><span class="line">print(deck[:<span class="number">5</span>])</span><br></pre></td></tr></table></figure></div>

<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰<code>__missing__</code>ï¼Œ<br>é€šè¿‡ <code>dict[key]</code>æˆ–è€… <code>dict.__getitem__(key)</code> è®¿é—®ä¸å­˜åœ¨çš„keyæ—¶å°±ä¼šè¿”å›<code>__missing__()</code><br>å½“ç„¶ï¼Œ<code>dict</code>ç±»å¹¶æ²¡æœ‰å®ç°å®ƒï¼Œä½†æ˜¯<code>collections.defaultdict</code>ç±»å®ç°äº†å®ƒ</p>
<h3 id="å®ä¾‹åŒ–ç›¸å…³"><a href="#å®ä¾‹åŒ–ç›¸å…³" class="headerlink" title="å®ä¾‹åŒ–ç›¸å…³"></a>å®ä¾‹åŒ–ç›¸å…³</h3><p>é™¤äº†<code>__init__</code>è¿˜æœ‰ä¸€ä¸ª<code>__new__</code>ï¼ˆæ„é€ å‡½æ•°ï¼‰ã€‚<br>å®ä¾‹åŒ–æ—¶è§¦å‘ï¼Œé‡å†™æ—¶å¿…é¡»è¿”å›<code>super().__new__(cls)</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#pythonå•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> hasattr(cls, <span class="string">'_instance'</span>):</span><br><span class="line">            cls._instance = object.__new__(cls, *args, **kw)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line">one = Singleton()</span><br><span class="line">two = Singleton()</span><br><span class="line"></span><br><span class="line">two.a = <span class="number">3</span></span><br><span class="line">print(one.a)</span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># oneå’Œtwoå®Œå…¨ç›¸åŒ,å¯ä»¥ç”¨id(), ==, isæ£€æµ‹</span></span><br><span class="line">print(id(one))</span><br><span class="line"><span class="comment"># 29097904</span></span><br><span class="line">print(id(two))</span><br><span class="line"><span class="comment"># 29097904</span></span><br><span class="line">print(one == two)</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line">print(one <span class="keyword">is</span> two)</span><br></pre></td></tr></table></figure></div>

<h3 id="è°ƒç”¨ç›¸å…³"><a href="#è°ƒç”¨ç›¸å…³" class="headerlink" title="è°ƒç”¨ç›¸å…³"></a>è°ƒç”¨ç›¸å…³</h3><p><code>__call__</code><br>å¯¹è±¡åé¢åŠ æ‹¬å·ï¼Œè§¦å‘æ‰§è¡Œ<code>__call__</code>ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">'__call__'</span>)</span><br><span class="line"></span><br><span class="line">obj = Foo() <span class="comment"># æ‰§è¡Œ __init__å’Œ__new__</span></span><br><span class="line">obj()       <span class="comment"># æ‰§è¡Œ __call__</span></span><br></pre></td></tr></table></figure></div>

<p>å†…ç½®å‡½æ•°<code>callable</code>ä¹Ÿä¼šè¾¨åˆ«å®ƒã€‚</p>
<h3 id="å¯¹è±¡å±æ€§ç›¸å…³"><a href="#å¯¹è±¡å±æ€§ç›¸å…³" class="headerlink" title="å¯¹è±¡å±æ€§ç›¸å…³"></a>å¯¹è±¡å±æ€§ç›¸å…³</h3><p>åœ¨è®¿é—®å¯¹è±¡çš„å±æ€§çš„æ—¶å€™ ä¾ç…§è¿™æ ·ä¸€ä¸ªä¼˜å…ˆçº§ ç»è¿‡â‘¢è½®éå†ï¼š</p>
<ol>
<li>â‘ ç»§æ‰¿æ ‘ä¸­å„ä¸ªç±»çš„<code>__getattribute__</code>æ–¹æ³•</li>
<li>æœ¬ç±»çš„æ•°æ®æè¿°ç¬¦å±æ€§</li>
<li>æœ¬å®ä¾‹å±æ€§ï¼ˆ<code>obj.__dict__</code>ï¼‰</li>
<li>æœ¬ç±»çš„éæ•°æ®æè¿°ç¬¦å±æ€§</li>
<li>â‘¡ç»§æ‰¿æ ‘å„ä¸ªç±»çš„å±æ€§å’Œæè¿°ç¬¦å±æ€§ï¼ˆ<code>super().__dict__</code>ï¼‰</li>
<li>â‘¢ç»§æ‰¿æ ‘å„ä¸ªç±»çš„<code>__getattr__</code>æ–¹æ³•</li>
<li>æŠ›å‡º<code>AttributeError</code>å¼‚å¸¸</li>
</ol>
<h4 id="getattr"><a href="#getattr" class="headerlink" title="__getattr__"></a><code>__getattr__</code></h4><p>å¦‚æœæ‰¾ä¸åˆ°å¯¹è±¡çš„å±æ€§æ—¶ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•<br>è¿™ä¸ªæ–¹æ³•åº”è¯¥è¿”å›å±æ€§å€¼æˆ–è€…æŠ›å‡º<code>AttributeError</code>å¼‚å¸¸<br>æ³¨æ„ï¼Œå¦‚æœé€šè¿‡ä»¥ä¸Šä¼˜å…ˆçº§æœºåˆ¶èƒ½æ‰¾åˆ°å¯¹è±¡å±æ€§çš„è¯ï¼Œä¸ä¼šè°ƒç”¨<code>__getattr__</code>æ–¹æ³•<br>å¦å¤–ä¸¤ä¸ª</p>
<ul>
<li><code>__setattr__</code>è®¾ç½®å¯¹è±¡çš„å±æ€§</li>
<li><code>__delattr__</code>åˆ é™¤å¯¹è±¡çš„å±æ€§</li>
</ul>
<h4 id="getattribute"><a href="#getattribute" class="headerlink" title="__getattribute__"></a><code>__getattribute__</code></h4><p>å½“è®¿é—®æŸä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šæ— æ¡ä»¶çš„è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•åªé€‚ç”¨äºæ–°å¼ç±»ã€‚<br>è¯¥æ–¹æ³•åº”è¯¥è¿”å›å±æ€§å€¼æˆ–è€…æŠ›å‡º<code>AttributeError</code>å¼‚å¸¸ã€‚<br>å½“åŒæ—¶å®šä¹‰<code>__getattribute__</code>å’Œ<code>__getattr__</code>æ—¶ï¼Œ<br><code>__getattr__</code>æ–¹æ³•ä¸ä¼šå†è¢«è°ƒç”¨ï¼Œé™¤éå¼•å‘<code>AttributeError</code>å¼‚å¸¸</p>
<p>æ³¨æ„ï¼š</p>
<p>å½“åœ¨<code>__getattribute__</code>ä»£ç å—ä¸­ï¼Œå†æ¬¡æ‰§è¡Œå±æ€§çš„è·å–æ“ä½œæ—¶ï¼Œ<br>ä¼šå†æ¬¡è§¦å‘<code>__getattribute__</code>æ–¹æ³•çš„è°ƒç”¨ï¼Œä»£ç å°†ä¼šé™·å…¥æ— é™é€’å½’</p>
<h3 id="è¿ç®—ç¬¦ç›¸å…³"><a href="#è¿ç®—ç¬¦ç›¸å…³" class="headerlink" title="è¿ç®—ç¬¦ç›¸å…³"></a>è¿ç®—ç¬¦ç›¸å…³</h3><p>å†…ç½®æ¨¡å—<a href="https://docs.python.org/zh-cn/3/library/operator.html" target="_blank" rel="noopener"><code>operator</code></a>é‡Œçš„å‡½æ•°ä¸è¿ç®—ç¬¦æ˜ å°„ã€‚é‡å†™ä»¥ä¸‹æ–¹æ³•å…¶å®æ˜¯å½±å“çš„operatorä¸­å‡½æ•°çš„è°ƒç”¨ã€‚</p>
<h4 id="é€»è¾‘è¿ç®—"><a href="#é€»è¾‘è¿ç®—" class="headerlink" title="é€»è¾‘è¿ç®—"></a>é€»è¾‘è¿ç®—</h4><p>å¸ƒå°”ç±»å‹è½¬æ¢ï¼ˆå¦‚ç›´æ¥<code>if</code>ï¼‰è°ƒç”¨<code>__bool__</code>ï¼Œéœ€è¦è¿”å›å¸ƒå°”å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a = <span class="number">1</span></span><br><span class="line">        self.b = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> bool(self.a)</span><br><span class="line">a = A()</span><br><span class="line"><span class="keyword">if</span> a:</span><br><span class="line">    print(!bool(a))</span><br></pre></td></tr></table></figure></div>

<h4 id="æ¯”è¾ƒè¿ç®—"><a href="#æ¯”è¾ƒè¿ç®—" class="headerlink" title="æ¯”è¾ƒè¿ç®—"></a>æ¯”è¾ƒè¿ç®—</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"><span class="strong">__eq__</span></span><br></pre></td></tr></table></figure></div>

<p>é‡åˆ°æ¯”è¾ƒè¿ç®—ç¬¦æ—¶è§¦å‘ï¼Œéœ€è¦è¿”å›å¸ƒå°”å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a = <span class="number">1</span></span><br><span class="line">        self.b = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span><span class="params">(self,obj)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> (self.a == obj.a <span class="keyword">and</span> self.b == obj.b)</span><br><span class="line">a = A()</span><br><span class="line">b = A()</span><br><span class="line">print(a == b)</span><br></pre></td></tr></table></figure></div>

<p>å…¶ä»–è¿ç®—æ“ä½œç¬¦ä¸ä¹‹ç›¸ä¼¼ï¼š<code>__lt__()</code>ã€<code>__le__()</code>ã€<code>__ne__()</code>ã€<code>__gt__()</code>å’Œ<code>__ge__()</code>ç­‰</p>
<h3 id="å…¶ä»–å†…ç½®å‡½æ•°æœ‰å…³"><a href="#å…¶ä»–å†…ç½®å‡½æ•°æœ‰å…³" class="headerlink" title="å…¶ä»–å†…ç½®å‡½æ•°æœ‰å…³"></a>å…¶ä»–å†…ç½®å‡½æ•°æœ‰å…³</h3><p>å†…ç½®å‡½æ•°<code>len()</code>è°ƒç”¨<code>__len__</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a = <span class="number">1</span></span><br><span class="line">        self.b = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.__dict__)</span><br><span class="line">a = A()</span><br><span class="line">print(len(a))</span><br></pre></td></tr></table></figure></div>

<p>å†…ç½®å‡½æ•°<code>hash()</code>è°ƒç”¨<code>__hash__</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.a = <span class="number">1</span></span><br><span class="line">        self.b = <span class="number">2</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> hash(str(self.a)+str(self.b))</span><br><span class="line">a = A()</span><br><span class="line">print(hash(a))</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåä¸‰)</title>
    <url>/blog/Python/Python_id_41.html</url>
    <content><![CDATA[<h2 id="é¢å‘å¯¹è±¡ç‰¹æ€§"><a href="#é¢å‘å¯¹è±¡ç‰¹æ€§" class="headerlink" title="é¢å‘å¯¹è±¡ç‰¹æ€§"></a>é¢å‘å¯¹è±¡ç‰¹æ€§</h2><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass1</span>:</span> <span class="comment">#å®šä¹‰çˆ¶ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParentClass2</span>:</span> <span class="comment">#å®šä¹‰çˆ¶ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass1</span><span class="params">(ParentClass1)</span>:</span> <span class="comment">#å•ç»§æ‰¿ï¼ŒåŸºç±»æ˜¯ParentClass1ï¼Œæ´¾ç”Ÿç±»æ˜¯SubClass</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubClass2</span><span class="params">(ParentClass1,ParentClass2)</span>:</span> <span class="comment">#å¤šç»§æ‰¿ï¼Œç”¨é€—å·åˆ†éš”å¼€å¤šä¸ªç»§æ‰¿çš„ç±»</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æŸ¥çœ‹ç»§æ‰¿"><a href="#æŸ¥çœ‹ç»§æ‰¿" class="headerlink" title="æŸ¥çœ‹ç»§æ‰¿"></a>æŸ¥çœ‹ç»§æ‰¿</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>SubClass1.__bases__ <span class="comment">#__base__åªæŸ¥çœ‹ä»å·¦åˆ°å³ç»§æ‰¿çš„ç¬¬ä¸€ä¸ªå­ç±»ï¼Œ__bases__åˆ™æ˜¯æŸ¥çœ‹æ‰€æœ‰ç»§æ‰¿çš„çˆ¶ç±»</span></span><br><span class="line">(&lt;class '__main__.ParentClass1'&gt;,)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>SubClass2.__bases__</span><br><span class="line">(&lt;class '__main__.ParentClass1'&gt;, &lt;class '__main__.ParentClass2'&gt;)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰æŒ‡å®šåŸºç±»ï¼Œpythonçš„ç±»ä¼šé»˜è®¤ç»§æ‰¿objectç±»ï¼Œobjectæ˜¯æ‰€æœ‰pythonç±»çš„åŸºç±»ï¼Œå®ƒæä¾›äº†ä¸€äº›å¸¸è§æ–¹æ³•</p>
<h4 id="superç±»"><a href="#superç±»" class="headerlink" title="superç±»"></a>superç±»</h4><p>åœ¨ç±»å†…éƒ¨å®ä¾‹åŒ–<code>super()</code>ä¼šé¡ºç€ç»§æ‰¿é“¾è¿”å›åä¸€ä¸ªç±»çš„å¼•ç”¨ã€‚<br>ç”±äºå¤šç»§æ‰¿çš„å…³ç³»ï¼Œåä¸€ä¸ªç±»ä¸ä¸€å®šæ˜¯çˆ¶ç±»ã€‚<br>åœ¨python2ä¸­ç±»å†…éƒ¨ä½¿ç”¨<code>super()</code>æ—¶ï¼Œå‚æ•°ä¸å¯ä»¥ä¸å†™<br>ä¸çœç•¥å‚æ•°çš„å†™æ³•æ˜¯ï¼š<code>super(cls, self)</code></p>
<h4 id="æ´¾ç”Ÿ"><a href="#æ´¾ç”Ÿ" class="headerlink" title="æ´¾ç”Ÿ"></a>æ´¾ç”Ÿ</h4><p>å­ç±»ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±æ–°çš„å±æ€§æˆ–è€…åœ¨è‡ªå·±è¿™é‡Œé‡æ–°å®šä¹‰è¿™äº›å±æ€§ï¼ˆä¸ä¼šå½±å“çˆ¶ç±»çš„å±æ€§ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> init, Fore</span><br><span class="line">init(autoreset = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''ä¿¡æ¯ç±»'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, msg)</span>:</span></span><br><span class="line">        self.msg = msg</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">out</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(self.msg)</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color_info</span><span class="params">(Info)</span>:</span></span><br><span class="line">    <span class="string">'''å¸¦é¢œè‰²çš„ä¿¡æ¯ç±»'''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, msg, color)</span>:</span></span><br><span class="line">        super().__init__(msg)</span><br><span class="line">        self.color = color</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">out</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;getattr(Fore, self.color)&#125;</span><span class="subst">&#123;self.msg&#125;</span><span class="subst">&#123;Fore.RESET&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">red_info = Color_info(<span class="string">'æˆ‘çˆ±ä½ '</span>,<span class="string">'RED'</span>)</span><br><span class="line">red_info.out()</span><br></pre></td></tr></table></figure></div>

<p>é‡å†™äº†çˆ¶ç±»çš„outæ–¹æ³•ï¼Œè¿™é‡Œçš„getattræ–¹æ³•å°†åœ¨åæ–‡ä»‹ç»ã€‚<br>è°ƒç”¨<code>Color_info(&#39;æˆ‘çˆ±ä½ &#39;,&#39;RED&#39;).out()</code>å³å¯åœ¨æ§åˆ¶å°æ‰“å°å‡ºçº¢è‰²çš„æˆ‘çˆ±ä½ ã€‚</p>
<p>æ´¾ç”ŸåŸºæœ¬ç±»</p>
<p>æ— æ³•åœ¨<code>__init__</code>æ—¶å¯¹åŸºæœ¬ç±»ï¼ˆå¦‚strï¼‰æ´¾ç”Ÿå±æ€§<br>ä¸”æ´¾ç”Ÿæ—¶<code>super().__init__</code>ä¸éœ€è¦ä¼ å…¥å‚æ•°ã€‚</p>
<p>æ´¾ç”ŸåŸºæœ¬ç±»æ—¶ï¼Œé€€è€Œæ±‚å…¶æ¬¡çš„ä½¿ç”¨æ–¹æ³•æ¥æ·»åŠ å±æ€§ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> init, Fore</span><br><span class="line">init(autoreset = <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color_str</span><span class="params">(str)</span>:</span></span><br><span class="line">    color = <span class="string">'WHITE'</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, msg)</span>:</span></span><br><span class="line">        <span class="string">"""äº‹å®ä¸Šï¼Œè¿™ä¸ª__init__ä¸éœ€è¦å†™ï¼Œmsgå°±æ˜¯å­—ç¬¦ä¸²çš„æœ¬ä½“äº†"""</span></span><br><span class="line">        self.msg = msg</span><br><span class="line">        super().__init__()</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set_color</span><span class="params">(self,color)</span>:</span></span><br><span class="line">        self.color = color</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">out</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;getattr(Fore, self.color)&#125;</span><span class="subst">&#123;self&#125;</span><span class="subst">&#123;Fore.RESET&#125;</span>'</span>)</span><br><span class="line">        <span class="string">"""få­—ç¬¦ä¸²çš„&#123;self&#125;å…¶å®æ˜¯è°ƒç”¨äº†self.__str__()æ²¡å®ç°ï¼Œå‘çˆ¶ç±»æŸ¥æ‰¾"""</span></span><br><span class="line"></span><br><span class="line">red_str = Color_str(<span class="string">'æˆ‘çˆ±ä½ '</span>).set_color(<span class="string">'RED'</span>)</span><br><span class="line">print(red_str)</span><br><span class="line">red_str.out()</span><br></pre></td></tr></table></figure></div>

<p><code>print()</code>ä¼šè°ƒç”¨strç±»çš„<code>__str__()</code>é­”æœ¯æ–¹æ³•æ‰“å°å‡ºmsgæœ¬ä½“ï¼Œé™¤éé‡å†™å®ƒ</p>
<p>è€Œ<code>red_str.out()</code>æ­£ç¡®æ‰“å‡ºäº†é¢„æœŸçš„å¸¦é¢œè‰²çš„msg</p>
<h4 id="æŠ½è±¡ç±»ä¸æ¥å£ç±»"><a href="#æŠ½è±¡ç±»ä¸æ¥å£ç±»" class="headerlink" title="æŠ½è±¡ç±»ä¸æ¥å£ç±»"></a>æŠ½è±¡ç±»ä¸æ¥å£ç±»</h4><blockquote>
<p>ç»§æ‰¿æœ‰ä¸¤ç§ç”¨é€”ï¼š<br>ä¸€ï¼šç»§æ‰¿åŸºç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”åšå‡ºè‡ªå·±çš„æ”¹å˜æˆ–è€…æ‰©å±•ï¼ˆä»£ç é‡ç”¨ï¼‰<br>äºŒï¼šå£°æ˜æŸä¸ªå­ç±»å…¼å®¹äºæŸåŸºç±»ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£ç±»Interfaceï¼Œæ¥å£ç±»ä¸­å®šä¹‰äº†ä¸€äº›æ¥å£åï¼ˆå°±æ˜¯å‡½æ•°åï¼‰ä¸”å¹¶æœªå®ç°æ¥å£çš„åŠŸèƒ½ï¼Œå­ç±»ç»§æ‰¿æ¥å£ç±»ï¼Œå¹¶ä¸”å®ç°æ¥å£ä¸­çš„åŠŸèƒ½</p>
</blockquote>
<p>æ¯ä¸ªç±»éœ€è¦å®ç°ä¸€ä¸ªpayæ–¹æ³•ï¼Œä½†æ˜¯ç”±äºç¼ºå°‘æ²Ÿé€šï¼Œæœ€åä¸€ä¸ªç±»çš„payæ–¹æ³•å†™æˆäº†fuqianæ–¹æ³•ï¼ˆå¤§é›¾</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Alipay</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    æ”¯ä»˜å®æ”¯ä»˜</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'æ”¯ä»˜å®æ”¯ä»˜äº†%så…ƒ'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Applepay</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    apple payæ”¯ä»˜</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'apple payæ”¯ä»˜äº†%så…ƒ'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wechatpay</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fuqian</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        å®ç°äº†payçš„åŠŸèƒ½ï¼Œä½†æ˜¯åå­—ä¸ä¸€æ ·</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        print(<span class="string">'å¾®ä¿¡æ”¯ä»˜äº†%så…ƒ'</span>%money)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(payment,money)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    æ”¯ä»˜å‡½æ•°ï¼Œæ€»ä½“è´Ÿè´£æ”¯ä»˜</span></span><br><span class="line"><span class="string">    å¯¹åº”æ”¯ä»˜çš„å¯¹è±¡å’Œè¦æ”¯ä»˜çš„é‡‘é¢</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    payment.pay(money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Wechatpay()</span><br><span class="line">pay(p,<span class="number">200</span>)   <span class="comment">#æ‰§è¡Œä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure></div>

<p>å†™ä¸€ä¸ªå«æœ‰éœ€è¦å®ç°çš„æ–¹æ³•çš„åŸºç±»ï¼Œæ‰‹åŠ¨æŠ¥å¼‚å¸¸ï¼š<code>NotImplementedError</code>æ¥è§£å†³å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Payment</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wechatpay</span><span class="params">(Payment)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fuqian</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'å¾®ä¿¡æ”¯ä»˜äº†%så…ƒ'</span>%money)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Wechatpay()  <span class="comment">#è¿™é‡Œä¸æŠ¥é”™</span></span><br><span class="line">pay(p,<span class="number">200</span>)      <span class="comment">#è¿™é‡ŒæŠ¥é”™äº†</span></span><br></pre></td></tr></table></figure></div>

<p>å€Ÿç”¨abcæ¨¡å—æ¥å®ç°ï¼šå­˜åœ¨æŠ½è±¡æ–¹æ³•æ—¶ï¼ˆå³éœ€è¦å®ç°è€Œæœªå®ç°çš„æ–¹æ³•ï¼‰ï¼Œå®ä¾‹åŒ–çš„æ—¶å€™å°±ä¼šæŠ¥é”™ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta,abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Payment</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">pay</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wechatpay</span><span class="params">(Payment)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fuqian</span><span class="params">(self,money)</span>:</span></span><br><span class="line">        print(<span class="string">'å¾®ä¿¡æ”¯ä»˜äº†%så…ƒ'</span>%money)</span><br><span class="line"></span><br><span class="line">p = Wechatpay() <span class="comment"># ç›´æ¥æŠ¥é”™</span></span><br></pre></td></tr></table></figure></div>

<h5 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™"></a><strong>ä¾èµ–å€’ç½®åŸåˆ™</strong></h5><blockquote>
<p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›<br>æŠ½è±¡ä¸åº”è¯¥åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼›ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚<br>æ¢è¨€ä¹‹ï¼Œè¦é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹</p>
</blockquote>
<p>æ¥å£ç»§æ‰¿å®è´¨ä¸Šæ˜¯è¦æ±‚â€œåšå‡ºä¸€ä¸ªè‰¯å¥½çš„æŠ½è±¡ï¼Œè¿™ä¸ªæŠ½è±¡è§„å®šäº†ä¸€ä¸ªå…¼å®¹æ¥å£ï¼Œä½¿å¾—å¤–éƒ¨è°ƒç”¨è€…æ— éœ€å…³å¿ƒå…·ä½“ç»†èŠ‚ï¼Œå¯ä¸€è§†åŒä»çš„å¤„ç†å®ç°äº†ç‰¹å®šæ¥å£çš„æ‰€æœ‰å¯¹è±¡â€â€”â€”è¿™åœ¨ç¨‹åºè®¾è®¡ä¸Šï¼Œå«åšå½’ä¸€åŒ–ã€‚</p>
<h4 id="é’»çŸ³ç»§æ‰¿é—®é¢˜"><a href="#é’»çŸ³ç»§æ‰¿é—®é¢˜" class="headerlink" title="é’»çŸ³ç»§æ‰¿é—®é¢˜"></a>é’»çŸ³ç»§æ‰¿é—®é¢˜</h4><h3 id=""><a href="#" class="headerlink" title="#"></a><a href="http://nanarino.metoyun.com/py/17-é¢å‘å¯¹è±¡ç‰¹æ€§.html#" target="_blank" rel="noopener">#</a><img src="http://nanarino.metoyun.com/assets/img/oop1.ad806d8c.jpg" alt="img"></h3><p>å®ƒå†³å®šäº†å±æ€§æŸ¥æ‰¾çš„é¡ºåºå³<code>super()</code>çš„æŒ‡å‘</p>
<ul>
<li>æ–°å¼ç±»ï¼šå¹¿åº¦ä¼˜å…ˆ</li>
<li>ç»å…¸ç±»ï¼šæ·±åº¦ä¼˜å…ˆ</li>
</ul>
<h4 id="Mixinæ–¹å¼"><a href="#Mixinæ–¹å¼" class="headerlink" title="Mixinæ–¹å¼"></a>Mixinæ–¹å¼</h4><h5 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a><strong>æ¥å£éš”ç¦»åŸåˆ™</strong></h5><blockquote>
<p>ä½¿ç”¨å¤šä¸ªä¸“é—¨çš„æ¥å£ï¼Œè€Œä¸ä½¿ç”¨å•ä¸€çš„æ€»æ¥å£ã€‚<br>å³å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–é‚£äº›ä¸éœ€è¦çš„æ¥å£ã€‚<br>åœ¨ç»§æ‰¿æŠ½è±¡ç±»çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…å¤šç»§æ‰¿ï¼›<br>è€Œåœ¨ç»§æ‰¿æ¥å£çš„æ—¶å€™ï¼Œæˆ‘ä»¬åè€Œé¼“åŠ±ä½ æ¥å¤šç»§æ‰¿æ¥å£</p>
</blockquote>
<p>å¦ä¸€ç§æ´¾ç”Ÿæ–¹æ³•çš„æ–¹å¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo_Mixin</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<p>å®šä¹‰ä¸€ä¸ªMixinç±»é‡Œé¢å†™å¥½éœ€è¦æ´¾ç”Ÿçš„æ–¹æ³•<br>éœ€è¦æ´¾ç”Ÿè¿™ä¸ªæ–¹æ³•çš„ç±»ï¼Œåªéœ€è¦å¤šç»§æ‰¿ä¸€ä¸ªMixinç±»</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(foo_Mixin, A)</span>:</span></span><br><span class="line">	<span class="keyword">pass</span></span><br><span class="line">B().foo()</span><br></pre></td></tr></table></figure></div>

<p>ç”±äºç»§æ‰¿é“¾çš„å¹¿åº¦ä¼˜å…ˆ<code>foo_Mixin</code>é‡Œä½¿ç”¨<code>super()</code>ä¼šå¾€<code>A</code>æŒ‡</p>
<h3 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h3><p>å¤šæ€æ€§æ˜¯æŒ‡åœ¨ä¸è€ƒè™‘å®ä¾‹ç±»å‹çš„æƒ…å†µä¸‹ä½¿ç”¨å®ä¾‹</p>
<h4 id="é¸­å­ç±»å‹"><a href="#é¸­å­ç±»å‹" class="headerlink" title="é¸­å­ç±»å‹"></a>é¸­å­ç±»å‹</h4><p>Pythonå´‡å°šé¸­å­ç±»å‹ï¼Œå³â€˜å¦‚æœçœ‹èµ·æ¥åƒã€å«å£°åƒè€Œä¸”èµ°èµ·è·¯æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­â€™ã€‚pythonç¨‹åºå‘˜é€šå¸¸æ ¹æ®è¿™ç§è¡Œä¸ºæ¥ç¼–å†™ç¨‹åºã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³ç¼–å†™ç°æœ‰å¯¹è±¡çš„è‡ªå®šä¹‰ç‰ˆæœ¬ï¼Œå¯ä»¥ç»§æ‰¿è¯¥å¯¹è±¡ã€‚ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå¤–è§‚å’Œè¡Œä¸ºåƒï¼Œä½†ä¸å®ƒæ— ä»»ä½•å…³ç³»çš„å…¨æ–°å¯¹è±¡ï¼Œåè€…é€šå¸¸ç”¨äºä¿å­˜ç¨‹åºç»„ä»¶çš„æ¾è€¦åˆåº¦ã€‚</p>
<h3 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h3><p>éšè—å¯¹è±¡çš„å±æ€§å’Œå®ç°ç»†èŠ‚ï¼Œä»…å¯¹å¤–æä¾›å…¬å…±è®¿é—®æ–¹å¼ã€‚<br>åœ¨pythonä¸­ç”¨åŒä¸‹åˆ’çº¿å¼€å¤´çš„æ–¹å¼å°†å±æ€§éšè—èµ·æ¥ï¼ˆè®¾ç½®æˆç§æœ‰çš„ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å…¶å®è¿™ä»…ä»…è¿™æ˜¯ä¸€ç§å˜å½¢æ“ä½œ</span></span><br><span class="line"><span class="comment">#ç±»ä¸­æ‰€æœ‰åŒä¸‹åˆ’çº¿å¼€å¤´çš„åç§°å¦‚__xéƒ½ä¼šè‡ªåŠ¨å˜å½¢æˆï¼š_ç±»å__xçš„å½¢å¼ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    __N=<span class="number">0</span> <span class="comment">#ç±»çš„æ•°æ®å±æ€§å°±åº”è¯¥æ˜¯å…±äº«çš„,ä½†æ˜¯è¯­æ³•ä¸Šæ˜¯å¯ä»¥æŠŠç±»çš„æ•°æ®å±æ€§è®¾ç½®æˆç§æœ‰çš„å¦‚__N,ä¼šå˜å½¢ä¸º_A__N</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__X=<span class="number">10</span> <span class="comment">#å˜å½¢ä¸ºself._A__X</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__foo</span><span class="params">(self)</span>:</span> <span class="comment">#å˜å½¢ä¸º_A__foo</span></span><br><span class="line">        print(<span class="string">'from A'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__foo() <span class="comment">#åªæœ‰åœ¨ç±»å†…éƒ¨æ‰å¯ä»¥é€šè¿‡__fooçš„å½¢å¼è®¿é—®åˆ°.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#A._A__Næ˜¯å¯ä»¥è®¿é—®åˆ°çš„ï¼Œå³è¿™ç§æ“ä½œå¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„é™åˆ¶å¤–éƒ¨è®¿é—®ï¼Œä»…ä»…åªæ˜¯ä¸€ç§è¯­æ³•æ„ä¹‰ä¸Šçš„å˜å½¢</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨ç»§æ‰¿ä¸­ï¼Œçˆ¶ç±»å¦‚æœä¸æƒ³è®©å­ç±»è¦†ç›–è‡ªå·±çš„æ–¹æ³•ï¼Œå¯ä»¥å°†æ–¹æ³•å®šä¹‰ä¸ºç§æœ‰çš„</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æŠŠfaå®šä¹‰æˆç§æœ‰çš„ï¼Œå³__fa</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__fa</span><span class="params">(self)</span>:</span> <span class="comment">#åœ¨å®šä¹‰æ—¶å°±å˜å½¢ä¸º_A__fa</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'from A'</span>)</span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        self.__fa() <span class="comment">#åªä¼šä¸è‡ªå·±æ‰€åœ¨çš„ç±»ä¸ºå‡†,å³è°ƒç”¨_A__fa</span></span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__fa</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>        print(<span class="string">'from B'</span>)</span><br><span class="line"><span class="meta">... </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=B()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b.test()</span><br><span class="line"><span class="keyword">from</span> A</span><br></pre></td></tr></table></figure></div>

<h3 id="ç±»ä¸­ä½¿ç”¨çš„è£…é¥°å™¨"><a href="#ç±»ä¸­ä½¿ç”¨çš„è£…é¥°å™¨" class="headerlink" title="ç±»ä¸­ä½¿ç”¨çš„è£…é¥°å™¨"></a>ç±»ä¸­ä½¿ç”¨çš„è£…é¥°å™¨</h3><h4 id="property"><a href="#property" class="headerlink" title="property"></a>property</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">ä¾‹ä¸€ï¼šBMIæŒ‡æ•°ï¼ˆbmiæ˜¯è®¡ç®—è€Œæ¥çš„ï¼Œä½†å¾ˆæ˜æ˜¾å®ƒå¬èµ·æ¥åƒæ˜¯ä¸€ä¸ªå±æ€§è€Œéæ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬å°†å…¶åšæˆä¸€ä¸ªå±æ€§ï¼Œæ›´ä¾¿äºç†è§£ï¼‰</span><br><span class="line"></span><br><span class="line">æˆäººçš„BMIæ•°å€¼ï¼š</span><br><span class="line">è¿‡è½»ï¼šä½äº18.5</span><br><span class="line">æ­£å¸¸ï¼š18.5-23.9</span><br><span class="line">è¿‡é‡ï¼š24-27</span><br><span class="line">è‚¥èƒ–ï¼š28-32</span><br><span class="line">éå¸¸è‚¥èƒ–, é«˜äº32</span><br><span class="line">ã€€ã€€ä½“è´¨æŒ‡æ•°ï¼ˆBMIï¼‰&#x3D;ä½“é‡ï¼ˆkgï¼‰Ã·èº«é«˜^2ï¼ˆmï¼‰</span><br><span class="line">ã€€ã€€EXï¼š70kgÃ·ï¼ˆ1.75Ã—1.75ï¼‰&#x3D;22.86</span><br><span class="line">class People:</span><br><span class="line">    def __init__(self,name,weight,height):</span><br><span class="line">        self.name&#x3D;name</span><br><span class="line">        self.weight&#x3D;weight</span><br><span class="line">        self.height&#x3D;height</span><br><span class="line">    @property</span><br><span class="line">    def bmi(self):</span><br><span class="line">        return self.weight &#x2F; (self.height**2)</span><br><span class="line"></span><br><span class="line">p1&#x3D;People(&#39;egon&#39;,75,1.85)</span><br><span class="line">print(p1.bmi)</span><br></pre></td></tr></table></figure></div>

<p>å±æ€§propertyï¼Œç”±å…¶ä»–å·²æœ‰å±æ€§å€¼åŠ¨æ€è®¡ç®—å¾—åˆ°ã€‚<br>æœ¬è´¨å°±æ˜¯å®ç°äº†getï¼Œsetï¼Œdeleteä¸‰ç§æ–¹æ³•çš„æ•°æ®æè¿°ç¬¦</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Goods</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># åŸä»·</span></span><br><span class="line">        self.original_price = <span class="number">100</span></span><br><span class="line">        <span class="comment"># æŠ˜æ‰£</span></span><br><span class="line">        self.discount = <span class="number">0.8</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># å®é™…ä»·æ ¼ = åŸä»· * æŠ˜æ‰£</span></span><br><span class="line">        new_price = self.original_price * self.discount</span><br><span class="line">        <span class="keyword">return</span> new_price</span><br><span class="line"></span><br><span class="line"><span class="meta">    @price.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self, value)</span>:</span></span><br><span class="line">        self.original_price = value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @price.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.original_price</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = Goods()</span><br><span class="line">obj.price         <span class="comment"># è·å–å•†å“ä»·æ ¼</span></span><br><span class="line">obj.price = <span class="number">200</span>   <span class="comment"># ä¿®æ”¹å•†å“åŸä»·</span></span><br><span class="line">print(obj.price)</span><br><span class="line"><span class="keyword">del</span> obj.price     <span class="comment"># åˆ é™¤å•†å“åŸä»·</span></span><br></pre></td></tr></table></figure></div>

<h4 id="classmethod"><a href="#classmethod" class="headerlink" title="classmethod"></a>classmethod</h4><p>ï¼ˆç‹­ä¹‰ä¸Šçš„ï¼‰ç±»æ–¹æ³•ï¼Œclasså‘½åç©ºé—´é‡Œå®šä¹‰çš„åªå’Œç±»æœ‰å…³ï¼Œä¸å’Œå®ä¾‹æœ‰å…³çš„å‡½æ•°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Classmethod_Demo</span><span class="params">()</span>:</span></span><br><span class="line">    role = <span class="string">'dog'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(cls)</span>:</span></span><br><span class="line">        print(cls.role)</span><br><span class="line">Classmethod_Demo.func()</span><br></pre></td></tr></table></figure></div>

<h4 id="staticmethod"><a href="#staticmethod" class="headerlink" title="staticmethod"></a>staticmethod</h4><p>é™æ€æ–¹æ³•ï¼Œclasså‘½åç©ºé—´é‡Œå®šä¹‰çš„æ™®é€šå‡½æ•°ï¼Œå¸¸ç”¨æ¥å®šä¹‰å·¥å…·å‡½æ•°ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Staticmethod_Demo</span><span class="params">()</span>:</span></span><br><span class="line">    role = <span class="string">'dog'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"å½“æ™®é€šæ–¹æ³•ç”¨"</span>)</span><br><span class="line"></span><br><span class="line">Staticmethod_Demo.func()</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸ç±»æœ‰å…³çš„å†…ç½®æ–¹æ³•"><a href="#ä¸ç±»æœ‰å…³çš„å†…ç½®æ–¹æ³•" class="headerlink" title="ä¸ç±»æœ‰å…³çš„å†…ç½®æ–¹æ³•"></a>ä¸ç±»æœ‰å…³çš„å†…ç½®æ–¹æ³•</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">isinstance(obj,cls)<span class="comment">#æ£€æŸ¥æ˜¯å¦objæ˜¯å¦æ˜¯ç±» cls çš„å¯¹è±¡</span></span><br><span class="line">issubclass(sub, super)<span class="comment">#æ£€æŸ¥subç±»æ˜¯å¦æ˜¯ super ç±»çš„æ´¾ç”Ÿç±»</span></span><br></pre></td></tr></table></figure></div>

<h3 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h3><p>pythoné¢å‘å¯¹è±¡ä¸­çš„åå°„ï¼šé€šè¿‡å­—ç¬¦ä¸²çš„å½¢å¼æ“ä½œå¯¹è±¡ç›¸å…³çš„å±æ€§ã€‚pythonä¸­çš„ä¸€åˆ‡äº‹ç‰©éƒ½æ˜¯å¯¹è±¡ï¼ˆéƒ½å¯ä»¥ä½¿ç”¨åå°„ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    f = <span class="string">'ç±»çš„é™æ€å˜é‡'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name,age)</span>:</span></span><br><span class="line">        self.name=name</span><br><span class="line">        self.age=age</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">say_hi</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'hi,%s'</span>%self.name)</span><br><span class="line"></span><br><span class="line">obj=Foo(<span class="string">'egon'</span>,<span class="number">73</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ£€æµ‹æ˜¯å¦å«æœ‰æŸå±æ€§</span></span><br><span class="line">print(hasattr(obj,<span class="string">'name'</span>))</span><br><span class="line">print(hasattr(obj,<span class="string">'say_hi'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·å–å±æ€§</span></span><br><span class="line">n=getattr(obj,<span class="string">'name'</span>)</span><br><span class="line">print(n)</span><br><span class="line">func=getattr(obj,<span class="string">'say_hi'</span>)</span><br><span class="line">func()</span><br><span class="line"></span><br><span class="line">print(getattr(obj,<span class="string">'aaaaaaaa'</span>,<span class="string">'ä¸å­˜åœ¨å•Š'</span>)) <span class="comment">#æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®å±æ€§</span></span><br><span class="line">setattr(obj,<span class="string">'sb'</span>,<span class="literal">True</span>)</span><br><span class="line">setattr(obj,<span class="string">'show_name'</span>,<span class="keyword">lambda</span> self:self.name+<span class="string">'sb'</span>)</span><br><span class="line">print(obj.__dict__)</span><br><span class="line">print(obj.show_name(obj))</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤å±æ€§</span></span><br><span class="line">delattr(obj,<span class="string">'age'</span>)</span><br><span class="line">delattr(obj,<span class="string">'show_name'</span>)</span><br><span class="line">delattr(obj,<span class="string">'show_name111'</span>)<span class="comment">#ä¸å­˜åœ¨,åˆ™æŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">print(obj.__dict__)</span><br></pre></td></tr></table></figure></div>

<p>åå°„å½“å‰æ¨¡å—æˆå‘˜</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">s1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'s1'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">s2</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'s2'</span></span><br><span class="line"></span><br><span class="line">this_module = sys.modules[__name__]</span><br><span class="line"></span><br><span class="line">hasattr(this_module, <span class="string">'s1'</span>)</span><br><span class="line">getattr(this_module, <span class="string">'s2'</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåäºŒ)</title>
    <url>/blog/Python/Python_id_40.html</url>
    <content><![CDATA[<h2 id="ç±»å’Œå¯¹è±¡"><a href="#ç±»å’Œå¯¹è±¡" class="headerlink" title="ç±»å’Œå¯¹è±¡"></a>ç±»å’Œå¯¹è±¡</h2><blockquote>
<p>åœ¨pythonä¸­ï¼Œç”¨å˜é‡è¡¨ç¤ºç‰¹å¾ï¼Œç”¨å‡½æ•°è¡¨ç¤ºæŠ€èƒ½ï¼Œ<br>å› è€Œå…·æœ‰ç›¸åŒç‰¹å¾å’ŒæŠ€èƒ½çš„ä¸€ç±»äº‹ç‰©å°±æ˜¯â€˜ç±»â€™ï¼Œ<br>å¯¹è±¡æ˜¯åˆ™æ˜¯è¿™ä¸€ç±»äº‹ç‰©ä¸­å…·ä½“çš„ä¸€ä¸ªã€‚<br>ä¸Šä¸€èŠ‚ä¸­æåˆ°çš„å¼‚å¸¸ç±»å°±æ˜¯å¦‚æ­¤ã€‚</p>
</blockquote>
<h3 id="å±æ€§å¼•ç”¨"><a href="#å±æ€§å¼•ç”¨" class="headerlink" title="å±æ€§å¼•ç”¨"></a>å±æ€§å¼•ç”¨</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span>   <span class="comment">#å®šä¹‰ä¸€ä¸ªäººç±»</span></span><br><span class="line">    role = <span class="string">'person'</span>  <span class="comment">#äººçš„è§’è‰²å±æ€§éƒ½æ˜¯äºº</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name = name  <span class="comment"># æ¯ä¸€ä¸ªè§’è‰²éƒ½æœ‰è‡ªå·±çš„æ˜µç§°;</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">walk</span><span class="params">(self)</span>:</span>  <span class="comment">#äººéƒ½å¯ä»¥èµ°è·¯ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸€ä¸ªèµ°è·¯æ–¹æ³•</span></span><br><span class="line">        print(<span class="string">"person is walking..."</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="å®ä¾‹åŒ–"><a href="#å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹åŒ–"></a>å®ä¾‹åŒ–</h3><p>ç±»å()å°±ç­‰äºåœ¨æ‰§è¡Œ<code>Person.__init__</code>ã€‚äº‹å®ä¸Šå®ƒè¿˜æ‰§è¡Œäº†<code>Person.__new__</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">egg = Person(<span class="string">'ç‹—è›‹'</span>)</span><br></pre></td></tr></table></figure></div>

<p>æ‰§è¡Œå®Œ<code>__init__()</code>å°±ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ˆè¿™é‡Œçš„eggï¼‰ã€‚<br>è¿™ä¸ªå¯¹è±¡ç±»ä¼¼ä¸€ä¸ªå­—å…¸ï¼Œå­˜ç€å±äºè¿™ä¸ªäººæœ¬èº«çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚</p>
<h4 id="è®¿é—®å¯¹è±¡å±æ€§"><a href="#è®¿é—®å¯¹è±¡å±æ€§" class="headerlink" title="è®¿é—®å¯¹è±¡å±æ€§"></a>è®¿é—®å¯¹è±¡å±æ€§</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">print(egg.name)</span><br></pre></td></tr></table></figure></div>

<p>è®¿é—®ç±»å±æ€§ï¼Œæ‰¾ä¸åˆ°å¯¹è±¡å±æ€§çš„æ—¶å€™ä¼šæ ¹æ®è®¿é—®é“¾å‘ ç±»å±æ€§ï¼Œæè¿°ç¬¦ï¼Œçˆ¶ç±»å±æ€§ æŸ¥æ‰¾ï¼ˆé¡ºåºè¿œæ¯”è¿™ä¸ªå¤æ‚ï¼‰</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">print(egg.role)</span><br><span class="line">print(Person.role)</span><br></pre></td></tr></table></figure></div>

<p>è®¾ç½®åŒåçš„å¯¹è±¡å±æ€§ä¸ä¼šå½±å“åˆ°çˆ¶ç±»å±æ€§</p>
<h4 id="è°ƒç”¨ç±»æ–¹æ³•"><a href="#è°ƒç”¨ç±»æ–¹æ³•" class="headerlink" title="è°ƒç”¨ç±»æ–¹æ³•"></a>è°ƒç”¨ç±»æ–¹æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">egg.walk()</span><br></pre></td></tr></table></figure></div>

<p>ä¹Ÿå¯ä»¥ç”¨<strong>é™æ€æ–¹æ³•çš„æ–¹å¼</strong>è°ƒç”¨ç±»æ–¹æ³•ï¼Œç›´æ¥å®ä¾‹å ç”¨å½¢å‚<code>self</code>çš„ä½ç½®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">Person.walk(egg)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>åˆ›å»ºä¸€ä¸ªç±»å°±ä¼šåˆ›å»ºä¸€ä¸ªç±»çš„åç§°ç©ºé—´ï¼Œ<br>ç”¨æ¥å­˜å‚¨ç±»ä¸­å®šä¹‰çš„æ‰€æœ‰åå­—ï¼Œè¿™äº›åå­—ç§°ä¸ºç±»çš„å±æ€§ã€‚<br>é™æ€æ–¹æ³•å°±æ˜¯ç›´æ¥å®šä¹‰åœ¨è¿™ä¸ªå‘½åç©ºé—´çš„å‡½æ•°ã€‚<br>å®ƒä»¬çš„å½¢å‚ä¸å«selfå’Œclsï¼Œå‡ ä¹ä¸ç±»å’Œå®ä¾‹æ— å…³ã€‚</p>
</blockquote>
<h3 id="ç‰¹æ®Šå±æ€§"><a href="#ç‰¹æ®Šå±æ€§" class="headerlink" title="ç‰¹æ®Šå±æ€§"></a>ç‰¹æ®Šå±æ€§</h3><p>æˆ‘ä»¬å®šä¹‰çš„ç±»çš„å±æ€§åˆ°åº•å­˜åˆ°å“ªé‡Œäº†ï¼Ÿæœ‰ä¸¤ç§æ–¹å¼æŸ¥çœ‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">dir(ç±»å)<span class="comment">#ï¼šæŸ¥å‡ºçš„æ˜¯ä¸€ä¸ªåå­—åˆ—è¡¨</span></span><br><span class="line">ç±»å.__dict__<span class="comment">#:æŸ¥å‡ºçš„æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œkeyä¸ºå±æ€§åï¼Œvalueä¸ºå±æ€§å€¼</span></span><br></pre></td></tr></table></figure></div>

<p>ç‰¹æ®Šçš„ç±»å±æ€§å¦‚ä¸‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">ç±»å.__name__<span class="comment"># ç±»çš„åå­—(å­—ç¬¦ä¸²)</span></span><br><span class="line">ç±»å.__doc__<span class="comment"># ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸²</span></span><br><span class="line">ç±»å.__base__<span class="comment"># ç±»çš„ç¬¬ä¸€ä¸ªçˆ¶ç±»(åœ¨è®²ç»§æ‰¿æ—¶ä¼šè®²)</span></span><br><span class="line">ç±»å.__bases__<span class="comment"># ç±»æ‰€æœ‰çˆ¶ç±»æ„æˆçš„å…ƒç»„(åœ¨è®²ç»§æ‰¿æ—¶ä¼šè®²)</span></span><br><span class="line">ç±»å.__dict__<span class="comment"># ç±»çš„å­—å…¸å±æ€§</span></span><br><span class="line">ç±»å.__module__<span class="comment"># ç±»å®šä¹‰æ‰€åœ¨çš„æ¨¡å—</span></span><br><span class="line"></span><br><span class="line">å®ä¾‹åŒ–å¯¹è±¡.__class__<span class="comment"># å®ä¾‹å¯¹åº”çš„ç±»(ä»…æ–°å¼ç±»ä¸­)</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ç»„åˆç”¨æ³•"><a href="#ç»„åˆç”¨æ³•" class="headerlink" title="ç»„åˆç”¨æ³•"></a>ç»„åˆç”¨æ³•</h3><p>ç»„åˆæŒ‡çš„æ˜¯ï¼Œåœ¨ä¸€ä¸ªç±»ä¸­ä»¥å¦å¤–ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºæ•°æ®å±æ€§ï¼Œç§°ä¸ºç±»çš„ç»„åˆ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> pi</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    å®šä¹‰äº†ä¸€ä¸ªåœ†å½¢ç±»ï¼›</span></span><br><span class="line"><span class="string">    æä¾›è®¡ç®—é¢ç§¯(area)å’Œå‘¨é•¿(perimeter)çš„æ–¹æ³•</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius)</span>:</span></span><br><span class="line">        self.radius = radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">return</span> pi * self.radius * self.radius</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * pi *self.radius</span><br><span class="line"></span><br><span class="line">circle = Circle(<span class="number">10</span>) <span class="comment">#å®ä¾‹åŒ–ä¸€ä¸ªåœ†</span></span><br><span class="line">area1 = circle.area() <span class="comment">#è®¡ç®—åœ†é¢ç§¯</span></span><br><span class="line">per1 = circle.perimeter() <span class="comment">#è®¡ç®—åœ†å‘¨é•¿</span></span><br><span class="line">print(area1,per1) <span class="comment">#æ‰“å°åœ†é¢ç§¯å’Œå‘¨é•¿</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ring</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    å®šä¹‰äº†ä¸€ä¸ªåœ†ç¯ç±»</span></span><br><span class="line"><span class="string">    æä¾›åœ†ç¯çš„é¢ç§¯å’Œå‘¨é•¿çš„æ–¹æ³•</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,radius_outside,radius_inside)</span>:</span></span><br><span class="line">        self.outsid_circle = Circle(radius_outside)</span><br><span class="line">        self.inside_circle = Circle(radius_inside)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.outsid_circle.area() - self.inside_circle.area()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perimeter</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span>  self.outsid_circle.perimeter() + self.inside_circle.perimeter()</span><br><span class="line"></span><br><span class="line">ring = Ring(<span class="number">10</span>,<span class="number">5</span>) <span class="comment">#å®ä¾‹åŒ–ä¸€ä¸ªç¯å½¢</span></span><br><span class="line">print(ring.perimeter()) <span class="comment">#è®¡ç®—ç¯å½¢çš„å‘¨é•¿</span></span><br><span class="line">print(ring.area()) <span class="comment">#è®¡ç®—ç¯å½¢çš„é¢ç§¯</span></span><br></pre></td></tr></table></figure></div>

<h3 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h3><blockquote>
<p>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰</p>
<p>æŒ‡å¤šä¸ªå¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§æ¨¡å¼æœ‰æ—¶åˆç§°ä½œå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€æ¨¡å‹-è§†å›¾æ¨¡å¼ï¼Œå®ƒæ˜¯å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
</blockquote>
<h3 id="æè¿°ç¬¦"><a href="#æè¿°ç¬¦" class="headerlink" title="æè¿°ç¬¦"></a>æè¿°ç¬¦</h3><p><a href="https://docs.python.org/zh-cn/3/howto/descriptor.html" target="_blank" rel="noopener">æè¿°ç¬¦(descriptor)</a> æ˜¯ä¸€ç§ç±»</p>
<p>æˆ‘ä»¬æŠŠå®ç°äº†<code>__get__()</code>ã€<code>__set__()</code>å’Œ<code>__delete__()</code>ä¸­çš„å…¶ä¸­ä»»æ„ä¸€ç§æ–¹æ³•çš„ç±»ç§°ä¹‹ä¸ºæè¿°ç¬¦</p>
<h4 id="åˆ›å»ºä¸€ä¸ªæè¿°ç¬¦"><a href="#åˆ›å»ºä¸€ä¸ªæè¿°ç¬¦" class="headerlink" title="åˆ›å»ºä¸€ä¸ªæè¿°ç¬¦"></a>åˆ›å»ºä¸€ä¸ªæè¿°ç¬¦</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stu_descriptor</span>:</span> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span><span class="params">(self, obj, objtype)</span>:</span></span><br><span class="line">        print(<span class="string">"è·å–äº†valçš„å€¼"</span>)</span><br><span class="line">        <span class="keyword">return</span> self.val</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span><span class="params">(self, obj, val)</span>:</span></span><br><span class="line">        print(<span class="string">"ä¿®æ”¹äº†valçš„å€¼"</span>)</span><br><span class="line">        self.val = val</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delete__</span><span class="params">(self, obj)</span>:</span></span><br><span class="line">        print(<span class="string">"åˆ é™¤äº†valå±æ€§"</span>)</span><br><span class="line">        <span class="keyword">del</span> self.val</span><br></pre></td></tr></table></figure></div>

<h4 id="ä½¿ç”¨æè¿°ç¬¦æ¥ä»£ç†å±æ€§"><a href="#ä½¿ç”¨æè¿°ç¬¦æ¥ä»£ç†å±æ€§" class="headerlink" title="ä½¿ç”¨æè¿°ç¬¦æ¥ä»£ç†å±æ€§"></a>ä½¿ç”¨æè¿°ç¬¦æ¥ä»£ç†å±æ€§</h4><p>æè¿°ç¬¦æ˜¯ä¸€ç§å…·æœ‰â€œæ†ç»‘è¡Œä¸ºâ€çš„å¯¹è±¡å±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ç§Observerã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stu</span>:</span></span><br><span class="line">    age = Stu_descriptor()</span><br><span class="line"></span><br><span class="line">stu = Stu()</span><br><span class="line"></span><br><span class="line">stu = Stu()</span><br><span class="line">stu.age = <span class="number">12</span></span><br><span class="line">print(stu.age)</span><br><span class="line"><span class="keyword">del</span> stu.age</span><br><span class="line">stu = <span class="number">10</span> <span class="comment">#è‡ªåŠ¨å›æ”¶å†…å­˜</span></span><br></pre></td></tr></table></figure></div>

<h5 id="è§¦å‘æè¿°ç¬¦çš„é­”æœ¯æ–¹æ³•"><a href="#è§¦å‘æè¿°ç¬¦çš„é­”æœ¯æ–¹æ³•" class="headerlink" title="è§¦å‘æè¿°ç¬¦çš„é­”æœ¯æ–¹æ³•"></a>è§¦å‘æè¿°ç¬¦çš„é­”æœ¯æ–¹æ³•</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu.age = <span class="number">12</span></span><br><span class="line">ä¿®æ”¹äº†valçš„å€¼</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu.age</span><br><span class="line">è·å–äº†valçš„å€¼</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> stu.age</span><br><span class="line">åˆ é™¤äº†valå±æ€§</span><br></pre></td></tr></table></figure></div>

<ul>
<li><h5 id="æ•°æ®æè¿°ç¬¦ï¼ˆdata-descriptorï¼‰"><a href="#æ•°æ®æè¿°ç¬¦ï¼ˆdata-descriptorï¼‰" class="headerlink" title="æ•°æ®æè¿°ç¬¦ï¼ˆdata descriptorï¼‰"></a>æ•°æ®æè¿°ç¬¦ï¼ˆdata descriptorï¼‰</h5></li>
<li><h5 id="éæ•°æ®æè¿°ç¬¦ï¼ˆnon-data-descriptorsï¼‰"><a href="#éæ•°æ®æè¿°ç¬¦ï¼ˆnon-data-descriptorsï¼‰" class="headerlink" title="éæ•°æ®æè¿°ç¬¦ï¼ˆnon-data descriptorsï¼‰"></a>éæ•°æ®æè¿°ç¬¦ï¼ˆnon-data descriptorsï¼‰</h5></li>
</ul>
<p>æ•°æ®æè¿°ç¬¦ï¼šå®šä¹‰äº†<code>__set__</code> å’Œ<code>__get__</code> æ–¹æ³•çš„å¯¹è±¡(propertyæ˜¯æ•°æ®æè¿°ç¬¦)</p>
<p>éæ•°æ®æè¿°ç¬¦ï¼šåªå®šä¹‰äº†<code>__get__</code> æ–¹æ³•çš„å¯¹è±¡(staticmethodï¼Œclassmethodæ˜¯éæ•°æ®æè¿°ç¬¦)</p>
<h5 id="ä¸é­”æœ¯æ–¹æ³•-del-æ–¹æ³•çš„ä¸åŒ"><a href="#ä¸é­”æœ¯æ–¹æ³•-del-æ–¹æ³•çš„ä¸åŒ" class="headerlink" title="ä¸é­”æœ¯æ–¹æ³•__del__æ–¹æ³•çš„ä¸åŒ"></a>ä¸é­”æœ¯æ–¹æ³•<code>__del__</code>æ–¹æ³•çš„ä¸åŒ</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stu</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"å¯¹è±¡å†…å­˜å·²è¢«å›æ”¶"</span>)</span><br><span class="line">stu1 = Stu()</span><br><span class="line">stu2 = Stu()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">del</span> stu1</span><br><span class="line">å¯¹è±¡å†…å­˜å·²è¢«å›æ”¶</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>stu2 = <span class="number">10</span></span><br><span class="line">å¯¹è±¡å†…å­˜å·²è¢«å›æ”¶</span><br></pre></td></tr></table></figure></div>

<p><code>__del__</code>æ–¹æ³•æ˜¯å¯¹è±¡å†…å­˜è¢«å›æ”¶ï¼ˆåŒ…æ‹¬è‡ªåŠ¨å›æ”¶ï¼‰æ—¶è§¦å‘ï¼Œæ­¤æ–¹æ³•ä¸€èˆ¬æ— é¡»å®šä¹‰ã€‚<br>å› ä¸ºPythonæ˜¯ä¸€é—¨é«˜çº§è¯­è¨€ï¼Œç¨‹åºå‘˜åœ¨ä½¿ç”¨æ—¶æ— éœ€å…³å¿ƒå†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ï¼Œ<br>å› ä¸ºæ­¤å·¥ä½œéƒ½æ˜¯äº¤ç»™Pythonè§£é‡Šå™¨æ¥æ‰§è¡Œï¼Œ<br>æ‰€ä»¥ï¼Œææ„å‡½æ•°çš„è°ƒç”¨æ˜¯ç”±è§£é‡Šå™¨åœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œçš„<br>æ›´å¤šçš„é­”æœ¯æ–¹æ³•å°†åœ¨åé¢ä»‹ç»</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒåä¸€)</title>
    <url>/blog/Python/Python_id_39.html</url>
    <content><![CDATA[<h2 id="è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"><a href="#è¿­ä»£å™¨å’Œç”Ÿæˆå™¨" class="headerlink" title="è¿­ä»£å™¨å’Œç”Ÿæˆå™¨"></a>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</h2><h3 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h3><p>è¿­ä»£å™¨ï¼ˆ<code>iterator</code>ï¼‰å¿…é¡»æä¾›<code>.__next__()</code>æ–¹æ³•<br><code>.__next__()</code>æ‰§è¡Œè¦ä¹ˆè¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨<br>è¦ä¹ˆæŠ›å‡º<code>StopIteration</code>å¼‚å¸¸ä»¥æ ‡è¯†è¿­ä»£å®Œæˆ</p>
<a id="more"></a>

<h4 id="å¯è¿­ä»£å¯¹è±¡"><a href="#å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="å¯è¿­ä»£å¯¹è±¡"></a>å¯è¿­ä»£å¯¹è±¡</h4><p>å®ç°äº†è¿­ä»£å™¨åè®®çš„å¯¹è±¡ï¼Œæ˜¯<code>Iterable</code>ä½†ä¸æ˜¯<code>Iterator</code>ã€‚<br><code>list</code>ã€<code>dict</code>ã€<code>str</code>ç­‰éƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡<br>æä¾›äº†<code>.__iter__()</code>æ–¹æ³•ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª<strong>åˆå§‹çš„</strong>è¿­ä»£å™¨ã€‚<br>pythonçš„å†…éƒ¨å·¥å…·ï¼ˆ<code>for</code>è¯­å¥ï¼Œ<code>sum()</code>å‡½æ•°ï¼Œ<code>list()</code>å‡½æ•°ç­‰ï¼‰ä½¿ç”¨è¿­ä»£å™¨åè®®è®¿é—®å¯¹è±¡<br>åŒä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ç”Ÿæˆçš„å¯è¿­å™¨<strong>äº’ä¸å½±å“</strong>ï¼Œä½†æ˜¯å…·æœ‰<strong>æƒ°æ€§</strong>ï¼ˆè§ä¸‹ï¼‰ã€‚</p>
<h4 id="forå¾ªç¯æœºåˆ¶"><a href="#forå¾ªç¯æœºåˆ¶" class="headerlink" title="forå¾ªç¯æœºåˆ¶"></a>forå¾ªç¯æœºåˆ¶</h4><p><code>for</code>å¾ªç¯/<code>list()</code>çš„ç­‰å†…éƒ¨åšçš„äº‹æƒ…:</p>
<ul>
<li>å¯¹éœ€è¦éå†çš„å¯¹è±¡æ‰§è¡Œ<code>.__iter__()</code>åˆå§‹åŒ–ä¸ºè¿­ä»£å™¨</li>
<li>è¿­ä»£å™¨<code>.__next__()</code>è®¿é—®ä¸‹ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</li>
<li>æ•è·<code>StopIteration</code>å¼‚å¸¸</li>
</ul>
<p>å®ƒæ—¢å¯ä»¥éå†æœ‰åºåˆ—ç±»å‹ ä¹Ÿå¯éå†æ— åºåˆ—ç±»å‹</p>
<h4 id="å†…ç½®å‡½æ•°next-iter"><a href="#å†…ç½®å‡½æ•°next-iter" class="headerlink" title="å†…ç½®å‡½æ•°next() iter()"></a>å†…ç½®å‡½æ•°<code>next()</code> <code>iter()</code></h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="RUBY"><figure class="iseeu highlight /ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">next</span>(Obj)<span class="string">` ç›¸å½“äº `</span>Obj.__next_<span class="number">_</span>()</span><br><span class="line">iter(Obj)<span class="string">` ç›¸å½“äº `</span>Obj.__iter_<span class="number">_</span>()</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; a = <span class="string">"1234"</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; a = iter(a)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; next(a)</span><br><span class="line"><span class="string">'1'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; next(a)</span><br><span class="line"><span class="string">'2'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; a</span><br><span class="line">&lt;str_iterator object at <span class="number">0x0000000002AD6438</span>&gt;</span><br></pre></td></tr></table></figure></div>

<p>ç±»ä¼¼äºä¹‹å‰é—­åŒ…ç« èŠ‚çš„ç´¯åŠ å‡½æ•°ï¼ŒåŒä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ç”Ÿæˆçš„è¿­ä»£å™¨<strong>äº’ä¸å½±å“</strong>ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = <span class="string">"1234"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = iter(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c = iter(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="string">'1'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="string">'2'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(c)</span><br><span class="line"><span class="string">'1'</span></span><br></pre></td></tr></table></figure></div>

<p>ä½†æ˜¯ç”Ÿæˆçš„è¿­ä»£å™¨ä¼šå—åˆ°è¿­ä»£å™¨å¯¹è±¡æœ¬èº«çš„å½±å“ï¼ˆ<strong>æƒ°æ€§</strong>ï¼‰ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = iter(a)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a[<span class="number">-1</span>] = <span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure></div>

<p>æ‰€ä»¥<code>for in</code>è¯­å¥ä¸­æ”¹å˜è¢«è¿­ä»£å¯¹è±¡æœ¬ä½“ä¼šå¯¹å¾ªç¯äº§ç”Ÿå½±å“ã€‚</p>
<h4 id="è‡ªå®ç°è¿­ä»£å™¨"><a href="#è‡ªå®ç°è¿­ä»£å™¨" class="headerlink" title="è‡ªå®ç°è¿­ä»£å™¨"></a>è‡ªå®ç°è¿­ä»£å™¨</h4><p>åˆ›å»ºä¸€ä¸ªè¿”å›æ•°å­—çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œåˆå§‹å€¼ä¸º 1ï¼Œé€æ­¥é€’å¢ 1</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNumbers</span>:</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.a = <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> self</span><br><span class="line"> </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__next__</span><span class="params">(self)</span>:</span></span><br><span class="line">    x = self.a</span><br><span class="line">    self.a += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line"> </span><br><span class="line">myclass = MyNumbers()</span><br><span class="line">myiter = iter(myclass)</span><br><span class="line"></span><br><span class="line">print(next(myiter))</span><br><span class="line">print(next(myiter))</span><br><span class="line">print(next(myiter))</span><br><span class="line">print(next(myiter))</span><br><span class="line">print(next(myiter))</span><br></pre></td></tr></table></figure></div>

<p>è¿­ä»£å™¨çš„åŸºç±»æ˜¯<code>from collections.abc import Iterable</code>ï¼Œ å¯ä»¥è¿™æ ·åˆ¤åˆ«ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(myiter, Iterable)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ç”Ÿæˆå™¨"><a href="#ç”Ÿæˆå™¨" class="headerlink" title="ç”Ÿæˆå™¨"></a>ç”Ÿæˆå™¨</h3><p>åœ¨pythonä¸­ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ä¹Ÿæ˜¯å±äºè¿­ä»£å™¨<br>è‡ªå·±å®ç°äº†è¿­ä»£å™¨åè®®ï¼Œéè¿­ä»£å™¨å¯¹è±¡<code>.__iter__()</code>æ–¹æ³•ç”Ÿæˆçš„è¿­ä»£å™¨ã€‚<br>åœ¨python3ä¸­ï¼Œå¤§éƒ¨åˆ†å†…ç½®å‡½æ•°å¦‚<code>range</code>ã€<code>map</code>ã€<code>filter</code>ç­‰çš„è¿”å›å€¼éƒ½å¯è§†ä¸ºç”Ÿæˆå™¨<br>å› ä¸º<code>range(10**10)</code>æ¯”<code>list(range(10**10))</code>å ç”¨çš„å†…å­˜è¦å°å¾—å¤š</p>
<h4 id="ç”Ÿæˆå™¨å‡½æ•°"><a href="#ç”Ÿæˆå™¨å‡½æ•°" class="headerlink" title="ç”Ÿæˆå™¨å‡½æ•°"></a>ç”Ÿæˆå™¨å‡½æ•°</h4><p>ä¹Ÿå«ä½œ<strong>æƒ°æ€§å‡½æ•°</strong><br>ä½¿ç”¨<code>yield</code>è€Œä¸æ˜¯return<br>ç”Ÿæˆå™¨å‡½æ•°æ‰§è¡Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨<br>ç”Ÿæˆå™¨æ¯æ¬¡nextè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°çš„<code>yield</code>ï¼Œå‡½æ•°çš„çŠ¶æ€è¢«ä¿å­˜äº†</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">4</span></span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b = a()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>next(b)</span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line">&lt;generator object a at <span class="number">0x0000000002B002A0</span>&gt;</span><br></pre></td></tr></table></figure></div>

<h4 id="ç”Ÿæˆå™¨è¡¨è¾¾å¼"><a href="#ç”Ÿæˆå™¨è¡¨è¾¾å¼" class="headerlink" title="ç”Ÿæˆå™¨è¡¨è¾¾å¼"></a>ç”Ÿæˆå™¨è¡¨è¾¾å¼</h4><p>ç±»ä¼¼ä»¥å‰è®²è¿‡çš„åˆ—è¡¨è§£æ ä½†æ˜¯ä¸æ˜¯ä½¿ç”¨ä¸­æ‹¬å·,è€Œæ˜¯ä½¿ç”¨åœ†æ‹¬å·</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å‰æ–‡çš„ä½¿ç”¨yieldçš„æƒ°æ€§å‡½æ•°aç­‰æ•ˆäºè¿™ä¸ªï¼š</span></span><br><span class="line">a = (i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>, <span class="number">6</span>))</span><br></pre></td></tr></table></figure></div>

<p>ç”Ÿæˆå™¨è¡¨è¾¾å¼å ç”¨çš„å†…å­˜æ¯”åˆ—è¡¨è§£æå°å¾—å¤šã€‚é¿å…è¶…é•¿çš„åˆ—è¡¨äº§ç”Ÿã€‚</p>
<p>æ³¨æ„</p>
<p>åœ¨withè¯­å¥ä¸­ï¼ˆå¦‚æ–‡ä»¶å¥æŸ„ç®¡ç†ï¼‰å®šä¹‰çš„è¿­ä»£å™¨/è¿­ä»£å™¨å¯¹è±¡/ç”Ÿæˆå™¨<br>ç”±äºæƒ°æ€§ä½¿ç”¨ï¼Œåœ¨withè¯­å¥å…³é—­ä¹‹åä¼šå¯¼è‡´å…¶ç”Ÿæˆçš„å¯è¿­ä»£å¯¹è±¡nextæ–¹æ³•æŠ¥é”™</p>
<h4 id="å…¶ä»–ç”Ÿæˆå™¨æ–¹æ³•"><a href="#å…¶ä»–ç”Ÿæˆå™¨æ–¹æ³•" class="headerlink" title="å…¶ä»–ç”Ÿæˆå™¨æ–¹æ³•"></a>å…¶ä»–ç”Ÿæˆå™¨æ–¹æ³•</h4><ul>
<li><strong><code>.send()</code>æ–¹æ³•</strong></li>
<li><code>.close()</code>æ–¹æ³•</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LIVECODESERVER"><figure class="iseeu highlight /livecodeserver"><table><tr><td class="code"><pre><span class="line">.<span class="built_in">send</span>()`çš„å…¶å‚æ•°å°†ä½œä¸ºä¸Šä¸€ä¸ªyieldè¯­å¥çš„è¿”å›å€¼æ¥è¿›è¡Œä¸‹ä¸€ä¸ª`__next__()</span><br><span class="line">def <span class="keyword">a</span>():</span><br><span class="line">    n = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>: </span><br><span class="line">        print(n := (n + (yield n)))</span><br><span class="line">        </span><br><span class="line">b = <span class="keyword">a</span>()</span><br><span class="line">print(next(b)) <span class="comment"># 1</span></span><br><span class="line">b.<span class="built_in">send</span>(<span class="number">5</span>) <span class="comment"># 6</span></span><br><span class="line">b.<span class="built_in">send</span>(<span class="number">5</span>) <span class="comment"># 11</span></span><br><span class="line">b.<span class="built_in">send</span>(<span class="number">5</span>) <span class="comment"># 16</span></span><br><span class="line">b.<span class="built_in">send</span>(<span class="number">5</span>) <span class="comment"># 21</span></span><br><span class="line">b.<span class="built_in">send</span>(<span class="number">5</span>) <span class="comment"># 16</span></span><br><span class="line">b.<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure></div>

<h3 id="zip-iter-list-int"><a href="#zip-iter-list-int" class="headerlink" title="zip(*[iter(list)]*int)"></a><code>zip(*[iter(list)]*int)</code></h3><p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå·§å¦™çš„ç”¨æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(zip(*[iter([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])]*<span class="number">3</span>))</span><br><span class="line">[(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>),(<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>),(<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>)]</span><br></pre></td></tr></table></figure></div>

<h3 id="itertoolsæ¨¡å—"><a href="#itertoolsæ¨¡å—" class="headerlink" title="itertoolsæ¨¡å—"></a>itertoolsæ¨¡å—</h3><p>å†…ç½®æ¨¡å—<code>itertools</code>æä¾›äº†éå¸¸æœ‰ç”¨çš„ç”¨äºæ“ä½œè¿­ä»£å¯¹è±¡çš„å‡½æ•°</p>
<ul>
<li><code>itertools.count(1)</code>æ— é™è®¡æ•°å™¨</li>
<li><code>itertools.cycle(&#39;å¼å•¦è¿·è¿­å¼å•¦å“Ÿ&#39;)</code>æ— é™è¿­ä»£å™¨</li>
<li><code>itertools.repeat(&#39;å‘&#39;, 3)</code>å¤è¯»æœº æ¬¡æ•°å¯é€‰ é»˜è®¤æ— é™</li>
<li><code>itertools.chain(&#39;å¼å•¦è¿·è¿­&#39;, &#39;å¼å•¦å“Ÿ&#39;)</code>æ¥å¤´è¿­ä»£å™¨</li>
<li><code>itertools.groupby(&#39;neeeee,mooooo&#39;)</code>åˆ†ç»„è¿­ä»£å™¨ ç›¸é‚»çš„ç›¸ç­‰çš„ä¸€ç»„</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒå)</title>
    <url>/blog/Python/Python_id_38.html</url>
    <content><![CDATA[<h2 id="é€’å½’å’Œæ·±æ‹·è´"><a href="#é€’å½’å’Œæ·±æ‹·è´" class="headerlink" title="é€’å½’å’Œæ·±æ‹·è´"></a>é€’å½’å’Œæ·±æ‹·è´</h2><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><blockquote>
<p>åœ¨è®¡ç®—æœºä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯é€šè¿‡æ ˆï¼ˆstackï¼‰è¿™ç§æ•°æ®ç»“æ„å®ç°çš„ï¼Œæ¯å½“è¿›å…¥ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œæ ˆå°±ä¼šåŠ ä¸€å±‚æ ˆå¸§ï¼Œæ¯å½“å‡½æ•°è¿”å›ï¼Œæ ˆå°±ä¼šå‡ä¸€å±‚æ ˆå¸§ã€‚ç”±äºæ ˆçš„å¤§å°ä¸æ˜¯æ— é™çš„ï¼Œæ‰€ä»¥ï¼Œé€’å½’è°ƒç”¨çš„æ¬¡æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p>
</blockquote>
<p>é€’å½’å®ä¾‹:æ±‰è¯ºå¡”</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(n,home = <span class="string">"AæŸ±"</span>,destination = <span class="string">"CæŸ±"</span>,assistance = <span class="string">"BæŸ±"</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span> :</span><br><span class="line">        print(<span class="string">"\tå°†"</span>+ home + <span class="string">"çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°"</span> + destination + <span class="string">"çš„æœ€ä¸Šé¢"</span>)</span><br><span class="line">    <span class="keyword">if</span> n&gt;<span class="number">1</span> :</span><br><span class="line">        move(n<span class="number">-1</span>,home,assistance,destination)</span><br><span class="line">        move(<span class="number">1</span>,home,destination,assistance)</span><br><span class="line">        move(n<span class="number">-1</span>,assistance,destination,home)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>move(<span class="number">1</span>)</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>move(<span class="number">2</span>)</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°BæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†BæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>move(<span class="number">3</span>)</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°BæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†CæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°BæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†BæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°AæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†BæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

<p>å†™ä¸€ä¸ªè£…é¥°å™¨æ¥æ¢ç©¶è¿™ä¸ªå‡½æ•°å¼€è¾Ÿäº†å¤šå°‘ä¸ªä½œç”¨åŸŸå§</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(func)</span>:</span></span><br><span class="line">    step=<span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> step</span><br><span class="line">        step+=<span class="number">1</span></span><br><span class="line">        print(<span class="string">"ç¬¬%sä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«å¼€è¾Ÿ"</span>%step)</span><br><span class="line">        res=func(*args,**kwargs)</span><br><span class="line">        print(<span class="string">"ç¬¬%sä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯"</span>%step)</span><br><span class="line">        step-=<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@foo</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(n,home = <span class="string">"AæŸ±"</span>,destination = <span class="string">"CæŸ±"</span>,assistance = <span class="string">"BæŸ±"</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span> :</span><br><span class="line">        print(<span class="string">"\tå°†"</span>+ home + <span class="string">"çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°"</span> + destination + <span class="string">"çš„æœ€ä¸Šé¢"</span>)</span><br><span class="line">    <span class="keyword">if</span> n&gt;<span class="number">1</span> :</span><br><span class="line">        move(n<span class="number">-1</span>,home,assistance,destination)</span><br><span class="line">        move(<span class="number">1</span>,home,destination,assistance)</span><br><span class="line">        move(n<span class="number">-1</span>,assistance,destination,home)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>move(<span class="number">1</span>)</span><br><span class="line">ç¬¬<span class="number">1</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«å¼€è¾Ÿ</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">ç¬¬<span class="number">1</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>move(<span class="number">2</span>)</span><br><span class="line">ç¬¬<span class="number">1</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«å¼€è¾Ÿ</span><br><span class="line">ç¬¬<span class="number">2</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«å¼€è¾Ÿ</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°BæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">ç¬¬<span class="number">2</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯</span><br><span class="line">ç¬¬<span class="number">2</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«å¼€è¾Ÿ</span><br><span class="line">	å°†AæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">ç¬¬<span class="number">2</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯</span><br><span class="line">ç¬¬<span class="number">2</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«å¼€è¾Ÿ</span><br><span class="line">	å°†BæŸ±çš„æœ€ä¸Šé¢çš„ç¯ç§»åŠ¨åˆ°CæŸ±çš„æœ€ä¸Šé¢</span><br><span class="line">ç¬¬<span class="number">2</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯</span><br><span class="line">ç¬¬<span class="number">1</span>ä¸ªå‡½æ•°ä½œç”¨åŸŸè¢«é”€æ¯</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="comment">#ç”±æ­¤å¯è§ é€’å½’çš„æ€§èƒ½æ¶ˆè€—æœ‰å¤šå¤§</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å°¾é€’å½’"><a href="#å°¾é€’å½’" class="headerlink" title="å°¾é€’å½’"></a>å°¾é€’å½’</h3><blockquote>
<p>å°¾é€’å½’æ˜¯æŒ‡ï¼Œåœ¨å‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè°ƒç”¨è‡ªèº«æœ¬èº«ï¼Œå¹¶ä¸”ï¼Œreturnè¯­å¥ä¸èƒ½åŒ…å«è¡¨è¾¾å¼ã€‚è¿™æ ·ï¼Œç¼–è¯‘å™¨æˆ–è€…è§£é‡Šå™¨å°±å¯ä»¥æŠŠå°¾é€’å½’åšä¼˜åŒ–ï¼Œä½¿é€’å½’æœ¬èº«æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œéƒ½åªå ç”¨ä¸€ä¸ªæ ˆå¸§ï¼Œä¸ä¼šå‡ºç°æ ˆæº¢å‡ºçš„æƒ…å†µã€‚</p>
</blockquote>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¸€èˆ¬é€’å½’</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">normal_recursion</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> n + normal_recursion(n<span class="number">-1</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment">#å°¾é€’å½’</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tail_recursion</span><span class="params">(n, total=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> tail_recursion(n<span class="number">-1</span>, total+n)</span><br></pre></td></tr></table></figure></div>

<p>æœ€åä¸€æ­¥è°ƒç”¨,å½¢æˆâ€è°ƒç”¨æ ˆâ€<br>å¤æ‚åº¦ O(n) =&gt; O(1)<br>é—æ†¾çš„æ˜¯ï¼Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€æ²¡æœ‰é’ˆå¯¹å°¾é€’å½’åšä¼˜åŒ–ï¼ŒPythonè§£é‡Šå™¨ä¹Ÿæ²¡æœ‰åšä¼˜åŒ–ï¼Œæ‰€ä»¥ï¼Œå³ä½¿æŠŠä¸Šé¢çš„å‡½æ•°æ”¹æˆå°¾é€’å½’æ–¹å¼ï¼Œä¹Ÿä¼šå¯¼è‡´æ ˆæº¢å‡ºã€‚</p>
<p> ä½†æ˜¯ä¸€ä¸ªç‰›äººæƒ³å‡ºçš„è§£å†³åŠæ³•ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">å®ç°ä¸€ä¸ª tail_call_optimized è£…é¥°å™¨</span><br><span class="line"><span class="comment">#!/usr/bin/env python2.4</span></span><br><span class="line"><span class="comment"># This program shows off a python decorator(</span></span><br><span class="line"><span class="comment"># which implements tail call optimization. It</span></span><br><span class="line"><span class="comment"># does this by throwing an exception if it is</span></span><br><span class="line"><span class="comment"># it's own grandparent, and catching such</span></span><br><span class="line"><span class="comment"># exceptions to recall the stack.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TailRecurseException</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, args, kwargs)</span>:</span></span><br><span class="line">        self.args = args</span><br><span class="line">        self.kwargs = kwargs</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tail_call_optimized</span><span class="params">(g)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    This function decorates a function with tail call</span></span><br><span class="line"><span class="string">    optimization. It does this by throwing an exception</span></span><br><span class="line"><span class="string">    if it is it's own grandparent, and catching such</span></span><br><span class="line"><span class="string">    exceptions to fake the tail call optimization.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    This function fails if the decorated</span></span><br><span class="line"><span class="string">    function recurses in a non-tail context.</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        f = sys._getframe()</span><br><span class="line">        <span class="keyword">if</span> f.f_back <span class="keyword">and</span> f.f_back.f_back \</span><br><span class="line">            <span class="keyword">and</span> f.f_back.f_back.f_code == f.f_code:</span><br><span class="line">            <span class="comment"># æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">            <span class="keyword">raise</span> TailRecurseException(args, kwargs)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    <span class="keyword">return</span> g(*args, **kwargs)</span><br><span class="line">                <span class="keyword">except</span> TailRecurseException, e:</span><br><span class="line">                    args = e.args</span><br><span class="line">                    kwargs = e.kwargs</span><br><span class="line">    func.__doc__ = g.__doc__</span><br><span class="line">    <span class="keyword">return</span> func</span><br><span class="line"></span><br><span class="line"><span class="meta">@tail_call_optimized</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n, acc=<span class="number">1</span>)</span>:</span></span><br><span class="line">    <span class="string">"calculate a factorial"</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> acc</span><br><span class="line">    <span class="keyword">return</span> factorial(n<span class="number">-1</span>, n*acc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> factorial(<span class="number">10000</span>)</span><br></pre></td></tr></table></figure></div>

<p>åŸæ–‡<a href="http://code.activestate.com/recipes/474088-tail-call-optimization-decorator/" target="_blank" rel="noopener">http://code.activestate.com/recipes/474088-tail-call-optimization-decorator/</a></p>
<h3 id="æ·±æµ…æ‹·è´"><a href="#æ·±æµ…æ‹·è´" class="headerlink" title="æ·±æµ…æ‹·è´"></a>æ·±æµ…æ‹·è´</h3><p>æµ…æ‹·è´</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">l2 = l1</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºèµ‹å€¼è¿ç®—æ¥è¯´,2ä¸ªåˆ—è¡¨å,æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">l2 = l1.copy()</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºæµ…copyæ¥è¯´ï¼Œåªæ˜¯åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºäº†å¼€è¾Ÿäº†ä¸€ä¸ªç©ºé—´å­˜æ”¾ä¸€ä¸ªæ–°åˆ—è¡¨ï¼Œä½†æ˜¯æ–°åˆ—è¡¨ä¸­çš„å…ƒç´ ä¸åŸåˆ—è¡¨ä¸­çš„å…ƒç´ æ˜¯å…¬ç”¨çš„ã€‚</p>
<h4 id="å€ŸåŠ©copyæ¨¡å—"><a href="#å€ŸåŠ©copyæ¨¡å—" class="headerlink" title="å€ŸåŠ©copyæ¨¡å—"></a>å€ŸåŠ©copyæ¨¡å—</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">l2 = copy.deepcopy(l1)</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºæ·±copyæ¥è¯´ï¼Œåˆ—è¡¨æ˜¯åœ¨å†…å­˜ä¸­é‡æ–°åˆ›å»ºçš„ï¼Œåˆ—è¡¨ä¸­å¯å˜çš„æ•°æ®ç±»å‹æ˜¯é‡æ–°åˆ›å»ºçš„ï¼Œåˆ—è¡¨ä¸­çš„ä¸å¯å˜çš„æ•°æ®ç±»å‹æ˜¯å…¬ç”¨çš„ã€‚</p>
<blockquote>
<h5 id="å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªå‡½æ•°æ¥å®ç°æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡é€’å½’å®ç°ã€‚"><a href="#å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªå‡½æ•°æ¥å®ç°æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡é€’å½’å®ç°ã€‚" class="headerlink" title="#å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªå‡½æ•°æ¥å®ç°æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡é€’å½’å®ç°ã€‚"></a><a href="http://nanarino.metoyun.com/py/14-é€’å½’å’Œæ·±æ‹·è´.html#å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªå‡½æ•°æ¥å®ç°æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡é€’å½’å®ç°ã€‚" target="_blank" rel="noopener">#</a>å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªå‡½æ•°æ¥å®ç°æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡é€’å½’å®ç°ã€‚</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">dt = &#123;<span class="string">"a"</span>: <span class="string">"aaa"</span>, <span class="string">"b"</span>: <span class="string">"bbb"</span>, <span class="string">"c"</span>: &#123;<span class="string">"c1"</span>: <span class="number">11</span>, <span class="string">"c2"</span>: &#123;<span class="string">"c21"</span>: <span class="string">"211"</span>, <span class="string">"c22"</span>: <span class="string">"212"</span>, <span class="string">"c23"</span>: <span class="string">"213"</span>&#125;, <span class="string">"c3"</span>: <span class="number">33</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy_dict</span><span class="params">(d)</span>:</span></span><br><span class="line">    res = &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> d:</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> key, value <span class="keyword">in</span> d.items():</span><br><span class="line">        <span class="comment"># å¦‚æœä¸æ˜¯dictå­—å…¸ï¼Œåˆ™ç›´æ¥èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isinstance(value, dict):</span><br><span class="line">            res[key] = value</span><br><span class="line">        <span class="comment"># å¦‚æœè¿˜æ˜¯å­—å…¸ï¼Œé€’å½’è°ƒç”¨copy_dict(d)</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res[key] = copy_dict(value)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">print(<span class="string">"å¤åˆ¶å‰ï¼š"</span> + str(dt))</span><br><span class="line">copy_dt = copy_dict(dt)</span><br><span class="line">print(<span class="string">"å¤åˆ¶åï¼š"</span> + str(copy_dict(dt)))</span><br></pre></td></tr></table></figure></div></blockquote>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åä¹)</title>
    <url>/blog/Python/Python_id_37.html</url>
    <content><![CDATA[<h2 id="é—­åŒ…å’Œè£…é¥°å™¨"><a href="#é—­åŒ…å’Œè£…é¥°å™¨" class="headerlink" title="é—­åŒ…å’Œè£…é¥°å™¨"></a>é—­åŒ…å’Œè£…é¥°å™¨</h2><p>é—­åŒ…æ˜¯å‡½æ•°ä½œç”¨åŸŸçš„ä½“ç°<br>è£…é¥°å™¨æœ¬è´¨å°±æ˜¯å‡½æ•°,åŠŸèƒ½æ˜¯ä¸ºå…¶ä»–å‡½æ•°æ·»åŠ é™„åŠ åŠŸèƒ½</p>
<a id="more"></a>

<h3 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h3><blockquote>
<p>é—­åŒ…ï¼ˆClosureï¼‰æ˜¯è¯æ³•é—­åŒ…ï¼ˆLexical Closureï¼‰çš„ç®€ç§°ï¼Œæ˜¯å¼•ç”¨äº†è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚è¿™ä¸ªè¢«å¼•ç”¨çš„è‡ªç”±å˜é‡å°†å’Œè¿™ä¸ªå‡½æ•°ä¸€åŒå­˜åœ¨ï¼Œå³ä½¿å·²ç»ç¦»å¼€äº†åˆ›é€ å®ƒçš„ç¯å¢ƒä¹Ÿä¸ä¾‹å¤–ã€‚æ‰€ä»¥ï¼Œé—­åŒ…æ˜¯ç”±å‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆè€Œæˆçš„å®ä½“ã€‚</p>
<p>é—­åŒ…çš„åŸç†ï¼Œå½“å†…åµŒå‡½æ•°å¼•ç”¨äº†åŒ…å«å®ƒçš„å‡½æ•°ï¼ˆenclosing functionï¼‰ä¸­çš„non-local å˜é‡åï¼Œè¿™äº›å˜é‡ä¼šè¢«ä¿å­˜åœ¨enclosing functionçš„<code>__closure__</code>å±æ€§ä¸­ï¼Œæˆä¸ºenclosing functionæœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™äº›å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¼šå’Œenclosing functionä¸€æ ·ã€‚</p>
<p>åœ¨Pythonä¸­åˆ›å»ºä¸€ä¸ªé—­åŒ…å¯ä»¥å½’ç»“ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>
<ul>
<li>é—­åŒ…å‡½æ•°å¿…é¡»æœ‰å†…åµŒå‡½æ•°</li>
<li>å†…åµŒå‡½æ•°éœ€è¦å¼•ç”¨è¯¥åµŒå¥—å‡½æ•°ä¸Šä¸€çº§namespaceä¸­çš„å˜é‡</li>
<li>é—­åŒ…å‡½æ•°å¿…é¡»è¿”å›å†…åµŒå‡½æ•°</li>
</ul>
</blockquote>
<h4 id="é—­åŒ…ç¤ºä¾‹"><a href="#é—­åŒ…ç¤ºä¾‹" class="headerlink" title="é—­åŒ…ç¤ºä¾‹"></a>é—­åŒ…ç¤ºä¾‹</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">()</span>:</span></span><br><span class="line">    step = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add1</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> step</span><br><span class="line">        step += <span class="number">1</span></span><br><span class="line">        print(step)</span><br><span class="line">    <span class="keyword">return</span> add1</span><br><span class="line"><span class="comment">#fooå‡½æ•°æ‰§è¡Œä¼šè¿”å›ä¸€ä¸ªç´¯åŠ ä½œç”¨çš„å‡½æ•°add1 </span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo()()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment">#å‡½æ•°æ‰§è¡Œç»“æŸä½œç”¨åŸŸç«‹å³é”€æ¯ å¾—åˆ©äºpythonè§£é‡Šå™¨çš„è‡ªåŠ¨å›æ”¶åƒåœ¾çš„æœºåˆ¶</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a=foo()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b=foo()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[str(c.cell_contents) <span class="keyword">for</span> c <span class="keyword">in</span> a.__closure__][<span class="number">0</span>]</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a()</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[str(c.cell_contents) <span class="keyword">for</span> c <span class="keyword">in</span> a.__closure__][<span class="number">0</span>]</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[str(c.cell_contents) <span class="keyword">for</span> c <span class="keyword">in</span> a.__closure__][<span class="number">0</span>]</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b()</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b()</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span></span><br><span class="line"><span class="comment">#é—­åŒ…è®©ä½œç”¨åŸŸä¸ä¼šè¢«é”€æ¯ </span></span><br><span class="line"><span class="comment">#__closure__å±æ€§æ‹¿åˆ°æ‰€å¼•ç”¨çš„å†…éƒ¨å˜é‡çš„å†…å­˜åœ°å€ï¼ˆåªåšäº†è§£ï¼‰</span></span><br></pre></td></tr></table></figure></div>

<p>ç”±äºå†…å­˜å¾—ä¸åˆ°è‡ªåŠ¨é‡Šæ”¾ï¼Œè¿™é‡Œçš„fooæ‰§è¡Œä¼šç”Ÿæˆ<strong>äº’ä¸å½±å“</strong>çš„ç´¯åŠ å™¨ã€‚<br>è¿™ä¸ä¹‹åç« èŠ‚çš„ç”Ÿæˆå™¨å…·æœ‰ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<h3 id="å¼€æ”¾å°é—­åŸåˆ™"><a href="#å¼€æ”¾å°é—­åŸåˆ™" class="headerlink" title="å¼€æ”¾å°é—­åŸåˆ™"></a>å¼€æ”¾å°é—­åŸåˆ™</h3><blockquote>
<p>ä¸ä¿®æ”¹è¢«ä¿®é¥°å‡½æ•°çš„æºä»£ç  ä¸ä¿®æ”¹è¢«ä¿®æ”¹å‡½æ•°çš„è°ƒç”¨æ–¹å¼</p>
</blockquote>
<h3 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h3><p>åœ¨pythonä¸­ï¼Œè£…é¥°å™¨ï¼ˆ<code>Decorator</code>ï¼‰å°±æ˜¯ä¸€ä¸ªè¿”å›å‡½æ•°çš„é«˜é˜¶å‡½æ•°ï¼Œä¿®æ”¹äº†ç›®æ ‡å‡½æ•°çš„åŠŸèƒ½ä¸”ç¬¦åˆå¼€æ”¾å°é—­åŸåˆ™</p>
<h4 id="è£…é¥°å™¨çš„å®ç°"><a href="#è£…é¥°å™¨çš„å®ç°" class="headerlink" title="è£…é¥°å™¨çš„å®ç°"></a>è£…é¥°å™¨çš„å®ç°</h4><p>åˆ©ç”¨: é«˜é˜¶å‡½æ•° å’Œ é—­åŒ…</p>
<ul>
<li>è£…é¥°å™¨åfoo</li>
<li>è¢«ä¿®é¥°çš„å‡½æ•°åbar</li>
</ul>
<p>barå£°æ˜çš„å‰ä¸€è¡Œ<code>@foo</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">        code</span><br><span class="line">        ret = func(*args,**kwargs)</span><br><span class="line">        code</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line">    </span><br><span class="line"><span class="meta">@foo</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br></pre></td></tr></table></figure></div>

<p>ç›¸å½“äº<code>bar = foo(bar)</code>ï¼Œè¿™æ ·ï¼Œåœ¨ä¸æ”¹å˜<code>bar</code>è°ƒç”¨æ–¹å¼çš„æƒ…å†µä¸‹å¢åŠ äº†<code>bar</code>çš„åŠŸèƒ½<br>ä½†æ˜¯ ,<code>bar</code>çš„å‡½æ•°åå´è¢«ä¿®æ”¹ä¸ºäº†<code>&#39;wrapper&#39;</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bar.__name__</span><br><span class="line"><span class="string">'wrapper'</span></span><br></pre></td></tr></table></figure></div>

<p>ä½¿ç”¨è£…é¥°å™¨<code>functools.wraps</code>ä¿®æ”¹é©¬ç”²ï¼Œå®Œæ•´ç‰ˆå¦‚ä¸‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(func)</span>:</span></span><br><span class="line"><span class="meta">    @functools.wraps(func)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">        code</span><br><span class="line">        ret = func(*args,**kwargs)</span><br><span class="line">        code</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line">    </span><br><span class="line"><span class="meta">@foo</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">()</span>:</span></span><br></pre></td></tr></table></figure></div>

<p>æ›´å¤æ‚çš„è£…é¥°å™¨ä¹Ÿåªæ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå¥—å¨ƒã€‚</p>
<h3 id="åå‡½æ•°"><a href="#åå‡½æ•°" class="headerlink" title="åå‡½æ•°"></a>åå‡½æ•°</h3><p>ä¸åŒäºæ•°å­¦æ„ä¹‰ï¼Œåå‡½æ•°ï¼ˆPartial functionï¼‰ï¼Œå¯ä»¥æŠŠå‡½æ•°åˆ†ä¸¤æ¬¡è°ƒç”¨ï¼Œæ¯æ¬¡ä¼ ä¸€éƒ¨åˆ†å‚æ•°çš„å‡½æ•°ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">def foo(x, y):</span><br><span class="line">    return x + y</span><br></pre></td></tr></table></figure></div>

<p>é«˜é˜¶å‡½æ•°<code>functools.partial</code>å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåå‡½æ•°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> functools</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bar = functools.partial(foo, y=<span class="number">-100</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bar(<span class="number">50</span>)</span><br><span class="line"><span class="number">-50</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bar(x=<span class="number">100</span>)</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åå…«)</title>
    <url>/blog/Python/Python_id_36.html</url>
    <content><![CDATA[<h2 id="å‡½æ•°å’Œä½œç”¨åŸŸ"><a href="#å‡½æ•°å’Œä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°å’Œä½œç”¨åŸŸ"></a>å‡½æ•°å’Œä½œç”¨åŸŸ</h2><p>å‰é¢å·²ç»å­¦ä¹ äº†å¾ˆå¤šå†…ç½®å‡½æ•°å’Œå„ç§æ•°æ®ç±»å‹çš„å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<h3 id="å‡½æ•°å£°æ˜æ ¼å¼"><a href="#å‡½æ•°å£°æ˜æ ¼å¼" class="headerlink" title="å‡½æ•°å£°æ˜æ ¼å¼"></a>å‡½æ•°å£°æ˜æ ¼å¼</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> å‡½æ•°å<span class="params">(å½¢å‚)</span>:</span></span><br><span class="line">	code</span><br><span class="line">	<span class="keyword">return</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>returnè¯­å¥ä¸å†™é»˜è®¤è¿”å›<code>None</code></li>
<li>returnè¯­å¥æ¥å¤šä¸ªè¡¨è¾¾å¼ä¼šè¿”å›ä¸ºå…ƒç»„</li>
<li>å¯ä»¥ä½¿ç”¨passè¯­å¥å ä½</li>
</ul>
<h4 id="ä¼ é€’å®å‚"><a href="#ä¼ é€’å®å‚" class="headerlink" title="ä¼ é€’å®å‚"></a>ä¼ é€’å®å‚</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä½ç½®å‚æ•°ï¼Œä¸€ä¸€å¯¹åº”</span></span><br><span class="line">foo(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">#å…³é”®å­—å‚æ•°</span></span><br><span class="line">foo(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"><span class="comment">#æ··åˆä½¿ç”¨æ—¶ï¼Œä½ç½®å‚æ•°è¦å…ˆå å‘</span></span><br></pre></td></tr></table></figure></div>

<p><strong>æ³¨æ„</strong></p>
<p>ç»™å½¢å‚ä¼ é€’å®å‚ç›¸å½“äºæ˜¯ç›´æ¥èµ‹å€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è®²ç›¸å½“äºèµ·åˆ«åã€‚<br>è¿™ä¼šå¯¼è‡´å®šä¹‰çš„å‡½æ•°å¯èƒ½ä¸æ˜¯çº¯å‡½æ•°ï¼ˆæ‰€ä¼ é€’è¿›å»çš„åŸåˆ—è¡¨å­—å…¸ç­‰å‚æ•°å¯ä»¥è¢«å½±å“ï¼‰<br>å¯ä»¥ä½¿ç”¨ï¼ˆæ·±ï¼‰æ‹·è´ç­‰æ–¹æ³•åœ¨æ“ä½œå¼•ç”¨ç±»å‹æ—¶è¾¾åˆ°çº¯å‡½æ•°çš„æ•ˆæœ</p>
<h4 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¿…ä¼ çš„å‚æ•° è¦åœ¨ æœ‰é»˜è®¤å€¼çš„å‚æ•° ä¹‹å‰</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a, b, c=None)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<p><strong>æ³¨æ„</strong></p>
<p>åœ¨pythonä¸­ï¼Œé»˜è®¤å‚æ•°ä¸èƒ½æ˜¯å…¶ä»–å½¢å‚æ„æˆçš„è¡¨è¾¾å¼ã€‚ï¼ˆä¸è¦ï¼š<code>def f(a, b=len(a)):</code>ï¼‰</p>
<p>åœ¨pythonä¸­ï¼Œå‚æ•°æ‰€åœ¨çš„å°æ‹¬å·å¹¶ä¸å±äºå‡½æ•°å‘½åç©ºé—´ä¹Ÿä¸æ˜¯ç‹¬ç«‹çš„å—ä½œç”¨åŸŸï¼Œ<br>æ‰€ä»¥ä¸è¦ä½¿ç”¨é»˜è®¤å‚æ•°æ¥åˆå§‹åŒ–ç©ºåˆ—è¡¨å’Œç©ºå­—å…¸ã€‚ï¼ˆä¸è¦ï¼š<code>def f(a, b=[]):</code>ï¼‰<br>å¯ä»¥ç”¨<code>def f(a, b=None):</code>å’Œ<code>if b is None: b = []</code>æ¥èµ‹å€¼</p>
<h4 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AUTOHOTKEY"><figure class="iseeu highlight /autohotkey"><table><tr><td class="code"><pre><span class="line">*å…ƒç»„`ï¼ˆä¸é™äºå…ƒç»„ï¼‰ï¼Œ `**å­—å…¸</span><br></pre></td></tr></table></figure></div>

<h5 id="æ¥æ”¶"><a href="#æ¥æ”¶" class="headerlink" title="æ¥æ”¶"></a>æ¥æ”¶</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(*args,**kwargs)</span>:</span></span><br><span class="line">    print(args)</span><br><span class="line">    print(kwargs)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bar(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, x=<span class="number">5</span>)</span><br><span class="line">(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">&#123;<span class="string">'x'</span>: <span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure></div>

<h5 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(a,b,c)</span>:</span></span><br><span class="line">    print(a)</span><br><span class="line">    print(b)</span><br><span class="line">    print(c)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å‰©ä½™çš„å‚æ•°ç”±åˆ—è¡¨å¡«å……ï¼ˆä½ç½®å‚æ•°ï¼‰</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,*[<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å‰©ä½™çš„å‚æ•°ç”±å­—å…¸å¡«å……ï¼ˆå…³é”®å­—å‚æ•°ï¼‰</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(<span class="number">1</span>,**&#123;<span class="string">"b"</span>:<span class="number">2</span>, <span class="string">"c"</span>:<span class="number">3</span>&#125;)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ··åˆä½¿ç”¨æ—¶ï¼Œè¦å…ˆç”±*åˆ—è¡¨å¡«å……å†ç”¨**å­—å…¸å¡«å……</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>foo(*(<span class="number">1</span>, <span class="number">2</span>,), **&#123;<span class="string">"c"</span>:<span class="number">3</span>&#125;)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨python3.8ä¸­æ–°å¢ä½¿ç”¨<code>/</code> å’Œ<code>*</code>åˆ†å‰²çš„ç”¨æ³•ï¼š<br>å¼ºåˆ¶é™åˆ¶å‡½æ•°çš„å‚æ•°åªå…è®¸ä»¥ä½ç½®å‚æ•°æˆ–è€…å…³é”®å­—å‚æ•°çš„æ–¹å¼ä¼ å…¥ã€‚<br><code>/</code>ä¹‹å‰çš„å‚æ•°å¿…é¡»æ˜¯ä½ç½®å‚æ•°ï¼Œ<code>*</code>ä¹‹åçš„å‚æ•°å¿…é¡»æ˜¯å…³é”®å­—å‚æ•°</p>
<h3 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h3><p>å˜é‡åœ¨å£°æ˜æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œä¹Ÿå«ä½œ<code>local namespace</code>ï¼ˆå½“å‰å‡½æ•°å‘½åç©ºé—´ï¼‰<br>å‡½æ•°åœ¨å£°æ˜æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸæ˜¯å¯ä»¥å±‚å±‚å‘å¤–å±‚æœç´¢çš„<br>ä¸åŒçš„å‡½æ•°ä½œç”¨åŸŸä¸­åŒºåˆ†å£°æ˜å’Œèµ‹å€¼:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">global</span> name    <span class="comment">#å…¨å±€ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="keyword">nonlocal</span> name    <span class="comment">#éå…¨å±€çš„ç›¸æ¯”æ›´å¤–å±‚çš„ä½œç”¨åŸŸ</span></span><br></pre></td></tr></table></figure></div>

<p>Pythonä¸­é€šè¿‡æä¾› namespace æ¥å®ç°é‡åå‡½æ•°/æ–¹æ³•ã€å˜é‡ç­‰ä¿¡æ¯çš„è¯†åˆ«ï¼Œå…¶ä¸€å…±æœ‰ä¸‰ç§ namespaceï¼Œåˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>local namespace: ä½œç”¨èŒƒå›´ä¸ºå½“å‰å‡½æ•°æˆ–è€…ç±»æ–¹æ³•</li>
<li>global namespace: ä½œç”¨èŒƒå›´ä¸ºå½“å‰æ¨¡å—</li>
<li>build-in namespace: ä½œç”¨èŒƒå›´ä¸ºæ‰€æœ‰æ¨¡å—</li>
</ul>
<p>å½“å‡½æ•°/æ–¹æ³•ã€å˜é‡ç­‰ä¿¡æ¯å‘ç”Ÿé‡åæ—¶ï¼ŒPythonä¼šæŒ‰ç…§<br><code>local namespace</code> -&gt; <code>global namespace</code> -&gt; <code>build-in namespace</code><br>çš„é¡ºåºæœç´¢ç”¨æˆ·æ‰€éœ€å…ƒç´ ï¼Œå¹¶ä¸”ä»¥ç¬¬ä¸€ä¸ªæ‰¾åˆ°æ­¤å…ƒç´ çš„ namespace ä¸ºå‡†ã€‚</p>
<p>åŒæ—¶ï¼ŒPythonä¸­çš„å†…å»ºå‡½æ•°<code>locals()</code>å’Œ<code>globals()</code>å¯ä»¥ç”¨æ¥æŸ¥çœ‹ä¸åŒnamespaceä¸­å®šä¹‰çš„å…ƒç´ ã€‚</p>
<h3 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h3><p>returnå†’å·å³è¾¹çš„è¯­å¥çš„è¿”å›å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x:x+<span class="number">1</span></span><br></pre></td></tr></table></figure></div>

<p>åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°ï¼šä»¥list.sortçš„keyä¸ºä¾‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#list.sort(cmp=None, key=None, reverse=False)</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst = [<span class="string">'3'</span>,<span class="string">'14'</span>,<span class="string">'72'</span>,<span class="string">'108'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst.sort()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst</span><br><span class="line">[<span class="string">'108'</span>, <span class="string">'14'</span>, <span class="string">'3'</span>, <span class="string">'72'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst.sort(key = <span class="keyword">lambda</span> x:int(x))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>lst</span><br><span class="line">[<span class="string">'3'</span>, <span class="string">'14'</span>, <span class="string">'72'</span>, <span class="string">'108'</span>]</span><br></pre></td></tr></table></figure></div>

<h4 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h4><ul>
<li>ä¸å¯å˜ï¼šä¸ç”¨å˜é‡ä¿å­˜çŠ¶æ€,ä¸ä¿®æ”¹å˜é‡</li>
<li>ç¬¬ä¸€ç±»å¯¹è±¡ï¼šå‡½æ•°å³å˜é‡</li>
</ul>
<h3 id="é«˜é˜¶å‡½æ•°-map-filter-reduce"><a href="#é«˜é˜¶å‡½æ•°-map-filter-reduce" class="headerlink" title="é«˜é˜¶å‡½æ•° map() filter() reduce()"></a>é«˜é˜¶å‡½æ•° <code>map()</code> <code>filter()</code> <code>reduce()</code></h3><p>Py3é‡Œ <code>reduce()</code>è¢«æ”¶å…¥äº†<code>functools</code>æ¨¡å—ä¸­<br>Py2ä¸­ <code>filter()</code> <code>reduce()</code>è¿”å›çš„æ˜¯åˆ—è¡¨, è€Œ Py3 ä¸­è¿”å›åˆ°æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<p>å…¶ä¸Šå®ç°äº† <code>__iter__</code> å’Œ <code>__next__</code> æ–¹æ³•æ•…è€Œå¯ç›´æ¥ç”¨äº<code>for in</code>è¯­å¥ã€‚<br>ä¹Ÿå¯ä»¥ç”¨<code>list()</code>å‡½æ•°å°†è¿­ä»£å™¨è½¬ä¸ºåˆ—è¡¨ï¼ˆä¸é™äºåˆ—è¡¨ï¼‰ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—åˆ—è¡¨å„ä¸ªå…ƒç´ çš„å¹³æ–¹</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(<span class="keyword">lambda</span> x: x ** <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]))</span><br><span class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</span><br><span class="line"><span class="comment"># æä¾›äº†ä¸¤ä¸ªåˆ—è¡¨ï¼Œå¯¹ç›¸åŒä½ç½®çš„åˆ—è¡¨æ•°æ®è¿›è¡Œç›¸åŠ </span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(map(<span class="keyword">lambda</span> x, y: x + y, [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>], [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>]))</span><br><span class="line">[<span class="number">3</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">19</span>]</span><br><span class="line"><span class="comment">#è¿‡æ»¤å‡ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¥‡æ•°ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_odd</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">&gt;&gt;&gt;list(filter(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]))</span><br><span class="line">[<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line"><span class="comment">#ä½¿ç”¨reduceè®°å½•è¯é¢‘ï¼š</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">statistics</span><span class="params">(dic,k)</span>:</span> </span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> k <span class="keyword">in</span> dic: </span><br><span class="line">    dic[k] = <span class="number">1</span> </span><br><span class="line">  <span class="keyword">else</span>: </span><br><span class="line">    dic[k] +=<span class="number">1</span> </span><br><span class="line">  <span class="keyword">return</span> dic </span><br><span class="line">lst = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">5</span>] </span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;reduce(statistics,lst,&#123;&#125;)</span><br><span class="line">&#123;<span class="number">1</span>: <span class="number">2</span>, <span class="number">2</span>: <span class="number">2</span>, <span class="number">3</span>: <span class="number">3</span>, <span class="number">5</span>: <span class="number">4</span>, <span class="number">6</span>: <span class="number">2</span>, <span class="number">7</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="å†…ç½®å‡½æ•°"><a href="#å†…ç½®å‡½æ•°" class="headerlink" title="å†…ç½®å‡½æ•°"></a>å†…ç½®å‡½æ•°</h3><p>ç½—åˆ—äº†ï¼ˆåŒ…å«å‰é¢å·²ç»å­¦è¿‡çš„ï¼‰å†…ç½®å‡½æ•°ï¼Œæ¯ä¸€ä¸ªå‡½æ•°è¯·è‡ªå·±æ•²ä¸€éã€‚</p>
<h4 id="æ–‡ä»¶å¤„ç†"><a href="#æ–‡ä»¶å¤„ç†" class="headerlink" title="æ–‡ä»¶å¤„ç†"></a>æ–‡ä»¶å¤„ç†</h4><p><code>open()</code> æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶æ“ä½œç¬¦(æ–‡ä»¶å¥æŸ„)<br>æ“ä½œæ–‡ä»¶çš„æ¨¡å¼æœ‰<code>r,w,a,r+,w+,a+</code>å…±6ç§<br>æ¯ä¸€ç§æ–¹å¼éƒ½å¯ä»¥ç”¨äºŒè¿›åˆ¶çš„å½¢å¼æ“ä½œ(<code>rb,wb,ab,rb+,wb+,ab+</code>)<br>å¯ä»¥ç”¨<code>encoding=æŒ‡å®šç¼–ç </code>ã€‚</p>
<h4 id="ä½œç”¨åŸŸç›¸å…³"><a href="#ä½œç”¨åŸŸç›¸å…³" class="headerlink" title="ä½œç”¨åŸŸç›¸å…³"></a>ä½œç”¨åŸŸç›¸å…³</h4><p><code>globals()</code>â€”â€”è·å–å…¨å±€å˜é‡çš„å­—å…¸<br><code>locals()</code>â€”â€”è·å–æ‰§è¡Œæœ¬æ–¹æ³•æ‰€åœ¨å‘½åç©ºé—´å†…çš„å±€éƒ¨å˜é‡çš„å­—å…¸</p>
<h4 id="æ§åˆ¶å°ç›¸å…³"><a href="#æ§åˆ¶å°ç›¸å…³" class="headerlink" title="æ§åˆ¶å°ç›¸å…³"></a>æ§åˆ¶å°ç›¸å…³</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">input()` è¾“å…¥</span><br><span class="line">`<span class="builtin-name">print</span>()` è¾“å‡º</span><br><span class="line">`<span class="builtin-name">print</span>(value, <span class="built_in">..</span>., <span class="attribute">sep</span>=<span class="string">' '</span>, <span class="attribute">end</span>=<span class="string">'\n'</span>, <span class="attribute">file</span>=sys.stdout, <span class="attribute">flush</span>=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>file: é»˜è®¤æ˜¯è¾“å‡ºåˆ°å±å¹•ï¼Œå¦‚æœè®¾ç½®ä¸ºæ–‡ä»¶å¥æŸ„ï¼Œè¾“å‡ºåˆ°æ–‡ä»¶</li>
<li>sep: æ‰“å°å¤šä¸ªå€¼ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºæ ¼</li>
<li>end: æ¯ä¸€æ¬¡æ‰“å°çš„ç»“å°¾ï¼Œé»˜è®¤ä¸ºæ¢è¡Œç¬¦</li>
<li>flush: ç«‹å³æŠŠå†…å®¹è¾“å‡ºåˆ°æµæ–‡ä»¶ï¼Œä¸ä½œç¼“å­˜</li>
</ul>
<h4 id="æ•°æ®ç±»å‹ç›¸å…³"><a href="#æ•°æ®ç±»å‹ç›¸å…³" class="headerlink" title="æ•°æ®ç±»å‹ç›¸å…³"></a>æ•°æ®ç±»å‹ç›¸å…³</h4><p><code>type(o)</code> è¿”å›å˜é‡oçš„æ•°æ®ç±»å‹</p>
<h4 id="å†…å­˜ç›¸å…³"><a href="#å†…å­˜ç›¸å…³" class="headerlink" title="å†…å­˜ç›¸å…³"></a>å†…å­˜ç›¸å…³</h4><p><code>id(o)</code> oæ˜¯å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå˜é‡çš„å†…å­˜åœ°å€<br><code>hash(o)</code> oæ˜¯å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå¯hashå˜é‡çš„å“ˆå¸Œå€¼ï¼Œä¸å¯hashçš„å˜é‡è¢«hashä¹‹åä¼šæŠ¥é”™ã€‚</p>
<h4 id="å¸®åŠ©æ–¹æ³•"><a href="#å¸®åŠ©æ–¹æ³•" class="headerlink" title="å¸®åŠ©æ–¹æ³•"></a>å¸®åŠ©æ–¹æ³•</h4><p>åœ¨æ§åˆ¶å°æ‰§è¡Œ<code>help()</code>è¿›å…¥å¸®åŠ©æ¨¡å¼ã€‚å¯ä»¥éšæ„è¾“å…¥å˜é‡æˆ–è€…å˜é‡çš„ç±»å‹ã€‚è¾“å…¥qé€€å‡º<br>æˆ–è€…ç›´æ¥æ‰§è¡Œ<code>help(o)</code>ï¼Œoæ˜¯å‚æ•°ï¼ŒæŸ¥çœ‹å’Œå˜é‡oæœ‰å…³çš„æ“ä½œã€‚ã€‚ã€‚</p>
<h4 id="å’Œè°ƒç”¨ç›¸å…³"><a href="#å’Œè°ƒç”¨ç›¸å…³" class="headerlink" title="å’Œè°ƒç”¨ç›¸å…³"></a>å’Œè°ƒç”¨ç›¸å…³</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="STYLUS"><figure class="iseeu highlight /stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">callable</span><span class="params">(o)</span></span>`ï¼Œoæ˜¯å‚æ•°ï¼Œçœ‹è¿™ä¸ªå˜é‡æ˜¯ä¸æ˜¯å¯è°ƒç”¨ã€‚å¦‚æœoæ˜¯ä¸€ä¸ªå‡½æ•°åï¼Œå°±ä¼šè¿”å›`True</span><br></pre></td></tr></table></figure></div>

<h4 id="å’Œæ•°å­—ç›¸å…³"><a href="#å’Œæ•°å­—ç›¸å…³" class="headerlink" title="å’Œæ•°å­—ç›¸å…³"></a>å’Œæ•°å­—ç›¸å…³</h4><p>æ•°æ®ç±»å‹ç›¸å…³ï¼šboolï¼Œintï¼Œfloatï¼Œcomplex<br>è¿›åˆ¶è½¬æ¢ç›¸å…³ï¼šbinï¼Œoctï¼Œhex<br>æ•°å­¦è¿ç®—ï¼šabsï¼Œdivmodï¼Œminï¼Œmaxï¼Œsumï¼Œroundï¼Œpow</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">abs()<span class="comment">#ç»å¯¹å€¼ å¤æ•°çš„æ¨¡</span></span><br><span class="line">bin()<span class="comment">#åè¿›åˆ¶è½¬äºŒè¿›åˆ¶</span></span><br><span class="line">hex()<span class="comment">#åè¿›åˆ¶è½¬åå…­è¿›åˆ¶</span></span><br><span class="line">oct()<span class="comment">#åè¿›åˆ¶è½¬å…«è¿›åˆ¶</span></span><br><span class="line">bool()<span class="comment">#è½¬å¸ƒå°”ç±»å‹</span></span><br><span class="line">max(list)<span class="comment">#å¯è¿­ä»£å¯¹è±¡å†…éƒ¨é€ä½æ¯”è¾ƒ æœ€å¤§</span></span><br><span class="line">min(list)<span class="comment">#å¯è¿­ä»£å¯¹è±¡å†…éƒ¨é€ä½æ¯”è¾ƒ æœ€å°</span></span><br><span class="line">max(list,key=lamdba dic:dic[<span class="string">'keyname'</span>])<span class="comment">#å…ƒç´ ä¹‹é—´æ¯”è¾ƒ</span></span><br><span class="line">pow(a,b)<span class="comment">#ç›¸å½“äºa**b</span></span><br><span class="line">pow(a,b,c)<span class="comment">#ç›¸å½“äºa**b%c</span></span><br><span class="line">round(num)<span class="comment">#å››èˆäº”å…¥</span></span><br><span class="line">divmod(è¢«é™¤æ•°,é™¤æ•°)<span class="comment">#è¿”å›å…ƒç»„:(å•†,ä½™æ•°)</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å’Œæ•°æ®ç»“æ„ç›¸å…³"><a href="#å’Œæ•°æ®ç»“æ„ç›¸å…³" class="headerlink" title="å’Œæ•°æ®ç»“æ„ç›¸å…³"></a>å’Œæ•°æ®ç»“æ„ç›¸å…³</h4><p>åˆ—è¡¨å’Œå…ƒç»„ç›¸å…³çš„ï¼šlistå’Œtuple<br>å­—ç¬¦ä¸²ç›¸å…³çš„ï¼šstrï¼Œformatï¼Œbytesï¼Œbytearryï¼Œmemoryviewï¼Œordï¼Œchrï¼Œasciiï¼Œrepr<br>åºåˆ—ï¼šreversedï¼Œslice<br>å­—å…¸å’Œé›†åˆï¼šdictï¼Œsetï¼Œfrozenset<br>æ•°æ®é›†åˆï¼šlenï¼Œsortedï¼Œenumerateï¼Œallï¼Œanyï¼Œzipï¼Œfilterï¼Œmap</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">bytes(s,encoding=<span class="string">'utf-8'</span>)<span class="comment">#ç¼–ç </span></span><br><span class="line">s.decode(<span class="string">'utf-8'</span>)<span class="comment">#è§£ç ï¼ˆå·²åºŸå¼ƒ,ç›´æ¥ç”¨str(s,'utf-8')ï¼‰</span></span><br><span class="line"></span><br><span class="line">chr(int)<span class="comment">#æ•°å­—è½¬ascå­—ç¬¦</span></span><br><span class="line">ord(char)<span class="comment">#å­—ç¬¦è½¬ascç </span></span><br><span class="line"></span><br><span class="line">slice(start,stop,step)<span class="comment">#åˆ‡ç‰‡å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line">reversed(list)<span class="comment">#ä¸´æ—¶ç¿»è½¬</span></span><br><span class="line">sorted()<span class="comment">#ä¸´æ—¶æ’åº  æœ¬è´¨æ˜¯æ¯”è¾ƒå¤§å°</span></span><br><span class="line"></span><br><span class="line">zip(list1,list2)<span class="comment">#æ‹‰é“¾ è¿”å›è‹¥å¹²å°å…ƒç»„(list1[0],list2[0])        </span></span><br><span class="line">enumerate()<span class="comment">#å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå¯éå†çš„æ•°æ®å¯¹è±¡(å¦‚åˆ—è¡¨ã€å…ƒç»„æˆ–å­—ç¬¦ä¸²)</span></span><br><span class="line"><span class="comment">#ç»„åˆä¸ºä¸€ä¸ªç´¢å¼•åºåˆ—ï¼ŒåŒæ—¶åˆ—å‡ºæ•°æ®å’Œæ•°æ®ä¸‹æ ‡ï¼Œä¸€èˆ¬ç”¨åœ¨ for å¾ªç¯å½“ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line">all()<span class="comment">#æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½ä¸ºçœŸ ç©ºå®¹å™¨ä¹Ÿä¸ºçœŸ</span></span><br><span class="line">any()<span class="comment">#æ˜¯å¦å­˜åœ¨å…ƒç´ ä¸ºçœŸ</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æ¨¡å—æ“ä½œç›¸å…³"><a href="#æ¨¡å—æ“ä½œç›¸å…³" class="headerlink" title="æ¨¡å—æ“ä½œç›¸å…³"></a>æ¨¡å—æ“ä½œç›¸å…³</h4><p> <code>__import__(str)</code>å¯¼å…¥æ¨¡å—</p>
<h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AUTOHOTKEY"><figure class="iseeu highlight /autohotkey"><table><tr><td class="code"><pre><span class="line">dir()`å±æ€§å±•å¼€</span><br><span class="line">`eval()`å°†å­—ç¬¦ä¸²å½“åšpythonä»£ç æ‰§è¡Œ é­”é¬¼æ–¹æ³• ä¸æ¨èä½¿ç”¨</span><br><span class="line">`vars(obj)`æŸ¥çœ‹å¯¹è±¡ä¸‹æ‰€æœ‰æ–¹æ³•è¿”å›ä¸ºå­—å…¸ è‹¥æ— å‚æ•°ç›¸å½“äº`locals()</span><br></pre></td></tr></table></figure></div>

<p>â€¦â€¦</p>
<p>åœ¨å­¦å®Œé¢å‘å¯¹è±¡ä¹‹åè¡¥å……ä¸é¢å‘å¯¹è±¡æœ‰å…³çš„å†…ç½®æ–¹æ³•</p>
<h3 id="ç±»å‹æ³¨è§£"><a href="#ç±»å‹æ³¨è§£" class="headerlink" title="ç±»å‹æ³¨è§£"></a>ç±»å‹æ³¨è§£</h3><p>python3.6ç‰ˆæœ¬ä»¥ä¸Šæ‰å¯ä»¥ä½¿ç”¨<br>æ³¨è§£å‚æ•°çš„ç±»å‹ <code>-&gt;</code>åé¢æ˜¯è¿”å›å€¼çš„ç±»å‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(step:int)</span> -&gt; int:</span></span><br></pre></td></tr></table></figure></div>

<p>ç»“åˆé»˜è®¤å‚æ•°ä¸€èµ·ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(step:int=<span class="number">1</span>)</span> -&gt; int:</span></span><br></pre></td></tr></table></figure></div>

<p>ç±»å‹æ³¨è§£ä¸åšé™æ€æ£€æŸ¥ï¼Œåªåœ¨IDEåªæä¾›æç¤º</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åä¸ƒ)</title>
    <url>/blog/Python/Python_id_35.html</url>
    <content><![CDATA[<h2 id="æ—¥å¿—å¤„ç†"><a href="#æ—¥å¿—å¤„ç†" class="headerlink" title="æ—¥å¿—å¤„ç†"></a>æ—¥å¿—å¤„ç†</h2><p>æ—¥å¿—å¯ä»¥ä½¿ç”¨å†…ç½®çš„<a href="https://docs.python.org/zh-cn/3/library/logging.html" target="_blank" rel="noopener"><code>logging</code></a>æ¨¡å—æ¥ç”Ÿæˆ<br>æœåŠ¡ç«¯çš„æ—¥å¿—å¯ä»¥ä½¿ç”¨å†…ç½®çš„<a href="https://docs.python.org/zh-cn/3/library/sqlite3.html" target="_blank" rel="noopener"><code>sqlite3</code></a>æ¨¡å—æ¥æŒä¹…åŒ–ã€‚</p>
<h3 id="loggingæ¨¡å—"><a href="#loggingæ¨¡å—" class="headerlink" title="loggingæ¨¡å—"></a>loggingæ¨¡å—</h3><a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment">##çº§åˆ«ä¾æ¬¡æé«˜</span></span><br><span class="line">logging.debug(<span class="string">'æ’é”™ä¿¡æ¯'</span>)</span><br><span class="line">logging.info(<span class="string">'æ­£å¸¸ä¿¡æ¯'</span>)</span><br><span class="line">logging.warning(<span class="string">'è­¦å‘Šä¿¡æ¯'</span>)</span><br><span class="line">logging.error(<span class="string">'é”™è¯¯ä¿¡æ¯'</span>)</span><br><span class="line">logging.critical(<span class="string">'ä¸¥é‡é”™è¯¯ä¿¡æ¯'</span>)</span><br></pre></td></tr></table></figure></div>

<p>é»˜è®¤æƒ…å†µä¸‹Pythonçš„loggingæ¨¡å—å°†æ—¥å¿—æ‰“å°åˆ°äº†æ ‡å‡†è¾“å‡ºï¼ˆ<code>sys.stdout</code>ï¼‰ä¸­ï¼Œ<br>ä¸”åªæ˜¾ç¤ºäº†å¤§äºç­‰äºWARNINGçº§åˆ«çš„æ—¥å¿—</p>
<p>é»˜è®¤çš„æ—¥å¿—æ ¼å¼ä¸º <code>æ—¥å¿—çº§åˆ«ï¼šLoggeråç§°ï¼šç”¨æˆ·è¾“å‡ºæ¶ˆæ¯</code>ã€‚</p>
<p>å®ƒæœ‰ä¸¤ç§é…ç½®æ–¹æ³•</p>
<ul>
<li>é…ç½®loggingå…¨å±€å‚æ•°</li>
<li>æ˜¾å¼åœ°åˆ›å»ºloggerå®ä¾‹å¹¶é…ç½®</li>
</ul>
<p>ä¹Ÿå¯ä»¥åŒæ—¶åœ¨ä¸¤å¤„é…ç½®ï¼Œloggerå®ä¾‹ä¸Šçš„é…ç½®ä¼˜å…ˆçº§æ›´é«˜ã€‚</p>
<h4 id="é…ç½®loggingå…¨å±€å‚æ•°"><a href="#é…ç½®loggingå…¨å±€å‚æ•°" class="headerlink" title="é…ç½®loggingå…¨å±€å‚æ•°"></a>é…ç½®loggingå…¨å±€å‚æ•°</h4><p><code>basicConfig()</code>å‡½æ•°æ›´æ”¹loggingæ¨¡å—é»˜è®¤è¡Œä¸º</p>
<ul>
<li>ç¼ºç‚¹ï¼šä½ç‰ˆæœ¬pythoné‡Œä¸­æ–‡ä¼šä¹±ç ,ä¸èƒ½åŒæ—¶æ§åˆ¶å°æ‰“å°å’Œå†™å…¥æ–‡ä»¶</li>
<li>ä¼˜ç‚¹ï¼šçµæ´»é…ç½®æ—¥å¿—çº§åˆ«ï¼Œæ—¥å¿—æ ¼å¼ï¼Œå’Œè¾“å‡ºä½ç½®</li>
</ul>
<p>ç®€å•çš„é…ç½®ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging  </span><br><span class="line">logging.basicConfig(level=logging.DEBUG,</span><br><span class="line">        format=<span class="string">'%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s'</span>,  </span><br><span class="line">        datefmt=<span class="string">'%a, %d %b %Y %H:%M:%S'</span>,  </span><br><span class="line">        filename=<span class="string">'/tmp/test.log'</span>,  </span><br><span class="line">        filemode=<span class="string">'w'</span>)  </span><br><span class="line">  </span><br><span class="line">logging.debug(<span class="string">'debug message'</span>)  </span><br><span class="line">logging.info(<span class="string">'info message'</span>)  </span><br><span class="line">logging.warning(<span class="string">'warning message'</span>)  </span><br><span class="line">logging.error(<span class="string">'error message'</span>)  </span><br><span class="line">logging.critical(<span class="string">'critical message'</span>)</span><br></pre></td></tr></table></figure></div>

<h5 id="æ›´å¤šçš„é…ç½®é€‰é¡¹"><a href="#æ›´å¤šçš„é…ç½®é€‰é¡¹" class="headerlink" title="æ›´å¤šçš„é…ç½®é€‰é¡¹"></a>æ›´å¤šçš„é…ç½®é€‰é¡¹</h5><ul>
<li><code>filename</code>ï¼šç”¨æŒ‡å®šçš„æ–‡ä»¶ååˆ›å»ºFiledHandlerï¼Œè¿™æ ·æ—¥å¿—ä¼šè¢«å­˜å‚¨åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­ã€‚</li>
<li><code>filemode</code>ï¼šæ–‡ä»¶æ‰“å¼€æ–¹å¼ï¼Œåœ¨æŒ‡å®šäº†filenameæ—¶ä½¿ç”¨è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºâ€œaâ€è¿˜å¯æŒ‡å®šä¸ºâ€œwâ€ã€‚</li>
<li><code>format</code>ï¼šæŒ‡å®šhandlerä½¿ç”¨çš„æ—¥å¿—æ˜¾ç¤ºæ ¼å¼ã€‚</li>
<li><code>datefmt</code>ï¼šæŒ‡å®šæ—¥æœŸæ—¶é—´æ ¼å¼ã€‚</li>
<li><code>level</code>ï¼šè®¾ç½®rootloggerçš„æ—¥å¿—çº§åˆ«</li>
<li><code>stream</code>ï¼šåˆ›å»ºæŒ‡å®šçš„StreamHandlerã€‚é»˜è®¤sys.stderrå¯é€‰sys.stdoutæˆ–è€…æ–‡ä»¶å¥æŸ„</li>
</ul>
<p>è‹¥æŒ‡å®šäº†<code>filename</code>ï¼Œåˆ™<code>stream</code>å‚æ•°ä¼šè¢«å¿½ç•¥ã€‚</p>
<h6 id="formatå‚æ•°ä¸­å¯èƒ½ç”¨åˆ°çš„æ ¼å¼åŒ–ä¸²"><a href="#formatå‚æ•°ä¸­å¯èƒ½ç”¨åˆ°çš„æ ¼å¼åŒ–ä¸²" class="headerlink" title="formatå‚æ•°ä¸­å¯èƒ½ç”¨åˆ°çš„æ ¼å¼åŒ–ä¸²"></a>formatå‚æ•°ä¸­å¯èƒ½ç”¨åˆ°çš„æ ¼å¼åŒ–ä¸²</h6><table>
<thead>
<tr>
<th>æ ¼å¼åŒ–ä¸²</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>%(name)s</code></td>
<td>Loggerçš„åå­—</td>
</tr>
<tr>
<td><code>%(levelno)s</code></td>
<td>æ•°å­—å½¢å¼çš„æ—¥å¿—çº§åˆ«</td>
</tr>
<tr>
<td><code>%(levelname)s</code></td>
<td>æ–‡æœ¬å½¢å¼çš„æ—¥å¿—çº§åˆ«</td>
</tr>
<tr>
<td><code>%(pathname)s</code></td>
<td>è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—çš„å®Œæ•´è·¯å¾„å</td>
</tr>
<tr>
<td><code>%(filename)s</code></td>
<td>è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—çš„æ–‡ä»¶å</td>
</tr>
<tr>
<td><code>%(module)s</code></td>
<td>è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—å</td>
</tr>
<tr>
<td><code>%(funcName)s</code></td>
<td>è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„å‡½æ•°å</td>
</tr>
<tr>
<td><code>%(lineno)d</code></td>
<td>è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„è¯­å¥æ‰€åœ¨çš„ä»£ç è¡Œ</td>
</tr>
<tr>
<td><code>%(created)f</code></td>
<td>å½“å‰æ—¶é—´ï¼Œç”¨UNIXæ ‡å‡†çš„è¡¨ç¤ºæ—¶é—´çš„æµ®ç‚¹æ•°è¡¨ç¤º</td>
</tr>
<tr>
<td><code>%(relativeCreated)d</code></td>
<td>è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ—¶çš„ï¼Œè‡ªLoggeråˆ›å»ºä»¥æ¥çš„æ¯«ç§’æ•°</td>
</tr>
<tr>
<td><code>%(asctime)s</code></td>
<td>å­—ç¬¦ä¸²å½¢å¼çš„å½“å‰æ—¶é—´ã€‚é»˜è®¤æ ¼å¼æ˜¯â€œ2003-07-08 16:49:45,896â€</td>
</tr>
<tr>
<td><code>%(thread)d</code></td>
<td>çº¿ç¨‹ID</td>
</tr>
<tr>
<td><code>%(threadName)s</code></td>
<td>çº¿ç¨‹å</td>
</tr>
<tr>
<td><code>%(process)d</code></td>
<td>è¿›ç¨‹ID</td>
</tr>
<tr>
<td><code>%(message)s</code></td>
<td>ç”¨æˆ·è¾“å‡ºçš„æ¶ˆæ¯</td>
</tr>
</tbody></table>
<h4 id="é…ç½®loggerå®ä¾‹å‚æ•°"><a href="#é…ç½®loggerå®ä¾‹å‚æ•°" class="headerlink" title="é…ç½®loggerå®ä¾‹å‚æ•°"></a>é…ç½®loggerå®ä¾‹å‚æ•°</h4><p><code>logging.getLogger()</code>å®ä¾‹åŒ–ä¸€ä¸ªè®°å½•å™¨å¯¹è±¡</p>
<p>å³ä½¿ä¸å®ä¾‹åŒ–ï¼Œä¹Ÿä¼šé»˜è®¤åˆ›å»º<code>root logger</code>ï¼Œç¼ºçœå€¼è¯»å–<code>basicConfig()</code>çš„é…ç½®<br>è®°å½•å™¨å¯¹è±¡å¯ä»¥è®¾ç½®ï¼š</p>
<ul>
<li><code>logger.setLevel(logging.ERROR)</code> è®¾ç½®æ—¥å¿—çº§åˆ«ä¸ºERROR</li>
<li><code>logger.addHandler(handler_name)</code> ä¸ºLoggerå®ä¾‹å¢åŠ ä¸€ä¸ªå¤„ç†å™¨</li>
<li><code>logger.removeHandler(handler_name)</code> ä¸ºLoggerå®ä¾‹åˆ é™¤ä¸€ä¸ªå¤„ç†å™¨</li>
</ul>
<p>åˆ›å»ºå’Œæ·»åŠ å¤„ç†å™¨Handler</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logger = logging.getLogger()</span><br><span class="line"><span class="comment"># ç”¨äºå†™å…¥æ—¥å¿—æ–‡ä»¶çš„handler</span></span><br><span class="line">fh = logging.FileHandler(<span class="string">'test.log'</span>,encoding=<span class="string">'utf-8'</span>) </span><br><span class="line"><span class="comment"># ç”¨äºè¾“å‡ºåˆ°æ§åˆ¶å°çš„handler</span></span><br><span class="line">ch = logging.StreamHandler()</span><br><span class="line"><span class="comment">#loggerå¯¹è±¡å¯ä»¥æ·»åŠ å¤šä¸ªhandler</span></span><br><span class="line">logger.addHandler(fh)</span><br><span class="line">logger.addHandler(ch)</span><br></pre></td></tr></table></figure></div>

<p>å¤„ç†å™¨å¯¹è±¡ä¹Ÿå¯ä»¥è®¾ç½®ï¼š</p>
<ul>
<li><code>ch.setLevel(logging.WARN)</code> # å•å¯¹è¿™ä¸ªæµè®¾ç½®æ—¥å¿—çº§åˆ«</li>
<li><code>ch.setFormatter(formatter_name)</code> # è®¾ç½®ä¸€ä¸ªæ ¼å¼åŒ–å™¨formatter</li>
<li><code>ch.addFilter(filter_name)</code> # å¢åŠ ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå¯ä»¥å¢åŠ å¤šä¸ª</li>
<li><code>ch.removeFilter(filter_name)</code> # åˆ é™¤ä¸€ä¸ªè¿‡æ»¤å™¨</li>
</ul>
<p>åˆ›å»ºæ ¼å¼åŒ–å™¨ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">fh = logging.FileHandler(<span class="string">'test.log'</span>,encoding=<span class="string">'utf-8'</span>) </span><br><span class="line">formatter = logging.Formatter(<span class="string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>)</span><br><span class="line">fh.setFormatter(formatter) </span><br><span class="line">logger.addHandler(fh)</span><br></pre></td></tr></table></figure></div>

<h3 id="sqlite3æ¨¡å—"><a href="#sqlite3æ¨¡å—" class="headerlink" title="sqlite3æ¨¡å—"></a>sqlite3æ¨¡å—</h3><p>SQLiteæ˜¯ä¸€ç§åµŒå…¥å¼æ•°æ®åº“ï¼Œå®ƒçš„æ•°æ®åº“å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚Pythonå†…ç½®äº†SQLite3ã€‚</p>
<h4 id="åŸºæœ¬ç”¨æ³•ç¤ºä¾‹"><a href="#åŸºæœ¬ç”¨æ³•ç¤ºä¾‹" class="headerlink" title="åŸºæœ¬ç”¨æ³•ç¤ºä¾‹"></a>åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sqlite3</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¿æ¥ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•åˆ›å»º:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>conn = sqlite3.connect(<span class="string">'test.db'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ¸¸æ ‡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cursor = conn.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰§è¡ŒSQLè¯­å¥ï¼Œåˆ›å»ºuserè¡¨:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cursor.execute(<span class="string">r"""CREATE TABLE "user" (</span></span><br><span class="line"><span class="string">						"id" integer NOT NULL PRIMARY KEY AUTOINCREMENT,</span></span><br><span class="line"><span class="string">                    	"name" varchar(20)</span></span><br><span class="line"><span class="string">                    );"""</span>)</span><br><span class="line">&lt;sqlite3.Cursor object at <span class="number">0x10f8aa260</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»§ç»­æ‰§è¡Œä¸€æ¡SQLè¯­å¥ï¼Œæ’å…¥ä¸€æ¡è®°å½•:</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cursor.execute(<span class="string">r"""INSERT INTO "main"."user"(name) VALUES ('Michael');"""</span>)</span><br><span class="line">&lt;sqlite3.Cursor object at <span class="number">0x10f8aa260</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­æ¸¸æ ‡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cursor.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤äº‹åŠ¡</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>conn.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>conn.close()</span><br></pre></td></tr></table></figure></div>

<h4 id="æ¸¸æ ‡å¯¹è±¡å¸¸ç”¨å±æ€§å’Œæ–¹æ³•"><a href="#æ¸¸æ ‡å¯¹è±¡å¸¸ç”¨å±æ€§å’Œæ–¹æ³•" class="headerlink" title="æ¸¸æ ‡å¯¹è±¡å¸¸ç”¨å±æ€§å’Œæ–¹æ³•"></a>æ¸¸æ ‡å¯¹è±¡å¸¸ç”¨å±æ€§å’Œæ–¹æ³•</h4><ul>
<li><code>cursor.execute()</code>æ‰§è¡ŒSQLè¯­å¥å¹¶è¿”å›<code>cursor</code>å¯¹è±¡æœ¬èº«</li>
<li><code>cursor.rowcount</code>åˆšåˆšæ‰§è¡Œè¯­å¥å½±å“çš„è¡Œæ•°</li>
<li><code>cursor.fetchone()</code>å¼¹å‡ºåˆšåˆšæ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„ç»“æœé›†çš„ç¬¬ä¸€æ¡ï¼Œå…ƒç»„</li>
<li><code>cursor.fetchall()</code>åˆšåˆšæ‰§è¡ŒæŸ¥è¯¢è¯­å¥çš„å…¨éƒ¨ï¼ˆå‰©ä½™ï¼‰ç»“æœé›†ï¼Œåˆ—è¡¨åµŒå¥—å…ƒç»„</li>
</ul>
<p>ç›´æ¥éå†<code>cursor</code>å¯¹è±¡æœ¬èº«ä¹Ÿå¯ä»¥æ‹¿åˆ°ï¼ˆå‰©ä½™ï¼‰ç»“æœé›†</p>
<p>åŸºæœ¬çš„sqlè¯­å¥å’Œæ›´å¤šçš„æ•°æ®åº“è¿æ¥æ¨¡å—çš„ç”¨æ³•åœ¨ä¹‹åç« èŠ‚æœ‰ä»‹ç»ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åå…­)</title>
    <url>/blog/Python/Python_id_34.html</url>
    <content><![CDATA[<h2 id="æ–‡ä»¶å¤„ç†"><a href="#æ–‡ä»¶å¤„ç†" class="headerlink" title="æ–‡ä»¶å¤„ç†"></a>æ–‡ä»¶å¤„ç†</h2><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ:"></a>åŸºæœ¬æ“ä½œ:</h3><ol>
<li>æ‰“å¼€æ–‡ä»¶,å¾—åˆ°æ–‡ä»¶å¥æŸ„å¹¶èµ‹å€¼ç»™å˜é‡</li>
<li>é€šè¿‡å¥æŸ„å¯¹æ–‡ä»¶è¿›è¡Œæ“ä½œ</li>
<li>å…³é—­æ–‡ä»¶</li>
</ol>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f=open(<span class="string">"æ–‡ä»¶å"</span>,encoding=<span class="string">'utf-8'</span>)<span class="comment">#é»˜è®¤ç³»ç»Ÿç¼–ç winä¸‹GBK</span></span><br><span class="line">data=f.read()</span><br><span class="line">print(data)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></div>

<h3 id="å†…ç½®å‡½æ•°open"><a href="#å†…ç½®å‡½æ•°open" class="headerlink" title="å†…ç½®å‡½æ•°open()"></a>å†…ç½®å‡½æ•°<code>open()</code></h3><h4 id="å¯é€‰æ¨¡å¼"><a href="#å¯é€‰æ¨¡å¼" class="headerlink" title="å¯é€‰æ¨¡å¼:"></a>å¯é€‰æ¨¡å¼:</h4><ul>
<li>åªè¯»â€râ€(é»˜è®¤)</li>
<li>åªå†™â€wâ€ å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™æ¸…ç©º ä¸å­˜åœ¨åˆ™æ–°å»º</li>
<li>å¯è¯»å¯å†™â€r+â€</li>
<li>è¿½åŠ å†™å…¥â€aâ€/â€œa+â€ å¦‚<code>f=open(&quot;x.txt&quot;,&quot;a&quot;)</code></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f.read() <span class="comment">#è¿ç»­è¯»å­—ç¬¦ é»˜è®¤å…¨éƒ¨è¯»å®Œ</span></span><br><span class="line">f.readable() <span class="comment">#æ˜¯å¦å¯è¯»</span></span><br><span class="line">f.readline() <span class="comment">#è¿ç»­è¯»è¡Œ</span></span><br><span class="line">f.readlines()<span class="comment">#ç”¨åˆ—è¡¨è¿”å›æ¯ä¸€è¡Œï¼Œæˆå‘˜çš„æ¢è¡Œç¬¦ä¸ä¼šè¢«å¿½ç•¥</span></span><br><span class="line"></span><br><span class="line">f.write(str) <span class="comment">#è¿ç»­å†™ "a"æ¨¡å¼åœ¨æœ«å°¾è¿½åŠ </span></span><br><span class="line">f.writeable() <span class="comment">#æ˜¯å¦å¯å†™</span></span><br><span class="line">f.writelines(list) <span class="comment">#å°†åˆ—è¡¨è¿ç»­å†™è¡Œï¼Œæˆå‘˜çš„æ¢è¡Œç¬¦éœ€è¦å¸¦ä¸Šï¼Œå¦‚["aaa\n","bbb\n","ccc\n"]</span></span><br></pre></td></tr></table></figure></div>

<h4 id="ä¸Šä¸‹æ–‡ç®¡ç†"><a href="#ä¸Šä¸‹æ–‡ç®¡ç†" class="headerlink" title="ä¸Šä¸‹æ–‡ç®¡ç†"></a>ä¸Šä¸‹æ–‡ç®¡ç†</h4><p>fileå¯¹è±¡å®ç°äº†é­”æœ¯æ–¹æ³•<code>__enter__()</code> å’Œ<code>__exit__()</code><br>æ‰€ä»¥å¯ä»¥ä½¿ç”¨ <code>with open() as f</code>çš„å†™æ³•</p>
<h4 id="bæ¨¡å¼"><a href="#bæ¨¡å¼" class="headerlink" title="bæ¨¡å¼:"></a>bæ¨¡å¼:</h4><p>ä¸èƒ½è®¾ç½®encoding â€œrbâ€ è¯»äºŒè¿›åˆ¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">data=f.read()</span><br><span class="line">print(data.decode(<span class="string">"utf-8"</span>))</span><br></pre></td></tr></table></figure></div>

<p> â€œwbâ€ å†™äºŒè¿›åˆ¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f.write(bytes(<span class="string">"å†…å®¹"</span>,encoding=<span class="string">"utf-8"</span>))</span><br></pre></td></tr></table></figure></div>

<p> â€œabâ€è¿½åŠ </p>
<h4 id="å…¶ä»–å‚æ•°"><a href="#å…¶ä»–å‚æ•°" class="headerlink" title="å…¶ä»–å‚æ•°"></a>å…¶ä»–å‚æ•°</h4><h5 id="encoding"><a href="#encoding" class="headerlink" title="encoding"></a>encoding</h5><p>è§„å®šå­—ç¬¦é›†</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">file = open(filename, <span class="string">"w"</span>, encoding=<span class="string">'Latin-1'</span>)</span><br></pre></td></tr></table></figure></div>

<h5 id="newline"><a href="#newline" class="headerlink" title="newline"></a>newline</h5><p>è§„å®šæ¢è¡Œæ•ˆæœï¼Œé»˜è®¤é€‚åº”æ“ä½œç³»ç»Ÿ<br>å¯¹äºç”¨<code>\r\n</code>æ¢è¡Œçš„ç³»ç»Ÿï¼Œé»˜è®¤çš„<code>newline=&quot;\r&quot;</code>ï¼Œæ•…è€Œåªéœ€è¦å†™å…¥<code>&quot;\n&quot;</code>å°±ç›¸å½“äºå†™å…¥<code>&quot;\r\n&quot;</code><br>å¦ä¸€æ–¹é¢ï¼Œè®¾ç½®<code>newline=&quot;&quot;</code>æ‰èƒ½ä½¿ç”¨<code>&quot;\r\n&quot;</code>æ¢è¡Œï¼Œä¸‹é¢æ˜¯å®˜æ–¹å‚è€ƒæ‰‹å†Œé‡Œçš„è§£é‡Šï¼š</p>
<blockquote>
<p>In Python 2.X, it was required to open the csvfile with â€˜bâ€™ because the csv module does its own line termination handling.</p>
<p>In Python 3.X, the csv module still does its own line termination handling, but still needs to know an encoding for Unicode strings. The correct way to open a csv file for writing is:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">outputfile=open(<span class="string">"out.csv"</span>,<span class="string">'w'</span>,encoding=<span class="string">'utf8'</span>,newline=<span class="string">''</span>)</span><br></pre></td></tr></table></figure></div>

<p>encoding can be whatever you require, but newline=â€™â€™ suppresses text mode newline handling. On Windows, failing to do this will write \r\r\n file line endings instead of the correct \r\n. This is mentioned in the 3.X csv.reader documentation only, but csv.writer requires it as well.</p>
</blockquote>
<p>å¯¹äºä¸‹æ–‡å³å°†ä»‹ç»çš„csvæ¨¡å—ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p>
<h4 id="å…¶ä»–æ–¹æ³•"><a href="#å…¶ä»–æ–¹æ³•" class="headerlink" title="å…¶ä»–æ–¹æ³•"></a>å…¶ä»–æ–¹æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">f.flush() <span class="comment">#åˆ·æ–°</span></span><br><span class="line">f.tell()  <span class="comment">#å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®</span></span><br><span class="line">f.seek(int,inté»˜è®¤<span class="number">0</span>)  <span class="comment">#ç›¸å¯¹ä½ç½®è¯»å­—èŠ‚</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    è´Ÿæ•°å€’ç€è¯»,åªèƒ½bæ¨¡å¼ä¸‹ä½¿ç”¨</span></span><br><span class="line"><span class="string">    ç¬¬äºŒä¸ªå‚æ•°:</span></span><br><span class="line"><span class="string">        0ä»£è¡¨ä»æ–‡ä»¶å¼€å¤´å¼€å§‹ç®—èµ·</span></span><br><span class="line"><span class="string">        1ä»£è¡¨ä»å½“å‰ä½ç½®å¼€å§‹ç®—èµ·</span></span><br><span class="line"><span class="string">        2ä»£è¡¨ä»æ–‡ä»¶æœ«å°¾ç®—èµ·ã€‚</span></span><br><span class="line"><span class="string">    utfçš„3å­—èŠ‚ä¸€ä¸ªæ±‰å­— seek(3)ç›¸å½“äºä»å¤´å¼€å§‹read(1)</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">f.truncate(int)<span class="comment">#æˆªå–å­—èŠ‚</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¾ªç¯æ–‡ä»¶çš„æ¨èæ–¹å¼"><a href="#å¾ªç¯æ–‡ä»¶çš„æ¨èæ–¹å¼" class="headerlink" title="å¾ªç¯æ–‡ä»¶çš„æ¨èæ–¹å¼"></a>å¾ªç¯æ–‡ä»¶çš„æ¨èæ–¹å¼</h4><p>å¦‚:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f:</span><br><span class="line">    offs=<span class="number">-10</span></span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        f.seek(offs,<span class="number">2</span>)</span><br><span class="line">        data=f.readlines()</span><br><span class="line">        <span class="keyword">if</span> len(data)&gt;<span class="number">1</span>:</span><br><span class="line">            print(<span class="string">"æœ€åä¸€è¡Œæ˜¯"</span>+data[<span class="number">-1</span>].decode(<span class="string">"utf-8"</span>))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        offs*=<span class="number">2</span></span><br></pre></td></tr></table></figure></div>

<p>ä¸æ¨è:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> f.readlines(): ...</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h3><p>ç°åœ¨æœ‰ä¸€ä¸ª<code>recensement.txt</code>æ–‡ä»¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">1 	Paris 	2229621</span><br><span class="line">2 	Marseille 	855393</span><br><span class="line">3 	Lyon 	500715</span><br><span class="line">4 	Toulouse 	458298</span><br><span class="line">5 	Nice 	342295</span><br><span class="line">6 	Nantes 	292718</span><br><span class="line">.......</span><br><span class="line">70 	Drancy 	68241</span><br><span class="line">71 	Colmar 	67956</span><br><span class="line">72 	Ajaccio 	67507</span><br><span class="line">73 	Bourges 	67189</span><br><span class="line">74 	Issy-les-Moulineaux 	65662</span><br><span class="line">75 	Levallois-Perret 	65264</span><br></pre></td></tr></table></figure></div>

<p>å°†å®ƒè½¬åŒ–ä¸ºä¸€ä¸ªå­—å…¸å†æ±‚å‡ºæ‰€æœ‰æ•°çš„å’Œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> json    <span class="comment">#å¼•å…¥jsonæ¨¡å—åªæ˜¯ä¸ºäº†å¥½çœ‹,åé¢ä¼šè®²</span></span><br><span class="line"><span class="keyword">import</span> functools    <span class="comment">#é«˜é˜¶å‡½æ•°functools.reduceä»¥åä¼šè®²</span></span><br><span class="line"><span class="keyword">with</span> open (<span class="string">'recensement.txt'</span>,<span class="string">'r'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        k=line.strip().split(<span class="string">"\t"</span>)[<span class="number">1</span>]</span><br><span class="line">        val=line.strip().split(<span class="string">"\t"</span>)[<span class="number">-1</span>]</span><br><span class="line">        dic[k]=val</span><br><span class="line">    print(json.dumps(dic,sort_keys=<span class="literal">True</span>,indent=<span class="number">2</span>,separators=(<span class="string">','</span>,<span class="string">':'</span>),ensure_ascii=<span class="literal">False</span>))</span><br><span class="line">    co=functools.reduce(<span class="keyword">lambda</span> r,x:int(r)+int(x),list(dic.values()))</span><br><span class="line">    print(<span class="string">"æ€»å’Œæ˜¯%s"</span>%co)</span><br></pre></td></tr></table></figure></div>

<p>æ‰§è¡Œç»“æœ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"Aix-en-Provence "</span>:<span class="string">"141545"</span>,</span><br><span class="line">  <span class="string">"Ajaccio "</span>:<span class="string">"67507"</span>,</span><br><span class="line">  <span class="string">"Amiens "</span>:<span class="string">"132699"</span>,</span><br><span class="line">  <span class="string">"Angers "</span>:<span class="string">"150125"</span>,</span><br><span class="line">  <span class="string">"Antibes "</span>:<span class="string">"75456"</span>,</span><br><span class="line">  <span class="string">"Argenteuil "</span>:<span class="string">"106817"</span>,</span><br><span class="line"><span class="comment">#......</span></span><br><span class="line">  <span class="string">"Toulouse "</span>:<span class="string">"458298"</span>,</span><br><span class="line">  <span class="string">"Tourcoing "</span>:<span class="string">"93974"</span>,</span><br><span class="line">  <span class="string">"Tours "</span>:<span class="string">"134803"</span>,</span><br><span class="line">  <span class="string">"Versailles "</span>:<span class="string">"85272"</span>,</span><br><span class="line">  <span class="string">"Villeurbanne "</span>:<span class="string">"147192"</span>,</span><br><span class="line">  <span class="string">"Vitry-sur-Seine "</span>:<span class="string">"90075"</span></span><br><span class="line">&#125;</span><br><span class="line">æ€»å’Œæ˜¯12470089</span><br></pre></td></tr></table></figure></div>

<h3 id="csvæ¨¡å—"><a href="#csvæ¨¡å—" class="headerlink" title="csvæ¨¡å—"></a>csvæ¨¡å—</h3><p>å†…ç½®æ¨¡å— è¯»å†™csvè¡¨æ ¼<br>è¯»å–ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line">filename = <span class="string">'åå•.csv'</span></span><br><span class="line"><span class="keyword">with</span> open(filename) <span class="keyword">as</span> f:</span><br><span class="line">    reader = csv.reader(f)</span><br><span class="line">    print(list(reader))</span><br></pre></td></tr></table></figure></div>

<p>å†™å…¥ä¾‹å­ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> csv</span><br><span class="line">filename = <span class="string">'å•æ¨åå•.csv'</span></span><br><span class="line">csvFile = open(filename, <span class="string">"w"</span>, encoding=<span class="string">'utf-8'</span>, newline=<span class="string">''</span>)</span><br><span class="line">writer = csv.writer(csvFile)</span><br><span class="line"></span><br><span class="line">fileHeader = (<span class="string">"å§“å"</span>, <span class="string">"å¹´é¾„"</span>)</span><br><span class="line">writer.writerow(fileHeader)</span><br><span class="line"></span><br><span class="line">data = (<span class="string">"å¤è‰²ç¥­"</span>,<span class="number">17</span>)</span><br><span class="line">writer.writerow(data)</span><br><span class="line"></span><br><span class="line">csvFile.close()</span><br></pre></td></tr></table></figure></div>

<p>æ­£å¦‚å‰æ–‡ä¸­çš„æè¿°ï¼Œå¦‚æœä¸è®¾ç½®<code>newline=&#39;&#39;</code>ï¼Œå°†ä¼šå¯¼è‡´csvå†™å…¥ç©ºè¡Œã€‚</p>
<h3 id="configparseræ¨¡å—"><a href="#configparseræ¨¡å—" class="headerlink" title="configparseræ¨¡å—"></a>configparseræ¨¡å—</h3><p>å†…ç½®æ¨¡å— é€‚ç”¨äºæ“ä½œé…ç½®æ–‡ä»¶<br>å¸¸è§æ–‡æ¡£æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[DEFAULT]</span></span><br><span class="line"><span class="attr">ServerAliveInterval</span> = <span class="number">45</span></span><br><span class="line"><span class="attr">Compression</span> = <span class="literal">yes</span></span><br><span class="line"><span class="attr">CompressionLevel</span> = <span class="number">9</span></span><br><span class="line"><span class="attr">ForwardX11</span> = <span class="literal">yes</span></span><br><span class="line">  </span><br><span class="line"><span class="section">[bitbucket.org]</span></span><br><span class="line"><span class="attr">User</span> = hg</span><br><span class="line">  </span><br><span class="line"><span class="section">[topsecret.server.com]</span></span><br><span class="line"><span class="attr">Port</span> = <span class="number">50022</span></span><br><span class="line"><span class="attr">ForwardX11</span> = <span class="literal">no</span></span><br></pre></td></tr></table></figure></div>

<h4 id="ç”Ÿæˆ"><a href="#ç”Ÿæˆ" class="headerlink" title="ç”Ÿæˆ"></a>ç”Ÿæˆ</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config[<span class="string">"DEFAULT"</span>] = &#123;<span class="string">'ServerAliveInterval'</span>: <span class="string">'45'</span>,</span><br><span class="line">                      <span class="string">'Compression'</span>: <span class="string">'yes'</span>,</span><br><span class="line">                     <span class="string">'CompressionLevel'</span>: <span class="string">'9'</span>,</span><br><span class="line">                     <span class="string">'ForwardX11'</span>:<span class="string">'yes'</span></span><br><span class="line">                     &#125;</span><br><span class="line">config[<span class="string">'bitbucket.org'</span>] = &#123;<span class="string">'User'</span>:<span class="string">'hg'</span>&#125;</span><br><span class="line">config[<span class="string">'topsecret.server.com'</span>] = &#123;<span class="string">'Host Port'</span>:<span class="string">'50022'</span>,<span class="string">'ForwardX11'</span>:<span class="string">'no'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'example.ini'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> configfile:</span><br><span class="line">   config.write(configfile)</span><br></pre></td></tr></table></figure></div>

<h4 id="è¯»å–"><a href="#è¯»å–" class="headerlink" title="è¯»å–"></a>è¯»å–</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'example.ini'</span>)</span><br><span class="line"></span><br><span class="line">print(config.sections())        <span class="comment"># ['bitbucket.org', 'topsecret.server.com']</span></span><br><span class="line">print(<span class="string">'bytebong.com'</span> <span class="keyword">in</span> config) <span class="comment"># False</span></span><br><span class="line">print(<span class="string">'bitbucket.org'</span> <span class="keyword">in</span> config) <span class="comment"># True</span></span><br><span class="line">print(config[<span class="string">'bitbucket.org'</span>][<span class="string">"user"</span>])  <span class="comment"># hg</span></span><br><span class="line">print(config[<span class="string">'DEFAULT'</span>][<span class="string">'Compression'</span>]) <span class="comment"># yes</span></span><br><span class="line">print(config[<span class="string">'topsecret.server.com'</span>][<span class="string">'ForwardX11'</span>])  <span class="comment">#no</span></span><br><span class="line">print(config[<span class="string">'bitbucket.org'</span>])          <span class="comment">#&lt;Section: bitbucket.org&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> config[<span class="string">'bitbucket.org'</span>]:     <span class="comment"># æ³¨æ„,æœ‰defaultä¼šé»˜è®¤defaultçš„é”®</span></span><br><span class="line">    print(key)</span><br><span class="line"></span><br><span class="line">config.options(<span class="string">'bitbucket.org'</span>)  <span class="comment"># åŒforå¾ªç¯,æ‰¾åˆ°'bitbucket.org'ä¸‹æ‰€æœ‰é”®</span></span><br><span class="line">config.items(<span class="string">'bitbucket.org'</span>)    <span class="comment">#æ‰¾åˆ°'bitbucket.org'ä¸‹æ‰€æœ‰é”®å€¼å¯¹</span></span><br><span class="line">config.get(<span class="string">'bitbucket.org'</span>,<span class="string">'compression'</span>) <span class="comment">#è·å–'bitbucket.org'ä¸‹keyå¯¹åº”çš„value</span></span><br></pre></td></tr></table></figure></div>

<h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'example.ini'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¢åŠ </span></span><br><span class="line">config.add_section(<span class="string">'yuan'</span>)</span><br><span class="line"><span class="comment">#åˆ é™¤</span></span><br><span class="line">config.remove_section(<span class="string">'bitbucket.org'</span>)  </span><br><span class="line">config.remove_option(<span class="string">'topsecret.server.com'</span>,<span class="string">"forwardx11"</span>)</span><br><span class="line"><span class="comment">#ä¿®æ”¹</span></span><br><span class="line">config.set(<span class="string">'topsecret.server.com'</span>,<span class="string">'k1'</span>,<span class="string">'11111'</span>)</span><br><span class="line">config.set(<span class="string">'yuan'</span>,<span class="string">'k2'</span>,<span class="string">'22222'</span>)</span><br><span class="line"><span class="comment">#ä¿å­˜ä¿®æ”¹</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'new2.ini'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> configfile:</span><br><span class="line">    config.write(configfile)</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åäº”)</title>
    <url>/blog/Python/Python_id_33.html</url>
    <content><![CDATA[<h2 id="æ•°æ®ç±»å‹æ‹“å±•"><a href="#æ•°æ®ç±»å‹æ‹“å±•" class="headerlink" title="æ•°æ®ç±»å‹æ‹“å±•"></a>æ•°æ®ç±»å‹æ‹“å±•</h2><p>åœ¨å†…ç½®æ•°æ®ç±»å‹ï¼ˆdictã€listã€setã€tupleï¼‰çš„åŸºç¡€ä¸Šï¼Œcollectionsæ¨¡å—è¿˜æä¾›äº†å‡ ä¸ªé¢å¤–çš„æ•°æ®ç±»å‹ï¼š<br>Counterã€dequeã€defaultdictã€namedtupleå’ŒOrderedDictç­‰ã€‚</p>
<a id="more"></a>

<blockquote>
<p>1.namedtuple: ç”Ÿæˆå¯ä»¥ä½¿ç”¨åå­—æ¥è®¿é—®å…ƒç´ å†…å®¹çš„tuple</p>
<p>2.deque: åŒç«¯é˜Ÿåˆ—ï¼Œå¯ä»¥å¿«é€Ÿçš„ä»å¦å¤–ä¸€ä¾§è¿½åŠ å’Œæ¨å‡ºå¯¹è±¡</p>
<p>3.Counter: è®¡æ•°å™¨ï¼Œä¸»è¦ç”¨æ¥è®¡æ•°</p>
<p>4.OrderedDict: æœ‰åºå­—å…¸</p>
<p>5.defaultdict: å¸¦æœ‰é»˜è®¤å€¼çš„å­—å…¸</p>
<p>exï¼šIterable: è¿­ä»£å™¨åŸºç±»</p>
</blockquote>
<h3 id="Iterable"><a href="#Iterable" class="headerlink" title="Iterable"></a>Iterable</h3><p>æ‰€æœ‰å¯ä»¥è¢«<code>for in</code>å¾ªç¯çš„ç±»å‹éƒ½æ˜¯ç»§æ‰¿äº<code>Iterable</code></p>
<p>Python3.8ç‰ˆæœ¬ä»¥ä¸Šçš„é—®é¢˜</p>
<p>DeprecationWarning:</p>
<p>Using or importing the ABCs from â€˜collectionsâ€™ instead of from â€˜collections.abcâ€™ is deprecated, and in 3.8 it willstop working</p>
<p>è§£å†³åŠæ³•ï¼š<br><code>from collections import Iterable</code>ä¿®æ”¹ä¸º<code>from collections.abc import Iterable</code></p>
<p>åˆ¤æ–­å¯¹è±¡èƒ½è¢«forå¾ªç¯</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="number">123</span>, Iterable)</span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance([<span class="number">1</span>,<span class="number">23</span>], Iterable)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,&#125;, Iterable)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance(<span class="string">'123'</span>, Iterable)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance((<span class="number">123</span>,), Iterable)</span><br><span class="line"><span class="literal">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>isinstance((i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">'123'</span>), Iterable)</span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<h3 id="namedtuple"><a href="#namedtuple" class="headerlink" title="namedtuple"></a>namedtuple</h3><p>æˆ‘ä»¬çŸ¥é“<code>tuple</code>å¯ä»¥è¡¨ç¤ºä¸å˜é›†åˆï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªç‚¹çš„äºŒç»´åæ ‡å°±å¯ä»¥è¡¨ç¤ºæˆï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = (<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div>

<p>ä½†æ˜¯ï¼Œçœ‹åˆ°(1, 2)ï¼Œå¾ˆéš¾çœ‹å‡ºè¿™ä¸ªtupleæ˜¯ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªåæ ‡çš„ã€‚<br>è¿™æ—¶ï¼Œ<code>namedtuple</code>å°±æ´¾ä¸Šäº†ç”¨åœºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>Point = namedtuple(<span class="string">'Point'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.x</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p.y</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p._asdict()</span><br><span class="line">&#123;<span class="string">'x'</span>: <span class="number">1</span>, <span class="string">'y'</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure></div>

<p>ç±»ä¼¼çš„ï¼Œå¦‚æœè¦ç”¨åæ ‡å’ŒåŠå¾„è¡¨ç¤ºä¸€ä¸ªåœ†ï¼Œä¹Ÿå¯ä»¥ç”¨<code>namedtuple</code>å®šä¹‰ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#namedtuple('åç§°', [å±æ€§list]):</span></span><br><span class="line">Circle = namedtuple(<span class="string">'Circle'</span>, [<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'r'</span>])</span><br></pre></td></tr></table></figure></div>

<h3 id="deque"><a href="#deque" class="headerlink" title="deque"></a>deque</h3><p>ä½¿ç”¨listå­˜å‚¨æ•°æ®æ—¶ï¼ŒæŒ‰ç´¢å¼•è®¿é—®å…ƒç´ å¾ˆå¿«ï¼Œä½†æ˜¯æ’å…¥å’Œåˆ é™¤å…ƒç´ å°±å¾ˆæ…¢äº†ï¼Œå› ä¸ºlistæ˜¯çº¿æ€§å­˜å‚¨ï¼Œæ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡å¾ˆä½ã€‚<br>dequeæ˜¯ä¸ºäº†é«˜æ•ˆå®ç°æ’å…¥å’Œåˆ é™¤æ“ä½œçš„åŒå‘åˆ—è¡¨ï¼Œé€‚åˆç”¨äºé˜Ÿåˆ—å’Œæ ˆï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q = deque([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.append(<span class="string">'x'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q.appendleft(<span class="string">'y'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q</span><br><span class="line">deque([<span class="string">'y'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'x'</span>])</span><br></pre></td></tr></table></figure></div>

<p>dequeé™¤äº†å®ç°listçš„<code>append()</code>å’Œ<code>pop()</code>å¤–ï¼Œè¿˜æ”¯æŒ<code>appendleft()</code>å’Œ<code>popleft()</code>ï¼Œè¿™æ ·å°±å¯ä»¥éå¸¸é«˜æ•ˆåœ°å¾€å¤´éƒ¨æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ã€‚</p>
<h3 id="OrderedDict"><a href="#OrderedDict" class="headerlink" title="OrderedDict"></a>OrderedDict</h3><p>ä½¿ç”¨dictæ—¶ï¼ŒKeyæ˜¯æ— åºçš„ã€‚åœ¨å¯¹dictåšè¿­ä»£æ—¶ï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®šKeyçš„é¡ºåºã€‚<br>å¦‚æœè¦ä¿æŒKeyçš„é¡ºåºï¼Œå¯ä»¥ç”¨<code>OrderedDict</code>ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = dict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d <span class="comment"># dictçš„Keyæ˜¯æ— åºçš„</span></span><br><span class="line">&#123;<span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'b'</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od = OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od <span class="comment"># OrderedDictçš„Keyæ˜¯æœ‰åºçš„</span></span><br><span class="line">OrderedDict([(<span class="string">'a'</span>, <span class="number">1</span>), (<span class="string">'b'</span>, <span class="number">2</span>), (<span class="string">'c'</span>, <span class="number">3</span>)])</span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„ï¼Œ<code>OrderedDict</code>çš„Keyä¼šæŒ‰ç…§æ’å…¥çš„é¡ºåºæ’åˆ—ï¼Œä¸æ˜¯Keyæœ¬èº«æ’åºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>od = OrderedDict()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'z'</span>] = <span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'y'</span>] = <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od[<span class="string">'x'</span>] = <span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>od.keys() <span class="comment"># æŒ‰ç…§æ’å…¥çš„Keyçš„é¡ºåºè¿”å›</span></span><br><span class="line">[<span class="string">'z'</span>, <span class="string">'y'</span>, <span class="string">'x'</span>]</span><br></pre></td></tr></table></figure></div>

<h3 id="defaultdict"><a href="#defaultdict" class="headerlink" title="defaultdict"></a>defaultdict</h3><p>æœ‰å¦‚ä¸‹å€¼é›†åˆ<code>[11,22,33,44,55,66,77,88,99,90...]</code>ï¼Œå°†æ‰€æœ‰å¤§äº66çš„å€¼ä¿å­˜è‡³å­—å…¸çš„ç¬¬ä¸€ä¸ªkeyä¸­ï¼Œå°†å°äº66çš„å€¼ä¿å­˜è‡³ç¬¬äºŒä¸ªkeyçš„å€¼ä¸­ã€‚</p>
<p>å³ï¼š <code>{&#39;k1&#39;: å¤§äº66, &#39;k2&#39;: å°äº66}</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">values = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">90</span>]</span><br><span class="line"></span><br><span class="line">my_dict = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span>  values:</span><br><span class="line">    <span class="keyword">if</span> value&gt;<span class="number">66</span>:</span><br><span class="line">        <span class="keyword">if</span> my_dict.has_key(<span class="string">'k1'</span>):</span><br><span class="line">            my_dict[<span class="string">'k1'</span>].append(value)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            my_dict[<span class="string">'k1'</span>] = [value]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> my_dict.has_key(<span class="string">'k2'</span>):</span><br><span class="line">            my_dict[<span class="string">'k2'</span>].append(value)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            my_dict[<span class="string">'k2'</span>] = [value]</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">values = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">90</span>]</span><br><span class="line"></span><br><span class="line">my_dict = defaultdict(list)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span>  values:</span><br><span class="line">    <span class="keyword">if</span> value&gt;<span class="number">66</span>:</span><br><span class="line">        my_dict[<span class="string">'k1'</span>].append(value)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        my_dict[<span class="string">'k2'</span>].append(value)</span><br></pre></td></tr></table></figure></div>

<p>ä½¿ç”¨<code>dict</code>æ—¶ï¼Œå¦‚æœå¼•ç”¨çš„Keyä¸å­˜åœ¨ï¼Œå°±ä¼šæŠ›å‡º<code>KeyError</code>ã€‚å¦‚æœå¸Œæœ›keyä¸å­˜åœ¨æ—¶ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå°±å¯ä»¥ç”¨<code>defaultdict</code>ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd = defaultdict(<span class="keyword">lambda</span>: <span class="string">'N/A'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'key1'</span>] = <span class="string">'abc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'key1'</span>] <span class="comment"># key1å­˜åœ¨</span></span><br><span class="line"><span class="string">'abc'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dd[<span class="string">'key2'</span>] <span class="comment"># key2ä¸å­˜åœ¨ï¼Œè¿”å›é»˜è®¤å€¼</span></span><br><span class="line"><span class="string">'N/A'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="Counter"><a href="#Counter" class="headerlink" title="Counter"></a>Counter</h3><p>Counterç±»çš„ç›®çš„æ˜¯ç”¨æ¥è·Ÿè¸ªå€¼å‡ºç°çš„æ¬¡æ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªæ— åºçš„å®¹å™¨ç±»å‹ï¼Œä»¥å­—å…¸çš„é”®å€¼å¯¹å½¢å¼å­˜å‚¨ï¼Œå…¶ä¸­å…ƒç´ ä½œä¸ºkeyï¼Œå…¶è®¡æ•°ä½œä¸ºvalueã€‚è®¡æ•°å€¼å¯ä»¥æ˜¯ä»»æ„çš„Intergerï¼ˆåŒ…æ‹¬0å’Œè´Ÿæ•°ï¼‰ã€‚Counterç±»å’Œå…¶ä»–è¯­è¨€çš„bagsæˆ–multisetså¾ˆç›¸ä¼¼ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>Counter(<span class="string">'abcdeabcdabcaba'</span>)</span><br><span class="line">Counter(&#123;<span class="string">'a'</span>: <span class="number">5</span>, <span class="string">'b'</span>: <span class="number">4</span>, <span class="string">'c'</span>: <span class="number">3</span>, <span class="string">'d'</span>: <span class="number">2</span>, <span class="string">'e'</span>: <span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure></div>

<h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><p>é˜Ÿåˆ—ç±»å‹ç”±Queueæ¨¡å—æä¾›ï¼Œåˆ›å»ºä¸€ä¸ªâ€œé˜Ÿåˆ—â€å¯¹è±¡å¦‚ä¸‹ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line">myqueue = Queue.Queue(maxsize = <span class="number">10</span>)</span><br></pre></td></tr></table></figure></div>

<p>Queue.Queueç±»å³æ˜¯ä¸€ä¸ªé˜Ÿåˆ—çš„åŒæ­¥å®ç°ã€‚</p>
<p>å°†ä¸€ä¸ªå€¼æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼ˆçº¿ç¨‹æš‚åœï¼‰ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">myqueue.put(<span class="number">10</span>)</span><br></pre></td></tr></table></figure></div>

<p>å°†ä¸€ä¸ªå€¼ä»é˜Ÿåˆ—ä¸­å–å‡ºï¼ˆçº¿ç¨‹æš‚åœï¼‰ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">myqueue.get()</span><br></pre></td></tr></table></figure></div>

<p>python queueæ¨¡å—æœ‰ä¸‰ç§é˜Ÿåˆ—:</p>
<blockquote>
<p>1ã€python queueæ¨¡å—çš„FIFOé˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºã€‚<br>2ã€LIFOç±»ä¼¼äºå †ã€‚å³å…ˆè¿›åå‡ºã€‚<br>3ã€è¿˜æœ‰ä¸€ç§æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—çº§åˆ«è¶Šä½è¶Šå…ˆå‡ºæ¥ã€‚</p>
</blockquote>
<p>é’ˆå¯¹è¿™ä¸‰ç§é˜Ÿåˆ—åˆ†åˆ«æœ‰ä¸‰ä¸ªæ„é€ å‡½æ•°:</p>
<blockquote>
<p>1ã€class Queue.Queue(maxsize) FIFO<br>2ã€class Queue.LifoQueue(maxsize) LIFO<br>3ã€class Queue.PriorityQueue(maxsize) ä¼˜å…ˆçº§é˜Ÿåˆ—</p>
</blockquote>
<p>å®ƒçš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†æ•°æ®å®‰å…¨ï¼Œè€Œä¸åªæ˜¯ä¸€ç§æ•°æ®ç»“æ„ã€‚æ•…è€Œè¿™é‡Œä¸å¤šä»‹ç»äº†</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åå››)</title>
    <url>/blog/Python/Python_id_32.html</url>
    <content><![CDATA[<h2 id="ä¸‰ç›®å’Œæ¨å¯¼å¼"><a href="#ä¸‰ç›®å’Œæ¨å¯¼å¼" class="headerlink" title="ä¸‰ç›®å’Œæ¨å¯¼å¼"></a>ä¸‰ç›®å’Œæ¨å¯¼å¼</h2><blockquote>
<p>æµç¨‹æ§åˆ¶ç« èŠ‚çš„è¿›é˜¶ã€‚</p>
</blockquote>
<h3 id="ä¸‰ç›®è¿ç®—ç¬¦"><a href="#ä¸‰ç›®è¿ç®—ç¬¦" class="headerlink" title="ä¸‰ç›®è¿ç®—ç¬¦"></a>ä¸‰ç›®è¿ç®—ç¬¦</h3><p>ä¹Ÿå«ä¸‰å…ƒè¡¨è¾¾å¼</p>
<a id="more"></a>

<p>æ™®é€šçš„if elseè¯­å¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> bï¼š</span><br><span class="line">    print(a)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(c)</span><br></pre></td></tr></table></figure></div>

<p>ä¸‰å…ƒè¡¨è¾¾å¼å†™æ³•ï¼Œç›¸å½“äºjavaä¸­è¾“å‡º<code>b?a:c</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">print(a <span class="keyword">if</span> b <span class="keyword">else</span> c)</span><br></pre></td></tr></table></figure></div>

<h3 id="èµ‹å€¼è¡¨è¾¾å¼"><a href="#èµ‹å€¼è¡¨è¾¾å¼" class="headerlink" title="èµ‹å€¼è¡¨è¾¾å¼"></a>èµ‹å€¼è¡¨è¾¾å¼</h3><p>åœ¨python3.8ä¸­ï¼Œå°†èµ‹å€¼è¯­å¥çš„ <code>=</code> å‰åŠ ä¸Šä¸€ä¸ªå†’å· <code>:</code> ã€‚<br>å®ƒå°±å˜æˆäº†ä¸€ä¸ªèµ‹å€¼è¡¨è¾¾å¼ï¼ˆAssignment expressionsï¼‰ã€‚</p>
<blockquote>
<p>It is affectionately known as â€œthe walrus operatorâ€ due to its resemblance to the eyes and tusks of a walrus<br>ç”±äºå®ƒå’Œæµ·è±¡çš„çœ¼ç›å’Œé•¿ç‰™ç›¸ä¼¼ï¼Œå®ƒè¢«äº²åˆ‡åœ°ç§°ä¸º<strong>æµ·è±¡è¿ç®—ç¬¦</strong></p>
</blockquote>
<p>èµ‹å€¼è¡¨è¾¾å¼ä¼šåœ¨èµ‹å€¼çš„åŒæ—¶è¿”å›å·¦å€¼çš„å¼•ç”¨ã€‚</p>
<ul>
<li><p>ifï¼Œwhileä¸­ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">'select t1.id, t1.name from t1'</span>)</span><br><span class="line">row = cur.fetchone()</span><br><span class="line"><span class="keyword">while</span> row:</span><br><span class="line">    print(<span class="string">"id=%d, name=%s"</span> % (row[<span class="number">0</span>], row[<span class="number">1</span>]))</span><br><span class="line">    row = cur.fetchone()</span><br></pre></td></tr></table></figure></div>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œèµ‹å€¼è¡¨è¾¾å¼å¯ä»¥å‡å°‘éƒ¨åˆ†ä»£ç ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">cur.execute(<span class="string">'select t1.id, t1.name from t1'</span>)</span><br><span class="line"><span class="keyword">while</span> row:=cur.fetchone():</span><br><span class="line">    print(<span class="string">"id=%d, name=%s"</span> % (row[<span class="number">0</span>], row[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>çŸ­è·¯ç”¨æ³•ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">n = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> txt:</span><br><span class="line">	<span class="keyword">if</span> char == <span class="string">'p'</span>:</span><br><span class="line">		n += <span class="number">1</span></span><br><span class="line">print(n)</span><br></pre></td></tr></table></figure></div>

<p>ä½¿ç”¨çŸ­è·¯å’Œèµ‹å€¼è¡¨è¾¾å¼å¯ä»¥ä¿®æ”¹ä¸ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">n = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> txt:</span><br><span class="line">	(char == <span class="string">'p'</span>) <span class="keyword">and</span> (n := n + <span class="number">1</span>)</span><br><span class="line">print(n)</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<h3 id="åˆ—è¡¨è§£æå¼"><a href="#åˆ—è¡¨è§£æå¼" class="headerlink" title="åˆ—è¡¨è§£æå¼"></a>åˆ—è¡¨è§£æå¼</h3><p>ä¹Ÿå«åˆ—è¡¨æ¨å¯¼å¼ã€‚ä»£ç å¯è¯»æ€§è¾ƒå·®ï¼Œä½¿ç”¨å¯èƒ½é™ä½ååŒå¼€å‘çš„æ•ˆç‡ï¼ŒæŒ‰éœ€ä½¿ç”¨ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">[<span class="string">"%s"</span>%i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>)]</span><br><span class="line"><span class="comment">#å¾—åˆ°["0","1","2","3","4"]</span></span><br><span class="line"></span><br><span class="line">[<span class="string">"%s"</span>%i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>) <span class="keyword">if</span> i%<span class="number">2</span>==<span class="number">0</span>]</span><br><span class="line"><span class="comment">#å¾—åˆ°["0","2","4"]</span></span><br></pre></td></tr></table></figure></div>

<p>æ¢ç”¨åœ†æ‹¬å·æ˜¯ç”Ÿæˆå¼ã€‚å®ƒæƒ°æ€§ä½¿ç”¨ï¼Œç›¸æ¯”äºåˆ—è¡¨è§£æå ç”¨çš„å†…å­˜å°å¾—å¤š<br>ç”Ÿæˆå™¨(generator)ä¼šåœ¨ä¹‹åç« èŠ‚è¯¦ç»†ä»‹ç»ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">(<span class="string">"%s"</span>%i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>))</span><br></pre></td></tr></table></figure></div>

<p>å®ƒå¯ä»¥ç›´æ¥åœ¨for inè¯­å¥ä¸­ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> (<span class="string">"%s"</span>%i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>)):</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure></div>

<p>å®ƒçš„ç»“æœå’Œä½¿ç”¨å†…ç½®å‡½æ•°mapä¸€æ ·</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">map(<span class="keyword">lambda</span> i: <span class="string">"%s"</span>%i, range(<span class="number">5</span>))</span><br></pre></td></tr></table></figure></div>

<p>æ¢ç”¨èŠ±æ‹¬å·å¾—åˆ°çš„åˆ™æ˜¯é›†åˆæ¨å¯¼å¼ã€‚</p>
<h3 id="å­—å…¸æ¨å¯¼å¼"><a href="#å­—å…¸æ¨å¯¼å¼" class="headerlink" title="å­—å…¸æ¨å¯¼å¼"></a>å­—å…¸æ¨å¯¼å¼</h3><p>å­—å…¸æ¨å¯¼å¼è¯­æ³•å’Œåˆ—è¡¨è§£æå¼ç±»ä¼¼<br>python3.8åï¼Œå­—å…¸æ¨å¯¼å¼å·²ä¸å­—å…¸å­—é¢å€¼å®ç°åŒæ­¥ï¼Œä¼šå…ˆè®¡ç®—é”®å†è®¡ç®—å€¼ã€‚</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="comment"># Dict comprehension</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>cast = &#123;input(<span class="string">'role? '</span>): input(<span class="string">'actor? '</span>) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>)&#125;</span><br><span class="line">role? King Arthur</span><br><span class="line">actor? Chapman</span><br><span class="line">role? Black Knight</span><br><span class="line">actor? Cleese</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åä¸‰)</title>
    <url>/blog/Python/Python_id_28.html</url>
    <content><![CDATA[<h2 id="å­—ç¬¦ä¸²æ ¼å¼åŒ–"><a href="#å­—ç¬¦ä¸²æ ¼å¼åŒ–" class="headerlink" title="å­—ç¬¦ä¸²æ ¼å¼åŒ–"></a>å­—ç¬¦ä¸²æ ¼å¼åŒ–</h2><p>Pythonçš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æœ‰ä¸¤ç§æ–¹å¼</p>
<ul>
<li>%æ ¼å¼ç¬¦æ–¹å¼</li>
<li>formatæ–¹å¼</li>
</ul>
<a id="more"></a>

<p>äº‹å®ä¸Šï¼Œæ ¼å¼åŒ–å€ŸåŠ©çš„æ˜¯å¯¹è±¡çš„é­”æœ¯æ–¹æ³•ã€‚<br>å®ç°äº†<code>__format__</code>çš„å¯¹è±¡æ‰é€‚ç”¨äºformatæ–¹å¼æ ¼å¼åŒ–è¾“å‡ºï¼Œ<br>å®ç°äº†<code>__str__</code>ï¼Œ<code>__repr__</code>çš„å¯¹è±¡æ‰åˆ†åˆ«é€‚ç”¨äºæ ¼å¼ç¬¦<code>%s</code>å’Œ<code>%r</code>è¾“å‡ºã€‚<br>åœ¨é¢å‘å¯¹è±¡ç« èŠ‚æœ‰ç»™å¯¹è±¡å®šä¹‰é­”æœ¯æ–¹æ³•çš„ç¤ºä¾‹ã€‚</p>
<h3 id="æ ¼å¼ç¬¦"><a href="#æ ¼å¼ç¬¦" class="headerlink" title="%æ ¼å¼ç¬¦"></a><code>%</code>æ ¼å¼ç¬¦</h3><p>ä¸€èˆ¬æ ¼å¼ä¸º <code>%(name)</code> + <a href="https://docs.python.org/zh-cn/3/library/string.html#formatspec" target="_blank" rel="noopener">format_spec</a></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="code"><pre><span class="line">[[fill]align][sign][#][0][width][grouping_option][.precision][type]</span><br></pre></td></tr></table></figure></div>

<h4 id="name"><a href="#name" class="headerlink" title="name"></a>name</h4><p>å¯é€‰ï¼Œç”¨äºé€‰æ‹©æŒ‡å®šçš„key</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%(name)sâ€”â€”%(age)d"</span>%&#123;<span class="string">'name'</span>:<span class="string">'å®é’Ÿç›ç³'</span>,<span class="string">'age'</span>:<span class="number">17</span>&#125;</span><br><span class="line"><span class="string">'å®é’Ÿç›ç³â€”â€”17'</span></span><br></pre></td></tr></table></figure></div>

<p>s å’Œ d å±äº [<code>type</code>]</p>
<p>format_specè§„åˆ™çš„å¸¸ç”¨ç»„åˆ†ï¼š</p>
<h4 id="sign"><a href="#sign" class="headerlink" title="sign"></a>sign</h4><p>å¯é€‰ï¼Œæ•°å­—å’Œå­—ç¬¦ä¸²å¯ä¾›é€‰æ‹©çš„å€¼æœ‰ï¼š</p>
<ul>
<li><code>+</code> å³å¯¹é½ï¼›æ­£æ•°è´Ÿæ•°å‰åŠ æ­£è´Ÿå·</li>
<li><code>-</code> å·¦å¯¹é½ï¼›è´Ÿæ•°å‰åŠ è´Ÿå·</li>
<li>ç©ºæ ¼ å³å¯¹é½ï¼›è´Ÿæ•°å‰åŠ è´Ÿå·</li>
<li><code>0</code> å³å¯¹é½ï¼›æ­£æ•°å‰æ— ç¬¦å·ï¼Œè´Ÿæ•°å‰åŠ è´Ÿå·ï¼›ç”¨0å¡«å……ç©ºç™½å¤„</li>
</ul>
<h4 id="width"><a href="#width" class="headerlink" title="width"></a>width</h4><p>å¯é€‰ï¼Œå æœ‰å®½åº¦</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">"%(name)+7sâ€”â€”%(age)-5d"</span>%&#123;<span class="string">'name'</span>:<span class="string">'å®é’Ÿç›ç³'</span>,<span class="string">'age'</span>:<span class="number">17</span>&#125;</span><br><span class="line"><span class="string">'   å®é’Ÿç›ç³â€”â€”17   '</span></span><br></pre></td></tr></table></figure></div>

<h4 id="precision"><a href="#precision" class="headerlink" title=".precision"></a>.precision</h4><p>å¯é€‰ï¼Œå°æ•°ç‚¹åä¿ç•™çš„ä½æ•° é»˜è®¤6ä½</p>
<h4 id="type"><a href="#type" class="headerlink" title="type"></a>type</h4><p>ç±»å‹ï¼Œå¿…é€‰</p>
<p>ä»»æ„å¯¹è±¡ï¼š</p>
<ul>
<li><code>%s</code> å­—ç¬¦ä¸² (é‡‡ç”¨<code>str()</code>çš„æ˜¾ç¤º)</li>
<li><code>%r</code> å­—ç¬¦ä¸² (é‡‡ç”¨<code>repr()</code>çš„æ˜¾ç¤º)</li>
<li><code>%c</code> å•ä¸ªå­—ç¬¦</li>
</ul>
<p>å­—ç¬¦ä¸²å’Œæ•´æ•°ï¼š</p>
<ul>
<li><code>%b</code> äºŒè¿›åˆ¶æ•´æ•°</li>
<li><code>%%</code> å­—ç¬¦â€%â€è½¬ä¹‰</li>
</ul>
<p>æ•°å­—ï¼š</p>
<ul>
<li><code>%d</code> åè¿›åˆ¶æ•´æ•°</li>
<li><code>%i</code> åè¿›åˆ¶æ•´æ•°</li>
<li><code>%o</code> å…«è¿›åˆ¶æ•´æ•°</li>
<li><code>%x</code> åå…­è¿›åˆ¶æ•´æ•°</li>
<li><code>%e</code> æŒ‡æ•° (åŸºåº•å†™ä¸ºe)</li>
<li><code>%E</code> æŒ‡æ•° (åŸºåº•å†™ä¸ºE)</li>
<li><code>%f</code> æµ®ç‚¹æ•°</li>
<li><code>%F</code> æµ®ç‚¹æ•°ï¼Œä¸ä¸Šç›¸åŒ</li>
<li><code>%g</code> ç§‘å­¦è®¡æ•°æ³•(e)æˆ–æµ®ç‚¹æ•° (æ ¹æ®æ˜¾ç¤ºé•¿åº¦)</li>
<li><code>%G</code> ç§‘å­¦è®¡æ•°æ³•(E)æˆ–æµ®ç‚¹æ•° (æ ¹æ®æ˜¾ç¤ºé•¿åº¦)</li>
<li><code>%%</code> å­—ç¬¦â€%â€</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'â€”â€”%(p).2f'</span>%&#123;<span class="string">'p'</span>:<span class="number">0.1</span>+<span class="number">0.2</span>&#125;</span><br><span class="line"><span class="string">'â€”â€”0.30'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'â€”â€”%(p).2g'</span>%&#123;<span class="string">'p'</span>:<span class="number">0.1</span>+<span class="number">0.2</span>&#125;</span><br><span class="line"><span class="string">'â€”â€”0.3'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="ç»ˆç«¯å­—ä½“é¢œè‰²"><a href="#ç»ˆç«¯å­—ä½“é¢œè‰²" class="headerlink" title="ç»ˆç«¯å­—ä½“é¢œè‰²"></a>ç»ˆç«¯å­—ä½“é¢œè‰²</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">#æ ¼å¼ï¼š</span></span><br><span class="line"><span class="string">ã€€ã€€è®¾ç½®é¢œè‰²å¼€å§‹ ï¼š\033[æ˜¾ç¤ºæ–¹å¼;å‰æ™¯è‰²;èƒŒæ™¯è‰²m</span></span><br><span class="line"><span class="string">ã€€ã€€</span></span><br><span class="line"><span class="string">#è¯´æ˜ï¼š</span></span><br><span class="line"><span class="string">å‰æ™¯è‰²            èƒŒæ™¯è‰²           é¢œè‰²</span></span><br><span class="line"><span class="string">---------------------------------------</span></span><br><span class="line"><span class="string">30                40              é»‘è‰²</span></span><br><span class="line"><span class="string">31                41              çº¢è‰²</span></span><br><span class="line"><span class="string">32                42              ç»¿è‰²</span></span><br><span class="line"><span class="string">33                43              é»ƒè‰²</span></span><br><span class="line"><span class="string">34                44              è“è‰²</span></span><br><span class="line"><span class="string">35                45              ç´«çº¢è‰²</span></span><br><span class="line"><span class="string">36                46              é’è“è‰²</span></span><br><span class="line"><span class="string">37                47              ç™½è‰²</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ˜¾ç¤ºæ–¹å¼           æ„ä¹‰</span></span><br><span class="line"><span class="string">-------------------------</span></span><br><span class="line"><span class="string">0                ç»ˆç«¯é»˜è®¤è®¾ç½®</span></span><br><span class="line"><span class="string">1                é«˜äº®æ˜¾ç¤º</span></span><br><span class="line"><span class="string">4                ä½¿ç”¨ä¸‹åˆ’çº¿</span></span><br><span class="line"><span class="string">5                é—ªçƒ</span></span><br><span class="line"><span class="string">7                åç™½æ˜¾ç¤º</span></span><br><span class="line"><span class="string">8                ä¸å¯è§</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¾‹å­ï¼š</span></span><br><span class="line">\<span class="number">033</span>[<span class="number">1</span>;<span class="number">31</span>;<span class="number">40</span>m    <span class="comment">#1-é«˜äº®æ˜¾ç¤º 31-å‰æ™¯è‰²çº¢è‰²  40-èƒŒæ™¯è‰²é»‘è‰²</span></span><br><span class="line">\<span class="number">033</span>[<span class="number">0</span>m          <span class="comment">#é‡‡ç”¨ç»ˆç«¯é»˜è®¤è®¾ç½®ï¼Œå³å–æ¶ˆé¢œè‰²è®¾ç½®</span></span><br></pre></td></tr></table></figure></div>

<p>å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—termcoloræ¥ç®€åŒ–è¯­å¥ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> termcolor <span class="keyword">import</span> colored</span><br><span class="line"></span><br><span class="line">print(colored(<span class="string">"helloworld"</span>, <span class="string">"red"</span>))</span><br></pre></td></tr></table></figure></div>

<p>ç¬¬ä¸‰æ–¹æ¨¡å—åœ¨ä½¿ç”¨å‰éœ€è¦ç”¨pipå®‰è£…</p>
<p>ç³»ç»Ÿæ”¯æŒ</p>
<p>Windows7åŠä»¥ä¸‹æ— æ³•è§£æé¢œè‰²ä»£ç <br>ä½¿ç”¨termcoloræ¨¡å—ä¹Ÿæ— æ•ˆ<br>å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—coloramaæ¥æ˜¾ç¤ºé¢œè‰²</p>
<p>coloramaæ¨¡å—å…¼å®¹æ›´å¥½ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span>  init, Fore</span><br><span class="line"></span><br><span class="line">init(autoreset=<span class="literal">False</span>) <span class="comment">#ç»™Trueçš„æ—¶å€™printæ—¶æ— éœ€+Fore.RESET</span></span><br><span class="line">print(Fore.RED + <span class="string">"helloworld"</span> + Fore.RESET)</span><br></pre></td></tr></table></figure></div>

<h3 id="å†…ç½®å‡½æ•°format"><a href="#å†…ç½®å‡½æ•°format" class="headerlink" title="å†…ç½®å‡½æ•°format()"></a>å†…ç½®å‡½æ•°<code>format()</code></h3><p>å†…ç½®å‡½æ•°<code>format</code>(<em>value</em>[, <em>format_spec</em>])<br>ç¬¬äºŒä¸ªå‚æ•°å³format_specæ ¼å¼è§„æ ¼è¿·ä½ è¯­è¨€<br>å®ç°äº†é­”æœ¯æ–¹æ³•<code>__format__</code>çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨</p>
<p>ä»¥æ•°å­—å¯¹è±¡çš„æ ¼å¼åŒ–ä¸ºä¾‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(<span class="number">12</span>,<span class="string">'+.3f'</span>) <span class="comment">#ä¿ç•™3ä½å°æ•°</span></span><br><span class="line"><span class="string">'+12.000'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(<span class="number">3</span>,<span class="string">'b'</span>) <span class="comment">#äºŒè¿›åˆ¶è½¬åŒ–</span></span><br><span class="line"><span class="string">'11'</span></span><br></pre></td></tr></table></figure></div>

<p>å…¶ä»–å®ç°äº†é­”æœ¯æ–¹æ³•<code>__format__</code>çš„å¯¹è±¡ï¼Œè¿™é‡Œä»¥<code>datetime.time</code>å¯¹è±¡ä¸ºä¾‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>night = datetime.time(<span class="number">22</span>,<span class="number">30</span>,tzinfo=datetime.timezone(</span><br><span class="line"><span class="meta">... </span>    datetime.timedelta(hours=<span class="number">8</span>), name = <span class="string">'åŒ—äº¬'</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>format(night,<span class="string">'ç°åœ¨æ˜¯%Zæ—¶é—´%Hç‚¹%Måˆ†'</span>)</span><br><span class="line"><span class="string">'ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´22ç‚¹30åˆ†'</span></span><br></pre></td></tr></table></figure></div>

<p><code>datetime</code>æ¨¡å—åç»­ä¼šä»‹ç»ã€‚</p>
<h3 id="str-format"><a href="#str-format" class="headerlink" title="str.format()"></a><code>str.format()</code></h3><p>æ¶‰åŠåˆ°å‡½æ•°çš„ä¼ å‚æ–¹å¼ï¼Œå°†åœ¨åé¢ç« èŠ‚ä»‹ç»ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="string">' &#123;&#125;  &#123;&#125;  &#123;&#125; '</span>.format(a,b,c)     </span><br><span class="line"><span class="string">' &#123;0&#125;  &#123;1&#125;  &#123;2&#125; '</span>.format(a,b,c)</span><br><span class="line"><span class="string">' &#123;0&#125;  &#123;1&#125;  &#123;2&#125; '</span>.format(*[a,b,c])</span><br><span class="line"><span class="string">' &#123;a&#125;  &#123;b&#125;  &#123;c&#125; '</span>.format(a=a,b=b,c=c)</span><br><span class="line"><span class="string">' &#123;a&#125;  &#123;b&#125;  &#123;c&#125; '</span>.format(**&#123;<span class="string">"a"</span>:a,<span class="string">"b"</span>:b,<span class="string">"c"</span>:c&#125;)</span><br></pre></td></tr></table></figure></div>

<p><code>{!s}</code>æ˜¯é»˜è®¤çš„</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="string">'&#123;!s&#125;ã€&#123;!a&#125;ã€&#123;!r&#125;'</span> <span class="comment">#åˆ†åˆ«è¡¨ç¤ºstrã€asciiå’Œrepræ–¹æ³•ã€‚</span></span><br></pre></td></tr></table></figure></div>

<p>å®ç°äº†é­”æœ¯æ–¹æ³•<code>__format__</code>çš„å¯¹è±¡å¯ä»¥ä½¿ç”¨å†’å· <code>: format_spec</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'0x&#123;:x&#125;'</span>.format(<span class="number">255</span>)</span><br><span class="line"><span class="string">'0xff'</span></span><br></pre></td></tr></table></figure></div>

<p>ä»¥<code>datetime.time</code>å¯¹è±¡ä¸ºä¾‹çš„å…¶ä»–å®ç°äº†é­”æœ¯æ–¹æ³•<code>__format__</code>çš„å¯¹è±¡ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'ç°åœ¨æ˜¯&#123;:%Z&#125;æ—¶é—´&#123;:%H&#125;ç‚¹&#123;:%M&#125;åˆ†'</span>.format(night,night,night)</span><br><span class="line"><span class="string">'ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´22ç‚¹30åˆ†'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="få­—ç¬¦ä¸²"><a href="#få­—ç¬¦ä¸²" class="headerlink" title="få­—ç¬¦ä¸²"></a>få­—ç¬¦ä¸²</h3><p>åœ¨python3.6ä»¥ä¸Šï¼Œ<code>str.format()</code>å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>få­—ç¬¦ä¸²</strong>çš„å†™æ³•<br>ç”¨<code>f&#39;{a}{b}{c}&#39;</code>å³å¯ä»£æ›¿<code>&#39;{a}{b}{c}&#39;.format(a=a,b=b,c=c)</code>ã€‚<br>få­—ç¬¦ä¸²ä¸­ä¸å…è®¸ä½¿ç”¨<code>\</code>è½¬ä¹‰å­—ç¬¦ã€‚</p>
<p>ä¸<code>%</code>æ ¼å¼ç¬¦çš„ä¸åŒï¼š<br>Signå¯¹é½ä½¿ç”¨<code>&lt;</code>ï¼Œ<code>&gt;</code> å’Œ <code>^</code> è€Œä¸æ˜¯ <code>+</code> å’Œ <code>-</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'%-6d000'</span>%<span class="number">233</span></span><br><span class="line"><span class="number">233</span>   <span class="number">000</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f'<span class="subst">&#123;<span class="number">233</span>:&lt;<span class="number">6</span>d&#125;</span>000'</span></span><br><span class="line"><span class="number">233</span>   <span class="number">000</span></span><br></pre></td></tr></table></figure></div>

<p>ä»¥<code>datetime.time</code>å¯¹è±¡ä¸ºä¾‹çš„å…¶ä»–å®ç°äº†é­”æœ¯æ–¹æ³•<code>__format__</code>çš„å¯¹è±¡ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f'ç°åœ¨æ˜¯<span class="subst">&#123;night:%Z&#125;</span>æ—¶é—´<span class="subst">&#123;night:%H&#125;</span>ç‚¹<span class="subst">&#123;night:%M&#125;</span>åˆ†'</span></span><br><span class="line"><span class="string">'ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´22ç‚¹30åˆ†'</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨python3.8ä»¥ä¸Š</p>
<p>få­—ç¬¦ä¸²ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è¯´æ˜ç¬¦<code>=</code>è°ƒè¯•ï¼Œ</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>python = <span class="number">3.8</span>	</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">f"<span class="subst">&#123;python=&#125;</span>"</span>	</span><br><span class="line"><span class="string">'python=3.8'</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å†…ç½®å‡½æ•°str-å’Œrepr"><a href="#å†…ç½®å‡½æ•°str-å’Œrepr" class="headerlink" title="å†…ç½®å‡½æ•°str()å’Œrepr()"></a>å†…ç½®å‡½æ•°<code>str()</code>å’Œ<code>repr()</code></h3><p><code>str()</code>ä¸æ­¢æ˜¯æ„é€ å‡½æ•°ï¼ˆ<code>class</code>ï¼‰å®ä¾‹åŒ–ä¸€ä¸ª<code>str</code>å¯¹è±¡ï¼Œ<br><code>str(o)</code>å®ƒä¹Ÿæ˜¯å¯¹å‚æ•°å¯¹è±¡è¿›è¡Œé­”æœ¯æ–¹æ³•çš„è°ƒç”¨ï¼š<code>o.__str__()</code>ï¼Œå°†å‚æ•°è½¬æ¢ä¸ºäº†<code>str</code>å¯¹è±¡<br>æ— è®ºæ˜¯<code>print(o)</code>ï¼Œ<code>f&#39;{o}&#39;</code>, <code>&quot;%s&quot;%o</code>ï¼Œå®ƒä»¬éƒ½æ˜¯å¯¹é­”æœ¯æ–¹æ³• <code>o.__str__()</code>çš„è°ƒç”¨</p>
<hr>
<p>è€Œ<code>repr(o)</code>ï¼Œ<code>f&#39;{o!r}&#39;</code>, <code>&quot;%r&quot;%o</code>åˆ™æ˜¯å¯¹é­”æœ¯æ–¹æ³• <code>o.__repr__()</code>çš„è°ƒç”¨ï¼Œ<br>å®ƒä¼šä»¥å­—é¢é‡çš„å½¢å¼å‘ˆç°å¯¹è±¡ï¼Œå³å­—ç¬¦ä¸²å¸¦æœ‰å¼•å·ï¼Œåˆ—è¡¨å˜æˆ<code>&#39;[&#39;+ repr(æˆå‘˜) + &#39;,]&#39;</code><br><strong>få­—ç¬¦ä¸²</strong>ä¸­<code>f&#39;{o=}&#39;</code>å°±ç›¸å½“äº<code>f&#39;o={repr(o)}&#39;</code></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åäºŒ)</title>
    <url>/blog/Python/Python_id_27.html</url>
    <content><![CDATA[<h2 id="å­—å…¸å’Œé›†åˆ"><a href="#å­—å…¸å’Œé›†åˆ" class="headerlink" title="å­—å…¸å’Œé›†åˆ"></a>å­—å…¸å’Œé›†åˆ</h2><blockquote>
<p>å‡ ç§æ•°æ®ç±»å‹åœ¨å†…å­˜ä¸­çš„è®¿é—®æ–¹å¼</p>
<ul>
<li>ç›´æ¥è®¿é—®ï¼šæ•°å­—</li>
<li>é¡ºåºè®¿é—®ï¼šå­—ç¬¦ä¸² åˆ—è¡¨ å…ƒç»„</li>
<li>æ˜ å°„è®¿é—®ï¼šå­—å…¸</li>
</ul>
</blockquote>
<a id="more"></a>

<h3 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a>å­—å…¸</h3><blockquote>
<h4 id="dict"><a href="#dict" class="headerlink" title="dict"></a>dict</h4><p>å¯è¿­ä»£ç±»å‹ å¯å˜ç±»å‹ æ— åºç±»å‹ ä¸€ç³»åˆ—é”®å€¼å¯¹key-valueç”¨å†’å·åˆ†å‰²ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">d = &#123;<span class="string">'key1'</span> : <span class="string">'value1'</span>, <span class="string">'key2'</span> : <span class="string">'value2'</span> &#125;</span><br></pre></td></tr></table></figure></div>

<p>keyå¿…é¡»æ˜¯<strong>ä¸å¯å˜ç±»å‹</strong>çš„æ•°æ®ï¼ˆå¦åˆ™æŠ¥é”™unhashableï¼‰<br>valueå¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹<br>å¦‚æœkeyä½¿ç”¨å¸ƒå°”å€¼ä¼šè¢«è½¬æ¢ä¸º1å’Œ0</p>
</blockquote>
<p>åœ¨python3.6ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œå­—å…¸é»˜è®¤æŒ‰æ’å…¥çš„é¡ºåºæ’åˆ—äº†é”®å€¼å¯¹ã€‚<br>åœ¨python3.8ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œå­—å…¸å¯ä»¥ä½¿ç”¨ <code>reversed()</code>æŒ‰æ’å…¥é¡ºåºåå‘è¿­ä»£</p>
<h4 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h4><h5 id="inæˆå‘˜è¿ç®—ç¬¦"><a href="#inæˆå‘˜è¿ç®—ç¬¦" class="headerlink" title="inæˆå‘˜è¿ç®—ç¬¦"></a>inæˆå‘˜è¿ç®—ç¬¦</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="string">'key1'</span> <span class="keyword">in</span> d <span class="comment">#åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ è¿”å›å¸ƒå°”å€¼</span></span><br></pre></td></tr></table></figure></div>

<h5 id="getitemæ“ä½œ"><a href="#getitemæ“ä½œ" class="headerlink" title="getitemæ“ä½œ"></a>getitemæ“ä½œ</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'key1'</span>]</span><br><span class="line"><span class="string">'value1'</span></span><br></pre></td></tr></table></figure></div>

<h5 id="setitemæ“ä½œ"><a href="#setitemæ“ä½œ" class="headerlink" title="setitemæ“ä½œ"></a>setitemæ“ä½œ</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">d[<span class="string">'key1'</span>] = <span class="string">'debu'</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æœ‰å…³çš„å†…ç½®å‡½æ•°"><a href="#æœ‰å…³çš„å†…ç½®å‡½æ•°" class="headerlink" title="æœ‰å…³çš„å†…ç½®å‡½æ•°"></a>æœ‰å…³çš„å†…ç½®å‡½æ•°</h4><p><code>len(dict)</code>è¿”å›é”®çš„æ•°ç›®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PROLOG"><figure class="iseeu highlight /prolog"><table><tr><td class="code"><pre><span class="line">zip()<span class="string">`ä»¥æ‹‰é“¾æ³•**æƒ°æ€§**ç”Ÿæˆé”®å€¼å¯¹ï¼š`</span>(<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>),(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)<span class="string">` -&gt;`</span>[(<span class="string">'a'</span>,<span class="number">1</span>),(<span class="string">'b'</span>,<span class="number">2</span>)(<span class="string">'c'</span>,<span class="number">3</span>)]</span><br><span class="line">dict()<span class="string">` ä»¥é”®å€¼å¯¹ç”Ÿæˆå­—å…¸ï¼š`</span>[(<span class="string">'a'</span>,<span class="number">1</span>),(<span class="string">'b'</span>,<span class="number">2</span>),(<span class="string">'c'</span>,<span class="number">3</span>)]<span class="string">` -&gt; `</span>&#123;<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'b'</span>:<span class="number">2</span>,<span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><p><code>dict.fromkeys(å¯è¿­ä»£å¯¹è±¡,value)</code>é™æ€æ–¹æ³•ç”Ÿæˆå­—å…¸ï¼Œæ‰€æœ‰é”®çš„å€¼éƒ½ä¸ºvalue</p>
<p><code>.copy()</code> æµ…æ‹·è´</p>
<h5 id="å¢åˆ æ”¹æŸ¥"><a href="#å¢åˆ æ”¹æŸ¥" class="headerlink" title="å¢åˆ æ”¹æŸ¥"></a>å¢åˆ æ”¹æŸ¥</h5><p><code>.setdefault(key, value)</code>å·²å­˜åœ¨åˆ™è¿”å›å·²å­˜åœ¨çš„valueï¼Œä¸å­˜åœ¨åˆ™è®¾ç½®ã€‚</p>
<p><code>.update(key=value)</code> <code>.update(dict)</code>è®¾ç½®æˆ–è¦†ç›–ï¼Œè¿™é‡Œå¯å¯¹æ¯”ä¹‹åç« èŠ‚å‡½æ•°çš„å‰©ä½™å‚æ•°ã€‚</p>
<p><code>.pop(key, None)</code>åˆ é™¤å¹¶è¿”å›å…¶valueï¼Œä¸å­˜åœ¨åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°é»˜è®¤ä¸ºNoneã€‚</p>
<p><code>.popitem()</code>éšæœºåˆ ä¸€ä¸ªå¹¶è¿”å›å…¶é”®å€¼å¯¹ã€‚</p>
<p><code>.clear()</code>æ¸…ç©ºã€‚</p>
<p><code>del d[key1]</code> åˆ é™¤ä¸€ç»„é”®å€¼å¯¹ã€‚</p>
<p><code>.get(key, None)</code>æŸ¥æ‰¾ ä¸å­˜åœ¨åˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•° é»˜è®¤ä¸ºNoneã€‚</p>
<p><code>.items()</code>è¿”å›é”®å€¼å¯¹ç»„æˆçš„åˆ—è¡¨ã€‚åŠŸèƒ½ä¸<code>dict()</code>ç›¸åã€‚</p>
<p><code>.keys()</code>è¿”å›é”®ç»„æˆçš„åˆ—è¡¨ã€‚</p>
<p><code>.values()</code>è¿”å›å€¼ç»„æˆçš„åˆ—è¡¨ã€‚</p>
<h3 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a>é›†åˆ</h3><blockquote>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p>å¯è¿­ä»£ç±»å‹ å¯å˜ç±»å‹ æ— åºç±»å‹ , å…ƒç´ ä¸é‡å¤</p>
<p>ç”Ÿæˆæ–¹å¼:</p>
<ol>
<li><code>{1,2,3,4,5}</code></li>
<li><code>set(å¯è¿­ä»£å¯¹è±¡)</code></li>
</ol>
</blockquote>
<p>è§„èŒƒçš„åˆå§‹åŒ–</p>
<p>åˆ›å»ºä¸€ä¸ªç©ºå­—å…¸æˆ–ç©ºé›†åˆçš„æ—¶å€™ä½¿ç”¨<code>dict()</code>å’Œ<code>set()</code><br>è€Œä¸æ˜¯ä½¿ç”¨<code>{}</code></p>
<h4 id="å¢åˆ æ–¹æ³•"><a href="#å¢åˆ æ–¹æ³•" class="headerlink" title="å¢åˆ æ–¹æ³•"></a>å¢åˆ æ–¹æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">s1.add(p_obj)</span><br><span class="line">s1.update(s2) </span><br><span class="line">s.claer()<span class="comment">#æ¸…ç©º</span></span><br><span class="line">s.pop()<span class="comment">#éšæœºåˆ é™¤ä¸€ä¸ªå¹¶è¿”å›å…¶å€¼</span></span><br><span class="line">s.remove(value) <span class="comment">#åˆ é™¤ æ²¡æœ‰=&gt;æŠ¥é”™</span></span><br><span class="line">s.discard(value)<span class="comment">#åˆ é™¤ æ²¡æœ‰ä¸æŠ¥é”™</span></span><br></pre></td></tr></table></figure></div>

<h4 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">s.copy()          <span class="comment">#å¦‚æœæ˜¯listç›´æ¥ä½¿ç”¨åˆ‡ç‰‡å°±å¯ä»¥æµ…æ‹·è´arr2=arr[:]</span></span><br></pre></td></tr></table></figure></div>

<h4 id="é›†åˆä¹‹é—´è¿ç®—"><a href="#é›†åˆä¹‹é—´è¿ç®—" class="headerlink" title="é›†åˆä¹‹é—´è¿ç®—"></a>é›†åˆä¹‹é—´è¿ç®—</h4><table>
<thead>
<tr>
<th align="left">è¿ç®—</th>
<th align="left">è¿ç®—ç¬¦è¡¨ç¤º</th>
<th align="left">å¯¹è±¡æ–¹æ³•</th>
</tr>
</thead>
<tbody><tr>
<td align="left">äº¤é›†</td>
<td align="left">s1&amp;s2</td>
<td align="left">s1.intersection(s2)</td>
</tr>
<tr>
<td align="left">å¹¶é›†</td>
<td align="left">s1|s2</td>
<td align="left">s1.union(s2)</td>
</tr>
<tr>
<td align="left">å·®é›†</td>
<td align="left">s1-s2</td>
<td align="left">s1.difference(s2)</td>
</tr>
<tr>
<td align="left">äº¤å‰è¡¥é›†</td>
<td align="left"></td>
<td align="left">s1.symmetric_difference(s2)</td>
</tr>
</tbody></table>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">s1.issubset(s2)   <span class="comment">#s1æ˜¯å¦æ˜¯s2å­é›†</span></span><br><span class="line">s1.issuperset(s2)   <span class="comment">#s1æ˜¯å¦æ˜¯s2è¶…é›†</span></span><br><span class="line">s1.intersection_update(s2)  </span><br><span class="line">s1.difference_update(s2)</span><br><span class="line">s1.symmetric_difference_update(s2)</span><br></pre></td></tr></table></figure></div>

<p>å†…ç½®å‡½æ•° <code>set()</code>å’Œ <code>frozenset()</code>åˆ†åˆ«ç”¨æ¥ç”Ÿæˆå¯å˜å’Œä¸å¯å˜çš„é›†åˆ</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(åä¸€)</title>
    <url>/blog/Python/Python_id_26.html</url>
    <content><![CDATA[<h2 id="åˆ—è¡¨å’Œå…ƒç»„"><a href="#åˆ—è¡¨å’Œå…ƒç»„" class="headerlink" title="åˆ—è¡¨å’Œå…ƒç»„"></a>åˆ—è¡¨å’Œå…ƒç»„</h2><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><blockquote>
<h4 id="list"><a href="#list" class="headerlink" title="#list"></a><a href="http://nanarino.metoyun.com/py/5-åˆ—è¡¨å’Œå…ƒç»„.html#list" target="_blank" rel="noopener">#</a>list</h4><p>å¯è¿­ä»£ç±»å‹ å¯å˜ç±»å‹ æœ‰åºç±»å‹</p>
<p>ä½¿ç”¨æ–¹æ‹¬å·æ¥åˆ›å»ºåˆ—è¡¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">li = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>]</span><br></pre></td></tr></table></figure></div>
</blockquote>
<a id="more"></a>

<h4 id="ç´¢å¼•å’Œåˆ‡ç‰‡"><a href="#ç´¢å¼•å’Œåˆ‡ç‰‡" class="headerlink" title="ç´¢å¼•å’Œåˆ‡ç‰‡"></a>ç´¢å¼•å’Œåˆ‡ç‰‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;li[<span class="number">0</span>]</span><br><span class="line"><span class="string">'a'</span></span><br><span class="line">&gt;&gt;&gt;li[<span class="number">1</span>:<span class="number">2</span>]</span><br><span class="line">[<span class="string">'b'</span>]</span><br></pre></td></tr></table></figure></div>

<p>ä¸å­—ç¬¦ä¸²åˆ‡ç‰‡åŠŸèƒ½ä¸åŒä¹‹å¤„ï¼š</p>
<ul>
<li>è¿›è¡Œè·å–ã€åˆ‡ç‰‡ã€èµ‹å€¼ç»™å…¶ä»–å˜é‡ç­‰ ï¼ˆgetitemï¼‰å¾—åˆ°çš„æ˜¯å…¶æµ…æ‹·è´</li>
<li>è¿›è¡Œç›´æ¥èµ‹å€¼ï¼ˆsetitemï¼‰åˆ™ä¼šæ”¹å˜åŸåˆ—è¡¨</li>
</ul>
<h4 id="getitemæ“ä½œ"><a href="#getitemæ“ä½œ" class="headerlink" title="getitemæ“ä½œ"></a>getitemæ“ä½œ</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">a[:<span class="number">1</span>][<span class="number">0</span>] = <span class="number">5</span></span><br><span class="line">print(a)</span><br><span class="line"><span class="comment">#æ‰“å°ç»“æœ[1,2]</span></span><br></pre></td></tr></table></figure></div>

<h4 id="setitemæ“ä½œ"><a href="#setitemæ“ä½œ" class="headerlink" title="setitemæ“ä½œ"></a>setitemæ“ä½œ</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">a[:<span class="number">1</span>] = [<span class="number">5</span>]</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment">#æ‰“å°ç»“æœ[5,2]</span></span><br></pre></td></tr></table></figure></div>

<p>å…³äºåˆ‡ç‰‡</p>
<p>å¯ä»¥åœ¨å­¦ä¹ é¢å‘å¯¹è±¡çš„é­”æœ¯æ–¹æ³•åå†æ·±å…¥ç ”ç©¶</p>
<h4 id="æ“ä½œç¬¦"><a href="#æ“ä½œç¬¦" class="headerlink" title="æ“ä½œç¬¦"></a>æ“ä½œç¬¦</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">[]+[]  <span class="comment">#æ‹¼åˆ</span></span><br><span class="line">[]*int  <span class="comment">#é‡å¤</span></span><br><span class="line">item <span class="keyword">in</span> [] <span class="comment">#åˆ¤æ–­æˆå‘˜æ˜¯å¦å­˜åœ¨ è¿”å›å¸ƒå°”å€¼</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¸¸ç”¨å†…ç½®å‡½æ•°"><a href="#å¸¸ç”¨å†…ç½®å‡½æ•°" class="headerlink" title="å¸¸ç”¨å†…ç½®å‡½æ•°"></a>å¸¸ç”¨å†…ç½®å‡½æ•°</h4><ul>
<li><code>len(list)</code> è·å–é•¿åº¦</li>
<li><code>list()</code> è½¬åŒ–ä¸ºåˆ—è¡¨ç±»å‹</li>
<li><code>max()</code>/<code>min()</code>æ±‚æœ€å€¼ï¼Œå¯é€‰å‚æ•°keyè¿›è¡Œæ“ä½œ</li>
<li><code>reversed(list)</code>ä¸´æ—¶ç¿»è½¬ï¼Œä¸é™äºåˆ—è¡¨</li>
<li><code>sorted(iterable)</code>ä¸´æ—¶æ’åºï¼Œä¸é™äºåˆ—è¡¨ ï¼Œå¯é€‰keyå’Œå€’åºã€‚</li>
<li><code>sum</code>æ‰€æœ‰æˆå‘˜æ˜¯æ•°å­—çš„æ—¶å€™å¯ç”¨ï¼Œæ±‚å’Œï¼Œä¸é™äºåˆ—è¡¨</li>
</ul>
<h4 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><ul>
<li><code>&#39;&#39;.join(list)</code> å°†åˆ—è¡¨è½¬ä¸ºå­—ç¬¦ä¸²</li>
<li><code>.count(value)</code>è®¡æ¬¡</li>
<li><code>.copy()</code>æµ…æ‹·è´ï¼Œå’Œåˆ‡ç‰‡<code>[:]</code>ç­‰æ•ˆ</li>
</ul>
<h5 id="å¢åˆ æ”¹æŸ¥"><a href="#å¢åˆ æ”¹æŸ¥" class="headerlink" title="å¢åˆ æ”¹æŸ¥"></a>å¢åˆ æ”¹æŸ¥</h5><ul>
<li><code>.append(p)</code> è¿½åŠ </li>
<li><code>.extend(iterable)</code>è¿­ä»£è¿½åŠ </li>
<li><code>.insert(index,obj)</code>æ’å…¥</li>
<li><code>.pop(index=-1)</code> åˆ é™¤é»˜è®¤æœ€åä¸€ä¸ª å¹¶è¿”å›å®ƒçš„å€¼</li>
<li><code>.remove(value)</code> åˆ é™¤</li>
<li><code>del</code> åˆ é™¤ ç´¢å¼•/åˆ‡ç‰‡</li>
<li><code>.clear()</code> æ¸…ç©º</li>
<li><code>.index(value)</code>æŸ¥è¯¢æ˜¯å¦å­˜åœ¨,ä¸å­˜åœ¨ä¼šæŠ¥é”™</li>
</ul>
<h5 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h5><p><code>.sort()</code>æ°¸ä¹…æ’åº<br><code>.reverse()</code>å€’åºï¼Œç›¸å½“äº<code>li[:] = li[::-1]</code>çš„æ•ˆæœ</p>
<p>.sort()å³list.sort(self)æ–¹æ³•ï¼Œå’Œå…¨å±€å‡½æ•°sorted(iterable)</p>
<p>å®ƒä»¬æœ¬è´¨æ˜¯<strong>å¿«æ’ç®—æ³•</strong>ä¸¤ä¸¤æ¯”è¾ƒå¤§å°<br>å®ƒä»¬çš„å‚æ•°å®Œå…¨ä¸€è‡´ï¼ˆsortedä¸é™äºåˆ—è¡¨ï¼‰ã€‚ä¸åŒçš„æ˜¯ï¼š<br>åˆ—è¡¨çš„sortæ–¹æ³•æ— è¿”å›å€¼ï¼Œç›´æ¥ä¿®æ”¹self<br>å†…ç½®å‡½æ•°sortedï¼Œè¿”å›ä¸´æ—¶æ’åºåçš„åˆ—è¡¨</p>
<h3 id="æˆå‘˜èµ‹å€¼"><a href="#æˆå‘˜èµ‹å€¼" class="headerlink" title="æˆå‘˜èµ‹å€¼"></a>æˆå‘˜èµ‹å€¼</h3><h4 id="é€ä¸ªèµ‹å€¼"><a href="#é€ä¸ªèµ‹å€¼" class="headerlink" title="é€ä¸ªèµ‹å€¼"></a>é€ä¸ªèµ‹å€¼</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a, b, c = arr</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>b</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></div>

<h4 id="è·å–å‰©ä½™"><a href="#è·å–å‰©ä½™" class="headerlink" title="è·å–å‰©ä½™"></a>è·å–å‰©ä½™</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>arr1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c, *d, e = arr1</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>c</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d</span><br><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e</span><br><span class="line"><span class="number">9</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

<p>æ­¤æ–¹æ³•ä¸é™äºåˆ—è¡¨</p>
<h3 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h3><blockquote>
<h4 id="tuple"><a href="#tuple" class="headerlink" title="#tuple"></a><a href="http://nanarino.metoyun.com/py/5-åˆ—è¡¨å’Œå…ƒç»„.html#tuple" target="_blank" rel="noopener">#</a>tuple</h4><p>å¯è¿­ä»£ç±»å‹ ä¸å¯å˜ç±»å‹ æœ‰åºç±»å‹</p>
<p>å…ƒç»„ä¸­åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¿…é¡»åœ¨æœ«å°¾å…ƒç´ åé¢æ·»åŠ é€—å· ï¼ˆæ¨èæ‰€æœ‰æƒ…å†µéƒ½åŠ é€—å·ï¼‰<br>åˆ›å»ºå…ƒç»„ä½¿ç”¨å°æ‹¬å·</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">tup = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>,)</span><br></pre></td></tr></table></figure></div>
</blockquote>
<h4 id="ç´¢å¼•å’Œåˆ‡ç‰‡-1"><a href="#ç´¢å¼•å’Œåˆ‡ç‰‡-1" class="headerlink" title="ç´¢å¼•å’Œåˆ‡ç‰‡"></a>ç´¢å¼•å’Œåˆ‡ç‰‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;tup[<span class="number">1</span>]</span><br><span class="line"><span class="number">2</span></span><br><span class="line">&gt;&gt;&gt;tup[:<span class="number">1</span>]</span><br><span class="line">(<span class="number">1</span>,)</span><br></pre></td></tr></table></figure></div>

<p>å’Œå­—ç¬¦ä¸²çš„ç´¢å¼•å’Œåˆ‡ç‰‡æ“ä½œå‡ ä¹ä¸€æ ·ã€‚<br>å…ƒç»„çš„åˆ‡ç‰‡å’Œç´¢å¼•<strong>åªè¯»</strong>ï¼ˆåªæœ‰getitemæ“ä½œï¼‰ã€‚</p>
<p>å†…ç½®å‡½æ•°<code>tuple()</code>å¯ä»¥å°†å¯¹è±¡è½¬åŒ–ä¸ºå…ƒç»„</p>
<h4 id="å¸¸ç”¨æ–¹æ³•-1"><a href="#å¸¸ç”¨æ–¹æ³•-1" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><ul>
<li><code>.count()</code></li>
<li><code>.index()</code></li>
</ul>
<p>å¯¹è±¡æ–¹æ³•æ˜¯è¿”å›æ–°çš„å¯¹è±¡è¿˜æ˜¯ä¿®æ”¹å¯¹è±¡æœ¬èº«</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºå¯å˜ç±»å‹ å¯¹è±¡æ–¹æ³•å¦‚<code>list.sort()</code>ä¼šå½±å“åˆ°selfæœ¬èº«<br>è€Œå¯¹äºä¸å¯å˜ç±»å‹ï¼Œå¯¹è±¡æ–¹æ³•å¦‚<code>str.replace()</code>ä¼šè¿”å›ä¸€ä¸ªé¢„æœŸçš„æ–°å¯¹è±¡</p>
<h3 id="å†…ç½®å‡½æ•°enumerate"><a href="#å†…ç½®å‡½æ•°enumerate" class="headerlink" title="å†…ç½®å‡½æ•°enumerate()"></a>å†…ç½®å‡½æ•°enumerate()</h3><p><code>for i in åˆ—è¡¨</code> åªèƒ½éå†å‡ºåˆ—è¡¨æˆå‘˜ï¼Œå¦‚æœéœ€è¦åŒæ—¶éå†å‡ºç´¢å¼•å¯ä»¥ä½¿ç”¨ï¼š<br><code>enumerate(sequence, [start=0])</code> æ„ä¸ºæšä¸¾ï¼Œå°†ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼ŒåŒæ—¶åˆ—å‡ºæ•°æ®å’Œæ•°æ®ä¸‹æ ‡<br>å¯ä»¥ç”¨list()å‡½æ•°æŠŠenumerate()è¿”å›çš„æšä¸¾å¯¹è±¡è½¬ä¸ºä¸€ä¸ªåˆ—è¡¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;li = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]</span><br><span class="line">&gt;&gt;&gt;list(enumerate(li))</span><br><span class="line">[(<span class="number">0</span>, <span class="string">'a'</span>), (<span class="number">1</span>, <span class="string">'b'</span>), (<span class="number">2</span>, <span class="string">'c'</span>)]</span><br></pre></td></tr></table></figure></div>

<p>ä¸€èˆ¬ç›´æ¥åœ¨forå¾ªç¯ä¸­ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">namelist = [<span class="string">'å¤è‰²ç¥­'</span>,<span class="string">'èµ¤äº•å¿ƒ'</span>,<span class="string">'æ¹Šé˜¿å¤¸'</span>]</span><br><span class="line"><span class="keyword">for</span> i, name <span class="keyword">in</span> enumerate(namelist):</span><br><span class="line">	print(i,name)</span><br><span class="line"></span><br><span class="line"><span class="string">'''æ‰“å°å†…å®¹</span></span><br><span class="line"><span class="string">0 å¤è‰²ç¥­</span></span><br><span class="line"><span class="string">1 èµ¤äº•å¿ƒ</span></span><br><span class="line"><span class="string">2 æ¹Šé˜¿å¤¸</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>

<h3 id="å†…ç½®å‡½æ•°slice"><a href="#å†…ç½®å‡½æ•°slice" class="headerlink" title="å†…ç½®å‡½æ•°slice()"></a>å†…ç½®å‡½æ•°slice()</h3><p>æ„ä¸ºåˆ‡ç‰‡<br><code>slice(stop)</code><br><code>slice(start, stop[, step])</code></p>
<p>å®ä¾‹åŒ–ä¸€ä¸ªåˆ‡ç‰‡å¯¹è±¡ï¼Œç”¨æ¥ä»£æ›¿åˆ‡ç‰‡ä¸­çš„ä¸­æ‹¬å·å†…çš„å†…å®¹</p>
<ul>
<li>start â€“ èµ·å§‹ä½ç½®</li>
<li>stop â€“ ç»“æŸä½ç½®</li>
<li>step â€“ é—´è·</li>
</ul>
<p>åˆ‡ç‰‡å¯¹è±¡ç”¨ç´¢å¼•çš„å†™æ³•<code>[slice(1,2)]</code>å¯ä»¥è¾¾åˆ°åˆ‡ç‰‡çš„æ•ˆæœ<code>[1:2]</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = slice(<span class="number">10</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">slice(<span class="literal">None</span>, <span class="number">10</span>, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = slice(<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a)</span><br><span class="line">slice(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.start)</span><br><span class="line"><span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.stop)</span><br><span class="line"><span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(a.step)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>li[slice(<span class="number">2</span>,<span class="number">6</span>)]</span><br><span class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure></div>

<h3 id="å†…ç½®å‡½æ•°range"><a href="#å†…ç½®å‡½æ•°range" class="headerlink" title="å†…ç½®å‡½æ•°range()"></a>å†…ç½®å‡½æ•°range()</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SQL"><figure class="iseeu highlight /sql"><table><tr><td class="code"><pre><span class="line">range(<span class="keyword">stop</span>)<span class="string">`</span></span><br><span class="line"><span class="string">`</span><span class="keyword">range</span>(<span class="keyword">start</span>, <span class="keyword">stop</span>[, step])</span><br></pre></td></tr></table></figure></div>

<p>å‚æ•°ç±»ä¼¼åˆ‡ç‰‡ï¼Œå¯åˆ›å»ºä¸€ä¸ªæ•´æ•°åˆ—è¡¨ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨åœ¨forå¾ªç¯ä¸­ï¼Œ<br>ä¸€èˆ¬ç”¨æ¥å›ºå®šå¾ªç¯foræ¬¡æ•°ï¼Œä¸å…¶ä»–è¯­è¨€ä¸­çš„`for(i=0; iæ•ˆæœç›¸ä¼¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Python3.x ä¸­ range() å‡½æ•°è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°åºåˆ—çš„å¯è¿­ä»£å¯¹è±¡,è€Œä¸æ˜¯åˆ—è¡¨</span></span><br><span class="line"><span class="string">å¯ä»¥ç”¨list()å‡½æ•°æŠŠrange()è¿”å›çš„å¯è¿­ä»£å¯¹è±¡è½¬ä¸ºä¸€ä¸ªåˆ—è¡¨ </span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(range(<span class="number">5</span>))</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure></div>

<p>æ‰“å°ä¸€ä¸ªä¹ä¹ä¹˜æ³•è¡¨ï¼Œæ¥è¯•è¯•å§ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a=<span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>,i+<span class="number">1</span>):</span><br><span class="line">        a+=(str(j)+<span class="string">"Ã—"</span>+str(i)+<span class="string">"="</span>+str(j*i)+<span class="string">" "</span>)</span><br><span class="line">    a+=<span class="string">"\n"</span>   </span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(å)</title>
    <url>/blog/Python/Python_id_25.html</url>
    <content><![CDATA[<h2 id="æ•°å­—å’Œå­—ç¬¦ä¸²"><a href="#æ•°å­—å’Œå­—ç¬¦ä¸²" class="headerlink" title="æ•°å­—å’Œå­—ç¬¦ä¸²"></a>æ•°å­—å’Œå­—ç¬¦ä¸²</h2><h3 id="æ•°å­—"><a href="#æ•°å­—" class="headerlink" title="æ•°å­—"></a>æ•°å­—</h3><blockquote>
<p>å±äºä¸å¯å˜ç±»å‹</p>
<p>ä½¿ç”¨å­—é¢é‡ç›´æ¥åˆ›å»º åŒ…æ‹¬ï¼š<br>åè¿›åˆ¶æ•´å‹<code>int</code> æµ®ç‚¹å‹<code>float</code> å¤æ•°<code>complex</code> å¸ƒå°”å‹<code>bool</code></p>
</blockquote>
<a id="more"></a>

<h4 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h4><p>å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ä½¿ç”¨ç®—æœ¯è¿ç®—ç¬¦<code>+</code>, <code>-</code>, <code>*</code> å’Œ <code>/</code> å–æ¨¡<code>%</code><br>åœ¨æ•´æ•°é™¤æ³•ä¸­ï¼Œé™¤æ³• <code>/</code> æ€»æ˜¯è¿”å›ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œ<br>å¦‚æœåªæƒ³å¾—åˆ°æ•´æ•°çš„ç»“æœï¼Œä¸¢å¼ƒå¯èƒ½çš„åˆ†æ•°éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦ <code>//</code><br>ä½¿ç”¨ <code>**</code> æ“ä½œæ¥è¿›è¡Œå¹‚è¿ç®—<br>ä½è¿ç®—ç¬¦å’Œå…¶ä»–è¯­è¨€ä¸€æ · å·¦ç§»å³ç§»å¼‚æˆ–ç­‰</p>
<blockquote>
<p>åˆ©ç”¨ä½è¿ç®—å°†å˜é‡aå’Œbçš„å€¼äº¤æ¢</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a = a ^ b</span><br><span class="line">b = a ^ b</span><br><span class="line">a = a ^ b</span><br></pre></td></tr></table></figure></div>
</blockquote>
<h4 id="å¸¸è§å±æ€§"><a href="#å¸¸è§å±æ€§" class="headerlink" title="å¸¸è§å±æ€§"></a>å¸¸è§å±æ€§</h4><p><code>.real</code> å®éƒ¨<br><code>.imag</code> è™šéƒ¨ï¼ˆå­—é¢é‡çš„è™šæ•°å•ä½ä¸º<code>j</code>ï¼‰ã€‚<br>æ•´å‹ï¼š<code>.numerator</code> åˆ†å­ æ˜¯å®ƒæœ¬èº«ã€‚<br>æ•´å‹ï¼š<code>.denominator</code> åˆ†æ¯ æ’ä¸º1ã€‚</p>
<h4 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><p><code>.bit_length()</code> å¾—åˆ°æŒ‡å®šæ•°å€¼çš„äºŒè¿›åˆ¶çš„é•¿åº¦æ•°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">i = <span class="number">100</span></span><br><span class="line">print(i.bit_length())</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">                  bit_length</span></span><br><span class="line"><span class="string">1     0000 0001       1</span></span><br><span class="line"><span class="string">2     0000 0010       2</span></span><br><span class="line"><span class="string">3     0000 0011       2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¸¸ç”¨å†…ç½®å‡½æ•°"><a href="#å¸¸ç”¨å†…ç½®å‡½æ•°" class="headerlink" title="å¸¸ç”¨å†…ç½®å‡½æ•°"></a>å¸¸ç”¨å†…ç½®å‡½æ•°</h4><ul>
<li><code>abs()</code>æ±‚ç»å¯¹å€¼ å¤æ•°æ±‚æ¨¡</li>
<li><code>max()</code>/<code>min()</code>æ±‚æœ€å€¼</li>
<li><code>int(x)</code> å°†xè½¬æ¢ä¸ºä¸€ä¸ªæ•´æ•°</li>
<li><code>float(x)</code> å°†xè½¬æ¢åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°</li>
<li><code>pow(a,b)</code> ç›¸å½“äº<code>a**b</code></li>
<li><code>pow(a,b,c)</code> ç›¸å½“äº<code>a**b%c</code></li>
<li><code>round(num)</code> å››èˆäº”å…¥ï¼ˆå®é™…æ˜¯ä¸æ˜¯çœŸæ­£çš„å››èˆäº”å…¥ï¼Œæ˜¯ä»¥5.0ä¸ºç•Œï¼‰</li>
<li><code>divmod(è¢«é™¤æ•°,é™¤æ•°)</code> è¿”å›å…ƒç»„:<code>(å•†,ä½™æ•°)</code></li>
<li><code>complex(x, y)</code> ä»¥xä¸ºå®éƒ¨ï¼Œyä¸ºè™šéƒ¨ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªå¤æ•°</li>
</ul>
<h4 id="æœ‰å…³è¿›åˆ¶"><a href="#æœ‰å…³è¿›åˆ¶" class="headerlink" title="æœ‰å…³è¿›åˆ¶"></a>æœ‰å…³è¿›åˆ¶</h4><p>å…¶ä»–è¿›åˆ¶çš„<strong>å­—é¢é‡</strong>å¯ä»¥ç›´æ¥è½¬æ¢ä¸º<code>int</code>ç±»å‹ï¼Œä¹Ÿå¯ä»¥ç›¸äº’è¿ç®—</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0x29a</span></span><br><span class="line"><span class="number">666</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0x29a</span> - <span class="number">666</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure></div>

<p>å…¶ä»–è¿›åˆ¶çš„<strong>å­—ç¬¦ä¸²å­—é¢é‡</strong>ï¼Œæ— æ³•ç›´æ¥ç”±<code>str()</code>å‡½æ•°è·å¾—</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(<span class="number">0x29a</span>) == <span class="string">'0x29a'</span></span><br><span class="line"><span class="literal">False</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(<span class="number">0x29a</span>) == <span class="string">'666'</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<p>è¿›åˆ¶è½¬æ¢</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>bin(<span class="number">255</span>)</span><br><span class="line"><span class="string">'0b11111111'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>oct(<span class="number">255</span>)</span><br><span class="line"><span class="string">'0o377'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>hex(<span class="number">255</span>)</span><br><span class="line"><span class="string">'0xff'</span></span><br></pre></td></tr></table></figure></div>

<p>è‹¥å†…ç½®å‡½æ•° <code>int()</code> ä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°ï¼Œ<br><code>int(x, base)</code> åˆ™ç¬¬ä¸€ä¸ªå‚æ•°å¿…éœ€æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå…¶ç¬¬äºŒä¸ªå‚æ•°æ˜¯åŸè¿›åˆ¶ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>int(<span class="string">'0xff'</span>, <span class="number">16</span>)</span><br><span class="line"><span class="number">255</span></span><br></pre></td></tr></table></figure></div>

<table>
<thead>
<tr>
<th>è½¬æ¢ä¸ºâ†“</th>
<th>2è¿›åˆ¶</th>
<th>8è¿›åˆ¶</th>
<th>10è¿›åˆ¶</th>
<th>16è¿›åˆ¶</th>
</tr>
</thead>
<tbody><tr>
<td>2è¿›åˆ¶</td>
<td><code>x</code></td>
<td><code>bin(int(x, 8))</code></td>
<td><code>bin(int(x, 10))</code></td>
<td><code>bin(int(x, 16))</code></td>
</tr>
<tr>
<td>8è¿›åˆ¶</td>
<td><code>oct(int(x, 2))</code></td>
<td><code>x</code></td>
<td><code>oct(int(x, 10))</code></td>
<td><code>oct(int(x, 16))</code></td>
</tr>
<tr>
<td>10è¿›åˆ¶</td>
<td><code>int(x, 2)</code></td>
<td><code>int(x, 8)</code></td>
<td><code>x</code></td>
<td><code>int(x, 16)</code></td>
</tr>
<tr>
<td>16è¿›åˆ¶</td>
<td><code>hex(int(x, 2))</code></td>
<td><code>hex(int(x, 8))</code></td>
<td><code>hex(int(x, 10))</code></td>
<td><code>x</code></td>
</tr>
</tbody></table>
<h4 id="æœ‰å…³æ¨¡å—"><a href="#æœ‰å…³æ¨¡å—" class="headerlink" title="æœ‰å…³æ¨¡å—"></a>æœ‰å…³æ¨¡å—</h4><p><code>decimal</code>æ¨¡å—æä¾›äº† <code>Decimal</code> æ•°æ®ç±»å‹ç”¨äºæµ®ç‚¹æ•°è®¡ç®—ï¼Œæ‹¥æœ‰æ›´é«˜çš„ç²¾åº¦ç”¨æ¥è§£å†³å¦‚ä¸‹æƒ…å†µï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0.1</span> + <span class="number">0.2</span></span><br><span class="line"><span class="number">0.30000000000000004</span></span><br></pre></td></tr></table></figure></div>

<p>ä½†æ˜¯åœ¨ç²¾åº¦è¦æ±‚ä¸é«˜çš„æ—¶å€™å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æ ¼å¼åŒ–æ¥è§£å†³ã€‚</p>
<ul>
<li><code>math</code>æ¨¡å—ï¼šæä¾›åŸºæœ¬çš„ä¸‰è§’å‡½æ•°æŒ‡æ•°å¯¹æ•°ç­‰æ–¹æ³•,æ•°åŸŸåªåˆ°å®æ•°(è´Ÿæ•°ä¸èƒ½ç”¨å®ƒå¼€å¹³æ–¹)</li>
<li><code>cmath</code>æ¨¡å—ï¼šåŒ<code>math</code>æ¨¡å—, æ•°åŸŸæ‰©å……åˆ°å¤æ•° ,è¿˜æä¾›äº†è½¬æ¢æåæ ‡ç³»çš„æ–¹æ³•</li>
<li><code>numpy</code>æ¨¡å—ï¼šç”¨äºå¤æ‚çš„æ•°å­¦é—®é¢˜:æ’åˆ—ç»„åˆ çŸ©é˜µç­‰ è¿™é‡Œä¸è¿‡å¤šè®¨è®º</li>
</ul>
<h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><blockquote>
<h4 id="str"><a href="#str" class="headerlink" title="str"></a>str</h4><p>å¯è¿­ä»£ç±»å‹ ä¸å¯å˜ç±»å‹ æœ‰åºç±»å‹.</p>
<p>ä½¿ç”¨å­—é¢é‡å¼•å·(<code>&#39;</code>æˆ–<code>&quot;</code>)æ¥åˆ›å»ºå­—ç¬¦ä¸²<br>åœ¨python3ä¸­ï¼Œå­—ç¬¦ä¸²éƒ½æ˜¯Unicodeå­—ç¬¦ï¼Œç›¸å½“äºpython2ä¸­å­—é¢é‡å‰é¢åŠ <code>u</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">var1 = <span class="string">'æˆ‘æƒ³èµ·é«˜å…´çš„äº‹æƒ…!'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#python2ä¸­çš„ä¸­æ–‡å­—ç¬¦æœ€å¥½åœ¨å‰é¢åŠ u </span></span><br><span class="line"><span class="comment">#var1 = u'æˆ‘æƒ³èµ·é«˜å…´çš„äº‹æƒ…!'</span></span><br></pre></td></tr></table></figure></div>
</blockquote>
<h4 id="ç´¢å¼•å’Œåˆ‡ç‰‡"><a href="#ç´¢å¼•å’Œåˆ‡ç‰‡" class="headerlink" title="ç´¢å¼•å’Œåˆ‡ç‰‡"></a>ç´¢å¼•å’Œåˆ‡ç‰‡</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">var1[<span class="number">0</span>]</span><br><span class="line">var1[<span class="number">1</span>:<span class="number">5</span>]</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºåˆ‡ç‰‡ï¼š</p>
<ul>
<li>åˆ‡ç‰‡éµå¾ªå·¦é—­å³å¼€åŸåˆ™ã€‚</li>
<li>åˆ‡ç‰‡çš„å†’å·å·¦è¾¹ä¸å†™é»˜è®¤æ˜¯0ï¼Œå³è¾¹ä¸å†™é»˜è®¤æ˜¯é•¿åº¦-1ã€‚</li>
<li>åˆ‡ç‰‡è¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå†’å·<code>[::step]</code>ï¼Œä»£è¡¨é—´è·ï¼Œä¸º-1æ—¶å¯ä»¥å€’åºã€‚</li>
</ul>
<p>åˆ‡ç‰‡å’Œç´¢å¼•<strong>åªè¯»</strong>ï¼ˆåªæœ‰getitemæ“ä½œï¼‰</p>
<h4 id="è½¬ä¹‰å­—ç¬¦"><a href="#è½¬ä¹‰å­—ç¬¦" class="headerlink" title="è½¬ä¹‰å­—ç¬¦"></a>è½¬ä¹‰å­—ç¬¦</h4><p><code>\n</code>æ¢è¡Œã€ <code>\t</code>åˆ¶è¡¨ç¬¦é”®ç›˜çš„tabã€ <code>\\</code>åæ–œçº¿\ ã€ <code>\/</code>æ–œçº¿/</p>
<p><code>\&#39;</code> <code>\&quot;</code>å¼•å·å‰é¢çš„\æœ‰æ—¶å€™å¿…é¡»æœ‰ï¼Œæœ‰æ—¶å€™ä¸èƒ½æœ‰ï¼Œæœ‰æ—¶å€™æ˜¯å¯æœ‰å¯æ— çš„ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ç¬¬äºŒä¸ªå•å¼•å·å‰ä¸èƒ½æœ‰\</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'\\\\\'</span></span><br><span class="line"><span class="string">SyntaxError: EOL while scanning string literal</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#ç¬¬äºŒä¸ªå•å¼•å·å‰å¿…é¡»æœ‰\</span></span><br><span class="line"><span class="string">&gt;&gt;&gt; eval("'</span>\\\\\<span class="string">'")</span></span><br><span class="line"><span class="string">'</span>\\<span class="string">'</span></span><br></pre></td></tr></table></figure></div>

<p>ç”¨åŸå§‹å­—ç¬¦ä¸²å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å…³äºæ¢è¡Œ</p>
<p>æ¢è¡Œé£æ ¼æœ‰å¤šç§ï¼Œè½¬ä¹‰å­—ç¬¦ç»„åˆå„ä¸ç›¸åŒï¼Œå¯ä»¥å‚é˜…æœ‰å…³æ–‡æ¡£</p>
<h4 id="åŸå§‹å­—ç¬¦ä¸²"><a href="#åŸå§‹å­—ç¬¦ä¸²" class="headerlink" title="åŸå§‹å­—ç¬¦ä¸²"></a>åŸå§‹å­—ç¬¦ä¸²</h4><p>åœ¨å­—ç¬¦ä¸²çš„å‰é¢åŠ <code>r</code>å¯ä»¥æ˜¾ç¤ºåŸå§‹å­—ç¬¦ä¸²ï¼ˆRaw Stringï¼‰<br>åŸå§‹å­—ç¬¦ä¸²å¸¸è¢«ç”¨æ¥ä¹¦å†™æ­£åˆ™è¡¨è¾¾å¼</p>
<p>å†…ç½®å‡½æ•°<code>repr()</code>å¯ä»¥æŸ¥çœ‹åŸå§‹å­—ç¬¦ä¸²</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">r"\n"</span></span><br><span class="line"><span class="string">'\\n'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(<span class="string">r"\n"</span>)</span><br><span class="line">\n</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>repr(<span class="string">r"\n"</span>)</span><br><span class="line"><span class="string">"'\\\\n'"</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(repr(<span class="string">r"\n"</span>))</span><br><span class="line"><span class="string">'\\n'</span></span><br></pre></td></tr></table></figure></div>

<h4 id="äºŒè¿›åˆ¶å­—ç¬¦ä¸²"><a href="#äºŒè¿›åˆ¶å­—ç¬¦ä¸²" class="headerlink" title="äºŒè¿›åˆ¶å­—ç¬¦ä¸²"></a>äºŒè¿›åˆ¶å­—ç¬¦ä¸²</h4><p>å®é™…ä¸Šå®ƒå·²ç»ä¸æ˜¯<code>str</code>ç±»å‹ã€‚äºŒè¿›åˆ¶å­—ç¬¦ä¸²å­—é¢é‡åªåŒ…å«ASCIIå­—ç¬¦ã€‚<br>åœ¨å­—ç¬¦ä¸²çš„å‰é¢åŠ <code>b</code>å¯ä»¥å½“æˆäºŒè¿›åˆ¶å­—ç¬¦ä¸²è¯†åˆ«ï¼ˆBytes Stringï¼‰<br>ç­‰ä»·äºä½¿ç”¨å†…ç½®å‡½æ•°<code>bytes()</code>å’Œ<code>str.encode()</code>ã€‚</p>
<p><code>str</code>ç±»å‹è½¬åŒ–ä¸º<code>bytes</code>ç±»å‹çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">b'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span><span class="comment">#åªåŒ…å«ASCIIå­—ç¬¦ å¯ç›´æ¥åœ¨å­—ç¬¦ä¸²å‰é¢åŠ ä¸Šb</span></span><br><span class="line"><span class="string">b'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bytes(<span class="string">"eJwLKs3NTNRRKC7NzgQAF/kEBw=="</span>,<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">b'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span>.encode() <span class="comment">#é»˜è®¤utf-8</span></span><br><span class="line"><span class="string">b'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>str.encode(<span class="string">'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span>) <span class="comment">#åŒä¸Šï¼Œé™æ€æ–¹æ³•çš„å½¢å¼è°ƒç”¨</span></span><br><span class="line"><span class="string">b'eJwLKs3NTNRRKC7NzgQAF/kEBw=='</span></span><br></pre></td></tr></table></figure></div>

<p><code>bytes</code>ç±»å‹è½¬åŒ–ä¸º<code>str</code>ç±»å‹çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>str(<span class="string">b'\xe4\xbd\xa0\xe5\xa5\xbd'</span>,<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">'ä½ å¥½'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">b'\xe4\xbd\xa0\xe5\xa5\xbd'</span>.decode(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="string">'ä½ å¥½'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>bytes.decode(<span class="string">b'\xe4\xbd\xa0\xe5\xa5\xbd'</span>,<span class="string">'utf-8'</span>)<span class="comment">#åŒä¸Šï¼Œé™æ€æ–¹æ³•çš„å½¢å¼è°ƒç”¨</span></span><br><span class="line"><span class="string">'ä½ å¥½'</span></span><br></pre></td></tr></table></figure></div>

<p>é™æ€æ–¹æ³•çš„æ–¹å¼æ¥è°ƒç”¨</p>
<p>ç±»ä¸Šå®šä¹‰çš„å¯¹è±¡æ–¹æ³•ä»¥é™æ€æ–¹æ³•çš„å½¢å¼è°ƒç”¨ï¼Œåªéœ€è¦ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®ä¾‹å¯¹è±¡ï¼ˆ<code>self</code>ï¼‰å³å¯ã€‚<br>è¿™å°†åœ¨ä¼šåœ¨ä¹‹åé¢å‘å¯¹è±¡ç« èŠ‚ä¸­ä»‹ç»ã€‚</p>
<h4 id="è¿ç®—ç¬¦æ“ä½œ"><a href="#è¿ç®—ç¬¦æ“ä½œ" class="headerlink" title="è¿ç®—ç¬¦æ“ä½œ"></a>è¿ç®—ç¬¦æ“ä½œ</h4><ul>
<li><code>str+str</code> æ‹¼æ¥</li>
<li><code>str*int</code> é‡å¤æ‹¼æ¥</li>
<li><code>in</code> <code>not in</code>æ˜¯å¦åŒ…å«ç»™å®šçš„å­—ç¬¦</li>
<li><code>%</code> æ ¼å¼åŒ– åé¢ä¸“é—¨è®²</li>
</ul>
<h4 id="å¸¸ç”¨æ–¹æ³•-1"><a href="#å¸¸ç”¨æ–¹æ³•-1" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h4><ul>
<li><code>.encode()</code>ç¼–ç ï¼Œé»˜è®¤ç¼–ç ä¸ºutf-8ï¼Œæœ€ç»ˆè¿”å›å€¼æ˜¯bytesç±»å‹</li>
<li><code>.decode()</code>è§£ç ï¼Œ<strong>å·²åºŸå¼ƒ</strong>ï¼Œä½†python2ä¸­ä¾ç„¶å¯ç”¨æ¥è½¬æ¢ä¸­æ–‡ç­‰çš„ç¼–ç </li>
</ul>
<h5 id="æ›¿æ¢åˆ†å‰²"><a href="#æ›¿æ¢åˆ†å‰²" class="headerlink" title="æ›¿æ¢åˆ†å‰²"></a>æ›¿æ¢åˆ†å‰²</h5><p>ä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²ï¼Œåªä¼šè¿”å›é¢„æœŸçš„å­—ç¬¦ä¸²ã€‚</p>
<ul>
<li><code>.split(str)</code>ä»¥stråˆ†å‰²ä¸ºlistï¼Œä¸èƒ½ä¼ ç©ºå­—ç¬¦ä¸²ã€‚</li>
<li><code>.join(list)</code>(å°†å¯è¿­ä»£å¯¹è±¡)ä»¥å­—ç¬¦ä¸²æ‹¼æ¥</li>
<li><code>.replace()</code> æ›¿æ¢</li>
<li><code>.strip()</code> <code>.lstrip()</code> <code>.rstrip()</code>å»æ‰ä¸¤ç«¯ç©ºæ ¼/æŒ‡å®šå­—ç¬¦</li>
<li><code>.partition(str)</code>åˆ†å‰²è¿”å›å…ƒç»„</li>
<li><code>.translate</code>(ç¿»è¯‘è¡¨)è¿‡æ»¤</li>
</ul>
<h5 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h5><ul>
<li><code>.find(str)</code>æ‰¾ä¸åˆ°è¿”å›<code>-1</code></li>
<li><code>.index(str)</code>æ‰¾ä¸åˆ°æŠ¥é”™</li>
<li><code>.count(str)</code>è¿”å›å‡ºç°æ¬¡æ•°</li>
</ul>
<h5 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h5><ul>
<li><code>.format()</code>æ ¼å¼åŒ–å­—ç¬¦ä¸² åé¢ä¸“é—¨è®²</li>
<li><code>.expandtabs(int)</code>ç”¨åˆ¶è¡¨ç¬¦å ä½åˆ†ç»„</li>
<li><code>.zfill(2)</code> ä¸è¶³ä¸¤ä½å¼€å¤´è¡¥0ï¼ŒåŠŸèƒ½ä¸<code>&#39;%02d&#39;%num</code>ä¸€æ ·</li>
<li><code>.center()</code> <code>.ljust()</code> <code>.rjust()</code> å‡ ç§å¡«å……æ–¹æ³•</li>
</ul>
<h5 id="å¤§å°è½¬æ¢"><a href="#å¤§å°è½¬æ¢" class="headerlink" title="å¤§å°è½¬æ¢"></a>å¤§å°è½¬æ¢</h5><ul>
<li><code>.swapcase()</code>å¤§å°å†™ç¿»è½¬</li>
<li><code>.title()</code>é¦–å­—æ¯å¤§å†™</li>
<li><code>.capitalize()</code>é¦–å­—æ¯å¤§å†™</li>
<li><code>.upper()</code>å…¨éƒ¨ç½—é©¬å­—å¤§å†™</li>
<li><code>.lower()</code>å…¨éƒ¨ç½—é©¬å­—å°å†™</li>
<li><code>.casefold()</code>å…¨éƒ¨å­—ç¬¦å°å†™</li>
</ul>
<p>æ›´å¤šæ–¹æ³•å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•°<code>dir()</code>æ¥æŸ¥çœ‹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>dir(str)</span><br><span class="line">[<span class="string">'__add__'</span>, <span class="string">'__class__'</span>, <span class="string">'__contains__'</span>, <span class="string">'__delattr__'</span>, <span class="string">'__dir__'</span>, <span class="string">'__doc__'</span>, <span class="string">'__eq__'</span>,</span><br><span class="line"> <span class="string">'__format__'</span>, <span class="string">'__ge__'</span>, <span class="string">'__getattribute__'</span>, <span class="string">'__getitem__'</span>, <span class="string">'__getnewargs__'</span>, <span class="string">'__gt__'</span>,</span><br><span class="line"> <span class="string">'__hash__'</span>, <span class="string">'__init__'</span>, <span class="string">'__init_subclass__'</span>, <span class="string">'__iter__'</span>, <span class="string">'__le__'</span>, <span class="string">'__len__'</span>, <span class="string">'__lt__'</span>,</span><br><span class="line"> <span class="string">'__mod__'</span>, <span class="string">'__mul__'</span>, <span class="string">'__ne__'</span>, <span class="string">'__new__'</span>, <span class="string">'__reduce__'</span>, <span class="string">'__reduce_ex__'</span>, <span class="string">'__repr__'</span>,</span><br><span class="line"> <span class="string">'__rmod__'</span>, <span class="string">'__rmul__'</span>, <span class="string">'__setattr__'</span>, <span class="string">'__sizeof__'</span>, <span class="string">'__str__'</span>, <span class="string">'__subclasshook__'</span>,</span><br><span class="line"> <span class="string">'capitalize'</span>, <span class="string">'casefold'</span>, <span class="string">'center'</span>, <span class="string">'count'</span>, <span class="string">'encode'</span>, <span class="string">'endswith'</span>, <span class="string">'expandtabs'</span>, <span class="string">'find'</span>,</span><br><span class="line"> <span class="string">'format'</span>, <span class="string">'format_map'</span>, <span class="string">'index'</span>, <span class="string">'isalnum'</span>, <span class="string">'isalpha'</span>, <span class="string">'isascii'</span>, <span class="string">'isdecimal'</span>,</span><br><span class="line"> <span class="string">'isdigit'</span>, <span class="string">'isidentifier'</span>, <span class="string">'islower'</span>, <span class="string">'isnumeric'</span>, <span class="string">'isprintable'</span>, <span class="string">'isspace'</span>, <span class="string">'istitle'</span>,</span><br><span class="line"> <span class="string">'isupper'</span>, <span class="string">'join'</span>, <span class="string">'ljust'</span>, <span class="string">'lower'</span>, <span class="string">'lstrip'</span>, <span class="string">'maketrans'</span>, <span class="string">'partition'</span>, <span class="string">'replace'</span>,</span><br><span class="line"> <span class="string">'rfind'</span>, <span class="string">'rindex'</span>, <span class="string">'rjust'</span>, <span class="string">'rpartition'</span>, <span class="string">'rsplit'</span>, <span class="string">'rstrip'</span>, <span class="string">'split'</span>, <span class="string">'splitlines'</span>,</span><br><span class="line"> <span class="string">'startswith'</span>, <span class="string">'strip'</span>, <span class="string">'swapcase'</span>, <span class="string">'title'</span>, <span class="string">'translate'</span>, <span class="string">'upper'</span>, <span class="string">'zfill'</span>]</span><br></pre></td></tr></table></figure></div>

<p><code>isdigit()</code> æ˜¯å¦çº¯æ•°å­— <code>isascii()</code> æ˜¯å¦çº¯asciiå­—ç¬¦ ç­‰ã€‚ã€‚ã€‚</p>
<h4 id="ç›¸å…³çš„å†…ç½®å‡½æ•°"><a href="#ç›¸å…³çš„å†…ç½®å‡½æ•°" class="headerlink" title="ç›¸å…³çš„å†…ç½®å‡½æ•°"></a>ç›¸å…³çš„å†…ç½®å‡½æ•°</h4><ul>
<li><code>repr()</code>è½¬åŒ–ä¸ºåŸå§‹å­—ç¬¦ä¸²ç±»å‹ï¼ˆè°ƒç”¨é­”æœ¯æ–¹æ³•<code>__repr__</code>ï¼‰</li>
<li><code>str()</code>è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼ˆè°ƒç”¨é­”æœ¯æ–¹æ³•<code>__str__</code>ï¼Œä¸å­˜åœ¨åˆ™è°ƒç”¨<code>__repr__</code>ï¼‰<br>å°†äºŒè¿›åˆ¶å­—ç¬¦ä¸²è½¬ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼š<code>str(msg,&#39;utf-8&#39;)</code></li>
<li><code>len(var1)</code>è¿”å›å­—ç¬¦ä¸²é•¿åº¦</li>
<li><code>bytes(str, encoding=&#39;utf-8&#39;)</code>ç¼–ç </li>
<li><code>print()</code>åœ¨æ§åˆ¶å°ä¸­è°ƒç”¨<code>__str__</code>å¹¶æ˜¾ç¤º</li>
</ul>
<h4 id="for-in-ä¸­ä½¿ç”¨å­—ç¬¦ä¸²"><a href="#for-in-ä¸­ä½¿ç”¨å­—ç¬¦ä¸²" class="headerlink" title="for in ä¸­ä½¿ç”¨å­—ç¬¦ä¸²"></a>for in ä¸­ä½¿ç”¨å­—ç¬¦ä¸²</h4><p>å¾ªç¯å­—ç¬¦ä¸²ï¼Œå°†ä¼šé€ä¸ªå­—ç¬¦çš„æ‰“å°ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a = <span class="string">'ä½ æƒ³åƒæ¡ƒå­'</span></span><br><span class="line"><span class="keyword">for</span> char <span class="keyword">in</span> a:</span><br><span class="line">	print(char)</span><br></pre></td></tr></table></figure></div>

<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">print(<span class="string">'\n'</span>.join(<span class="string">'ä½ æƒ³åƒæ¡ƒå­'</span>))</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¹)</title>
    <url>/blog/Python/Python_id_24.html</url>
    <content><![CDATA[<h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><h3 id="å¼‚å¸¸ç±»"><a href="#å¼‚å¸¸ç±»" class="headerlink" title="å¼‚å¸¸ç±»"></a>å¼‚å¸¸ç±»</h3><p>Python2åœ¨exceptionsæ¨¡å—å†…å»ºäº†å¾ˆå¤šçš„å¼‚å¸¸ç±»å‹ï¼Œé€šè¿‡ä½¿ç”¨dirå‡½æ•°æ¥æŸ¥çœ‹exceptionsä¸­çš„å¼‚å¸¸ç±»å‹ï¼Œå¦‚ä¸‹ï¼š</p>
<a id="more"></a>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python27</span></span><br><span class="line"><span class="keyword">import</span> exceptions</span><br><span class="line"><span class="keyword">print</span> dir(exceptions)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">===</span></span><br><span class="line"><span class="string">['ArithmeticError', 'AssertionError', 'AttributeError',</span></span><br><span class="line"><span class="string">'BaseException', 'BufferError', 'BytesWarning',</span></span><br><span class="line"><span class="string">'DeprecationWarning', 'EOFError', 'EnvironmentError',</span></span><br><span class="line"><span class="string">'Exception', 'FloatingPointError', 'FutureWarning',</span></span><br><span class="line"><span class="string">'GeneratorExit', 'IOError', 'ImportError', 'ImportWarning',</span></span><br><span class="line"><span class="string">'IndentationError', 'IndexError', 'KeyError',</span></span><br><span class="line"><span class="string">'KeyboardInterrupt', 'LookupError', 'MemoryError',</span></span><br><span class="line"><span class="string">'NameError', 'NotImplementedError', 'OSError',</span></span><br><span class="line"><span class="string">'OverflowError', 'PendingDeprecationWarning',</span></span><br><span class="line"><span class="string">'ReferenceError', 'RuntimeError', 'RuntimeWarning',</span></span><br><span class="line"><span class="string">'StandardError', 'StopIteration', 'SyntaxError',</span></span><br><span class="line"><span class="string">'SyntaxWarning', 'SystemError', 'SystemExit',</span></span><br><span class="line"><span class="string">'TabError', 'TypeError', 'UnboundLocalError',</span></span><br><span class="line"><span class="string">'UnicodeDecodeError', 'UnicodeEncodeError',</span></span><br><span class="line"><span class="string">'UnicodeError', 'UnicodeTranslateError', 'UnicodeWarning',</span></span><br><span class="line"><span class="string">'UserWarning', 'ValueError', 'Warning',</span></span><br><span class="line"><span class="string">'ZeroDivisionError', '__doc__', '__name__', '__package__']</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨python3ä¸­å®ƒä»¬æ˜¯å…¨å±€çš„ã€‚</p>
<h4 id="æ•è·å¼‚å¸¸å’Œè·å–å¼‚å¸¸ä¿¡æ¯"><a href="#æ•è·å¼‚å¸¸å’Œè·å–å¼‚å¸¸ä¿¡æ¯" class="headerlink" title="æ•è·å¼‚å¸¸å’Œè·å–å¼‚å¸¸ä¿¡æ¯"></a>æ•è·å¼‚å¸¸å’Œè·å–å¼‚å¸¸ä¿¡æ¯</h4><p>å’ŒC#ä¸­çš„try/catchç±»ä¼¼ï¼ŒPythonä¸­ä½¿ç”¨try/exceptå…³é”®å­—æ¥æ•æ‰å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">2</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    print(<span class="string">'é™¤æ•°ä¸èƒ½ä¸º0'</span>)</span><br></pre></td></tr></table></figure></div>

<p>åœ¨ä¸€ä¸ªexceptè¯­å¥åªæ•æ‰å…¶åå£°æ˜çš„å¼‚å¸¸ç±»å‹ï¼Œå¦‚æœå¯èƒ½ä¼šæŠ›å‡ºçš„æ˜¯å…¶ä»–ç±»å‹çš„å¼‚å¸¸å°±éœ€è¦å†å¢åŠ ä¸€ä¸ªexceptè¯­å¥äº†ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªæ›´é€šç”¨çš„å¼‚å¸¸ç±»å‹æ¯”å¦‚ï¼šExceptionï¼Œ(ä¹Ÿå¯ä»¥ä¸æ¥ä»»ä½•å¼‚å¸¸å’Œå‚æ•°ç›´æ¥æ•è·,ä½†æ˜¯pycharmä¼šç»™å‡ºä¸€ä¸ªè­¦å‘Šçš„) å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">2</span>/<span class="string">'0'</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    print(<span class="string">'é™¤æ•°ä¸èƒ½ä¸º0'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception:</span><br><span class="line">    print(<span class="string">'å…¶ä»–ç±»å‹å¼‚å¸¸'</span>)</span><br></pre></td></tr></table></figure></div>

<p>æ¯ä¸ªå¼‚å¸¸éƒ½ä¼šæœ‰ä¸€äº›å¼‚å¸¸ä¿¡æ¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›å¼‚å¸¸ä¿¡æ¯è®°å½•ä¸‹æ¥ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">2</span>/<span class="string">'0'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:    <span class="comment"># Exceptionä½ç½®ä¹Ÿå¯ä»¥æ”¾ä¸€ä¸ªé”™è¯¯ç±»å…ƒç»„</span></span><br><span class="line">    <span class="comment"># unsupported operand type(s) for /: 'int' and 'str'</span></span><br><span class="line">    print(e)</span><br></pre></td></tr></table></figure></div>

<p>finallyå­å¥å’Œtryå­å¥è”åˆä½¿ç”¨ä½†æ˜¯å’Œexceptè¯­å¥ä¸åŒï¼Œfinallyä¸ç®¡tryå­å¥å†…éƒ¨æ˜¯å¦æœ‰å¼‚å¸¸å‘ç”Ÿï¼Œéƒ½ä¼šæ‰§è¡Œfinallyå­å¥å†…çš„ä»£ç ã€‚æ‰€æœ‰ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œfinallyè‡ªå·±å¸¸å¸¸ç”¨äºå…³é—­æ–‡ä»¶æˆ–è€…åœ¨socketä¸­ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    print(<span class="number">2</span>/<span class="string">'0'</span>)</span><br><span class="line"><span class="keyword">except</span> (ZeroDivisionError,Exception):</span><br><span class="line">    print(<span class="string">'å‘ç”Ÿäº†ä¸€ä¸ªå¼‚å¸¸'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'æ­£å¸¸å¾—å‡ºäº†è®¡ç®—ç»“æœ'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    print(<span class="string">'ä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸éƒ½æ‰§è¡Œ'</span>)</span><br></pre></td></tr></table></figure></div>

<h4 id="æŠ›å‡ºå¼‚å¸¸å’Œè‡ªå®šä¹‰å¼‚å¸¸"><a href="#æŠ›å‡ºå¼‚å¸¸å’Œè‡ªå®šä¹‰å¼‚å¸¸" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸å’Œè‡ªå®šä¹‰å¼‚å¸¸"></a>æŠ›å‡ºå¼‚å¸¸å’Œè‡ªå®šä¹‰å¼‚å¸¸</h4><p>Pythonä¸­çš„raiseå…³é”®å­—ç”¨äºå¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼ŒåŸºæœ¬ä¸Šå’ŒC#å’ŒJavaä¸­çš„throwå…³é”®å­—ç›¸åŒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ThorwErr</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">"æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸"</span>) </span><br><span class="line"><span class="comment"># Exception: æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ </span></span><br><span class="line">ThorwErr()</span><br></pre></td></tr></table></figure></div>

<p>raiseå…³é”®å­—åé¢æ˜¯æŠ›å‡ºæ˜¯ä¸€ä¸ªé€šç”¨çš„å¼‚å¸¸ç±»å‹(Exception)ï¼Œä¸€èˆ¬æ¥è¯´æŠ›å‡ºçš„å¼‚å¸¸è¶Šè¯¦ç»†è¶Šå¥½ã€‚<br>æ•æ‰åˆ°äº†å¼‚å¸¸ï¼Œä½†æ˜¯åˆæƒ³é‡æ–°å¼•å‘å®ƒ(ä¼ é€’å¼‚å¸¸)ï¼Œå¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„raiseè¯­å¥å³å¯ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MuffledCalculator</span>:</span></span><br><span class="line">    muffled = <span class="literal">False</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calc</span><span class="params">(self,expr)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> eval(expr)</span><br><span class="line">        <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">            <span class="keyword">if</span> self.muffled:</span><br><span class="line">                print(<span class="string">'Division by zero is illegal'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span></span><br></pre></td></tr></table></figure></div>

<p>Pythonä¸­ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„ç‰¹æ®Šç±»å‹çš„å¼‚å¸¸ï¼Œåªéœ€è¦è¦ä»Exceptionç±»ç»§æ‰¿(ç›´æ¥æˆ–é—´æ¥)å³å¯</p>
<h3 id="è­¦å‘Šç±»"><a href="#è­¦å‘Šç±»" class="headerlink" title="è­¦å‘Šç±»"></a>è­¦å‘Šç±»</h3><p>å’Œå¼‚å¸¸ç±»çš„exceptionsæ¨¡å—ä¸€æ ·ï¼Œè­¦å‘Šç±»å‹åœ¨warningsæ¨¡å—ä¸­ï¼Œ<br>ä½†æ˜¯äº‹å®ä¸ŠWarningåŸºç±»æ˜¯ExceptionåŸºç±»çš„å­ç±»ã€‚</p>
<h4 id="å‘å‡ºè­¦å‘Š"><a href="#å‘å‡ºè­¦å‘Š" class="headerlink" title="å‘å‡ºè­¦å‘Š"></a>å‘å‡ºè­¦å‘Š</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line">warnings.warn(<span class="string">'ä½¿ç”¨äº†å·²å¼ƒç”¨åŠŸèƒ½'</span>, DeprecationWarning)</span><br></pre></td></tr></table></figure></div>

<h4 id="å¿½ç•¥è­¦å‘Š"><a href="#å¿½ç•¥è­¦å‘Š" class="headerlink" title="å¿½ç•¥è­¦å‘Š"></a>å¿½ç•¥è­¦å‘Š</h4><p>è°ƒç”¨ <code>filterwarnings()</code> å°†è§„åˆ™æ·»åŠ åˆ°è­¦å‘Šè¿‡æ»¤å™¨ï¼Œ<code>simplefilter()</code>æ˜¯å…¶ç®€æ˜“ç‰ˆã€‚<br>è°ƒç”¨ <code>resetwarnings()</code> å°†è­¦å‘Šè¿‡æ»¤å™¨é‡ç½®ä¸ºé»˜è®¤çŠ¶æ€ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.simplefilter(<span class="string">"ignore"</span>)</span><br></pre></td></tr></table></figure></div>

<h4 id="è­¦å‘Šä¸Šå‡ä¸ºå¼‚å¸¸"><a href="#è­¦å‘Šä¸Šå‡ä¸ºå¼‚å¸¸" class="headerlink" title="è­¦å‘Šä¸Šå‡ä¸ºå¼‚å¸¸"></a>è­¦å‘Šä¸Šå‡ä¸ºå¼‚å¸¸</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.simplefilter(<span class="string">"error"</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸Šä¸‹æ–‡ç®¡ç†"><a href="#ä¸Šä¸‹æ–‡ç®¡ç†" class="headerlink" title="ä¸Šä¸‹æ–‡ç®¡ç†"></a>ä¸Šä¸‹æ–‡ç®¡ç†</h3><p>ä»¥ä¸‹å†…å®¹å¯èƒ½è¶…å‡ºç†è§£ï¼Œä»¥åè¯·å›çœ‹ã€‚</p>
<h4 id="with-as-è¯­å¥"><a href="#with-as-è¯­å¥" class="headerlink" title="with as è¯­å¥"></a>with as è¯­å¥</h4><p>åœ¨ä½¿ç”¨å†…ç½®å‡½æ•°<code>open()</code>è¯»å†™æ–‡ä»¶çš„æ—¶å€™éœ€è¦ç¹ççš„æ–¹æ³•æ¥æ•è·å¼‚å¸¸ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'1.txt'</span>)</span><br><span class="line">    f.read()</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">if</span> f:</span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure></div>

<p>å¤§å¯ä¸å¿…å¦‚æ­¤ï¼Œ<code>open()</code>è¿”å›çš„æ–‡ä»¶å¥æŸ„å¯¹è±¡å®ç°äº†ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œåªéœ€è¦ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'1.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.read()</span><br></pre></td></tr></table></figure></div>

<h4 id="å®ç°ä¸Šä¸‹æ–‡åè®®"><a href="#å®ç°ä¸Šä¸‹æ–‡åè®®" class="headerlink" title="å®ç°ä¸Šä¸‹æ–‡åè®®"></a>å®ç°ä¸Šä¸‹æ–‡åè®®</h4><p>å¯¹ä»»æ„å¯¹è±¡å®ç°ä¸Šä¸‹æ–‡ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡å®ç°é­”æœ¯æ–¹æ³•<code>__enter__</code>å’Œ<code>__exit__</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_value, traceback)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> exc_type:</span><br><span class="line">            print(traceback)</span><br></pre></td></tr></table></figure></div>

<p><code>__enter__</code>å’Œ<code>__exit__</code>ä¹Ÿå¯ä»¥å€Ÿç”±å†…ç½®æ¨¡å—<code>contextlib</code>çš„è£…é¥°æ¥å®ç°</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">open_a</span><span class="params">(name)</span>:</span></span><br><span class="line">    <span class="keyword">yield</span> A(name)</span><br></pre></td></tr></table></figure></div>

<h4 id="closing"><a href="#closing" class="headerlink" title="@closing"></a>@closing</h4><p>å¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰å®ç°ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å°±ä¸èƒ½æŠŠå®ƒç”¨äº<code>with</code>è¯­å¥ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥ç”¨<code>closing()</code>æ¥æŠŠè¯¥å¯¹è±¡å˜ä¸ºä¸Šä¸‹æ–‡å¯¹è±¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> closing</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> closing(urlopen(<span class="string">'https://www.python.org'</span>)) <span class="keyword">as</span> page:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> page:</span><br><span class="line">        print(line)</span><br></pre></td></tr></table></figure></div>

<h3 id="ç†”æ–­å™¨æ¨¡å¼"><a href="#ç†”æ–­å™¨æ¨¡å¼" class="headerlink" title="ç†”æ–­å™¨æ¨¡å¼"></a>ç†”æ–­å™¨æ¨¡å¼</h3><p>ç†”æ–­å™¨æ¨¡å¼Circuit Breaker</p>
<blockquote>
<p>ç†”æ–­å™¨æ¨¡å¼å¯ä»¥é˜²æ­¢åº”ç”¨ç¨‹åºä¸æ–­åœ°å°è¯•æ‰§è¡Œå¯èƒ½ä¼šå¤±è´¥çš„æ“ä½œï¼Œä½¿å¾—åº”ç”¨ç¨‹åºç»§ç»­æ‰§è¡Œè€Œä¸ç”¨ç­‰å¾…ä¿®æ­£é”™è¯¯ï¼Œæˆ–è€…æµªè´¹CPUæ—¶é—´å»ç­‰åˆ°é•¿æ—¶é—´çš„è¶…æ—¶äº§ç”Ÿã€‚ç†”æ–­å™¨æ¨¡å¼ä¹Ÿå¯ä»¥ä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿè¯Šæ–­é”™è¯¯æ˜¯å¦å·²ç»ä¿®æ­£ï¼Œå¦‚æœå·²ç»ä¿®æ­£ï¼Œåº”ç”¨ç¨‹åºä¼šå†æ¬¡å°è¯•è°ƒç”¨æ“ä½œã€‚</p>
<p>ç†”æ–­å™¨æ¨¡å¼å°±åƒæ˜¯é‚£äº›å®¹æ˜“å¯¼è‡´é”™è¯¯çš„æ“ä½œçš„ä¸€ç§ä»£ç†ã€‚è¿™ç§ä»£ç†èƒ½å¤Ÿè®°å½•æœ€è¿‘è°ƒç”¨å‘ç”Ÿé”™è¯¯çš„æ¬¡æ•°ï¼Œç„¶åå†³å®šä½¿ç”¨å…è®¸æ“ä½œç»§ç»­ï¼Œæˆ–è€…ç«‹å³è¿”å›é”™è¯¯ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(å…«)</title>
    <url>/blog/Python/Python_id_23.html</url>
    <content><![CDATA[<h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><ul>
<li><p>æˆå‘˜è¿ç®—ç¬¦ï¼š<code>in</code>åé¢è®²åˆ—è¡¨äº†ä¼šè®²</p>
</li>
<li><p>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š<code>==</code> <code>&gt;</code> <code>&gt;=</code> <code>&lt;</code> <code>&lt;=</code> <code>&lt;&gt;</code> <code>!=</code><br>å¯¹äº<code>None</code>çš„åˆ¤æ–­é™¤äº†æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œæ›´æ¨èç”¨<code>is None</code> å’Œ <code>is not None</code><br>åœ¨python3ä¸­ï¼Œæ˜¯å¦ä¸ç­‰äº<code>&lt;&gt;</code>è¢«å–æ¶ˆäº†ï¼Œæƒ³è¦ä½¿ç”¨éœ€è¦å…ˆå¼•å…¥æ¨¡å—</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> barry_as_FLUFL</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<a id="more"></a>

<ul>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š<code>and</code> <code>or</code> <code>not</code></li>
<li>ä½è¿ç®—ç¬¦ï¼š<code>|</code> <code>&amp;</code> <code>~</code> <code>^</code> <code>&gt;&gt;</code> <code>&lt;&lt;</code></li>
</ul>
<p>å†…ç½®æ¨¡å—<a href="https://docs.python.org/zh-cn/3/library/operator.html" target="_blank" rel="noopener"><code>operator</code></a>é‡Œçš„å‡½æ•°ä¸è¿ç®—ç¬¦æ˜ å°„ã€‚</p>
<h3 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a>èµ‹å€¼è¿ç®—ç¬¦</h3><p>èµ‹å€¼è¿ç®—ç¬¦ <code>=</code> ç”¨äºç»™å˜é‡èµ‹å€¼ã€‚<br>åœ¨pythonä¸­ï¼Œå£°æ˜å’Œèµ‹å€¼éƒ½æ˜¯ç­‰å· <code>=</code> ï¼Œèµ‹å€¼è¯­å¥æœ¬èº«ä¸ä¼šè¿”å›ä»»ä½•ç»“æœ<br>åœ¨python3.8ä¸­æ–°å¢çš„æµ·è±¡è¿ç®—ç¬¦ï¼ˆthe walrus operatorï¼‰<code>:=</code>ï¼Œå…¶è¡¨è¾¾å¼ä¼šèµ‹å€¼åŒæ—¶è¿”å›å·¦å€¼çš„å¼•ç”¨ã€‚</p>
<h4 id="è¿ç”¨"><a href="#è¿ç”¨" class="headerlink" title="è¿ç”¨"></a>è¿ç”¨</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">c = <span class="number">1</span></span><br><span class="line">a = b = c = <span class="number">1</span></span><br><span class="line">print(a,b,c)</span><br></pre></td></tr></table></figure></div>

<p>èµ‹äºˆç›¸å½“äºèµ·åˆ«åï¼Œå¤šä¸ªå˜é‡è¡¨ç¤ºçš„ä¼šæ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€</p>
<h4 id="å†…ç½®å‡½æ•°id"><a href="#å†…ç½®å‡½æ•°id" class="headerlink" title="å†…ç½®å‡½æ•°id()"></a>å†…ç½®å‡½æ•°<code>id()</code></h4><p>ä½¿ç”¨å†…ç½®å‡½æ•°<code>id()</code>å¯ä»¥æŸ¥çœ‹å†…å­˜åœ°å€çš„è¡¨ç¤ºï¼›<br>å¸ƒå°”è¡¨è¾¾å¼ä¸­ä¹Ÿå¯ä»¥è¿ç”¨æ¯”è¾ƒ<code>==</code>ï¼Œå¤šä¸ªå€¼å…¨ç­‰çš„æ—¶å€™å°†è¿”å›<code>Ture</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">print(id(a) == id(b) == id(c))</span><br></pre></td></tr></table></figure></div>

<p>å½“å˜é‡è¢«ä¿®æ”¹çš„æ—¶å€™ï¼Œå†…ç½®å‡½æ•°<code>id()</code>ä¹Ÿä¼šé‡æ–°æŒ‡å‘ã€‚<br>å¯¹äºå¯å˜çš„å®¹å™¨ç±»å‹ï¼Œå…¶æˆå‘˜è¢«ä¿®æ”¹ï¼Œå®¹å™¨çš„<code>id()</code>å°†ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚</p>
<h4 id="å¸ƒå°”è¡¨è¾¾å¼"><a href="#å¸ƒå°”è¡¨è¾¾å¼" class="headerlink" title="å¸ƒå°”è¡¨è¾¾å¼"></a>å¸ƒå°”è¡¨è¾¾å¼</h4><p>å¸ƒå°”è¡¨è¾¾å¼æ˜¯é€»è¾‘è¿ç®—çš„è®¡ç®—å¼ã€‚<br>é€»è¾‘è¿ç®—ç¬¦ä¼˜å…ˆçº§ä¸ºï¼š<code>()</code>&gt; <code>not</code>&gt; <code>and</code> &gt; <code>or</code> ã€‚åŒä¼˜å…ˆçº§è¿›è¡Œä»å·¦å¾€å³å…ˆåè®¡ç®—ã€‚<br>äºŒå…ƒé€»è¾‘è¿ç®—ç¬¦ä¼šå…ˆåå°†å…¶ä¸¤è¾¹çš„è¡¨è¾¾å¼ç»“æœï¼Œ<strong>éšå¼åœ°</strong>è½¬åŒ–ä¸º<code>bool</code>ç±»å‹åå†å‚ä¸é€»è¾‘è¿ç®—</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">and</span> <span class="literal">True</span>    <span class="comment">#ç›¸å½“äº bool(1) and True</span></span><br><span class="line"><span class="literal">True</span></span><br></pre></td></tr></table></figure></div>

<p>å†…ç½®å‡½æ•°<code>bool()</code>ä¼š<strong>æ˜¾å¼åœ°</strong>æŠŠå…¶ä»–ç±»å‹è½¬æ¢ä¸º<code>bool</code>ç±»å‹<br><code>bool</code>ç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼š<code>True</code>å’Œ<code>False</code></p>
<ul>
<li>éé›¶éç©ºè½¬æ¢æˆå¸ƒå°”ç±»å‹æ˜¯ <code>True</code></li>
<li>0 ï¼ŒNoneç­‰å€¼è½¬æ¢æˆå¸ƒå°”ç±»å‹æ˜¯ <code>False</code></li>
</ul>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p>
<p>ä¸JavaScriptä¸åŒï¼Œpythonä¸­å¦‚<code>bool([])</code>ç­‰ç©ºå¯¹è±¡éƒ½æ˜¯Falseã€‚<br>è€ŒJavaScriptä¸­åªè¦æ˜¯å¯¹è±¡éƒ½æ˜¯trueã€‚<br>äº‹å®ä¸Šï¼Œè¿™æ˜¯å¯¹è±¡çš„é­”æœ¯æ–¹æ³•<code>__bool__</code>æ‰€å®šä¹‰çš„ã€‚</p>
<h4 id="è¿ç”¨-1"><a href="#è¿ç”¨-1" class="headerlink" title="è¿ç”¨"></a>è¿ç”¨</h4><p>æ¯”è¾ƒè¿ç®—ç¬¦å¯ä»¥è¿ç»­ä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="number">2015</span> &gt; y &gt; <span class="number">2018</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<h3 id="çŸ­è·¯æ³•"><a href="#çŸ­è·¯æ³•" class="headerlink" title="çŸ­è·¯æ³•"></a>çŸ­è·¯æ³•</h3><p>åœ¨è®¡ç®—å¸ƒå°”è¡¨è¾¾å¼ç»“æœæ—¶å¾€å¾€åªåˆ¤æ–­å·¦è¾¹å°±æ—¢å®šäº†ç»“æœï¼š<br><code>x or y</code> å¦‚æœ<code>x==True</code>ï¼Œåˆ™è¿”å›x<br><code>x and y</code> å¦‚æœ<code>x==True</code>ï¼Œåˆ™è¿”å›y<br>çŸ­è·¯ä¹‹åï¼Œé€»è¾‘è¿ç®—ç¬¦å³ä¾§çš„<strong>éšå¼</strong>è¿›è¡Œç±»å‹è½¬æ¢å°†ä¸ä¼šè¿›è¡Œï¼Œç›´æ¥è¿”å›ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">or</span> [] <span class="keyword">or</span> <span class="number">1</span> <span class="keyword">or</span> <span class="number">3</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">0</span> <span class="keyword">or</span> [] <span class="keyword">or</span> <span class="number">3</span> <span class="keyword">or</span> <span class="number">1</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">and</span> <span class="literal">True</span> <span class="keyword">and</span> [] <span class="keyword">and</span> <span class="number">0</span></span><br><span class="line">[]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">1</span> <span class="keyword">and</span> <span class="literal">True</span> <span class="keyword">and</span> <span class="number">0</span> <span class="keyword">and</span> []</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure></div>

<p><strong>æ€è€ƒé¢˜</strong></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt;issubclass(bool, int) <span class="keyword">or</span> bool([]) <span class="keyword">and</span> <span class="number">2</span>&gt;&gt;<span class="number">3</span> <span class="keyword">or</span> (<span class="number">0.1</span>+<span class="number">0.2</span>==<span class="number">0.3</span>)</span><br><span class="line"><span class="comment">#??? å¯ä»¥åœ¨åç»­çš„å­¦ä¹ ä¸­æ€è€ƒ</span></span><br></pre></td></tr></table></figure></div>

<h3 id="æµç¨‹æ§åˆ¶-1"><a href="#æµç¨‹æ§åˆ¶-1" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h3><p><strong>pythonä¸­ æµç¨‹æ§åˆ¶ç›¸å…³ä»£ç å—éƒ½ä¸å…·å¤‡ç‹¬ç«‹çš„å‘½åç©ºé—´</strong><br>æµç¨‹æ§åˆ¶ä¸­çš„æ¡ä»¶æ˜¯å¸ƒå°”è¡¨è¾¾å¼ï¼Œ<code>if</code> <code>while</code>ä¹Ÿèƒ½<strong>éšå¼</strong>åœ°å°†ç»“æœè½¬æ¢ä¸ºå¸ƒå°”å€¼ï¼š</p>
<h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> æ¡ä»¶:</span><br><span class="line">    æ¡ä»¶æ»¡è¶³å°±...</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    å¦åˆ™å°±...</span><br></pre></td></tr></table></figure></div>

<ul>
<li><code>if</code>â€¦<code>elif</code>â€¦<code>else</code>è¯­å¥ å¯ä»¥å¹¶åˆ—å¤šä¸ªæ¡ä»¶</li>
<li><code>pass</code> è¡¨ç¤ºç©ºè¯­å¥,ä¸€èˆ¬èµ·åˆ°å ä½ä½œç”¨</li>
</ul>
<h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><p>ç»ˆæ­¢å¾ªç¯çš„æ–¹å¼ï¼š</p>
<ul>
<li>æ”¹å˜æ¡ä»¶ï¼Œä½¿å…¶ä¸æˆç«‹ã€‚</li>
<li><code>break</code></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> æ¡ä»¶:</span><br><span class="line">    å¾ªç¯ä½“</span><br></pre></td></tr></table></figure></div>

<p><code>continue</code>å¯ä»¥è·³è¿‡æœ¬è½®å¾ªç¯</p>
<h4 id="whileä¹Ÿæœ‰else"><a href="#whileä¹Ÿæœ‰else" class="headerlink" title="whileä¹Ÿæœ‰else"></a>whileä¹Ÿæœ‰else</h4><p>å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œï¼ˆä¸<code>break</code>ï¼‰ï¼Œæˆ–ç¬¬ä¸€æ¬¡å°±ä¸æ»¡è¶³æ—¶è¿›å…¥elseåˆ†æ”¯ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> count &lt;= <span class="number">5</span>:</span><br><span class="line">    count += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œ"</span>)</span><br></pre></td></tr></table></figure></div>

<h3 id="è¯­å¥å’Œè¡¨è¾¾å¼"><a href="#è¯­å¥å’Œè¡¨è¾¾å¼" class="headerlink" title="è¯­å¥å’Œè¡¨è¾¾å¼"></a>è¯­å¥å’Œè¡¨è¾¾å¼</h3><p>åœ¨pythonä¸­ï¼Œ<code>a + b</code>æ˜¯è¡¨è¾¾å¼ï¼Œ<code>a = b</code>æ˜¯è¯­å¥</p>
<h4 id="å†…ç½®å‡½æ•°eval-å’Œexec"><a href="#å†…ç½®å‡½æ•°eval-å’Œexec" class="headerlink" title="å†…ç½®å‡½æ•°eval()å’Œexec()"></a>å†…ç½®å‡½æ•°<code>eval()</code>å’Œ<code>exec()</code></h4><p><code>exec</code>å¯ä»¥å°†å­—ç¬¦ä¸²æˆ–å­—èŠ‚ä»£ç å¯¹è±¡å½“ä½œ<strong>è¯­å¥</strong>æ‰§è¡Œã€‚<br><code>eval</code>å¯ä»¥å°†å­—ç¬¦ä¸²æˆ–å­—èŠ‚ä»£ç å¯¹è±¡å½“ä½œ<strong>è¡¨è¾¾å¼</strong>æ‰§è¡Œå¾—åˆ°è¿”å›å€¼ã€‚<br>å¦‚æœä½¿ç”¨<code>eval</code>æ‰§è¡Œçš„åŸä»£ç å—æ˜¯è¯­å¥è€Œä¸æ˜¯è¡¨è¾¾å¼å°†ä¼šæŠ›å‡º<code>SyntaxError</code>å¼‚å¸¸ã€‚<br>å¼‚å¸¸å¤„ç†å°†åœ¨ä¸‹ä¸€ç« è®²åˆ°ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ¨¡æ‹Ÿpython shelläº¤äº’å¼</span></span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    ex = input(<span class="string">'&gt;&gt;&gt; '</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            print(eval(ex))</span><br><span class="line">        <span class="keyword">except</span> SyntaxError <span class="keyword">as</span> e:</span><br><span class="line">            exec(ex)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">"Traceback (most recent call last):"</span>)</span><br><span class="line">        print(e)</span><br></pre></td></tr></table></figure></div>

<h4 id="å†…ç½®å‡½æ•°compile"><a href="#å†…ç½®å‡½æ•°compile" class="headerlink" title="å†…ç½®å‡½æ•°compile()"></a>å†…ç½®å‡½æ•°<code>compile()</code></h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="VIM"><figure class="iseeu highlight /vim"><table><tr><td class="code"><pre><span class="line">compile()` å‡½æ•°å°†ä¸€ä¸ªå­—ç¬¦ä¸²ç¼–è¯‘ä¸ºå­—èŠ‚ä»£ç å¯¹è±¡ã€‚</span><br><span class="line"><span class="keyword">mode</span>å‚æ•°æŒ‡å®šç¼–è¯‘ä»£ç çš„ç§ç±»ã€‚å¯ä»¥æŒ‡å®šä¸º `<span class="string">'exec'</span>`, `<span class="string">'eval'</span>`, `<span class="string">'single'</span></span><br><span class="line">#æ¨¡æ‹Ÿ<span class="keyword">python</span> <span class="keyword">shell</span>äº¤äº’å¼</span><br><span class="line"><span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">ex</span> = <span class="built_in">input</span>(<span class="string">'&gt;&gt;&gt; '</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        exec(compile(<span class="keyword">ex</span>,<span class="string">''</span>,<span class="string">'single'</span>))</span><br><span class="line">    except Exception <span class="keyword">as</span> <span class="keyword">e</span>:</span><br><span class="line">        <span class="keyword">print</span>(<span class="string">"Traceback (most recent call last):"</span>)</span><br><span class="line">        <span class="keyword">print</span>(<span class="keyword">e</span>)</span><br></pre></td></tr></table></figure></div>

<p>ä¸¤ç§æ¨¡æ‹Ÿäº¤äº’çš„æ–¹å¼ç•¥æœ‰åŒºåˆ«ï¼Œå‰è€…å¯ä»¥è¿”å›<code>None</code>å€¼ï¼Œä½†è¿™å¾€å¾€ä¸ç¬¦åˆé¢„æœŸã€‚</p>
<h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p>å¯ä»¥å¾ªç¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> æˆå‘˜å˜é‡ <span class="keyword">in</span> å®¹å™¨:</span><br><span class="line">	å¾ªç¯ä½“</span><br></pre></td></tr></table></figure></div>

<p>ä¾‹å¦‚ï¼Œæ‰“å°åå•ï¼Œè¿™é‡Œä»¥åˆ—è¡¨ä¸ºä¾‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">namelist = [<span class="string">'å¤è‰²ç¥­'</span>,<span class="string">'èµ¤äº•å¿ƒ'</span>,<span class="string">'æ¹Šé˜¿å¤¸'</span>]</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> namelist:</span><br><span class="line">	print(name)</span><br></pre></td></tr></table></figure></div>

<h4 id="forä¹Ÿæœ‰else"><a href="#forä¹Ÿæœ‰else" class="headerlink" title="forä¹Ÿæœ‰else"></a>forä¹Ÿæœ‰else</h4><p>å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œï¼ˆä¸<code>break</code>ï¼‰ï¼Œæˆ–<code>for in ç©ºå®¹å™¨</code>æ—¶è¿›å…¥elseåˆ†æ”¯ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸ƒ)</title>
    <url>/blog/Python/Python_id_22.html</url>
    <content><![CDATA[<h2 id="pythonç§ç±»"><a href="#pythonç§ç±»" class="headerlink" title="pythonç§ç±»"></a>pythonç§ç±»</h2><h3 id="ä»å®ç°"><a href="#ä»å®ç°" class="headerlink" title="ä»å®ç°:"></a>ä»å®ç°:</h3><p>æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯<code>CPython</code>å°±æ˜¯ç”¨Cè¯­è¨€å®ç°çš„PythonåŠå…¶è§£é‡Šå™¨ï¼ˆJITç¼–è¯‘å™¨ï¼‰<br>é€Ÿåº¦æœ€å¿«çš„æ˜¯<code>pypy</code>æ˜¯pythonè‡ªå·±å®ç°çš„è‡ªå·±<br>å…¶ä»–ç‰ˆæœ¬:C++(<code>Pyston</code>) \ Java(<code>Jython</code>) \ C#(<code>IronPython</code>)</p>
<a id="more"></a>

<p>ä»ç‰ˆæœ¬:</p>
<ul>
<li>python2</li>
<li>python3</li>
</ul>
<p>åŒºåˆ«ï¼špython2é»˜è®¤ç¼–ç æ–¹å¼æ˜¯asciiç ï¼Œpython3æ˜¯Unicode<br>è§£å†³ç¼–ç é—®é¢˜ï¼šåœ¨æ–‡ä»¶çš„é¦–è¡Œï¼š<code>#-*- encoding:utf-8 -*-</code></p>
<p>SyntaxError: Non-UTF-8 code starting with â€¦</p>
<p>åœ¨python3ä¸­çš„ä¸­æ–‡ä¹Ÿæœ‰å°æ¦‚ç‡é‡åˆ°è¿™ç§æƒ…å†µ<br>ä¹Ÿæ˜¯é€šè¿‡ <code>#-*- encoding:utf-8 -*-</code> æ¥è§£å†³</p>
<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p>å˜é‡ï¼šå°±æ˜¯å°†ä¸€äº›è¿ç®—çš„ä¸­é—´ç»“æœæš‚å­˜åˆ°å†…å­˜ä¸­ï¼Œä»¥ä¾¿åç»­ä»£ç è°ƒç”¨ã€‚</p>
<ul>
<li><p>å¿…é¡»ç”±æ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿ä»»æ„ç»„åˆï¼Œä¸”ä¸èƒ½æ•°å­—å¼€å¤´ã€‚</p>
</li>
<li><p>ä¸èƒ½æ˜¯pythonä¸­çš„å…³é”®å­— ä»¥ä¸‹:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">[<span class="string">'and'</span>, <span class="string">'as'</span>, <span class="string">'assert'</span>, <span class="string">'break'</span>, <span class="string">'class'</span>, <span class="string">'continue'</span>,</span><br><span class="line">	<span class="string">'def'</span>, <span class="string">'del'</span>, <span class="string">'elif'</span>, <span class="string">'else'</span>, <span class="string">'except'</span>, <span class="string">'exec'</span>,</span><br><span class="line">	<span class="string">'finally'</span>, <span class="string">'for'</span>, <span class="string">'from'</span>, <span class="string">'global'</span>, <span class="string">'if'</span>, <span class="string">'import'</span>, </span><br><span class="line">	<span class="string">'in'</span>, <span class="string">'is'</span>, <span class="string">'lambda'</span>, <span class="string">'not'</span>, <span class="string">'or'</span>, <span class="string">'pass'</span>, <span class="string">'print'</span>, </span><br><span class="line">	<span class="string">'raise'</span>, <span class="string">'return'</span>, <span class="string">'try'</span>, <span class="string">'while'</span>, <span class="string">'with'</span>, <span class="string">'yield'</span>]</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>å˜é‡å…·æœ‰å¯æè¿°æ€§ã€‚</p>
</li>
<li><p>ä¸èƒ½æ˜¯æ±‰å­—ç­‰å­—ç¬¦ã€‚</p>
</li>
</ul>
<h3 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h3><p>å®¢è§‚ä¸å˜çš„é‡ æˆ–è€…ç¨‹åºå‘˜ä¸å¸Œæœ›å®ƒè¢«ä¿®æ”¹çš„é‡ã€‚å¦‚:</p>
<ul>
<li>åœ†å‘¨ç‡<code>Ï€=3.14</code></li>
<li>è‡ªç„¶å¯¹æ•°åº•æ•°<code>e=2.71</code></li>
<li><code>BIR_OF_CHINA = 1949</code></li>
</ul>
<h3 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h3><p>æ–¹ä¾¿è‡ªå·±æ–¹ä¾¿ä»–äººç†è§£ä»£ç ã€‚</p>
<ul>
<li><p>å•è¡Œæ³¨é‡Šï¼š<code>#</code></p>
</li>
<li><p>å¤šè¡Œæ³¨é‡Šï¼š<code>&#39;&#39;&#39;</code>è¢«æ³¨é‡Šå†…å®¹<code>&#39;&#39;&#39;</code></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¢«æ³¨é‡Šå†…å®¹:ä»£ç åƒä¸‡è¡Œ,æ³¨é‡Šç¬¬ä¸€è¡Œ,æ³¨é‡Šä¸è§„èŒƒ,äº²äººä¸¤è¡Œæ³ª</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>å®ƒä¸ä»…æ˜¯æ³¨é‡Šï¼Œä¹Ÿæ˜¯å¸¦æ¢è¡Œçš„å­—ç¬¦ä¸²å—</p>
<h3 id="ç”¨æˆ·äº¤äº’input"><a href="#ç”¨æˆ·äº¤äº’input" class="headerlink" title="ç”¨æˆ·äº¤äº’input"></a>ç”¨æˆ·äº¤äº’<code>input</code></h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">a = input(<span class="string">"è¯·è¾“å…¥"</span>)</span><br></pre></td></tr></table></figure></div>

<p>1ï¼Œç­‰å¾…è¾“å…¥ã€‚ 2ï¼Œå°†è¾“å…¥çš„å†…å®¹èµ‹å€¼ç»™äº†å‰é¢å˜é‡ã€‚ 3ï¼Œ<code>input</code>æ¥å—çš„æ•°æ®ç±»å‹å…¨éƒ¨æ˜¯<code>str</code>ç±»å‹ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰</p>
<h3 id="åŸºç¡€æ•°æ®ç±»å‹åˆå§‹"><a href="#åŸºç¡€æ•°æ®ç±»å‹åˆå§‹" class="headerlink" title="åŸºç¡€æ•°æ®ç±»å‹åˆå§‹"></a>åŸºç¡€æ•°æ®ç±»å‹åˆå§‹</h3><p>åŸºç¡€æ•°æ®ç±»å‹æœ‰ï¼šæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨ï¼Œå…ƒç»„ï¼Œå­—å…¸<br>å†…ç½®å‡½æ•°<code>type()</code>è¿”å›å˜é‡çš„ç±»å‹</p>
<ul>
<li>æ•´å‹ï¼š<code>int</code>ï¼Œåè¿›åˆ¶çš„æ•´æ•°ç±»å‹<br>æ•°å­—ç±»å‹è¿˜æœ‰æµ®ç‚¹å‹å’Œå¤æ•°ç±»å‹ï¼Œå¯ä»¥ç›¸äº’è½¬æ¢ã€‚<br>æ•°å­—ç±»å‹å¯ä»¥å‚ä¸ä¸€äº›ç®—æ•°è¿ç®—ç¬¦ï¼šåŠ å‡ä¹˜é™¤<br>å­—ç¬¦ä¸²è½¬åŒ–æˆæ•°å­—ï¼š<code>int(str)</code> æ¡ä»¶ï¼šstrå¿…é¡»æ˜¯æ•°å­—ç»„æˆçš„ã€‚<br>æ•°å­—è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼š<code>str(int)</code></li>
<li>å¸ƒå°”å€¼ï¼š<code>bool</code><br>True False è¡¨ç¤ºçœŸå‡ æ˜¯é€»è¾‘è¿ç®—è¡¨è¾¾å¼çš„ç»“æœ<br>å¸ƒå°”ç±»å‹å¹¶ä¸æ˜¯åŸºç¡€æ•°æ®ç±»å‹ æ˜¯<strong>ç»§æ‰¿</strong>çš„æ•´å‹çš„<code>1</code>å’Œ<code>0</code></li>
<li>å­—ç¬¦ä¸²ï¼š<code>str</code><br>pythonå½“ä¸­å‡¡æ˜¯ç”¨å¼•å·å¼•èµ·æ¥çš„éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚<br>å¯ç›¸åŠ ï¼šstr + str æ‹¼æ¥<br>å¯ç›¸ä¹˜ï¼šstr * int å¤è¯»</li>
<li>åˆ—è¡¨ï¼š<code>list</code><br>ä¸€ä¸ªå…·æœ‰é¡ºåºçš„å®¹å™¨ï¼Œå¯ä»¥åœ¨é‡Œé¢æ”¾ç½®å…¶ä»–ç±»å‹<br>ç”¨èŠ±æ‹¬å·åŒ…è£¹ï¼Œå„ä¸ªæˆå‘˜ä¹‹é—´ç”¨é€—å·éš”å¼€ï¼š<br><code>[ 2019, &quot;æ˜¥èŠ‚&quot;]</code></li>
<li>â€¦</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 8å®‰è£…nodejs</title>
    <url>/blog/CentOS/CentOS_id_07.html</url>
    <content><![CDATA[<p>curl -sL <a href="https://rpm.nodesource.com/setup_10.x" target="_blank" rel="noopener">https://rpm.nodesource.com/setup_10.x</a> | bash -</p>
<p>yum install -y nodejs</p>
<p>[root@localhost /]# node -v<br>v10.9.0<br>[root@localhost /]# npm -v<br>6.2.0</p>
]]></content>
      <categories>
        <category>CentOS</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(å…­)</title>
    <url>/blog/Python/Python_id_21.html</url>
    <content><![CDATA[<h2 id="Python-è·å–-100-ä»¥å†…çš„è´¨æ•°"><a href="#Python-è·å–-100-ä»¥å†…çš„è´¨æ•°" class="headerlink" title="Python - è·å– 100 ä»¥å†…çš„è´¨æ•°"></a>Python - è·å– 100 ä»¥å†…çš„è´¨æ•°</h2><p>é¢˜ç›®ï¼š è·å– 100 ä»¥å†…çš„è´¨æ•°ã€‚</p>
<a id="more"></a>

<p><strong>ç¨‹åºåˆ†æï¼š</strong>è´¨æ•°ï¼ˆprime numberï¼‰åˆç§°ç´ æ•°ï¼Œæœ‰æ— é™ä¸ªã€‚è´¨æ•°å®šä¹‰ä¸ºåœ¨å¤§äº1çš„è‡ªç„¶æ•°ä¸­ï¼Œé™¤äº†1å’Œå®ƒæœ¬èº«ä»¥å¤–ä¸å†æœ‰å…¶ä»–å› æ•°çš„æ•°ç§°ä¸ºè´¨æ•°ï¼Œå¦‚ï¼š2ã€3ã€5ã€7ã€11ã€13ã€17ã€19ã€‚</p>
<h3 id="æ–¹æ³•ä¸€ï¼š"><a href="#æ–¹æ³•ä¸€ï¼š" class="headerlink" title="æ–¹æ³•ä¸€ï¼š"></a>æ–¹æ³•ä¸€ï¼š</h3><p>#!/usr/bin/python # -<em>- coding: UTF-8 -</em>-  num=[]; i=2 for i in range(2,100):   j=2   for j in range(2,i):      if(i%j==0):         break   else:      num.append(i) print(num)</p>
<h3 id="æ–¹æ³•äºŒï¼š"><a href="#æ–¹æ³•äºŒï¼š" class="headerlink" title="æ–¹æ³•äºŒï¼š"></a>æ–¹æ³•äºŒï¼š</h3><p>import math def func_get_prime(n):  return filter(lambda x: not [x%i for i in range(2, int(math.sqrt(x))+1) if x%i ==0], range(2,n+1))  print func_get_prime(100)</p>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSON"><figure class="iseeu highlight /json"><table><tr><td class="code"><pre><span class="line">[<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">23</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">37</span>, <span class="number">41</span>, <span class="number">43</span>, <span class="number">47</span>, <span class="number">53</span>, <span class="number">59</span>, <span class="number">61</span>, <span class="number">67</span>, <span class="number">71</span>, <span class="number">73</span>, <span class="number">79</span>, <span class="number">83</span>, <span class="number">89</span>, <span class="number">97</span>]</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Ubuntué…ç½®æ•°æ®åº“è¸©å‘è®°å½•</title>
    <url>/blog/Ubuntu/Ubuntu_id_01.html</url>
    <content><![CDATA[<h2 id="MySQLæ•°æ®åº“"><a href="#MySQLæ•°æ®åº“" class="headerlink" title="MySQLæ•°æ®åº“"></a>MySQLæ•°æ®åº“</h2><a id="more"></a>
<p>ubuntuç¯å¢ƒä¸‹å®‰è£…MySQLæ•°æ®åº“:</p>
<ul>
<li>sudo apt-get install mysql-server</li>
<li>sudo apt install  mysql-client</li>
<li>sudo apt install libmysqlclient-dev</li>
</ul>
<p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ:</p>
<ul>
<li>sudo netstat -tap | grep mysql</li>
</ul>
<p>é…ç½®è¿œç¨‹æ•°æ®åº“è®¿é—®æƒé™:</p>
<ul>
<li>sudo vi /etc/mysql/mysql.conf.d/mysqld.cnf</li>
<li>ä¿®æ”¹è¯¥æ–‡ä»¶é…ç½®é¡¹</li>
<li>bind-address = 127.0.0.1</li>
<li>å°†æ­¤è¡Œæ•°å€¼ä¿®æ”¹ä¸º0.0.0.0</li>
</ul>
<p>è¿›å…¥mysqlæ•°æ®åº“:</p>
<ul>
<li>grant all on <em>.</em> to root@â€™%â€™ identified by â€˜ä½ çš„å¯†ç â€™ with grant option;</li>
<li>flush privileges;</li>
</ul>
<p>é‡å¯æ•°æ®åº“:</p>
<ul>
<li>sudo service mysql restart</li>
</ul>
<p>å®Œå…¨åˆ é™¤æ•°æ®åº“:</p>
<ul>
<li><pre><code>sudo apt-get remove mysql-*
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
dpkg -l |grep ^rc|awk &apos;{print $2}&apos; |sudo xargs dpkg -P</code></pre></li>
</ul>
<p>user = debian-sys-maint</p>
<p>password = NIbvCi0MJMQKWqmI</p>
<p>æŸ¥çœ‹é»˜è®¤è´¦æˆ·åå’Œå¯†ç :</p>
<ul>
<li>sudo vi /etc/mysql/debian.cnf</li>
</ul>
<p>å°†å¯†ç ä¿®æ”¹:</p>
<ul>
<li>update user set authentication_string=password(â€˜000000â€™) where user=â€™rootâ€™ and host=â€™localhostâ€™;</li>
<li>update mysql.user set plugin=â€™mysql_native_passwordâ€™;</li>
<li>flush privileges</li>
</ul>
<hr>
<p>PS: </p>
<p>â€‹        ä»¥ä¸Šæ•°æ®åº“ä¿®æ”¹ä¹‹å,åœ¨è¿›è¡Œè¿œç¨‹ä»“åº“è®¿é—®çš„æ—¶å€™,å¦‚æœè¾“å…¥çš„å‘½ä»¤ä¸º:</p>
<p>mysql -h ipåœ°å€ -p 3306 -u root -p</p>
<p>enter password:</p>
<p>â€‹        å½“å‡ºç°ä»¥ä¸Šæƒ…å†µæ—¶,å°†ä¼šå‡ºç°é”™è¯¯:</p>
<p>mysql: [Warning] Using a password on the command line interface can be insecure.<br>ERROR 1049 (42000): Unknown database â€˜3306â€™</p>
<p>â€‹        è¿™ä¸ªåŸå› æ˜¯å› ä¸ºå¯†ç passwordçš„ç¼©å†™å’Œç«¯å£portçš„ç¼©å†™å‘ç”Ÿå†²çª,å¯¼è‡´ç³»ç»Ÿæ— æ³•è¯†åˆ«å¯¹åº”çš„å¯†ç </p>
<p>â€‹        å°†å‘½ä»¤æ”¹ä¸º:  mysql -h ipåœ°å€ -u root -p</p>
<p>enter password:</p>
<p>â€‹        çœç•¥port ç«¯å£,</p>
<p>â€‹        å³å¯å®Œæˆè®¿é—®</p>
]]></content>
      <categories>
        <category>Ubuntu</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äº”)</title>
    <url>/blog/Python/Python_id_20.html</url>
    <content><![CDATA[<h3 id="Python-JSON"><a href="#Python-JSON" class="headerlink" title="Python JSON"></a>Python JSON</h3><p>æœ¬ç« èŠ‚æˆ‘ä»¬å°†ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•ä½¿ç”¨ Python è¯­è¨€æ¥ç¼–ç å’Œè§£ç  JSON å¯¹è±¡ã€‚</p>
<p>JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œæ˜“äºäººé˜…è¯»å’Œç¼–å†™ã€‚</p>
<a id="more"></a>

<hr>
<h4 id="JSON-å‡½æ•°"><a href="#JSON-å‡½æ•°" class="headerlink" title="JSON å‡½æ•°"></a>JSON å‡½æ•°</h4><p>ä½¿ç”¨ JSON å‡½æ•°éœ€è¦å¯¼å…¥ json åº“ï¼š<strong>import json</strong>ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å‡½æ•°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">json.dumps</td>
<td align="left">å°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td align="left">json.loads</td>
<td align="left">å°†å·²ç¼–ç çš„ JSON å­—ç¬¦ä¸²è§£ç ä¸º Python å¯¹è±¡</td>
</tr>
</tbody></table>
<hr>
<h4 id="json-dumps"><a href="#json-dumps" class="headerlink" title="json.dumps"></a>json.dumps</h4><p>json.dumps ç”¨äºå°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²ã€‚</p>
<h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">json.dumps(obj, <span class="attribute">skipkeys</span>=<span class="literal">False</span>, <span class="attribute">ensure_ascii</span>=<span class="literal">True</span>, <span class="attribute">check_circular</span>=<span class="literal">True</span>, <span class="attribute">allow_nan</span>=<span class="literal">True</span>, <span class="attribute">cls</span>=None, <span class="attribute">indent</span>=None, <span class="attribute">separators</span>=None, <span class="attribute">encoding</span>=<span class="string">"utf-8"</span>, <span class="attribute">default</span>=None, <span class="attribute">sort_keys</span>=<span class="literal">False</span>, **kw)</span><br></pre></td></tr></table></figure></div>

<h4 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ä»¥ä¸‹å®ä¾‹å°†æ•°ç»„ç¼–ç ä¸º JSON æ ¼å¼æ•°æ®ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="D"><figure class="iseeu highlight /d"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/python</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data = [ &#123; <span class="string">'a'</span> : <span class="number">1</span>, <span class="string">'b'</span> : <span class="number">2</span>, <span class="string">'c'</span> : <span class="number">3</span>, <span class="string">'d'</span> : <span class="number">4</span>, <span class="string">'e'</span> : <span class="number">5</span> &#125; ]</span><br><span class="line"></span><br><span class="line">json = json.dumps(data)</span><br><span class="line">print json</span><br></pre></td></tr></table></figure></div>

<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSON"><figure class="iseeu highlight /json"><table><tr><td class="code"><pre><span class="line">[&#123;<span class="attr">"a"</span>: <span class="number">1</span>, <span class="attr">"c"</span>: <span class="number">3</span>, <span class="attr">"b"</span>: <span class="number">2</span>, <span class="attr">"e"</span>: <span class="number">5</span>, <span class="attr">"d"</span>: <span class="number">4</span>&#125;]</span><br></pre></td></tr></table></figure></div>

<p>ä½¿ç”¨å‚æ•°è®© JSON æ•°æ®æ ¼å¼åŒ–è¾“å‡ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; import json</span><br><span class="line">&gt;&gt;&gt; <span class="builtin-name">print</span> json.dumps(&#123;<span class="string">'a'</span>: <span class="string">'Runoob'</span>, <span class="string">'b'</span>: 7&#125;, <span class="attribute">sort_keys</span>=<span class="literal">True</span>, <span class="attribute">indent</span>=4, separators=(<span class="string">','</span>, <span class="string">': '</span>))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"a"</span>: <span class="string">"Runoob"</span>,</span><br><span class="line">    <span class="string">"b"</span>: 7</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>python åŸå§‹ç±»å‹å‘ json ç±»å‹çš„è½¬åŒ–å¯¹ç…§è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">Python</th>
<th align="left">JSON</th>
</tr>
</thead>
<tbody><tr>
<td align="left">dict</td>
<td align="left">object</td>
</tr>
<tr>
<td align="left">list, tuple</td>
<td align="left">array</td>
</tr>
<tr>
<td align="left">str, unicode</td>
<td align="left">string</td>
</tr>
<tr>
<td align="left">int, long, float</td>
<td align="left">number</td>
</tr>
<tr>
<td align="left">True</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">False</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">None</td>
<td align="left">null</td>
</tr>
</tbody></table>
<hr>
<h4 id="json-loads"><a href="#json-loads" class="headerlink" title="json.loads"></a>json.loads</h4><p>json.loads ç”¨äºè§£ç  JSON æ•°æ®ã€‚è¯¥å‡½æ•°è¿”å› Python å­—æ®µçš„æ•°æ®ç±»å‹ã€‚</p>
<h4 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">json.loads(s<span class="comment">[, encoding<span class="comment">[, cls<span class="comment">[, object_hook<span class="comment">[, parse_float<span class="comment">[, parse_int<span class="comment">[, parse_constant<span class="comment">[, object_pairs_hook<span class="comment">[, **kw]</span>]</span>]</span>]</span>]</span>]</span>]</span>]</span>)</span><br></pre></td></tr></table></figure>

<h4 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ä»¥ä¸‹å®ä¾‹å±•ç¤ºäº†Python å¦‚ä½•è§£ç  JSON å¯¹è±¡ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NIX"><figure class="iseeu highlight /nix"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="built_in">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="attr">jsonData</span> = '&#123;<span class="string">"a"</span>:<span class="number">1</span>,<span class="string">"b"</span>:<span class="number">2</span>,<span class="string">"c"</span>:<span class="number">3</span>,<span class="string">"d"</span>:<span class="number">4</span>,<span class="string">"e"</span>:<span class="number">5</span>&#125;';</span><br><span class="line"></span><br><span class="line"><span class="attr">text</span> = json.loads(jsonData)</span><br><span class="line">print text</span><br></pre></td></tr></table></figure></div>

<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AWK"><figure class="iseeu highlight /awk"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">u'a'</span>: <span class="number">1</span>, <span class="string">u'c'</span>: <span class="number">3</span>, <span class="string">u'b'</span>: <span class="number">2</span>, <span class="string">u'e'</span>: <span class="number">5</span>, <span class="string">u'd'</span>: <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure></div>

<p>json ç±»å‹è½¬æ¢åˆ° python çš„ç±»å‹å¯¹ç…§è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th align="left">JSON</th>
<th align="left">Python</th>
</tr>
</thead>
<tbody><tr>
<td align="left">object</td>
<td align="left">dict</td>
</tr>
<tr>
<td align="left">array</td>
<td align="left">list</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">unicode</td>
</tr>
<tr>
<td align="left">number (int)</td>
<td align="left">int, long</td>
</tr>
<tr>
<td align="left">number (real)</td>
<td align="left">float</td>
</tr>
<tr>
<td align="left">true</td>
<td align="left">True</td>
</tr>
<tr>
<td align="left">false</td>
<td align="left">False</td>
</tr>
<tr>
<td align="left">null</td>
<td align="left">None</td>
</tr>
</tbody></table>
<p>æ›´å¤šå†…å®¹å‚è€ƒï¼š<a href="https://docs.python.org/2/library/json.htmlã€‚" target="_blank" rel="noopener">https://docs.python.org/2/library/json.htmlã€‚</a></p>
<hr>
<h3 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šDemjson"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šDemjson" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šDemjson"></a>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šDemjson</h3><p>Demjson æ˜¯ python çš„ç¬¬ä¸‰æ–¹æ¨¡å—åº“ï¼Œå¯ç”¨äºç¼–ç å’Œè§£ç  JSON æ•°æ®ï¼ŒåŒ…å«äº† JSONLint çš„æ ¼å¼åŒ–åŠæ ¡éªŒåŠŸèƒ½ã€‚</p>
<p>Github åœ°å€ï¼š<a href="https://github.com/dmeranda/demjson" target="_blank" rel="noopener">https://github.com/dmeranda/demjson</a></p>
<p>å®˜æ–¹åœ°å€ï¼š<a href="http://deron.meranda.us/python/demjson/" target="_blank" rel="noopener">http://deron.meranda.us/python/demjson/</a></p>
<h4 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h4><p>åœ¨ä½¿ç”¨ Demjson ç¼–ç æˆ–è§£ç  JSON æ•°æ®å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£… Demjson æ¨¡å—ã€‚æœ¬æ•™ç¨‹æˆ‘ä»¬ä¼šä¸‹è½½ <a href="http://deron.meranda.us/python/demjson/download" target="_blank" rel="noopener">Demjson</a> å¹¶å®‰è£…ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">$ tar -xvzf demjson<span class="number">-2.2</span><span class="number">.3</span>.tar.gz</span><br><span class="line">$ cd demjson<span class="number">-2.2</span><span class="number">.3</span></span><br><span class="line">$ python setup.py install</span><br></pre></td></tr></table></figure></div>

<p>æ›´å¤šå®‰è£…ä»‹ç»æŸ¥çœ‹ï¼š<a href="http://deron.meranda.us/python/demjson/install" target="_blank" rel="noopener">http://deron.meranda.us/python/demjson/install</a></p>
<h3 id="JSON-å‡½æ•°-1"><a href="#JSON-å‡½æ•°-1" class="headerlink" title="JSON å‡½æ•°"></a>JSON å‡½æ•°</h3><table>
<thead>
<tr>
<th align="left">å‡½æ•°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">encode</td>
<td align="left">å°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td align="left">decode</td>
<td align="left">å°†å·²ç¼–ç çš„ JSON å­—ç¬¦ä¸²è§£ç ä¸º Python å¯¹è±¡</td>
</tr>
</tbody></table>
<hr>
<h3 id="encode"><a href="#encode" class="headerlink" title="encode"></a>encode</h3><p>Python encode() å‡½æ•°ç”¨äºå°† Python å¯¹è±¡ç¼–ç æˆ JSON å­—ç¬¦ä¸²ã€‚</p>
<h4 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">demjson.encode(self, obj, <span class="attribute">nest_level</span>=0)</span><br></pre></td></tr></table></figure></div>

<h4 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ä»¥ä¸‹å®ä¾‹å°†æ•°ç»„ç¼–ç ä¸º JSON æ ¼å¼æ•°æ®ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="D"><figure class="iseeu highlight /d"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/python</span></span><br><span class="line"><span class="keyword">import</span> demjson</span><br><span class="line"></span><br><span class="line">data = [ &#123; <span class="string">'a'</span> : <span class="number">1</span>, <span class="string">'b'</span> : <span class="number">2</span>, <span class="string">'c'</span> : <span class="number">3</span>, <span class="string">'d'</span> : <span class="number">4</span>, <span class="string">'e'</span> : <span class="number">5</span> &#125; ]</span><br><span class="line"></span><br><span class="line">json = demjson.encode(data)</span><br><span class="line">print json</span><br></pre></td></tr></table></figure></div>

<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JSON"><figure class="iseeu highlight /json"><table><tr><td class="code"><pre><span class="line">[&#123;<span class="attr">"a"</span>:<span class="number">1</span>,<span class="attr">"b"</span>:<span class="number">2</span>,<span class="attr">"c"</span>:<span class="number">3</span>,<span class="attr">"d"</span>:<span class="number">4</span>,<span class="attr">"e"</span>:<span class="number">5</span>&#125;]</span><br></pre></td></tr></table></figure></div>

<hr>
<h3 id="decode"><a href="#decode" class="headerlink" title="decode"></a>decode</h3><p>Python å¯ä»¥ä½¿ç”¨ demjson.decode() å‡½æ•°è§£ç  JSON æ•°æ®ã€‚è¯¥å‡½æ•°è¿”å› Python å­—æ®µçš„æ•°æ®ç±»å‹ã€‚</p>
<h4 id="è¯­æ³•-3"><a href="#è¯­æ³•-3" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ARMASM"><figure class="iseeu highlight /armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">demjson.decode</span>(<span class="keyword">self, </span>txt)</span><br></pre></td></tr></table></figure></div>

<h4 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><p>ä»¥ä¸‹å®ä¾‹å±•ç¤ºäº†Python å¦‚ä½•è§£ç  JSON å¯¹è±¡ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NIX"><figure class="iseeu highlight /nix"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="built_in">import</span> demjson</span><br><span class="line"></span><br><span class="line"><span class="attr">json</span> = '&#123;<span class="string">"a"</span>:<span class="number">1</span>,<span class="string">"b"</span>:<span class="number">2</span>,<span class="string">"c"</span>:<span class="number">3</span>,<span class="string">"d"</span>:<span class="number">4</span>,<span class="string">"e"</span>:<span class="number">5</span>&#125;';</span><br><span class="line"></span><br><span class="line"><span class="attr">text</span> = demjson.decode(json)</span><br><span class="line">print  text</span><br></pre></td></tr></table></figure></div>

<p>ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AWK"><figure class="iseeu highlight /awk"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">u'a'</span>: <span class="number">1</span>, <span class="string">u'c'</span>: <span class="number">3</span>, <span class="string">u'b'</span>: <span class="number">2</span>, <span class="string">u'e'</span>: <span class="number">5</span>, <span class="string">u'd'</span>: <span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure></div>]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(å››)</title>
    <url>/blog/Python/Python_id_19.html</url>
    <content><![CDATA[<h3 id="Python2-xä¸3-xç‰ˆæœ¬åŒºåˆ«"><a href="#Python2-xä¸3-xç‰ˆæœ¬åŒºåˆ«" class="headerlink" title="Python2.xä¸3.xç‰ˆæœ¬åŒºåˆ«"></a>Python2.xä¸3.xç‰ˆæœ¬åŒºåˆ«</h3><p>Pythonçš„3.0ç‰ˆæœ¬ï¼Œå¸¸è¢«ç§°ä¸ºPython 3000ï¼Œæˆ–ç®€ç§°Py3kã€‚ç›¸å¯¹äºPythonçš„æ—©æœŸç‰ˆæœ¬ï¼Œè¿™æ˜¯ä¸€ä¸ªè¾ƒå¤§çš„å‡çº§ã€‚</p>
<p>ä¸ºäº†ä¸å¸¦å…¥è¿‡å¤šçš„ç´¯èµ˜ï¼ŒPython 3.0åœ¨è®¾è®¡çš„æ—¶å€™æ²¡æœ‰è€ƒè™‘å‘ä¸‹ç›¸å®¹ã€‚</p>
<a id="more"></a>

<p>è®¸å¤šé’ˆå¯¹æ—©æœŸPythonç‰ˆæœ¬è®¾è®¡çš„ç¨‹å¼éƒ½æ— æ³•åœ¨Python 3.0ä¸Šæ­£å¸¸æ‰§è¡Œã€‚</p>
<p>ä¸ºäº†ç…§é¡¾ç°æœ‰ç¨‹å¼ï¼ŒPython 2.6ä½œä¸ºä¸€ä¸ªè¿‡æ¸¡ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä½¿ç”¨äº†Python 2.xçš„è¯­æ³•å’Œåº“ï¼ŒåŒæ—¶è€ƒè™‘äº†å‘Python 3.0çš„è¿ç§»ï¼Œå…è®¸ä½¿ç”¨éƒ¨åˆ†Python 3.0çš„è¯­æ³•ä¸å‡½æ•°ã€‚</p>
<p>æ–°çš„Pythonç¨‹å¼å»ºè®®ä½¿ç”¨Python 3.0ç‰ˆæœ¬çš„è¯­æ³•ã€‚</p>
<p>é™¤éæ‰§è¡Œç¯å¢ƒæ— æ³•å®‰è£…Python 3.0æˆ–è€…ç¨‹å¼æœ¬èº«ä½¿ç”¨äº†ä¸æ”¯æ´Python 3.0çš„ç¬¬ä¸‰æ–¹åº“ã€‚ç›®å‰ä¸æ”¯æ´Python 3.0çš„ç¬¬ä¸‰æ–¹åº“æœ‰Twisted, py2exe, PILç­‰ã€‚</p>
<p>å¤§å¤šæ•°ç¬¬ä¸‰æ–¹åº“éƒ½æ­£åœ¨åŠªåŠ›åœ°ç›¸å®¹Python 3.0ç‰ˆæœ¬ã€‚å³ä½¿æ— æ³•ç«‹å³ä½¿ç”¨Python 3.0ï¼Œä¹Ÿå»ºè®®ç¼–å†™ç›¸å®¹Python 3.0ç‰ˆæœ¬çš„ç¨‹å¼ï¼Œç„¶åä½¿ç”¨Python 2.6, Python 2.7æ¥æ‰§è¡Œã€‚</p>
<p>Python 3.0çš„å˜åŒ–ä¸»è¦åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢:</p>
<hr>
<h4 id="print-å‡½æ•°"><a href="#print-å‡½æ•°" class="headerlink" title="print å‡½æ•°"></a>print å‡½æ•°</h4><p>printè¯­å¥æ²¡æœ‰äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯print()å‡½æ•°ã€‚ Python 2.6ä¸Python 2.7éƒ¨åˆ†åœ°æ”¯æŒè¿™ç§å½¢å¼çš„printè¯­æ³•ã€‚åœ¨Python 2.6ä¸Python 2.7é‡Œé¢ï¼Œä»¥ä¸‹ä¸‰ç§å½¢å¼æ˜¯ç­‰ä»·çš„ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line"><span class="builtin-name">print</span> <span class="string">"fish"</span></span><br><span class="line"><span class="builtin-name">print</span> (<span class="string">"fish"</span>) #æ³¨æ„printåé¢æœ‰ä¸ªç©ºæ ¼</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">"fish"</span>) #<span class="builtin-name">print</span>()ä¸èƒ½å¸¦æœ‰ä»»ä½•å…¶å®ƒå‚æ•°</span><br></pre></td></tr></table></figure></div>

<p>ç„¶è€Œï¼ŒPython 2.6å®é™…å·²ç»æ”¯æŒæ–°çš„print()è¯­æ³•ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ import print_function</span><br><span class="line"><span class="builtin-name">print</span>(<span class="string">"fish"</span>, <span class="string">"panda"</span>, <span class="attribute">sep</span>=<span class="string">', '</span>)</span><br></pre></td></tr></table></figure></div>

<hr>
<h4 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h4><p>Python 2 æœ‰ ASCII str() ç±»å‹ï¼Œunicode() æ˜¯å•ç‹¬çš„ï¼Œä¸æ˜¯ byte ç±»å‹ã€‚</p>
<p>ç°åœ¨ï¼Œ åœ¨ Python 3ï¼Œæˆ‘ä»¬æœ€ç»ˆæœ‰äº† Unicode (utf-8) å­—ç¬¦ä¸²ï¼Œä»¥åŠä¸€ä¸ªå­—èŠ‚ç±»ï¼šbyte å’Œ bytearraysã€‚</p>
<p>ç”±äº Python3.X æºç æ–‡ä»¶é»˜è®¤ä½¿ç”¨utf-8ç¼–ç ï¼Œè¿™å°±ä½¿å¾—ä»¥ä¸‹ä»£ç æ˜¯åˆæ³•çš„ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="RUBY"><figure class="iseeu highlight /ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; ä¸­å›½ = <span class="string">'china'</span> </span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;print(ä¸­å›½) </span><br><span class="line">china</span><br></pre></td></tr></table></figure></div>

<p>Python 2.x</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="TAGGERSCRIPT"><figure class="iseeu highlight /taggerscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; str = "æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨"</span><br><span class="line">&gt;&gt;&gt; str</span><br><span class="line">'<span class="symbol">\x</span>e6<span class="symbol">\x</span>88<span class="symbol">\x</span>91<span class="symbol">\x</span>e7<span class="symbol">\x</span>88<span class="symbol">\x</span>b1<span class="symbol">\x</span>e5<span class="symbol">\x</span>8c<span class="symbol">\x</span>97<span class="symbol">\x</span>e4<span class="symbol">\x</span>ba<span class="symbol">\x</span>ac<span class="symbol">\x</span>e5<span class="symbol">\x</span>a4<span class="symbol">\x</span>a9<span class="symbol">\x</span>e5<span class="symbol">\x</span>ae<span class="symbol">\x</span>89<span class="symbol">\x</span>e9<span class="symbol">\x</span>97<span class="symbol">\x</span>a8'</span><br><span class="line">&gt;&gt;&gt; str = u"æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨"</span><br><span class="line">&gt;&gt;&gt; str</span><br><span class="line">u'<span class="symbol">\u</span>6211<span class="symbol">\u</span>7231<span class="symbol">\u</span>5317<span class="symbol">\u</span>4eac<span class="symbol">\u</span>5929<span class="symbol">\u</span>5b89<span class="symbol">\u</span>95e8'</span><br></pre></td></tr></table></figure></div>

<p>Python 3.x</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="RUBY"><figure class="iseeu highlight /ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; str = <span class="string">"æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨"</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; str</span><br><span class="line"><span class="string">'æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨'</span></span><br></pre></td></tr></table></figure></div>

<hr>
<h4 id="é™¤æ³•è¿ç®—"><a href="#é™¤æ³•è¿ç®—" class="headerlink" title="é™¤æ³•è¿ç®—"></a>é™¤æ³•è¿ç®—</h4><p>Pythonä¸­çš„é™¤æ³•è¾ƒå…¶å®ƒè¯­è¨€æ˜¾å¾—éå¸¸é«˜ç«¯ï¼Œæœ‰å¥—å¾ˆå¤æ‚çš„è§„åˆ™ã€‚Pythonä¸­çš„é™¤æ³•æœ‰ä¸¤ä¸ªè¿ç®—ç¬¦ï¼Œ/å’Œ//</p>
<p>é¦–å…ˆæ¥è¯´/é™¤æ³•:</p>
<p>åœ¨python 2.xä¸­/é™¤æ³•å°±è·Ÿæˆ‘ä»¬ç†Ÿæ‚‰çš„å¤§å¤šæ•°è¯­è¨€ï¼Œæ¯”å¦‚Javaå•ŠCå•Šå·®ä¸å¤šï¼Œæ•´æ•°ç›¸é™¤çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒæŠŠå°æ•°éƒ¨åˆ†å®Œå…¨å¿½ç•¥æ‰ï¼Œæµ®ç‚¹æ•°é™¤æ³•ä¼šä¿ç•™å°æ•°ç‚¹çš„éƒ¨åˆ†å¾—åˆ°ä¸€ä¸ªæµ®ç‚¹æ•°çš„ç»“æœã€‚</p>
<p>åœ¨python 3.xä¸­/é™¤æ³•ä¸å†è¿™ä¹ˆåšäº†ï¼Œå¯¹äºæ•´æ•°ä¹‹é—´çš„ç›¸é™¤ï¼Œç»“æœä¹Ÿä¼šæ˜¯æµ®ç‚¹æ•°ã€‚</p>
<p>Python 2.x:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="number">1</span> / <span class="number">2</span></span><br><span class="line"><span class="number">0</span></span><br><span class="line">&gt;&gt;&gt; <span class="number">1.0</span> / <span class="number">2.0</span></span><br><span class="line"><span class="number">0.5</span></span><br></pre></td></tr></table></figure></div>

<p>Python 3.x:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="number">1</span>/<span class="number">2</span></span><br><span class="line"><span class="number">0.5</span></span><br></pre></td></tr></table></figure></div>

<p>è€Œå¯¹äº//é™¤æ³•ï¼Œè¿™ç§é™¤æ³•å«åšflooré™¤æ³•ï¼Œä¼šå¯¹é™¤æ³•çš„ç»“æœè‡ªåŠ¨è¿›è¡Œä¸€ä¸ªflooræ“ä½œï¼Œåœ¨python 2.xå’Œpython 3.xä¸­æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>python 2.x:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="number">-1</span> <span class="comment">// 2</span></span><br><span class="line"><span class="number">-1</span></span><br></pre></td></tr></table></figure></div>

<p>python 3.x:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="number">-1</span> <span class="comment">// 2</span></span><br><span class="line"><span class="number">-1</span></span><br></pre></td></tr></table></figure></div>

<p>æ³¨æ„çš„æ˜¯å¹¶ä¸æ˜¯èˆå¼ƒå°æ•°éƒ¨åˆ†ï¼Œè€Œæ˜¯æ‰§è¡Œ floor æ“ä½œï¼Œå¦‚æœè¦æˆªå–æ•´æ•°éƒ¨åˆ†ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ math æ¨¡å—çš„ trunc å‡½æ•°</p>
<p>python 3.x:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="keyword">import</span> math</span><br><span class="line">&gt;&gt;&gt; math.trunc(<span class="number">1</span> / <span class="number">2</span>)</span><br><span class="line"><span class="number">0</span></span><br><span class="line">&gt;&gt;&gt; math.trunc(<span class="number">-1</span> / <span class="number">2</span>)</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h4><p>åœ¨ Python 3 ä¸­å¤„ç†å¼‚å¸¸ä¹Ÿè½»å¾®çš„æ”¹å˜äº†ï¼Œåœ¨ Python 3 ä¸­æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ as ä½œä¸ºå…³é”®è¯ã€‚</p>
<p>æ•è·å¼‚å¸¸çš„è¯­æ³•ç”± <strong>except exc, var</strong> æ”¹ä¸º <strong>except exc as var</strong>ã€‚</p>
<p>ä½¿ç”¨è¯­æ³•except (exc1, exc2) as varå¯ä»¥åŒæ—¶æ•è·å¤šç§ç±»åˆ«çš„å¼‚å¸¸ã€‚ Python 2.6å·²ç»æ”¯æŒè¿™ä¸¤ç§è¯­æ³•ã€‚</p>
<ul>
<li>\1. åœ¨2.xæ—¶ä»£ï¼Œæ‰€æœ‰ç±»å‹çš„å¯¹è±¡éƒ½æ˜¯å¯ä»¥è¢«ç›´æ¥æŠ›å‡ºçš„ï¼Œåœ¨3.xæ—¶ä»£ï¼Œåªæœ‰ç»§æ‰¿è‡ªBaseExceptionçš„å¯¹è±¡æ‰å¯ä»¥è¢«æŠ›å‡ºã€‚</li>
<li>\2. 2.x raiseè¯­å¥ä½¿ç”¨é€—å·å°†æŠ›å‡ºå¯¹è±¡ç±»å‹å’Œå‚æ•°åˆ†å¼€ï¼Œ3.xå–æ¶ˆäº†è¿™ç§å¥‡è‘©çš„å†™æ³•ï¼Œç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°æŠ›å‡ºå¯¹è±¡å³å¯ã€‚</li>
</ul>
<p>åœ¨2.xæ—¶ä»£ï¼Œå¼‚å¸¸åœ¨ä»£ç ä¸­é™¤äº†è¡¨ç¤ºç¨‹åºé”™è¯¯ï¼Œè¿˜ç»å¸¸åšä¸€äº›æ™®é€šæ§åˆ¶ç»“æ„åº”è¯¥åšçš„äº‹æƒ…ï¼Œåœ¨3.xä¸­å¯ä»¥çœ‹å‡ºï¼Œè®¾è®¡è€…è®©å¼‚å¸¸å˜çš„æ›´åŠ ä¸“ä¸€ï¼Œåªæœ‰åœ¨é”™è¯¯å‘ç”Ÿçš„æƒ…å†µæ‰èƒ½å»ç”¨å¼‚å¸¸æ•è·è¯­å¥æ¥å¤„ç†ã€‚</p>
<hr>
<h4 id="xrange"><a href="#xrange" class="headerlink" title="xrange"></a>xrange</h4><p>åœ¨ Python 2 ä¸­ xrange() åˆ›å»ºè¿­ä»£å¯¹è±¡çš„ç”¨æ³•æ˜¯éå¸¸æµè¡Œçš„ã€‚æ¯”å¦‚ï¼š for å¾ªç¯æˆ–è€…æ˜¯åˆ—è¡¨/é›†åˆ/å­—å…¸æ¨å¯¼å¼ã€‚</p>
<p>è¿™ä¸ªè¡¨ç°ååˆ†åƒç”Ÿæˆå™¨ï¼ˆæ¯”å¦‚ã€‚â€æƒ°æ€§æ±‚å€¼â€ï¼‰ã€‚ä½†æ˜¯è¿™ä¸ª xrange-iterable æ˜¯æ— ç©·çš„ï¼Œæ„å‘³ç€ä½ å¯ä»¥æ— é™éå†ã€‚</p>
<p>ç”±äºå®ƒçš„æƒ°æ€§æ±‚å€¼ï¼Œå¦‚æœä½ ä¸å¾—ä»…ä»…ä¸éå†å®ƒä¸€æ¬¡ï¼Œxrange() å‡½æ•° æ¯” range() æ›´å¿«ï¼ˆæ¯”å¦‚ for å¾ªç¯ï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå¯¹æ¯”è¿­ä»£ä¸€æ¬¡ï¼Œä¸å»ºè®®ä½ é‡å¤è¿­ä»£å¤šæ¬¡ï¼Œå› ä¸ºç”Ÿæˆå™¨æ¯æ¬¡éƒ½ä»å¤´å¼€å§‹ã€‚</p>
<p>åœ¨ Python 3 ä¸­ï¼Œrange() æ˜¯åƒ xrange() é‚£æ ·å®ç°ä»¥è‡³äºä¸€ä¸ªä¸“é—¨çš„ xrange() å‡½æ•°éƒ½ä¸å†å­˜åœ¨ï¼ˆåœ¨ Python 3 ä¸­ xrange() ä¼šæŠ›å‡ºå‘½åå¼‚å¸¸ï¼‰ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">n = <span class="number">10000</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_range</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_xrange</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(n):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div>

<p>Python 2</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SAS"><figure class="iseeu highlight /sas"><table><tr><td class="code"><pre><span class="line">print <span class="string">'Python'</span>, python_versi<span class="meta">on(</span>)</span><br><span class="line"></span><br><span class="line">print <span class="string">'\ntiming range()'</span> </span><br><span class="line"><span class="name">%timeit</span> test<span class="meta">_range(</span>n)</span><br><span class="line"></span><br><span class="line">print <span class="string">'\n\ntiming xrange()'</span> </span><br><span class="line"><span class="name">%timeit</span> test_<span class="meta">xrange(</span>n)</span><br><span class="line"></span><br><span class="line">Python 2.7.6</span><br><span class="line"></span><br><span class="line">timing<span class="meta"> range(</span>)</span><br><span class="line">1000 loops, best of 3: 433 Âµs per loop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">timing <span class="meta">xrange(</span>)</span><br><span class="line">1000 loops, best of 3: 350 Âµs per loop</span><br></pre></td></tr></table></figure></div>

<p>Python 3</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="SAS"><figure class="iseeu highlight /sas"><table><tr><td class="code"><pre><span class="line">p<span class="meta">rint(</span><span class="string">'Python'</span>, python_versi<span class="meta">on(</span>))</span><br><span class="line"></span><br><span class="line">p<span class="meta">rint(</span><span class="string">'\ntiming range()'</span>)</span><br><span class="line"><span class="name">%timeit</span> test<span class="meta">_range(</span>n)</span><br><span class="line"></span><br><span class="line">Python 3.4.1</span><br><span class="line"></span><br><span class="line">timing<span class="meta"> range(</span>)</span><br><span class="line">1000 loops, best of 3: 520 Âµs per loop</span><br><span class="line">p<span class="meta">rint(</span><span class="meta">xrange(</span>10))</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">NameError                                 Traceback (most recent <span class="meta">call</span> last)</span><br><span class="line">&lt;ipython-<span class="meta">input</span>-5-5d8f9b79ea70&gt; <span class="meta">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; 1 p<span class="meta">rint(</span><span class="meta">xrange(</span>10))</span><br><span class="line"></span><br><span class="line">NameError: name <span class="string">'xrange'</span> is <span class="meta">not</span> defined</span><br></pre></td></tr></table></figure></div>

<h4 id="å…«è¿›åˆ¶å­—é¢é‡è¡¨ç¤º"><a href="#å…«è¿›åˆ¶å­—é¢é‡è¡¨ç¤º" class="headerlink" title="å…«è¿›åˆ¶å­—é¢é‡è¡¨ç¤º"></a>å…«è¿›åˆ¶å­—é¢é‡è¡¨ç¤º</h4><p>å…«è¿›åˆ¶æ•°å¿…é¡»å†™æˆ0o777ï¼ŒåŸæ¥çš„å½¢å¼0777ä¸èƒ½ç”¨äº†ï¼›äºŒè¿›åˆ¶å¿…é¡»å†™æˆ0b111ã€‚</p>
<p>æ–°å¢äº†ä¸€ä¸ªbin()å‡½æ•°ç”¨äºå°†ä¸€ä¸ªæ•´æ•°è½¬æ¢æˆäºŒè¿›åˆ¶å­—ä¸²ã€‚ Python 2.6å·²ç»æ”¯æŒè¿™ä¸¤ç§è¯­æ³•ã€‚</p>
<p>åœ¨Python 3.xä¸­ï¼Œè¡¨ç¤ºå…«è¿›åˆ¶å­—é¢é‡çš„æ–¹å¼åªæœ‰ä¸€ç§ï¼Œå°±æ˜¯0o1000ã€‚</p>
<p>python 2.x</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="number">0</span>o1000</span><br><span class="line"><span class="number">512</span></span><br><span class="line">&gt;&gt;&gt; <span class="number">01000</span></span><br><span class="line"><span class="number">512</span></span><br></pre></td></tr></table></figure></div>

<p>python 3.x</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="number">01000</span></span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    <span class="number">01000</span></span><br><span class="line">        ^</span><br><span class="line">SyntaxError: invalid token</span><br><span class="line">&gt;&gt;&gt; <span class="number">0</span>o1000</span><br><span class="line"><span class="number">512</span></span><br></pre></td></tr></table></figure></div>

<hr>
<h4 id="ä¸ç­‰è¿ç®—ç¬¦"><a href="#ä¸ç­‰è¿ç®—ç¬¦" class="headerlink" title="ä¸ç­‰è¿ç®—ç¬¦"></a>ä¸ç­‰è¿ç®—ç¬¦</h4><p>Python 2.xä¸­ä¸ç­‰äºæœ‰ä¸¤ç§å†™æ³• != å’Œ &lt;&gt;</p>
<p>Python 3.xä¸­å»æ‰äº†&lt;&gt;, åªæœ‰!=ä¸€ç§å†™æ³•ï¼Œè¿˜å¥½ï¼Œæˆ‘ä»æ¥æ²¡æœ‰ä½¿ç”¨&lt;&gt;çš„ä¹ æƒ¯</p>
<hr>
<h4 id="å»æ‰äº†reprè¡¨è¾¾å¼"><a href="#å»æ‰äº†reprè¡¨è¾¾å¼" class="headerlink" title="å»æ‰äº†reprè¡¨è¾¾å¼``"></a>å»æ‰äº†reprè¡¨è¾¾å¼``</h4><p>Python 2.x ä¸­åå¼•å·``ç›¸å½“äºreprå‡½æ•°çš„ä½œç”¨</p>
<p>Python 3.x ä¸­å»æ‰äº†``è¿™ç§å†™æ³•ï¼Œåªå…è®¸ä½¿ç”¨reprå‡½æ•°ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†ä½¿ä»£ç çœ‹ä¸Šå»æ›´æ¸…æ™°ä¹ˆï¼Ÿä¸è¿‡æˆ‘æ„Ÿè§‰ç”¨reprçš„æœºä¼šå¾ˆå°‘ï¼Œä¸€èˆ¬åªåœ¨debugçš„æ—¶å€™æ‰ç”¨ï¼Œå¤šæ•°æ—¶å€™è¿˜æ˜¯ç”¨strå‡½æ•°æ¥ç”¨å­—ç¬¦ä¸²æè¿°å¯¹è±¡ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="REASONML"><figure class="iseeu highlight /reasonml"><table><tr><td class="code"><pre><span class="line">def send<span class="constructor">Mail(<span class="params">from_</span>: <span class="params">str</span>, <span class="params">to</span>: <span class="params">str</span>, <span class="params">title</span>: <span class="params">str</span>, <span class="params">body</span>: <span class="params">str</span>)</span> -&gt; <span class="built_in">bool</span>:</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure></div>

<hr>
<h4 id="å¤šä¸ªæ¨¡å—è¢«æ”¹åï¼ˆæ ¹æ®PEP8ï¼‰"><a href="#å¤šä¸ªæ¨¡å—è¢«æ”¹åï¼ˆæ ¹æ®PEP8ï¼‰" class="headerlink" title="å¤šä¸ªæ¨¡å—è¢«æ”¹åï¼ˆæ ¹æ®PEP8ï¼‰"></a>å¤šä¸ªæ¨¡å—è¢«æ”¹åï¼ˆæ ¹æ®PEP8ï¼‰</h4><table>
<thead>
<tr>
<th align="left">æ—§çš„åå­—</th>
<th align="left">æ–°çš„åå­—</th>
</tr>
</thead>
<tbody><tr>
<td align="left">_winreg</td>
<td align="left">winreg</td>
</tr>
<tr>
<td align="left">ConfigParser</td>
<td align="left">configparser</td>
</tr>
<tr>
<td align="left">copy_reg</td>
<td align="left">copyreg</td>
</tr>
<tr>
<td align="left">Queue</td>
<td align="left">queue</td>
</tr>
<tr>
<td align="left">SocketServer</td>
<td align="left">socketserver</td>
</tr>
<tr>
<td align="left">repr</td>
<td align="left">reprlib</td>
</tr>
</tbody></table>
<p>StringIOæ¨¡å—ç°åœ¨è¢«åˆå¹¶åˆ°æ–°çš„ioæ¨¡ç»„å†…ã€‚ new, md5, gopherlibç­‰æ¨¡å—è¢«åˆ é™¤ã€‚ Python 2.6å·²ç»æ”¯æ´æ–°çš„ioæ¨¡ç»„ã€‚</p>
<p>httplib, BaseHTTPServer, CGIHTTPServer, SimpleHTTPServer, Cookie, cookielibè¢«åˆå¹¶åˆ°httpåŒ…å†…ã€‚</p>
<p>å–æ¶ˆäº†execè¯­å¥ï¼Œåªå‰©ä¸‹exec()å‡½æ•°ã€‚ Python 2.6å·²ç»æ”¯æ´exec()å‡½æ•°ã€‚</p>
<h4 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h4><p>1ï¼‰Py3.Xå»é™¤äº†longç±»å‹ï¼Œç°åœ¨åªæœ‰ä¸€ç§æ•´å‹â€”â€”intï¼Œä½†å®ƒçš„è¡Œä¸ºå°±åƒ2.Xç‰ˆæœ¬çš„long</p>
<p>2ï¼‰æ–°å¢äº†bytesç±»å‹ï¼Œå¯¹åº”äº2.Xç‰ˆæœ¬çš„å…«ä½ä¸²ï¼Œå®šä¹‰ä¸€ä¸ªbyteså­—é¢é‡çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="RUBY"><figure class="iseeu highlight /ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; b = b<span class="string">'china'</span> </span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; type(b) </span><br><span class="line">&lt;type <span class="string">'bytes'</span>&gt;</span><br></pre></td></tr></table></figure></div>

<p>str å¯¹è±¡å’Œ bytes å¯¹è±¡å¯ä»¥ä½¿ç”¨ .encode() (<strong>str -&gt; bytes</strong>) æˆ– .decode() (<strong>bytes -&gt; str</strong>)æ–¹æ³•ç›¸äº’è½¬åŒ–ã€‚</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="RUBY"><figure class="iseeu highlight /ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; s = b.decode() </span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; s </span><br><span class="line"><span class="string">'china'</span> </span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; b1 = s.encode() </span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; b1 </span><br><span class="line">b<span class="string">'china'</span></span><br></pre></td></tr></table></figure></div>

<p>3ï¼‰dictçš„.keys()ã€.items å’Œ.values()æ–¹æ³•è¿”å›è¿­ä»£å™¨ï¼Œè€Œä¹‹å‰çš„iterkeys()ç­‰å‡½æ•°éƒ½è¢«åºŸå¼ƒã€‚åŒæ—¶å»æ‰çš„è¿˜æœ‰ dict.has_key()ï¼Œç”¨ inæ›¿ä»£å®ƒå§ ã€‚</p>
<h4 id="æ‰“å¼€æ–‡ä»¶"><a href="#æ‰“å¼€æ–‡ä»¶" class="headerlink" title="æ‰“å¼€æ–‡ä»¶"></a>æ‰“å¼€æ–‡ä»¶</h4><p>åŸï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="GAMS"><figure class="iseeu highlight /gams"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">file</span>(<span class="params"> ..... </span>)</span></span><br><span class="line">æˆ– </span><br><span class="line"><span class="function"><span class="title">open</span>(<span class="params">.....</span>)</span></span><br></pre></td></tr></table></figure></div>

<p>æ”¹ä¸ºåªèƒ½ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="GAMS"><figure class="iseeu highlight /gams"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">open</span>(<span class="params">.....</span>)</span></span><br></pre></td></tr></table></figure></div>

<p>ä»é”®ç›˜å½•å…¥ä¸€ä¸ªå­—ç¬¦ä¸²</p>
<p>åŸ:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="STYLUS"><figure class="iseeu highlight /stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">raw_input</span><span class="params">( <span class="string">"æç¤ºä¿¡æ¯"</span> )</span></span></span><br></pre></td></tr></table></figure></div>

<p>æ”¹ä¸º:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="STYLUS"><figure class="iseeu highlight /stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">input</span><span class="params">( <span class="string">"æç¤ºä¿¡æ¯"</span> )</span></span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨python2.xä¸­raw_input()å’Œinput( )ï¼Œä¸¤ä¸ªå‡½æ•°éƒ½å­˜åœ¨ï¼Œå…¶ä¸­åŒºåˆ«ä¸ºï¼š</p>
<ul>
<li>raw_input()â€”å°†æ‰€æœ‰è¾“å…¥ä½œä¸ºå­—ç¬¦ä¸²çœ‹å¾…ï¼Œè¿”å›å­—ç¬¦ä¸²ç±»å‹</li>
<li>input()â€”â€“åªèƒ½æ¥æ”¶â€æ•°å­—â€çš„è¾“å…¥ï¼Œåœ¨å¯¹å¾…çº¯æ•°å­—è¾“å…¥æ—¶å…·æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œå®ƒè¿”å›æ‰€è¾“å…¥çš„æ•°å­—çš„ç±»å‹ï¼ˆint, float ï¼‰</li>
</ul>
<p>åœ¨python3.xä¸­raw_input()å’Œinput( )è¿›è¡Œäº†æ•´åˆï¼Œå»é™¤äº†raw_input()ï¼Œä»…ä¿ç•™äº†input()å‡½æ•°ï¼Œå…¶æ¥æ”¶ä»»æ„ä»»æ€§è¾“å…¥ï¼Œå°†æ‰€æœ‰è¾“å…¥é»˜è®¤ä¸ºå­—ç¬¦ä¸²å¤„ç†ï¼Œå¹¶è¿”å›å­—ç¬¦ä¸²ç±»å‹ã€‚</p>
<h4 id="mapã€filter-å’Œ-reduce"><a href="#mapã€filter-å’Œ-reduce" class="headerlink" title="mapã€filter å’Œ reduce"></a>mapã€filter å’Œ reduce</h4><p>è¿™ä¸‰ä¸ªå‡½æ•°å·ç§°æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä»£è¡¨ã€‚åœ¨ Python3.x å’Œ Python2.x ä¸­ä¹Ÿæœ‰äº†å¾ˆå¤§çš„å·®å¼‚ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆç®€å•çš„åœ¨ Python2.x çš„äº¤äº’ä¸‹è¾“å…¥ map å’Œ filter,çœ‹åˆ°å®ƒä»¬ä¸¤è€…çš„ç±»å‹æ˜¯ built-in function(å†…ç½®å‡½æ•°):</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; map</span><br><span class="line">&lt;built-in function map&gt;</span><br><span class="line">&gt;&gt;&gt; filter</span><br><span class="line">&lt;built-in function filter&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

<p>å®ƒä»¬è¾“å‡ºçš„ç»“æœç±»å‹éƒ½æ˜¯åˆ—è¡¨:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; map(lambda x:x *<span class="number">2</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br><span class="line">&gt;&gt;&gt; filter(lambda x:x %<span class="number">2</span> ==<span class="number">0</span>,range(<span class="number">10</span>))</span><br><span class="line">[<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

<p>ä½†æ˜¯åœ¨Python 3.xä¸­å®ƒä»¬å´ä¸æ˜¯è¿™ä¸ªæ ·å­äº†ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line">&gt;&gt;&gt; map</span><br><span class="line">&lt;<span class="keyword">class</span> '<span class="symbol">map</span>'&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="symbol">map</span>(<span class="symbol">print,</span>[<span class="symbol">1,<span class="symbol">2</span>,<span class="symbol">3</span></span>])</span><br><span class="line">&lt;<span class="symbol">map</span> <span class="symbol">object</span> <span class="symbol">at</span> <span class="symbol">0x10d8bd400</span>&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="symbol">filter</span></span><br><span class="line">&lt;<span class="symbol">class</span> '<span class="symbol">filter</span>'&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="symbol">filter</span>(<span class="symbol">lambda</span> <span class="symbol">x:<span class="symbol">x</span></span> % <span class="symbol">2</span> == <span class="symbol">0, <span class="symbol">range</span></span>(<span class="symbol">10</span>))</span><br><span class="line">&lt;<span class="symbol">filter</span> <span class="symbol">object</span> <span class="symbol">at</span> <span class="symbol">0x10d8bd3c8</span>&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

<p>é¦–å…ˆå®ƒä»¬ä»å‡½æ•°å˜æˆäº†ç±»ï¼Œå…¶æ¬¡ï¼Œå®ƒä»¬çš„è¿”å›ç»“æœä¹Ÿä»å½“åˆçš„åˆ—è¡¨æˆäº†ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡, æˆ‘ä»¬å°è¯•ç”¨ next å‡½æ•°æ¥è¿›è¡Œæ‰‹å·¥è¿­ä»£:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="RUBY"><figure class="iseeu highlight /ruby"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; f =filter(lambda <span class="symbol">x:</span>x %<span class="number">2</span> ==<span class="number">0</span>, range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; next(f)</span><br><span class="line"><span class="number">0</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; next(f)</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; next(f)</span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; next(f)</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;</span><br></pre></td></tr></table></figure></div>

<p>å¯¹äºæ¯”è¾ƒé«˜ç«¯çš„ reduce å‡½æ•°ï¼Œå®ƒåœ¨ Python 3.x ä¸­å·²ç»ä¸å±äº built-in äº†ï¼Œè¢«æŒªåˆ° functools æ¨¡å—å½“ä¸­ã€‚</p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç¨‹çº¿ç¨‹åç¨‹</title>
    <url>/blog/Spider/Spider_id_14.html</url>
    <content><![CDATA[<h2 id="å¼‚æ­¥å¤šè¿›ç¨‹çˆ¬è™«å®ç°"><a href="#å¼‚æ­¥å¤šè¿›ç¨‹çˆ¬è™«å®ç°" class="headerlink" title="å¼‚æ­¥å¤šè¿›ç¨‹çˆ¬è™«å®ç°:"></a>å¼‚æ­¥å¤šè¿›ç¨‹çˆ¬è™«å®ç°:</h2><a id="more"></a>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing.dummy <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># åˆ›å»ºçº¿ç¨‹æ± </span></span><br><span class="line">pool = Pool(<span class="number">3</span>)</span><br><span class="line"><span class="comment"># å‡†å¤‡ç½‘å€åˆ—è¡¨</span></span><br><span class="line">url_list = [<span class="string">'www.baidu.com'</span>,<span class="string">'www.baidu.com'</span>,<span class="string">'www.baidu.com'</span>]</span><br><span class="line"><span class="comment"># åˆ›å»ºæ“ä½œå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_requests</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="comment"># å‡½æ•°è¿”å›è·å–åˆ°çš„ç½‘é¡µæºç çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> requests.get(url).text</span><br><span class="line"><span class="comment"># å°†è¿”å›çš„é¡µé¢æºç æ•°æ®æ¥æ”¶</span></span><br><span class="line">request_text_list = pool.map(get_requests,url_list)</span><br></pre></td></tr></table></figure></div>





<h2 id="å•çº¿ç¨‹å¤šä»»åŠ¡å¼‚æ­¥åç¨‹"><a href="#å•çº¿ç¨‹å¤šä»»åŠ¡å¼‚æ­¥åç¨‹" class="headerlink" title="å•çº¿ç¨‹å¤šä»»åŠ¡å¼‚æ­¥åç¨‹:"></a>å•çº¿ç¨‹å¤šä»»åŠ¡å¼‚æ­¥åç¨‹:</h2><h3 id="æ­£å¸¸åç¨‹å®ç°"><a href="#æ­£å¸¸åç¨‹å®ç°" class="headerlink" title="æ­£å¸¸åç¨‹å®ç°:"></a>æ­£å¸¸åç¨‹å®ç°:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å•åç¨‹å†™æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> func(url):</span><br><span class="line">    print(<span class="string">'start'</span>)</span><br><span class="line">    time.sleep(<span class="number">3</span>)</span><br><span class="line">    print(<span class="string">'stop'</span>)</span><br><span class="line">    </span><br><span class="line">f = func(url)</span><br><span class="line">task = asynic.ensure_future(f)</span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until+complete(task)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šé‡åç¨‹å†™æ³•</span></span><br><span class="line"><span class="comment"># å¤šçº¿ç¨‹æ—¶,éœ€è¦è®¾ç½®çº¿ç¨‹æŒ‚èµ·,å‚è€ƒä¸‹åˆ—ä»£ç </span></span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> func(url):</span><br><span class="line">    print(<span class="string">'start'</span>)</span><br><span class="line">    <span class="comment"># åœ¨éœ€è¦è¿›è¡ŒæŒ‚èµ·çš„ä½ç½®è¿›è¡Œçº¿ç¨‹ç­‰å¾…å£°æ˜,å³await</span></span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">3</span>)</span><br><span class="line">    print(<span class="string">'stop'</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">urls = [</span><br><span class="line">	<span class="string">'www.baidu.com'</span>,  </span><br><span class="line">	<span class="string">'www.baidu.com'</span>, </span><br><span class="line">	<span class="string">'www.baidu.com'</span>, </span><br><span class="line">	<span class="string">'www.baidu.com'</span>, </span><br><span class="line">	<span class="string">'www.baidu.com'</span>      </span><br><span class="line">]</span><br><span class="line">tasks = []</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    f = func(url)</span><br><span class="line">    task = asynic.ensure_future(f)</span><br><span class="line">    <span class="comment"># åœ¨åˆ›å»ºå¥½æ–°çš„å†™æˆä¹‹å,å°†å…¶æ·»åŠ åˆ°åç¨‹åˆ—è¡¨ä¸­</span></span><br><span class="line">    tasks.append(task)</span><br><span class="line"><span class="comment"># åˆ›å»ºäº‹ä»¶å¾ªç¯</span></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"><span class="comment"># å°†åç¨‹åˆ—è¡¨æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­å»</span></span><br><span class="line"><span class="comment"># åœ¨æ³¨å†Œåˆ—è¡¨ç±»å‹æ—¶ï¼Œéœ€è¦ç”šè‡³çº¿ç¨‹æŒ‚èµ·ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨asyncioã€‚waitè¿›è¡Œç‰¹æ®Šå£°æ˜</span></span><br><span class="line">loop.run_until+complete(asyncio.wait(tasks))</span><br></pre></td></tr></table></figure></div>



<h3 id="åœ¨ä½¿ç”¨åç¨‹è¿›è¡Œç½‘é¡µçˆ¬å–çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•ä½¿ç”¨awaitæŒ‚èµ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œrequestså¹¶ä¸æ”¯æŒæŒ‚èµ·ï¼š"><a href="#åœ¨ä½¿ç”¨åç¨‹è¿›è¡Œç½‘é¡µçˆ¬å–çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•ä½¿ç”¨awaitæŒ‚èµ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œrequestså¹¶ä¸æ”¯æŒæŒ‚èµ·ï¼š" class="headerlink" title="åœ¨ä½¿ç”¨åç¨‹è¿›è¡Œç½‘é¡µçˆ¬å–çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•ä½¿ç”¨awaitæŒ‚èµ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œrequestså¹¶ä¸æ”¯æŒæŒ‚èµ·ï¼š"></a>åœ¨ä½¿ç”¨åç¨‹è¿›è¡Œç½‘é¡µçˆ¬å–çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•ä½¿ç”¨awaitæŒ‚èµ·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œrequestså¹¶ä¸æ”¯æŒæŒ‚èµ·ï¼š</h3><h3 id="åœ¨è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨æ”¯æŒawaitçš„è¯·æ±‚æ¨¡å—ã€‚"><a href="#åœ¨è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨æ”¯æŒawaitçš„è¯·æ±‚æ¨¡å—ã€‚" class="headerlink" title="åœ¨è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨æ”¯æŒawaitçš„è¯·æ±‚æ¨¡å—ã€‚"></a>åœ¨è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨æ”¯æŒawaitçš„è¯·æ±‚æ¨¡å—ã€‚</h3><h3 id="ä¹Ÿå°±æ˜¯aiohttpã€‚"><a href="#ä¹Ÿå°±æ˜¯aiohttpã€‚" class="headerlink" title="ä¹Ÿå°±æ˜¯aiohttpã€‚"></a>ä¹Ÿå°±æ˜¯aiohttpã€‚</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> aiohttp</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="comment"># æ„å»ºaiohttpè¯·æ±‚</span></span><br><span class="line">    <span class="comment"># æ¯ä¸€æ¬¡è¯·æ±‚éƒ½éœ€è¦å¯¹</span></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> aiohttp.ClientSession() <span class="keyword">as</span> a:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> <span class="keyword">await</span> a.get(url=url) <span class="keyword">as</span> response:</span><br><span class="line">            result = <span class="keyword">await</span> response.text()</span><br><span class="line">            print(result)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">urls = [</span><br><span class="line">    <span class="string">'https://www.baidu.com'</span>,</span><br><span class="line">    <span class="string">'https://www.baidu.com'</span>,</span><br><span class="line">    <span class="string">'https://www.baidu.com'</span></span><br><span class="line">]</span><br><span class="line">tasks = []</span><br><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    f = func(url)</span><br><span class="line">    task = asyncio.ensure_future(f)</span><br><span class="line">    tasks.append(task)</span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(asyncio.wait(tasks))</span><br></pre></td></tr></table></figure></div>

<p>åœ¨aiohttpä¸­ï¼Œå’Œrequestsä¸€æ ·æœ‰getå’Œpostè¯·æ±‚</p>
<p>è¿™äº›è¯·æ±‚çš„å‚æ•°åŸºæœ¬ç›¸åŒï¼Œ</p>
<p>å”¯ä¸€ä¸åŒçš„åœ°æ–¹åœ¨äºä»£ç†IP</p>
<p>åœ¨requestsä¸­ï¼Œä»£ç†IPçš„ç±»å‹æ˜¯ä¸€ä¸ªå­—å…¸ç±»å‹çš„æ•°æ®ï¼Œ</p>
<p>ä½†æ˜¯åœ¨è¿™é‡Œï¼Œä»£ç†IPçš„ç±»å‹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</p>
<p>åŒæ—¶å‚æ•°åä¸ºproxy</p>
<h2 id="åœ¨é€šå¸¸æƒ…å†µä¸‹-ä¸è¦ä½¿ç”¨asyncio"><a href="#åœ¨é€šå¸¸æƒ…å†µä¸‹-ä¸è¦ä½¿ç”¨asyncio" class="headerlink" title="åœ¨é€šå¸¸æƒ…å†µä¸‹,ä¸è¦ä½¿ç”¨asyncio!!!"></a>åœ¨é€šå¸¸æƒ…å†µä¸‹,ä¸è¦ä½¿ç”¨asyncio!!!</h2><h2 id="åœ¨é€šå¸¸æƒ…å†µä¸‹-ä¸è¦ä½¿ç”¨asyncio-1"><a href="#åœ¨é€šå¸¸æƒ…å†µä¸‹-ä¸è¦ä½¿ç”¨asyncio-1" class="headerlink" title="åœ¨é€šå¸¸æƒ…å†µä¸‹,ä¸è¦ä½¿ç”¨asyncio!!!"></a>åœ¨é€šå¸¸æƒ…å†µä¸‹,ä¸è¦ä½¿ç”¨asyncio!!!</h2><h2 id="åœ¨é€šå¸¸æƒ…å†µä¸‹-ä¸è¦ä½¿ç”¨asyncio-2"><a href="#åœ¨é€šå¸¸æƒ…å†µä¸‹-ä¸è¦ä½¿ç”¨asyncio-2" class="headerlink" title="åœ¨é€šå¸¸æƒ…å†µä¸‹,ä¸è¦ä½¿ç”¨asyncio!!!"></a>åœ¨é€šå¸¸æƒ…å†µä¸‹,ä¸è¦ä½¿ç”¨asyncio!!!</h2><h3 id="åœ¨æ²¡æœ‰è¶³å¤Ÿå……è¶³çš„ä»£ç†ä¸å®Œå–„çš„ä¼ªè£…çš„æ—¶å€™-ä¸€å®šä¸è¦ä½¿ç”¨asyncio"><a href="#åœ¨æ²¡æœ‰è¶³å¤Ÿå……è¶³çš„ä»£ç†ä¸å®Œå–„çš„ä¼ªè£…çš„æ—¶å€™-ä¸€å®šä¸è¦ä½¿ç”¨asyncio" class="headerlink" title="åœ¨æ²¡æœ‰è¶³å¤Ÿå……è¶³çš„ä»£ç†ä¸å®Œå–„çš„ä¼ªè£…çš„æ—¶å€™,ä¸€å®šä¸è¦ä½¿ç”¨asyncio!"></a>åœ¨æ²¡æœ‰è¶³å¤Ÿå……è¶³çš„ä»£ç†ä¸å®Œå–„çš„ä¼ªè£…çš„æ—¶å€™,ä¸€å®šä¸è¦ä½¿ç”¨asyncio!</h3><h3 id="åç¨‹çš„ææ€–æ€§èƒ½è¶³ä»¥è®©ä»»ä½•ç½‘ç«™çš„ç¨‹åºå‘ç°-å³ä½¿æ²¡æœ‰å‘ç°-è¿‡äºé«˜é¢‘çš„è®¿é—®ä¹Ÿè¶³ä»¥å‡»æºƒç½‘ç«™äº†"><a href="#åç¨‹çš„ææ€–æ€§èƒ½è¶³ä»¥è®©ä»»ä½•ç½‘ç«™çš„ç¨‹åºå‘ç°-å³ä½¿æ²¡æœ‰å‘ç°-è¿‡äºé«˜é¢‘çš„è®¿é—®ä¹Ÿè¶³ä»¥å‡»æºƒç½‘ç«™äº†" class="headerlink" title="åç¨‹çš„ææ€–æ€§èƒ½è¶³ä»¥è®©ä»»ä½•ç½‘ç«™çš„ç¨‹åºå‘ç°,å³ä½¿æ²¡æœ‰å‘ç°,è¿‡äºé«˜é¢‘çš„è®¿é—®ä¹Ÿè¶³ä»¥å‡»æºƒç½‘ç«™äº†!"></a>åç¨‹çš„ææ€–æ€§èƒ½è¶³ä»¥è®©ä»»ä½•ç½‘ç«™çš„ç¨‹åºå‘ç°,å³ä½¿æ²¡æœ‰å‘ç°,è¿‡äºé«˜é¢‘çš„è®¿é—®ä¹Ÿè¶³ä»¥å‡»æºƒç½‘ç«™äº†!</h3>]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸‰)</title>
    <url>/blog/Python/Python_id_18.html</url>
    <content><![CDATA[<h3 id="Python-åŸºç¡€è¯­æ³•"><a href="#Python-åŸºç¡€è¯­æ³•" class="headerlink" title="Python åŸºç¡€è¯­æ³•"></a>Python åŸºç¡€è¯­æ³•</h3><p>Python è¯­è¨€ä¸ Perlï¼ŒC å’Œ Java ç­‰è¯­è¨€æœ‰è®¸å¤šç›¸ä¼¼ä¹‹å¤„ã€‚ä½†æ˜¯ï¼Œä¹Ÿå­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</p>
<p>åœ¨æœ¬ç« ä¸­æˆ‘ä»¬å°†æ¥å­¦ä¹  Python çš„åŸºç¡€è¯­æ³•ï¼Œè®©ä½ å¿«é€Ÿå­¦ä¼š Python ç¼–ç¨‹ã€‚</p>
<a id="more"></a>

<hr>
<h3 id="ç¬¬ä¸€ä¸ª-Python-ç¨‹åº"><a href="#ç¬¬ä¸€ä¸ª-Python-ç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ª Python ç¨‹åº"></a>ç¬¬ä¸€ä¸ª Python ç¨‹åº</h3><h4 id="äº¤äº’å¼ç¼–ç¨‹"><a href="#äº¤äº’å¼ç¼–ç¨‹" class="headerlink" title="äº¤äº’å¼ç¼–ç¨‹"></a>äº¤äº’å¼ç¼–ç¨‹</h4><p>äº¤äº’å¼ç¼–ç¨‹ä¸éœ€è¦åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼Œæ˜¯é€šè¿‡ Python è§£é‡Šå™¨çš„äº¤äº’æ¨¡å¼è¿›æ¥ç¼–å†™ä»£ç ã€‚</p>
<p>linuxä¸Šä½ åªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ Python å‘½ä»¤å³å¯å¯åŠ¨äº¤äº’å¼ç¼–ç¨‹,æç¤ºçª—å£å¦‚ä¸‹ï¼š</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">$ python</span><br><span class="line">Python 2.7.6 (default, Sep  9 2014, 15:04:36)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 6.0 (clang-600.0.39)] on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> **<span class="keyword">or</span>** <span class="string">"license"</span> *<span class="number">*f</span><span class="keyword">or</span>** more information.</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(äºŒ)</title>
    <url>/blog/Python/Python_id_17.html</url>
    <content><![CDATA[<h3 id="pythonç¯å¢ƒæ­å»º"><a href="#pythonç¯å¢ƒæ­å»º" class="headerlink" title="pythonç¯å¢ƒæ­å»º"></a>pythonç¯å¢ƒæ­å»º</h3><p>Pythonå¯åº”ç”¨äºå¤šå¹³å°åŒ…æ‹¬ Linux å’Œ Mac OS Xã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ç»ˆç«¯çª—å£è¾“å…¥ â€œpythonâ€ å‘½ä»¤æ¥æŸ¥çœ‹æœ¬åœ°æ˜¯å¦å·²ç»å®‰è£…Pythonä»¥åŠPythonçš„å®‰è£…ç‰ˆæœ¬ã€‚</p>
<a id="more"></a>

<ul>
<li>Unix (Solaris, Linux, FreeBSD, AIX, HP/UX, SunOS, IRIX, ç­‰ç­‰ã€‚)</li>
<li>Win 9x/NT/2000</li>
<li>Macintosh (Intel, PPC, 68K)</li>
<li>OS/2</li>
<li>DOS (å¤šä¸ªDOSç‰ˆæœ¬)</li>
<li>PalmOS</li>
<li>Nokia ç§»åŠ¨æ‰‹æœº</li>
<li>Windows CE</li>
<li>Acorn/RISC OS</li>
<li>BeOS</li>
<li>Amiga</li>
<li>VMS/OpenVMS</li>
<li>QNX</li>
<li>VxWorks</li>
<li>Psion</li>
<li>Python åŒæ ·å¯ä»¥ç§»æ¤åˆ° Java å’Œ .NET è™šæ‹Ÿæœºä¸Šã€‚</li>
</ul>
<hr>
<h3 id="Pythonä¸‹è½½"><a href="#Pythonä¸‹è½½" class="headerlink" title="Pythonä¸‹è½½"></a>Pythonä¸‹è½½</h3><p>Pythonæœ€æ–°æºç ï¼ŒäºŒè¿›åˆ¶æ–‡æ¡£ï¼Œæ–°é—»èµ„è®¯ç­‰å¯ä»¥åœ¨Pythonçš„å®˜ç½‘æŸ¥çœ‹åˆ°ï¼š</p>
<p><a href="https://www.python.org/" target="_blank" rel="noopener">Pythonå®˜ç½‘</a></p>
<p>ä½ å¯ä»¥åœ¨ä»¥ä¸‹é“¾æ¥ä¸­ä¸‹è½½ Python çš„æ–‡æ¡£ï¼Œä½ å¯ä»¥ä¸‹è½½ HTMLã€PDF å’Œ PostScript ç­‰æ ¼å¼çš„æ–‡æ¡£ã€‚</p>
<p><a href="https://www.python.org/doc/" target="_blank" rel="noopener">Pythonæ–‡æ¡£ä¸‹è½½åœ°å€</a></p>
<hr>
<h3 id="Pythonå®‰è£…"><a href="#Pythonå®‰è£…" class="headerlink" title="Pythonå®‰è£…"></a>Pythonå®‰è£…</h3><p>Pythonå·²ç»è¢«ç§»æ¤åœ¨è®¸å¤šå¹³å°ä¸Šï¼ˆç»è¿‡æ”¹åŠ¨ä½¿å®ƒèƒ½å¤Ÿå·¥ä½œåœ¨ä¸åŒå¹³å°ä¸Šï¼‰ã€‚</p>
<p>æ‚¨éœ€è¦ä¸‹è½½é€‚ç”¨äºæ‚¨ä½¿ç”¨å¹³å°çš„äºŒè¿›åˆ¶ä»£ç ï¼Œç„¶åå®‰è£…Pythonã€‚</p>
<p>å¦‚æœæ‚¨å¹³å°çš„äºŒè¿›åˆ¶ä»£ç æ˜¯ä¸å¯ç”¨çš„ï¼Œä½ éœ€è¦ä½¿ç”¨Cç¼–è¯‘å™¨æ‰‹åŠ¨ç¼–è¯‘æºä»£ç ã€‚</p>
<p>ç¼–è¯‘çš„æºä»£ç ï¼ŒåŠŸèƒ½ä¸Šæœ‰æ›´å¤šçš„é€‰æ‹©æ€§ï¼Œ ä¸ºpythonå®‰è£…æä¾›äº†æ›´å¤šçš„çµæ´»æ€§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å„ä¸ªå¹³å°å®‰è£…åŒ…çš„ä¸‹è½½åœ°å€ï¼š</p>
<p><img src="fcg22450.github.io/img/python_img/%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80.jpg" alt="å„ä¸ªå¹³å°å®‰è£…åŒ…çš„ä¸‹è½½åœ°å€"></p>
<p>ä»¥ä¸‹ä¸ºä¸åŒå¹³å°ä¸Šå®‰è£… Python çš„æ–¹æ³•ï¼š</p>
<h4 id="Unix-amp-Linux-å¹³å°å®‰è£…-Python"><a href="#Unix-amp-Linux-å¹³å°å®‰è£…-Python" class="headerlink" title="Unix &amp; Linux å¹³å°å®‰è£… Python:"></a>Unix &amp; Linux å¹³å°å®‰è£… Python:</h4><p>ä»¥ä¸‹ä¸ºåœ¨ Unix &amp; Linux å¹³å°ä¸Šå®‰è£… Python çš„ç®€å•æ­¥éª¤ï¼š</p>
<ul>
<li>æ‰“å¼€ WEB æµè§ˆå™¨è®¿é—®<a href="https://www.python.org/downloads/source/" target="_blank" rel="noopener">https://www.python.org/downloads/source/</a></li>
<li>é€‰æ‹©é€‚ç”¨ äºUnix/Linux çš„æºç å‹ç¼©åŒ…ã€‚</li>
<li>ä¸‹è½½åŠè§£å‹å‹ç¼©åŒ…ã€‚</li>
<li>å¦‚æœä½ éœ€è¦è‡ªå®šä¹‰ä¸€äº›é€‰é¡¹ä¿®æ”¹<em>Modules/Setup</em></li>
<li><strong>æ‰§è¡Œ</strong> ./configure è„šæœ¬</li>
<li>make</li>
<li>make install</li>
</ul>
<p>æ‰§è¡Œä»¥ä¸Šæ“ä½œåï¼ŒPython ä¼šå®‰è£…åœ¨ /usr/local/bin ç›®å½•ä¸­ï¼ŒPython åº“å®‰è£…åœ¨ /usr/local/lib/pythonXXï¼ŒXX ä¸ºä½ ä½¿ç”¨çš„ Python çš„ç‰ˆæœ¬å·ã€‚</p>
<h4 id="Window-å¹³å°å®‰è£…-Python"><a href="#Window-å¹³å°å®‰è£…-Python" class="headerlink" title="Window å¹³å°å®‰è£… Python:"></a>Window å¹³å°å®‰è£… Python:</h4><p>ä»¥ä¸‹ä¸ºåœ¨ Window å¹³å°ä¸Šå®‰è£… Python çš„ç®€å•æ­¥éª¤ï¼š</p>
<ul>
<li>æ‰“å¼€ WEB æµè§ˆå™¨è®¿é—®<a href="https://www.python.org/downloads/windows/" target="_blank" rel="noopener">https://www.python.org/downloads/windows/</a> <img src="fcg22450.github.io/img/python_img/window%E5%AE%89%E8%A3%85python.png" alt=""></li>
<li>åœ¨ä¸‹è½½åˆ—è¡¨ä¸­é€‰æ‹©Windowå¹³å°å®‰è£…åŒ…ï¼ŒåŒ…æ ¼å¼ä¸ºï¼š<em>python-XYZ.msi</em> æ–‡ä»¶ ï¼Œ XYZ ä¸ºä½ è¦å®‰è£…çš„ç‰ˆæœ¬å·ã€‚</li>
<li>è¦ä½¿ç”¨å®‰è£…ç¨‹åº <em>python-XYZ.msi</em>, Windows ç³»ç»Ÿå¿…é¡»æ”¯æŒ Microsoft Installer 2.0 æ­é…ä½¿ç”¨ã€‚åªè¦ä¿å­˜å®‰è£…æ–‡ä»¶åˆ°æœ¬åœ°è®¡ç®—æœºï¼Œç„¶åè¿è¡Œå®ƒï¼Œçœ‹çœ‹ä½ çš„æœºå™¨æ”¯æŒ MSIã€‚Windows XP å’Œæ›´é«˜ç‰ˆæœ¬å·²ç»æœ‰ MSIï¼Œå¾ˆå¤šè€æœºå™¨ä¹Ÿå¯ä»¥å®‰è£… MSIã€‚<img src="fcg22450.github.io/img/python_img/%E6%96%87%E4%BB%B6%E9%80%89%E6%8B%A9.png" alt=""></li>
<li>ä¸‹è½½åï¼ŒåŒå‡»ä¸‹è½½åŒ…ï¼Œè¿›å…¥ Python å®‰è£…å‘å¯¼ï¼Œå®‰è£…éå¸¸ç®€å•ï¼Œä½ åªéœ€è¦ä½¿ç”¨é»˜è®¤çš„è®¾ç½®ä¸€ç›´ç‚¹å‡»â€ä¸‹ä¸€æ­¥â€ç›´åˆ°å®‰è£…å®Œæˆå³å¯ã€‚</li>
</ul>
<h4 id="MAC-å¹³å°å®‰è£…-Python"><a href="#MAC-å¹³å°å®‰è£…-Python" class="headerlink" title="MAC å¹³å°å®‰è£… Python:"></a>MAC å¹³å°å®‰è£… Python:</h4><p>MAC ç³»ç»Ÿä¸€èˆ¬éƒ½è‡ªå¸¦æœ‰ Python2.xç‰ˆæœ¬ çš„ç¯å¢ƒï¼Œä½ ä¹Ÿå¯ä»¥åœ¨é“¾æ¥ <a href="https://www.python.org/downloads/mac-osx/" target="_blank" rel="noopener">https://www.python.org/downloads/mac-osx/</a> ä¸Šä¸‹è½½æœ€æ–°ç‰ˆå®‰è£…ã€‚</p>
<hr>
<h3 id="ç¯å¢ƒå˜é‡é…ç½®"><a href="#ç¯å¢ƒå˜é‡é…ç½®" class="headerlink" title="ç¯å¢ƒå˜é‡é…ç½®"></a>ç¯å¢ƒå˜é‡é…ç½®</h3><p>ç¨‹åºå’Œå¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥åœ¨è®¸å¤šç›®å½•ï¼Œè€Œè¿™äº›è·¯å¾„å¾ˆå¯èƒ½ä¸åœ¨æ“ä½œç³»ç»Ÿæä¾›å¯æ‰§è¡Œæ–‡ä»¶çš„æœç´¢è·¯å¾„ä¸­ã€‚</p>
<p>path(è·¯å¾„)å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™æ˜¯ç”±æ“ä½œç³»ç»Ÿç»´æŠ¤çš„ä¸€ä¸ªå‘½åçš„å­—ç¬¦ä¸²ã€‚è¿™äº›å˜é‡åŒ…å«å¯ç”¨çš„å‘½ä»¤è¡Œè§£é‡Šå™¨å’Œå…¶ä»–ç¨‹åºçš„ä¿¡æ¯ã€‚</p>
<p>Unixæˆ–Windowsä¸­è·¯å¾„å˜é‡ä¸ºPATHï¼ˆUNIXåŒºåˆ†å¤§å°å†™ï¼ŒWindowsä¸åŒºåˆ†å¤§å°å†™ï¼‰ã€‚</p>
<p>åœ¨Mac OSä¸­ï¼Œå®‰è£…ç¨‹åºè¿‡ç¨‹ä¸­æ”¹å˜äº†pythonçš„å®‰è£…è·¯å¾„ã€‚å¦‚æœä½ éœ€è¦åœ¨å…¶ä»–ç›®å½•å¼•ç”¨Pythonï¼Œä½ å¿…é¡»åœ¨pathä¸­æ·»åŠ Pythonç›®å½•ã€‚</p>
<h4 id="åœ¨-Unix-Linux-è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#åœ¨-Unix-Linux-è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="åœ¨ Unix/Linux è®¾ç½®ç¯å¢ƒå˜é‡"></a>åœ¨ Unix/Linux è®¾ç½®ç¯å¢ƒå˜é‡</h4><ul>
<li><p>åœ¨ csh shell:</p>
<p>è¾“å…¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="NGINX"><figure class="iseeu highlight /nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">setenv</span> PATH <span class="string">"<span class="variable">$PATH</span>:/usr/local/bin/python"</span></span><br></pre></td></tr></table></figure></div>

<p>, æŒ‰ä¸‹â€Enterâ€ã€‚</p>
</li>
<li><p>åœ¨ bash shell (Linux):</p>
<p>è¾“å…¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="string">"<span class="variable">$PATH</span>:/usr/local/bin/python"</span></span><br></pre></td></tr></table></figure></div>

<p>ï¼ŒæŒ‰ä¸‹â€Enterâ€ã€‚</p>
</li>
<li><p>åœ¨ sh æˆ–è€… ksh shell:</p>
<p>è¾“å…¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">PATH</span>=<span class="string">"$PATH:/usr/local/bin/python"</span></span><br></pre></td></tr></table></figure></div>

<p>, æŒ‰ä¸‹â€Enterâ€ã€‚</p>
</li>
</ul>
<h4 id="åœ¨-Windows-è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#åœ¨-Windows-è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="åœ¨ Windows è®¾ç½®ç¯å¢ƒå˜é‡"></a>åœ¨ Windows è®¾ç½®ç¯å¢ƒå˜é‡</h4><p>åœ¨ç¯å¢ƒå˜é‡ä¸­æ·»åŠ Pythonç›®å½•ï¼š</p>
<p><strong>åœ¨å‘½ä»¤æç¤ºæ¡†ä¸­(cmd) :</strong> è¾“å…¥</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">path</span>=%path%<span class="comment">;C:\Python</span></span><br></pre></td></tr></table></figure></div>

<p>æŒ‰ä¸‹â€Enterâ€ã€‚</p>
<p><strong>æ³¨æ„:</strong> C:\Python æ˜¯Pythonçš„å®‰è£…ç›®å½•ã€‚</p>
<p>ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¾ç½®ï¼š</p>
<ul>
<li>å³é”®ç‚¹å‡»â€è®¡ç®—æœºâ€ï¼Œç„¶åç‚¹å‡»â€å±æ€§â€</li>
<li>ç„¶åç‚¹å‡»â€é«˜çº§ç³»ç»Ÿè®¾ç½®â€</li>
<li>é€‰æ‹©â€ç³»ç»Ÿå˜é‡â€çª—å£ä¸‹é¢çš„â€Pathâ€,åŒå‡»å³å¯ï¼</li>
<li></li>
<li>ç„¶ååœ¨â€Pathâ€è¡Œï¼Œæ·»åŠ pythonå®‰è£…è·¯å¾„å³å¯(æˆ‘çš„D:\Python32)ï¼Œæ‰€ä»¥åœ¨åé¢ï¼Œæ·»åŠ è¯¥è·¯å¾„å³å¯ã€‚ <strong>psï¼šè®°ä½ï¼Œè·¯å¾„ç›´æ¥ç”¨åˆ†å·â€ï¼›â€éš”å¼€ï¼</strong></li>
<li>æœ€åè®¾ç½®æˆåŠŸä»¥åï¼Œåœ¨cmdå‘½ä»¤è¡Œï¼Œè¾“å…¥å‘½ä»¤â€pythonâ€ï¼Œå°±å¯ä»¥æœ‰ç›¸å…³æ˜¾ç¤ºã€‚</li>
</ul>
<hr>
<h3 id="Python-ç¯å¢ƒå˜é‡"><a href="#Python-ç¯å¢ƒå˜é‡" class="headerlink" title="Python ç¯å¢ƒå˜é‡"></a>Python ç¯å¢ƒå˜é‡</h3><p>ä¸‹é¢å‡ ä¸ªé‡è¦çš„ç¯å¢ƒå˜é‡ï¼Œå®ƒåº”ç”¨äºPythonï¼š</p>
<table>
<thead>
<tr>
<th align="left">å˜é‡å</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">PYTHONPATH</td>
<td align="left">PYTHONPATHæ˜¯Pythonæœç´¢è·¯å¾„ï¼Œé»˜è®¤æˆ‘ä»¬importçš„æ¨¡å—éƒ½ä¼šä»PYTHONPATHé‡Œé¢å¯»æ‰¾ã€‚</td>
</tr>
<tr>
<td align="left">PYTHONSTARTUP</td>
<td align="left">Pythonå¯åŠ¨åï¼Œå…ˆå¯»æ‰¾PYTHONSTARTUPç¯å¢ƒå˜é‡ï¼Œç„¶åæ‰§è¡Œæ­¤å˜é‡æŒ‡å®šçš„æ–‡ä»¶ä¸­çš„ä»£ç ã€‚</td>
</tr>
<tr>
<td align="left">PYTHONCASEOK</td>
<td align="left">åŠ å…¥PYTHONCASEOKçš„ç¯å¢ƒå˜é‡, å°±ä¼šä½¿pythonå¯¼å…¥æ¨¡å—çš„æ—¶å€™ä¸åŒºåˆ†å¤§å°å†™.</td>
</tr>
<tr>
<td align="left">PYTHONHOME</td>
<td align="left">å¦ä¸€ç§æ¨¡å—æœç´¢è·¯å¾„ã€‚å®ƒé€šå¸¸å†…åµŒäºçš„PYTHONSTARTUPæˆ–PYTHONPATHç›®å½•ä¸­ï¼Œä½¿å¾—ä¸¤ä¸ªæ¨¡å—åº“æ›´å®¹æ˜“åˆ‡æ¢ã€‚</td>
</tr>
</tbody></table>
<hr>
<h3 id="è¿è¡ŒPython"><a href="#è¿è¡ŒPython" class="headerlink" title="è¿è¡ŒPython"></a>è¿è¡ŒPython</h3><p>æœ‰ä¸‰ç§æ–¹å¼å¯ä»¥è¿è¡ŒPythonï¼š</p>
<h3 id="1ã€äº¤äº’å¼è§£é‡Šå™¨ï¼š"><a href="#1ã€äº¤äº’å¼è§£é‡Šå™¨ï¼š" class="headerlink" title="1ã€äº¤äº’å¼è§£é‡Šå™¨ï¼š"></a>1ã€äº¤äº’å¼è§£é‡Šå™¨ï¼š</h3><p>ä½ å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œçª—å£è¿›å…¥ Pythonï¼Œå¹¶åœ¨äº¤äº’å¼è§£é‡Šå™¨ä¸­å¼€å§‹ç¼–å†™ Python ä»£ç ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ Unixã€DOS æˆ–ä»»ä½•å…¶ä»–æä¾›äº†å‘½ä»¤è¡Œæˆ–è€… shell çš„ç³»ç»Ÿè¿›è¡Œ Python ç¼–ç å·¥ä½œã€‚</p>
<p>$ python # Unix/Linux</p>
<p>æˆ–è€…</p>
<p>C:&gt;python # Windows/DOS</p>
<p>ä»¥ä¸‹ä¸ºPythonå‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<table>
<thead>
<tr>
<th align="left">é€‰é¡¹</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-d</td>
<td align="left">åœ¨è§£ææ—¶æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</td>
</tr>
<tr>
<td align="left">-O</td>
<td align="left">ç”Ÿæˆä¼˜åŒ–ä»£ç  ( .pyo æ–‡ä»¶ )</td>
</tr>
<tr>
<td align="left">-S</td>
<td align="left">å¯åŠ¨æ—¶ä¸å¼•å…¥æŸ¥æ‰¾Pythonè·¯å¾„çš„ä½ç½®</td>
</tr>
<tr>
<td align="left">-V</td>
<td align="left">è¾“å‡ºPythonç‰ˆæœ¬å·</td>
</tr>
<tr>
<td align="left">-X</td>
<td align="left">ä» 1.6ç‰ˆæœ¬ä¹‹ååŸºäºå†…å»ºçš„å¼‚å¸¸ï¼ˆä»…ä»…ç”¨äºå­—ç¬¦ä¸²ï¼‰å·²è¿‡æ—¶ã€‚</td>
</tr>
<tr>
<td align="left">-c cmd</td>
<td align="left">æ‰§è¡Œ Python è„šæœ¬ï¼Œå¹¶å°†è¿è¡Œç»“æœä½œä¸º cmd å­—ç¬¦ä¸²ã€‚</td>
</tr>
<tr>
<td align="left">file</td>
<td align="left">åœ¨ç»™å®šçš„pythonæ–‡ä»¶æ‰§è¡Œpythonè„šæœ¬ã€‚</td>
</tr>
</tbody></table>
<h3 id="2ã€å‘½ä»¤è¡Œè„šæœ¬"><a href="#2ã€å‘½ä»¤è¡Œè„šæœ¬" class="headerlink" title="2ã€å‘½ä»¤è¡Œè„šæœ¬"></a>2ã€å‘½ä»¤è¡Œè„šæœ¬</h3><p>åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­é€šè¿‡å¼•å…¥è§£é‡Šå™¨å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡ŒPythonè„šæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>$ python script.py # Unix/Linux</p>
<p>æˆ–è€…</p>
<p>C:&gt;python script.py # Windows/DOS</p>
<p><strong>æ³¨æ„ï¼š</strong>åœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œè¯·æ£€æŸ¥è„šæœ¬æ˜¯å¦æœ‰å¯æ‰§è¡Œæƒé™ã€‚</p>
<h3 id="3ã€é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼šIntegrated-Development-Environmentï¼‰-PyCharm"><a href="#3ã€é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼šIntegrated-Development-Environmentï¼‰-PyCharm" class="headerlink" title="3ã€é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼šIntegrated Development Environmentï¼‰: PyCharm"></a>3ã€é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼šIntegrated Development Environmentï¼‰: PyCharm</h3><p>PyCharm æ˜¯ç”± JetBrains æ‰“é€ çš„ä¸€æ¬¾ Python IDEï¼Œæ”¯æŒ macOSã€ Windowsã€ Linux ç³»ç»Ÿã€‚</p>
<p>PyCharm åŠŸèƒ½ : è°ƒè¯•ã€è¯­æ³•é«˜äº®ã€Projectç®¡ç†ã€ä»£ç è·³è½¬ã€æ™ºèƒ½æç¤ºã€è‡ªåŠ¨å®Œæˆã€å•å…ƒæµ‹è¯•ã€ç‰ˆæœ¬æ§åˆ¶â€¦â€¦</p>
<p>PyCharm ä¸‹è½½åœ°å€ : <a href="https://www.jetbrains.com/pycharm/download/" target="_blank" rel="noopener">https://www.jetbrains.com/pycharm/download/</a></p>
<p>PyCharm å®‰è£…åœ°å€ï¼š<a href="https://www.runoob.com/w3cnote/pycharm-windows-install.html" target="_blank" rel="noopener">http://www.runoob.com/w3cnote/pycharm-windows-install.html</a></p>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†å¸ƒå¼çˆ¬è™«å®ç°åŸç†ä¸è¿è¡Œæœºåˆ¶</title>
    <url>/blog/Spider/Spider_id_13.html</url>
    <content><![CDATA[<h2 id="åˆ†å¸ƒå¼çˆ¬è™«"><a href="#åˆ†å¸ƒå¼çˆ¬è™«" class="headerlink" title="åˆ†å¸ƒå¼çˆ¬è™«"></a>åˆ†å¸ƒå¼çˆ¬è™«</h2><a id="more"></a>
<h2 id="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼çˆ¬è™«"><a href="#ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼çˆ¬è™«" class="headerlink" title="ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼çˆ¬è™«:"></a>ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼çˆ¬è™«:</h2><ul>
<li><h5 id="åŸºäºå¤šå°ç”µè„‘ç»„å»ºä¸€ä¸ªåˆ†å¸ƒå¼æœºç¾¤-ç„¶åè®©é›†ç¾¤ä¸­çš„æ¯ä¸€å°ç”µè„‘æ‰§è¡ŒåŒä¸€ç»„ç¨‹åº-ç„¶åè®©ä»–ä»¬å¯¹åŒä¸€ä¸ªç½‘ç«™çš„æ•°æ®è¿›è¡Œåˆ†å¸ƒçˆ¬å–"><a href="#åŸºäºå¤šå°ç”µè„‘ç»„å»ºä¸€ä¸ªåˆ†å¸ƒå¼æœºç¾¤-ç„¶åè®©é›†ç¾¤ä¸­çš„æ¯ä¸€å°ç”µè„‘æ‰§è¡ŒåŒä¸€ç»„ç¨‹åº-ç„¶åè®©ä»–ä»¬å¯¹åŒä¸€ä¸ªç½‘ç«™çš„æ•°æ®è¿›è¡Œåˆ†å¸ƒçˆ¬å–" class="headerlink" title="åŸºäºå¤šå°ç”µè„‘ç»„å»ºä¸€ä¸ªåˆ†å¸ƒå¼æœºç¾¤,ç„¶åè®©é›†ç¾¤ä¸­çš„æ¯ä¸€å°ç”µè„‘æ‰§è¡ŒåŒä¸€ç»„ç¨‹åº,ç„¶åè®©ä»–ä»¬å¯¹åŒä¸€ä¸ªç½‘ç«™çš„æ•°æ®è¿›è¡Œåˆ†å¸ƒçˆ¬å–"></a>åŸºäºå¤šå°ç”µè„‘ç»„å»ºä¸€ä¸ªåˆ†å¸ƒå¼æœºç¾¤,ç„¶åè®©é›†ç¾¤ä¸­çš„æ¯ä¸€å°ç”µè„‘æ‰§è¡ŒåŒä¸€ç»„ç¨‹åº,ç„¶åè®©ä»–ä»¬å¯¹åŒä¸€ä¸ªç½‘ç«™çš„æ•°æ®è¿›è¡Œåˆ†å¸ƒçˆ¬å–</h5></li>
</ul>
<h2 id="ä½¿ç”¨åˆ†å¸ƒå¼çˆ¬è™«çš„ç›®çš„"><a href="#ä½¿ç”¨åˆ†å¸ƒå¼çˆ¬è™«çš„ç›®çš„" class="headerlink" title="ä½¿ç”¨åˆ†å¸ƒå¼çˆ¬è™«çš„ç›®çš„:"></a>ä½¿ç”¨åˆ†å¸ƒå¼çˆ¬è™«çš„ç›®çš„:</h2><ul>
<li><h5 id="æå‡æ•°æ®çˆ¬å–æ•ˆç‡"><a href="#æå‡æ•°æ®çˆ¬å–æ•ˆç‡" class="headerlink" title="æå‡æ•°æ®çˆ¬å–æ•ˆç‡"></a>æå‡æ•°æ®çˆ¬å–æ•ˆç‡</h5></li>
</ul>
<h2 id="å¦‚ä½•å®ç°åˆ†å¸ƒå¼çˆ¬å–"><a href="#å¦‚ä½•å®ç°åˆ†å¸ƒå¼çˆ¬å–" class="headerlink" title="å¦‚ä½•å®ç°åˆ†å¸ƒå¼çˆ¬å–:"></a>å¦‚ä½•å®ç°åˆ†å¸ƒå¼çˆ¬å–:</h2><ul>
<li><h5 id="åŸºäº-scrapy-redis-çš„å½¢å¼å®ç°åˆ†å¸ƒå¼çˆ¬è™«"><a href="#åŸºäº-scrapy-redis-çš„å½¢å¼å®ç°åˆ†å¸ƒå¼çˆ¬è™«" class="headerlink" title="åŸºäº scrapy + redis  çš„å½¢å¼å®ç°åˆ†å¸ƒå¼çˆ¬è™«"></a>åŸºäº scrapy + redis  çš„å½¢å¼å®ç°åˆ†å¸ƒå¼çˆ¬è™«</h5><ul>
<li><h5 id="scrapyç»“åˆscrapy-radisç»„ä»¶å®ç°åˆ†å¸ƒå¼"><a href="#scrapyç»“åˆscrapy-radisç»„ä»¶å®ç°åˆ†å¸ƒå¼" class="headerlink" title="scrapyç»“åˆscrapy-radisç»„ä»¶å®ç°åˆ†å¸ƒå¼"></a>scrapyç»“åˆscrapy-radisç»„ä»¶å®ç°åˆ†å¸ƒå¼</h5></li>
</ul>
</li>
</ul>
<h2 id="åŸç”Ÿçš„scrapyæ˜¯æ— æ³•å®ç°åˆ†å¸ƒå¼çˆ¬è™«çš„"><a href="#åŸç”Ÿçš„scrapyæ˜¯æ— æ³•å®ç°åˆ†å¸ƒå¼çˆ¬è™«çš„" class="headerlink" title="åŸç”Ÿçš„scrapyæ˜¯æ— æ³•å®ç°åˆ†å¸ƒå¼çˆ¬è™«çš„"></a>åŸç”Ÿçš„scrapyæ˜¯æ— æ³•å®ç°åˆ†å¸ƒå¼çˆ¬è™«çš„</h2><ul>
<li><h5 id="è°ƒåº¦å™¨æ— æ³•å®ç°å…±äº«-ä»è€Œå¯¼è‡´å‡ºç°é‡å¤è¯·æ±‚"><a href="#è°ƒåº¦å™¨æ— æ³•å®ç°å…±äº«-ä»è€Œå¯¼è‡´å‡ºç°é‡å¤è¯·æ±‚" class="headerlink" title="è°ƒåº¦å™¨æ— æ³•å®ç°å…±äº«,ä»è€Œå¯¼è‡´å‡ºç°é‡å¤è¯·æ±‚"></a>è°ƒåº¦å™¨æ— æ³•å®ç°å…±äº«,ä»è€Œå¯¼è‡´å‡ºç°é‡å¤è¯·æ±‚</h5></li>
<li><h5 id="ç®¡é“æ— æ³•å®ç°å…±äº«-ä¸åˆ©äºæ•°æ®æ±‡æ€»"><a href="#ç®¡é“æ— æ³•å®ç°å…±äº«-ä¸åˆ©äºæ•°æ®æ±‡æ€»" class="headerlink" title="ç®¡é“æ— æ³•å®ç°å…±äº«,ä¸åˆ©äºæ•°æ®æ±‡æ€»"></a>ç®¡é“æ— æ³•å®ç°å…±äº«,ä¸åˆ©äºæ•°æ®æ±‡æ€»</h5></li>
</ul>
<h2 id="scrapy-redisç»„ä»¶çš„ä½œç”¨"><a href="#scrapy-redisç»„ä»¶çš„ä½œç”¨" class="headerlink" title="scrapy-redisç»„ä»¶çš„ä½œç”¨:"></a>scrapy-redisç»„ä»¶çš„ä½œç”¨:</h2><ul>
<li><h5 id="æä¾›å¯ä»¥è¢«å…±äº«çš„è°ƒåº¦å™¨å’Œç®¡é“"><a href="#æä¾›å¯ä»¥è¢«å…±äº«çš„è°ƒåº¦å™¨å’Œç®¡é“" class="headerlink" title="æä¾›å¯ä»¥è¢«å…±äº«çš„è°ƒåº¦å™¨å’Œç®¡é“"></a>æä¾›å¯ä»¥è¢«å…±äº«çš„è°ƒåº¦å™¨å’Œç®¡é“</h5></li>
</ul>
<h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®:"></a>ç¯å¢ƒé…ç½®:</h2><ul>
<li><h5 id="å®‰è£…redisæ•°æ®åº“"><a href="#å®‰è£…redisæ•°æ®åº“" class="headerlink" title="å®‰è£…redisæ•°æ®åº“"></a>å®‰è£…redisæ•°æ®åº“</h5></li>
<li><h5 id="pip-install-scrapy-redis"><a href="#pip-install-scrapy-redis" class="headerlink" title="pip install scrapy_redis"></a>pip install scrapy_redis</h5></li>
</ul>
<h2 id="ç¼–ç æµç¨‹"><a href="#ç¼–ç æµç¨‹" class="headerlink" title="ç¼–ç æµç¨‹:"></a>ç¼–ç æµç¨‹:</h2><ul>
<li><h5 id="åˆ›å»ºä¸€ä¸ªå·¥ç¨‹"><a href="#åˆ›å»ºä¸€ä¸ªå·¥ç¨‹" class="headerlink" title="åˆ›å»ºä¸€ä¸ªå·¥ç¨‹"></a>åˆ›å»ºä¸€ä¸ªå·¥ç¨‹</h5></li>
<li><h5 id="åˆ›å»ºä¸€ä¸ªçˆ¬è™«æ–‡ä»¶"><a href="#åˆ›å»ºä¸€ä¸ªçˆ¬è™«æ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸€ä¸ªçˆ¬è™«æ–‡ä»¶"></a>åˆ›å»ºä¸€ä¸ªçˆ¬è™«æ–‡ä»¶</h5><ul>
<li><h6 id="spider-å’Œ-CrawlSpider-éƒ½å¯ä»¥ä½¿ç”¨"><a href="#spider-å’Œ-CrawlSpider-éƒ½å¯ä»¥ä½¿ç”¨" class="headerlink" title="spider å’Œ CrawlSpider éƒ½å¯ä»¥ä½¿ç”¨"></a>spider å’Œ CrawlSpider éƒ½å¯ä»¥ä½¿ç”¨</h6></li>
<li><h6 id="ä¿®æ”¹çˆ¬è™«æ–‡ä»¶"><a href="#ä¿®æ”¹çˆ¬è™«æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹çˆ¬è™«æ–‡ä»¶"></a>ä¿®æ”¹çˆ¬è™«æ–‡ä»¶</h6><ul>
<li><p>å¯¼å…¥ç»„ä»¶</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> scrapy_redis.spider <span class="keyword">import</span> RedisSpider,RedisCrawlSpider
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  - å°†åˆ›å»ºå¥½çš„çˆ¬è™«æ–‡ä»¶ç±»çš„çˆ¶ç±»ä¿®æ”¹ä¸ºæ–°å¯¼å…¥çš„scrapy_redisçš„å­ç±»</span><br><span class="line"></span><br><span class="line">  - å°†start_urlæ›¿æ¢æ‰,æ¢æˆredis_key</span><br><span class="line"></span><br><span class="line">- ###### ä¿®æ”¹settings</span><br><span class="line"></span><br><span class="line">  - æŒ‡å®šç®¡é“</span><br><span class="line"></span><br><span class="line">    - ```python</span><br><span class="line">      # å¼€å¯å¯è¢«å…±äº«çš„ç®¡é“</span><br><span class="line">      ITEM_PIPELINES = &#123;</span><br><span class="line">          <span class="string">'scrapy_redis.pipelines.RedisPipeline'</span>: <span class="number">300</span></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>æŒ‡å®šè°ƒåº¦å™¨</p>
<ul>
<li><pre><code class="python"><span class="comment"># æŒ‡å®šä½¿ç”¨å¯è¢«å…±äº«çš„è°ƒåº¦å™¨</span>
<span class="comment"># å¢åŠ äº†ä¸€ä¸ªå»é‡å®¹å™¨ç±»çš„é…ç½®,ä½œç”¨ä½¿ç”¨ Redisçš„seté›†åˆæ¥å­˜å‚¨è¯·æ±‚çš„æŒ‡çº¹æ•°æ®,ä»è€Œå®ç°è¯·æ±‚å»é‡çš„æŒä¹…åŒ–</span>
<span class="comment"># å¯¹é‡å¤çš„è¯·æ±‚å¯¹è±¡å»é‡</span>
DUPEFILTER_CLASS = <span class="string">'scrapy_redis.dupefilter.RFPDupeFilter'</span>
<span class="comment"># ä½¿ç”¨scrapy_redisç»„ä»¶è‡ªå·±çš„è°ƒåº¦å™¨</span>
SCHEDULER = <span class="string">'scrapy_redis.scheduler.Scheduler'</span>
<span class="comment"># é…ç½®è°ƒåº¦å™¨æ˜¯å¦æŒä¹…åŒ–,ä¹Ÿå°±æ˜¯è¯´åœ¨çˆ¬è™«è¿è¡Œç»“æŸä¹‹åè¦ä¸è¦æ¸…é™¤Redisä¸­è¯·æ±‚é˜Ÿåˆ—å’Œå»é‡æŒ‡çº¹çš„set</span>
<span class="comment"># è¿™æ ·å®é™…ä¸Šå·²ç»å®ç°äº†å¢é‡å¼,ä¹Ÿå°±æ˜¯è¯´,å†æ¬¡è¿è¡Œçš„æ—¶å€™,å°†ä¸ä¼šå°†å·²ç»è·å–è¿‡çš„æ•°æ®é‡å¤çš„è·å–,</span>
<span class="comment"># å¢é‡å¼çš„æ¦‚å¿µå°±æ˜¯:</span>
    <span class="comment"># åœ¨åˆ›å»ºçˆ¬è™«ä¹‹å,æ¯æ¬¡è¿è¡Œéƒ½ä¼šè¿›è¡Œå¯¹æ¯”,ç´§ç´§å¯¹ç½‘ç«™çš„æ›´æ–°å†…å®¹è¿›è¡Œçˆ¬å–,è€Œä¸ä¼šè¿›è¡Œé‡å¤æ•°æ®çš„é‡å¤è·å–,å‡å°‘å†…å­˜å ç”¨,åŒæ—¶ä¹Ÿæ›´åŠ åˆç†</span>
SCHEDULER_PERSIST = <span class="literal">True</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="LSL"><figure class="iseeu highlight /lsl"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ç½®å®šredisæœåŠ¡</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    # REDIS_HOST = 'redis æœåŠ¡å™¨åœ°å€'</span><br><span class="line">    REDIS_HOST = '<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>'</span><br><span class="line">    REDIS_PORT = <span class="number">6379</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>redisé…ç½®æ–‡ä»¶redis.windows.conf</p>
<ul>
<li>bind 127.0.0.1<ul>
<li>å°†è¿™è¡Œä»£ç æ³¨é‡Šæ‰</li>
<li>æ¥è§¦127.0.0.1ç»‘å®š,ä½¿å…¶ä»–ç”µè„‘å¯ä»¥è®¿é—®æœ¬æœºredis</li>
</ul>
</li>
<li>protected-mode yes<ul>
<li>å°†yesæ”¹ä¸ºno,å…³é—­redisæ•°æ®ä¿æŠ¤,å…³é—­åå…è®¸å…¶ä»–ç”µè„‘ä¿®æ”¹æœ¬æœºredis æ•°æ®åº“</li>
</ul>
</li>
</ul>
</li>
<li><p>æºå¸¦é…ç½®æ–‡ä»¶å¯åŠ¨redisæœåŠ¡</p>
<ul>
<li>redis-server ./redis.windows.conf</li>
</ul>
</li>
<li><p>å¯åŠ¨rediså®¢æˆ·ç«¯</p>
</li>
<li><p>è¿è¡Œçˆ¬è™«æ–‡ä»¶</p>
<ul>
<li>cd ./spiders</li>
<li>scrapy runspider spiderName.py</li>
</ul>
</li>
<li><p>å‘è°ƒåº¦å™¨æ”¾å…¥èµ·å§‹çš„     <strong>url</strong>     </p>
<ul>
<li>é˜Ÿåˆ—çš„ä½ç½®<ul>
<li>é˜Ÿåˆ—å­˜å‚¨åœ¨é˜Ÿåˆ—ä¸­</li>
<li>lpush key value</li>
<li>æŒ‰ç…§çˆ¬è™«ä¸­è®¾å®šå¥½çš„ç›®æ ‡redisé˜Ÿåˆ—åç§°æ”¾å…¥èµ·å§‹url</li>
<li>å½“ä½ æŠŠèµ·å§‹urlæ”¾å…¥ä¹‹å,å°†ä¼šè‡ªåŠ¨å¼€å§‹çˆ¬å–</li>
</ul>
</li>
</ul>
</li>
<li><p>çˆ¬è™«æ–‡ä»¶è¿è¡Œä¹‹åå°†ä¼šæŠŠè·å–åˆ°çš„æ•°æ®è‡ªåŠ¨å­˜å‚¨åˆ°redisä¸­</p>
</li>
<li><p>æ•°æ®å­˜å‚¨åˆ° spiderName:items, responseå­˜å‚¨åˆ° spiderName:response</p>
</li>
<li><p>æ³¨æ„,åœ¨è¿›è¡Œåˆ†å¸ƒå¼çš„æ—¶å€™,redis çš„ipåœ°å€å¿…é¡»ä¿æŒç²¾ç¡®,ä¹Ÿå°±æ˜¯è¯´,æƒ³è¦åšåˆ†å¸ƒå¼æœ€å¥½ä½¿ç”¨ä¸€ä¸ªå†…ç½‘è¿æ¥æœºç¾¤</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>ç™¾åº¦AIé¡¹ç›®è§£æä¸ä½¿ç”¨</title>
    <url>/blog/Spider/Spider_id_08.html</url>
    <content><![CDATA[<h2 id="ç™¾åº¦AI"><a href="#ç™¾åº¦AI" class="headerlink" title="ç™¾åº¦AI"></a>ç™¾åº¦AI</h2><a id="more"></a>
<p>ç™¾åº¦aiæ˜¯å¼€æ”¾æ€§çš„åº“,åœ¨å…¶ä¸­å®ç°äº†åŒ…æ‹¬æ–‡æœ¬è¯†åˆ«,è¯­è¨€è¯†åˆ«,å£°éŸ³è¯†åˆ«,æŒ‡çº¹è¯†åˆ«,è™¹è†œè¯†åˆ«ç­‰å„å¼å„æ ·åŸºäºäººå·¥æ™ºèƒ½AIçš„è¯†åˆ«æ–¹æ³•:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> aip <span class="keyword">import</span> AipNlp</span><br><span class="line"></span><br><span class="line"><span class="string">""" ä½ çš„ APPID AK SK """</span></span><br><span class="line">APP_ID = <span class="string">'18141048'</span></span><br><span class="line">API_KEY = <span class="string">'CPKSpk7Up1aATfxAaP9xln1O'</span></span><br><span class="line">SECRET_KEY = <span class="string">'miR2GGKYfx214xEGUO0i83cgFmD3T1Z3'</span></span><br><span class="line"></span><br><span class="line">client = AipNlp(APP_ID, API_KEY, SECRET_KEY)</span><br></pre></td></tr></table></figure></div>

<p>å®ƒçš„åº“æ˜¯å¼€æ”¾çš„,ä½¿ç”¨æ–¹æ³•åŒæ ·æ˜¯å¼€æ”¾çš„,æ‰€ä»¥æˆ‘ä»¬åœ¨è¿›è¡Œæ—¶ä½¿ç”¨çš„æ—¶å€™,å¯ä»¥ç›´æ¥è°ƒç”¨å¯¹åº”çš„aipåº“ä¸­çš„è¯†åˆ«æ–¹æ³•,å°±å¯ä»¥å°†æˆ‘ä»¬çš„æ•°æ®åˆ†é—¨åˆ«ç±»åœ°è¯†åˆ«å‡ºæ¥,</p>
<h2 id="æå–å…³é”®å­—åˆ†ç±»"><a href="#æå–å…³é”®å­—åˆ†ç±»" class="headerlink" title="æå–å…³é”®å­—åˆ†ç±»"></a>æå–å…³é”®å­—åˆ†ç±»</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">client.topic(title, content);</span><br><span class="line"><span class="comment"># æ–‡ç« åˆ†ç±»,ä»æ ‡é¢˜ä¸å†…å®¹ä¸­æå–å…³é”®å­—è¿›è¡Œåˆ†ç±»</span></span><br><span class="line"><span class="comment"># title,contentéƒ½æ˜¯å¿…å¡«</span></span><br><span class="line"><span class="comment"># é¡¹åˆ¤æ–­è¯ä¹‰ç›¸ä¼¼åº¦</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">client.wordSimEmbedding(word1, word2);</span><br><span class="line"><span class="comment"># åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„ç›¸ä¼¼åº¦</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªç»“æœåˆ¤æ–­çš„å…¶å®æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„è¯ä¹‰çš„ç›¸ä¼¼åº¦</span></span><br><span class="line"><span class="comment"># è¿”å›ç»“æœä¸º:</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    "score": 0.456862,</span></span><br><span class="line"><span class="string">    # score ä¸ºè¯¥å¯¹è±¡çš„ç›¸ä¼¼åº¦,</span></span><br><span class="line"><span class="string">    "words": &#123;</span></span><br><span class="line"><span class="string">      "word_1": "åŒ—äº¬",</span></span><br><span class="line"><span class="string">      "word_2": "ä¸Šæµ·"</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;'''</span></span><br></pre></td></tr></table></figure></div>

<h2 id="åˆ¤æ–­æ–‡æœ¬ç›¸ä¼¼åº¦"><a href="#åˆ¤æ–­æ–‡æœ¬ç›¸ä¼¼åº¦" class="headerlink" title="åˆ¤æ–­æ–‡æœ¬ç›¸ä¼¼åº¦"></a>åˆ¤æ–­æ–‡æœ¬ç›¸ä¼¼åº¦</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">text1 = <span class="string">"æµ™å¯Œè‚¡ä»½"</span></span><br><span class="line"></span><br><span class="line">text2 = <span class="string">"ä¸‡äº‹é€šè‡ªè€ƒç½‘"</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" è°ƒç”¨çŸ­æ–‡æœ¬ç›¸ä¼¼åº¦ """</span></span><br><span class="line">client.simnet(text1, text2);</span><br><span class="line"></span><br><span class="line"><span class="string">""" å¦‚æœæœ‰å¯é€‰å‚æ•° """</span></span><br><span class="line">options = &#123;&#125;</span><br><span class="line">options[<span class="string">"model"</span>] = <span class="string">"CNN"</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" å¸¦å‚æ•°è°ƒç”¨çŸ­æ–‡æœ¬ç›¸ä¼¼åº¦ """</span></span><br><span class="line">client.simnet(text1, text2, options)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string"># è¿™ä¸ªç»“æœåŒ¹é…çš„æ˜¯æ–‡æœ¬çš„ç›¸ä¼¼åº¦,ä¹Ÿå°±æ˜¯è¯´,å¹¶ä¸åœ¨ä¹å…¶ä¸­çš„æ„ä¹‰,æ¯”è¾ƒçš„æ˜¯å…¶ä¸­çš„å†…å®¹</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    "log_id": 12345,</span></span><br><span class="line"><span class="string">    "texts":&#123;</span></span><br><span class="line"><span class="string">        "text_1":"æµ™å¯Œè‚¡ä»½",</span></span><br><span class="line"><span class="string">        "text_2":"ä¸‡äº‹é€šè‡ªè€ƒç½‘"</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    "score":0.3300237655639648 //ç›¸ä¼¼åº¦ç»“æœ</span></span><br><span class="line"><span class="string">&#125;,</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>

<h3 id="æŠ½å–å…³é”®å­—"><a href="#æŠ½å–å…³é”®å­—" class="headerlink" title="æŠ½å–å…³é”®å­—"></a>æŠ½å–å…³é”®å­—</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">title = <span class="string">"iphoneæ‰‹æœºå‡ºç°â€œç™½è‹¹æœâ€åŸå› åŠè§£å†³åŠæ³•ï¼Œç”¨è‹¹æœæ‰‹æœºçš„å¯ä»¥çœ‹ä¸‹"</span></span><br><span class="line"></span><br><span class="line">content = <span class="string">"å¦‚æœä¸‹é¢çš„æ–¹æ³•è¿˜æ˜¯æ²¡æœ‰è§£å†³ä½ çš„é—®é¢˜å»ºè®®æ¥æˆ‘ä»¬é—¨åº—çœ‹ä¸‹æˆéƒ½å¸‚é”¦æ±ŸåŒºçº¢æ˜Ÿè·¯ä¸‰æ®µ99å·é“¶çŸ³å¹¿åœº24å±‚01å®¤ã€‚"</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" è°ƒç”¨æ–‡ç« æ ‡ç­¾ """</span></span><br><span class="line">client.keyword(title, content);</span><br><span class="line"></span><br><span class="line"><span class="comment"># æå–æ ‡é¢˜ä¸æ–‡ç« ä¸­çš„å…³é”®å­—ä¿¡æ¯,ä¹Ÿå°±è¯´æ–‡å­—èŠ‚ç‚¹,è¿™ä¸€ç‚¹èƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬æ›´å¿«çš„å®šä½æƒ³è¦çš„ä¿¡æ¯,ä»¥åŠè¿›è¡Œæ›´åŠ ç²¾ç¡®çš„ä¿¡æ¯åˆ†ç±»</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    "log_id": 4457308639853058292,</span></span><br><span class="line"><span class="string">    "items": [</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "score": 0.997762,</span></span><br><span class="line"><span class="string">            "tag": "iphone"</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "score": 0.861775,</span></span><br><span class="line"><span class="string">            "tag": "æ‰‹æœº"</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "score": 0.845657,</span></span><br><span class="line"><span class="string">            "tag": "è‹¹æœ"</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "score": 0.83649,</span></span><br><span class="line"><span class="string">            "tag": "è‹¹æœå…¬å¸"</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "score": 0.797243,</span></span><br><span class="line"><span class="string">            "tag": "æ•°ç "</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>

<h3 id="é”™åˆ«å­—çº æ­£"><a href="#é”™åˆ«å­—çº æ­£" class="headerlink" title="é”™åˆ«å­—çº æ­£"></a>é”™åˆ«å­—çº æ­£</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">text = <span class="string">"ç™¾åº¦æ˜¯ä¸€å®¶äººå·¥åªèƒ½å…¬å¸"</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" è°ƒç”¨æ–‡æœ¬çº é”™ """</span></span><br><span class="line">client.ecnet(text);</span><br><span class="line"><span class="comment"># è¿”å›ç»“æœå°†ä¼šæŠŠé”™è¯¯ä¿¡æ¯ä¸æ­£ç¡®çš„ä¿¡æ¯å°è£…åˆ°itemä¸­,å¹¶è¿”å›,æ ¹æ®è¿™äº›ä¿¡æ¯å¯ä»¥å°†åŸæ¥çš„æ•°æ®è¿›è¡Œä¿®æ­£,å‡å°‘é”™åˆ«å­—</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    "log_id": 6770395607901559829,</span></span><br><span class="line"><span class="string">    "item": &#123;</span></span><br><span class="line"><span class="string">        "vec_fragment": [</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                "ori_frag": "åªèƒ½",</span></span><br><span class="line"><span class="string">                "begin_pos": 21,</span></span><br><span class="line"><span class="string">                "correct_frag": "æ™ºèƒ½",</span></span><br><span class="line"><span class="string">                "end_pos": 27</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        ],</span></span><br><span class="line"><span class="string">        "score": 0.875169,</span></span><br><span class="line"><span class="string">        "correct_query": "ç™¾åº¦æ˜¯ä¸€å®¶äººå·¥æ™ºèƒ½å…¬å¸"</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    "text": "ç™¾åº¦æ˜¯ä¸€å®¶äººå·¥åªèƒ½å…¬å¸"</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>

<h3 id="æ–‡å­—æƒ…ç»ªè¯†åˆ«"><a href="#æ–‡å­—æƒ…ç»ªè¯†åˆ«" class="headerlink" title="æ–‡å­—æƒ…ç»ªè¯†åˆ«"></a>æ–‡å­—æƒ…ç»ªè¯†åˆ«</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">text = <span class="string">"æœ¬æ¥ä»Šå¤©é«˜é«˜å…´å…´"</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" è°ƒç”¨å¯¹è¯æƒ…ç»ªè¯†åˆ«æ¥å£ """</span></span><br><span class="line">client.emotion(text);</span><br><span class="line"></span><br><span class="line"><span class="string">""" å¦‚æœæœ‰å¯é€‰å‚æ•° """</span></span><br><span class="line">options = &#123;&#125;</span><br><span class="line">options[<span class="string">"scene"</span>] = <span class="string">"talk"</span></span><br><span class="line"></span><br><span class="line"><span class="string">""" å¸¦å‚æ•°è°ƒç”¨å¯¹è¯æƒ…ç»ªè¯†åˆ«æ¥å£ """</span></span><br><span class="line">client.emotion(text, options)</span><br><span class="line"></span><br><span class="line"><span class="comment"># neutral      éå¼ºçƒˆè´Ÿé¢æƒ…ç»ª</span></span><br><span class="line"><span class="comment"># pessimistic  å¼ºçƒˆè´Ÿé¢æƒ…ç»ª</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    "log_id": 4258005459150262970,</span></span><br><span class="line"><span class="string">    "text": "æœ¬æ¥ä»Šå¤©é«˜é«˜å…´å…´",</span></span><br><span class="line"><span class="string">    "items": [</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "prob": 0.998619,</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">            "label": "neutral"</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            "prob": 0.00138141,</span></span><br><span class="line"><span class="string">            "label": "pessimistic"</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">    ]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure></div>



]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>ç™¾åº¦AI</tag>
      </tags>
  </entry>
  <entry>
    <title>pythonåŸºç¡€çŸ¥è¯†(ä¸€)</title>
    <url>/blog/Python/Python_id_16.html</url>
    <content><![CDATA[<h2 id="å†™åœ¨å‰é¢çš„è¯"><a href="#å†™åœ¨å‰é¢çš„è¯" class="headerlink" title="å†™åœ¨å‰é¢çš„è¯"></a>å†™åœ¨å‰é¢çš„è¯</h2><p>è¿™æ˜¯æˆ‘æ‰€å­¦çš„ç¬¬ä¸€é—¨ç¼–ç¨‹è¯­è¨€,æˆ‘çš„è®¡ç®—æœºçŸ¥è¯†ä»è¿™é‡Œèµ·æ­¥.</p>
<hr>
<h3 id="Python-ç®€ä»‹"><a href="#Python-ç®€ä»‹" class="headerlink" title="Python ç®€ä»‹"></a>Python ç®€ä»‹</h3><a id="more"></a>

<p>Python æ˜¯ä¸€ä¸ªé«˜å±‚æ¬¡çš„ç»“åˆäº†è§£é‡Šæ€§ã€ç¼–è¯‘æ€§ã€äº’åŠ¨æ€§å’Œé¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€ã€‚</p>
<p>Python çš„è®¾è®¡å…·æœ‰å¾ˆå¼ºçš„å¯è¯»æ€§ï¼Œç›¸æ¯”å…¶ä»–è¯­è¨€ç»å¸¸ä½¿ç”¨è‹±æ–‡å…³é”®å­—ï¼Œå…¶ä»–è¯­è¨€çš„ä¸€äº›æ ‡ç‚¹ç¬¦å·ï¼Œå®ƒå…·æœ‰æ¯”å…¶ä»–è¯­è¨€æ›´æœ‰ç‰¹è‰²è¯­æ³•ç»“æ„ã€‚</p>
<ul>
<li><strong>Python æ˜¯ä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼š</strong> è¿™æ„å‘³ç€å¼€å‘è¿‡ç¨‹ä¸­æ²¡æœ‰äº†ç¼–è¯‘è¿™ä¸ªç¯èŠ‚ã€‚ç±»ä¼¼äºPHPå’ŒPerlè¯­è¨€ã€‚</li>
<li><strong>Python æ˜¯äº¤äº’å¼è¯­è¨€ï¼š</strong> è¿™æ„å‘³ç€ï¼Œæ‚¨å¯ä»¥åœ¨ä¸€ä¸ª Python æç¤ºç¬¦ <strong>&gt;&gt;&gt;</strong> åç›´æ¥æ‰§è¡Œä»£ç ã€‚</li>
<li><strong>Python æ˜¯é¢å‘å¯¹è±¡è¯­è¨€:</strong> è¿™æ„å‘³ç€Pythonæ”¯æŒé¢å‘å¯¹è±¡çš„é£æ ¼æˆ–ä»£ç å°è£…åœ¨å¯¹è±¡çš„ç¼–ç¨‹æŠ€æœ¯ã€‚</li>
<li><strong>Python æ˜¯åˆå­¦è€…çš„è¯­è¨€ï¼š</strong>Python å¯¹åˆçº§ç¨‹åºå‘˜è€Œè¨€ï¼Œæ˜¯ä¸€ç§ä¼Ÿå¤§çš„è¯­è¨€ï¼Œå®ƒæ”¯æŒå¹¿æ³›çš„åº”ç”¨ç¨‹åºå¼€å‘ï¼Œä»ç®€å•çš„æ–‡å­—å¤„ç†åˆ° WWW æµè§ˆå™¨å†åˆ°æ¸¸æˆã€‚</li>
</ul>
<hr>
<h3 id="Python-å‘å±•å†å²"><a href="#Python-å‘å±•å†å²" class="headerlink" title="Python å‘å±•å†å²"></a>Python å‘å±•å†å²</h3><p>Python æ˜¯ç”± Guido van Rossum åœ¨å…«åå¹´ä»£æœ«å’Œä¹åå¹´ä»£åˆï¼Œåœ¨è·å…°å›½å®¶æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ç ”ç©¶æ‰€è®¾è®¡å‡ºæ¥çš„ã€‚</p>
<p>Python æœ¬èº«ä¹Ÿæ˜¯ç”±è¯¸å¤šå…¶ä»–è¯­è¨€å‘å±•è€Œæ¥çš„,è¿™åŒ…æ‹¬ ABCã€Modula-3ã€Cã€C++ã€Algol-68ã€SmallTalkã€Unix shell å’Œå…¶ä»–çš„è„šæœ¬è¯­è¨€ç­‰ç­‰ã€‚</p>
<p>åƒ Perl è¯­è¨€ä¸€æ ·ï¼ŒPython æºä»£ç åŒæ ·éµå¾ª GPL(GNU General Public License)åè®®ã€‚</p>
<p>ç°åœ¨ Python æ˜¯ç”±ä¸€ä¸ªæ ¸å¿ƒå¼€å‘å›¢é˜Ÿåœ¨ç»´æŠ¤ï¼ŒGuido van Rossum ä»ç„¶å æ®ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼ŒæŒ‡å¯¼å…¶è¿›å±•ã€‚</p>
<p>Python 2.7 è¢«ç¡®å®šä¸ºæœ€åä¸€ä¸ª Python 2.x ç‰ˆæœ¬ï¼Œå®ƒé™¤äº†æ”¯æŒ Python 2.x è¯­æ³•å¤–ï¼Œè¿˜æ”¯æŒéƒ¨åˆ† Python 3.1 è¯­æ³•ã€‚</p>
<hr>
<h3 id="Python-ç‰¹ç‚¹"><a href="#Python-ç‰¹ç‚¹" class="headerlink" title="Python ç‰¹ç‚¹"></a>Python ç‰¹ç‚¹</h3><p><strong>1.æ˜“äºå­¦ä¹ ï¼š</strong>Pythonæœ‰ç›¸å¯¹è¾ƒå°‘çš„å…³é”®å­—ï¼Œç»“æ„ç®€å•ï¼Œå’Œä¸€ä¸ªæ˜ç¡®å®šä¹‰çš„è¯­æ³•ï¼Œå­¦ä¹ èµ·æ¥æ›´åŠ ç®€å•ã€‚</p>
<p><strong>2.æ˜“äºé˜…è¯»ï¼š</strong>Pythonä»£ç å®šä¹‰çš„æ›´æ¸…æ™°ã€‚</p>
<p><strong>3.æ˜“äºç»´æŠ¤ï¼š</strong>Pythonçš„æˆåŠŸåœ¨äºå®ƒçš„æºä»£ç æ˜¯ç›¸å½“å®¹æ˜“ç»´æŠ¤çš„ã€‚</p>
<p><strong>4.ä¸€ä¸ªå¹¿æ³›çš„æ ‡å‡†åº“ï¼š</strong>Pythonçš„æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯ä¸°å¯Œçš„åº“ï¼Œè·¨å¹³å°çš„ï¼Œåœ¨UNIXï¼ŒWindowså’ŒMacintoshå…¼å®¹å¾ˆå¥½ã€‚</p>
<p><strong>5.äº’åŠ¨æ¨¡å¼ï¼š</strong>äº’åŠ¨æ¨¡å¼çš„æ”¯æŒï¼Œæ‚¨å¯ä»¥ä»ç»ˆç«¯è¾“å…¥æ‰§è¡Œä»£ç å¹¶è·å¾—ç»“æœçš„è¯­è¨€ï¼Œäº’åŠ¨çš„æµ‹è¯•å’Œè°ƒè¯•ä»£ç ç‰‡æ–­ã€‚</p>
<p><strong>6.å¯ç§»æ¤ï¼š</strong>åŸºäºå…¶å¼€æ”¾æºä»£ç çš„ç‰¹æ€§ï¼ŒPythonå·²ç»è¢«ç§»æ¤ï¼ˆä¹Ÿå°±æ˜¯ä½¿å…¶å·¥ä½œï¼‰åˆ°è®¸å¤šå¹³å°ã€‚</p>
<p><strong>7.å¯æ‰©å±•ï¼š</strong>å¦‚æœä½ éœ€è¦ä¸€æ®µè¿è¡Œå¾ˆå¿«çš„å…³é”®ä»£ç ï¼Œæˆ–è€…æ˜¯æƒ³è¦ç¼–å†™ä¸€äº›ä¸æ„¿å¼€æ”¾çš„ç®—æ³•ï¼Œä½ å¯ä»¥ä½¿ç”¨Cæˆ–C++å®Œæˆé‚£éƒ¨åˆ†ç¨‹åºï¼Œç„¶åä»ä½ çš„Pythonç¨‹åºä¸­è°ƒç”¨ã€‚</p>
<p><strong>8.æ•°æ®åº“ï¼š</strong>Pythonæä¾›æ‰€æœ‰ä¸»è¦çš„å•†ä¸šæ•°æ®åº“çš„æ¥å£ã€‚</p>
<p><strong>9.GUIç¼–ç¨‹ï¼š</strong>Pythonæ”¯æŒGUIå¯ä»¥åˆ›å»ºå’Œç§»æ¤åˆ°è®¸å¤šç³»ç»Ÿè°ƒç”¨ã€‚</p>
<p><strong>10.å¯åµŒå…¥:</strong> ä½ å¯ä»¥å°†PythonåµŒå…¥åˆ°C/C++ç¨‹åºï¼Œè®©ä½ çš„ç¨‹åºçš„ç”¨æˆ·è·å¾—â€è„šæœ¬åŒ–â€çš„èƒ½åŠ›ã€‚ </p>
<hr>
<p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>ç®€å• â€“ Python æ˜¯ä¸€ç§ä»£è¡¨ç®€å•ä¸»ä¹‰æ€æƒ³çš„è¯­è¨€ã€‚é˜…è¯»ä¸€ä¸ªè‰¯å¥½çš„ Python ç¨‹åºå°±æ„Ÿè§‰åƒæ˜¯åœ¨è¯»è‹±è¯­ä¸€æ ·ï¼Œå°½ç®¡è¿™ä¸ªè‹±è¯­çš„è¦æ±‚éå¸¸ä¸¥æ ¼ï¼Python çš„è¿™ç§ä¼ªä»£ç æœ¬è´¨æ˜¯å®ƒæœ€å¤§çš„ä¼˜ç‚¹ä¹‹ä¸€ã€‚å®ƒä½¿ä½ èƒ½å¤Ÿä¸“æ³¨äºè§£å†³é—®é¢˜è€Œä¸æ˜¯å»ææ˜ç™½è¯­è¨€æœ¬èº«ã€‚</li>
<li>æ˜“å­¦ â€“ å°±å¦‚åŒä½ å³å°†çœ‹åˆ°çš„ä¸€æ ·ï¼ŒPython æå…¶å®¹æ˜“ä¸Šæ‰‹ã€‚å‰é¢å·²ç»æåˆ°äº†ï¼ŒPython æœ‰æå…¶ç®€å•çš„è¯­æ³•ã€‚</li>
<li>å…è´¹ã€å¼€æº â€“ Python æ˜¯ FLOSSï¼ˆè‡ªç”±/å¼€æ”¾æºç è½¯ä»¶ï¼‰ä¹‹ä¸€ã€‚ç®€å•åœ°è¯´ï¼Œä½ å¯ä»¥è‡ªç”±åœ°å‘å¸ƒè¿™ä¸ªè½¯ä»¶çš„æ‹·è´ã€é˜…è¯»å®ƒçš„æºä»£ç ã€å¯¹å®ƒåšæ”¹åŠ¨ã€æŠŠå®ƒçš„ä¸€éƒ¨åˆ†ç”¨äºæ–°çš„è‡ªç”±è½¯ä»¶ä¸­ã€‚FLOSS æ˜¯åŸºäºä¸€ä¸ªå›¢ä½“åˆ†äº«çŸ¥è¯†çš„æ¦‚å¿µã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆ Python å¦‚æ­¤ä¼˜ç§€çš„åŸå› ä¹‹ä¸€â€”â€”å®ƒæ˜¯ç”±ä¸€ç¾¤å¸Œæœ›çœ‹åˆ°ä¸€ä¸ªæ›´åŠ ä¼˜ç§€çš„ Python çš„äººåˆ›é€ å¹¶ç»å¸¸æ”¹è¿›ç€çš„ã€‚</li>
<li>é«˜å±‚è¯­è¨€ â€“ å½“ä½ ç”¨ Python è¯­è¨€ç¼–å†™ç¨‹åºçš„æ—¶å€™ï¼Œä½ æ— éœ€è€ƒè™‘è¯¸å¦‚å¦‚ä½•ç®¡ç†ä½ çš„ç¨‹åºä½¿ç”¨çš„å†…å­˜ä¸€ç±»çš„åº•å±‚ç»†èŠ‚ã€‚</li>
<li>å¯ç§»æ¤æ€§ â€“ ç”±äºå®ƒçš„å¼€æºæœ¬è´¨ï¼ŒPython å·²ç»è¢«ç§»æ¤åœ¨è®¸å¤šå¹³å°ä¸Šï¼ˆç»è¿‡æ”¹åŠ¨ä½¿å®ƒèƒ½å¤Ÿå·¥ä½œåœ¨ä¸åŒå¹³å°ä¸Šï¼‰ã€‚å¦‚æœä½ å°å¿ƒåœ°é¿å…ä½¿ç”¨ä¾èµ–äºç³»ç»Ÿçš„ç‰¹æ€§ï¼Œé‚£ä¹ˆä½ çš„æ‰€æœ‰ Python ç¨‹åºæ— éœ€ä¿®æ”¹å°±å¯ä»¥åœ¨ä¸‹è¿°ä»»ä½•å¹³å°ä¸Šé¢è¿è¡Œã€‚è¿™äº›å¹³å°åŒ…æ‹¬ Linuxã€Windowsã€FreeBSDã€Macintoshã€Solarisã€OS/2ã€Amigaã€AROSã€AS/400ã€BeOSã€OS/390ã€z/OSã€Palm OSã€QNXã€VMSã€Psionã€Acom RISC OSã€VxWorksã€PlayStationã€Sharp Zaurusã€Windows CE ç”šè‡³è¿˜æœ‰ PocketPCã€Symbian ä»¥åŠ Google åŸºäº Linux å¼€å‘çš„ Android å¹³å°ï¼</li>
<li>è§£é‡Šæ€§ â€“ è¿™ä¸€ç‚¹éœ€è¦ä¸€äº›è§£é‡Šã€‚ä¸€ä¸ªç”¨ç¼–è¯‘æ€§è¯­è¨€æ¯”å¦‚ C æˆ– C++ å†™çš„ç¨‹åºå¯ä»¥ä»æºæ–‡ä»¶ï¼ˆå³ C æˆ– C++ è¯­è¨€ï¼‰è½¬æ¢åˆ°ä¸€ä¸ªä½ çš„è®¡ç®—æœºä½¿ç”¨çš„è¯­è¨€ï¼ˆäºŒè¿›åˆ¶ä»£ç ï¼Œå³0å’Œ1ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹é€šè¿‡ç¼–è¯‘å™¨å’Œä¸åŒçš„æ ‡è®°ã€é€‰é¡¹å®Œæˆã€‚å½“ä½ è¿è¡Œä½ çš„ç¨‹åºçš„æ—¶å€™ï¼Œè¿æ¥/è½¬è½½å™¨è½¯ä»¶æŠŠä½ çš„ç¨‹åºä»ç¡¬ç›˜å¤åˆ¶åˆ°å†…å­˜ä¸­å¹¶ä¸”è¿è¡Œã€‚è€Œ Python è¯­è¨€å†™çš„ç¨‹åºä¸éœ€è¦ç¼–è¯‘æˆäºŒè¿›åˆ¶ä»£ç ã€‚ä½ å¯ä»¥ç›´æ¥ä»æºä»£ç è¿è¡Œç¨‹åºã€‚åœ¨è®¡ç®—æœºå†…éƒ¨ï¼ŒPython è§£é‡Šå™¨æŠŠæºä»£ç è½¬æ¢æˆç§°ä¸ºå­—èŠ‚ç çš„ä¸­é—´å½¢å¼ï¼Œç„¶åå†æŠŠå®ƒç¿»è¯‘æˆè®¡ç®—æœºä½¿ç”¨çš„æœºå™¨è¯­è¨€å¹¶è¿è¡Œã€‚äº‹å®ä¸Šï¼Œç”±äºä½ ä¸å†éœ€è¦æ‹…å¿ƒå¦‚ä½•ç¼–è¯‘ç¨‹åºï¼Œå¦‚ä½•ç¡®ä¿è¿æ¥è½¬è½½æ­£ç¡®çš„åº“ç­‰ç­‰ï¼Œæ‰€æœ‰è¿™ä¸€åˆ‡ä½¿å¾—ä½¿ç”¨ Python æ›´åŠ ç®€å•ã€‚ç”±äºä½ åªéœ€è¦æŠŠä½ çš„ Python ç¨‹åºæ‹·è´åˆ°å¦å¤–ä¸€å°è®¡ç®—æœºä¸Šï¼Œå®ƒå°±å¯ä»¥å·¥ä½œäº†ï¼Œè¿™ä¹Ÿä½¿å¾—ä½ çš„ Python ç¨‹åºæ›´åŠ æ˜“äºç§»æ¤ã€‚</li>
<li>é¢å‘å¯¹è±¡ â€“ Python æ—¢æ”¯æŒé¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹ä¹Ÿæ”¯æŒé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ã€‚åœ¨â€œé¢å‘è¿‡ç¨‹â€çš„è¯­è¨€ä¸­ï¼Œç¨‹åºæ˜¯ç”±è¿‡ç¨‹æˆ–ä»…ä»…æ˜¯å¯é‡ç”¨ä»£ç çš„å‡½æ•°æ„å»ºèµ·æ¥çš„ã€‚åœ¨â€œé¢å‘å¯¹è±¡â€çš„è¯­è¨€ä¸­ï¼Œç¨‹åºæ˜¯ç”±æ•°æ®å’ŒåŠŸèƒ½ç»„åˆè€Œæˆçš„å¯¹è±¡æ„å»ºèµ·æ¥çš„ã€‚ä¸å…¶ä»–ä¸»è¦çš„è¯­è¨€å¦‚ C++ å’Œ Java ç›¸æ¯”ï¼ŒPython ä»¥ä¸€ç§éå¸¸å¼ºå¤§åˆç®€å•çš„æ–¹å¼å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</li>
<li>å¯æ‰©å±•æ€§ â€“ å¦‚æœä½ éœ€è¦ä½ çš„ä¸€æ®µå…³é”®ä»£ç è¿è¡Œå¾—æ›´å¿«æˆ–è€…å¸Œæœ›æŸäº›ç®—æ³•ä¸å…¬å¼€ï¼Œä½ å¯ä»¥æŠŠä½ çš„éƒ¨åˆ†ç¨‹åºç”¨ C æˆ– C++ ç¼–å†™ï¼Œç„¶ååœ¨ä½ çš„ Python ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬ã€‚</li>
<li>ä¸°å¯Œçš„åº“ â€“ Python æ ‡å‡†åº“ç¡®å®å¾ˆåºå¤§ã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ å¤„ç†å„ç§å·¥ä½œï¼ŒåŒ…æ‹¬æ­£åˆ™è¡¨è¾¾å¼ã€æ–‡æ¡£ç”Ÿæˆã€å•å…ƒæµ‹è¯•ã€çº¿ç¨‹ã€æ•°æ®åº“ã€ç½‘é¡µæµè§ˆå™¨ã€CGIã€FTPã€ç”µå­é‚®ä»¶ã€XMLã€XML-RPCã€HTMLã€WAV æ–‡ä»¶ã€å¯†ç ç³»ç»Ÿã€GUIï¼ˆå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰ã€Tk å’Œå…¶ä»–ä¸ç³»ç»Ÿæœ‰å…³çš„æ“ä½œã€‚è®°ä½ï¼Œåªè¦å®‰è£…äº† Pythonï¼Œæ‰€æœ‰è¿™äº›åŠŸèƒ½éƒ½æ˜¯å¯ç”¨çš„ã€‚è¿™è¢«ç§°ä½œ Python çš„â€œåŠŸèƒ½é½å…¨â€ç†å¿µã€‚é™¤äº†æ ‡å‡†åº“ä»¥å¤–ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–é«˜è´¨é‡çš„åº“ï¼Œå¦‚ wxPythonã€Twisted å’Œ Python å›¾åƒåº“ç­‰ç­‰ã€‚</li>
<li>è§„èŒƒçš„ä»£ç  â€“ Python é‡‡ç”¨å¼ºåˆ¶ç¼©è¿›çš„æ–¹å¼ä½¿å¾—ä»£ç å…·æœ‰æä½³çš„å¯è¯»æ€§ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>è¿è¡Œé€Ÿåº¦ï¼Œæœ‰é€Ÿåº¦è¦æ±‚çš„è¯ï¼Œç”¨ C++ æ”¹å†™å…³é”®éƒ¨åˆ†å§ã€‚</li>
<li>å›½å†…å¸‚åœºè¾ƒå°ï¼ˆå›½å†…ä»¥ Python æ¥åšä¸»è¦å¼€å‘çš„ï¼Œç›®å‰åªæœ‰ä¸€äº› web2.0 å…¬å¸ï¼‰ã€‚ä½†æ—¶é—´æ¨ç§»ï¼Œç›®å‰å¾ˆå¤šå›½å†…è½¯ä»¶å…¬å¸ï¼Œå°¤å…¶æ˜¯æ¸¸æˆå…¬å¸ï¼Œä¹Ÿå¼€å§‹è§„æ¨¡ä½¿ç”¨ä»–ã€‚</li>
<li>ä¸­æ–‡èµ„æ–™åŒ®ä¹ï¼ˆå¥½çš„ Python ä¸­æ–‡èµ„æ–™å±ˆæŒ‡å¯æ•°ï¼Œç°åœ¨åº”è¯¥å˜å¤šäº†ï¼‰ã€‚æ‰˜ç¤¾åŒºçš„ç¦ï¼Œæœ‰å‡ æœ¬ä¼˜ç§€çš„æ•™æå·²ç»è¢«ç¿»è¯‘äº†ï¼Œä½†å…¥é—¨çº§æ•™æå¤šï¼Œé«˜çº§å†…å®¹è¿˜æ˜¯åªèƒ½çœ‹è‹±è¯­ç‰ˆã€‚</li>
<li>æ„æ¶é€‰æ‹©å¤ªå¤šï¼ˆæ²¡æœ‰åƒ C# è¿™æ ·çš„å®˜æ–¹ .net æ„æ¶ï¼Œä¹Ÿæ²¡æœ‰åƒ ruby ç”±äºå†å²è¾ƒçŸ­ï¼Œæ„æ¶å¼€å‘çš„ç›¸å¯¹é›†ä¸­ã€‚Ruby on Rails æ„æ¶å¼€å‘ä¸­å°å‹webç¨‹åºå¤©ä¸‹æ— æ•Œï¼‰ã€‚ä¸è¿‡è¿™ä¹Ÿä»å¦ä¸€ä¸ªä¾§é¢è¯´æ˜ï¼Œpythonæ¯”è¾ƒä¼˜ç§€ï¼Œå¸å¼•çš„äººæ‰å¤šï¼Œé¡¹ç›®ä¹Ÿå¤šã€‚</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>redisæ¦‚è§ˆ</title>
    <url>/blog/Redis/Redis_id_02.html</url>
    <content><![CDATA[<h2 id="redisæ•°æ®åº“å®‰è£…ä¸ä½¿ç”¨"><a href="#redisæ•°æ®åº“å®‰è£…ä¸ä½¿ç”¨" class="headerlink" title="redisæ•°æ®åº“å®‰è£…ä¸ä½¿ç”¨:"></a>redisæ•°æ®åº“å®‰è£…ä¸ä½¿ç”¨:</h2><a id="more"></a>
<ul>
<li>å‰å¾€githubä¸‹è½½è¦ä½¿ç”¨çš„ç‰ˆæœ¬çš„å‹ç¼©åŒ…</li>
<li>è§£å‹ç¼©æ–‡ä»¶</li>
<li>cdåˆ°å®‰è£…ç›®å½•</li>
<li>è¿è¡Œredis-server</li>
<li>å°†å®‰è£…ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­</li>
<li>è¿è¡Œredis-server</li>
<li>å†æ¬¡æ‰“å¼€ä¸€ä¸ªcmdçª—å£,è¾“å…¥redis-cliå³å¯è¿›å…¥redisç¯å¢ƒ</li>
<li>keys *   æŸ¥çœ‹å½“å‰æ‰€æœ‰æ•°æ®</li>
<li>ç«¯å£: 127.0.0.1:6379</li>
</ul>
<h2 id="redisæ•°æ®ç±»å‹"><a href="#redisæ•°æ®ç±»å‹" class="headerlink" title="redisæ•°æ®ç±»å‹:"></a>redisæ•°æ®ç±»å‹:</h2><ul>
<li>list<ul>
<li>llen<ul>
<li>è·å–åˆ—è¡¨é•¿åº¦</li>
</ul>
</li>
<li>lpush<ul>
<li>åœ¨è¡¨å¤´æ·»åŠ æ•°æ®</li>
</ul>
</li>
<li>rpush<ul>
<li>åœ¨è¡¨å°¾æ·»åŠ æ•°æ®</li>
</ul>
</li>
<li>lpop <ul>
<li>ä»è¡¨å¤´å¼¹å‡ºæ•°æ®</li>
</ul>
</li>
<li>rpop<ul>
<li>ä»è¡¨å°¾å¼¹å‡ºæ•°æ®</li>
</ul>
</li>
<li>rpoplpush<ul>
<li>ä»è¡¨å°¾å¼¹å‡ºæ•°æ®å¹¶æ·»åŠ åˆ°è¡¨å¤´</li>
</ul>
</li>
<li>lrange listName num num  <ul>
<li>ä»xxåˆ°xxçš„æ‰€æœ‰æ•°æ®,æ”¯æŒè´Ÿæ•°</li>
</ul>
</li>
<li>lindex listName num<ul>
<li>æŒ‡å®šä¸‹æ ‡è·å–å¯¹åº”çš„å€¼</li>
</ul>
</li>
<li>linsert key    (before) value newvalue<ul>
<li>åœ¨æŸä¸ªå€¼ä¹‹å‰æ·»åŠ å¦ä¸€ä¸ªæ–°çš„æ•°å€¼</li>
</ul>
</li>
<li>linsert key    (after) value newvalue<ul>
<li>åœ¨æŸä¸ªå€¼ä¹‹åæ·»åŠ å¦ä¸€ä¸ªæ–°çš„å€¼</li>
</ul>
</li>
<li>lrem key  n  value <ul>
<li>åˆ é™¤æŸä¸ªå€¼,nä¸ºæ¬¡æ•°</li>
<li>å½“n &gt; 0,åˆ™åˆ é™¤nä¸ªå¯¹åº”çš„å€¼,ä¸”åˆ é™¤é¡ºåºä»å·¦å¾€å³</li>
<li>å½“n &lt; 0,åˆ é™¤nä¸ªå¯¹åº”çš„å€¼,ä¸”åˆ é™¤é¡ºåºä»å³å¾€å·¦</li>
<li>å½“n = 0,åˆ™åˆ é™¤æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®</li>
</ul>
</li>
</ul>
</li>
<li>string<ul>
<li>äºŒè¿›åˆ¶å®‰å…¨çš„é”®å€¼å¯¹,ä»¥key:valueçš„å½¢å¼å­˜åœ¨,ä¹Ÿå°±æ˜¯è¯´,å¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ–‡ä»¶</li>
<li>stringå•ä¸ªå¤§å°æœ€å¤§ä¸º512M</li>
</ul>
</li>
<li>set<ul>
<li>setè®¾å®šé”®å€¼å¯¹</li>
<li>getæ ¹æ®é”®è·å–å¯¹åº”çš„å€¼</li>
<li>append åœ¨é”®å¯¹åº”çš„å€¼åé¢è¿½åŠ æ–°çš„æ•°æ®,åŒæ—¶å…·å¤‡setçš„æ¦‚å¿µ,å¦‚æœè¿½åŠ çš„ç›®æ ‡æ˜¯ä¸€ä¸ªä¸å­˜åœ¨çš„é”®,å°†ä¼šè‡ªåŠ¨åˆ›å»ºå‡ºæ¥</li>
<li>strlen è·å–é”®å¯¹åº”çš„å­—ç¬¦ä¸²çš„é•¿åº¦</li>
<li>setnx å¯¹ä¸€ä¸ªé”®è¿›è¡Œèµ‹å€¼,å¦‚æœè¯¥é”®å­˜åœ¨,åˆ™ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœ,å¦‚æœè¯¥é”®å¹¶ä¸å­˜åœ¨,åˆ™è¿›è¡Œåˆ›å»ºå¹¶èµ‹å€¼</li>
<li>incr å¯¹é”®å¯¹åº”çš„å€¼è¿›è¡Œ+1æ“ä½œ,å‰ææ˜¯è¿™ä¸ªå€¼æ˜¯çº¯ç²¹çš„æ•°å­—</li>
<li>decr å¯¹é”®å¯¹åº”çš„å€¼è¿›è¡Œ-1æ“ä½œ,å‰ææ˜¯è¿™ä¸ªå€¼ä¸æ˜¯çº¯æ•°å­—</li>
<li>incrby keysName num å¯¹é”®æ‰€å¯¹åº”çš„å€¼è¿›è¡ŒåŠ æ³•æ“ä½œ,</li>
<li>decrby  keysName num å¯¹é”®æ‰€å¯¹åº”çš„å€¼è¿›è¡Œå‡æ³•æ“ä½œ</li>
</ul>
</li>
<li>hash</li>
<li>zset</li>
</ul>
<h2 id="redisåŸºç¡€æ“ä½œ"><a href="#redisåŸºç¡€æ“ä½œ" class="headerlink" title="redisåŸºç¡€æ“ä½œ:"></a>redisåŸºç¡€æ“ä½œ:</h2><ul>
<li>keys * <ul>
<li>æŸ¥çœ‹æ‰€æœ‰çš„æ•°æ®</li>
</ul>
</li>
<li>exists name<ul>
<li>æŸ¥çœ‹ç¬¦åˆè¯¥åç§°çš„æ•°æ®æ€»é‡</li>
</ul>
</li>
<li>del name<ul>
<li>åˆ é™¤ç›®æ ‡æ•°æ®</li>
</ul>
</li>
<li>expire name succes<ul>
<li>ä¸ºä¸€ä¸ªæ•°æ®è®¾ç½®è¿‡æœŸæ—¶é—´,æ—¶é—´å•ä½é»˜è®¤ä¸ºç§’,éœ€è¾“å…¥æ•°å­—</li>
</ul>
</li>
<li>ttl name<ul>
<li>æŸ¥çœ‹è¯¥å¯¹è±¡è¿˜æœ‰å¤šä¹…è¿‡æœŸ</li>
</ul>
</li>
<li>dbsize<ul>
<li>æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„åº“ä¸­çš„æ•°æ®çš„æ•°é‡</li>
</ul>
</li>
<li>Flushdb<ul>
<li>æ¸…ç©ºå½“å‰çš„åº“</li>
</ul>
</li>
<li>Flushall<ul>
<li>æ¸…ç©ºæ‰€æœ‰çš„åº“</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºcrawlSpiderè¿›è¡Œçš„å…¨æ ˆæ•°æ®çˆ¬å–</title>
    <url>/blog/Spider/Spider_id_03.html</url>
    <content><![CDATA[<h2 id="åŸºäºcrawlSpiderè¿›è¡Œçš„å…¨æ ˆæ•°æ®çˆ¬å–"><a href="#åŸºäºcrawlSpiderè¿›è¡Œçš„å…¨æ ˆæ•°æ®çˆ¬å–" class="headerlink" title="åŸºäºcrawlSpiderè¿›è¡Œçš„å…¨æ ˆæ•°æ®çˆ¬å–"></a>åŸºäºcrawlSpiderè¿›è¡Œçš„å…¨æ ˆæ•°æ®çˆ¬å–</h2><a id="more"></a>
<h2 id="crawlspideræ˜¯çˆ¬è™«ç±»ä¸­spiderçš„ä¸€ä¸ªå­ç±»"><a href="#crawlspideræ˜¯çˆ¬è™«ç±»ä¸­spiderçš„ä¸€ä¸ªå­ç±»" class="headerlink" title="crawlspideræ˜¯çˆ¬è™«ç±»ä¸­spiderçš„ä¸€ä¸ªå­ç±»"></a>crawlspideræ˜¯çˆ¬è™«ç±»ä¸­spiderçš„ä¸€ä¸ªå­ç±»</h2><h2 id="ä½¿ç”¨æµç¨‹"><a href="#ä½¿ç”¨æµç¨‹" class="headerlink" title="ä½¿ç”¨æµç¨‹"></a>ä½¿ç”¨æµç¨‹</h2><p>åˆ›å»ºä¸€ä¸ªåŸºäºcrawlspiderçš„çˆ¬è™«æ–‡ä»¶</p>
<ul>
<li>â€‹    scrapy genspider -t crawl spiderName <a href="http://www.xxx.com" target="_blank" rel="noopener">www.xxx.com</a><ul>
<li>ä½¿ç”¨æŒ‡ä»¤åˆ›å»ºä¸€ä¸ªåŸºäºcrawlSpiderçš„çˆ¬è™«æ–‡ä»¶</li>
</ul>
</li>
<li>æ„é€ é“¾æ¥æå–å™¨å’Œæ„é€ è§£æå™¨<ul>
<li>é“¾æ¥æå–å™¨<ul>
<li>å¯ä»¥æ ¹æ®åˆ¶å®šçš„è§„åˆ™è¿›è¡ŒæŒ‡å®šé“¾æ¥çš„æå–</li>
</ul>
</li>
<li>æ„é€ è§£æå™¨</li>
</ul>
</li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line"><span class="keyword">from</span> scrapy.spiders <span class="keyword">import</span> CrawlSpider, Rule</span><br><span class="line"><span class="keyword">from</span> ..items <span class="keyword">import</span> Homework1Item, Homework1ContentItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SunSpider</span><span class="params">(CrawlSpider)</span>:</span></span><br><span class="line">    name = <span class="string">'sun'</span></span><br><span class="line">    <span class="comment"># allowed_domains = ['www.xxx.com']</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'http://wz.sun0769.com/index.php/question/questionType?type=4'</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    rules = (</span><br><span class="line">        <span class="comment"># è¿›è¡Œé“¾æ¥æå–,followå¼€å¯æ·±åº¦æå– ,</span></span><br><span class="line">        Rule(LinkExtractor(allow=<span class="string">r'type=4&amp;page=\d+'</span>),</span><br><span class="line">             callback=<span class="string">'parse_item'</span>,</span><br><span class="line">             follow=<span class="literal">True</span>),</span><br><span class="line">        <span class="comment"># è¿›è¡Œè¯¦æƒ…é¡µé“¾æ¥æå–,ä½†æ˜¯å…³é—­æ·±åº¦æå–</span></span><br><span class="line">        Rule(LinkExtractor(allow=<span class="string">r'question/\d+/\d+\.shtml'</span>),</span><br><span class="line">             callback=<span class="string">'parse_detail'</span>,</span><br><span class="line">             follow=<span class="literal">False</span>),</span><br><span class="line">    )</span><br><span class="line">	<span class="comment"># åœ¨è¿›è¡Œä¸Šè¿°çš„ç½‘é¡µå¤„ç†çš„æ—¶å€™,è¿™ä¸¤ä¸ªå°†ä¼šåŒæ­¥è¿›è¡Œ,ä¹Ÿå°±æ˜¯è¯´,åœ¨ç¬¬ä¸€ä¸ªæ·±åº¦æå–è¿è¡Œä¸€æ¬¡çš„æ—¶å€™,å¦ä¸€ä¸ªä¹Ÿä¼šä¸€èµ·è¿è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="comment"># è¿™ç§æƒ…å†µä¸‹,æ¯æ¬¡æˆ‘ä»¬è·å–ä¸€ä¸ªæ–°çš„é¡µé¢,ç¬¬äºŒä¸ªæå–å™¨å°†ä¼šå¯¹è¿™ä¸ªæ–°çš„é¡µé¢è¿›è¡Œå¤„ç†,ç„¶åå†å¤„ç†ä¸‹ä¸€ä¸ªé¡µé¢</span></span><br><span class="line">    <span class="comment"># æ­£å¸¸çš„spiderå’Œè¿™ä¸ªcrawlspideræ˜¯é€šç”¨çš„,ä¹Ÿå°±æ˜¯è¯´,åœ¨ä½¿ç”¨è¿™ä¸ªcrawlspdierè¿›è¡Œæ·±åº¦çˆ¬å–çš„æ—¶å€™,å…¶ä»–çš„spideræ“ä½œä¹Ÿæ˜¯æ²¡é—®é¢˜çš„</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_item</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        tr_list = response.xpath(</span><br><span class="line">            <span class="string">'//*[@id="morelist"]/div/table[2]//tr/td/table//tr'</span>)</span><br><span class="line">        <span class="keyword">for</span> tr <span class="keyword">in</span> tr_list:</span><br><span class="line">            title = tr.xpath(<span class="string">'./td[2]/a[2]/@title'</span>).extract_first()</span><br><span class="line">            detail = tr.xpath(<span class="string">'./td[3]/span/text()'</span>).extract_first()</span><br><span class="line">            <span class="comment"># print(title,detail)</span></span><br><span class="line">            item = Homework1ContentItem()</span><br><span class="line">            item[<span class="string">'title'</span>] = title</span><br><span class="line">            item[<span class="string">'detail'</span>] = detail</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_detail</span><span class="params">(self, response)</span>:</span></span><br><span class="line"></span><br><span class="line">        content = response.xpath(</span><br><span class="line">            <span class="string">'/html/body/div[9]/table[2]//tr[1]//text()'</span>).extract()</span><br><span class="line">        content = <span class="string">''</span>.join(content)</span><br><span class="line">        item = Homework1Item()</span><br><span class="line">        item[<span class="string">'content'</span>] = content</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>å¢é‡å¼çˆ¬è™«ä½¿ç”¨</title>
    <url>/blog/Spider/Spider_id_19.html</url>
    <content><![CDATA[<h2 id="1â€”å¢é‡å¼çˆ¬è™«ç®€ä»‹"><a href="#1â€”å¢é‡å¼çˆ¬è™«ç®€ä»‹" class="headerlink" title="1â€”å¢é‡å¼çˆ¬è™«ç®€ä»‹"></a>1â€”å¢é‡å¼çˆ¬è™«ç®€ä»‹</h2><a id="more"></a>
<h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ:"></a>æ¦‚å¿µ:</h3><p>â€‹    æ£€æµ‹ç½‘ç«™æ•°æ®æ›´æ–°æƒ…å†µ</p>
<h3 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ:"></a>æ ¸å¿ƒ:</h3><p>â€‹    å»é‡</p>
<h3 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹::"></a>è¦ç‚¹::</h3><p>â€‹    æ·±åº¦çˆ¬å–ç±»å‹çš„ç½‘ç«™ä¸­éœ€è¦å¯¹è¯¦æƒ…é¡µçš„urlè¿›è¡Œè®°å½•å’Œæ£€æµ‹</p>
<h4 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•:"></a>è®°å½•:</h4><p>â€‹        å°†çˆ¬å–è¿‡çš„è¯¦æƒ…é¡µçš„urlè¿›è¡Œè®°å½•ä¿å­˜</p>
<p>â€‹        å°†urlå­˜å‚¨åˆ°redisä¸­å»</p>
<h4 id="æ£€æµ‹"><a href="#æ£€æµ‹" class="headerlink" title="æ£€æµ‹:"></a>æ£€æµ‹:</h4><p>â€‹        åœ¨å¯¹æŸä¸€ä¸ªè¯¦æƒ…é¡µçš„urlå‘è¯·æ±‚ä¹‹å‰å…ˆè¦åˆ°è®°å½•è¡¨ä¸­è¿›è¡ŒæŸ¥çœ‹,è¯¥urlæ˜¯å¦å­˜åœ¨,å¦‚æœå­˜åœ¨çš„è¯,æ„å‘³ç€è¿™ä¸ªurlå·²ç»è¢«çˆ¬å–è¿‡äº†</p>
<h2 id="2â€”ä½¿ç”¨æµç¨‹åŠæ¡ˆä¾‹"><a href="#2â€”ä½¿ç”¨æµç¨‹åŠæ¡ˆä¾‹" class="headerlink" title="2â€”ä½¿ç”¨æµç¨‹åŠæ¡ˆä¾‹"></a>2â€”ä½¿ç”¨æµç¨‹åŠæ¡ˆä¾‹</h2><h3 id="æ·±åº¦çˆ¬å–ç±»å‹çš„ç½‘ç«™ä½¿ç”¨å¢é‡å¼çˆ¬è™«çˆ¬å–æ•°æ®"><a href="#æ·±åº¦çˆ¬å–ç±»å‹çš„ç½‘ç«™ä½¿ç”¨å¢é‡å¼çˆ¬è™«çˆ¬å–æ•°æ®" class="headerlink" title="æ·±åº¦çˆ¬å–ç±»å‹çš„ç½‘ç«™ä½¿ç”¨å¢é‡å¼çˆ¬è™«çˆ¬å–æ•°æ®:"></a>æ·±åº¦çˆ¬å–ç±»å‹çš„ç½‘ç«™ä½¿ç”¨å¢é‡å¼çˆ¬è™«çˆ¬å–æ•°æ®:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> scrapy.linkextractors <span class="keyword">import</span> LinkExtractor</span><br><span class="line"><span class="keyword">from</span> scrapy.spiders <span class="keyword">import</span> CrawlSpider, Rule</span><br><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis</span><br><span class="line"><span class="keyword">from</span> ..items <span class="keyword">import</span> ZlsMovieproItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZlsSpider</span><span class="params">(CrawlSpider)</span>:</span></span><br><span class="line">    name = <span class="string">'zls'</span></span><br><span class="line">    conn = Redis()</span><br><span class="line">    <span class="comment"># è®¾ç½®åˆè¯•url</span></span><br><span class="line">    start_urls = [<span class="string">'https://www.4567tv.tv/index.php/vod/show/id/8.html'</span>]</span><br><span class="line">    rules = (</span><br><span class="line">        Rule(LinkExtractor(allow=<span class="string">r'id/8/page/\d+\.html'</span>),</span><br><span class="line">             callback=<span class="string">'parse_item'</span>,</span><br><span class="line">             follow=<span class="literal">True</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_item</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># è¿›è¡Œæ•°æ®è§£æ,å‡†å¤‡å°±è¿›è¡Œæ·±åº¦çˆ¬å–,</span></span><br><span class="line">        <span class="comment"># å› ä¸ºè¿™é‡Œçš„æ·±åº¦è§£ææ¶‰åŠä¸¤å±‚é¡µé¢,æ‰€ä»¥éœ€è¦è¿›è¡Œæ‰‹åŠ¨å‘é€è¯·æ±‚æ¥ç¡®ä¿æ›´åŠ ç²¾ç¡®</span></span><br><span class="line">        li_list = response.xpath(<span class="string">'//div[1]/div/div/div/div[2]/ul/li'</span>)</span><br><span class="line">        <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">            movie_name = li.xpath(<span class="string">'./div/div/h4/a/text()'</span>).extract_first()</span><br><span class="line">            detail_url = <span class="string">'https://www.4567tv.tv'</span> + li.xpath(</span><br><span class="line">                <span class="string">'./div/div/h4/a/@href'</span>).extract_first()</span><br><span class="line">            <span class="comment"># è¿›è¡Œæ•°æ®æ’å…¥,é€šè¿‡saddçš„è¿”å›å€¼æ¥è¾¨åˆ«æ•°æ®æ˜¯å¦é‡å¤</span></span><br><span class="line">            <span class="comment"># å°†è·å–åˆ°çš„è¯¦æƒ…é¡µçš„urlå­˜å‚¨åˆ°redisä¸­</span></span><br><span class="line">            <span class="comment"># åœ¨æ‰§è¡Œsaddæ“ä½œçš„æ—¶å€™,å¦‚æœè¦æ’å…¥çš„æ•°æ®å·²ç»å­˜åœ¨,å°†ä¼šè¿”å›0,å¹¶ä¸”æ’å…¥å¤±è´¥,å¦‚æœä¸å­˜åœ¨,è¿”å›1,æ’å…¥æˆåŠŸ</span></span><br><span class="line">            ex = self.conn.sadd(<span class="string">'movie_url_data'</span>, detail_url)</span><br><span class="line">            <span class="keyword">if</span> ex == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">'å“¦~ä¸€å—æ–°é²œçš„å¥¶é…ª!'</span>)</span><br><span class="line">                item = ZlsMovieproItem()</span><br><span class="line">                item[<span class="string">'movie_name'</span>] = movie_name</span><br><span class="line">                å°†è·å–åˆ°çš„ç”µå½±åç§°å­˜å‚¨åˆ°itemå¹¶è¿›è¡Œä¼ é€’</span><br><span class="line">                <span class="keyword">yield</span> scrapy.Request(url=detail_url,</span><br><span class="line">                                     callback=self.detail_parse,</span><br><span class="line">                                     meta=&#123;<span class="string">'item'</span>: item&#125;)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">'è…æœ½çš„å‘³é“!!!'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detail_parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        item = response.meta[<span class="string">'item'</span>]</span><br><span class="line">        detail_text = response.xpath(</span><br><span class="line">            <span class="string">'//div[1]/div/div/div/div[2]/p[5]/span[3]/text()'</span>).extract_first()</span><br><span class="line">        item[<span class="string">'detail_text'</span>] = detail_text</span><br><span class="line">        print(item)</span><br><span class="line">        <span class="keyword">yield</span> item</span><br></pre></td></tr></table></figure></div>

<h3 id="ä¸éœ€è¦æ·±åº¦çˆ¬å–çš„ç½‘ç«™çš„æ³¨æ„ç‚¹"><a href="#ä¸éœ€è¦æ·±åº¦çˆ¬å–çš„ç½‘ç«™çš„æ³¨æ„ç‚¹" class="headerlink" title="ä¸éœ€è¦æ·±åº¦çˆ¬å–çš„ç½‘ç«™çš„æ³¨æ„ç‚¹:"></a>ä¸éœ€è¦æ·±åº¦çˆ¬å–çš„ç½‘ç«™çš„æ³¨æ„ç‚¹:</h3><p>æ•°æ®æŒ‡çº¹:</p>
<p>â€‹    ä¸€ç»„æ•°æ®çš„å”¯ä¸€æ ‡è¯†</p>
<p>â€‹    åœ¨æ•°æ®åº“ä¸­æ„å»ºæŒ‡çº¹é›†åˆ,æ¢å¥è¯è¯´,å°±æ˜¯åˆ›å»ºä¸€ä¸ªç»å¯¹ä¸ä¼šé‡å¤çš„id,æ¥ç¡®ä¿æ•°æ®çˆ¬å–çš„æ—¶å€™ä¸ä¼šé‡å¤è·å–å·²æœ‰çš„æ•°æ®</p>
<h2 id="3â€”æ ¸å¿ƒè¦ç‚¹"><a href="#3â€”æ ¸å¿ƒè¦ç‚¹" class="headerlink" title="3â€”æ ¸å¿ƒè¦ç‚¹"></a>3â€”æ ¸å¿ƒè¦ç‚¹</h2>]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€è·å–æ•°æ®</title>
    <url>/blog/Spider/Spider_id_11.html</url>
    <content><![CDATA[<h2 id="åŠ¨æ€è·å–æ•°æ®"><a href="#åŠ¨æ€è·å–æ•°æ®" class="headerlink" title="åŠ¨æ€è·å–æ•°æ®"></a>åŠ¨æ€è·å–æ•°æ®</h2><a id="more"></a>
<ol>
<li>åœ¨ä¸€äº›ç½‘é¡µä¸­,è¿›è¡Œajaxè¯·æ±‚çš„æ—¶å€™éœ€è¦ä¼ é€’å‚æ•°,æœ‰äº›å‚æ•°æ˜¯ç‰¹æ®Šçš„åŠ¨æ€å‚æ•°,è¿™äº›å‚æ•°é€šå¸¸éšè—åœ¨é¡µé¢ä¸­,åªéœ€è¦è¿›è¡Œå¯¹åº”çš„åŒ¹é…å°±èƒ½å¤Ÿè¿›è¡Œè·å–</li>
<li>åœ¨ä¸€äº›ç½‘é¡µä¸­,cookieçš„è·å–å¯èƒ½æ˜¯åœ¨æ‰§è¡Œajaxè¯·æ±‚è¿›è¡ŒåŠ¨æ€åŠ è½½çš„æ—¶å€™æ‰ä¼ é€’è¿‡æ¥çš„,å› æ­¤,æƒ³è¦è·å–å¯¹åº”çš„cookie,å°±éœ€è¦æ˜¯ç”¨Sessionæ¨¡å—åœ¨è¿›è¡Œajaxè¯·æ±‚çš„æ—¶å€™è¿›è¡Œè·å–,æ‰èƒ½æ‹¿åˆ°éœ€è¦ä½¿ç”¨çš„cookie</li>
</ol>
]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»£ç†ip</title>
    <url>/blog/Spider/Spider_id_10.html</url>
    <content><![CDATA[<p>[TOC]</p>
<h2 id="ä»£ç†IP"><a href="#ä»£ç†IP" class="headerlink" title="ä»£ç†IP"></a>ä»£ç†IP</h2><a id="more"></a>
<h2 id="ä»£ç†IPä¸ä»£ç†æœåŠ¡å™¨"><a href="#ä»£ç†IPä¸ä»£ç†æœåŠ¡å™¨" class="headerlink" title="ä»£ç†IPä¸ä»£ç†æœåŠ¡å™¨:"></a>ä»£ç†IPä¸ä»£ç†æœåŠ¡å™¨:</h2><ol>
<li><p>ä»£ç†IPåˆ†ç±»</p>
<ul>
<li>é€æ˜ä»£ç†IP<ul>
<li>æœåŠ¡å™¨çŸ¥é“ä½ åœ¨ä½¿ç”¨ä»£ç†IP,å¹¶ä¸”çŸ¥é“ä½ çš„çœŸå®IP</li>
</ul>
</li>
<li>åŒ¿åIP<ul>
<li>æœåŠ¡å™¨çŸ¥é“ä½ åœ¨ä½¿ç”¨ä»£ç†IP,ä½†ä¸çŸ¥é“ä½ çš„çœŸæ­£IP</li>
</ul>
</li>
<li>é«˜åŒ¿åIP<ul>
<li>æœåŠ¡å™¨ä¸çŸ¥é“ä½ åœ¨ä½¿ç”¨ä»£ç†IP,å¹¶ä¸”ä¸çŸ¥é“ä½ çš„çœŸæ­£IP</li>
</ul>
</li>
</ul>
</li>
<li><p>ä»£ç†IPåˆ†ä¸ºä¸¤ç§:</p>
<ul>
<li>åŸºäºæ¥å£<ul>
<li>è·å–å›ºå®šæ•°é‡çš„ä»£ç†IP</li>
<li>è¿™äº›IPåœ°å€æ—¶å›ºå®šçš„,å›ºå®šæ•°é‡,å¦‚æœä½ çš„è¯·æ±‚æ•°é‡è¿‡å¤šçš„è¯,åŒæ ·åˆè¢«å‘ç°çš„é£é™©</li>
</ul>
</li>
<li>åŸºäºéš§é“<ul>
<li>è¿™ç§ä»£ç†IPåŸºäºäº‘ç«¯æœåŠ¡å™¨å­˜åœ¨,æ‹¥æœ‰ä¸€ä¸ªäº‘ç«¯çš„IPæ± </li>
<li>æ¯æ¬¡ä½¿ç”¨æ—¶,éƒ½ä¼šä»åºå¤§çš„IPæ± ä¸­éšå³è°ƒç”¨ä»£ç†IP</li>
<li>å› æ­¤,åŸºäºéš§é“çš„ä»£ç†IPåœ¨ä½¿ç”¨æ—¶å‡ ä¹ä¸ä¼šå‡ºç°é‡å¤ä½¿ç”¨çš„IP</li>
<li>ç›¸æ¯”è¾ƒå›ºå®šæ•°é‡çš„åŸºäºæ¥å£IP,æ›´åŠ çš„å®‰å…¨</li>
</ul>
</li>
<li>ç›¸æ¯”è¾ƒèµ·æ¥,ä½¿ç”¨åŸºäºéš§é“çš„ä»£ç†IPæ›´åŠ å¥½ç”¨,ä½†æ˜¯ç›¸å¯¹çš„æ˜¯,åŸºäºéš§é“çš„ä»£ç†IPä»·æ ¼æ›´åŠ æ˜‚è´µ</li>
</ul>
</li>
<li><pre><code class="python"><span class="keyword">import</span> requests

url = <span class="string">'http://httpbin.org/get'</span>

proxies = {
    <span class="string">"http"</span>: <span class="string">"http://60.167.103.60:9999"</span>,
    <span class="string">"https"</span>: <span class="string">"https://183.166.138.137:9999"</span>
}
res = requests.get(url=url,proxies=proxies)
print(res.text)
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AUTOHOTKEY"><figure class="iseeu highlight /autohotkey"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4</span>. åœ¨è¿›è¡Œé«˜é¢‘è¯·æ±‚çš„æ—¶å€™,å¦‚æœä½ çš„çˆ¬è™«è¢«æ£€æµ‹äº†å‡ºæ¥,å°†ä¼šè¢«è¿”å›ä¸€ä¸ªç‰¹æ®Šçš„é”™è¯¯:ConectionPool</span><br><span class="line"></span><br><span class="line"><span class="title">   1. è¿™ä¸ªé”™è¯¯çš„æ„æ€å°±æ˜¯è¯´:</span> ä½ å·²ç»è¢«å‘ç°äº†,å¹¶ä¸”ä½ ç”¨æ¥è¿›è¡Œè¯·æ±‚çš„IPå·²ç»è¢«ç¦æ‰äº†</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>. ```python</span><br><span class="line">   proxies = [</span><br><span class="line">       &#123;<span class="string">"http"</span>: <span class="string">"http://60.167.103.60:9999"</span>&#125;,</span><br><span class="line">       &#123;<span class="string">"http"</span>: <span class="string">"http://60.167.103.60:9999"</span>&#125;,</span><br><span class="line">       &#123;<span class="string">"http"</span>: <span class="string">"http://60.167.103.60:9999"</span>&#125;,</span><br><span class="line">       &#123;<span class="string">"http"</span>: <span class="string">"http://60.167.103.60:9999"</span>&#125;</span><br><span class="line">   ]</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>ä»£ç†ipæ± å†™æ³•,åˆ›å»ºä¸€ä¸ªåˆ—è¡¨,å­˜å‚¨å‡†å¤‡å¥½çš„IP,ç„¶åä½¿ç”¨éšæœºæ¨¡å—è¿›è¡Œéšå³è°ƒç”¨,è¿™æ ·å¯ä»¥ç¡®ä¿æ¯æ¬¡éƒ½ä¼šéšæœºæŠ½å–ä¸€ä¸ªä»£ç†ipæ¥å‘é€è¯·æ±‚</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Scrapy</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskæ–‡ä»¶ä¸Šä¼ </title>
    <url>/blog/Flask/Flask_id_11.html</url>
    <content><![CDATA[<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ :"></a>æ–‡ä»¶ä¸Šä¼ :</h2><a id="more"></a>
<ul>
<li><pre><code class="python"><span class="comment">#å¯¼å…¥å¿…é¡»çš„æ¨¡å—åŒ…</span>
<span class="keyword">from</span> wtform <span class="keyword">import</span> Form,StringField,PasswordField,SubmitField,BooleanField,FileField,SelectField
<span class="comment">#å¯¼å…¥éªŒè¯å™¨åŒ…</span>
<span class="keyword">from</span> wtform.validators <span class="keyword">import</span> EqualTo,Length,UUID,URL,ValidatorsError,InputRequired,Email
<span class="comment">#ä»flask_wtfä¸­å¯¼å…¥file.FileRequired(æ˜¯å¦ä¸ºç©ºéªŒè¯)å’Œfile.FileAllowed(éªŒè¯æ˜¯å¦ç¬¦åˆè¦æ±‚çš„æ ¼å¼,æ ¼å¼è¦æ±‚çš„èŒƒå›´ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’,åˆ‡è®°ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸ºä¸€ä¸ªåˆ—è¡¨)</span>
<span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request,render_template,send_from_directory
<span class="keyword">from</span> werkzeug.datastructures <span class="keyword">import</span> CombinedMultiDict

<span class="keyword">from</span> flask_wtf.file <span class="keyword">import</span> FileRequired,FileAllowed
<span class="comment">#å¯¼å…¥æ–‡ä»¶åè¿‡æ»¤åŒ…</span>
<span class="keyword">from</span> werkzeug.utils <span class="keyword">import</span> secure_filename
<span class="keyword">import</span> os

</code></pre>
</li>
</ul>
<p>  app = Flask(<strong>name</strong>)</p>
<p>  upload_url = os.path.join(os.path.dirname(<strong>file</strong>),â€™imageâ€™)</p>
<p>  class userForm(Form):<br>      #åˆ›å»ºæ–‡ä»¶ä¸Šä¼ çº¦æŸ<br>      avater = FileField(validators=[FileRequired(),FileAllowed([â€˜jpgâ€™,â€™pngâ€™,â€™gifâ€™])])</p>
<p>  @app.route(â€˜/â€˜,methods=[â€˜GETâ€™,â€™POSTâ€™])<br>  dedf func():<br>      if request.method == â€˜GETâ€™:<br>          return render_template(â€˜add.htmlâ€™)<br>      else:<br>          #ä½¿ç”¨ConbinedMultiDictæ¨¡å—å¯¹ä¼ è¾“çš„ä¸¤ä¸ªä¸åŒçš„å€¼è¿›è¡Œåˆå¹¶,ä¸€èµ·ä¼ å…¥wtfæ–‡ä»¶ä¼ è¾“åˆ¤å®šä¸­è¿›è¡ŒéªŒè¯<br>          userform = userForm(CombinedMultiDict([request.form,request.files]))<br>          if userform.validate():<br>              avater = userform.avater.data<br>              filename = secure_filename(avater.filename)<br>              avater.save(os.path.join(upload_url,filename))<br>              return â€˜ä¸Šä¼ æˆåŠŸâ€™</p>
<pre><code></code></pre>]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskå¸¸ç”¨é’©å­å‡½æ•°</title>
    <url>/blog/Flask/Flask_id_09.html</url>
    <content><![CDATA[<h2 id="å¸¸ç”¨é’©å­å‡½æ•°"><a href="#å¸¸ç”¨é’©å­å‡½æ•°" class="headerlink" title="å¸¸ç”¨é’©å­å‡½æ•°"></a>å¸¸ç”¨é’©å­å‡½æ•°</h2><a id="more"></a>
<ol>
<li><h3 id="errorhandler"><a href="#errorhandler" class="headerlink" title="errorhandler"></a>errorhandler</h3><ol>
<li><p>é”™è¯¯æŠ¥å‘Šä¸“ç”¨</p>
</li>
<li><p>åœ¨è£…é¥°å™¨ä¸­ä¼ å…¥å‚æ•°è¿›è¡Œå¯¹åº”é”™è¯¯ä»£ç è¿›è¡Œæ•è·</p>
</li>
<li><p>å®šä¹‰é”™è¯¯æ•è·å‡½æ•°è¿›è¡Œæ•è·,æ­¤å‡½æ•°ä¸­å®šä¹‰å‚æ•°ä¸ºerror</p>
</li>
<li><p>æ­¤é”™è¯¯æŠ¥å‘Šå¯ä»¥è¿”å› â€˜htmlâ€™ é¡µé¢,å¹¶ä½¿ç”¨jså¯¹å…¶è¿›è¡Œä¿®é¥°</p>
<ol>
<li><p>ä½¿ç”¨abortæ¨¡å—è¿›è¡Œé”™è¯¯è·³è½¬,å³,å½“è®¿é—®çš„ç•Œé¢ä¸ç¬¦åˆæ¡ä»¶æ—¶,ç›´æ¥è¿”å›å¯¹åº”çš„é”™è¯¯,</p>
<ol>
<li><pre><code class="python"><span class="keyword">from</span> flask <span class="keyword">import</span> abort

.....
<span class="meta">@app.route('/)</span>
<span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span>
    <span class="keyword">if</span>....:
       <span class="keyword">return</span> render_template(<span class="string">'...html'</span>)
    <span class="keyword">else</span>:
       <span class="comment">#ä¸æ»¡è¶³æ¡ä»¶ç›´æ¥è¿”å›404é”™è¯¯</span>
       abort(<span class="number">404</span>)
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">         </span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  @app.errorhandler(404)</span><br><span class="line">  def func1(error):</span><br><span class="line">      return '404'</span><br><span class="line">  @app.errorhandler(500)</span><br><span class="line">  def func2(error):</span><br><span class="line">      return '500'</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li><h3 id="context-processor"><a href="#context-processor" class="headerlink" title="context_processor"></a>context_processor</h3><ol>
<li>ä¸Šä¸‹æ–‡å£°æ˜ä¸“ç”¨</li>
<li>åœ¨å£°æ˜çš„å‡½æ•°ä¸­ç›´æ¥è¿”å›è¦å®šä¹‰çš„ä¸Šä¸‹æ–‡å†…å®¹</li>
</ol>
<ul>
<li><pre><code class="python"><span class="meta">@app.context_processor</span>
<span class="function"><span class="keyword">def</span> <span class="title">function</span><span class="params">()</span>:</span>
    <span class="keyword">return</span> {<span class="string">"current"</span>:<span class="string">""</span>}</code></pre>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskæ–‡ä»¶ä¸‹è½½</title>
    <url>/blog/Flask/Flask_id_12.html</url>
    <content><![CDATA[<h2 id="æ–‡ä»¶ä¸‹è½½æ¨¡å—"><a href="#æ–‡ä»¶ä¸‹è½½æ¨¡å—" class="headerlink" title="æ–‡ä»¶ä¸‹è½½æ¨¡å—"></a>æ–‡ä»¶ä¸‹è½½æ¨¡å—</h2><a id="more"></a>
<h2 id="send-file"><a href="#send-file" class="headerlink" title="send_file"></a>send_file</h2><h4 id="return-send-file-æ–‡ä»¶è·¯å¾„-as-attachment-True-cache-timeout-1"><a href="#return-send-file-æ–‡ä»¶è·¯å¾„-as-attachment-True-cache-timeout-1" class="headerlink" title="return send_file(æ–‡ä»¶è·¯å¾„,,==as_attachment=True==,==cache_timeout=1==)"></a>return send_file(æ–‡ä»¶è·¯å¾„,,==as_attachment=True==,==cache_timeout=1==)</h4>]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskä¸­gå®šå‘</title>
    <url>/blog/Flask/Flask_id_13.html</url>
    <content><![CDATA[<h2 id="gå®šå‘"><a href="#gå®šå‘" class="headerlink" title="gå®šå‘"></a>gå®šå‘</h2><a id="more"></a>
<ul>
<li><p>gå®šå‘ä½¿ç”¨</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,g

</code></pre>
</li>
</ul>
</li>
</ul>
<pre><code>app = Flask(__name__)

@app.route(&apos;/&apos;)
def func():
    g.username = &apos;root&apos;
    return &apos;hello world&apos;
```</code></pre><ul>
<li><p>gçš„å£°æ˜æ–¹æ³•å’Œlocalç›¸åŒ</p>
</li>
<li><p>ä½¿ç”¨gå®šå‘å£°æ˜è¿‡çš„å˜é‡åœ¨æ•´ä¸ªflaskæ–‡ä»¶ä¸­é€šç”¨,åŠå¦‚æœä½ åœ¨appä¸­è°ƒç”¨äº†å¦ä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶çš„å‡½æ•°,åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½ æ˜¯å¯ä»¥ç›´æ¥ä¼ å…¥gæ¥ä½¿ç”¨ä½ åœ¨appä¸­å£°æ˜çš„å˜é‡çš„</p>
</li>
<li><p>è¿™æ ·å¯ä»¥ä¸ä¼ å…¥å‚æ•°</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flask_wtf</title>
    <url>/blog/Flask/Flask_id_08.html</url>
    <content><![CDATA[<h2 id="flask-wtfç®€ä»‹"><a href="#flask-wtfç®€ä»‹" class="headerlink" title="flask_wtfç®€ä»‹:"></a><em>flask_wtfç®€ä»‹:</em></h2><a id="more"></a>
<ul>
<li>â€‹    flask_wtfæ¨¡å—ä¸‹è½½å®‰è£…<ul>
<li>pip install flask-wtf</li>
<li>ä½¿ç”¨å‘½ä»¤è¡Œå½¢å¼å®‰è£…flask_wtfæ¨¡å—</li>
</ul>
</li>
</ul>
<hr>
<h2 id="flask-wtfå®é™…ä½¿ç”¨"><a href="#flask-wtfå®é™…ä½¿ç”¨" class="headerlink" title="flask_wtfå®é™…ä½¿ç”¨:"></a>flask_wtfå®é™…ä½¿ç”¨:</h2><ul>
<li><pre><code class="python"><span class="keyword">from</span> wtforms <span class="keyword">import</span> Form,StringField,PasswordField,SubmitField
<span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> EqualTo,Length
<span class="comment">#åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„formè¡¨å•ç±»,è¯¥ç±»ç»§æ‰¿è‡ªForm</span>
<span class="class"><span class="keyword">class</span> <span class="title">RegistForm</span><span class="params">(Form)</span>:</span>
    <span class="comment">#usernameå±æ€§è®¾å®š</span>
    username = StringField(validators=[Length(min=<span class="number">3</span>,max=<span class="number">8</span>)])
    <span class="comment">#passwordå±æ€§è®¾å®š</span>
    password= PasswordField(validators=[Length(min=<span class="number">6</span>,max=<span class="number">10</span>)])
    <span class="comment">#EqalToä½œç”¨,æ·»åŠ EqualToçš„å­—æ®µå¿…é¡»ä¸å…¶å‚æ•°çš„å€¼ç›¸åŒ,ç›¸å½“äºç»‘å®š</span>
    password_1 = PasswordField(validators=[Length(min=<span class="number">6</span>,max=<span class="number">10</span>),EqualTo(<span class="string">'password'</span>)])
    sub = SubmitField()

app = Flask(__name__)

</code></pre>
</li>
</ul>
<p>  @app.route(â€˜/â€˜)<br>  def hello_world():<br>      return â€˜Hello World!â€™<br>  #åˆ›å»ºformè¡¨å•æäº¤é¡µé¢<br>  @app.route(â€˜/registâ€™,methods=[â€˜GETâ€™,â€™POSTâ€™])<br>  def regist():<br>      #åˆ¤æ–­è¯·æ±‚æ–¹å¼å¹¶ç»™å‡ºç›¸åº”å›å¤<br>      if request.method == â€˜GETâ€™:<br>          return render_template(â€˜regist.htmlâ€™)<br>      else:<br>          #å®ä¾‹åŒ–è¡¨å•ç±»<br>          regist_form = RegistForm(request.form)<br>          #åˆ¤æ–­ç±»ä¸­çš„validateæ˜¯å¦æ­£å¸¸,å³éªŒè¯æ˜¯å¦é€šè¿‡<br>          #æ ¹æ®åˆ¤å®šç»“æœè¿›è¡Œä¸åŒçš„è¿”å›æƒ…å†µ<br>          if regist_form.validate():<br>              return â€˜Trueâ€™<br>          else:<br>              print(regist_form.errors())<br>              return â€œfalseâ€</p>
  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="REASONML"><figure class="iseeu highlight /reasonml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- åœ¨lengthå‡½æ•°ä¸­,å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„å‚æ•°,message,ç”¨æ¥è®¾å®šæŠ¥é”™ä¹‹åçš„</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  username = <span class="constructor">StringField(<span class="params">validators</span>=[Length(<span class="params">min</span>=3,<span class="params">max</span>=8,<span class="params">message</span>='æ‚¨æ‰€è¾“å…¥çš„è´¦æˆ·åç§°ä¸ç¬¦åˆè¦æ±‚.è¯·é‡æ–°è¾“å…¥')</span>])</span><br></pre></td></tr></table></figure></div>

<ul>
<li>è¿™ä¸ªmessageæ‰€å‚¨å­˜çš„å‚æ•°å°†ä¼šä½“ç°åœ¨ç±»çš„errorsæ–¹æ³•é‡Œé¢,å¯ä»¥é€šè¿‡ç›´æ¥è¾“å‡ºæ¥æŸ¥çœ‹</li>
</ul>
<hr>
<h2 id="flask-wtfå¸¸ç”¨éªŒè¯å™¨"><a href="#flask-wtfå¸¸ç”¨éªŒè¯å™¨" class="headerlink" title="flask_wtfå¸¸ç”¨éªŒè¯å™¨:"></a>flask_wtfå¸¸ç”¨éªŒè¯å™¨:</h2><p>éªŒè¯å™¨å¯¼å…¥æ–¹æ³•:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> EqualTo</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> Length</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> NumberRange</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> Email</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> InputRequired</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> Regexp</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> URL</span><br><span class="line"><span class="keyword">from</span> wtforms.validators <span class="keyword">import</span> UUID</span><br></pre></td></tr></table></figure></div>



<ul>
<li><p>EqualTo           </p>
<ul>
<li>ç»‘å®šå¦ä¸€ä¸ªå­—æ®µ,ä½¿ä¸¤ä¸ªå­—æ®µä¿æŒä¸€è‡´</li>
</ul>
</li>
<li><p>Length             </p>
<ul>
<li>é™å®šå†…å®¹é•¿åº¦,ä»¥åŠè‡ªå®šä¹‰æŠ¥é”™æé†’</li>
</ul>
</li>
<li><p>NumberRange   </p>
<ul>
<li>é™å®šæ•°å­—çš„å¤§å°æ‰€åœ¨åŒºé—´,å’Œlengthä¸€æ ·æœ‰maxå’Œminä¸¤ä¸ªå€¼é™åˆ¶,åªæœ‰åœ¨è¿™ä¸¤ä¸ªå€¼ä¹‹å‰‘æ‰æ»¡è¶³</li>
</ul>
</li>
<li><p>Email               </p>
<ul>
<li>é‚®ç®±éªŒè¯å™¨,ç”¨äºéªŒè¯é‚®ç®±,ä¸éœ€è¦å‚æ•°,å†…ç½®äº†é‚®ç®±æ ¼å¼éªŒè¯</li>
</ul>
</li>
<li><p>InputRequired  </p>
<ul>
<li>å¯¹è¾“å…¥çš„ä¿¡æ¯è¿›è¡ŒéªŒè¯,æœ‰å€¼å³ä¸ºTrue,æ²¡æœ‰åˆ™ä¸ºfalse</li>
</ul>
</li>
<li><p>Regexp</p>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼,è‡ªåŠ¨å°†è¾“å…¥çš„å†…å®¹äºRegexpçš„å†…å®¹åŒ¹é…å¯¹ç…§</li>
</ul>
</li>
<li><p>URL</p>
<ul>
<li>éªŒè¯è¾“å…¥çš„æ˜¯å¦ä¸ºæ­£ç¡®çš„urlåœ°å€</li>
</ul>
</li>
<li><p>UUID</p>
<ul>
<li><p>éªŒè¯æ˜¯å¦ä¸ºUUID</p>
</li>
<li><p>UUIDå¯¼å…¥æ–¹æ³•</p>
<ul>
<li><pre><code class="python">form uuid <span class="keyword">import</span> uuid4
print(uuid4())
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"><span class="comment">## è‡ªå®šä¹‰éªŒè¯å™¨:</span></span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">validate_</span></span>å­—æ®µå (<span class="keyword">self</span>,filed)<span class="symbol">:</span></span><br><span class="line">      <span class="comment">#é€šè¿‡è¿™ä¸ªæ–¹æ³•å®šä¹‰çš„éªŒè¯å™¨,å°†ä¼šè‡ªè¡Œè°ƒç”¨è¿›è¡Œåˆ¤æ–­,</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li><p>è‡ªå®šä¹‰éªŒè¯å™¨çš„åå­—ä¸ºvalidate_åŠ ä¸Šè¦ç»‘å®šçš„å­—æ®µå</p>
</li>
<li><p>validate_å­—æ®µå</p>
</li>
<li><p>éœ€è¦è®¾å®šä¸€ä¸ªå½¢å‚,ä¸é™åˆ¶</p>
</li>
</ul>
<hr>
<h2 id="flask-wtfå¸¸ç”¨å­—æ®µ"><a href="#flask-wtfå¸¸ç”¨å­—æ®µ" class="headerlink" title="flask_wtfå¸¸ç”¨å­—æ®µ:"></a>flask_wtfå¸¸ç”¨å­—æ®µ:</h2><ul>
<li><p>IntegerField</p>
<ul>
<li>æ•´å½¢å­—æ®µ,è¯¥è¾“å…¥æ¡†åªæ”¯æŒè¾“å…¥æ•°å­—ç±»å‹</li>
<li>æœ€ç»ˆæ‹¿åˆ°çš„å€¼ä¹Ÿæ˜¯æ•´å½¢,å³int</li>
<li>åŒä¸€å±æ€§çš„è¿˜æœ‰FloatField</li>
</ul>
</li>
<li><p>StringField</p>
<ul>
<li>å­—ç¬¦ä¸²å½¢å¼,è¯¥è¾“å…¥æ¡†æ”¯æŒè¾“å…¥å­—ç¬¦ä¸²ç±»å‹</li>
</ul>
</li>
<li><p>PasswordField</p>
<ul>
<li>å¯†ç å­—æ®µ,å¦‚æœä½¿ç”¨è¯¥å­—æ®µåˆ›å»ºè¡¨å•,å…¶ç”Ÿæˆçš„å°†ä¼šæ˜¯å¯†ç è¾“å…¥æ¡†</li>
</ul>
</li>
<li><p>SubmitField</p>
<ul>
<li>æ­¤å­—æ®µå¯¹åº”çš„æ˜¯submitæäº¤æŒ‰é’®</li>
</ul>
</li>
<li><p>BooleanField</p>
<ul>
<li>å•é€‰æ¡†æ¨¡æ¿</li>
</ul>
</li>
</ul>
<ul>
<li><p>FileField</p>
<ul>
<li>æ–‡ä»¶æ¡†</li>
</ul>
</li>
<li><p>SelectField</p>
<ul>
<li><p>ä¸‹æ‹‰æ¡†</p>
</li>
<li><pre><code class="python">tags = SelecrField(<span class="string">'æ ‡ç­¾å'</span>,choices=[(<span class="string">'1'</span>,<span class="string">'python'</span>),(<span class="string">'2'</span>,<span class="string">'ios'</span>)])</code></pre>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flask_sqlalchemy</title>
    <url>/blog/Flask/Flask_id_07.html</url>
    <content><![CDATA[<h2 id="flask-sqlalchemy"><a href="#flask-sqlalchemy" class="headerlink" title="flask_sqlalchemy"></a>flask_sqlalchemy</h2><a id="more"></a>


<h2 id="åˆ›å»ºflaskæ•°æ®åº“é“¾æ¥"><a href="#åˆ›å»ºflaskæ•°æ®åº“é“¾æ¥" class="headerlink" title="åˆ›å»ºflaskæ•°æ®åº“é“¾æ¥"></a>åˆ›å»ºflaskæ•°æ®åº“é“¾æ¥</h2><hr>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLALchemy</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">app.comfig[<span class="string">'SQLALCHEMY_DATABASE_URI'</span>] = <span class="string">'mysql+mysqlconnector://root:password@localhost:port/database'</span></span><br><span class="line">db = SQLALchemy(app)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'person'</span></span><br><span class="line">    id = db.COlumn(db.Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = db.Column(db.String(<span class="number">100</span>))</span><br><span class="line">db.drop_all()</span><br><span class="line">db.create_all()</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello world!'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ = <span class="string">'__main__'</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure></div>



<hr>
<h2 id="å…³äºå¯¼åŒ…"><a href="#å…³äºå¯¼åŒ…" class="headerlink" title="å…³äºå¯¼åŒ…:"></a>å…³äºå¯¼åŒ…:</h2><ul>
<li>flask_sqlalchemyä¸­æŠŠsqlalchemyçš„æ‰€æœ‰æ¨¡å—æ•´åˆåˆ°äº†ä¸€èµ·,æ‰€ä»¥ä¸éœ€è¦åƒåŸç”Ÿsqlalchemyä¸€æ ·å¯¼å…¥ä¸€å¤§å †æ¨¡å—,åœ¨è¿™ä¸€æ–¹é¢åšçš„æ¯”åŸç”ŸSQL alchemyå¥½å¾—å¤š</li>
</ul>
<hr>
<h2 id="å…³äºåˆ†é¡µæŸ¥è¯¢"><a href="#å…³äºåˆ†é¡µæŸ¥è¯¢" class="headerlink" title="å…³äºåˆ†é¡µæŸ¥è¯¢:"></a>å…³äºåˆ†é¡µæŸ¥è¯¢:</h2><h2 id="paginate"><a href="#paginate" class="headerlink" title="paginate"></a><u>paginate</u></h2><p>per_page:è®¾å®šæ¯é¡µå±•ç¤ºçš„æ•°æ®</p>
<p>page:å½“å‰çš„é¡µæ•°</p>
<p>has_prve:åˆ¤æ–­æ˜¯å¦å…·æœ‰ä¸Šä¸€é¡µ</p>
<p>has_next:åˆ¤æ–­æ˜¯å¦å…·æœ‰ä¸‹ä¸€é¡µ</p>
<p>prve_num:ä¸Šä¸€é¡µçš„é¡µç </p>
<p>next_num:ä¸‹ä¸€é¡µçš„é¡µç </p>
<p>iter_pages: æ‰€æœ‰é¡µç ,å¯éå†</p>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flask_session</title>
    <url>/blog/Flask/Flask_id_06.html</url>
    <content><![CDATA[<h2 id="cookieåˆ›å»º"><a href="#cookieåˆ›å»º" class="headerlink" title="cookieåˆ›å»º:"></a>cookieåˆ›å»º:</h2><a id="more"></a>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line">res = Response(<span class="string">'ç¤ºä¾‹'</span>)</span><br><span class="line"></span><br><span class="line">res.set_cookie(<span class="string">'username'</span>,<span class="string">'root'</span>,</span><br><span class="line">               max_age=<span class="number">60</span>,</span><br><span class="line">               expires=datetime(year,month,day,hour,minute,second),</span><br><span class="line">              domain=<span class="string">'.fcg.com'</span>)</span><br><span class="line"><span class="comment">#åˆ›å»ºcookieæ—¶éœ€è¦å¯¼å…¥ä»¥ä¸‹å‡ é¡¹,</span></span><br><span class="line"><span class="comment">#	1.cookiesåå­— + cookieså€¼ (å¿…ä¼ )</span></span><br><span class="line"><span class="comment">#	2.max_ageä»å½“å‰å¼€å§‹è®¡ç®—çš„è¿‡æœŸæ—¶é—´,å•ä½ä¸ºç§’,ä¸æ·»åŠ çš„æ—¶å€™é»˜è®¤è¿‡æœŸæ—¶é—´ä¸ºå…³é—­æµè§ˆå™¨è¿‡æœŸ</span></span><br><span class="line"><span class="comment">#	3.expiresè®¾å®šè¿‡æœŸæ—¶é—´,ä»¥æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´è®¡ç®—,æ¢ç®—åˆ°åŒ—äº¬æ—¶é—´éœ€è¦å‡å…«,è¿™ä¸ªå‚æ•°å¦‚æœè®¾ç½®çš„è¯,éœ€è¦ä¼ å…¥å…­ä¸ªå‚æ•°åˆ†åˆ«æ˜¯--(year,month,day,hour,minute,second)</span></span><br><span class="line"><span class="comment">#	4.domainè®¾å®šcookieä½œç”¨èŒƒå›´,åœ¨ä¸»åŸŸåå‰é¢åŠ ä¸Š.å³ä¸ºå°†æ­¤cookieåº”ç”¨äºæ‰€æœ‰å­åŸŸå</span></span><br><span class="line"><span class="comment">#	5.è®¾å®šä½œç”¨èŒƒå›´,éœ€è¦å…ˆç»‘å®šå¥½ä¸»åŸŸåå’Œå­åŸŸå</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cookieåˆ é™¤</span></span><br><span class="line">res = Response(<span class="string">'åˆ é™¤'</span>)</span><br><span class="line">res.delete_cookie(<span class="string">'username'</span>)</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="sessionåˆ›å»º"><a href="#sessionåˆ›å»º" class="headerlink" title="sessionåˆ›å»º:"></a>sessionåˆ›å»º:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,session</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#åˆ›å»ºå¹¶è®¾ç½®session.cookie</span></span><br><span class="line">    session[<span class="string">'username'</span>] = <span class="string">'123'</span></span><br><span class="line">    <span class="comment">#è®¾å®šsessionè¿‡æœŸæ—¶é—´</span></span><br><span class="line">    session.permanent=<span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello world'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#session.permanenté»˜è®¤ä¸ºä¸€ä¸ªæœˆ</span></span><br><span class="line"><span class="comment">#å¯ä»¥é€šè¿‡è®¾å®šä¿®æ”¹,</span></span><br><span class="line"><span class="comment">#app.config['PERMANENT_SESSION_LIFETIME'] = timedelta(å‰©ä½™è¿‡æœŸçš„æ—¶é—´)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#sessionåˆ é™¤</span></span><br><span class="line">session.pop(<span class="string">'username'</span>)</span><br><span class="line"><span class="comment">#ç›¸å½“äºå­—å…¸åˆ é™¤</span></span><br><span class="line">session.clear()</span><br><span class="line"><span class="comment">#å°†sessionä¸­å‚¨å­˜çš„æ•°æ®å…¨éƒ¨æ¸…ç©º</span></span><br><span class="line"><span class="keyword">del</span> session[key]</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="è¯·æ±‚å‡½æ•°çš„è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•"><a href="#è¯·æ±‚å‡½æ•°çš„è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•" class="headerlink" title="*è¯·æ±‚å‡½æ•°çš„è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•*:"></a><strong>*<u>è¯·æ±‚å‡½æ•°çš„è£…é¥°å™¨ä½¿ç”¨æ–¹æ³•</u>*:</strong></h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">decorators</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>è®¾ç½®è¯·æ±‚å‡½æ•°è¿‡æ»¤ç”¨è£…é¥°å™¨</p>
</li>
<li><pre><code class="python"><span class="comment">#ä»functools ä¸­å¯¼å…¥æ¨¡å—wraps</span>
<span class="keyword">from</span> functools <span class="keyword">import</span> wraps

<span class="keyword">from</span> flask <span class="keyword">import</span> session,redirect,url_for
<span class="function"><span class="keyword">def</span> <span class="title">login_required</span><span class="params">(func)</span>:</span>
    <span class="comment">#è®¾å®šä»functoolsé‡Œé¢å¯¼å…¥çš„è£…é¥°å™¨,æ­¤è£…é¥°å™¨çš„å‚æ•°ä¸ºå¤–éƒ¨å‡½æ•°ä¼ å…¥çš„å€¼</span>
<span class="meta">    @wraps(func)</span>
    <span class="comment">#å®šä¹‰å†…å±‚å‡½æ•°,è¯¥å†…ä»å‡½æ•°ä¸­æ‰§è¡Œè¿ç®—ä¸åˆ¤å®š</span>
    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args,**kwargs)</span>:</span>
        <span class="comment">#è·å–session</span>
        username = session.get(<span class="string">'username'</span>)
        <span class="comment">#åˆ¤æ–­æ˜¯å¦å­˜åœ¨session</span>
        <span class="keyword">if</span> username:
            <span class="comment">#å­˜åœ¨sessionæ—¶,æ­£å¸¸è°ƒç”¨å¤–å±‚å‡½æ•°ä¼ å…¥çš„funcå‚æ•°</span>
            <span class="keyword">return</span> func(*args,**kwargs)
        <span class="keyword">else</span>:
            <span class="comment">#å½“sessionä¸­ä¸å­˜åœ¨å¯¹åº”çš„cookieæ—¶,é‡å®šå‘å½“å‰ç½‘å€åˆ°ç™»é™†ç•Œé¢</span>
            <span class="keyword">return</span> redirect(url_for(<span class="string">'login'</span>))

    <span class="comment">#æ­£å¸¸çš„é—­åŒ…å‡½æ•°ç”¨æ³•,è¿”å›å†…å±‚å‡½æ•°çš„å¼•ç”¨</span>
    <span class="keyword">return</span> wrapper</code></pre>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskä¸­appä¸Šä¸‹æ–‡æœºåˆ¶</title>
    <url>/blog/Flask/Flask_id_01.html</url>
    <content><![CDATA[<h2 id="appä¸Šä¸‹æ–‡"><a href="#appä¸Šä¸‹æ–‡" class="headerlink" title="appä¸Šä¸‹æ–‡"></a>appä¸Šä¸‹æ–‡</h2><a id="more"></a>
<p>åº”ç”¨ä¸Šä¸‹æ–‡å’Œè¯·æ±‚ä¸Šä¸‹æ–‡éƒ½æ˜¯å­˜æ”¾åˆ°ä¸€ä¸ªâ€™LocalStackâ€™çš„æ ˆä¸­</p>
<p>å’Œåº”ç”¨appç›¸å…³çš„æ“ä½œå°±å¿…é¡»ç”¨åˆ°åº”ç”¨ä¸Šä¸‹æ–‡,æ¯”å¦‚é€šè¿‡current_appè·å–å½“å‰è¿™ä¸ªapp</p>
<p>å’Œè¯·æ±‚ç›¸å…³çš„æ“ä½œå°±å¿…é¡»ç”¨åˆ°è¯·æ±‚ä¸Šä¸‹æ–‡,æ¯”å¦‚url_foråè½¬è§†å›¾å‡½æ•°</p>
<p>è§†å›¾å‡½æ•°ä¸­ä¸éœ€è¦è€ƒè™‘ä¸Šä¸‹æ–‡çš„é—®é¢˜</p>
<hr>
<h3 id="åº”ç”¨ä¸Šä¸‹æ–‡"><a href="#åº”ç”¨ä¸Šä¸‹æ–‡" class="headerlink" title="åº”ç”¨ä¸Šä¸‹æ–‡:"></a>åº”ç”¨ä¸Šä¸‹æ–‡:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> current_app</span><br><span class="line"><span class="comment">#current_appæ¨¡å—çš„ä½œç”¨æ˜¯è·å–å½“å‰æ–‡ä»¶çš„æ ˆ</span></span><br><span class="line"><span class="comment">#ä½¿ç”¨çš„æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">current_app.name</span><br><span class="line"><span class="comment">#è·å–å½“å‰æ–‡ä»¶çš„åå­—</span></span><br><span class="line"><span class="comment">#æ­¤é€‰é¡¹éœ€è¦åœ¨è·¯ç”±å‡½æ•°ä¸­æ‰èƒ½ä½¿ç”¨</span></span><br><span class="line"><span class="comment">#åœ¨è·¯ç”±å‡½æ•°å¤–ç›´æ¥ä½¿ç”¨å°†ä¼šæŠ¥é”™</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><h5 id="æ‰‹åŠ¨æ¨å…¥åº”ç”¨ä¸Šä¸‹æ–‡"><a href="#æ‰‹åŠ¨æ¨å…¥åº”ç”¨ä¸Šä¸‹æ–‡" class="headerlink" title="æ‰‹åŠ¨æ¨å…¥åº”ç”¨ä¸Šä¸‹æ–‡:"></a>æ‰‹åŠ¨æ¨å…¥åº”ç”¨ä¸Šä¸‹æ–‡:</h5><ul>
<li><p>ç¬¬ä¸€ç§æ–¹æ³•:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨è·¯ç”±å‡½æ•°å¤–è°ƒç”¨current_appæ¨¡å—</span></span><br><span class="line"><span class="comment">#éœ€è¦å…ˆè®¾å®šå¥½åº”ç”¨ä¸Šä¸‹æ–‡</span></span><br><span class="line">app.context = app.app_context()</span><br><span class="line">app.context.push()</span><br><span class="line">print(current_app.name)</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>ç¬¬äºŒç§æ–¹æ³•:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> app.app_context():</span><br><span class="line">	print(corrent_app.name)</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
</li>
</ul>
<hr>
<h3 id="è¯·æ±‚ä¸Šä¸‹æ–‡"><a href="#è¯·æ±‚ä¸Šä¸‹æ–‡" class="headerlink" title="è¯·æ±‚ä¸Šä¸‹æ–‡:"></a>è¯·æ±‚ä¸Šä¸‹æ–‡:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è¯·æ±‚ä¸Šä¸‹æ–‡æœ€å¸¸è§çš„ä¸€ä¸ªæ˜¯url_for</span></span><br><span class="line"><span class="comment">#åœ¨è§†å›¾å‡½æ•°ä¸­</span></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#æŸ¥çœ‹url_foræ‰“å°å‡ºæ¥çš„è·¯ç”±åœ°å€</span></span><br><span class="line">    print(url_for(<span class="string">'func1'</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello world'</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/test/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'hello user'</span></span><br><span class="line"></span><br><span class="line">print(url_for(<span class="string">'func1'</span>))</span><br><span class="line"><span class="comment">#åœ¨è·¯ç”±å‡½æ•°å¤–ç›´æ¥è°ƒç”¨url_for æŸ¥çœ‹è·¯ç”±åœ°å€å°†ä¼šæŠ¥é”™,åŸå› æ˜¯è¯·æ±‚ä¸Šä¸‹æ–‡é—®é¢˜</span></span><br><span class="line"><span class="comment">#æ­¤é—®é¢˜æ— æ³•ä½¿ç”¨åº”ç”¨ä¸Šä¸‹æ–‡çš„æ–¹æ³•è§£å†³</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li><h5 id="æ‰‹åŠ¨æ¨å…¥è¯·æ±‚ä¸Šä¸‹æ–‡"><a href="#æ‰‹åŠ¨æ¨å…¥è¯·æ±‚ä¸Šä¸‹æ–‡" class="headerlink" title="æ‰‹åŠ¨æ¨å…¥è¯·æ±‚ä¸Šä¸‹æ–‡:"></a>æ‰‹åŠ¨æ¨å…¥è¯·æ±‚ä¸Šä¸‹æ–‡:</h5><ul>
<li><p>â€‹    </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#åœ¨è·¯ç”±å‡½æ•°ä¹‹å¤–è°ƒç”¨</span></span><br><span class="line"><span class="keyword">with</span> app.test_requert_context():</span><br><span class="line">    print(url_for(<span class="string">'func1'</span>))</span><br><span class="line"><span class="comment">#æ³¨æ„,test_request_contextè¿™ä¸ªå‡½æ•°ä¼šåœ¨æ¨é€è¯·æ±‚ä¸Šä¸‹æ–‡ä¹‹å‰å…ˆæ£€æŸ¥æœ‰æ²¡æœ‰åº”ç”¨ä¸Šä¸‹æ–‡,å¦‚æœæ²¡æœ‰,å°†ä¼šå…ˆæ¨é€ä¸€ä¸ªåº”ç”¨ä¸Šä¸‹æ–‡è¿‡æ¥,åœ¨æ¨é€ä¸€ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡,ä¹Ÿå°±æ˜¯è¯´,åœ¨ä¸€å®šç¨‹åº¦ä¸Šç­‰åŒäºapp_contextçš„åŠ å¼ºç‰ˆ</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskä¿¡å·æœºåˆ¶</title>
    <url>/blog/Flask/Flask_id_16.html</url>
    <content><![CDATA[<h2 id="flaskä¿¡å·"><a href="#flaskä¿¡å·" class="headerlink" title="flaskä¿¡å·"></a>flaskä¿¡å·</h2><a id="more"></a>
<h3 id="ä¿¡å·ä½¿ç”¨è¯¦è§£"><a href="#ä¿¡å·ä½¿ç”¨è¯¦è§£" class="headerlink" title="ä¿¡å·ä½¿ç”¨è¯¦è§£:"></a>ä¿¡å·ä½¿ç”¨è¯¦è§£:</h3><ul>
<li><p>ä¿¡å·ä½¿ç”¨åˆ†ä¸ºä¸‰æ­¥</p>
</li>
<li><p>å®šä¹‰ä¿¡å·</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask
<span class="keyword">from</span> signal <span class="keyword">import</span> visit_signal

app = Flask(__name__)

<span class="meta">@app.route('/')</span>
<span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span>
    username = request.args.get(<span class="string">'username'</span>)
    <span class="keyword">if</span> username:
        g.user = username
        visit_signal.send()
    <span class="keyword">else</span>:
        <span class="keyword">return</span> <span class="string">'hello world'</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  <span class="keyword">from</span> blinker <span class="keyword">import</span> Namespace</span><br><span class="line">  my_pace = Namepace()</span><br><span class="line">  visit_signal = my_pace.signal(<span class="string">'visit-signal'</span>)</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(sender)</span>:</span></span><br><span class="line">      <span class="keyword">from</span> flask <span class="keyword">import</span> g</span><br><span class="line">      print(g.user)</span><br><span class="line">  visit_signal.connect(func)</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>ç›‘å¬ä¿¡å·</p>
<ul>
<li><pre><code class="python">visit_signal.send()
<span class="comment">#è®¾ç½®ç›‘å¬</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"><span class="section">### flaskè‡ªå¸¦çš„ä¿¡å·æœºåˆ¶:</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 		æ¨¡æ¿æ¸²æŸ“æ—¶ä¼ å‡ºçš„ä¿¡å·:</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span><span class="code">```</span>python</span><br><span class="line">  #æ­£å¸¸ä¿¡å·ç›‘å¬</span><br><span class="line">  from flask import Flask,render<span class="emphasis">_template,template_</span>rendered</span><br><span class="line">  app = Flask(<span class="strong">__name__</span>)</span><br><span class="line">  <span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</span><br><span class="line">  #å…¶ä¸€</span><br><span class="line">  def template<span class="emphasis">_rendered_</span>func(sender,template,context):</span><br><span class="line"><span class="code">      print('sender:',sender)</span></span><br><span class="line"><span class="code">      print('template:',template)</span></span><br><span class="line"><span class="code">      print('context',context)</span></span><br><span class="line">  template<span class="emphasis">_randered.context(template_</span>rendered_func)</span><br><span class="line">  <span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</span><br><span class="line">  @app.route('/')</span><br><span class="line">  def func1():</span><br><span class="line"><span class="code">      return render_template('index.html')</span></span><br></pre></td></tr></table></figure></div>


</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><pre><code class="python"><span class="comment">#å¼‚å¸¸ä¿¡å·ç›‘å¬</span>
<span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,template_rendered,got_request_exception
app = Flask(__name__)
***********************************************************
<span class="comment">#å…¶äºŒ  </span>
<span class="function"><span class="keyword">def</span> <span class="title">request_exception_log</span><span class="params">(sender,*args,**kwargs)</span>:</span>
    print(sender)
    print(args)
    print(kwargs)
got_request_exception.connect(request_exception_log)
***********************************************************
<span class="meta">@app.route('/')</span>
<span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span>
    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>)</code></pre>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskåˆ†é¡µ</title>
    <url>/blog/Flask/Flask_id_15.html</url>
    <content><![CDATA[<h2 id="flask-åˆ†é¡µ"><a href="#flask-åˆ†é¡µ" class="headerlink" title="flask åˆ†é¡µ"></a>flask åˆ†é¡µ</h2><a id="more"></a>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> goods.has_prev %&#125;</span><br><span class="line">    &lt;a href="/show?page=&#123;&#123; goods.prev_num &#125;&#125;"&gt;ä¸Šä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&#123;% <span class="keyword">for</span> foo <span class="keyword">in</span> goods.iter_pages() %&#125;</span><br><span class="line">    &lt;a href="/show?page=&#123;&#123; foo &#125;&#125;"&gt;&#123;&#123; foo &#125;&#125;&lt;/a&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">&#123;% <span class="keyword">if</span> goods.has_next %&#125;</span><br><span class="line">    &lt;a href="/show?page=&#123;&#123; goods.next_num &#125;&#125;"&gt;ä¸‹ä¸€é¡µ&lt;/a&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route('/show/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">()</span>:</span></span><br><span class="line">    page = int(request.args.get(<span class="string">'page'</span>,<span class="number">1</span>))</span><br><span class="line">    goods = GOOds.query.paginate(page,per_page=<span class="number">3</span>)</span><br><span class="line">    <span class="comment"># app_list = app_sql.session.query(app_sql.Subordinate_forces).offset(num * 10).limit(10).all()</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'show.html'</span>,goods=goods)</span><br></pre></td></tr></table></figure></div>





<p>ä¸‹è½½åˆ¤æ–­</p>
<p>@page.route(â€œ/goodsdownâ€)<br>def download():<br>    goodslist = Goods.query.all()<br>    data = []<br>    for goods in goodslist:<br>        temp = {}<br>        temp[â€œidâ€] = goods.id<br>        temp[â€œnameâ€] = goods.name<br>        temp[â€œpriceâ€] = goods.price<br>        temp[â€œimgâ€] = goods.img</p>
<pre><code>    data.append(temp)


# æ¯æ¬¡ä¸‹è½½ å‘æ•°æ®åº“ä¸­å†™å…¥count
count = Count.query.first()


print(&quot;count&quot;, count)
if not count:
    count = Count(count=1)
    db.session.add(count)
    db.session.commit()
else:
    count.count += 1
    db.session.commit()


with open(&quot;static/data.json&quot;, &quot;w&quot;) as f:
    jstr = json.dumps(data, ensure_ascii=False)
    f.write(jstr)


return send_file(&quot;static/data.json&quot;, as_attachment=True, cache_timeout=1)</code></pre>]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskæ•°æ®åº“è¿ç§»</title>
    <url>/blog/Flask/Flask_id_10.html</url>
    <content><![CDATA[<h2 id="flaskæ•°æ®åº“è¿ç§»"><a href="#flaskæ•°æ®åº“è¿ç§»" class="headerlink" title="flaskæ•°æ®åº“è¿ç§»"></a><code>flask</code>æ•°æ®åº“è¿ç§»</h2><a id="more"></a>
<hr>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm.orm <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.dialects.mysql <span class="keyword">import</span> LONGTEXT,DECIMAL,DATETIME</span><br><span class="line"></span><br><span class="line">Host = <span class="string">'127.0.0.1'</span></span><br><span class="line">Port = <span class="string">'3306'</span></span><br><span class="line">User = <span class="string">'root'</span></span><br><span class="line">Password = <span class="string">'000000'</span></span><br><span class="line">Database = è¦ä½¿ç”¨çš„æ•°æ®åº“åç§°</span><br><span class="line">DB_URI = <span class="string">'mysql+mysqlconnector://&#123;user&#125;:&#123;password&#125;@&#123;host&#125;:&#123;port&#125;/&#123;database&#125;'</span>.format(user=User,password=Password,host=Host,port=Port,database=Database)</span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line">session = sessionmaker(engine)()</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'person'</span></span><br><span class="line">    id = Column(Integer,primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">100</span>))</span><br><span class="line">Base.metadata.drop_all()</span><br><span class="line">Base.metadata.create_all()</span><br></pre></td></tr></table></figure></div>

<p>åˆ›å»ºä¸€ä¸ªæ¨¡å‹</p>
<hr>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="EBNF"><figure class="iseeu highlight /ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">alembic init alembic</span></span><br></pre></td></tr></table></figure></div>

<p>åˆ›å»ºæ–°çš„alembicæ–‡ä»¶(æ­¤æ“ä½œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­å®Œæˆ)</p>
<hr>
<p>ä¿®æ”¹alembicæ–‡ä»¶å†…å®¹</p>
<ul>
<li>æ‰“å¼€alembic.iniæ–‡ä»¶<ul>
<li>ä¿®æ”¹<strong>*<u>sqlalchemy.url</strong></u>*ä¸º:</li>
</ul>
</li>
</ul>
<p>â€‹        </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">sqlalchemy.url</span> = <span class="string">'mysql+mysqlconnector://root:password@localhost:port/database'</span></span><br></pre></td></tr></table></figure></div>

<ul>
<li>æ‰“å¼€alembicæ–‡ä»¶å¤¹</li>
</ul>
<ul>
<li><p>æ‰“å¼€env.pyæ–‡ä»¶</p>
<ul>
<li><p>åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </p>
</li>
<li><pre><code class="python"><span class="keyword">import</span> sys,os
<span class="keyword">import</span> app
sys.path.append(os.path.dirname(os.path.dirname(__file__)))
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- ä¿®æ”¹æ–‡ä»¶ä»£ç </span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    #ä¿®æ”¹å‰</span><br><span class="line">    target_metadata = None</span><br><span class="line">    #ä¿®æ”¹å</span><br><span class="line">    target_metadata = app.Base.metadata</span><br></pre></td></tr></table></figure>

------
</code></pre>
</li>
</ul>
</li>
</ul>
<hr>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">*alembic revision --autogenerate -m 'first commit'</span><br><span class="line">åˆ›å»ºæ–°çš„è¿ç§»è„šæœ¬(æ­¤æ“ä½œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­å®Œæˆ)</span><br><span class="line">alembic revision --autogenerate -m 'add age column'</span><br><span class="line">æ›´æ–°è¿ç§»è„šæœ¬(æ­¤æ“ä½œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­å®Œæˆ)</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="alembic-upgrade-head"><a href="#alembic-upgrade-head" class="headerlink" title="alembic upgrade head"></a><u><strong><em>alembic upgrade head</em></strong></u></h4><p>æ•°æ®åº“è¿ç§»å¼€å¯(æ­¤æ“ä½œåœ¨å‘½ä»¤æç¤ºç¬¦ä¸­å®Œæˆ)</p>
<hr>
<h3 id="alembicå¸¸ç”¨å­—æ®µ"><a href="#alembicå¸¸ç”¨å­—æ®µ" class="headerlink" title="alembicå¸¸ç”¨å­—æ®µ"></a><strong><u>alembicå¸¸ç”¨å­—æ®µ</u></strong></h3><ul>
<li>â€‹    init<ul>
<li>æ–°å»ºä¸€ä¸ªä»“åº“</li>
</ul>
</li>
<li>revision<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬æ–‡ä»¶</li>
</ul>
</li>
<li>â€“autogenerate<ul>
<li>è‡ªåŠ¨å°†å½“å‰æ¨¡å‹çš„ä¿®æ”¹,ç”Ÿæˆè¿ç§»æ–‡ä»¶</li>
</ul>
</li>
<li>â€“m<ul>
<li>æœ¬æ¬¡è¿ç§»åšäº†å“ªäº›ä¿®æ”¹,å¯ä»¥é€šè¿‡æŒ‡å®šè¿™ä¸ªå‚æ•°,è¿›è¡Œå›é¡¾</li>
</ul>
</li>
<li>upgeade<ul>
<li>å°†ç½®å®šç‰ˆæœ¬çš„è¿ç§»æ–‡ä»¶æ˜ å°„åˆ°æ•°æ®åº“ä¹‹ä¸­,å¦‚æœæœ‰å¤šä¸ªè¿ç§»æ–‡ä»¶æ²¡æœ‰æ˜ å°„,é‚£ä¹ˆä¼šæ‰§è¡Œå¤šä¸ªè¿ç§»è„šæœ¬</li>
</ul>
</li>
<li>[head]<ul>
<li>ä»£è¡¨æœ€æ–°çš„è¿ç§»è„šæœ¬çš„ç‰ˆæœ¬å·</li>
<li>ä¸€èˆ¬æŒ‡å‘æœ€æ–°ç‰ˆ</li>
</ul>
</li>
<li>â€˜first commitâ€™ <ul>
<li>ç”Ÿæˆç¬¬ä¸€ä¸ªè¿ç§»è„šæœ¬æ—¶çš„æ˜ å°„å‚æ•°</li>
</ul>
</li>
<li>add age column<ul>
<li>ä¿®æ”¹æ•°æ®åº“æ—¶ä½¿ç”¨çš„æ˜ å°„å‚æ•°</li>
</ul>
</li>
<li>history<ul>
<li>åˆ—å‡ºæ‰€æœ‰çš„è¿ç§»ç‰ˆæœ¬åŠå…¶ä¿¡æ¯</li>
<li>alembic history  (å±•ç¤ºæ‰€æœ‰çš„ç‰ˆæœ¬æ›´æ–°çš„ç‰ˆæœ¬å·)</li>
</ul>
</li>
<li>heads<ul>
<li>å±•ç¤ºheadæŒ‡å‘çš„è„šæœ¬æ–‡ä»¶çš„ç‰ˆæœ¬å·</li>
<li>è¿™ä¸ªç‰ˆæœ¬å·é€šå¸¸ä¸ºæ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬å·</li>
</ul>
</li>
<li>downgrade<ul>
<li>æ‰§è¡ŒæŒ‡å®šç‰ˆæœ¬è¿ç§»æ–‡ä»¶ä¸­çš„downgradeå‡½æ•°</li>
<li>ä¸upgradeå¯¹åº”,ä½¿ç”¨æ–¹æ³•ä¸º<ul>
<li>alembic downgrade ç‰ˆæœ¬å·</li>
<li>ç‰ˆæœ¬å·å¯ä»¥åœ¨æ–‡ä»¶ä¸­æŸ¥çœ‹,å³ä¸ºå¯¹åº”è¿ç§»æ–‡ä»¶ä¸­çš„revisionçš„å€¼</li>
</ul>
</li>
</ul>
</li>
<li>current<ul>
<li>å±•ç¤ºå½“å‰æ•°æ®åº“ä¸­çš„ç‰ˆæœ¬å·</li>
<li>ä½¿ç”¨æ–¹æ³•<ul>
<li>åœ¨æ•°æ®åº“ä¸­ä¼šç”Ÿæˆä¸€ä¸ªé¢å¤–çš„è¡¨,alem_version ,è¿™ä¸ªè¡¨ä¸­å­˜å‚¨ç€å½“å‰çš„ç‰ˆæœ¬å·</li>
<li>åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥<ul>
<li>alembic current ä¼šå¾—åˆ°å½“å‰æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬å·</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="alembicåœ¨flaskä¸­çš„ä½¿ç”¨"><a href="#alembicåœ¨flaskä¸­çš„ä½¿ç”¨" class="headerlink" title="*alembicåœ¨flaskä¸­çš„ä½¿ç”¨*"></a><strong>*<u>alembicåœ¨flaskä¸­çš„ä½¿ç”¨*</u></strong></h2><ul>
<li><p>å‰æœŸæ“ä½œæ–¹æ³•ç›¸åŒ</p>
</li>
<li><p>åœ¨åˆ›å»ºå¥½ä»“åº“æ—¶,æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è®¾å®š</p>
<ul>
<li><p>æ‰¾åˆ°alembic.iniæ–‡ä»¶</p>
</li>
<li><p><img src="C:%5CUsers%5Clenovo%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1572849457816.png" alt="1572849457816"></p>
</li>
<li><p>ä¿®æ”¹å…¶ä¸­çš„sqlalchemy_uriçš„å€¼ä¸ºè¦ä½¿ç”¨çš„æ•°æ®åº“é“¾æ¥</p>
</li>
<li><p>æ‰¾åˆ°alembicæ–‡ä»¶å¤¹ä¸‹çš„env.py</p>
</li>
<li><p>åœ¨å…¶ä¸­è¿›è¡Œå¦‚ä¸‹æ“ä½œ</p>
</li>
<li><pre><code class="python"><span class="keyword">import</span> sys,os
sys.path.append(os.path.dirname(os.path.dirname(__file__)))
<span class="keyword">import</span> app
*
target_metadata = app.db.Model.metadata</code></pre>
</li>
</ul>
</li>
<li><p>ä¹‹åçš„æ“ä½œå’Œä¹‹å‰å¹¶æ— å·®åˆ«</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskæ–‡ä»¶ä¸Šä¼ </title>
    <url>/blog/Flask/Flask_id_14.html</url>
    <content><![CDATA[<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ :"></a>æ–‡ä»¶ä¸Šä¼ :</h2><a id="more"></a>
<ul>
<li><pre><code class="python"><span class="comment">#å¯¼å…¥å¿…é¡»çš„æ¨¡å—åŒ…</span>
<span class="keyword">from</span> wtform <span class="keyword">import</span> Form,StringField,PasswordField,SubmitField,BooleanField,FileField,SelectField
<span class="comment">#å¯¼å…¥éªŒè¯å™¨åŒ…</span>
<span class="keyword">from</span> wtform.validators <span class="keyword">import</span> EqualTo,Length,UUID,URL,ValidatorsError,InputRequired,Email
<span class="comment">#ä»flask_wtfä¸­å¯¼å…¥file.FileRequired(æ˜¯å¦ä¸ºç©ºéªŒè¯)å’Œfile.FileAllowed(éªŒè¯æ˜¯å¦ç¬¦åˆè¦æ±‚çš„æ ¼å¼,æ ¼å¼è¦æ±‚çš„èŒƒå›´ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’,åˆ‡è®°ä¼ å…¥çš„å‚æ•°å¿…é¡»ä¸ºä¸€ä¸ªåˆ—è¡¨)</span>
<span class="keyword">from</span> flask <span class="keyword">import</span> Flask,request,render_template,send_from_directory
<span class="keyword">from</span> werkzeug.datastructures <span class="keyword">import</span> CombinedMultiDict

<span class="keyword">from</span> flask_wtf.file <span class="keyword">import</span> FileRequired,FileAllowed
<span class="comment">#å¯¼å…¥æ–‡ä»¶åè¿‡æ»¤åŒ…</span>
<span class="keyword">from</span> werkzeug.utils <span class="keyword">import</span> secure_filename
<span class="keyword">import</span> os

</code></pre>
</li>
</ul>
<p>  app = Flask(<strong>name</strong>)</p>
<p>  upload_url = os.path.join(os.path.dirname(<strong>file</strong>),â€™imageâ€™)</p>
<p>  class userForm(Form):<br>      #åˆ›å»ºæ–‡ä»¶ä¸Šä¼ çº¦æŸ<br>      avater = FileField(validators=[FileRequired(),FileAllowed([â€˜jpgâ€™,â€™pngâ€™,â€™gifâ€™])])</p>
<p>  @app.route(â€˜/â€˜,methods=[â€˜GETâ€™,â€™POSTâ€™])<br>  dedf func():<br>      if request.method == â€˜GETâ€™:<br>          return render_template(â€˜add.htmlâ€™)<br>      else:<br>          #ä½¿ç”¨ConbinedMultiDictæ¨¡å—å¯¹ä¼ è¾“çš„ä¸¤ä¸ªä¸åŒçš„å€¼è¿›è¡Œåˆå¹¶,ä¸€èµ·ä¼ å…¥wtfæ–‡ä»¶ä¼ è¾“åˆ¤å®šä¸­è¿›è¡ŒéªŒè¯<br>          userform = userForm(CombinedMultiDict([request.form,request.files]))<br>          if userform.validate():<br>              avater = userform.avater.data<br>              filename = secure_filename(avater.filename)<br>              avater.save(os.path.join(upload_url,filename))<br>              return â€˜ä¸Šä¼ æˆåŠŸâ€™</p>
<pre><code></code></pre>]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flask_script</title>
    <url>/blog/Flask/Flask_id_05.html</url>
    <content><![CDATA[<h2 id="flask-script"><a href="#flask-script" class="headerlink" title="*flask_script*"></a><strong>*<u>flask_script*</u></strong></h2><h2 id="flask-scriptå®‰è£…"><a href="#flask-scriptå®‰è£…" class="headerlink" title="flask_scriptå®‰è£…:"></a>flask_scriptå®‰è£…:</h2><a id="more"></a>

<ol>
<li><p>â€‹    å®‰è£…æ–¹æ³•</p>
<ol>
<li><pre><code>pip install flask-script
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"><span class="comment">## flask_scriptåˆæ¬¡ä½¿ç”¨:</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> ```python</span><br><span class="line">   <span class="keyword">from</span> flask_script <span class="keyword">import</span> Manage</span><br><span class="line">   <span class="keyword">from</span> app <span class="keyword">import</span> app</span><br><span class="line">   manage = Manage(app)</span><br><span class="line"><span class="meta">   @manage.command</span></span><br><span class="line">   <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">       print(<span class="string">'hello world'</span>)</span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line">   <span class="comment">#æœ€ç®€å•çš„flask_scriptåˆ›å»º</span></span><br><span class="line">   <span class="comment">#æ— å‚æ•°</span></span><br></pre></td></tr></table></figure></div></code></pre></li>
</ol>
</li>
<li><pre><code class="python"><span class="meta">@manage.option('-u','--username',dest='')</span>
<span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(username)</span>:</span>
    print(<span class="string">"ä½ è¾“å…¥çš„è´¦å·ä¸º%s"</span>%username)

<span class="comment">#æœ‰å‚æ•°</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AUTOIT"><figure class="iseeu highlight /autoit"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3.</span> è¿›å…¥å‘½ä»¤æç¤ºç¬¦,è¿›å…¥ä»£ç æ‰€åœ¨çš„æ–‡ä»¶å¤¹</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> ```python</span><br><span class="line">      python (æ–‡ä»¶åç§°) <span class="function"><span class="keyword">func</span></span></span><br><span class="line">      </span><br><span class="line">      <span class="meta">#æ— å‚æ•°</span></span><br></pre></td></tr></table></figure></div>

<span class="number">2.</span> ```python
   python (æ–‡ä»¶åç§°) func -u <span class="string">"root"</span>

   <span class="comment">#æœ‰å‚æ•°</span>
   <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"><span class="comment">## flask_scriptè¿›é˜¶æ“ä½œ:</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> é¢å¤–åˆ›å»ºä¸€ä¸ªscriptæ–‡ä»¶</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> åœ¨æ–‡ä»¶ä¸­å¼•å…¥è¦é›†æˆçš„æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> ```python</span><br><span class="line">      <span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line">      <span class="keyword">from</span> app <span class="keyword">import</span> app,db,Person</span><br><span class="line">      </span><br><span class="line">      db_script = Manager()</span><br><span class="line"><span class="meta">      @db_script.command</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">func1</span><span class="params">()</span>:</span></span><br><span class="line">          print(<span class="string">'ä»“åº“åˆ›å»ºæˆåŠŸ'</span>)</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line"><span class="meta">      @db_script.command</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">func2</span><span class="params">()</span>:</span></span><br><span class="line">          print(<span class="string">'æ•°æ®è¿ç§»æˆåŠŸ'</span>)</span><br><span class="line">      </span><br><span class="line"><span class="meta">      @db_script.command</span></span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">func3</span><span class="params">()</span>:</span></span><br><span class="line">          print(<span class="string">'æ•°æ®æ˜ å°„æˆåŠŸ'</span>)</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>åœ¨ä¸»æ–‡ä»¶ä¸­æ³¨å†Œé™„å±çš„scriptæ–‡ä»¶</p>
<ol>
<li><pre><code class="python"><span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager
<span class="keyword">from</span> app <span class="keyword">import</span> app,db,Person
<span class="keyword">from</span> db_script <span class="keyword">import</span> db_script
manager = Manager(app)
manager.add_command(<span class="string">'db'</span>,db_script)
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="VIM"><figure class="iseeu highlight /vim"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4</span>. åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. ```<span class="keyword">python</span></span><br><span class="line">      <span class="keyword">python</span> æ–‡ä»¶å db func1</span><br><span class="line">      <span class="keyword">python</span> æ–‡ä»¶å db func2</span><br><span class="line">      <span class="keyword">python</span> æ–‡ä»¶å db func3</span><br></pre></td></tr></table></figure></div>


</code></pre>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flask_migrate</title>
    <url>/blog/Flask/Flask_id_03.html</url>
    <content><![CDATA[<h2 id="flask-migrate"><a href="#flask-migrate" class="headerlink" title="*flask_migrate*"></a><strong>*<u>flask_migrate*</u></strong></h2><hr>
<h2 id="flask-migrateåˆè¯•"><a href="#flask-migrateåˆè¯•" class="headerlink" title="flask_migrateåˆè¯•:"></a>flask_migrateåˆè¯•:</h2><a id="more"></a>
<ul>
<li><p>æ¨¡å—å¯¼å…¥</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> flask_migrate <span class="keyword">import</span>  Migrate,MigrateCommand
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  - Migrateç”¨äºmigrateå¯¹è±¡å®ä¾‹åŒ–é€šè¿‡appä»¥åŠdbæ¥æ„ç­‘å®Œæ•´çš„migrate</span><br><span class="line"></span><br><span class="line">  - MigrateCommandæ˜¯ä¸€ä¸ªå¯¹è±¡,å…¶ä¸­å°å­˜ç€è¦ä½¿ç”¨çš„commandå¯¹è±¡(æ­¤å¯¹è±¡ä½¿ç”¨æ–¹æ³•ç­‰åŒäºflask_scriptçš„æ„ç­‘æ–¹æ³•)</span><br><span class="line"></span><br><span class="line">  - æ­¤å¤„è¿˜å¯ä»¥å¯¼å…¥flask_scriptæ¨¡å—</span><br><span class="line"></span><br><span class="line">- å…·ä½“å®ç°æ­¥éª¤</span><br><span class="line"></span><br><span class="line">  - migrateæ–‡ä»¶å†…çš„æ„é€ </span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    #å¯¼å…¥flask_scriptæ¨¡å—</span><br><span class="line">    <span class="keyword">from</span> flask_script <span class="keyword">import</span> Manager</span><br><span class="line">    #å¯¼å…¥flask_migrateæ¨¡å—</span><br><span class="line">    <span class="keyword">from</span> flask_migrate <span class="keyword">import</span> Migrate,MigrateCommand</span><br><span class="line">    #å¯¼å…¥app</span><br><span class="line">    <span class="keyword">from</span> app <span class="keyword">import</span> app</span><br><span class="line">    #å¯¼å…¥æ•°æ®åº“é“¾æ¥å®ä¾‹db</span><br><span class="line">    <span class="keyword">from</span> exts <span class="keyword">import</span> db</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    #å®ä¾‹åŒ–managerå¯¹è±¡</span><br><span class="line">    manager = Manager(app)</span><br><span class="line">    #å¼€å§‹åˆ›å»ºappä¸æ•°æ®åº“è¿æ¥</span><br><span class="line">    Migrate(app,db)</span><br><span class="line">    #åœ¨åˆ›å»ºå¥½çš„å¯¹è±¡ä¸­æ·»åŠ scriptå­å‘½ä»¤</span><br><span class="line">    manager.add_command(<span class="string">'db'</span>,MigrateCommand)</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>extsæ–‡ä»¶ä¸­çš„æ„é€ </p>
</li>
<li><pre><code class="python"><span class="keyword">from</span> flask_sqlalchemy <span class="keyword">import</span> SQLALchemy

db.SQLALchemy()
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- appæ–‡ä»¶ä¸­çš„æ„é€ </span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  <span class="keyword">from</span> flask import Flask</span><br><span class="line">  <span class="keyword">from</span> exts import db</span><br><span class="line">  import config</span><br><span class="line">  app = Flask(__name__)</span><br><span class="line">  app.config.from_object(config)</span><br><span class="line">  db.init_app(app)</span><br><span class="line">  @app.route(<span class="string">'/'</span>)</span><br><span class="line">  def hello_world():</span><br><span class="line">      return <span class="string">'Hello World!'</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">      app.<span class="builtin-name">run</span>()</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>modelsæ–‡ä»¶ä¸­çš„æ„é€ </p>
</li>
<li><pre><code class="python"><span class="keyword">from</span> exts <span class="keyword">import</span> db
<span class="class"><span class="keyword">class</span> <span class="title">person</span><span class="params">(db.Model)</span>:</span>
    __tablename__ = <span class="string">'person'</span>
    id = db.column(db.Integer,primary_key=<span class="literal">True</span>,autoincrement=<span class="literal">True</span>)
    name = db.Column(db.String(<span class="number">100</span>))
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"><span class="section">## flask_migrateåœ¨å‘½ä»¤è¡Œä¸­çš„ä½¿ç”¨:</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>è¿›å…¥æ–‡ä»¶å¤¹,æ‰“å¼€å‘½ä»¤çª—å£</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span><span class="code">```</span>python</span><br><span class="line">  python æ–‡ä»¶å db(å­å‘½ä»¤åç§°) init</span><br><span class="line">  #åˆ›å»ºä¸€ä¸ªmigrationsæ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªè¿ç§»æ–‡ä»¶</p>
</li>
<li><pre><code class="python">python æ–‡ä»¶å db(å­å‘½ä»¤åç§°) migrate
<span class="comment">########################################</span>
<span class="comment">#æ³¨æ„,è¿™é‡Œæœ‰ä¸€ä¸ªå‘,å¦‚æœåœ¨åˆ›å»ºmigrateæ–‡ä»¶çš„æ—¶å€™,æ²¡æœ‰ä¼ å…¥ä½ çš„modelsæ–‡ä»¶ä¸­çš„è¡¨(ç±»)</span>
<span class="comment">#é‚£ä¹ˆå°†ä¼šå‡ºç°æ— æ³•æ‰¾åˆ°è¡¨çš„æƒ…å†µ</span>
<span class="comment">#å…·ä½“è¡¨ç°å½¢å¼ä¸º</span>
<span class="string">"""</span>
<span class="string">INFO  [alembic.runtime.migration] Context impl MySQLImpl.</span>
<span class="string">INFO  [alembic.runtime.migration] Will assume non-transactional DDL.</span>
<span class="string">INFO  [alembic.env] No changes in schema detected.</span>
<span class="string">"""</span>
<span class="comment">#åœ¨è¿™ç§æƒ…å†µä¸‹,éœ€è¦åœ¨migrateä¸­å¯¼å…¥è¡¨</span>
form models <span class="keyword">import</span> Person
<span class="comment">########################################</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- å°†åˆ›å»ºå¥½çš„è¿ç§»æ–‡ä»¶æ˜ å°„åˆ°æ•°æ®åº“ä¸­</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  python æ–‡ä»¶å db(å­å‘½ä»¤å) upgrade</span><br><span class="line">  #å®Œæˆæ•°æ®åº“æ˜ å°„</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>python æ–‡ä»¶å db(å­å‘½ä»¤å) downgrade</p>
</li>
<li><p>python æ–‡ä»¶å db(å­å‘½ä»¤å) head</p>
</li>
<li><p>python æ–‡ä»¶å db(å­å‘½ä»¤å) history</p>
</li>
</ul>
<p>åŸºæœ¬ä¸Šæ‰€æœ‰çš„æ–¹æ³•å¯¹åº”ç€flask_alembicä¸­çš„æ–¹æ³•</p>
<p>å¯ä»¥ä½¿ç”¨ â€“helpæ–¹æ³•æŸ¥çœ‹å¯ä»¥ä½¿ç”¨çš„å…¨éƒ¨æ–¹æ³•</p>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flaskå¼€ç«¯</title>
    <url>/blog/Flask/Flask_id_02.html</url>
    <content><![CDATA[<h2 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“flaskå¼€ç«¯â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“flaskå¼€ç«¯â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“flaskå¼€ç«¯â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“flaskå¼€ç«¯â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“</h2><hr>
<h2 id="flaskå®‰è£…"><a href="#flaskå®‰è£…" class="headerlink" title="flaskå®‰è£…:"></a>flaskå®‰è£…:</h2><a id="more"></a>
<ul>
<li>â€‹    pip install flask     åœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥pipæŒ‡ä»¤è¿›è¡Œå®‰è£…</li>
<li>â€‹        ä½¿ç”¨pycharmå®‰è£…flask</li>
</ul>
<hr>
<h2 id="flaskä½¿ç”¨"><a href="#flaskä½¿ç”¨" class="headerlink" title="flaskä½¿ç”¨:"></a>flaskä½¿ç”¨:</h2><ul>
<li><p>â€‹    åˆæ¬¡åˆ›å»ºflaskå·¥ç¨‹</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask

app = Flask(__name__)

</code></pre>
</li>
</ul>
</li>
</ul>
<pre><code>@app.route(&apos;/&apos;)
def hello_world():
    return &apos;hello world!&apos;

if __name__ = &apos;__main__&apos;:
    app.run(debug=True)
```</code></pre><ul>
<li>æ³¨æ„,åœ¨2018ä¹‹åç‰ˆæœ¬çš„pycharmä¸­,è®¾å®šdebug=trueå¹¶ä¸èƒ½å¼€å¯debugæ¨¡å¼,æƒ³è¦å¼€å¯debugæ¨¡å¼éœ€è¦åœ¨pycharmä¸­è¿›è¡Œè®¾å®š</li>
</ul>
<ul>
<li>ç‚¹å‡»è¿è¡ŒæŒ‰é’®å·¦è¾¹çš„é€‰é¡¹,åœ¨å°å‡ºçš„é¡µé¢ä¸­é€‰æ‹©edit configurations</li>
<li>è¿›å…¥åå‹¾é€‰FLASK_DEBUG</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>flask_route</title>
    <url>/blog/Flask/Flask_id_04.html</url>
    <content><![CDATA[<h2 id="flask-route"><a href="#flask-route" class="headerlink" title="*flask_route*"></a><strong>*<u>flask_route*</u></strong></h2><a id="more"></a>
<ul>
<li><p>åˆ›å»ºappä¸»ä½“</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask
app = Flask(__name__)
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">- </span>ç»‘å®šè·¯ç”±</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span><span class="code">```</span>python</span><br><span class="line"><span class="code">    @app.route('/')</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><pre><code class="python"><span class="meta">@app.route('/',methods=['GET','PORT'])</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  - ç»‘å®šè·¯ç”±æ—¶,å¦‚æœä¸è®¾å®šmethodsæ–¹æ³•,å°†ä¼šé»˜è®¤ä¸ºgetæ–¹æ³•,è¿™ç§æƒ…å†µä¸‹,å…¶ä»–æ–¹æ³•æ— æ³•è®¿é—®</span><br><span class="line"></span><br><span class="line">- è®¾å®šè·¯ç”±çš„æ‰§è¡Œå‡½æ•°</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'hello world!'</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>è·¯ç”±çš„æ‰§è¡Œå‡½æ•°é€šè¿‡returnæ¥å®ç°,åœ¨ä¸è¿”å›HTMLé¡µé¢çš„æƒ…å†µä¸‹,å¯ä»¥å°†è¦è¿”å›çš„æ•°å€¼ç›´æ¥è¿”å›,ä½†æ˜¯åªèƒ½è¿”å›å­—ç¬¦ä¸²ç±»å‹</p>
</li>
</ul>
</li>
<li><p>åœ¨è®¾å®šç©è·¯ç”±ä¹‹å,åªéœ€è¦å¼€è¾Ÿä¸€ä¸ªç¨‹åºå…¥å£è¿›è¡Œè¿è¡Œ,å°±æ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„flask</p>
<ul>
<li><pre><code class="python"><span class="keyword">if</span> __name__ = <span class="string">'__main'</span>:
    app.run(debug=<span class="literal">True</span>)</code></pre>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Flask</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFè‡ªå®šä¹‰é”™è¯¯æ•è·</title>
    <url>/blog/Django/Django_id_10.html</url>
    <content><![CDATA[<h2 id="è‡ªå®šä¹‰é”™è¯¯æ•è·"><a href="#è‡ªå®šä¹‰é”™è¯¯æ•è·" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯æ•è·:"></a>è‡ªå®šä¹‰é”™è¯¯æ•è·:</h2><a id="more"></a>
<p>åœ¨drfå’Œdjangoæ¡†æ¶ä¸­,ä»…ä»…å†…ç½®äº†ä¸€äº›å¸¸è§çš„é”™è¯¯æ•è·,å¦‚:</p>
<ul>
<li><p>â€‹    </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">HTTP_100_CONTINUE = <span class="number">100</span></span><br><span class="line">HTTP_101_SWITCHING_PROTOCOLS = <span class="number">101</span></span><br><span class="line">HTTP_200_OK = <span class="number">200</span></span><br><span class="line">HTTP_201_CREATED = <span class="number">201</span></span><br><span class="line">HTTP_202_ACCEPTED = <span class="number">202</span></span><br><span class="line">HTTP_203_NON_AUTHORITATIVE_INFORMATION = <span class="number">203</span></span><br><span class="line">HTTP_204_NO_CONTENT = <span class="number">204</span></span><br><span class="line">HTTP_205_RESET_CONTENT = <span class="number">205</span></span><br><span class="line">HTTP_206_PARTIAL_CONTENT = <span class="number">206</span></span><br><span class="line">HTTP_207_MULTI_STATUS = <span class="number">207</span></span><br><span class="line">HTTP_208_ALREADY_REPORTED = <span class="number">208</span></span><br><span class="line">HTTP_226_IM_USED = <span class="number">226</span></span><br><span class="line">HTTP_300_MULTIPLE_CHOICES = <span class="number">300</span></span><br><span class="line">HTTP_301_MOVED_PERMANENTLY = <span class="number">301</span></span><br><span class="line">HTTP_302_FOUND = <span class="number">302</span></span><br><span class="line">HTTP_303_SEE_OTHER = <span class="number">303</span></span><br><span class="line">HTTP_304_NOT_MODIFIED = <span class="number">304</span></span><br><span class="line">HTTP_305_USE_PROXY = <span class="number">305</span></span><br><span class="line">HTTP_306_RESERVED = <span class="number">306</span></span><br><span class="line">HTTP_307_TEMPORARY_REDIRECT = <span class="number">307</span></span><br><span class="line">HTTP_308_PERMANENT_REDIRECT = <span class="number">308</span></span><br><span class="line">HTTP_400_BAD_REQUEST = <span class="number">400</span></span><br><span class="line">HTTP_401_UNAUTHORIZED = <span class="number">401</span></span><br><span class="line">HTTP_402_PAYMENT_REQUIRED = <span class="number">402</span></span><br><span class="line">HTTP_403_FORBIDDEN = <span class="number">403</span></span><br><span class="line">HTTP_404_NOT_FOUND = <span class="number">404</span></span><br><span class="line">HTTP_405_METHOD_NOT_ALLOWED = <span class="number">405</span></span><br><span class="line">HTTP_406_NOT_ACCEPTABLE = <span class="number">406</span></span><br><span class="line">HTTP_407_PROXY_AUTHENTICATION_REQUIRED = <span class="number">407</span></span><br><span class="line">HTTP_408_REQUEST_TIMEOUT = <span class="number">408</span></span><br><span class="line">HTTP_409_CONFLICT = <span class="number">409</span></span><br><span class="line">HTTP_410_GONE = <span class="number">410</span></span><br><span class="line">HTTP_411_LENGTH_REQUIRED = <span class="number">411</span></span><br><span class="line">HTTP_412_PRECONDITION_FAILED = <span class="number">412</span></span><br><span class="line">HTTP_413_REQUEST_ENTITY_TOO_LARGE = <span class="number">413</span></span><br><span class="line">HTTP_414_REQUEST_URI_TOO_LONG = <span class="number">414</span></span><br><span class="line">HTTP_415_UNSUPPORTED_MEDIA_TYPE = <span class="number">415</span></span><br><span class="line">HTTP_416_REQUESTED_RANGE_NOT_SATISFIABLE = <span class="number">416</span></span><br><span class="line">HTTP_417_EXPECTATION_FAILED = <span class="number">417</span></span><br><span class="line">HTTP_422_UNPROCESSABLE_ENTITY = <span class="number">422</span></span><br><span class="line">HTTP_423_LOCKED = <span class="number">423</span></span><br><span class="line">HTTP_424_FAILED_DEPENDENCY = <span class="number">424</span></span><br><span class="line">HTTP_426_UPGRADE_REQUIRED = <span class="number">426</span></span><br><span class="line">HTTP_428_PRECONDITION_REQUIRED = <span class="number">428</span></span><br><span class="line">HTTP_429_TOO_MANY_REQUESTS = <span class="number">429</span></span><br><span class="line">HTTP_431_REQUEST_HEADER_FIELDS_TOO_LARGE = <span class="number">431</span></span><br><span class="line">HTTP_451_UNAVAILABLE_FOR_LEGAL_REASONS = <span class="number">451</span></span><br><span class="line">HTTP_500_INTERNAL_SERVER_ERROR = <span class="number">500</span></span><br><span class="line">HTTP_501_NOT_IMPLEMENTED = <span class="number">501</span></span><br><span class="line">HTTP_502_BAD_GATEWAY = <span class="number">502</span></span><br><span class="line">HTTP_503_SERVICE_UNAVAILABLE = <span class="number">503</span></span><br><span class="line">HTTP_504_GATEWAY_TIMEOUT = <span class="number">504</span></span><br><span class="line">HTTP_505_HTTP_VERSION_NOT_SUPPORTED = <span class="number">505</span></span><br><span class="line">HTTP_506_VARIANT_ALSO_NEGOTIATES = <span class="number">506</span></span><br><span class="line">HTTP_507_INSUFFICIENT_STORAGE = <span class="number">507</span></span><br><span class="line">HTTP_508_LOOP_DETECTED = <span class="number">508</span></span><br><span class="line">HTTP_509_BANDWIDTH_LIMIT_EXCEEDED = <span class="number">509</span></span><br><span class="line">HTTP_510_NOT_EXTENDED = <span class="number">510</span></span><br><span class="line">HTTP_511_NETWORK_AUTHENTICATION_REQUIRED = <span class="number">511</span></span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>ä½†æ˜¯ä¸€äº›åé—¨çš„,æˆ–è€…è¯´,æ›´åŠ ç»†å¾®ä¹‹å¤„çš„é”™è¯¯,å°±éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰ä¸€äº›é”™è¯¯æ•è·å‡½æ•°æ¥è¿›è¡Œæ•è·</p>
<p>é‚£ä¹ˆ,åºŸè¯ä¸å¤šè¯´,ä¸Šä»£ç </p>
<ol>
<li><p>ç¬¬ä¸€æ­¥,åˆ›å»ºä¸€ä¸ªé”™è¯¯æ•è·å‡½æ•°çš„æ–‡ä»¶</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> status</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> exception_handler</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(exc,context)</span>:</span></span><br><span class="line">    <span class="comment">#å®ä¾‹åŒ–æ¡†æ¶è‡ªå¸¦çš„é”™è¯¯æ•è·,å…ˆè¿›è¡Œç­›é€‰</span></span><br><span class="line">    response = exception_handler(exc,context)</span><br><span class="line">	<span class="comment">#å½“æ²¡æœ‰æ•è·åˆ°é”™è¯¯ä¹‹å,æ‰§è¡Œæˆ‘ä»¬è‡ªå®šä¹‰çš„é”™è¯¯éªŒè¯æœºåˆ¶</span></span><br><span class="line">    <span class="keyword">if</span> response == <span class="literal">None</span>:</span><br><span class="line">        <span class="string">'''å¼€å§‹è¿›è¡Œåˆ¤æ–­'''</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(exc,ZeroDivisionError):</span><br><span class="line">            print(<span class="string">'æœåŠ¡å™¨é”™è¯¯'</span>)</span><br><span class="line">            response = Response(<span class="string">'æœåŠ¡å™¨é”™è¯¯'</span>,status=status.HTTP_500_INTERNAL_SERVER_ERROR)</span><br><span class="line">    <span class="comment">#ä¸Šé¢çš„éªŒè¯è¿”å›çš„ç»“æœå­˜å‚¨åˆ°response,è¿™æ˜¯ä¸€ä¸ªå·²ç»å®Œæˆåºåˆ—åŒ–çš„æ•°æ®,å¯ä»¥ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>åœ¨é…ç½®æ–‡ä»¶settingä¸­è¿›è¡Œé…ç½®(é€šå¸¸æƒ…å†µä¸‹,æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹æ¥å­˜æ”¾è¿™ä¸ªæ–‡ä»¶,ç„¶åå†settingä¸­ä»¥appçš„å½¢å¼æ³¨å†Œè¿™ä¸ªæ–‡ä»¶å¤¹)</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'EXCEPTION_HANDLER'</span>:<span class="string">'utiles.excaptions.func'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
<p>å®Œæˆäº†ä¸Šè¿°çš„å·¥ä½œä¹‹å,å½“æˆ‘ä»¬çš„ç å‡ºç°é”™è¯¯ä¹‹å,å°†ä¼šè‡ªåŠ¨è¿›è¡Œé”™è¯¯æ•è·</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFä¸­generics</title>
    <url>/blog/Django/Django_id_08.html</url>
    <content><![CDATA[<h2 id="generics"><a href="#generics" class="headerlink" title="generics"></a>generics</h2><a id="more"></a>
<ol>
<li><p>è¿™æ¨¡å—ä¸­å°è£…ç€GenericsAPIViewsç±»,å¯¹APIViewsè¿›è¡Œäº†è¿›ä¸€æ­¥çš„å°è£…,æ¯”èµ·APIViews,å®ƒçš„åŠŸèƒ½è¿›ä¸€æ­¥æ‰©å±•</p>
</li>
<li><pre><code>from rest_framework.generics import GenericsAPIViews
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3.</span> </span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> View</span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> StudentsSerializer,Students_Serializer</span><br><span class="line"><span class="keyword">from</span> . models <span class="keyword">import</span> CuressInfo,Students</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsAPIViews</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="comment"># queryset = Students.objects.all()</span></span><br><span class="line">    <span class="comment"># serializer_class = StudentsSerializer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        students = Students.objects.all()</span><br><span class="line">        serializer = StudentsSerializer(instance=students,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(serializer.data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="keyword">import</span> json</span><br><span class="line">        data_string = request.body.decode()</span><br><span class="line">        data_dict = json.loads(data_string)</span><br><span class="line">        serializer = Students_Serializer(data=data_dict)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">stdSl</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request,id)</span>:</span></span><br><span class="line">        <span class="keyword">from</span> .serializer <span class="keyword">import</span> SerializerModel</span><br><span class="line">        serializer = SerializerModel(data=Students.objects.all(),many=<span class="literal">True</span>)</span><br><span class="line">        serializer.is_valid()</span><br><span class="line">        print(serializer.data)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(serializer.data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request,id)</span>:</span></span><br><span class="line">        <span class="keyword">from</span> .serializer <span class="keyword">import</span> SerializerModel</span><br><span class="line">        <span class="keyword">import</span> json</span><br><span class="line">        data_string = request.body.decode()</span><br><span class="line">        data_dict = json.loads(data_string)</span><br><span class="line">        serializer = SerializerModel(data=data_dict)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(serializer.data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self,request,id)</span>:</span></span><br><span class="line">        instance = Students.objects.get(id=id)</span><br><span class="line">        <span class="keyword">import</span> json</span><br><span class="line">        data_dict = json.loads(request.body.decode())</span><br><span class="line">        serializer = Students_Serializer(instance=instance,data=data_dict)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> ModelSerializerAPIViews</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsModelAPIViews</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        instance = Students.objects.all()</span><br><span class="line">        serializer = ModelSerializerAPIViews(instance=instance,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="comment"># instance = Students.objects.get(id=id)</span></span><br><span class="line">        data_dict = request.data</span><br><span class="line">        serializer = ModelSerializerAPIViews(data=data_dict)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        serializer.save()</span><br><span class="line">        print(serializer.error_messages)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> GenericAPIView</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsGenericAPIViews</span><span class="params">(GenericAPIView)</span>:</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        all_dict = self.get_queryset()</span><br><span class="line">        serializer = ModelSerializerAPIViews(instance=all_dict,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        serializer = ModelSerializerAPIViews(data=request.data)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> GenericAPIView</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsGenericAPIViews</span><span class="params">(GenericAPIView)</span>:</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    serializer_class = ModelSerializerAPIViews</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        all_dict = self.get_queryset()</span><br><span class="line">        serializer = self.get_serializer(instance=all_dict,many=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        serializer = self.get_serializer(data=request.data)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br><span class="line">        serializer.save()</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ListModelMixin                  å±•ç¤ºå…¨éƒ¨æ•°æ®,é‡Œé¢å°è£…çš„æ˜¯å…¨éƒ¨æ•°æ®çš„è·å–,æ–¹æ³•åä¸ºlist</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># CreateModelMixin	   æ·»åŠ æ–°çš„æ•°æ®,è¿™é‡Œé¢å°å­˜çš„æ–¹æ³•åä¸ºcreate</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># DestroyAPIView	  åˆ é™¤å¯¹åº”çš„æ•°æ®,å¯¹åº”çš„æ–¹æ³•ä¸ºdestroy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># UpdateAPIView		ä¿®æ”¹å¯¹åº”çš„æ•°æ®,å¯¹åº”çš„æ–¹æ³•åä¸ºupdate</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RetrieveAPIView	  è·å–å•æ¡æ•°æ®,éœ€è¦æœ‰å¯¹åº”çš„pkæ•°å€¼ä¼ å…¥,æ–¹æ³•åä¸ºretrieve</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># RetrieveUpdateDestroyAPIView	è¿™ä¸ªé‡Œé¢å°è£…äº†å¤šä¸ªè§†å›¾åˆ†æ”¯ç±»,åŒ…æ‹¬DestroyAPIView-------UpdateAPIView------RetrieveAPIView------GenericsAPIViewå››ä¸ª,æ‰€ä»¥å®ƒé‡Œé¢åŒ…å«äº†å¯¹åº”çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.mixins <span class="keyword">import</span> ListModelMixin,CreateModelMixin</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsListModelMixin</span><span class="params">(GenericAPIView,ListModelMixin,CreateModelMixin)</span>:</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    serializer_class = ModelSerializerAPIViews</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.list(request)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.create(request)</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># from rest_framework.generics import ListAPIView,CreateAPIView,DestroyAPIView,UpdateAPIView,RetrieveAPIView</span></span><br><span class="line"><span class="comment"># from rest_framework.generics import RetrieveUpdateDestroyAPIView</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ç»ˆæå½¢æ€</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="comment"># ModelAPIViewSeté‡Œé¢,ç›¸å½“äºç»§æ‰¿äº†ä»¥ä¸Šçš„å¤šç§æ–¹æ³•</span></span><br><span class="line"><span class="comment"># åŒæ—¶,åœ¨ä½¿ç”¨ModelAPIViewSetåˆ›å»ºçš„ç±»è§†å›¾è¿›è¡Œæ³¨å†Œæ—¶,éœ€è¦åœ¨as_viewä¸­ä¼ å…¥å‚æ•°å…·ä½“æ“ä½œæ–¹æ³•è¯·å¾€ä¸‹çœ‹==============&gt;</span></span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Students_ListModelMixin</span><span class="params">(ModelViewSet)</span>:</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    serializer_class = ModelSerializerAPIViews</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ReadOnlyModelViewSet</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Students_ListModelMixin</span><span class="params">(ReadOnlyModelViewSet)</span>:</span></span><br><span class="line">    <span class="comment"># å½“ä½¿ç”¨ReadOnlyModelViewSetæ—¶,æ‰€è·å¾—çš„æ–¹æ³•æ˜¯åªè¯»çš„,ä¹Ÿå³æ˜¯è¯´,é‡Œé¢å¹¶æ²¡æœ‰å°è£…ä¿®æ”¹æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    serializer_class = ModelSerializerAPIViews</span><br><span class="line"></span><br><span class="line"><span class="comment"># ==================&gt;</span></span><br><span class="line">	<span class="comment"># è·¯ç”±å±æ€§ä¸ºæ˜¾ç¤ºå…¨éƒ¨æ•°æ®æ—¶çš„æ³¨å†Œæ–¹å¼</span></span><br><span class="line">	path(<span class="string">'students5/'</span>,Students_ListModelMixin.as_view(&#123;</span><br><span class="line">        <span class="string">'get'</span>:<span class="string">'list'</span>,</span><br><span class="line">        <span class="string">'post'</span>:<span class="string">'create'</span></span><br><span class="line">    &#125;)),</span><br><span class="line">    <span class="comment">#å½“éœ€è¦ä½¿ç”¨è·¯ç”±è·å–å‚æ•°æ—¶çš„æ–¹å¼</span></span><br><span class="line">    re_path(<span class="string">r'students5/(?P&lt;pk&gt;\d+)/'</span>,Students_ListModelMixin.as_view(&#123;</span><br><span class="line">        <span class="string">'get'</span>:<span class="string">'retrieve'</span>,</span><br><span class="line">        <span class="string">'put'</span>:<span class="string">'update'</span>,</span><br><span class="line">        <span class="string">'delete'</span>:<span class="string">'destroy'</span></span><br><span class="line">    &#125;)),</span><br><span class="line">	<span class="comment"># ç¡®åˆ‡çš„ä¹¦,åœ¨as_viewä¸­,ä½ éœ€è¦å°†è®¿é—®æ–¹å¼åŒå‡½æ•°ç»‘å®šèµ·æ¥,ç¡®ä¿ä½ åœ¨è®¿é—®æ—¶å°†ä¼šæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment"># è®¿é—®æ–¹å¼ä¸æ–¹æ³•çš„ç»‘å®šä¸€èˆ¬æ•´åˆä¸ºä¸€ä¸ªå­—å…¸å½¢å¼ä¼ å…¥è§†å›¾ç±»</span></span><br></pre></td></tr></table></figure></div>


</code></pre></li>
</ol>
<hr>
<h3 id="åœ¨è§†å›¾å‡½æ•°å‡½æ•°ç±»ä¸­è°ƒç”¨å¤šä¸ªåºåˆ—åŒ–å™¨"><a href="#åœ¨è§†å›¾å‡½æ•°å‡½æ•°ç±»ä¸­è°ƒç”¨å¤šä¸ªåºåˆ—åŒ–å™¨" class="headerlink" title="åœ¨è§†å›¾å‡½æ•°å‡½æ•°ç±»ä¸­è°ƒç”¨å¤šä¸ªåºåˆ—åŒ–å™¨"></a>åœ¨è§†å›¾å‡½æ•°å‡½æ•°ç±»ä¸­è°ƒç”¨å¤šä¸ªåºåˆ—åŒ–å™¨</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line"><span class="keyword">from</span> .serializer <span class="keyword">import</span> CuressInfo,ModelSerializerAPIViews</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsModelViewSet</span><span class="params">(APIView)</span>:</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    serializer_class = ModelSerializerAPIViews</span><br><span class="line">    <span class="comment"># é‡å†™get_serializer_classæ–¹æ³•,åœ¨å…¶ä¸­æ·»åŠ åˆ¤æ–­,å¦‚æœå¯¹åº”çš„è®¿é—®æ–¹å¼,å°±è¿”å›éœ€è¦ç”¨åˆ°çš„åºåˆ—åŒ–å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.request.method == <span class="string">'GET'</span>:</span><br><span class="line">            <span class="keyword">return</span> ModelSerializerAPIViews</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> CuressInfo</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        instance = self.get_queryset()</span><br><span class="line">        serializer = self.get_serializer(instance=instance,many=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        data = request.data</span><br><span class="line">        serializer = self.get_serializer(data=data)</span><br><span class="line">        serializer.is_valid(raise_excaption=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsModelViewSet</span><span class="params">(ModelViewSet)</span>:</span></span><br><span class="line">    queryset = Students.objects.all()</span><br><span class="line">    serializer_class = ModelSerializerAPIViews</span><br><span class="line">    <span class="comment"># é‡å†™get_serializer_classæ–¹æ³•,åœ¨å…¶ä¸­æ·»åŠ åˆ¤æ–­,å¦‚æœå¯¹åº”çš„è®¿é—®æ–¹å¼,å°±è¿”å›éœ€è¦ç”¨åˆ°çš„åºåˆ—åŒ–å™¨</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment">#åœ¨è§†å›¾é›†å‡½æ•°ä¸­,ä½¿ç”¨çš„å¹¶ä¸æ˜¯self.request.methodè¿›è¡Œåˆ¤æ–­,è€Œæ˜¯self.action</span></span><br><span class="line">        <span class="keyword">if</span> self.action == <span class="string">'list'</span>:</span><br><span class="line">            <span class="keyword">return</span> ModelSerializerAPIViews</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> CuressInfo</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        instance = self.get_queryset()</span><br><span class="line">        serializer = self.get_serializer(instance=instance,many=<span class="literal">True</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        data = request.data</span><br><span class="line">        serializer = self.get_serializer(data=data)</span><br><span class="line">        serializer.is_valid(raise_excaption=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure></div>

]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFä¸­çš„APIViewsè§†å›¾ç±»</title>
    <url>/blog/Django/Django_id_09.html</url>
    <content><![CDATA[<h2 id="from-rest-framework-views-import-APIViews"><a href="#from-rest-framework-views-import-APIViews" class="headerlink" title="from rest_framework.views import APIViews"></a>from rest_framework.views import APIViews</h2><a id="more"></a>
<ol>
<li><p>å°è£…åœ¨DRFä¸­çš„è§†å›¾æ¨¡å—,ç›¸æ¯”ç›´æ¥ä½¿ç”¨djangoä¸­çš„viewsæ¨¡å—,è¿™ä¸ªæ¨¡å—çš„ä½¿ç”¨æ›´åŠ çš„ä¸¥è°¨,åŠŸèƒ½æ›´å¤š,æ›´å¥½ç”¨</p>
<ol>
<li>ä»é¡µé¢ä¸­ä½¿ç”¨requestè·å–åˆ°çš„jsonæ•°æ®å°†ä¼šè‡ªåŠ¨è½¬æ¢æˆå­—å…¸ç±»å‹çš„æ•°æ®,æ–¹ä¾¿ä½¿ç”¨,ä¸éœ€è¦é¢å¤–å¯¼å…¥ä¸€æ¬¡jsonæ¨¡å—</li>
<li>å…¶ä»–æ–¹é¢çš„ä½¿ç”¨viewsä½¿ç”¨æ–¹å¼ç›¸åŒ</li>
<li>ä»æ ¹æœ¬ä¸Šæ¥çœ‹,APIViewsç»§æ‰¿è‡ªViews</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFéªŒè¯å™¨æœºåˆ¶ä½¿ç”¨</title>
    <url>/blog/Django/Django_id_07.html</url>
    <content><![CDATA[<h2 id="DRFéªŒè¯å™¨æœºåˆ¶"><a href="#DRFéªŒè¯å™¨æœºåˆ¶" class="headerlink" title="DRFéªŒè¯å™¨æœºåˆ¶"></a>DRFéªŒè¯å™¨æœºåˆ¶</h2><a id="more"></a>
<ol>
<li><p>åˆ›å»ºåŸºäºdrfæ¡†æ¶çš„éªŒè¯å™¨</p>
<ol>
<li><pre><code class="python"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializer
<span class="class"><span class="keyword">class</span> <span class="title">SerializerStudents</span><span class="params">(serializer.Serializer)</span>:</span>
    name = serializer.CharField(max_length=<span class="number">10</span>,min_length=<span class="number">2</span>)
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> åœ¨åˆ›å»ºå¥½çš„è§†å›¾ç±»ä¸­ä½¿ç”¨è¿™ä¸ªéªŒè¯å™¨ç±»</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   <span class="class"><span class="keyword">class</span> <span class="title">Students</span><span class="params">(View)</span>:</span></span><br><span class="line">       <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self,request)</span>:</span></span><br><span class="line">           <span class="comment">#è·å–å®¢æˆ·ç«¯ä¼ è¾“è¿‡æ¥çš„jsonæ•°æ®å¹¶è¿›è¡Œè§£ç æ“ä½œ</span></span><br><span class="line">           data_string = request.body.decode()</span><br><span class="line">           <span class="comment">#å¯¼å…¥jsonæ¨¡å—</span></span><br><span class="line">           <span class="keyword">import</span> json</span><br><span class="line">           <span class="comment">#ä½¿ç”¨jsonæ¨¡å—çš„æ–¹æ³•å¯¹è·å–åˆ°çš„å­—ç¬¦ä¸²è¿›è¡Œè½¬æ¢,å˜æˆä¸€ä¸ªå­—å…¸</span></span><br><span class="line">           data_dict = json.loads(data_string)</span><br><span class="line">           <span class="comment">#ä½¿ç”¨åˆ›å»ºå¥½çš„éªŒè¯å™¨ç±»</span></span><br><span class="line">           <span class="keyword">from</span> .serializer <span class="keyword">import</span> SerializerStudents</span><br><span class="line">           serializer = SerializerStudents(data=data_dict)</span><br><span class="line">           <span class="comment">#éªŒè¯å™¨ç±»çš„is_validæ–¹æ³•è¿”å›çš„æ•°æ®ä¸ºboolæ•°æ®,å½“é€šè¿‡éªŒè¯æ—¶,è¿”å›ç»“æœä¸ºtrue,å¦åˆ™è¿”å›false</span></span><br><span class="line">           print(serializer.is_valid())</span><br><span class="line">           <span class="comment">#is_validæ–¹æ³•çš„å±æ€§ä¸ºraise_excaption</span></span><br><span class="line">           <span class="comment">#è¿™ä¸ªå±æ€§é»˜è®¤æ—¶å…³é—­çš„,å½“ä»–å¼€å¯æ—¶,æ„å‘³ç€å½“éªŒè¯å‡ºé”™æ—¶,å°†ä¼šç›´æ¥æŠ¥é”™,å¹¶ç›´æ¥åœæ­¢ä»£ç çš„ç»§ç»­è¿è¡Œ,</span></span><br><span class="line">           print(serializer.is_valid(raise_exception=<span class="literal">True</span>))</span><br><span class="line">           <span class="comment">#è¿”å›æŠ¥é”™ä¿¡æ¯,è¿™ä¸ªå¹¶ä¸ä¼šé˜»æ­¢ç¨‹åºçš„ç»§ç»­è¿è¡Œ</span></span><br><span class="line">           print(serializer.erreo_messages)</span><br><span class="line">           <span class="comment">#</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ol>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªéªŒè¯å™¨æ–¹æ³•è¿›è¡ŒéªŒè¯</p>
<ol>
<li><p>å•å­—æ®µéªŒè¯</p>
<ul>
<li><pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">validate_name</span><span class="params">(self,data)</span>:</span>
    <span class="comment">#ä¼ å…¥çš„å‚æ•°å¯ä»¥ç›´æ¥è®¾å®šä¸ºdata</span>
    <span class="keyword">if</span> data == <span class="string">'root'</span>:
        <span class="keyword">raise</span> serializer.ValidationError(message=<span class="string">'ç”¨æˆ·åä¸èƒ½ä¸ºroot'</span>)
        <span class="comment">#å½“æ»¡è¶³æ¡ä»¶æ—¶,è¿”å›é”™è¯¯åŸå› å’Œä¿¡æ¯</span>
    <span class="keyword">return</span> data
    <span class="comment">#å½“é€šè¿‡éªŒè¯æ—¶,è¿”å›åŸæ•°æ®data</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> å…¨å±€å­—æ®µéªŒè¯</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     def <span class="keyword">validate</span>(self,data_dict):</span><br><span class="line">         #éªŒè¯æ–¹æ³•å’Œå•å­—æ®µéªŒè¯åŸºæœ¬ç›¸åŒ,åŒºåˆ«æ˜¯ä¼ å…¥çš„æ•°æ®ç±»å‹æ˜¯å­—å…¸,è¿›è¡Œåˆ¤æ–­æ˜¯åªéœ€è¦ä»å­—å…¸ä¸­å–å‡ºå¯¹åº”çš„å€¼å³å¯è¿›è¡Œåˆ¤æ–­,è¦æ³¨æ„çš„æ˜¯,æœ€ç»ˆä¾ç„¶è¦å°†è¿™ä¸ªæ•°æ®è¿”å›å›å»</span><br><span class="line">         <span class="type">name</span> = data_dict.<span class="keyword">get</span>(<span class="string">'name'</span>)</span><br><span class="line">         <span class="keyword">password</span> = data_dict.<span class="keyword">get</span>(<span class="string">'password'</span>)</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> data_dict</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
</ol>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªéªŒè¯å™¨ç±»å¤–éƒ¨çš„æ–¹æ³•è¿›è¡Œä½¿ç”¨</p>
<ol>
<li><p>åœ¨éªŒè¯å™¨ç±»å¤–éƒ¨è¿›è¡Œå‡½æ•°å®šä¹‰</p>
<ul>
<li><pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">check_validate</span><span class="params">(data)</span>:</span>
    <span class="keyword">if</span> data==<span class="string">'user'</span>:
        <span class="keyword">raise</span> serializer.ValidationError(message=<span class="string">'ä¸èƒ½ä½¿ç”¨userä½œä¸ºç”¨æˆ·å'</span>)
    <span class="keyword">return</span> data
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="REASONML"><figure class="iseeu highlight /reasonml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> åœ¨éªŒè¯å™¨ç±»ä¸­å®šä¹‰å­—æ®µå±æ€§æ—¶ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     name = serializer.<span class="constructor">CharFIeld(<span class="params">max_length</span>=20,<span class="params">min_length</span>=2,<span class="params">validates</span>=[<span class="params">check_validate</span>])</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
</ol>
</li>
<li><p>åœ¨éªŒè¯å™¨ç±»ä¸­é‡å†™create(æ·»åŠ ä¸€æ¡æ•°æ®)æ–¹æ³•å’Œupdate(ä¿®æ”¹ä¸€æ¡æ•°æ®)æ–¹æ³•</p>
<ol>
<li><p>é‡å†™createæ–¹æ³•</p>
<ul>
<li><pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self,validate_data)</span>:</span>
    name = validate_data.get(<span class="string">'name'</span>)
    instance = Students.objects.create(
        name=name
    )
    <span class="keyword">return</span> instance
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XQUERY"><figure class="iseeu highlight /xquery"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2</span>. é‡å†™<span class="keyword">update</span>æ–¹æ³•</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     def <span class="keyword">update</span>(self,<span class="keyword">instance</span>,validate_data):</span><br><span class="line">        <span class="built_in"> name</span> = validate_date,get(<span class="string">'name'</span>)</span><br><span class="line">         <span class="keyword">instance</span><span class="built_in">.name</span> =<span class="built_in"> name</span></span><br><span class="line">         <span class="keyword">instance</span>.save()</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">instance</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>ä½¿ç”¨è¿™ä¸¤ç§æ–¹æ³•</p>
<ol>
<li><p>é€šç”¨çš„æ¿€æ´»æ–¹æ³•</p>
<ul>
<li><pre><code class="python">serializer.save()
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="XQUERY"><figure class="iseeu highlight /xquery"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - é€šè¿‡éªŒè¯ä¹‹åçš„æ•°æ®,å¯ä»¥ä½¿ç”¨æ–¹æ³•save()</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>. createå¯ä»¥ç›´æ¥ä½¿ç”¨,å½“éªŒè¯æ—¶ä¼ å…¥çš„å‚æ•°ä»…æœ‰ä¸€ä¸ªdataæ—¶,å°†ä¼šè°ƒç”¨createæ–¹æ³•,è€Œä¸ä¼šæ¿€æ´»<span class="keyword">update</span>æ–¹æ³•</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>. ä½¿ç”¨<span class="keyword">update</span>æ–¹æ³•</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>. ```python</span><br><span class="line">          def <span class="keyword">update</span>(self, <span class="keyword">instance</span>, validated_data):</span><br><span class="line">             <span class="built_in"> name</span> = validated_data.get(<span class="string">'name'</span>)</span><br><span class="line">              curess = <span class="number">1</span></span><br><span class="line">              <span class="keyword">instance</span><span class="built_in">.name</span> =<span class="built_in"> name</span></span><br><span class="line">              <span class="keyword">instance</span>.curess_id = curess</span><br><span class="line">              <span class="keyword">instance</span>.save()</span><br><span class="line">              <span class="keyword">return</span> <span class="keyword">instance</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
<ol start="2">
<li><pre><code class="python"><span class="class"><span class="keyword">class</span> <span class="title">stdSl</span><span class="params">(View)</span>:</span>
    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self,request,id)</span>:</span>
        instance = Students.objects.get(id=id)
        <span class="keyword">import</span> json
        data_dict = json.loads(request.body.decode())
        serializer = Students_Serializer(instance=instance,data=data_dict)
        serializer.is_valid(raise_exception=<span class="literal">True</span>)
        serializer.save()
        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="ä»¥ä¸Šå†…å®¹ä¸ºserializer-Serializerç»„ä»¶çš„ä½¿ç”¨-ç›¸æ¯”è¾ƒèµ·æ¥-drfæ¡†æ¶ä¸­å…¶å®å·²ç»å°è£…å¥½äº†ä¸“ç”¨çš„æ¨¡å‹ç±»åºåˆ—åŒ–å™¨"><a href="#ä»¥ä¸Šå†…å®¹ä¸ºserializer-Serializerç»„ä»¶çš„ä½¿ç”¨-ç›¸æ¯”è¾ƒèµ·æ¥-drfæ¡†æ¶ä¸­å…¶å®å·²ç»å°è£…å¥½äº†ä¸“ç”¨çš„æ¨¡å‹ç±»åºåˆ—åŒ–å™¨" class="headerlink" title="ä»¥ä¸Šå†…å®¹ä¸ºserializer.Serializerç»„ä»¶çš„ä½¿ç”¨,ç›¸æ¯”è¾ƒèµ·æ¥,drfæ¡†æ¶ä¸­å…¶å®å·²ç»å°è£…å¥½äº†ä¸“ç”¨çš„æ¨¡å‹ç±»åºåˆ—åŒ–å™¨"></a>ä»¥ä¸Šå†…å®¹ä¸ºserializer.Serializerç»„ä»¶çš„ä½¿ç”¨,ç›¸æ¯”è¾ƒèµ·æ¥,drfæ¡†æ¶ä¸­å…¶å®å·²ç»å°è£…å¥½äº†ä¸“ç”¨çš„æ¨¡å‹ç±»åºåˆ—åŒ–å™¨</h2><hr>
<h3 id="serializer-ModelSerializer"><a href="#serializer-ModelSerializer" class="headerlink" title="serializer.ModelSerializer:"></a>serializer.ModelSerializer:</h3><ul>
<li></li>
</ul>
<hr>
<h2 id="éªŒè¯å™¨ä½¿ç”¨æ—¶çš„å±æ€§å’Œå­—æ®µ"><a href="#éªŒè¯å™¨ä½¿ç”¨æ—¶çš„å±æ€§å’Œå­—æ®µ" class="headerlink" title="éªŒè¯å™¨ä½¿ç”¨æ—¶çš„å±æ€§å’Œå­—æ®µ:"></a>éªŒè¯å™¨ä½¿ç”¨æ—¶çš„å±æ€§å’Œå­—æ®µ:</h2><ul>
<li></li>
<li></li>
</ul>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Gitæ“ä½œ</title>
    <url>/blog/Git/Git_id_03.html</url>
    <content><![CDATA[<h2 id="git-bashæ“ä½œå®ä¾‹"><a href="#git-bashæ“ä½œå®ä¾‹" class="headerlink" title="git bashæ“ä½œå®ä¾‹:"></a>git bashæ“ä½œå®ä¾‹:</h2><a id="more"></a>
<ul>
<li><p>â€‹    åœ¨æ–‡ä»¶å¤¹ä¸­æ‰“å¼€git(åœ¨æ–‡ä»¶é¡µé¢ä¸Šæ–¹çš„è·¯å¾„é‡Œé¢è¾“å…¥git bashå³å¯å¿«é€Ÿæ‰“å¼€gitç¼–è¾‘ç•Œé¢)</p>
</li>
<li><pre><code>git init //åˆå§‹åŒ–gitæ–‡ä»¶åŒ…
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git add æ–‡ä»¶å     //åˆ›å»ºé•œåƒæ–‡ä»¶
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git commit  //æäº¤
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git commit -m &apos;æè¿°ä¿¡æ¯&apos; //æäº¤,ä½†ä¸ä¼šæ‰“å¼€ç¼–è¾‘çª—å£
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git clone https://github.com/fcg22450/my_flask.git

#https://github.com/fcg22450/my_flask.gitè¿™é‡Œçš„å†…å®¹ä»githubé¡µé¢è·å–
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git add .
#å°†å½“å‰æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…æˆè¿ç§»æ–‡ä»¶
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git push -u origin master
#å°†ç”Ÿæˆçš„è¿ç§»æ–‡ä»¶ä¸Šä¼ åˆ°githubä»“åº“ä¸­
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
cd test 
#è¿›å…¥å¯¹åº”æ–‡ä»¶å¤¹
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git status
#æŸ¥çœ‹å½“å‰å‡†å¤‡å¥½çš„è¿ç§»æ–‡ä»¶
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git config --system --unset credential.helper
# æ¸…ç©ºå¯†ç 
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
git config --global credential.helper store
# ä¿å­˜å¯†ç </code></pre></li>
</ul>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFæ–‡ä»¶ä¸Šä¼ ä¸é™æ€æ–‡ä»¶è®¿é—®</title>
    <url>/blog/Django/Django_id_06.html</url>
    <content><![CDATA[<h2 id="DRFæ–‡ä»¶ä¸Šä¼ åŠè®¿é—®"><a href="#DRFæ–‡ä»¶ä¸Šä¼ åŠè®¿é—®" class="headerlink" title="DRFæ–‡ä»¶ä¸Šä¼ åŠè®¿é—®"></a>DRFæ–‡ä»¶ä¸Šä¼ åŠè®¿é—®</h2><a id="more"></a>
<h2 id="å…³äºDRFæ–‡ä»¶ä¸Šä¼ "><a href="#å…³äºDRFæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="å…³äºDRFæ–‡ä»¶ä¸Šä¼ :"></a>å…³äºDRFæ–‡ä»¶ä¸Šä¼ :</h2><p>â€‹    å…¶å®æˆ‘çš„æŒæ¡å¹¶ä¸å¼º,ç›®å‰ä¹Ÿåªèƒ½å®Œæˆéå‰åç«¯åˆ†ç¦»çš„çŠ¶æ€æäº¤çš„æ•°æ®,åœ¨å‰åç«¯åˆ†ç¦»çš„çŠ¶æ€,æˆ‘æäº¤çš„æ•°æ®ä¸çŸ¥é“ä¸ºä»€ä¹ˆå§‹ç»ˆæ— æ³•ä¼ ä¸Šæ¥,æŸ¥éªŒä»£ç ä¹‹åæç¤ºæ˜¯æˆ‘çš„ä¸Šä¼ æ•°æ®æ ¼å¼ä¸ä¸€è‡´,ä½†æ˜¯æŸ¥äº†å¥½ä¹…éƒ½æ²¡æ‰¾åˆ°å…·ä½“çš„è§£å†³åŠæ³•</p>
<p>â€‹    é‚£ä¹ˆ,å…ˆæ¼”ç¤ºä¸€ä¸‹ä½¿ç”¨drfè¿›è¡Œçš„djangoå·¥ç¨‹å†…éƒ¨çš„æäº¤:</p>
<p>â€‹        </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">imgCal</span><span class="params">(ModelViewSet)</span>:</span></span><br><span class="line">    queryset = imageInfo.objects.all()</span><br><span class="line">    serializer_class = StudentsSerializer</span><br><span class="line">    <span class="comment">#é‡å†™getæ–¹æ³•,ç¡®ä¿åœ¨è¿›è¡Œgetè®¿é—®æ—¶è·å–è¿›è¡Œæ–‡ä»¶ä¸Šä¼ çš„æ¨¡æ¿</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> render(request,<span class="string">'./imgfrom.html'</span>)</span><br><span class="line"></span><br><span class="line">	<span class="comment">#åœ¨è¿™é‡Œ,æˆ‘é€‰æ‹©äº†é‡å†™ModelViewSetä¸­è‡ªå¸¦çš„createæ–¹æ³•,å¹¶å°†å…¶æ›´åä¸ºpost</span></span><br><span class="line">    <span class="comment">#æ¨¡æ¿è‡ªå¸¦çš„createæ–¹æ³•æ‰€è·å¾—çš„request.dataå¹¶ä¸æ˜¯è¡¨å•ç›´æ¥æäº¤çš„æ•°æ®,å› ä¸ºä¸ªäººåŸå› (å…¶å®å°±æ˜¯æ‡’)æˆ‘å°†request.dataæ–¹æ³•æ”¹æ‰,æ”¹ä¸ºä½¿ç”¨è¡¨å•çš„æ–¹å¼è·å–æ•°æ®,ç„¶åå­˜å‚¨åˆ°ä¸€ä¸ªå­—å…¸ä¹‹ä¸­,</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„å­—å…¸</span></span><br><span class="line">        a_dict = &#123;&#125;</span><br><span class="line">        <span class="comment"># è·å–ä¸Šä¼ çš„æ–‡ä»¶,å¹¶å­˜å‚¨åˆ°åˆ›å»ºçš„å­—å…¸ä¸­å»</span></span><br><span class="line">        a_dict[<span class="string">'name'</span>] = request.POST.get(<span class="string">'name'</span>)</span><br><span class="line">        a_dict[<span class="string">'img'</span>] = request.FILES.get(<span class="string">'img'</span>)</span><br><span class="line">        <span class="comment"># æœ€åå¾—åˆ°çš„,æ˜¯è¿™æ ·ä¸€ä¸ªé›†åˆ</span></span><br><span class="line">        <span class="comment"># &lt; QueryDict: &#123;'name': ['å°å°'], 'img': ['C:\\fakepath\\003.png']&#125; &gt;</span></span><br><span class="line">        print(request.GET)</span><br><span class="line">        <span class="comment"># åˆ›å»ºåºåˆ—åŒ–å™¨å¯¹è±¡,å°†åºŠæ¶ä½ çš„å­—å…¸ä½œä¸ºdataæ”¾å…¥åºåˆ—åŒ–å™¨</span></span><br><span class="line">        serializer = self.get_serializer(data=a_dict)</span><br><span class="line">        print(serializer.is_valid())</span><br><span class="line">        <span class="comment"># createæ–¹æ³•åŸç”Ÿçš„ä½¿ç”¨æ–¹æ³•,è½¬åˆ°ä¸‹ä¸€ä¸ªç±»æ–¹æ³•ä¸­</span></span><br><span class="line">        self.perform_create(serializer)</span><br><span class="line">        headers = self.get_success_headers(serializer.data)</span><br><span class="line">        <span class="comment"># å°†æœ€ç»ˆç»“æœè¿”å›å›å»,ä¸éœ€è¦ä¿®æ”¹</span></span><br><span class="line">        <span class="keyword">return</span> Response(serializer.data, status=status.HTTP_201_CREATED, headers=headers)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perform_create</span><span class="params">(self, serializer)</span>:</span></span><br><span class="line">        <span class="comment"># å¯¹åºåˆ—åŒ–å™¨ç»“æœè¿›è¡Œåˆ¤æ–­,è¿™é‡ŒåŠ ä¸åŠ éƒ½å¯ä»¥,ä¹‹æ‰€ä»¥åŠ ä¸Šè¿™å±‚åˆ¤æ–­,åªæ˜¯æˆ‘åœ¨ä¹¦å†™è¿‡ç¨‹ä¸­,ä¸ºäº†ç¡®ä¿ç»“æ„å®Œæ•´,å¹¶ä¸”èƒ½å¤Ÿåœ¨æ¯ä¸€ä¸ªä½ç½®è¿›è¡Œåˆ¤æ–­,ç¡®å®šbugä½ç½®è€Œä¹¦å†™çš„</span></span><br><span class="line">        <span class="comment">#å½“åºåˆ—åŒ–é€šè¿‡æ—¶,æ‰§è¡Œsave</span></span><br><span class="line">        <span class="keyword">if</span> serializer.is_valid(raise_exception=<span class="literal">True</span>):</span><br><span class="line">            serializer.save()</span><br><span class="line">        <span class="comment"># å½“åºåˆ—åŒ–æœªé€šè¿‡æ—¶,å°†ä¼šæ‰§è¡Œä»¥ä¸‹æ•°æ®</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'æ•°æ®æ— æ•ˆ'</span>,serializer.data)</span><br><span class="line">            <span class="keyword">return</span> Response(serializer.data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_success_headers</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">'Location'</span>: str(data[api_settings.URL_FIELD_NAME])&#125;</span><br><span class="line">        <span class="keyword">except</span> (TypeError, KeyError):</span><br><span class="line">            <span class="keyword">return</span> &#123;&#125;</span><br></pre></td></tr></table></figure></div>

<p>ä»¥ä¸‹æ˜¯åºåˆ—åŒ–å™¨éƒ¨åˆ†:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentsSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = imageInfo</span><br><span class="line">        fields = <span class="string">'__all__'</span></span><br></pre></td></tr></table></figure></div>

<p>å¹³å¹³æ— å¥‡çš„åºåˆ—åŒ–å™¨,æ²¡æœ‰æ·»åŠ ä»€ä¹ˆé¢å¤–çš„é…ç½®è¦æ±‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯,åœ¨æ•°æ®åº“ä¸­æˆ‘å¹¶ä¸æ˜¯ä½¿ç”¨çš„imageFields,è€Œæ˜¯ä½¿ç”¨äº†å…¼å®¹æ€§æ„Ÿè§‰æ›´é«˜çš„filefield</p>
<p>ä¸‹é¢æ˜¯æ•°æ®åº“é…ç½®:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">upload_to</span><span class="params">(instance, fielname)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'/'</span>.join([settings.MEDIA_ROOT, instance.user_name, fielname])</span><br><span class="line"><span class="comment">#ä»¥ä¸Šä»£ç æ˜¯è‡ªå·±é‡å†™çš„æ–‡ä»¶ä¸‹è½½æ¨¡å—,å·²å¼ƒä¹‹ä¸ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">imageInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    name = models.CharField(max_length=<span class="number">50</span>)</span><br><span class="line">    img = models.FileField(upload_to=<span class="string">''</span>)</span><br><span class="line">    <span class="comment"># å¿…å¤‡å‚æ•°,upload</span></span><br><span class="line">    <span class="comment"># å¦‚æœä½ ä¸éœ€è¦å†è®¾å®šå¥½çš„ä¸‹è½½è·¯å¾„ä¸­å†æ¬¡å‡†å¤‡ä¸€ä¸ªæ–‡ä»¶å¤¹è¿›è¡Œæ–‡ä»¶å­˜å‚¨,å¯ä»¥ç›´æ¥ä¸ºç©º,å³: upload=''</span></span><br><span class="line">    <span class="comment"># å½“ç„¶,åœ¨ä½¿ç”¨ä¹‹å‰,éœ€è¦å‡†å¤‡å¥½MEDIA_URLä»¥åŠMEDIA_ROOT,å¦‚æœæƒ³è¦åœ¨ç½‘é¡µä¸­èƒ½ç›´æ¥é€šè¿‡ç½‘å€è¿›è¡Œè¹„ç‰‡æŸ¥çœ‹,éœ€è¦é…ç½®å¥½meidaè·¯ç”±</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.name</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'imageinfo'</span></span><br></pre></td></tr></table></figure></div>

<p>ä»¥ä¸‹æ˜¯è·¯ç”±é…ç½®:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">re_path(<span class="string">'media/(?P&lt;path&gt;.*)'</span>,serve,&#123;<span class="string">'document_root'</span>:settings.MEDIA_ROOT&#125;),</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#settingæ–‡ä»¶é…ç½®</span></span><br><span class="line"></span><br><span class="line">MEDIA_URL = <span class="string">'static/media/'</span></span><br><span class="line">MEDIA_ROOT = os.path.join(BASE_DIR, <span class="string">'static\media'</span>)</span><br></pre></td></tr></table></figure></div>

<p>åœ¨å®Œæˆä¸Šè¿°çš„ä»£ç ä¹‹å,åªéœ€è¦é…ç½®å¥½æ¨¡æ¿æ–‡ä»¶å³å¯,æ­£å¸¸çš„formè¡¨å•çš„æäº¤æ–¹æ³•,åå°çš„ä»£ç å°†ä¼šè‡ªè¡Œå¯¹è·å¾—çš„æ•°æ®è¿›è¡Œè§£æå­˜å‚¨</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFæ•°æ®åˆ†é¡µå™¨</title>
    <url>/blog/Django/Django_id_05.html</url>
    <content><![CDATA[<h2 id="åˆ†é¡µå™¨ç±»ä¹¦å†™"><a href="#åˆ†é¡µå™¨ç±»ä¹¦å†™" class="headerlink" title="åˆ†é¡µå™¨ç±»ä¹¦å†™"></a>åˆ†é¡µå™¨ç±»ä¹¦å†™</h2><a id="more"></a>
<ol>
<li><pre><code class="python"><span class="comment"># åºŸè¯ä¸å¤šè¯´,ç›´æ¥ä¸Šä»£ç </span>
<span class="keyword">from</span> rest_framework <span class="keyword">import</span> pagination

<span class="class"><span class="keyword">class</span> <span class="title">PaginationStudents</span><span class="params">(pagination.PageNumberPagination)</span>:</span>
    page_size = <span class="number">5</span>    
    <span class="comment"># åœ¨ä¸ä¼ å…¥page_sizeå‚æ•°æ—¶çš„é»˜è®¤é•¿åº¦</span>
    page_size_query_param = <span class="string">'size'</span>
    <span class="comment"># è®¾å®šåœ¨ä½¿ç”¨urlä¼ é€’å‚æ•°æ—¶æ¯é¡µå±•ç¤ºæ•°é‡çš„å‚æ•°å</span>
    page_query_param = <span class="string">'page'</span>
    <span class="comment"># è®¾å®šåœ¨ä½¿ç”¨urlä¼ é€’å‚æ•°æ—¶å±•ç¤ºçš„é¡µæ•°çš„å‚æ•°å</span>
    max_page_size = <span class="number">5</span>
    <span class="comment"># è®¾å®šæ¯é¡µçš„æœ€å¤§å±•ç¤ºæ•°é‡</span>

</code></pre>
</li>
</ol>
<p>   #æ³¨æ„,åœ¨ä½¿ç”¨åˆ†é¡µçš„æ—¶å€™,å¯ä»¥ä¸ä¼ å…¥æ¯é¡µå±•ç¤ºæ•°é‡,é»˜è®¤å°†ä¼šä½¿ç”¨è®¾å®šå¥½çš„page_size<br>   <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HASKELL"><figure class="iseeu highlight /haskell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> åˆ›å»ºå¥½åˆ†é¡µå™¨ç±»ä¹‹å,è¿›è¡Œä½¿ç”¨</span><br><span class="line"></span><br><span class="line">   ```python</span><br><span class="line">   from rest_framework.views <span class="keyword">import</span> ModelAPIView</span><br><span class="line"><span class="class">   <span class="keyword">class</span> <span class="type">MyPaginations</span>(<span class="type">ModelAPIView</span>):</span></span><br><span class="line"><span class="class">       queryset = <span class="type">Students</span>.objects.all()</span></span><br><span class="line"><span class="class">   	serializer_class = <span class="type">MySerializers</span></span></span><br><span class="line"><span class="class">       pagination_class = <span class="type">PaginationStudents</span></span></span><br></pre></td></tr></table></figure></div></p>
<ol start="3">
<li><p>ä½¿ç”¨æ—¶çš„ä¼ å‚æ–¹å¼</p>
<ul>
<li><pre><code>127.0.0.1/api/students5/?page=1&amp;size=5

pageä¸ºé¡µç 
sizeä¸ºå•é¡µæ˜¾ç¤ºçš„æœ€å¤§æ•°é‡
</code></pre></li>
</ul>
</li>
</ol>
<p>â€‹    </p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>vueè·¯ç”±é…ç½®</title>
    <url>/blog/Vue/Vue_id_04.html</url>
    <content><![CDATA[<h2 id="é…ç½®vueè·¯ç”±"><a href="#é…ç½®vueè·¯ç”±" class="headerlink" title="é…ç½®vueè·¯ç”±"></a>é…ç½®vueè·¯ç”±</h2><a id="more"></a>
<ol>
<li><h2 id="ç¬¬ä¸€æ­¥"><a href="#ç¬¬ä¸€æ­¥" class="headerlink" title="ç¬¬ä¸€æ­¥"></a>ç¬¬ä¸€æ­¥</h2><ul>
<li><p>cd ./vueproject/src/router</p>
</li>
<li><p>è¿›å…¥åˆ°è·¯ç”±æ–‡ä»¶å¤¹ä¸­,æ‰“å¼€index.jsæ–‡ä»¶</p>
</li>
<li><p>åœ¨æ–‡ä»¶ä¸­å¯¼å…¥è®¾å®šå¥½çš„Vueè·¯ç”±æ–‡ä»¶</p>
<ul>
<li>import User from â€˜../components/Userâ€™</li>
<li>è¿™é‡Œå¯ä»¥é€šè¿‡è¾“å…¥vueæ–‡ä»¶åçš„æ–¹å¼è¿›è¡Œå¿«æ·ç¼–å†™</li>
</ul>
</li>
<li><p>åœ¨è·¯ç”±æ•°ç»„ä¸­æ³¨å†Œè·¯ç”±</p>
<ul>
<li><pre><code class="javascript">routes: [
    {
        path:<span class="string">'/user'</span>,
        name: <span class="string">'User'</span>,
        component:User
    }
]
&lt;!--ï¿¼<span class="number">0</span>--&gt;
&lt;router-link to=<span class="string">'/user'</span>&gt;user&lt;router-link&gt;
&lt;!--ï¿¼<span class="number">1</span>--&gt;
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>æ¸²æŸ“:</p>
<p>ä½¿ç”¨æ¨¡æ¿è¯­æ³•,å¯¹ä¼ é€’è¿‡æ¥çš„å‚æ•°è¿›è¡Œæå–</p>


]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºvueçš„é…ç½®</title>
    <url>/blog/Vue/Vue_id_09.html</url>
    <content><![CDATA[<h2 id="Vueé…ç½®"><a href="#Vueé…ç½®" class="headerlink" title="Vueé…ç½®"></a>Vueé…ç½®</h2><a id="more"></a>


<ol>
<li><h3 id="åœ¨ç”µè„‘ä¸­å®‰è£…node-js"><a href="#åœ¨ç”µè„‘ä¸­å®‰è£…node-js" class="headerlink" title="åœ¨ç”µè„‘ä¸­å®‰è£…node.js"></a>åœ¨ç”µè„‘ä¸­å®‰è£…node.js</h3><ul>
<li>â€¦â€¦â€¦..çœç•¥</li>
</ul>
</li>
<li><h3 id="ä½¿ç”¨node-jså®‰è£…è„šæ‰‹æ¶"><a href="#ä½¿ç”¨node-jså®‰è£…è„šæ‰‹æ¶" class="headerlink" title="ä½¿ç”¨node.jså®‰è£…è„šæ‰‹æ¶"></a>ä½¿ç”¨node.jså®‰è£…è„šæ‰‹æ¶</h3><ul>
<li><pre><code>npm install -g vue-cli
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">3.</span> ### æŸ¥çœ‹vueç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">   -</span><br></pre></td></tr></table></figure></div>
vue -V
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4.</span> ### vueä¸‹è½½æ¢æº</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     npm --registry https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line">     #ä¸´æ—¶ä½¿ç”¨</span><br></pre></td></tr></table></figure></div></code></pre></li>
<li><pre><code class="python">npm config set registry https://registry.npm.taobao.org
<span class="comment">#æŒä¹…ä½¿ç”¨</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">5.</span> ### åˆ›å»ºä¸€ä¸ªæ–°çš„vueå·¥ç¨‹</span><br><span class="line"></span><br><span class="line">   - ```cmd</span><br><span class="line">     vue init webpack æ–‡ä»¶å</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><h3 id="è¿è¡Œvueå·¥ç¨‹"><a href="#è¿è¡Œvueå·¥ç¨‹" class="headerlink" title="è¿è¡Œvueå·¥ç¨‹"></a>è¿è¡Œvueå·¥ç¨‹</h3><ul>
<li><pre><code>vue run dev
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">7.</span> ### åˆ é™¤node_modules</span><br><span class="line"></span><br><span class="line">   -</span><br></pre></td></tr></table></figure></div>
npm install rimraf -g
rimraf node_modules</code></pre></li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºå“ˆå¸ŒåŠ å¯†ç®—æ³•</title>
    <url>/blog/Python/Python_id_02.html</url>
    <content><![CDATA[<h2 id="å“ˆå¸ŒåŠ å¯†"><a href="#å“ˆå¸ŒåŠ å¯†" class="headerlink" title="å“ˆå¸ŒåŠ å¯†"></a>å“ˆå¸ŒåŠ å¯†</h2><a id="more"></a>
<ul>
<li><p>è¯¥åŠ å¯†ç®—æ³•å¯¹äºç›¸åŒçš„å­—ç¬¦ä¸²å°†ä¼šæ˜¯ä¸€è‡´çš„,åŒæ—¶,è¿™ç§åŠ å¯†æ˜¯å•å‘çš„,æ— æ³•åå‘ç¼–è¯‘å‡ºæ¥,ä¹Ÿå°±æ˜¯è¯´,æƒ³è¦å¯¹ åŠ å¯†åçš„æ•°æ®è¿›è¡Œæ¯”è¾ƒ,ä½ éœ€è¦å°†è¦æ¯”è¾ƒçš„æ•°æ®å…ˆè¿›è¡ŒåŠ å¯†,ç„¶åæ‰èƒ½è¿›è¡Œæ¯”è¾ƒ,å½“ä¸¤è€…å†…å®¹ä¸€è‡´æ—¶,æ‰ä¼šé€šè¿‡éªŒè¯</p>
</li>
<li><p>å½“ä½¿ç”¨åœ¨ç™»é™†é¡µé¢æ—¶,å…¶æµç¨‹æ—¶è¿™æ ·çš„:è¾“å…¥å¯†ç ===&gt;è¿›è¡ŒåŠ å¯†===&gt;è°ƒç”¨æ•°æ®åº“===&gt;è¿›è¡Œæ¯”è¾ƒ===&gt;éªŒè¯é€šè¿‡===&gt;è¿”å›sessionä¿¡æ¯,è¿›å…¥ç™»é™†çŠ¶æ€</p>
</li>
<li><pre><code class="python"><span class="comment">#å¯¼å…¥å“ˆå¸ŒåŠ å¯†åŒ…</span>
<span class="comment">#åœ¨py3ä¹‹å,md5åŒ…è¢«ç§»é™¤,å…¶åŠŸèƒ½è¢«æ•´åˆåˆ°hashlibåŒ…ä¸­</span>
<span class="keyword">import</span> hashlib
<span class="comment">#åˆ›å»ºä¸€ä¸ªæ–°çš„å“ˆå¸ŒåŠ å¯†å¯¹è±¡</span>
h1 = hashlib.md5()
<span class="comment">#åœ¨å¯¹è±¡ä¸­æ·»åŠ è¦åŠ å¯†çš„å­—ç¬¦ä¸²,è¯¥å­—ç¬¦ä¸²éœ€è¦å…ˆè½¬åŒ–æˆäºŒè¿›åˆ¶æ ¼å¼,å³utf8</span>
h1.update(str.encode(encoding=<span class="string">'utf8'</span>))
<span class="comment">#æŸ¥çœ‹è½¬ç åçš„æ•°æ®,hexdigestä¸ºåå…­è¿›åˆ¶æ¨¡å¼</span>
print(h1.hexdigest())
<span class="comment">#æŸ¥çœ‹è½¬ç åçš„æ•°æ®,digestä¸ºäºŒè¿›åˆ¶æ¨¡å¼</span>
print(h1.digest())</code></pre>
</li>
<li><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯,æ¯æ¬¡è¿›è¡ŒåŠ å¯†,éƒ½è¦é‡æ–°åˆ›å»ºä¸€ä¸ªå“ˆå¸Œå¯¹è±¡,ä¹Ÿå³æ˜¯é‡æ–°ä¹¦å†™ä¸€é==&gt;h1 = hashlib.md5()</p>
</li>
<li><p>å¦‚æœä¸è¿›è¡Œé‡æ–°å®šä¹‰çš„è¯,å½“åŠ å¯†æ—¶é‡åˆ°ç›¸åŒçš„å­—ç¬¦ä¸²,å¦‚â€hello worldâ€è¿™æ ·çš„å­—ç¬¦ä¸²,å°†ä¼šå‡ºç°â€hello worldhello worldâ€è¿™æ ·çš„å åŠ å½¢å¼,æ‰€ä»¥éœ€è¦é‡æ–°å®šä¹‰</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoæ•°æ®åº“å…³ç³»å±æ€§</title>
    <url>/blog/Django/Django_id_19.html</url>
    <content><![CDATA[<h2 id="æ•°æ®åº“å…³ç³»å±æ€§"><a href="#æ•°æ®åº“å…³ç³»å±æ€§" class="headerlink" title="æ•°æ®åº“å…³ç³»å±æ€§"></a>æ•°æ®åº“å…³ç³»å±æ€§</h2><a id="more"></a>
<ul>
<li><h2 id="ä¸€å¯¹å¤šå…³ç³»"><a href="#ä¸€å¯¹å¤šå…³ç³»" class="headerlink" title="ä¸€å¯¹å¤šå…³ç³»"></a>ä¸€å¯¹å¤šå…³ç³»</h2><ul>
<li><p>ForeignKey</p>
</li>
<li><p>å¤–é”®ä¸“å±,ä¸€å¯¹å¤šå…³ç³»è®¾å®š,é€šå¸¸æƒ…å†µä¸‹,è¿™ä¸ªå±æ€§è®¾ç½®åœ¨å¤šç±»å±æ€§ä¸­,å…³è”ä¸€ç±»å±æ€§</p>
</li>
<li><pre><code class="python">news_type = models.ForeignKey(<span class="string">'NewsTypeInfo'</span>,on_delete=models.CASCADE)
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">- ## å¤šå¯¹å¤šå…³ç³»</span><br><span class="line"></span><br><span class="line">  - ManyToManyField</span><br><span class="line"></span><br><span class="line">  - å¤šå¯¹å¤šå…³ç³»å»ºç«‹å­—æ®µ,è¿™ä¸ªå­—æ®µå¯ä»¥å†™åœ¨ä»»æ„ä¸€ä¸ªé‡Œé¢,å¹¶ä¸å½±å“ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    news_type = models.ManyToManyField('NewsInfo')</span><br></pre></td></tr></table></figure>


</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><h2 id="ä¸€å¯¹ä¸€å…³ç³»"><a href="#ä¸€å¯¹ä¸€å…³ç³»" class="headerlink" title="ä¸€å¯¹ä¸€å…³ç³»"></a>ä¸€å¯¹ä¸€å…³ç³»</h2><ul>
<li>OneToOneField</li>
</ul>
</li>
</ul>
<h2 id="é€šè¿‡æ¨¡å‹ç±»å®ç°å…³è”æŸ¥è¯¢è¯­å¥"><a href="#é€šè¿‡æ¨¡å‹ç±»å®ç°å…³è”æŸ¥è¯¢è¯­å¥" class="headerlink" title="é€šè¿‡æ¨¡å‹ç±»å®ç°å…³è”æŸ¥è¯¢è¯­å¥:"></a>é€šè¿‡æ¨¡å‹ç±»å®ç°å…³è”æŸ¥è¯¢è¯­å¥:</h2><p>â€‹    </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> Two.models <span class="keyword">import</span> *</span><br><span class="line">b = HeroInfo.objects.filter(hbook__id=<span class="number">1</span>)</span><br><span class="line"><span class="comment">#é€šè¿‡ä¸€å¯¹å¤šå…³ç³»è·å–å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">#å…³ç³»å­—æ®µåŠ ä¸ŠåŒä¸‹åˆ’çº¿åŠ ä¸Šå¯¹åº”è¡¨ä¸­çš„å­—æ®µå³å¯è¿›è¡ŒæŸ¥è¯¢,ä½†éœ€è¦æ³¨æ„</span></span><br><span class="line">b = HeroInfo.object.get(id=<span class="number">1</span>)</span><br><span class="line">b.hbook</span><br><span class="line"><span class="comment">#ä»¥ä¸Šä¸¤ç§æ–¹æ³•éƒ½èƒ½è¿›è¡ŒæŸ¥è¯¢,ä½†æ˜¯ç¬¬ä¸€ç§æ–¹æ³•æŸ¥è¯¢å‡ºæ¥çš„ç»“æœæ˜¯ä¸€ä¸ªæŸ¥è¯¢é›†,ç¬¬äºŒç§æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br></pre></td></tr></table></figure></div>

<p>åœ¨æ²¡æœ‰å…³ç³»çš„æƒ…å†µä¸‹æŸ¥è¯¢çš„è¯,å°±ä¸èƒ½ä½¿ç”¨å…³ç³»å±æ€§å­—æ®µè¿›è¡ŒæŸ¥è¯¢,è¿™ä¸ªè¿™æ—¶å€™,å°±éœ€è¦ç”¨æ¨¡å‹ç±»çš„åå­—è¿›è¡ŒæŸ¥è¯¢,ç”¨æ¨¡å‹ç±»çš„åå­—ä»£æ›¿å…³ç³»å±æ€§å­—æ®µçš„åå­—</p>
<h2 id="è‡ªå…³è”å±æ€§å­—æ®µæŸ¥è¯¢"><a href="#è‡ªå…³è”å±æ€§å­—æ®µæŸ¥è¯¢" class="headerlink" title="è‡ªå…³è”å±æ€§å­—æ®µæŸ¥è¯¢:"></a>è‡ªå…³è”å±æ€§å­—æ®µæŸ¥è¯¢:</h2><h3 id="è®¾å®šè‡ªå…³è”å±æ€§å­—æ®µ"><a href="#è®¾å®šè‡ªå…³è”å±æ€§å­—æ®µ" class="headerlink" title="è®¾å®šè‡ªå…³è”å±æ€§å­—æ®µ:"></a>è®¾å®šè‡ªå…³è”å±æ€§å­—æ®µ:</h3><p>â€‹            </p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AreaInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">	a_title = models.CharField(max_length=<span class="number">20</span>)</span><br><span class="line">    <span class="comment">#è®¾ç½®å…³è”å±æ€§å­—æ®µ,å…³è”è‡ªèº«,å³self</span></span><br><span class="line">    <span class="comment">#è¿™ä¸ªå­—æ®µå³æ„å‘³ç€ä¸è‡ªèº«å…³è”</span></span><br><span class="line">    a_parent = models.ForeignKey(<span class="string">'self'</span>,on_delete=models.CASCADE,null=<span class="literal">True</span>,blank=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></div>

<h4 id="è‡ªå…³è”å±äºç‰¹æ®Šçš„ä¸€å¯¹å¤š"><a href="#è‡ªå…³è”å±äºç‰¹æ®Šçš„ä¸€å¯¹å¤š" class="headerlink" title="è‡ªå…³è”å±äºç‰¹æ®Šçš„ä¸€å¯¹å¤š"></a>è‡ªå…³è”å±äºç‰¹æ®Šçš„ä¸€å¯¹å¤š</h4><h4 id="åœ¨æŸ¥è¯¢æ—¶éµå¾ªä¸€å¯¹å¤šçš„æŸ¥è¯¢æ–¹å¼"><a href="#åœ¨æŸ¥è¯¢æ—¶éµå¾ªä¸€å¯¹å¤šçš„æŸ¥è¯¢æ–¹å¼" class="headerlink" title="åœ¨æŸ¥è¯¢æ—¶éµå¾ªä¸€å¯¹å¤šçš„æŸ¥è¯¢æ–¹å¼"></a>åœ¨æŸ¥è¯¢æ—¶éµå¾ªä¸€å¯¹å¤šçš„æŸ¥è¯¢æ–¹å¼</h4><p>ç”±ä¸€æŸ¥å¤šæ—¶ä½¿ç”¨å­—æ®µå__set.all()è¿›è¡ŒæŸ¥è¯¢</p>
<p>ç”±å¤šæŸ¥ä¸€æ—¶ä½¿ç”¨å­—æ®µåæŸ¥è¯¢</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸­cookieå’Œsession</title>
    <url>/blog/Django/Django_id_22.html</url>
    <content><![CDATA[<h2 id="COOKIES"><a href="#COOKIES" class="headerlink" title="COOKIES"></a>COOKIES</h2><a id="more"></a>
<ol>
<li><p>è®¾ç½®cookie</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„HttpResponseå¯¹è±¡</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">response = HttpResponse(<span class="string">'è®¾ç½®cookie'</span>)</span><br><span class="line">response.set_cookie(<span class="string">'num'</span>,<span class="number">1</span>,max_age=<span class="number">10</span>*<span class="number">24</span>*<span class="number">3600</span>)</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>è·å–cookie</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">num = request.COOKIES[<span class="string">'num'</span>]</span><br><span class="line"><span class="keyword">return</span> HttpResponse(num)</span><br></pre></td></tr></table></figure></div>
</li>
</ol>
</li>
<li><p>è®¾ç½®è¿‡æœŸæ—¶é—´</p>
<ol>
<li><p>max_age,è®¾ç½®å•ä½ä¸ºç§’</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">response.set_cookie(<span class="string">'num'</span>,<span class="number">1</span>,max_age=<span class="number">10</span>*<span class="number">24</span>*<span class="number">3600</span>)</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>exprice,è®¾ç½®è¾ƒä¸ºå¤æ‚,ä½†æ˜¯é€‚åˆé•¿æœŸè®¾ç½®</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse,HttpResponse</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime,timedelta</span><br><span class="line">response.set_cookie(<span class="string">'num'</span>,<span class="number">1</span>,expires=datetime.now() + timedelta(days=<span class="number">10</span>))</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
</li>
</ol>
<hr>
<h2 id="ç›¸è¾ƒäºcookie-sessionå®‰å…¨æ€§è¾ƒé«˜-åœ¨ä¿å­˜ä¸€äº›é‡è¦æ•°æ®æ—¶-æ›´é€‚åˆä½¿ç”¨sessionæ¥è¿›è¡Œä¿å­˜-å¦‚ç”¨æˆ·çš„å¸å·-å¯†ç -ç§äººä¿¡æ¯ç­‰"><a href="#ç›¸è¾ƒäºcookie-sessionå®‰å…¨æ€§è¾ƒé«˜-åœ¨ä¿å­˜ä¸€äº›é‡è¦æ•°æ®æ—¶-æ›´é€‚åˆä½¿ç”¨sessionæ¥è¿›è¡Œä¿å­˜-å¦‚ç”¨æˆ·çš„å¸å·-å¯†ç -ç§äººä¿¡æ¯ç­‰" class="headerlink" title="ç›¸è¾ƒäºcookie,sessionå®‰å…¨æ€§è¾ƒé«˜,åœ¨ä¿å­˜ä¸€äº›é‡è¦æ•°æ®æ—¶,æ›´é€‚åˆä½¿ç”¨sessionæ¥è¿›è¡Œä¿å­˜,å¦‚ç”¨æˆ·çš„å¸å·,å¯†ç ,ç§äººä¿¡æ¯ç­‰"></a>ç›¸è¾ƒäºcookie,sessionå®‰å…¨æ€§è¾ƒé«˜,åœ¨ä¿å­˜ä¸€äº›é‡è¦æ•°æ®æ—¶,æ›´é€‚åˆä½¿ç”¨sessionæ¥è¿›è¡Œä¿å­˜,å¦‚ç”¨æˆ·çš„å¸å·,å¯†ç ,ç§äººä¿¡æ¯ç­‰</h2><h2 id="sessions"><a href="#sessions" class="headerlink" title="sessions"></a>sessions</h2><ol>
<li><p>è®¾ç½®session</p>
<ol>
<li><pre><code class="python"><span class="comment">#è®¾ç½®session</span>
<span class="function"><span class="keyword">def</span> <span class="title">set_session</span><span class="params">(request)</span>:</span>
    request.session[<span class="string">'username'</span>] = <span class="string">'root'</span>
    request.session[<span class="string">'age'</span>] = <span class="string">'000000'</span>
    <span class="keyword">return</span> HttpResponse(<span class="string">'è®¾ç½®æˆåŠŸ'</span>)
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PGSQL"><figure class="iseeu highlight /pgsql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> è·å–<span class="keyword">session</span></span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> ```python</span><br><span class="line">      #è·å–<span class="keyword">session</span></span><br><span class="line">      def get_session(request):</span><br><span class="line">          username = request.<span class="keyword">session</span>[<span class="string">'username'</span>]</span><br><span class="line">          age = request.<span class="keyword">session</span>[<span class="string">'age'</span>]</span><br><span class="line">          <span class="keyword">return</span> HttpResponse(username + <span class="string">':'</span> + str(age))</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ol>
</li>
<li><p>sessionä½¿ç”¨æ–¹æ³•</p>
<ol>
<li><p>ç›´æ¥ä½¿ç”¨å­—å…¸çš„é”®å€¼å¯¹è·å–æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session[<span class="string">'cookieå'</span>]</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>ä½¿ç”¨getæ–¹æ³•è·å–,å¯ä»¥è®¾ç½®é»˜è®¤å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.get(<span class="string">'cookieå,default="é»˜è®¤å€¼")</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>clear,åˆ é™¤sessionä¸­ä¿å­˜çš„æ•°æ®,ä½†æ˜¯åˆ é™¤æ‰çš„åªæ˜¯å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.clear()</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>flash,åˆ é™¤æ•´æ¡æ•°æ®,å®Œå…¨åˆ é™¤æ‰€æœ‰æ•°æ®,æ•°æ®è¡¨å®Œå…¨æ¸…é™¤</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.flash()</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>del    åˆ é™¤ç›®æ ‡æ•°æ®çš„æ‰€æœ‰å†…å®¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">del</span> request.session[<span class="string">'cookie'</span>]</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>è®¾ç½®sessionè¿‡æœŸæ—¶é—´</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.set_expiry(value)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>å½“æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ—¶å€™,é»˜è®¤å°†ä¼šåœ¨ä¸¤å‘¨ä¹‹åè¿‡æœŸ</li>
<li>å½“valueå€¼ä¸º0çš„æ—¶å€™,å°†ä¼šåœ¨å…³é—­æµè§ˆå™¨çš„æ—¶å€™è¿‡æœŸ</li>
<li>å½“valueå¤§äº0çš„æ—¶å€™,å°†ä¼šåœ¨valueç§’ä¹‹åè¿‡æœŸ</li>
</ul>
</li>
<li><p>has_key   åˆ¤æ–­sessionä¸­æœ‰æ²¡æœ‰å¯¹åº”çš„cookie</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.has_key(<span class="string">'username'</span>)</span><br></pre></td></tr></table></figure></div>



</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoè§†å›¾ç®¡ç†</title>
    <url>/blog/Django/Django_id_27.html</url>
    <content><![CDATA[<h2 id="Djangoè§†å›¾ç®¡ç†"><a href="#Djangoè§†å›¾ç®¡ç†" class="headerlink" title="Djangoè§†å›¾ç®¡ç†"></a>Djangoè§†å›¾ç®¡ç†</h2><h2 id="è§†å›¾å‡½æ•°åœ¨views-pyæ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰"><a href="#è§†å›¾å‡½æ•°åœ¨views-pyæ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰" class="headerlink" title="#è§†å›¾å‡½æ•°åœ¨views.pyæ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰"></a>#è§†å›¾å‡½æ•°åœ¨views.pyæ–‡ä»¶ä¸­è¿›è¡Œå®šä¹‰</h2><h2 id="1-å®šä¹‰è§†å›¾å‡½æ•°"><a href="#1-å®šä¹‰è§†å›¾å‡½æ•°" class="headerlink" title="1).å®šä¹‰è§†å›¾å‡½æ•°"></a>1).å®šä¹‰è§†å›¾å‡½æ•°</h2><p>â€‹    <a id="more"></a></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'è§†å›¾å‡½æ•°æˆåŠŸ'</span>)</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="2-é…ç½®è·¯ç”±"><a href="#2-é…ç½®è·¯ç”±" class="headerlink" title="2).é…ç½®è·¯ç”±"></a>2).é…ç½®è·¯ç”±</h2><ul>
<li><p>å¯¼å…¥è·¯ç”±æ¨¡å—</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path
<span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> include
urlatterns = [
    path(<span class="string">''</span>,include(<span class="string">'è·¯å¾„'</span>))
]
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- è®¾å®šå¥½æ€»çš„è·¯ç”±ä¹‹åå¼€å§‹è®¾å®šä»å±çš„è·¯ç”±</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  <span class="keyword">from</span> django.urls <span class="keyword">import</span> re_path</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">from</span> First <span class="keyword">import</span> views</span><br><span class="line">  #å¯¼å…¥viewsè§†å›¾å‡½æ•°æ–‡ä»¶</span><br><span class="line">  urlpatterns = [</span><br><span class="line">      #ç»™è§†å›¾å‡½æ•°ç»‘å®šurl,</span><br><span class="line">      re_path(r<span class="string">'index/'</span>,views.index)</span><br><span class="line">      ###################################</span><br><span class="line">      #ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨</span><br><span class="line">      path(<span class="string">'index/'</span>,views.index)</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>pathé…ç½®æ–¹æ³•ä¸éœ€è¦è€ƒè™‘è·¯ç”±åå­—åŒ¹é…çš„é—®é¢˜</p>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="3-æ„å»ºæ¨¡æ¿æ–‡ä»¶"><a href="#3-æ„å»ºæ¨¡æ¿æ–‡ä»¶" class="headerlink" title="3).æ„å»ºæ¨¡æ¿æ–‡ä»¶"></a>3).æ„å»ºæ¨¡æ¿æ–‡ä»¶</h2><hr>
<ul>
<li><p>æ„é€ æ¨¡æ¿</p>
<ul>
<li><p>åœ¨django2.2.7ä¸­,åˆ›å»ºæ–°çš„é¡¹ç›®æ—¶ä¼šè‡ªåŠ¨é…ç½®å¥½tempalteæ–‡ä»¶,åªéœ€è¦åœ¨é‡Œé¢åˆ›å»ºåº”ç”¨æ–‡ä»¶çš„æ¨¡æ¿æ–‡ä»¶å¤¹å³å¯,</p>
</li>
<li><p>æ—§ç‰ˆæœ¬ä¸­å¹¶ä¸ä¸»åŠ¨ç”Ÿæˆtemplateæ–‡ä»¶å¤¹,æ‰€ä»¥éœ€è¦è‡ªå·±åˆ›å»ºå¹¶è¿›è¡Œé…ç½®</p>
</li>
<li><p>```<br>â€˜DIRSâ€™: [os.path.join(BASE_DIR, â€˜templatesâ€™)],</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AWK"><figure class="iseeu highlight /awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- æ¨¡æ¿æ„é€ ä¸å¯¼å…¥</span><br><span class="line"></span><br><span class="line">  - åŠ è½½æ¨¡æ¿æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">    - ä»æ¨¡æ¿æ–‡ä»¶ç›®å½•è·å–htmlæ–‡ä»¶çš„å†…å®¹,å¾—åˆ°ä¸€ä¸ªæ¨¡æ¿å¯¹è±¡</span><br><span class="line">  - å®šä¹‰æ¨¡æ¿ä¸Šä¸‹æ–‡</span><br><span class="line"></span><br><span class="line">    - å‘æ¨¡æ¿æ–‡ä»¶ä¼ é€’æ•°æ®</span><br><span class="line">  - æ¨¡æ¿æ¸²æŸ“</span><br><span class="line"></span><br><span class="line">    - å¾—åˆ°ä¸€ä¸ªæ ‡å‡†çš„htmlé¡µé¢</span><br><span class="line"></span><br><span class="line">      - ```python</span><br><span class="line">        re_path(<span class="string">r'lists/(\d+)'</span>,views.lists)</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>é‡å®šå‘,è·¯ç”±ä¼ å‚æ–¹æ³•,ä½¿ç”¨æ­£åˆ™åŒ¹é…è·¯ç”±</p>
</li>
<li><pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">lists</span><span class="params">(request,bid)</span>:</span>
    books = BookInfo.objects.get(id=bid)
    heros = books.heroinfo_set.all()
    <span class="keyword">return</span> render(request,<span class="string">'FirstTemplates/lists.html'</span>,{
        <span class="string">'books'</span> : books,
        <span class="string">'heros'</span> : heros
    })</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFåˆè¯•</title>
    <url>/blog/Django/Django_id_02.html</url>
    <content><![CDATA[<h2 id="DRFåˆè¯•"><a href="#DRFåˆè¯•" class="headerlink" title="DRFåˆè¯•"></a>DRFåˆè¯•</h2><a id="more"></a>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„åºåˆ—åŒ–å™¨</p>
<ol>
<li><p>Serializeråºåˆ—åŒ–å™¨åˆ›å»º,é€šå¸¸è¿™ä¸ªåºåˆ—åŒ–å™¨æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ–°çš„æ–‡ä»¶æ‰¿è½½</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializer
<span class="keyword">from</span> .models <span class="keyword">import</span> *
<span class="class"><span class="keyword">class</span> <span class="title">StudentsSerializer</span><span class="params">(serializer.ModelSerializer)</span>:</span>
    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span>
        model = Students
        fields = <span class="string">'__all__'</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HASKELL"><figure class="iseeu highlight /haskell"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - åœ¨åˆ›å»ºåºåˆ—åŒ–å™¨çš„æ—¶å€™,éœ€è¦ç›´æ¥æˆ–è€…é—´æ¥çš„ç»§æ‰¿serializer.<span class="type">Serializer</span>è¿™ä¸ªç±»</span><br><span class="line"></span><br><span class="line">   - å½“åºåˆ—åŒ–å™¨ç»§æ‰¿è‡ªserializer.<span class="type">ModelSerializer</span>çš„æ—¶å€™,éœ€è¦åœ¨åºåˆ—åŒ–å™¨çš„æ¨¡å‹ç±»ä¸­å£°æ˜è¦ä½¿ç”¨çš„æ¨¡å‹ç±»model,ä»¥åŠè¦ä½¿ç”¨çš„å­—æ®µfields</span><br><span class="line"></span><br><span class="line">   - å½“fieldsçš„å€¼ä¸º'__all__'çš„æ—¶å€™,å°±ç›¸å½“äºå¯¹åº”ç€è¿™ä¸ªæ¨¡å‹ç±»ä¸­çš„å…¨éƒ¨å­—æ®µ</span><br><span class="line"></span><br><span class="line">   - å­—æ®µå£°æ˜</span><br><span class="line"></span><br><span class="line">     - </span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> åœ¨viewä¸­ä½¿ç”¨è¿™ä¸ªåºåˆ—åŒ–å™¨</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     from rest_framework.viewsets <span class="keyword">import</span> ModelViewSet</span><br><span class="line">     from .serializer <span class="keyword">import</span> StudentsSerializer</span><br><span class="line">     from .models <span class="keyword">import</span> *</span><br><span class="line"><span class="class">     <span class="keyword">class</span> <span class="type">StudentsAPIViews</span>(<span class="type">ModelViewSet</span>):</span></span><br><span class="line"><span class="class">         queryset = <span class="type">Students</span>.objects.all()</span></span><br><span class="line"><span class="class">         serializer = <span class="type">StudentsSerializer</span></span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>åœ¨settingsæ–‡ä»¶ä¸­æ³¨å†Œtest_frameworkåº”ç”¨</p>
<ul>
<li><pre><code class="python">INSTALLED_APPS = [
    <span class="string">'test_framework'</span>
]
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CLEAN"><figure class="iseeu highlight /clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">4.</span> è®¾ç½®test_frameworkæ¨¡å—è·¯ç”±</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     <span class="keyword">from</span> test_framework.routers <span class="keyword">import</span> DefaultRouter</span><br><span class="line">     <span class="keyword">from</span> .views <span class="keyword">import</span> StudentsAPIViews</span><br><span class="line">     urlpatterns = []</span><br><span class="line">     router = DefaultRouter()</span><br><span class="line">     router.register(<span class="string">'student'</span>,StudentsAPIViews,basename=<span class="string">'StudentsAPIViews'</span>)</span><br><span class="line">     </span><br><span class="line">     </span><br><span class="line">     urlpatterns += router.urls</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>åœ¨ä¸»è·¯ç”±ä¸­é…ç½®å¥½åº”ç”¨çš„è·¯ç”±</p>
<ul>
<li><pre><code class="python"><span class="keyword">from</span> fjango.contrib <span class="keyword">import</span> admin
<span class="keyword">from</span> django.urls <span class="keyword">import</span> path,include
urlpatterns = [
    path(<span class="string">'admin/'</span>,admin.site.urls),
    path(<span class="string">'api/'</span>,include(<span class="string">'drf_app.urls'</span>)),
]</code></pre>
</li>
</ul>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoä¸­é—´ä»¶</title>
    <url>/blog/Django/Django_id_23.html</url>
    <content><![CDATA[<h2 id="djangoä¸­é—´ä»¶"><a href="#djangoä¸­é—´ä»¶" class="headerlink" title="djangoä¸­é—´ä»¶"></a>djangoä¸­é—´ä»¶</h2><a id="more"></a>
<p>ä¸­é—´ä»¶éœ€è¦ä½¿ç”¨requestå‚æ•°çš„METAå±æ€§</p>
<ul>
<li><p>è·å–ç”¨æˆ·ipåœ°å€</p>
<ul>
<li>â€‹        å¦‚ä¸‹æ‰€ç¤º</li>
<li></li>
</ul>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">request</span><span class="selector-class">.META</span><span class="selector-attr">[<span class="string">'REMOTE_ADDR'</span>]</span></span><br></pre></td></tr></table></figure></div>



</li>
</ul>
<h2 id="è‡ªå®šä¹‰ä¸­é—´ä»¶ç±»å¯¹è®¿é—®çš„ipè¿›è¡Œé™åˆ¶-ä»è€Œå¯¹ç‰¹å®šipè¿›è¡Œå°å·å¤„ç†"><a href="#è‡ªå®šä¹‰ä¸­é—´ä»¶ç±»å¯¹è®¿é—®çš„ipè¿›è¡Œé™åˆ¶-ä»è€Œå¯¹ç‰¹å®šipè¿›è¡Œå°å·å¤„ç†" class="headerlink" title="è‡ªå®šä¹‰ä¸­é—´ä»¶ç±»å¯¹è®¿é—®çš„ipè¿›è¡Œé™åˆ¶,ä»è€Œå¯¹ç‰¹å®šipè¿›è¡Œå°å·å¤„ç†"></a>è‡ªå®šä¹‰ä¸­é—´ä»¶ç±»å¯¹è®¿é—®çš„ipè¿›è¡Œé™åˆ¶,ä»è€Œå¯¹ç‰¹å®šipè¿›è¡Œå°å·å¤„ç†</h2><ol>
<li><p>åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ä¸­é—´ä»¶æ–‡ä»¶</p>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸­é—´ä»¶é—®ä»·</p>
<ul>
<li><p>middleware.py</p>
</li>
<li><pre><code class="python"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse

<span class="class"><span class="keyword">class</span> <span class="title">BlockedIPSMiddleware</span><span class="params">(object)</span>:</span>
    EXCLUDE = [<span class="string">'192.168.1.238'</span>,<span class="string">'127.0.0.1'</span>]
    <span class="function"><span class="keyword">def</span> <span class="title">process_view</span><span class="params">(self,request,view_func,*view_args,**view_keargs)</span>:</span>
        user_ip = request.META[<span class="string">'REMOTE_ADDR'</span>]
        <span class="keyword">if</span> user_ip <span class="keyword">in</span> BlockedIPSMiddleware.EXCLUDE:
            <span class="keyword">return</span> HttpResponse(<span class="string">"æ‹’ç»è®¿é—®"</span>)
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- æ³¨æ„,<span class="number">2.0</span>ä»¥åæ— æ³•ä½¿ç”¨ä»¥ä¸Šçš„æ–¹æ³•è¿›è¡Œä¸­é—´ä»·åˆ›å»º</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  <span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line">  </span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">BlockedIPSMiddleware</span><span class="params">(MiddlewareMixin)</span>:</span></span><br><span class="line">      EXCLUDE = [<span class="string">'192.168.1.238'</span>,<span class="string">'127.0.0.1'</span>]</span><br><span class="line">      <span class="function"><span class="keyword">def</span> <span class="title">process_view</span><span class="params">(self,request,view_func,*view_args,**view_keargs)</span>:</span></span><br><span class="line">          user_ip = request.META[<span class="string">'REMOTE_ADDR'</span>]</span><br><span class="line">          <span class="keyword">if</span> user_ip <span class="keyword">in</span> BlockedIPSMiddleware.EXCLUDE:</span><br><span class="line">              <span class="keyword">return</span> HttpResponse(<span class="string">"æ‹’ç»è®¿é—®"</span>)</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
</ul>
</li>
<li><p>åˆ›å»ºå¥½ä¹‹å,å†settingæ–‡ä»¶ä¸­è¿›è¡Œä¸­é—´ä»¶æ³¨å†Œ</p>
<ul>
<li>setting.pyæ–‡ä»¶ä¸­</li>
<li>MIDDLEWARE = [è¦æ³¨å†Œçš„ä¸­é—´ä»¶å‡½æ•°è·¯å¾„]</li>
<li>è¯¥è·¯å¾„éœ€è¦ç²¾ç¡®åˆ°ä¸­é—´ä»¶å‡½æ•°ç±»</li>
</ul>
</li>
<li><p>è¿è¡Œdjangoé¡¹ç›®,å¯ä»¥çœ‹åˆ°,è¢«è®°å½•çš„å‡½æ•°å·²ç»æ— æ³•æ­£å¸¸è®¿é—®è¿™ä¸ªé¡¹ç›®äº†</p>
</li>
<li><p>ä¸­é—´ä»¶è¦†ç›–äº†é¡¹ç›®æ‰€å±æ‰€æœ‰çš„é¡µé¢</p>
</li>
</ol>
</li>
<li><p>process_exception</p>
<ol>
<li><p>è¿™ä¸ªä¸­é—´ä»¶å‡½æ•°å°†ä¼šåœ¨è§†å›¾å‡½æ•°å‡ºé”™çš„æ—¶å€™è¿›è¡Œè°ƒç”¨</p>
</li>
<li><h5 id="æ³¨æ„-è¿™ä¸ªå‡½æ•°åœ¨è¿›è¡Œè°ƒç”¨çš„æ—¶å€™-å¦‚æœå¤šä¸ªä¸­é—´ä»¶ç±»éƒ½å®šä¹‰äº†è¿™ä¸ªå‡½æ•°å¹¶ä¸”éƒ½è¿›è¡Œäº†æ³¨å†Œ-å°†ä¼šä»¥ä»ä¸‹å¾€ä¸Šçš„é¡ºåºè¿›è¡Œè°ƒç”¨"><a href="#æ³¨æ„-è¿™ä¸ªå‡½æ•°åœ¨è¿›è¡Œè°ƒç”¨çš„æ—¶å€™-å¦‚æœå¤šä¸ªä¸­é—´ä»¶ç±»éƒ½å®šä¹‰äº†è¿™ä¸ªå‡½æ•°å¹¶ä¸”éƒ½è¿›è¡Œäº†æ³¨å†Œ-å°†ä¼šä»¥ä»ä¸‹å¾€ä¸Šçš„é¡ºåºè¿›è¡Œè°ƒç”¨" class="headerlink" title="æ³¨æ„,è¿™ä¸ªå‡½æ•°åœ¨è¿›è¡Œè°ƒç”¨çš„æ—¶å€™,å¦‚æœå¤šä¸ªä¸­é—´ä»¶ç±»éƒ½å®šä¹‰äº†è¿™ä¸ªå‡½æ•°å¹¶ä¸”éƒ½è¿›è¡Œäº†æ³¨å†Œ,å°†ä¼šä»¥ä»ä¸‹å¾€ä¸Šçš„é¡ºåºè¿›è¡Œè°ƒç”¨"></a>æ³¨æ„,è¿™ä¸ªå‡½æ•°åœ¨è¿›è¡Œè°ƒç”¨çš„æ—¶å€™,å¦‚æœå¤šä¸ªä¸­é—´ä»¶ç±»éƒ½å®šä¹‰äº†è¿™ä¸ªå‡½æ•°å¹¶ä¸”éƒ½è¿›è¡Œäº†æ³¨å†Œ,å°†ä¼šä»¥ä»ä¸‹å¾€ä¸Šçš„é¡ºåºè¿›è¡Œè°ƒç”¨</h5></li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>DRFæ¡†æ¶çš„æƒé™éªŒè¯å™¨ä¸é™æµ</title>
    <url>/blog/Django/Django_id_03.html</url>
    <content><![CDATA[<h2 id="DRFæ¡†æ¶æƒé™éªŒè¯å™¨"><a href="#DRFæ¡†æ¶æƒé™éªŒè¯å™¨" class="headerlink" title="DRFæ¡†æ¶æƒé™éªŒè¯å™¨:"></a>DRFæ¡†æ¶æƒé™éªŒè¯å™¨:</h2><a id="more"></a>
<p>åŸºç¡€éªŒè¯å™¨</p>
<ol>
<li><p>drfä¸­é›†æˆäº†å…³äºæƒé™éªŒè¯çš„ä¸€äº›åŸºæœ¬æ¨¡å—,å…·ä½“å¯ä»¥åˆ†ä¸º:</p>
<p>â€‹            æ‰€æœ‰ç”¨æˆ·å‡å¯è®¿é—®â€”â€”â€”AllowAny</p>
<p>â€‹            ç™»å½•ç”¨æˆ·å¯è®¿é—®â€“-â€”â€”IsAuthenticated</p>
<p>â€‹            ä»…é™ç®¡ç†å‘˜æƒé™å¯ä»¥è®¿é—®â€”â€”â€“IsAdminUser</p>
</li>
<li><p>å…³äºåŸºæœ¬æƒé™éªŒè¯æ¨¡å—çš„ä½¿ç”¨æ–¹æ³•</p>
<ul>
<li><p>è¯ä¸å¤šè¯´,ä¸Šä»£ç </p>
</li>
<li><pre><code class="python"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> AllowAny
<span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView
<span class="class"><span class="keyword">class</span> <span class="title">MyPermissions</span><span class="params">(APIView)</span>:</span>

    permission_classes = [AllowAny]
    <span class="comment">#å½“è§†å›¾å‡½æ•°ä¸­è®¾å®špermission_classesçš„å€¼ä¸ºAllowAnyæ—¶,è¿™ä¸ªé¡µé¢å…è®¸ä»»ä½•äººè®¿é—®,ä¹Ÿå°±æ˜¯è¯´,ç›¸å½“äºå…è®¸æ¸¸å®¢è¿›è¡Œè®¿é—®</span>
    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(selfg,request)</span>:</span>
        <span class="keyword">return</span> HttpResponse(<span class="string">'æƒé™éªŒè¯é€šè¿‡,æ¬¢è¿'</span>)


</code></pre>
</li>
</ul>
</li>
</ol>
<pre><code>from rest_framework.permissions import IsAuthenticated,IsAdminUser
from rest_framework.views import APIView
class MyPermissions(APIView):

    permission_classes = [IsAuthenticated]
    #å½“è§†å›¾å‡½æ•°ä¸­è®¾å®špermission_classesçš„å€¼ä¸ºIsAuthenticatedæ—¶,è¿™ä¸ªé¡µé¢å…è®¸ä»»ä½•ç”¨æˆ·è®¿é—®,ä¹Ÿå°±æ˜¯è¯´,åªè¦ä½ è¿›è¡Œç™»å½•,å°±å¯ä»¥è¿›è¡Œè®¿é—®
    def get(selfg,request):
        return HttpResponse(&apos;æƒé™éªŒè¯é€šè¿‡,æ¬¢è¿&apos;)


from rest_framework.permissions import IsAdminUser
from rest_framework.views import APIView
class MyPermissions(APIView):

    permission_classes = [IsAdminUser]
    #å½“è§†å›¾å‡½æ•°ä¸­è®¾å®špermission_classesçš„å€¼ä¸ºIsAdminUseræ—¶,è¿™ä¸ªé¡µé¢åªå…è®¸æ‹¥æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·è¿›è¡Œè®¿é—®
    def get(selfg,request):
        return HttpResponse(&apos;æƒé™éªŒè¯é€šè¿‡,æ¬¢è¿&apos;)
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">     </span><br><span class="line"></span><br><span class="line"># è‡ªå®šä¹‰æƒé™éªŒè¯å™¨:</span><br><span class="line"></span><br><span class="line">1. åœ¨drfä¸­,å…è®¸æˆ‘ä»¬è‡ªå®šä¹‰ä¸€äº›æƒé™éªŒè¯å™¨,æ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„ä¸€äº›åŠŸèƒ½,æ¯”å¦‚è¯´.â€¦...ç•™åé—¨ã€ç•™åé—¨,è¿˜æœ‰...ç•™åé—¨ä¹‹ç±»çš„æ“ä½œ,å½“ç„¶,å¦‚æœæ˜¯å¤§å…¬å¸,åŒæ—¶è‡ªå·±åˆæ²¡æœ‰é«˜çº§æƒé™çš„è¯,ä¸å»ºè®®ç•™åé—¨,æ¯•ç«Ÿå¦‚æœç•™åé—¨è¢«å‘ç°äº†çš„è¯ä¸å¤ªå¥½,å“ˆå“ˆå“ˆå“ˆ</span><br><span class="line"></span><br><span class="line">2. ä¸Šä»£ç </span><br><span class="line"></span><br><span class="line">   - é¦–å…ˆåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„æƒé™éªŒè¯,è¿™ä¸ªéªŒè¯å°±ä¸éœ€è¦ä½¿ç”¨è‡ªå¸¦çš„æ¨¡å—äº†,ç›´æ¥è‡ªå®šä¹‰</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     from rest_framework.permissions import BasePermission</span><br><span class="line">     class My_permissions(BasePermission):</span><br><span class="line">         def has_permission(self,request,view):</span><br><span class="line">             if request.query_paramy.get('user') == 'root':</span><br><span class="line">                 return True</span><br></pre></td></tr></table></figure></code></pre><ul>
<li><p>åœ¨è°ƒç”¨æƒé™éªŒè¯çš„æ—¶å€™é€‰æ‹©ä½¿ç”¨è‡ªå®šä¹‰çš„æƒé™éªŒè¯å™¨</p>
</li>
<li><pre><code class="python"><span class="class"><span class="keyword">class</span> <span class="title">MyPermissions</span><span class="params">(APIView)</span>:</span>
    permission_classes = [My_permissions]
    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,request)</span>:</span>
        <span class="keyword">return</span> HttpResponse(<span class="string">'æƒé™éªŒè¯é€šè¿‡,æ¬¢è¿'</span>)
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># é™æµ</span><br><span class="line"></span><br><span class="line">### å…¨å±€é™æµè®¾ç½®:</span><br><span class="line"></span><br><span class="line">- åœ¨settingæ–‡ä»¶ä¸­è®¾å®šé™æµè¦æ±‚</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    </span><br><span class="line">    REST_FRAMEWORK = &#123;</span><br><span class="line">        'DEFAULT_THROTTLE_CLASSES':(</span><br><span class="line">            'rest_framework.throttling.AnonRateThrottle',</span><br><span class="line">            'rest_framework.throttling.UserRateThrottle'</span><br><span class="line">        ),</span><br><span class="line">        'DEFAULT_THROTTLE_RATES':&#123;</span><br><span class="line">            #å•ä½æ—¶é—´å†…è®¿é—®æ¬¡æ•°é™åˆ¶</span><br><span class="line">            #anonåŒ¿åç”¨æˆ·é™æµ</span><br><span class="line">            'anon':'1/second',</span><br><span class="line">            #useræ³¨å†Œç”¨æˆ·é™æµ</span><br><span class="line">            'user':'1/second'</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

- æ³¨å†Œé™æµä¿¡æ¯æ—¶,æ‰€éœ€è¦ä½¿ç”¨çš„rest_frameworkæ¨¡å—éœ€è¦ç°åœ¨INSTALLED_APPSä¸­è¿›è¡Œé…ç½®æ‰èƒ½è¿›è¡Œä½¿ç”¨,åŒæ—¶,è¿™é‡Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ä¸æ³¨å†Œçš„appåç›¸åŒ


</code></pre>
</li>
</ul>
<h3 id="å±€éƒ¨é™æµè®¾ç½®"><a href="#å±€éƒ¨é™æµè®¾ç½®" class="headerlink" title="å±€éƒ¨é™æµè®¾ç½®:"></a>å±€éƒ¨é™æµè®¾ç½®:</h3><ul>
<li><p>æ— è®ºæ˜¯å±€éƒ¨é™æµè¿˜æ˜¯å…¨å±€é™æµ,éƒ½éœ€è¦ç°åœ¨settingæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®,ä½†æ˜¯è¿™ä¸ªé…ç½®å¹¶ä¸ç›¸åŒ</p>
<ul>
<li><pre><code class="python">REST_FRAMEWORK = {
    <span class="string">'DEFAULT_THROTTLE_RATES'</span>:{
        <span class="string">'anon'</span>:<span class="string">'1/second'</span>,
        <span class="string">'user'</span>:<span class="string">'1/second'</span>
    }
}
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- åœ¨è¿›è¡Œå±€éƒ¨é™æµæ—¶,ä¸éœ€è¦å¯¼å…¥è‡ªå¸¦çš„é™æµæ¨¡å—</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  <span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line">  <span class="keyword">from</span> rest_framework.throttling <span class="keyword">import</span> UserRateThrottle</span><br><span class="line">  <span class="keyword">class</span> <span class="symbol">Mythrottling</span>(<span class="symbol">APIView</span>):</span><br><span class="line">      <span class="symbol">throttling_class</span> = [<span class="symbol">UserRateThrottle</span>]</span><br><span class="line">      <span class="symbol">def</span> <span class="symbol">get</span>(<span class="symbol">self,<span class="symbol">request</span></span>):</span><br><span class="line">          <span class="symbol">return</span> <span class="symbol">Response</span>('è¿™æ˜¯æŠ•ç¥¨é¡µé¢')</span><br></pre></td></tr></table></figure></div>


</code></pre>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoæ•°æ®åº“æ“ä½œ</title>
    <url>/blog/Django/Django_id_30.html</url>
    <content><![CDATA[<h2 id="Djangoæ•°æ®åº“æ“ä½œ"><a href="#Djangoæ•°æ®åº“æ“ä½œ" class="headerlink" title="Djangoæ•°æ®åº“æ“ä½œ"></a>Djangoæ•°æ®åº“æ“ä½œ</h2><h2 id="Djangoä¸­ä¸éœ€è¦å®šä¹‰idå­—æ®µ"><a href="#Djangoä¸­ä¸éœ€è¦å®šä¹‰idå­—æ®µ" class="headerlink" title="#Djangoä¸­ä¸éœ€è¦å®šä¹‰idå­—æ®µ"></a>#Djangoä¸­ä¸éœ€è¦å®šä¹‰idå­—æ®µ</h2><a id="more"></a>

<h3 id="æ•°æ®åº“åˆ›å»ºâ€“åŸºç¡€å­—æ®µ"><a href="#æ•°æ®åº“åˆ›å»ºâ€“åŸºç¡€å­—æ®µ" class="headerlink" title="æ•°æ®åº“åˆ›å»ºâ€“åŸºç¡€å­—æ®µ:"></a>æ•°æ®åº“åˆ›å»ºâ€“åŸºç¡€å­—æ®µ:</h3><ul>
<li><p>CharField(å®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å­—æ®µ)</p>
<ul>
<li>max_length=xx,  å®šä¹‰å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦</li>
</ul>
</li>
<li><p>DateField(å®šä¹‰ä¸€ä¸ªæ—¶é—´ç±»å‹çš„å­—æ®µ)</p>
<ul>
<li>æ—¶é—´ç±»å‹å­—æ®µä¸€å…±æœ‰ä¸‰ä¸ª,TimeField</li>
</ul>
</li>
<li><p>BooleanField</p>
</li>
<li><p>FileField</p>
<ul>
<li>æ–‡ä»¶å­—æ®µ</li>
</ul>
</li>
<li><p>TextField</p>
<ul>
<li>å¤§æ–‡æœ¬å­—æ®µ,è¶…è¿‡4000å­—ç¬¦çš„æ–‡æœ¬ä½¿ç”¨è¿™ä¸ªå­—æ®µ</li>
</ul>
</li>
<li><p>ImageField</p>
<ul>
<li>ä¸Šä¼ å›¾ç‰‡</li>
</ul>
</li>
<li><p>ForeignKey  å¤–é”®</p>
<ul>
<li><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦å…³è”çš„æ¨¡å‹ç±»</p>
</li>
<li><h3 id="ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»åŠ ä¸Šä¸‹é¢è¿™ä¸ªå‚æ•°-æ‰èƒ½ä¿è¯æ­£ç¡®"><a href="#ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»åŠ ä¸Šä¸‹é¢è¿™ä¸ªå‚æ•°-æ‰èƒ½ä¿è¯æ­£ç¡®" class="headerlink" title="ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»åŠ ä¸Šä¸‹é¢è¿™ä¸ªå‚æ•°,æ‰èƒ½ä¿è¯æ­£ç¡®"></a>ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»åŠ ä¸Šä¸‹é¢è¿™ä¸ªå‚æ•°,æ‰èƒ½ä¿è¯æ­£ç¡®</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="INI"><figure class="iseeu highlight /ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">on_delete</span>=models.CASCADE</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>åœ¨django2.0ä¹‹åçš„ç‰ˆæœ¬ä¸­ä¸åœ¨æœ‰é»˜è®¤çš„on_delete,æ‰€ä»¥è¿™é‡Œéœ€è¦æ‰‹åŠ¨ä¼ å…¥è¿™ä¸ªå‚æ•°</p>
<ul>
<li><pre><code>on_delete=None,               # åˆ é™¤å…³è”è¡¨ä¸­çš„æ•°æ®æ—¶,å½“å‰è¡¨ä¸å…¶å…³è”çš„fieldçš„è¡Œä¸º
    on_delete=models.CASCADE,     # åˆ é™¤å…³è”æ•°æ®,ä¸ä¹‹å…³è”ä¹Ÿåˆ é™¤
    on_delete=models.DO_NOTHING,  # åˆ é™¤å…³è”æ•°æ®,ä»€ä¹ˆä¹Ÿä¸åš
    on_delete=models.PROTECT,     # åˆ é™¤å…³è”æ•°æ®,å¼•å‘é”™è¯¯ProtectedError
    # models.ForeignKey(&apos;å…³è”è¡¨&apos;, on_delete=models.SET_NULL, blank=True, null=True)
    on_delete=models.SET_NULL,    # åˆ é™¤å…³è”æ•°æ®,ä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºnullï¼ˆå‰æFKå­—æ®µéœ€è¦è®¾ç½®ä¸ºå¯ç©º,ä¸€å¯¹ä¸€åŒç†ï¼‰
    # models.ForeignKey(&apos;å…³è”è¡¨&apos;, on_delete=models.SET_DEFAULT, default=&apos;é»˜è®¤å€¼&apos;)
    on_delete=models.SET_DEFAULT, # åˆ é™¤å…³è”æ•°æ®,ä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼ˆå‰æFKå­—æ®µéœ€è¦è®¾ç½®é»˜è®¤å€¼,ä¸€å¯¹ä¸€åŒç†ï¼‰
    on_delete=models.SET,         # åˆ é™¤å…³è”æ•°æ®,
     a. ä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºæŒ‡å®šå€¼,è®¾ç½®ï¼šmodels.SET(å€¼)
     b. ä¸ä¹‹å…³è”çš„å€¼è®¾ç½®ä¸ºå¯æ‰§è¡Œå¯¹è±¡çš„è¿”å›å€¼,è®¾ç½®ï¼šmodels.SET(å¯æ‰§è¡Œå¯¹è±¡)
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">## å­—æ®µå±æ€§</span><br><span class="line"></span><br><span class="line">- default</span><br><span class="line">- null</span><br><span class="line">  - åˆ¤æ–­å­—æ®µèƒ½ä¸èƒ½ä¸ºç©º</span><br><span class="line">  - é»˜è®¤ä¸ºfalse</span><br><span class="line">- primary_key</span><br><span class="line">  - ä¸»é”®çº¦æŸ</span><br><span class="line">- Foregin_key</span><br><span class="line">  - å¤–é”®çº¦æŸ\</span><br><span class="line">- autoincerment</span><br><span class="line">  - è‡ªå¢é•¿</span><br><span class="line">- blank</span><br><span class="line">  - åå°å‡ºå…¥æ•°æ®æ—¶æ˜¯å¦å…è®¸ä¸ºç©º</span><br><span class="line">- verbose_name</span><br><span class="line">  - è®¾å®šå­—æ®µåœ¨ç®¡ç†é¡µé¢æ˜¾ç¤ºçš„åç§°</span><br><span class="line"></span><br><span class="line">## æ’å…¥ã€æ›´æ–°å’Œåˆ é™¤</span><br><span class="line"></span><br><span class="line">#### æ’å…¥ã€æ›´æ–°</span><br><span class="line"></span><br><span class="line">â€‹	save()</span><br><span class="line"></span><br><span class="line">#### åˆ é™¤</span><br><span class="line"></span><br><span class="line">â€‹	delete</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">## ç”Ÿæˆè¿ç§»æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  python manage.py makemigrations</span><br><span class="line">  #ç”Ÿæˆè¿ç§»è„šæœ¬</span><br></pre></td></tr></table></figure></code></pre></li>
</ul>
</li>
</ul>
</li>
<li><pre><code class="python">python manage.py migrate
<span class="comment">#å°†è¿ç§»è„šæœ¬æ˜ å°„åˆ°æ•°æ®åº“ä¹‹ä¸­</span>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">## ä¿®æ”¹Djangoæ•°æ®åº“é»˜è®¤é…ç½®:</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">#ä¿®æ”¹settingæ–‡ä»¶ä¸­çš„databaseä¸­çš„å‚æ•°</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    'default': &#123;</span><br><span class="line">        'ENGINE': 'django.db.backends.mysql',</span><br><span class="line">        # 'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),</span><br><span class="line">        'NAME': 'django_demo',#æ•°æ®åº“åç§°,éœ€è¦æ‰‹åŠ¨åˆ›å»ºå¥½æ•°æ®åº“</span><br><span class="line">        'USER': "root",	#ç”¨æˆ·å,é»˜è®¤ä¸ºroot</span><br><span class="line">        'PASSWORD': '000000',#mysqlå¯†ç </span><br><span class="line">        'HOST': 'localhost',#æ•°æ®åº“åœ°å€,ä¸€èˆ¬ä¸ºæœ¬æœº127.0.0.1,é€šlocalhost</span><br><span class="line">        'PORT': '3306'#MySQLæ•°æ®åº“ç«¯å£å·.é»˜è®¤3306</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<hr>
<h2 id="è¿è¡Œæ•´ä¸ªé¡¹ç›®"><a href="#è¿è¡Œæ•´ä¸ªé¡¹ç›®" class="headerlink" title="è¿è¡Œæ•´ä¸ªé¡¹ç›®:"></a>è¿è¡Œæ•´ä¸ªé¡¹ç›®:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure></div>

<hr>
<h2 id="é€šè¿‡modelsæ–‡ä»¶åœ¨æ•°æ®åº“ä¸­æ·»åŠ æ•°æ®"><a href="#é€šè¿‡modelsæ–‡ä»¶åœ¨æ•°æ®åº“ä¸­æ·»åŠ æ•°æ®" class="headerlink" title="é€šè¿‡modelsæ–‡ä»¶åœ¨æ•°æ®åº“ä¸­æ·»åŠ æ•°æ®"></a>é€šè¿‡modelsæ–‡ä»¶åœ¨æ•°æ®åº“ä¸­æ·»åŠ æ•°æ®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">python manage.py shell</span><br><span class="line"><span class="comment">#è¿›å…¥äº¤äº’æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> æ¨¡å—å.models <span class="keyword">import</span> æ¨¡å‹ç±»å</span><br><span class="line"><span class="keyword">from</span> first.models <span class="keyword">import</span> BookInfo</span><br><span class="line">b = BookInfo()</span><br><span class="line">b.btitle = <span class="string">'å¤©é¾™å…«éƒ¨'</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</span><br><span class="line">b.bpub_data = date(<span class="number">1998</span>,<span class="number">3</span>,<span class="number">22</span>)</span><br><span class="line">b.save()</span><br></pre></td></tr></table></figure></div>

<h2 id="é€šè¿‡æ¨¡å‹ç±»ä»æ•°æ®åº“ä¸­è·å–å¯¹åº”çš„æ•°æ®"><a href="#é€šè¿‡æ¨¡å‹ç±»ä»æ•°æ®åº“ä¸­è·å–å¯¹åº”çš„æ•°æ®" class="headerlink" title="é€šè¿‡æ¨¡å‹ç±»ä»æ•°æ®åº“ä¸­è·å–å¯¹åº”çš„æ•°æ®"></a>é€šè¿‡æ¨¡å‹ç±»ä»æ•°æ®åº“ä¸­è·å–å¯¹åº”çš„æ•°æ®</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">b1 = BookInfo.objects.get(id=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></div>

<p>#é€šè¿‡æ¨¡å‹å¯¹è±¡BookInfoçš„objectsæ–¹æ³•çš„getæ–¹æ³•è·å–æ»¡è¶³å¯¹åº”æ¡ä»¶çš„å­—æ®µ </p>
<p>type(b1)</p>
<p>#è¿”å›å¯¹è±¡æ˜¯First.models.BookInfo</p>
<h3 id="ä¿®æ”¹è¡¨ä¸­æ•°æ®"><a href="#ä¿®æ”¹è¡¨ä¸­æ•°æ®" class="headerlink" title="ä¿®æ”¹è¡¨ä¸­æ•°æ®:"></a>ä¿®æ”¹è¡¨ä¸­æ•°æ®:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="GCODE"><figure class="iseeu highlight /gcode"><table><tr><td class="code"><pre><span class="line">b<span class="number">1.</span>btitle = <span class="string">'æ–°çš„æ•°æ®'</span></span><br><span class="line">b<span class="number">1.</span>save<span class="comment">()</span></span><br></pre></td></tr></table></figure></div>

<p>ä»æ ¹æœ¬ä¸Šæ¥è¯´,ä¿®æ”¹æ•°æ®ä»…ä»…åªæ˜¯æ‹¿åˆ°æ•°æ®ä¹‹åé‡æ–°èµ‹å€¼,ç„¶åè¿›è¡Œæäº¤è€Œå·²</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CPP"><figure class="iseeu highlight /cpp"><table><tr><td class="code"><pre><span class="line">b1.<span class="keyword">delete</span>()</span><br></pre></td></tr></table></figure></div>

<p>ä»æ•°æ®åº“ä¸­åˆ é™¤è¿™æ¡æ•°æ®</p>
<hr>
<h2 id="å¤–é”®æŸ¥è¯¢"><a href="#å¤–é”®æŸ¥è¯¢" class="headerlink" title="å¤–é”®æŸ¥è¯¢:"></a>å¤–é”®æŸ¥è¯¢:</h2><ul>
<li><p>ForeignKeyè®¾ç½®å¤–é”®</p>
</li>
<li><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="comment">#ä¹¦å</span></span><br><span class="line">    btitle = models.CharField(max_length=<span class="number">10</span>)</span><br><span class="line">    <span class="comment">#ä¸Šæ¶æ—¶é—´</span></span><br><span class="line">    bpub_data = models.DateField()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HeroInfo</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">    <span class="comment">#äººç‰©å</span></span><br><span class="line">    hname = models.CharField(max_length=<span class="number">10</span>)</span><br><span class="line">    <span class="comment">#äººç‰©æ€§åˆ«,trueä¸ºç”·,falseä¸ºå¥³</span></span><br><span class="line">    hgender = models.BooleanField(default=<span class="literal">False</span>)</span><br><span class="line">    <span class="comment">#ç®€ä»‹</span></span><br><span class="line">    hcomment = models.CharField(max_length=<span class="number">300</span>)</span><br><span class="line">    <span class="comment">#äººç‰©æ‰€å±ä¹¦ç±,ä¸€å¯¹å¤šå…³ç³»</span></span><br><span class="line">    <span class="comment">#è®¾ç½®å¤–é”®</span></span><br><span class="line">    hbook = models.ForeignKey(<span class="string">'BookInfo'</span>,on_delete=models.CASCADE)</span><br></pre></td></tr></table></figure></div>

<ul>
<li><p>å¤–é”®åˆ›å»ºå¥½ä¹‹åçš„å­—æ®µåä¸ºè®¾å®šå¥½çš„modelsæ¨¡å‹é‡Œé¢çš„å¤–é”®å­—æ®µåŠ ä¸Š_id,è¿™ä¸ªidå’Œå¦ä¸€ä¸ªè¡¨çš„idå¯¹ç…§</p>
</li>
<li><pre><code class="python">b = BookInfo()
b.btitle = <span class="string">'å¤©é¾™å…«éƒ¨'</span>
<span class="keyword">from</span> datetime <span class="keyword">import</span> date
b.bpub_data = date(<span class="number">1998</span>,<span class="number">2</span>,<span class="number">33</span>)
b.save()
<span class="comment">#ä¹‹åæ·»åŠ HeroInfoè¡¨çš„æ•°æ®</span>
h = HeroInfo()
h.hname = <span class="string">'æ®µèª‰'</span>
h.hgender = <span class="literal">True</span>
<span class="comment">#å¤–é”®å­—æ®µèµ‹å€¼ä¸ºå·²ç»åˆ›å»ºå¥½çš„ä¸è¿™æ¡æ•°æ®å…³è”çš„bookinfoè¡¨å¯¹è±¡</span>
<span class="comment">#é€šè¿‡è¿™ä¸ªå­—æ®µå¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”è¡¨çš„ä¿¡æ¯</span>
h.hbook = b

<span class="comment">###################################################################</span>
<span class="comment">#ä¸€å¯¹å¤šçš„æƒ…å†µä¸‹æŸ¥è¯¢ä¸€çš„ä¿¡æ¯</span>
&gt;&gt;&gt;h.hbook.btitle
&gt;&gt;&gt;<span class="string">'å¤©é¾™å…«éƒ¨'</span>
&gt;&gt;&gt;h.hbook.bpub_data
&gt;&gt;&gt;datetime.date(<span class="number">1998</span>,<span class="number">2</span>,<span class="number">33</span>)
<span class="comment">#ä¸€å¯¹å¤šæŸ¥è¯¢æ‰€å±ä¿¡æ¯</span>
&gt;&gt;&gt;b.heroinfo_set.all()
<span class="comment">#è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªé›†åˆ,é‡Œé¢ä»¥åˆ—è¡¨å½¢å¼æ”¾ç½®äº†æ‰€æœ‰å¯¹åº”çš„æ•°æ®</span>
<span class="meta">&gt;&gt;&gt; </span>&lt;QuerySet [&lt;HeroInfo: HeroInfo object (<span class="number">1</span>)&gt;]&gt;
&gt;&gt;&gt;b.heroinfo_set.first()
<span class="comment">#è¿”å›çš„ç»“æœæ˜¯å¯¹åº”æ•°æ®çš„ç¬¬ä¸€æ¡</span>
<span class="meta">&gt;&gt;&gt; </span>&lt;HeroInfo: HeroInfo object (<span class="number">1</span>)&gt;
<span class="comment">#é€šè¿‡å°†è¿™ä¸€æ¡æ•°æ®èµ‹å€¼ä¹‹åå¯ä»¥ç»§ç»­è¿›è¡Œä¸€äº›æŸ¥è¯¢</span>
&gt;&gt;&gt;b1 = b.heroinfo_set.first()
&gt;&gt;&gt;b1.hname
&gt;&gt;&gt;<span class="string">"æ®µèª‰"</span>
<span class="comment">######################################################</span>
<span class="comment">#æŸ¥è¯¢å…¨éƒ¨æ•°æ®</span>
<span class="meta">&gt;&gt;&gt; </span>BookInfo.objects.all()
<span class="meta">&gt;&gt;&gt; </span>HeroInfo.objects.all()
<span class="comment">#æ¨¡å‹ç±»å.objects.all()</span></code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="æ•°æ®åº“æŸ¥è¯¢è¯­å¥"><a href="#æ•°æ®åº“æŸ¥è¯¢è¯­å¥" class="headerlink" title="æ•°æ®åº“æŸ¥è¯¢è¯­å¥"></a>æ•°æ®åº“æŸ¥è¯¢è¯­å¥</h2><h3 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h3><ul>
<li><p>all</p>
<ul>
<li>allè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°æ®é›†åˆ</li>
<li>æ­¤è¿”å›æ•°æ®å¯ä»¥è¿›è¡Œéå†</li>
</ul>
</li>
<li><p>filter</p>
<ul>
<li>è¿”å›çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆ,å¯ä»¥éå†</li>
<li>å±æ€§å__exact = 1<ul>
<li>åˆ¤æ–­æ˜¯å¦ç›¸ç­‰</li>
<li>æ­¤é¡¹å±æ€§ç­‰åŒäºid = 1</li>
</ul>
</li>
<li>å±æ€§å__contains<ul>
<li>æŸ¥è¯¢åŒ…å«æŸä¸ªå­—ç¬¦çš„æ•°æ®</li>
</ul>
</li>
<li>å±æ€§å__endswith<ul>
<li>æŸ¥è¯¢ä»¥æŸå­—ç¬¦ç»“å°¾çš„æ•°æ®</li>
<li>ä»¥æŸå­—ç¬¦ä¸²ç»“å°¾</li>
</ul>
</li>
<li>å±æ€§å__startswith<ul>
<li>ä»¥æŸå­—ç¬¦ä¸²å¼€å¤´</li>
</ul>
</li>
<li>å±æ€§å__range<ul>
<li>åœ¨ä¸€ä¸ªèŒƒå›´ä¹‹å†…(å‰é¢ä¸ºå°å€¼ï¼Œåé¢ä¸ºå¤§å€¼)</li>
</ul>
</li>
<li>å±æ€§å__isnull<ul>
<li>æŸ¥è¯¢æŸå­—æ®µä¸ºç©ºæˆ–è€…ä¸ä¸ºç©ºçš„æ•°æ®</li>
<li>å±æ€§å_isnull=false    ä¸ä¸ºç©º</li>
<li>å±æ€§å__isnull=true   ä¸ºç©º</li>
</ul>
</li>
<li>å±æ€§å__in = [1,2,3]<ul>
<li>æŸ¥è¯¢ç›®æ ‡å­—æ®µå†æ­¤åˆ—è¡¨å…ƒç´ çš„èŒƒå›´å†…çš„æ•°æ®</li>
</ul>
</li>
<li>å±æ€§å__gt = 3(gtä¸ºå¤§äº)<ul>
<li>ç­‰åŒäº                å±æ€§å &gt; 3</li>
</ul>
</li>
<li>å±æ€§å__lt = 3(ltä¸ºå°äº)<ul>
<li>ç­‰åŒäº                å±æ€§å &lt; 3</li>
</ul>
</li>
<li>å±æ€§å__gte = 3(gteä¸ºå¤§äºç­‰äº)<ul>
<li>ç­‰åŒäº                å±æ€§å &gt;= 3</li>
</ul>
</li>
<li>å±æ€§å__lte = 3(lteä¸ºå°äºç­‰äº)<ul>
<li>ç­‰åŒäº                å±æ€§å &lt;= 3</li>
</ul>
</li>
<li>å±æ€§å__year<ul>
<li>bpub_date__year = 1980</li>
<li>æŸ¥è¯¢1980å¹´ä¹‹åçš„æ•°æ®</li>
<li>æŸ¥è¯¢æ—¶é—´ä¿¡æ¯è¿˜å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„å¤§äºç­‰äºçš„æ–¹æ³•<ul>
<li>bpub_date_gt = date(1998,1,1)</li>
<li>æŸ¥è¯¢åœ¨1998å¹´1æœˆ1æ—¥ä¹‹åçš„æ•°æ®</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>exclude</p>
<ul>
<li><p>è¿”å›çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆ,å¯ä»¥éå†</p>
</li>
<li><p>æŸ¥è¯¢ä¸æ»¡è¶³æŸä¸ªæ¡ä»¶çš„æ•°æ®</p>
</li>
</ul>
</li>
<li><p>order_byæ’åº</p>
<ul>
<li><p>è¿”å›çš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ªé›†åˆ,å¯ä»¥éå†</p>
</li>
<li><p>æ’åºå­—æ®µä¸€èˆ¬æ˜¯æ”¾åœ¨æ¡ä»¶æŸ¥è¯¢ä¹‹åè¿›è¡Œçš„</p>
</li>
<li><p>BackInfo.objects.all().order_by(â€˜idâ€™)</p>
<ul>
<li>é»˜è®¤æ’åºæ–¹å¼ä¸ºå‡åºæ’åˆ—</li>
</ul>
</li>
<li><p>BackInfo.objects.all().order_by(â€˜-idâ€™)</p>
<ul>
<li>åœ¨å‰é¢åŠ ä¸ª-å°†ä¼šè¿›è¡Œé™åºæ’åˆ—</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å¤šæ¡ä»¶æŸ¥è¯¢"><a href="#å¤šæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="å¤šæ¡ä»¶æŸ¥è¯¢"></a>å¤šæ¡ä»¶æŸ¥è¯¢</h3><ul>
<li>ä¸¤ä¸ªæ¡ä»¶å¹¶å­˜</li>
<li>ä¸&amp;<ul>
<li>filter(id_gt=1,age_gt=10)<ul>
<li>idå¤§äº1å¹¶ä¸”ageå¤§äº10</li>
</ul>
</li>
</ul>
</li>
<li>æˆ–  |<ul>
<li>è¿™ä¸ªæ¡ä»¶æŸ¥è¯¢éœ€è¦å¯¼å…¥ä¸€ä¸ªæ–°çš„æ¨¡å—</li>
<li>from django.db.models import Q</li>
<li>filter(Q(id=1) | Q(age=15))</li>
<li>åˆ›å»ºæ–°çš„Qå¯¹è±¡,ä½œä¸ºæˆ–æ¡ä»¶çš„å•ä½,</li>
</ul>
</li>
<li>æŸ¥è¯¢æ¡ä»¶ä¸ºä¸€ä¸ªå­—æ®µçš„æ•°å€¼å¤§äºå¦ä¸€ä¸ªå­—æ®µçš„æ•°æ®<ul>
<li>å¦‚,æŸ¥è¯¢ä¸€æœ¬ä¹¦çš„é˜…è¯»é‡å¤§äºè¯„è®ºé‡çš„çš„æ•°æ®</li>
<li>è¿™ä¸ªæ—¶å€™éœ€è¦å¯¼å…¥ä¸€ä¸ªæ–°çš„æ¨¡å—F<ul>
<li>from django.db.models import F</li>
<li>ä½¿ç”¨fæ¨¡å—æ„é€ å¯¹åº”å­—æ®µçš„å¯¹è±¡,å¹¶å°†è¿™ä¸ªå¯¹è±¡ä½œä¸ºæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢</li>
<li>BookInfo.objects.filter(bread_gt=F(bcomment))</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°."></a>èšåˆå‡½æ•°.</h3><h5 id="â€”-â€”-èšåˆæ“ä½œçš„å…³é”®å­—"><a href="#â€”-â€”-èšåˆæ“ä½œçš„å…³é”®å­—" class="headerlink" title="â€”-â€”-èšåˆæ“ä½œçš„å…³é”®å­—:"></a>â€”-â€”-èšåˆæ“ä½œçš„å…³é”®å­—:</h5><p>â€‹    <strong>aggregate</strong></p>
<p>â€‹    æŸ¥è¯¢æ—¶æ‰€ä½¿ç”¨çš„æ¨¡å—éƒ½åœ¨django.db.modelsè¿™ä¸ªåŒ…é‡Œé¢</p>
<h4 id="èšåˆå‡½æ•°æ€»è§ˆ"><a href="#èšåˆå‡½æ•°æ€»è§ˆ" class="headerlink" title="èšåˆå‡½æ•°æ€»è§ˆ"></a>èšåˆå‡½æ•°æ€»è§ˆ</h4><ul>
<li>countè¯¥å­—æ®µçš„æ€»ä¸ªæ•°</li>
<li>maxæœ€å¤§æ•°å€¼</li>
<li>minæœ€å°æ•°å€¼</li>
<li>sumè¯¥å­—æ®µæ•°å€¼çš„å’Œ</li>
<li>avgå¹³å‡æ•°å€¼</li>
</ul>
<h4 id="èšåˆå‡½æ•°ä½¿ç”¨æ—¶éœ€è¦å¯¼å…¥æ¨¡å—"><a href="#èšåˆå‡½æ•°ä½¿ç”¨æ—¶éœ€è¦å¯¼å…¥æ¨¡å—" class="headerlink" title="èšåˆå‡½æ•°ä½¿ç”¨æ—¶éœ€è¦å¯¼å…¥æ¨¡å—"></a>èšåˆå‡½æ•°ä½¿ç”¨æ—¶éœ€è¦å¯¼å…¥æ¨¡å—</h4><ol>
<li>â€‹    <u>f<strong>rom django.db.models import Count,Max,Min,Avg,Sum</strong></u></li>
<li>â€‹    <u><strong>è¿™äº”ä¸ªèšåˆå‡½æ•°éœ€è¦ä»django.db.modelsé‡Œé¢å¼•å…¥è¿›æ¥</strong></u></li>
<li>â€‹    <u><strong>BookInfo.objects.aggregate(Sum(â€˜breadâ€™))</strong></u></li>
<li>â€‹    <u><strong>æ¨¡å‹ç±»å.bojects.aggregate(èšåˆå‡½æ•°(å­—æ®µå))</strong></u></li>
<li>â€‹    <u><strong>å½“ä¸åŠ æŸ¥è¯¢æ¡ä»¶æ—¶é»˜è®¤ä¸ºall,ä¹Ÿå°±æ˜¯è¯´,allæ—¶å¯ä»¥çœç•¥çš„</u></strong></li>
</ol>
<h5 id="å½“è¿›è¡Œèšåˆä¹‹å-è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªå­—å…¸-ä¹¦å†™å½¢å¼ä¸º-key-èšåˆçš„å±æ€§å-èšåˆæ–¹å¼-value-èšåˆçš„ç»“æœ"><a href="#å½“è¿›è¡Œèšåˆä¹‹å-è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªå­—å…¸-ä¹¦å†™å½¢å¼ä¸º-key-èšåˆçš„å±æ€§å-èšåˆæ–¹å¼-value-èšåˆçš„ç»“æœ" class="headerlink" title="å½“è¿›è¡Œèšåˆä¹‹å,è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªå­—å…¸,ä¹¦å†™å½¢å¼ä¸º,key = èšåˆçš„å±æ€§å__èšåˆæ–¹å¼      ,value = èšåˆçš„ç»“æœ"></a>å½“è¿›è¡Œèšåˆä¹‹å,è¿”å›çš„å€¼æ˜¯ä¸€ä¸ªå­—å…¸,ä¹¦å†™å½¢å¼ä¸º,key = èšåˆçš„å±æ€§å__èšåˆæ–¹å¼      ,value = èšåˆçš„ç»“æœ</h5><h4 id="èšåˆå‡½æ•°å¦ä¸€ç§ç”¨æ³•"><a href="#èšåˆå‡½æ•°å¦ä¸€ç§ç”¨æ³•" class="headerlink" title="èšåˆå‡½æ•°å¦ä¸€ç§ç”¨æ³•:"></a>èšåˆå‡½æ•°å¦ä¸€ç§ç”¨æ³•:</h4><p>åœ¨å·²ç»è¿›è¡Œè¿‡æ¡ä»¶æŸ¥è¯¢çš„æƒ…å†µä¸‹,ç›´æ¥ä½¿ç”¨å°å†™çš„.count()å¾—åˆ°çš„ç»“æœæ—¶ä¸€ä¸ªæ•°å€¼,è¿™ä¸ªæ•°å€¼æ˜¯å·²ç»æŸ¥è¯¢åˆ°çš„æ•°æ®çš„æ€»æ•°</p>
<p>ä½†æ˜¯å› ä¸ºæ¡ä»¶æŸ¥è¯¢å®Œæ¯•ä¹‹åè·å–çš„æ˜¯æ•°æ®é›†åˆ,æ‰€ä»¥è¿™ä¸ªæ•°æ®é›†åˆæ˜¯æ²¡æœ‰å…¶ä»–çš„å±æ€§çš„,ä»–å”¯ä¸€é€‚ç”¨çš„èšåˆå‡½æ•°åªæœ‰ä¸€ä¸ª,é‚£å°±æ˜¯è®¡ç®—æ€»æ•°çš„<strong><u><code>count</code></u></strong></p>
<p>æ³¨æ„,åœ¨æ‰€æœ‰è¿”å›çš„ä¸ºæ•°æ®é›†åˆçš„æŸ¥è¯¢è¯­å¥åé¢,ä»¥ä¸Šçš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯å¯ä»¥ç”¨çš„,ä½ å¯ä»¥ç»§ç»­åœ¨åé¢ä½¿ç”¨åˆ†ç±»,</p>
<p>æ‰€æœ‰ç»“æœä¸ºæŸ¥è¯¢é›†çš„ç»“æœéƒ½æ˜¯å¯ä»¥è¿›è¡Œåˆ‡ç‰‡çš„,[:]</p>
<p>æ³¨æ„,è¿™ä¸ªåˆ‡ç‰‡ä½¿ç”¨çš„ä¸‹æ ‡æ˜¯ä¸å…è®¸ä½¿ç”¨è´Ÿæ•°çš„</p>
<p>åˆ‡ç‰‡ä¹‹åçš„ç»“æœä¾ç„¶æ˜¯ä¸€ä¸ªæŸ¥è¯¢é›†,å¯ä»¥ä½¿ç”¨get()æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢</p>
<p>exists()   åˆ¤æ–­è¿™ä¸ªæŸ¥è¯¢é›†ä¸­æ˜¯å¦æœ‰æ•°æ®,æœ‰è¿”å›True,æ²¡æœ‰è¿”å›False</p>
<p>existe     ç›¸å½“äºæŸ¥çœ‹è¿™ä¸ªåˆ¤æ–­å¹¶å±•ç¤ºè¿™ä¸ªæŸ¥è¯¢åŠçš„å…¨éƒ¨æ•°æ®</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Django-filterè¿‡æ»¤å™¨çš„ä½¿ç”¨</title>
    <url>/blog/Django/Django_id_04.html</url>
    <content><![CDATA[<h2 id="Django-filteræ¨¡å—ä½¿ç”¨"><a href="#Django-filteræ¨¡å—ä½¿ç”¨" class="headerlink" title="Django-filteræ¨¡å—ä½¿ç”¨:"></a>Django-filteræ¨¡å—ä½¿ç”¨:</h2><a id="more"></a>
<h2 id="ç›®å‰-è¿‡æ»¤å™¨django-filteråªèƒ½åœ¨ListAPIViewçš„å­ç±»ä¸­ä½¿ç”¨"><a href="#ç›®å‰-è¿‡æ»¤å™¨django-filteråªèƒ½åœ¨ListAPIViewçš„å­ç±»ä¸­ä½¿ç”¨" class="headerlink" title="ç›®å‰,è¿‡æ»¤å™¨django_filteråªèƒ½åœ¨ListAPIViewçš„å­ç±»ä¸­ä½¿ç”¨"></a>ç›®å‰,è¿‡æ»¤å™¨django_filteråªèƒ½åœ¨ListAPIViewçš„å­ç±»ä¸­ä½¿ç”¨</h2><ol>
<li><h3 id="è¿‡æ»¤"><a href="#è¿‡æ»¤" class="headerlink" title="è¿‡æ»¤"></a>è¿‡æ»¤</h3><ul>
<li><pre><code class="python"><span class="keyword">from</span> rest_framework.generics <span class="keyword">import</span> ListAPIView
<span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend
<span class="class"><span class="keyword">class</span> <span class="title">MYfilter</span><span class="params">(ListAPIView)</span>:</span>
    queryset = Students.objects.all()
    serializer_class = StudentsSerializer
    filter_backends = [DjangoFilterBackend]
    filter_fields = (<span class="string">"id"</span>,)
    <span class="comment">#æ³¨æ„,filter_fieldsçš„å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå…ƒç»„!!!!</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ASCIIDOC"><figure class="iseeu highlight /asciidoc"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">- </span>ä½¿ç”¨æ–¹æ³•</span><br></pre></td></tr></table></figure></div>
åœ¨ç½‘å€urlä¹‹åè¿½åŠ -------/?id=1
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">2. ### æ’åº</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     from rest_framework.filters import OrderingFilter</span><br><span class="line">     from rest_framework.generics import ListAPIView</span><br><span class="line">     class MYfilter(ListAPIView):</span><br><span class="line">         queryset = Students.objects.all()</span><br><span class="line">         serializer_class = StudentsSerializer</span><br><span class="line">         filter_backends = [OrderingFilter]</span><br><span class="line">         ordering_fields = ['id']</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>ä½¿ç”¨æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line">åœ¨ç½‘å€urlä¹‹åè¿½åŠ ------/?<span class="attribute">ordering</span>=xx</span><br><span class="line">xxä¸ºordering_fieldsä¸­å‡†å¤‡çš„ç”¨æ¥ä½œä¸ºæ’åºåŸºå‡†çš„å­—æ®µ</span><br><span class="line">å€’åºä¸ºåœ¨xxå‰åŠ ä¸Š-å·</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoæ¨¡å‹ç®¡ç†å™¨</title>
    <url>/blog/Django/Django_id_18.html</url>
    <content><![CDATA[<h2 id="æ¨¡å‹ç®¡ç†å™¨è¯¦è§£"><a href="#æ¨¡å‹ç®¡ç†å™¨è¯¦è§£" class="headerlink" title="æ¨¡å‹ç®¡ç†å™¨è¯¦è§£"></a>æ¨¡å‹ç®¡ç†å™¨è¯¦è§£</h2><a id="more"></a>
<ol>
<li><h2 id="objectsæ¨¡å‹ç®¡ç†å™¨"><a href="#objectsæ¨¡å‹ç®¡ç†å™¨" class="headerlink" title="objectsæ¨¡å‹ç®¡ç†å™¨"></a>objectsæ¨¡å‹ç®¡ç†å™¨</h2><ol>
<li><p>æœ¬è´¨ä¸Šæ¥è¯´,objectså…¶å®æ˜¯djangoä¸ºæˆ‘ä»¬å°è£…çš„ä¸€ä¸ªç‰¹æ®Šçš„æ¨¡å‹ç®¡ç†å™¨ç±»,å®ƒæœ¬è´¨ä¸Šå…¶å®æ˜¯models.Managerå¯¹è±¡</p>
</li>
<li><p>ä¹Ÿå°±æ˜¯è¯´,æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™models.Managerçš„æ–¹æ³•æ¥å®ç°ç»™è¿™ä¸ªç®¡ç†å™¨è¿›è¡Œé‡å‘½å</p>
</li>
<li><p>å¦‚:</p>
<ol>
<li><pre><code class="python"><span class="comment">#åœ¨æ¨¡å‹ç±»å±æ€§ä¹‹ä¸­ç›´æ¥é‡å†™models.mangeræ–¹æ³•</span>
book = models.manger()
<span class="comment">#è‡ªå®šä¹‰ä¸€ä¸ªç®¡ç†å™¨å¯¹è±¡,è¿™ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä¸é€‚ç”¨objectsæ¥è¿›è¡ŒæŸ¥è¯¢</span>
<span class="comment">#è€Œæ˜¯ä½¿ç”¨bookæ¥è¿›è¡ŒæŸ¥è¯¢</span>
BookInfo.book.all()
<span class="comment">#åœ¨è¿›è¡Œå®šä¹‰ä¹‹å,å°†æ— æ³•ä½¿ç”¨åŸæœ¬çš„objects</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="number">2.</span> <span class="comment">## å¸¸ç”¨çš„é‡å†™æ¨¡å‹ç®¡ç†å™¨æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> åˆ›å»ºä¸€ä¸ªæ¨¡å‹ç±»æ¥è¿›è¡Œé‡å†™</span><br><span class="line"></span><br><span class="line">      <span class="number">1.</span> ```python</span><br><span class="line">         <span class="class"><span class="keyword">class</span> <span class="title">BookInfoManger</span><span class="params">(models.Manager)</span>:</span></span><br><span class="line">             <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>è¿™æ˜¯æœ€ç®€å•å¾—åˆ°é‡å†™Managerçš„æ–¹æ³•</p>
</li>
<li><p>é€šè¿‡è¿™ä¸ªç±»å¯ä»¥åˆ›å»ºå…¨æ–°çš„Managerå¯¹è±¡æ¥è¿›è¡ŒæŸ¥è¯¢</p>
</li>
<li><p>æ³¨æ„,ä¸€æ—¦è¿›è¡Œé‡å†™ä¹‹å,djangoè‡ªå¸¦çš„objectså°†ä¼šæ— æ³•ä½¿ç”¨,åªèƒ½ä½¿ç”¨è‡ªå·±åˆ›å»ºçš„å¯¹è±¡è¿›è¡ŒæŸ¥è¯¢</p>
</li>
</ol>
</li>
<li><p>åœ¨æ¨¡å‹ç±»ä¹‹ä¸­è¿›è¡Œå…¶ä»–çš„ç¼–å†™</p>
<ol>
<li><p>é‡å†™allæ–¹æ³•(æ”¹å˜ç»“æœé›†)</p>
<ul>
<li><pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">all</span><span class="params">(self)</span>:</span>
    <span class="comment">#é€šè¿‡superæ–¹æ³•è°ƒç”¨çˆ¶ç±»çš„allæ–¹æ³•å¯¹æ¨¡å‹ç±»å¯¹è±¡è¿›è¡ŒæŸ¥è¯¢</span>
    books = super().all()
    <span class="comment">#å¯¹å¤„ç†è¿‡çš„ç»“æœè¿›è¡Œå¤„ç†</span>
    books = books.filter(id__gt=<span class="number">1</span>)
    <span class="comment">#å°†ç»“æœè¿”å›</span>
    <span class="keyword">return</span> books
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="FSHARP"><figure class="iseeu highlight /fsharp"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- è¿™æ ·å¤„ç†è¿‡çš„allæ–¹æ³•åœ¨è°ƒç”¨æ—¶å°†ä¸ä¼šè¿”å›å…¨éƒ¨çš„æ•°æ®,è€Œæ˜¯ä¼šæ ¹æ®è¿™ä¸ªé‡æ–°å®šä¹‰çš„allæ–¹æ³•å¯¹æ•°æ®è¿›è¡Œå¤„ç†ä¹‹åæ‰ä¼šè¿”å›,</span><br><span class="line"></span><br><span class="line">- æœ€ç»ˆè¿”å›ç»“æœä¸º</span><br><span class="line"></span><br><span class="line">  ```python</span><br><span class="line">  &gt;&gt;&gt; BookInfo.a.all()</span><br><span class="line">  &gt;&gt;&gt; &lt;QuerySet <span class="meta">[&lt;BookInfo: ç¥å¢“&gt;, &lt;BookInfo: é¾™è›‡æ¼”ä¹‰&gt;, &lt;BookInfo: é‚£å¹´é‚£å…”é‚£äº›äº‹å„¿&gt;, &lt;BookInfo: äº®å‰‘&gt;, &lt;BookInfo: ç§’é€Ÿäº”å˜ç±³&gt;, &lt;BookInfo: ä½ çš„åå­—&gt;]</span>&gt;</span><br></pre></td></tr></table></figure></div>

è¿”å›ç»“æœä¸ºä¸€ä¸ªè¿”å›é›†</code></pre>
</li>
</ul>
</li>
<li><p>è‡ªå®šä¹‰ç±»æ–¹æ³•(å®šä¹‰é¢å¤–çš„æ–¹æ³•)</p>
<ul>
<li><p>åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ–¹æ³•,æ¯”å¦‚è‡ªå®šä¹‰ä¸€äº›æ·»åŠ ç”¨çš„æ–¹æ³•,ä¹Ÿå³æ˜¯è¯´,æŠŠåŸæœ¬å¤æ‚çš„æ·»åŠ æ–¹æ³•å°è£…æˆä¸ºç±»æ–¹æ³•è¿›è¡Œä½¿ç”¨,è¿™æ ·çš„è¯,å¯ä»¥å‡å°‘ä»£ç çš„æ•°é‡</p>
</li>
<li><p>é‡å†™å­—æ®µæ·»åŠ </p>
<ul>
<li><pre><code class="python"><span class="meta">@classmethod</span>
<span class="function"><span class="keyword">def</span> <span class="title">create_book</span><span class="params">(cls,btitle,bpub_date,cate_id)</span>:</span>
    obj = BookInfo()
    obj.btitle = btitle
    obj.bpub_date = bpub_date
    obj.cate_id = cate_id
    obj.save()
    <span class="keyword">return</span> obj
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ARMASM"><figure class="iseeu highlight /armasm"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- é‡å†™æ·»åŠ ä¿¡æ¯æ–¹æ³•</span><br><span class="line"></span><br><span class="line">- åœ¨æ¨¡å‹ç±»ä¸­çš„å†™æ³•,æ­¤æ–¹æ³•ä¸é€‚åˆå†™åœ¨æ¨¡å‹ç±»ä¸­,å› ä¸ºè¿‡å¤šçš„ç±»æ–¹æ³•ä¼šä½¿æ¨¡å‹ç±»å˜å¾—è‡ƒè‚¿,ä¸æ–¹ä¾¿ä½¿ç”¨,æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å°†è¿™äº›æ–¹æ³•å®šä¹‰åœ¨æˆ‘ä»¬é‡å†™çš„manageræ¨¡å‹ç®¡ç†å™¨ä¸­</span><br><span class="line"></span><br><span class="line">- ```python</span><br><span class="line">  def create_book(<span class="keyword">self,btitle,bpub_date,cate_id):</span></span><br><span class="line"><span class="keyword"> </span>     obj = <span class="keyword">BookInfo()</span></span><br><span class="line"><span class="keyword"> </span>     obj.<span class="keyword">btitle </span>= <span class="keyword">btitle</span></span><br><span class="line"><span class="keyword"> </span>     obj.<span class="keyword">bpub_date </span>= <span class="keyword">bpub_date</span></span><br><span class="line"><span class="keyword"> </span>     obj.cate_id = cate_id</span><br><span class="line">      obj.save()</span><br><span class="line">      return objpython</span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>è¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨,</p>
</li>
<li><p>é‡å†™å°è£…çš„æ–¹æ³•é€‚ç”¨äºå¢åˆ æ”¹æŸ¥çš„æ‰€æœ‰æ–¹æ³•</p>
</li>
<li><p>åœ¨managerå‡½æ•°ä¸­,å°è£…å¥½äº†ä¸€ä¸ªmodelæ–¹æ³•,è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ¨¡å‹ç±»</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CRYSTAL"><figure class="iseeu highlight /crystal"><table><tr><td class="code"><pre><span class="line"><span class="keyword">self</span>.model()</span><br></pre></td></tr></table></figure></div>

<p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹‹å,å°±ä¸ä¼šå‡ºç°æ¢ä¸€ä¸ªæ¨¡å‹ç±»å°±æ— æ³•è°ƒç”¨çš„æƒ…å†µäº†</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>APIæ¥å£ç”Ÿæˆ</title>
    <url>/blog/Vue/Vue_id_01.html</url>
    <content><![CDATA[<h2 id="è‡ªåŠ¨åˆ›å»ºapiæ¥å£çš„æ–‡æ¡£"><a href="#è‡ªåŠ¨åˆ›å»ºapiæ¥å£çš„æ–‡æ¡£" class="headerlink" title="è‡ªåŠ¨åˆ›å»ºapiæ¥å£çš„æ–‡æ¡£"></a>è‡ªåŠ¨åˆ›å»ºapiæ¥å£çš„æ–‡æ¡£</h2><a id="more"></a>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®:"></a>é…ç½®:</h2><h4 id="settingæ–‡ä»¶é…ç½®"><a href="#settingæ–‡ä»¶é…ç½®" class="headerlink" title="settingæ–‡ä»¶é…ç½®:"></a>settingæ–‡ä»¶é…ç½®:</h4><ol>
<li><p>ä¸‹è½½æ¨¡å—</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">pip install corsapi</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>é…ç½®SCHEMA_CLASS</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">'DEFAULT_SCHEMA_CLASS'</span>: <span class="string">'rest_framework.schemas.AutoSchema'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>åœ¨ä¸»è·¯ç”±ä¸­æ³¨å†Œä½¿ç”¨</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.decumentation <span class="keyword">import</span> include_docs_urls</span><br><span class="line"><span class="keyword">from</span> django.url <span class="keyword">import</span> path,include</span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">'docs/'</span>,include_docs_urls(title=<span class="string">'APIç®¡ç†é¡µé¢'</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></div>

</li>
</ol>
<p>åˆ›å»ºæˆåŠŸä¹‹åçš„ç”»é¢å¦‚ä¸‹å›¾:<img src="/fcg22450.github.io/img/interactive/1575621839123.png" alt="1575621839123"></p>
<p>åœ¨è¿™é‡Œé¢,è¿˜æœ‰ä¸€äº›åˆ«çš„è®¾ç½®,å¦‚,åœ¨æ¨¡å‹ç±»ä¸­è®¾ç½®å­—æ®µçš„æç¤ºå±æ€§ :</p>
<ul>
<li>help_text = â€˜ â€™</li>
</ul>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>axios</tag>
      </tags>
  </entry>
  <entry>
    <title>axiosè¯·æ±‚ä¸è·¨åŸŸ</title>
    <url>/blog/Vue/Vue_id_03.html</url>
    <content><![CDATA[<h2 id="axiosè¯·æ±‚ä¸è·¨åŸŸ"><a href="#axiosè¯·æ±‚ä¸è·¨åŸŸ" class="headerlink" title="axiosè¯·æ±‚ä¸è·¨åŸŸ."></a>axiosè¯·æ±‚ä¸è·¨åŸŸ.</h2><a id="more"></a>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªdjangoå·¥ç¨‹å¹¶è¿è¡Œ</p>
</li>
<li><p>è¿è¡Œvueå·¥ç¨‹</p>
</li>
<li><p>vueé…ç½®è·¨åŸŸ</p>
<ul>
<li><p>cd vueproject/src/main.js</p>
<ul>
<li>å¯¼å…¥axiosæ¨¡å—</li>
<li>import axios from â€˜axiosâ€™</li>
<li>æ³¨å†Œaxiosæ¨¡å—</li>
<li>Vue.prototype.$axios = axios</li>
</ul>
</li>
<li><p>cd vueproject/config/index.js</p>
<ul>
<li><p>é…ç½®è·¨åŸŸè¯·æ±‚â€”-â€”-proxytable</p>
</li>
<li><pre><code class="javascript">proxyTable: {
    <span class="string">'/api'</span>: {
        target: <span class="string">'http://127.0.0.1:8000/api/test/'</span>,
        #è¦è¿æ¥çš„æ¥å£
        changeOrigin: <span class="literal">true</span>,
        #æ˜¯å¦è·¨åŸŸ
        pathRewrite: {
            <span class="string">'^api/'</span>:<span class="string">''</span>
            #é‡å†™æ¥å£çš„åŸŸå
        }    
    }
}
&lt;!--ï¿¼<span class="number">0</span>--&gt;
<span class="keyword">export</span> <span class="keyword">default</span> {
    name:<span class="string">'User'</span>,
    data(){
        <span class="keyword">return</span> {
            page_info: <span class="string">'this is user route'</span>
        }
    },
    created(){
        <span class="keyword">this</span>.$axios.get(<span class="string">'http://127.0.0.1:8000/api/test'</span>).then(<span class="function"><span class="params">response</span> =&gt;</span> {<span class="built_in">console</span>.log(response.data)})
    }
}
&lt;!--ï¿¼<span class="number">1</span>--&gt;</code></pre>
</li>
</ul>
</li>
<li><p>åˆ›å»ºdjangoè·¨åŸŸä¸­é—´ä»¶</p>
<ul>
<li><p>åœ¨åº”ç”¨ä¸­åˆ›å»ºmiddlewares.pyæ–‡ä»¶</p>
</li>
<li><pre><code class="python"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin
<span class="class"><span class="keyword">class</span> <span class="title">MyTest</span><span class="params">(MiddlewareMixin)</span>:</span>
    <span class="function"><span class="keyword">def</span> <span class="title">precess_response</span><span class="params">(self,request,response)</span>:</span>
        response[<span class="string">'Access-Control-Allow-Origin'</span>] = [<span class="string">'*'</span>]
        <span class="keyword">return</span> response
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="DIFF"><figure class="iseeu highlight /diff"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="deletion">- æ³¨å†Œä¸­é—´ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="deletion">-</span></span><br></pre></td></tr></table></figure></div>
<span class="string">'app.middlewares.MyTest'</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">5. </span>åœ¨å®Œæˆäº†ä¸Šè¿°æ­¥éª¤ä¹‹å,è·¨åŸŸè¯·æ±‚çš„åŸºæœ¬è¦æ±‚å°±å®Œæˆäº†</span><br><span class="line"></span><br><span class="line"><span class="bullet">6. </span>å°†è·å¾—æ•°æ®ç»‘å®šåˆ°vueæ¨¡æ¿ä¸­å»</span><br><span class="line"></span><br><span class="line"><span class="bullet">   - </span>åœ¨æ¨¡æ¿ç‰ˆä¸­å‡†å¤‡ä¸€ä¸ªæ¥å—ç”¨çš„å˜é‡</span><br><span class="line"></span><br><span class="line"><span class="code">     -</span></span><br></pre></td></tr></table></figure></div>
django_message : <span class="string">''</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HAML"><figure class="iseeu highlight /haml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">-<span class="ruby"> åœ¨è¯·æ±‚åˆ°æ•°æ®ä¹‹åå°†æ•°æ®èµ‹äºˆè¿™ä¸ªå˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="ruby">  -</span></span><br></pre></td></tr></table></figure></div>
this.django_message = response.data.message</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li></li>
</ol>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoæ¨¡æ¿ä½¿ç”¨</title>
    <url>/blog/Django/Django_id_17.html</url>
    <content><![CDATA[<h2 id="Djangoæ¨¡æ¿ä½¿ç”¨"><a href="#Djangoæ¨¡æ¿ä½¿ç”¨" class="headerlink" title="Djangoæ¨¡æ¿ä½¿ç”¨"></a>Djangoæ¨¡æ¿ä½¿ç”¨</h2><a id="more"></a>
<ol>
<li><pre><code>for foo in msg
    forloop.counter
endfor
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - <span class="keyword">for</span>å¾ªç¯ä¸­å¯ä»¥ä½¿ç”¨forloop.counterè·å–å½“å‰å¾ªç¯çš„æ¬¡æ•°</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span></span><br></pre></td></tr></table></figure></div>
if books

else

endif
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="AUTOIT"><figure class="iseeu highlight /autoit"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="number">1.</span> <span class="keyword">if</span>å¾ªç¯,åŒ…æ‹¬<span class="keyword">elseif</span>ä¸<span class="keyword">else</span></span><br><span class="line"></span><br><span class="line"><span class="meta">## æ¨¡æ¿æ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line">å•è¡Œæ³¨é‡Š:</span><br></pre></td></tr></table></figure></div>
æ³¨é‡Šçš„å†…å®¹
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MAKEFILE"><figure class="iseeu highlight /makefile"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">å¤šè¡Œæ³¨é‡Š:</span></span><br></pre></td></tr></table></figure></div>
comment
æ³¨é‡Šçš„å†…å®¹
endcomment
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## è¿‡æ»¤å™¨:</span><br><span class="line"></span><br><span class="line">1. default</span><br><span class="line"></span><br><span class="line">   - </span><br><span class="line"></span><br><span class="line">2. length</span><br><span class="line"></span><br><span class="line">   -  </span><br><span class="line"></span><br><span class="line">3. date</span><br><span class="line"></span><br><span class="line">   - é»˜è®¤æ—¶é—´æ˜¾ç¤ºæ ¼å¼ä¸ºç¾å¼</span><br><span class="line"></span><br><span class="line">   -</span><br></pre></td></tr></table></figure>
  dete:&apos;Yå¹´-mæœˆ-dæ—¥&apos;
  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HAML"><figure class="iseeu highlight /haml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">-<span class="ruby"> é€šè¿‡è¿‡æ»¤å™¨å¯ä»¥å°†æ—¶é—´æ ¼å¼è½¬åŒ–ä¸ºæƒ³è¦çš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line"><span class="ruby">- safe,å…³é—­è‡ªåŠ¨è½¬ä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="ruby">- autoescapeæ ‡ç­¾å…³é—­è½¬ä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="ruby">  -</span></span><br></pre></td></tr></table></figure></div>
    autoescape
    æ¨¡æ¿å†…å®¹
    endautoescape
    <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - æ¨¡æ¿ç¡¬ç¼–ç ä¸ä¼šè¿›è¡Œè½¬ä¹‰</span><br><span class="line"></span><br><span class="line"><span class="comment">### è‡ªå®šä¹‰è¿‡æ»¤å™¨:</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> â€‹	åœ¨åº”ç”¨ä¸‹æ–°å»ºtemplatetagsæ–‡ä»¶å¤¹,æ­¤æ–‡ä»¶å¤¹åä¸ºå›ºå®šåç§°,ä¸å¯è‡ªå®šä¹‰</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> â€‹        åœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªpyæ–‡ä»¶ç”¨æ¥å­˜æ”¾è‡ªå®šä¹‰è¿‡æ»¤å™¨</span><br><span class="line"></span><br><span class="line">   - ```python</span><br><span class="line">     <span class="keyword">from</span> django.tempalte <span class="keyword">import</span> Library</span><br><span class="line">     <span class="comment">#åˆ›å»ºä¸€ä¸ªå®ä¾‹åŒ–Libraryå¯¹è±¡</span></span><br><span class="line">     register = Library()</span><br><span class="line">     </span><br><span class="line">     <span class="comment">#åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨å‡½æ•°</span></span><br><span class="line"><span class="meta">     @register.filter</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">mod</span><span class="params">(num)</span>:</span></span><br><span class="line">         <span class="keyword">return</span> num %<span class="number">2</span> == <span class="number">0</span></span><br></pre></td></tr></table></figure></div></code></pre></li>
<li><p>åœ¨æ¨¡æ¿ä¸­å¯¼å…¥è¿™ä¸ªè¿‡æ»¤å™¨æ–‡ä»¶</p>
<ul>
<li><pre><code>load filters
#åœ¨è¿™é‡Œè¿›è¡Œçš„æ¨¡å—å¯¼å…¥åªéœ€è¦å°†è¿‡æ»¤å™¨æ–‡ä»¶çš„åå­—å¯¼å…¥è¿›å»å°±å¯ä»¥ç›´æ¥è¿›è¡Œä½¿ç”¨äº†</code></pre></li>
</ul>
</li>
</ol>
<h3 id="ä¸€ä¸ªå‘"><a href="#ä¸€ä¸ªå‘" class="headerlink" title="ä¸€ä¸ªå‘:"></a>ä¸€ä¸ªå‘:</h3><p>â€‹    è‡ªå®šä¹‰è¿‡æ»¤å™¨æ—¶,åˆ›å»ºå‡ºæ¥çš„libraryå¯¹è±¡çš„åå­—å¿…é¡»æ˜¯register</p>
<p>â€‹    ç›®å‰è¿˜ä¸æ˜ç™½åŸå› ,ä½†æ˜¯ä½¿ç”¨äº†libraryä¹‹åä¼šå‡ºç°æ— æ³•æŸ¥è¯¢åˆ°filtersæ¨¡æ¿çš„é—®é¢˜,</p>
<h4 id="è‡ªå®šä¹‰è¿‡æ»¤å™¨æ—¶æœ€å°‘éœ€è¦æœ‰ä¸€ä¸ªå‚æ•°ä¼ å…¥-æœ€å¤šä¸¤ä¸ª"><a href="#è‡ªå®šä¹‰è¿‡æ»¤å™¨æ—¶æœ€å°‘éœ€è¦æœ‰ä¸€ä¸ªå‚æ•°ä¼ å…¥-æœ€å¤šä¸¤ä¸ª" class="headerlink" title="è‡ªå®šä¹‰è¿‡æ»¤å™¨æ—¶æœ€å°‘éœ€è¦æœ‰ä¸€ä¸ªå‚æ•°ä¼ å…¥,æœ€å¤šä¸¤ä¸ª"></a>è‡ªå®šä¹‰è¿‡æ»¤å™¨æ—¶æœ€å°‘éœ€è¦æœ‰ä¸€ä¸ªå‚æ•°ä¼ å…¥,æœ€å¤šä¸¤ä¸ª</h4>]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºvueçš„ä¸€äº›é—®é¢˜</title>
    <url>/blog/Vue/Vue_id_10.html</url>
    <content><![CDATA[<h2 id="è¸©å‘è®°å½•"><a href="#è¸©å‘è®°å½•" class="headerlink" title="è¸©å‘è®°å½•"></a>è¸©å‘è®°å½•</h2><a id="more"></a>
<h2 id="ç¬¬ä¸€ç‚¹"><a href="#ç¬¬ä¸€ç‚¹" class="headerlink" title="ç¬¬ä¸€ç‚¹"></a>ç¬¬ä¸€ç‚¹</h2><p>â€‹    æœ€åˆè€å¸ˆæ•™çš„å…¶å®æ˜¯2.0ç‰ˆæœ¬,ç›¸æ¯”èµ·æ¥,æ›´åŠ é«˜ç«¯çš„vue/cli3çš„ä»£ç æ›´åŠ ç®€æ´é«˜æ•ˆ,æˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥å­¦æ ¡ä¸å«æœ€æ–°çš„,åæ­£å½“åˆè¿™ä¸ªå‘æ˜¯è¢«æˆ‘è¸©åˆ°äº†</p>
<p>â€‹    è¿™å…¶ä¸­æœ‰ç€å¾ˆå¤šçš„é—®é¢˜,å¦‚ç¼ºå°‘ä¾èµ–åŒ…,ç¼ºå°‘å¿…å¤‡çš„ä»£ç åº“,æ—æ—æ€»æ€»çš„çº¢è‰²æŠ¥é”™åœ¨å½“æ—¶ç›´æ¥æŠŠæˆ‘æƒŠå‘†äº†</p>
<p>â€‹    å› ä¸ºåœ¨å‡ºé—®é¢˜ä¹‹å‰,æˆ‘ä¸€ç›´æ˜¯åœ¨ä½¿ç”¨webstormè¿›è¡Œä»£ç çš„ç¼–å†™,webstormæ˜¯ä¸ªå¾ˆå¥½çš„è½¯ä»¶,åŸºæœ¬ä¸Š,åªè¦ä½ è£…å¥½äº†ç¯å¢ƒ,ä»–å°±èƒ½å¸®ä½ è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œ,ä½†ä¹Ÿæ­£æ˜¯è¿™äº›,å¯¼è‡´æˆ‘å‹æ ¹æ²¡å‘ç°è¿™äº›æ½œåœ¨çš„é—®é¢˜</p>
<p>â€‹    äº‹æƒ…çš„èµ·å› ,æ˜¯å› ä¸ºæˆ‘çš„webstormåˆ°æœŸäº†â€¦â€¦<img src="/fcg22450.github.io/img/interactive/1576150667489.png" alt="1576150667489"></p>
<p>â€‹    è¿™æ˜¯ä¸€ä¸ªæ‚²ä¼¤çš„æ•…äº‹,æˆ‘çš„ç”µè„‘ä¸­å®‰è£…äº†å¾ˆå¤šç¼–è¾‘å™¨</p>
<p>â€‹    åŒ…æ‹¬webstorm,pycharm,codeblock,vscode,golangç­‰ç­‰,ä¹Ÿæ­£æ˜¯å› ä¸ºåˆ°æœŸäº†,æˆ‘ä¾¿å†³å®šæ”¶æ‹¾ä¸€ä¸‹vscode,å°†vueé—®ä»·ä½ æ”¾åˆ°vscodeä¸­å»å†™</p>
<p>â€‹    ç„¶åé—®é¢˜å°±å‡ºç°äº†.</p>
<p>å…ˆæ˜¯æ–°å»ºçš„vueæ–‡ä»¶æ— æ³•æ˜¾ç¤º,ç„¶åå°±æ˜¯ç–¯ç‹‚æŠ¥é”™,åˆ°æœ€å,æˆ‘ä¸‰ä¸ªdosçª—å£å…¨æ˜¯çº¢è‰²,æƒ¨ä¸å¿ç¹</p>
<p>äºæ˜¯å¿ç—›åˆ æ‰äº†ç”µè„‘ä¸­çš„vueæ’ä»¶,ç„¶åå¼€å§‹é‡æ–°å®‰è£…</p>
<p>ä»¥ä¸‹æ˜¯è¿™ä¸¤å¤©å®‰è£…çš„å…¨éƒ¨æ’ä»¶,ä¸æ’é™¤è¢«æˆ‘å¿˜è®°çš„å¯èƒ½</p>
<ul>
<li><p>npm install @vue/cli -g â€“save</p>
</li>
<li><p>npm install axios</p>
</li>
<li><p>npm install stylus</p>
</li>
<li><p>npm install stylus-loader</p>
</li>
<li><p>npm install style-loader</p>
</li>
<li><p>npm install css-loader</p>
</li>
<li><p>npm install pug</p>
</li>
<li><p>npm install webpack</p>
</li>
<li><p>npm install cors-js</p>
</li>
<li><p>ps:æ›´å¤šçš„æ’ä»¶ä¸€æ—¶æƒ³ä¸èµ·æ¥äº†.åæ­£,å‡¡æ˜¯æŠ¥é”™äº†çš„æ’ä»¶,æˆ‘å‡ ä¹å…¨éƒ½ä¸‹è½½äº†ä¸€é</p>
</li>
<li><p>åˆ°ç°åœ¨,ä¹‹å‰æ‰€æœ‰çš„é”™è¯¯æç¤ºå…¨éƒ¨æ¶ˆå¤±,ä¸ä»…å¦‚æ­¤,æˆ‘å‘ç°æœ€æ–°ç‰ˆæœ¬çš„vueå±…ç„¶æ˜¯4.0+???</p>
</li>
<li><p>WTF?</p>
</li>
<li><p>æˆ‘ä¹‹å‰ç”¨çš„å¯æ˜¯2.6å•Šæ··è›‹</p>
</li>
<li><p>éš¾æ€ªnanarinoç»™æˆ‘çš„é¡¹ç›®é‚£ä¹ˆç®€å•,æ„Ÿæƒ…äººå®¶çš„å·²ç»æ˜¯é¢†å…ˆå¥½å‡ ä»£äº†</p>
<p>ä¸´è¿‘è€ƒè¯•äº†,æœ¬æ¥ä»¥ä¸ºè¿™æ¬¡è€ƒè¯•ç¨³äº†,ç°åœ¨çœ‹æ¥,è¦æ˜¯ä¸èµ¶ç´§æ‘¸æ¸…æ¥šæ–°ç‰ˆæœ¬çš„å˜åŒ–,ææ€•è¿™æ¬¡è¦è·ªå•Š!</p>
<p>.</p>
</li>
</ul>
<hr>
<p>ä½¿ç”¨vue cli 4 çš„æ³¨æ„äº‹é¡¹</p>
<ul>
<li>åˆ›å»ºè¯­å¥      vue create projects_name</li>
<li>ä¸‹è½½æ¨¡å—      npm install models_name   -g â€“save</li>
<li>æ„å»ºvueå·¥ç¨‹ä¹‹åç¬¬ä¸€ç‚¹å°±æ˜¯é‡æ–°ä¸‹è½½axiosä¸pugç›¸å…³ä¾èµ–,å…·ä½“å¯ä»¥æ ¹æ®æŠ¥é”™æç¤ºè¿›è¡Œæ“ä½œ</li>
</ul>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoè·¯ç”±å‚æ•°æ•è·</title>
    <url>/blog/Django/Django_id_16.html</url>
    <content><![CDATA[<h2 id="URLå‚æ•°æ•è·"><a href="#URLå‚æ•°æ•è·" class="headerlink" title="URLå‚æ•°æ•è·"></a>URLå‚æ•°æ•è·</h2><ol>
<li><p>å‚æ•°æ•è·çš„æ–¹æ³•æœ‰ä¸¤ç§</p>
<a id="more"></a>
<ul>
<li><p>ä½ç½®å‚æ•°ä¼ å‚</p>
<ul>
<li><p>ä½¿ç”¨ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼è·å–å‚æ•°å¹¶ä¼ å…¥è§†å›¾å‡½æ•°ä¸­</p>
</li>
<li><pre><code class="python"><span class="keyword">from</span> django.urls <span class="keyword">import</span> re_path,path

urlpatterns = [
    re_path(râ€™index/(\d+)â€˜,veiws.index),
]
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">- å…³é”®å­—å‚æ•°ä¼ å‚</span><br><span class="line"></span><br><span class="line">  - ä½¿ç”¨å…³é”®å­—å‚æ•°ä¼ å‚å’Œä½ç½®å‚æ•°æ˜¯ä¸€æ ·çš„,åŒºåˆ«å°±æ˜¯å†æ­£åˆ™è¡¨è¾¾å¼ä¸­ç»™è¿™ä¸ªå­—æ®µèµ·ä¸€ä¸ªåˆ«å</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    from django.urls import re_path,path</span><br><span class="line">    </span><br><span class="line">    urlpatterns = [</span><br><span class="line">    	re_path(râ€™index/(?P&lt;num&gt;\d+)â€˜,veiws.index),</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>


</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoåå°ç®¡ç†æ“ä½œ</title>
    <url>/blog/Django/Django_id_15.html</url>
    <content><![CDATA[<h2 id="Djangoåå°ç®¡ç†æ“ä½œ"><a href="#Djangoåå°ç®¡ç†æ“ä½œ" class="headerlink" title="Djangoåå°ç®¡ç†æ“ä½œ"></a>Djangoåå°ç®¡ç†æ“ä½œ</h2><a id="more"></a>
<p>#åå°ç®¡ç†ç³»ç»Ÿä¸ºadmin.pyæ–‡ä»¶</p>
<h2 id="1-æœ¬åœ°åŒ–"><a href="#1-æœ¬åœ°åŒ–" class="headerlink" title="1).æœ¬åœ°åŒ–"></a>1).æœ¬åœ°åŒ–</h2><ul>
<li><p>â€‹    ä¿®æ”¹è¯­è¨€æ ¼å¼</p>
<ul>
<li><p>ä¿®æ”¹ä¸ºä¸­æ–‡:zh-hans</p>
</li>
<li><pre><code class="python">LANGUAGE_CODE = <span class="string">'zh-hans'</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">- </span>â€‹	ä¿®æ”¹æ—¶åŒº</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span>ä¿®æ”¹ä¸ºä¸­å›½æ—¶åŒº</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span>æ²¡æœ‰åŒ—äº¬çš„æ—¶é—´,æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ä¸Šæµ·</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span>Asia/shanghai</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span><span class="code">```</span>python</span><br><span class="line"><span class="code">    TIME_ZONE = 'Asia/shanghai'</span></span><br></pre></td></tr></table></figure></div>
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="2-åˆ›å»ºç®¡ç†å‘˜"><a href="#2-åˆ›å»ºç®¡ç†å‘˜" class="headerlink" title="2).åˆ›å»ºç®¡ç†å‘˜"></a>2).åˆ›å»ºç®¡ç†å‘˜</h2><ul>
<li><p>åˆ›å»ºè¶…çº§ç®¡ç†å‘˜</p>
</li>
<li><pre><code>python manage.py createsuperuser
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- ä½¿ç”¨ç®¡ç†å‘˜å¸å·å¯ä»¥ç™»å…¥åå°ç®¡ç†ç•Œé¢è¿›è¡Œæ“ä½œ</span><br><span class="line"></span><br><span class="line"><span class="comment">## 3).æ³¨å†Œè®¾å®šå¥½çš„æ¨¡å‹ç±»</span></span><br><span class="line"></span><br><span class="line">- åœ¨å¯¹åº”æ–‡ä»¶çš„amdinæ–‡ä»¶ä¸­æ³¨å†Œæ¨¡å‹ç±»</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">HeroInfoAdmin</span><span class="params">(admin.ModelAdmin)</span>:</span></span><br><span class="line">        list_display = [<span class="string">'hname'</span>, <span class="string">'hcomment'</span>, <span class="string">'hbook_id'</span>, <span class="string">'hbook_id'</span>]</span><br><span class="line">    <span class="comment">#åœ¨è¿™é‡Œå¯ä»¥è®¾å®šå±•ç¤ºå‡ºæ¥çš„å­—æ®µæ€»è§ˆ</span></span><br><span class="line">    <span class="comment">#ä½¿ç”¨adminæ¨¡å—ä¸­çš„site.registerè¿›è¡Œæ³¨å†Œ</span></span><br><span class="line">    </span><br><span class="line">    admin.site.register(BookCateInfo,BookCateInfoAdmin)</span><br></pre></td></tr></table></figure></div></code></pre></li>
<li><p>åœ¨åå°ç®¡ç†ç•Œé¢ä¸­æƒ³è¦å°†æ¯ä¸€é¡¹æ•°æ®åº“ä¸­çš„æ•°æ®æ¸²æŸ“å‡ºæ¥éœ€è¦åœ¨æ¨¡å‹ç±»ä¸­é‡å†™<strong>str</strong>æ–¹æ³•</p>
<ul>
<li><pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span>
    <span class="keyword">return</span> self.btitle
<span class="comment">#é‡å†™stræ–¹æ³•,ä¼šä½¿è¿™ä¸ªè¡¨æ¸²æŸ“åœ¨ç®¡ç†ç•Œé¢æ—¶çš„æ ·å¼æ”¹å˜</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ELIXIR"><figure class="iseeu highlight /elixir"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- åœ¨æ•°æ®åº“æ¨¡å‹ä¸­è®¾å®šæ–¹æ³•</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">user</span></span>(<span class="keyword">self</span>)<span class="symbol">:</span></span><br><span class="line">        <span class="keyword">return</span> self.username</span><br><span class="line">    user.admin_order_field = <span class="string">'username'</span></span><br><span class="line">    <span class="comment">#ä¸ºåˆ›å»ºçš„æ–¹æ³•å­—æ®µæ·»åŠ æ’åºå±æ€§</span></span><br><span class="line">    </span><br><span class="line">    user.short_description = <span class="string">'ç”¨æˆ·å'</span></span><br><span class="line">    <span class="comment">#ä¸ºåˆ›å»ºçš„æ–¹æ³•é™„åŠ ä¸€ä¸ªåˆ«åç”¨äºå±•ç¤º</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºè‡ªå®šä¹‰æ¨¡å‹ç±»çš„æ–¹æ³•æ—¶ä½¿ç”¨</p>
</li>
</ul>
</li>
</ul>
<hr>
<h3 id="åœ¨æ³¨å†Œæ¨¡å‹ç±»æ—¶å¯ä»¥æ·»åŠ çš„å±æ€§"><a href="#åœ¨æ³¨å†Œæ¨¡å‹ç±»æ—¶å¯ä»¥æ·»åŠ çš„å±æ€§" class="headerlink" title="åœ¨æ³¨å†Œæ¨¡å‹ç±»æ—¶å¯ä»¥æ·»åŠ çš„å±æ€§:"></a>åœ¨æ³¨å†Œæ¨¡å‹ç±»æ—¶å¯ä»¥æ·»åŠ çš„å±æ€§:</h3><ul>
<li><p>list_display</p>
<ul>
<li>è®¾å®šç®¡ç†é¡µé¢ä¸­å¨´ç†Ÿçš„æ¨¡å‹ç±»å­—æ®µ</li>
<li>è¿™ä¸ªå­—æ®µå¯ä»¥å¯ä»¥ä½¿ç”¨æ¨¡å‹ç±»ä¸­è‡ªå®šä¹‰å¥½çš„æ–¹æ³•</li>
</ul>
</li>
<li><p>list_per_page</p>
<ul>
<li>è®¾å®šç®¡ç†é¡µé¢ä¸­æ¯é¡µæ˜¾ç¤ºçš„æ•°æ®é‡</li>
<li>list_per_page = 10(æ¯é¡µå±•ç¤ºåæ¡æ•°æ®)</li>
</ul>
</li>
<li><p>action_on_bottom</p>
<ul>
<li>è®¾å®šä¸‹æ–¹çš„æ“ä½œæ¡†</li>
<li><img src="/fcg22450.github.io/img/django/1574901352508.png" alt="1574901352508"></li>
<li>åœ¨action_on_bottom = Trueæ—¶,å°†ä¼šåœ¨å±•ç¤ºé¡µçš„ä¸‹æ–¹å†æ¬¡å¢åŠ ä¸€ä¸ªæ“ä½œæ¡†</li>
<li>åº•éƒ¨æ“ä½œæ¡†åœ¨ä¸è®¾å®šçš„æ—¶å€™é»˜è®¤ä¸ºFalse</li>
</ul>
</li>
<li><p>action_on_top</p>
<ul>
<li>è®¾å®šä¸Šæ–¹çš„æ“ä½œæ¡†</li>
<li><img src="/fcg22450.github.io/img/django/1574901605253.png" alt="1574901605253"></li>
<li>åœ¨action_on_top = Falseæ—¶,å°†ä¼šå–æ¶ˆå±•ç¤ºé¡µä¸Šæ–¹çš„æ“ä½œæ¡†,</li>
<li>é¡¶éƒ¨æ“ä½œæ¡†é»˜è®¤ä¸ºTrue</li>
</ul>
</li>
<li><p>list_filter</p>
<ul>
<li><p>åœ¨é¡µé¢å³ä¾§æ·»åŠ å¿«é€Ÿè¿‡æ»¤é€‰é¡¹,è¯¥é€‰é¡¹éµå¾ªæ³¨å†Œæ¨¡å‹ç±»æ—¶çš„çº¦æŸè¿›è¡Œ</p>
</li>
<li><pre><code class="python">list_filter = [<span class="string">'username'</span>]
<span class="comment">#è¿™ä¸ªå±æ€§çš„å‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨,å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ è¦è¿‡æ»¤çš„å­—æ®µå</span>
<span class="comment">#è¿‡æ»¤å™¨å°†ä¼šåˆ—å‡ºæ‰€æœ‰çš„å­—æ®µåæ–¹ä¾¿é€‰æ‹©</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">- </span>search_fields</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span>åœ¨é¡µé¢é¡¶éƒ¨æ·»åŠ æœç´¢æ¡†</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span><span class="code">```</span>python</span><br><span class="line"><span class="code">    search_fields = ['username']</span></span><br><span class="line"><span class="code">    #è¿™ä¸ªå±æ€§çš„å‚æ•°æ˜¯ä¸€ä¸ªåˆ—è¡¨,å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ å­—æ®µ</span></span><br><span class="line"><span class="code">    #åœ¨æ‰§è¡Œæœç´¢æ—¶,å°†ä¼šåœ¨æŒ‡å®šå­—æ®µçš„æ•°æ®ä¸­è¿›è¡ŒåŒ¹é…</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå…³é—­debugæ¨¡å¼ä¹‹åçš„é™æ€æ–‡ä»¶è®¿é—®</title>
    <url>/blog/Django/Django_id_14.html</url>
    <content><![CDATA[<h2 id="Djangoå…³é—­debugæ¨¡å¼ä¹‹åçš„é™æ€æ–‡ä»¶è®¿é—®"><a href="#Djangoå…³é—­debugæ¨¡å¼ä¹‹åçš„é™æ€æ–‡ä»¶è®¿é—®" class="headerlink" title="Djangoå…³é—­debugæ¨¡å¼ä¹‹åçš„é™æ€æ–‡ä»¶è®¿é—®"></a>Djangoå…³é—­debugæ¨¡å¼ä¹‹åçš„é™æ€æ–‡ä»¶è®¿é—®</h2><a id="more"></a>
<ol>
<li><pre><code>STATIC_URL = &apos;/static/&apos;
#é…ç½®é»˜è®¤çš„staticé™æ€æ–‡ä»¶å¤¹ä½ç½®
STATIC_ROOT = &apos;static&apos;
STATICFILES_DIRS = [
    os.path.join(BASE_DIR,&apos;/static/&apos;)
]
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ROUTEROS"><figure class="iseeu highlight /routeros"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   - ### è®¾ç½®setting</span><br><span class="line"></span><br><span class="line">2. è®¾ç½®url</span><br><span class="line"></span><br><span class="line">   1. ```.</span><br><span class="line">      <span class="keyword">from</span> django.views import static ##æ–°å¢</span><br><span class="line">      <span class="keyword">from</span> django.conf import<span class="built_in"> settings </span>##æ–°å¢</span><br><span class="line">      <span class="keyword">from</span> django.conf.urls import url ##æ–°å¢</span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">      <span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span><span class="built_in">..</span></span><br><span class="line">          url(r<span class="string">'^static/(?P&lt;path&gt;.*)$'</span>, static.serve,</span><br><span class="line">            &#123;<span class="string">'document_root'</span>: settings.STATIC_ROOT&#125;, <span class="attribute">name</span>=<span class="string">'static'</span>),</span><br></pre></td></tr></table></figure></div>

2. å›ºå®šå…¬å¼å¯ä»¥ç›´æ¥ä½¿ç”¨</code></pre></li>
<li><p>æ¨¡æ¿ä¸­æ¸²æŸ“</p>
<ol>
<li><pre><code>&lt;div id=&quot;box1&quot;&gt;&lt;img src=&quot;{% url 'static' path='logo/logo0.png' %}&quot; alt=&quot;&quot;&gt;&lt;/div&gt;</code></pre></li>
<li><p>ä½¿ç”¨urlåè½¬è·¯ç”±</p>
</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoåè½¬url</title>
    <url>/blog/Django/Django_id_13.html</url>
    <content><![CDATA[<h2 id="Djangoåè½¬url"><a href="#Djangoåè½¬url" class="headerlink" title="Djangoåè½¬url"></a>Djangoåè½¬url</h2><a id="more"></a>
<ol>
<li><h3 id="åè½¬url"><a href="#åè½¬url" class="headerlink" title="åè½¬url:"></a>åè½¬url:</h3><ol>
<li>ä½¿ç”¨æ¨¡æ¿è¯­è¨€url</li>
</ol>
</li>
</ol>
<ol start="2">
<li><p>åœ¨urlå®šä¹‰ä¸­è®¾å®šè·¯ç”±å‡½æ•°å</p>
<ul>
<li>path(â€˜indexâ€™,views.index,name=â€˜indexâ€™)</li>
</ul>
</li>
<li><p>å…³äºåº”ç”¨æ³¨å†Œçš„è·¯ç”±çš„åè½¬ä½¿ç”¨</p>
<ol>
<li>æ³¨å†Œåº”ç”¨è·¯ç”±æ—¶æ·»åŠ namespace<ul>
<li>path(â€˜â€™,include(â€˜besateâ€™,namespace=â€˜baseteâ€™))</li>
</ul>
</li>
<li>åœ¨åº”ç”¨çš„urlsæ–‡ä»¶ä¸­æ·»åŠ <ul>
<li>app_name = â€˜besateâ€™</li>
</ul>
</li>
<li>ä½¿ç”¨åè½¬<ul>
<li>url â€˜besate:indexâ€™</li>
</ul>
</li>
</ol>
</li>
<li><p>å…³äºå¸¦å‚æ•°çš„è·¯ç”±çš„åè½¬ç¼–è¯‘</p>
<ol>
<li><pre><code>url â€˜indexâ€™ å‚æ•°æ•°å€¼
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="ANGELSCRIPT"><figure class="iseeu highlight /angelscript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   ä½ç½®å‚æ•°</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span></span><br></pre></td></tr></table></figure></div>
url â€˜indexâ€™ å‚æ•°å=å‚æ•°æ•°å€¼
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="code">      å‘½åå‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">2. </span>åœ¨è§†å›¾ä¸­è¿›è¡Œåè½¬urlæ“ä½œ</span><br><span class="line"></span><br><span class="line"><span class="bullet">   1. </span>å¯¼å…¥æ¨¡å—</span><br><span class="line"></span><br><span class="line"><span class="bullet">      - </span>åŸå§‹çš„æ–¹æ³•æ˜¯ä»å¦ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å…¥,ä½†æ˜¯3.0ä¸­åŒ…å«äº†è¿™ä¸ªæ¨¡å—</span><br><span class="line"></span><br><span class="line"><span class="bullet">      - </span>æ‰€ä»¥è¿™ä¸ªæ¨¡å—ç°åœ¨é›†æˆåˆ°äº†django.shortcutsä¸­,åªéœ€è¦å†å¯¼å…¥renderçš„æ—¶å€™é¡ºä¾¿å°±å¯ä»¥ä¸€å¹¶å¯¼å…¥è¿›å»äº†</span><br><span class="line"></span><br><span class="line"><span class="bullet">      - </span><span class="code">```</span>python</span><br><span class="line"><span class="code">        from django.shortcuts import render,reverse,redirect</span></span><br></pre></td></tr></table></figure></div></code></pre></li>
</ol>
</li>
<li><p>ä¼ å…¥å‚æ•°</p>
<ul>
<li>ä¼ å…¥ä½ç½®å‚æ•°æ—¶<ul>
<li>reverse(â€˜three:indexâ€™,args=(1,2,3))</li>
</ul>
</li>
<li>ä¼ å…¥å‘½åå‚æ•°æ—¶<ul>
<li>reverse(â€˜three:indexâ€™,kwargs={â€˜aâ€™:1,â€˜bâ€™:2})</li>
</ul>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoè¡¨å•æäº¤</title>
    <url>/blog/Django/Django_id_12.html</url>
    <content><![CDATA[<h2 id="Djangoè¡¨å•æäº¤"><a href="#Djangoè¡¨å•æäº¤" class="headerlink" title="Djangoè¡¨å•æäº¤"></a>Djangoè¡¨å•æäº¤</h2><a id="more"></a>
<ul>
<li>Djangoè¡¨å•æ•°æ®æäº¤æ¶‰åŠåˆ°è§†å›¾å‡½æ•°ä¸­çš„requestå‚æ•°<ul>
<li>åœ¨djangoä¸­, requestå¯¹è±¡å°è£…äº†è¡¨å•æäº¤çš„æ•°æ®</li>
<li><strong><u><em>request.GET</u></em></strong>ä¸­å­˜å‚¨çš„æ˜¯getæ–¹æ³•æäº¤çš„æ•°æ®</li>
<li><strong><u><em>request.POST</u></em></strong>ä¸­å­˜å‚¨çš„æ˜¯postæ–¹æ³•æäº¤çš„æ•°æ®</li>
</ul>
</li>
<li>è¿™äº›æ–¹æ³•ä½¿ç”¨getæ–¹æ³•å¯ä»¥è·å–åˆ°å¯¹åº”çš„å€¼,è·å–çš„åç§°ä¸ºè¡¨å•ä¸­æäº¤çš„æ•°æ®çš„åå­—</li>
<li>è¿™äº›æ•°æ®å°†ä¼šåœ¨æäº¤ä¹‹åè‡ªåŠ¨å‚¨å­˜åˆ°requestä¸­å»</li>
</ul>
<h2 id="requestå…¶ä»–æ–¹æ³•"><a href="#requestå…¶ä»–æ–¹æ³•" class="headerlink" title="requestå…¶ä»–æ–¹æ³•:"></a>requestå…¶ä»–æ–¹æ³•:</h2><ul>
<li><p>get()</p>
<ul>
<li>è·å–requestå¯¹è±¡ä¸­å‚¨å­˜çš„æ•°æ®</li>
</ul>
</li>
<li><p>path</p>
<ul>
<li>è·å–å½“å‰è®¿é—®çš„urlåœ°å€</li>
</ul>
</li>
<li><p>method</p>
<ul>
<li>è·å–å½“å‰çš„è®¿é—®æ–¹æ³•</li>
</ul>
</li>
<li><p>POST</p>
<ul>
<li>å­˜å‚¨æ‰€æœ‰ä½¿ç”¨postæ–¹æ³•æäº¤è¿‡æ¥çš„æ•°æ®</li>
</ul>
</li>
<li><p>GET</p>
<ul>
<li>å­˜å‚¨æ‰€æœ‰ä½¿ç”¨getæ–¹æ³•æäº¤è¿‡æ¥çš„æ•°æ®</li>
</ul>
</li>
<li><p>FILES</p>
<ul>
<li>å­˜å‚¨æäº¤è¿‡æ¥çš„æ–‡ä»¶å¯¹è±¡</li>
</ul>
</li>
<li><p>COOKIES</p>
<ul>
<li>å­˜å‚¨cookieä¿¡æ¯</li>
</ul>
</li>
<li><p>session</p>
<ul>
<li><p>å­˜å‚¨sessionä¿¡æ¯</p>
</li>
<li><p>sessionä½¿ç”¨æ–¹æ³•</p>
<ol>
<li><p>ç›´æ¥ä½¿ç”¨å­—å…¸çš„é”®å€¼å¯¹è·å–æ–¹æ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session[<span class="string">'cookieå'</span>]</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>ä½¿ç”¨getæ–¹æ³•è·å–,å¯ä»¥è®¾ç½®é»˜è®¤å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.get(<span class="string">'cookieå,default="é»˜è®¤å€¼")</span></span><br></pre></td></tr></table></figure></div>
</li>
<li><p>clear,åˆ é™¤sessionä¸­ä¿å­˜çš„æ•°æ®,ä½†æ˜¯åˆ é™¤æ‰çš„åªæ˜¯å€¼</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.clear()</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>flash,åˆ é™¤æ•´æ¡æ•°æ®,å®Œå…¨åˆ é™¤æ‰€æœ‰æ•°æ®,æ•°æ®è¡¨å®Œå…¨æ¸…é™¤</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.flash()</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>del    åˆ é™¤ç›®æ ‡æ•°æ®çš„æ‰€æœ‰å†…å®¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">del</span> request.session[<span class="string">'cookie'</span>]</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>è®¾ç½®sessionè¿‡æœŸæ—¶é—´</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.set_expiry(value)</span><br></pre></td></tr></table></figure></div>

<ul>
<li>å½“æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ—¶å€™,é»˜è®¤å°†ä¼šåœ¨ä¸¤å‘¨ä¹‹åè¿‡æœŸ</li>
<li>å½“valueå€¼ä¸º0çš„æ—¶å€™,å°†ä¼šåœ¨å…³é—­æµè§ˆå™¨çš„æ—¶å€™è¿‡æœŸ</li>
<li>å½“valueå¤§äº0çš„æ—¶å€™,å°†ä¼šåœ¨valueç§’ä¹‹åè¿‡æœŸ</li>
</ul>
</li>
<li><p>has_key   åˆ¤æ–­sessionä¸­æœ‰æ²¡æœ‰å¯¹åº”çš„cookie</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">request.session.has_key(<span class="string">'username'</span>)</span><br></pre></td></tr></table></figure></div>







</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="ajaxæ–¹æ³•æäº¤æ•°æ®"><a href="#ajaxæ–¹æ³•æäº¤æ•°æ®" class="headerlink" title="ajaxæ–¹æ³•æäº¤æ•°æ®"></a>ajaxæ–¹æ³•æäº¤æ•°æ®</h2><h3 id="ajaxè¯·æ±‚ä¸ºå¼‚æ­¥è¯·æ±‚"><a href="#ajaxè¯·æ±‚ä¸ºå¼‚æ­¥è¯·æ±‚" class="headerlink" title="ajaxè¯·æ±‚ä¸ºå¼‚æ­¥è¯·æ±‚"></a>ajaxè¯·æ±‚ä¸ºå¼‚æ­¥è¯·æ±‚</h3><p>async : true  </p>
<p>è¯¥é€‰é¡¹é»˜è®¤ä¸ºtrue,å³å¼‚æ­¥è¯·æ±‚</p>
<p>â€‹    å¼‚æ­¥è¯·æ±‚æ—¶ä¼˜å…ˆæ‰§è¡Œå…¶ä»–çš„javascriptä»£ç ,ç„¶åæ‰ä¼šæ‰§è¡Œajaxè¯·æ±‚çš„ä»£ç </p>
<p>è®¾å®šä¸ºfalseå³ä¸ºåŒæ­¥è¯·æ±‚</p>
<hr>
<p>ä½¿ç”¨ajaxå¯ä»¥å®ç°å±€éƒ¨åˆ·æ–°</p>
<hr>
<ol>
<li><p>ä½¿ç”¨ajaxæ–¹æ³•æäº¤æ•°æ®</p>
<ul>
<li><pre><code class="javascript">$.ajax({
    <span class="string">'url'</span>:<span class="string">'/ajax_handle'</span>,
    <span class="string">'dataType'</span>:<span class="string">'json'</span>,
}).success(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>{
    alert(data.res)
})
&lt;!--ï¿¼<span class="number">7</span>--&gt;</code></pre>
</li>
<li><p>ä¸Šè¿°ä¸ºajaxä¿¡æ¯å¤„ç†å‡½æ•°</p>
</li>
<li><pre><code class="python">urlpatterns = [
    <span class="comment">#æ„å»ºç”¨äºå¤„ç†è¯·æ±‚çš„ç½‘é¡µurl</span>
    path(<span class="string">'ajax_handle/'</span>,views.ajax_handle),
]
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">   - </span>ä»¥ä¸Šå°±æ˜¯åŸºç¡€çš„ajaxè¯·æ±‚æ„å»º</span><br><span class="line"></span><br><span class="line"><span class="bullet">   - </span>ajaxè¯·æ±‚ç¦æ­¢è¿”å›ä¸€ä¸ªé¡µé¢,è¿”å›çš„é¡µé¢å°†ä¼šæ— æ³•æ­£å¸¸æ˜¾ç¤º</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">1. </span>## è¸©å‘è¯¦æƒ…</span><br><span class="line"></span><br><span class="line">   -</span><br></pre></td></tr></table></figure></div>
APPEND_SLASH=<span class="literal">False</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HAML"><figure class="iseeu highlight /haml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">  -<span class="ruby"> è¸©å‘ç¬¬ä¸€æ¡</span></span><br><span class="line"><span class="ruby">    - ä½¿ç”¨ajaxè¿›è¡Œè¯·æ±‚æ—¶æ— æ³•ç»•è¿‡çš„ä¸€ä¸ªå,å¿…é¡»åœ¨settingsé…ç½®æ–‡ä»¶ä¹‹ä¸­é…ç½®è¿™æ¡æ•°æ®æ‰èƒ½ç»§ç»­è¿›è¡Œä¸‹å»,è®©äººæƒŠè®¶çš„æ˜¯,æ•™å­¦è§†é¢‘ä¹‹ä¸­å±…ç„¶æ²¡æœ‰æåˆ°è¿™ä¸ªé—®é¢˜,æš‚å®šä¸ºdjangoç‰ˆæœ¬è¿‡é«˜å¯¼è‡´çš„é…ç½®æ–‡ä»¶å·®å¼‚,ä»è€Œå‡ºç°çš„é—®é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="ruby">-</span></span><br></pre></td></tr></table></figure></div>
$.ajax({
    <span class="string">'url'</span>:<span class="string">'/ajax_handle/'</span>,
    <span class="string">'type'</span>:<span class="string">'POST'</span>,
    <span class="string">'dataType'</span>:<span class="string">'json'</span>,
    <span class="string">'data'</span>:{
        username:username,
        password:password
    }
}).success(function (data) {
    <span class="keyword">if</span> (data.res == <span class="number">1</span>){
        location.href = <span class="string">'/admin/'</span>
    }<span class="keyword">else</span>{
        $(<span class="string">"#err"</span>).show().html(<span class="string">'è´¦å·åæˆ–å¯†ç é”™è¯¯'</span>)
    }
})</code></pre>
<ul>
<li><p>è¸©å‘ç¬¬äºŒæ¡</p>
<ul>
<li>åœ¨è·¯ç”±å‡½æ•°æ–¹é¢,djangoçš„è·¯ç”±è®¾å®šæ¯”èµ·flaskæ›´åŠ ä¸¥è°¨<ul>
<li>ä¹¦å†™è·¯ç”±é‡å®šå‘æ—¶,å¦‚æœä½ å†™çš„è·¯ç”±ä¸ºâ€admin/â€œè¿™æ ·çš„æ ¼å¼<ul>
<li>â€‹            é‚£ä¹ˆæœ€ç»ˆè¯·æ±‚çš„ç½‘å€å®é™…ä¸Šä¸º;</li>
<li>â€‹            å½“å‰ç½‘é¡µç½‘å€çš„è·¯ç”±åé¢åŠ ä¸Šä½ è¦è·³è½¬çš„è·¯ç”±<ul>
<li>â€‹         å³:    127.0.0.1:8000/login/admin</li>
</ul>
</li>
<li>åœ¨ä¸æ·»åŠ å‰ç½®/çš„æƒ…å†µä¸‹,é»˜è®¤ä¸ºåœ¨å½“å‰ç½‘å€çš„åŸºç¡€ä¸Šå†æ¬¡è¿›è¡Œè·¯ç”±è®¿é—®</li>
</ul>
</li>
<li>æ— è®ºæ˜¯ajaxé‡Œé¢çš„urlè¯·æ±‚åœ°å€,è¿˜æ˜¯JavaScriptåŸºç¡€ä¸Šè¿›è¡Œçš„é‡å®šå‘,éƒ½éœ€è¦æ³¨æ„è¿™ä¸€ç‚¹</li>
<li>åä¹‹,å¦‚æœåœ¨è·¯ç”±å‰é¢åŠ ä¸Š/,è®¿é—®çš„ç•Œé¢å®é™…ä¸Šå°±æ˜¯åœ¨æœ€åŸºç¡€çš„127.0.0.1:8000/çš„åŸºç¡€ä¸Šè¿›è¡Œçš„è·¯ç”±è®¿é—®</li>
</ul>
</li>
</ul>
</li>
<li><h2 id="è¿™äº›å‘éœ€è¦è°¨è®°"><a href="#è¿™äº›å‘éœ€è¦è°¨è®°" class="headerlink" title="è¿™äº›å‘éœ€è¦è°¨è®°"></a>è¿™äº›å‘éœ€è¦è°¨è®°</h2></li>
</ul>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoç¼–è¾‘é¡µé€‰é¡¹</title>
    <url>/blog/Django/Django_id_11.html</url>
    <content><![CDATA[<h2 id="Djangoç¼–è¾‘é¡µé€‰é¡¹"><a href="#Djangoç¼–è¾‘é¡µé€‰é¡¹" class="headerlink" title="Djangoç¼–è¾‘é¡µé€‰é¡¹"></a>Djangoç¼–è¾‘é¡µé€‰é¡¹</h2><a id="more"></a>
<ol>
<li><h3 id="è®¾å®šç¼–è¾‘é¡µæ•°æ®æ˜¾ç¤º"><a href="#è®¾å®šç¼–è¾‘é¡µæ•°æ®æ˜¾ç¤º" class="headerlink" title="è®¾å®šç¼–è¾‘é¡µæ•°æ®æ˜¾ç¤º"></a>è®¾å®šç¼–è¾‘é¡µæ•°æ®æ˜¾ç¤º</h3><ul>
<li><p>è®¾å®šæ˜¾ç¤ºé¡ºåº     fields</p>
<ul>
<li><p>è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå­—å…¸,å­—å…¸ä¸­å°†ç¼–è¾‘é¡µé¢çš„å­—æ®µæŒ‰ç…§æƒ³è¦çš„é¡ºåºæ’åˆ—å¥½</p>
</li>
<li><pre><code class="python">fields = [<span class="string">'username'</span>,<span class="string">'password'</span>]
<figure class="highlight 1c"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- è®¾å®šæ˜¾ç¤ºé¡ºåº,è¿™ä¸ªè®¾å®šæ˜¯åˆ†å—è®¾å®š,å³å°†ç¼–è¾‘é¡µåˆ†ä¸ºå‡ ä¸ªå—       fieldsets</span><br><span class="line"></span><br><span class="line">  - è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå…ƒç»„,å…ƒç»„ä¸­åŒ…å«ç€å…ƒç»„,å¹¶æŒ‰ç…§é‡Œé¢çš„å…ƒç»„åˆ†æˆå—</span><br><span class="line"></span><br><span class="line">  - ```python</span><br><span class="line">    fieldsets = (</span><br><span class="line">    	('åå­—',&#123;'fields':['username']&#125;),</span><br><span class="line">        <span class="meta">#è®¾å®šå—æ—¶,å…ƒç»„çš„ç¬¬ä¸€ä¸ªå€¼æ˜¯è¿™ä¸ªå—çš„åç§°,ç¬¬äºŒä¸ªå€¼æ˜¯ä¸€ä¸ªå­—å…¸,é”®ä¸º   fields  ,å€¼ä¸ºä¸€ä¸ªåˆ—è¡¨,å…¶ä¸­ä¿å­˜çš„æ˜¯è¦å±•ç¤ºåœ¨è¿™ä¸ªå—ä¸­çš„å­—æ®µ</span></span><br><span class="line">        ('å¯†ç ',&#123;'fields':['password']&#125;)</span><br><span class="line">        <span class="meta">#æ— è®ºå¦‚ä½•è®¾å®š,éµå¾ªåŸºæœ¬çš„è§„åˆ™,å­—å…¸çš„é”®éƒ½æ˜¯fields,å€¼éƒ½æ˜¯ä¸€ä¸ªåˆ—è¡¨</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>è®¾å®šä¸€ç±»æ¨¡å‹ç¼–è¾‘æ—¶æ˜¾ç¤ºå­—ç±»æ¨¡å‹æ•°æ®</p>
<ul>
<li><p>ç¬¬ä¸€ç§:</p>
<ul>
<li><pre><code class="python"><span class="class"><span class="keyword">class</span> <span class="title">Power_list_StackedInline</span><span class="params">(admin.StackedInline)</span>:</span>
    model = Basic_information_of_characters
    <span class="comment">#modelå±æ€§çš„å€¼ä¸ºè¿™ä¸ªè¡¨å¯¹åº”çš„å¤šç±»è¡¨çš„å¯¹è±¡</span>
    extra = <span class="number">3</span>
    <span class="comment">#åœ¨æ˜¾ç¤ºå­ç±»çš„æ—¶å€™ç•™ä¸‰ä¸ªç©ºç™½çš„å­—ç±»æ–¹ä¾¿æ·»åŠ å’Œç¼–è¾‘</span>

<span class="comment">#å°†è¿™ä¸ªç±»åœ¨æ¨¡å‹ç±»çº¦æŸä¸­å¼•å…¥</span>
Inlines = [Power_list_StackedInline]
<span class="comment">#inlineså±æ€§çš„å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨</span>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MARKDOWN"><figure class="iseeu highlight /markdown"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="bullet">  - </span>è¿™ä¸ªç±»è®¾å®šçš„æ˜¯æ˜¾ç¤ºç»“æœæ˜¯å°†å¯¹åº”çš„å­ç±»æ•°æ®åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªçš„å—</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>ç¬¬äºŒç§</span><br><span class="line"></span><br><span class="line"><span class="bullet">  - </span><span class="code">```</span>python</span><br><span class="line"><span class="code">    class Power_list_TabularInline(admin.TabularInline):</span></span><br><span class="line"><span class="code">    	model = Basic_information_of_characters</span></span><br><span class="line"><span class="code">    	extra = 3</span></span><br></pre></td></tr></table></figure></div></code></pre>
</li>
<li><p>ä»è®¾å®šæ–¹æ³•å’Œä½¿ç”¨æ–¹æ³•æ¥è¯´,å’Œç¬¬ä¸€ç§æ–¹æ³•æ²¡ä»€ä¹ˆä¸¤æ ·,å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ç»§æ‰¿çš„å¯¹è±¡ä¸ä¸€æ ·</p>
</li>
<li><p>è¿™ä¸ªæ–¹æ³•å±•ç¤ºå‡ºæ¥çš„å­ç±»æ˜¯ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºå‡ºæ¥çš„</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>ORMæ¡†æ¶</title>
    <url>/blog/Django/Django_id_25.html</url>
    <content><![CDATA[<h2 id="ORMæ¡†æ¶"><a href="#ORMæ¡†æ¶" class="headerlink" title="ORMæ¡†æ¶"></a>ORMæ¡†æ¶</h2><h3 id="ormçš„å…¨ç§°"><a href="#ormçš„å…¨ç§°" class="headerlink" title="ormçš„å…¨ç§°:"></a>ormçš„å…¨ç§°:</h3><ul>
<li>â€‹    O <ul>
<li>object</li>
<li>å¯¹è±¡</li>
<li>åœ¨models.pyä¸­æ¶‰åŠæ¨¡å‹ç±»,</li>
</ul>
</li>
<li>â€‹        R<ul>
<li>Relations</li>
<li>å…³ç³»,ç”¨äºå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨</li>
</ul>
</li>
<li>â€‹        M<ul>
<li>Mapping</li>
<li>(æ•°æ®åº“)æ˜ å°„</li>
<li>å°†å¯¹æ•°æ®åº“çš„æ“ä½œæ˜ å°„åˆ°æ•°æ®åº“ä¸­å»</li>
</ul>
</li>
</ul>
<hr>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå…ƒé€‰é¡¹</title>
    <url>/blog/Django/Django_id_21.html</url>
    <content><![CDATA[<h2 id="å…ƒç±»"><a href="#å…ƒç±»" class="headerlink" title="å…ƒç±»"></a>å…ƒç±»</h2><a id="more"></a>
<h3 id="é€šè¿‡åœ¨æ¨¡å‹ç±»ä¸­å®šä¹‰å…ƒç±»æ¥å¯¹åˆ›å»ºå¥½çš„æ•°æ®åº“è¡¨è¿›è¡Œçº¦æŸ-ä»¥ç¡®ä¿ç”Ÿæˆçš„æ•°æ®è¡¨ä¸ä¾èµ–äºåº”ç”¨æ–‡ä»¶çš„åå­—"><a href="#é€šè¿‡åœ¨æ¨¡å‹ç±»ä¸­å®šä¹‰å…ƒç±»æ¥å¯¹åˆ›å»ºå¥½çš„æ•°æ®åº“è¡¨è¿›è¡Œçº¦æŸ-ä»¥ç¡®ä¿ç”Ÿæˆçš„æ•°æ®è¡¨ä¸ä¾èµ–äºåº”ç”¨æ–‡ä»¶çš„åå­—" class="headerlink" title="é€šè¿‡åœ¨æ¨¡å‹ç±»ä¸­å®šä¹‰å…ƒç±»æ¥å¯¹åˆ›å»ºå¥½çš„æ•°æ®åº“è¡¨è¿›è¡Œçº¦æŸ,ä»¥ç¡®ä¿ç”Ÿæˆçš„æ•°æ®è¡¨ä¸ä¾èµ–äºåº”ç”¨æ–‡ä»¶çš„åå­—"></a>é€šè¿‡åœ¨æ¨¡å‹ç±»ä¸­å®šä¹‰å…ƒç±»æ¥å¯¹åˆ›å»ºå¥½çš„æ•°æ®åº“è¡¨è¿›è¡Œçº¦æŸ,ä»¥ç¡®ä¿ç”Ÿæˆçš„æ•°æ®è¡¨ä¸ä¾èµ–äºåº”ç”¨æ–‡ä»¶çš„åå­—</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookInfo</span><span class="params">(models.Manager)</span>:</span></span><br><span class="line">    btitle = models.CharField(max_length=<span class="number">20</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        db_table = <span class="string">'bookinfo'</span></span><br></pre></td></tr></table></figure></div>

<h4 id="å®šä¹‰å…ƒç±»Meta-è®¾å®šå¥½åˆ›å»ºçš„æ•°æ®åº“çš„åå­—ä¹‹å-æ‰§è¡Œæ•°æ®åº“è¿ç§»"><a href="#å®šä¹‰å…ƒç±»Meta-è®¾å®šå¥½åˆ›å»ºçš„æ•°æ®åº“çš„åå­—ä¹‹å-æ‰§è¡Œæ•°æ®åº“è¿ç§»" class="headerlink" title="å®šä¹‰å…ƒç±»Meta,è®¾å®šå¥½åˆ›å»ºçš„æ•°æ®åº“çš„åå­—ä¹‹å,æ‰§è¡Œæ•°æ®åº“è¿ç§»"></a>å®šä¹‰å…ƒç±»Meta,è®¾å®šå¥½åˆ›å»ºçš„æ•°æ®åº“çš„åå­—ä¹‹å,æ‰§è¡Œæ•°æ®åº“è¿ç§»</h4><h4 id="äº§ç”Ÿçš„æ•°æ®åº“åå­—å°†ä¸ä¼šå®‰è£…åº”ç”¨å-æ¨¡å‹ç±»åçš„è§„åˆ™è¿›è¡Œåˆ›å»º"><a href="#äº§ç”Ÿçš„æ•°æ®åº“åå­—å°†ä¸ä¼šå®‰è£…åº”ç”¨å-æ¨¡å‹ç±»åçš„è§„åˆ™è¿›è¡Œåˆ›å»º" class="headerlink" title="äº§ç”Ÿçš„æ•°æ®åº“åå­—å°†ä¸ä¼šå®‰è£…åº”ç”¨å_æ¨¡å‹ç±»åçš„è§„åˆ™è¿›è¡Œåˆ›å»º"></a>äº§ç”Ÿçš„æ•°æ®åº“åå­—å°†ä¸ä¼šå®‰è£…åº”ç”¨å_æ¨¡å‹ç±»åçš„è§„åˆ™è¿›è¡Œåˆ›å»º</h4><h2 id="æ¨¡æ¿é”™è¯¯è¯•å›¾"><a href="#æ¨¡æ¿é”™è¯¯è¯•å›¾" class="headerlink" title="æ¨¡æ¿é”™è¯¯è¯•å›¾:"></a>æ¨¡æ¿é”™è¯¯è¯•å›¾:</h2><h3 id="è°ƒè¯•æ¨¡å¼"><a href="#è°ƒè¯•æ¨¡å¼" class="headerlink" title="è°ƒè¯•æ¨¡å¼:"></a>è°ƒè¯•æ¨¡å¼:</h3><ul>
<li><p>â€‹    åœ¨ç½‘ç«™ä¸Šçº¿æ—¶,åº”å…³é—­DE_BUGæ¨¡å¼,è¯¥é€‰é¡¹åœ¨settingæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®,é»˜è®¤ä¸ºtrue</p>
<p>â€‹        é»˜è®¤é€‰é¡¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">DEBUG = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">ALLOWED_HOSTS = []</span><br></pre></td></tr></table></figure></div>

<p>â€‹        ä¿®æ”¹é€‰é¡¹</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line">DEBUG = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">ALLOWED_HOSTS = [<span class="string">'*'</span>]</span><br></pre></td></tr></table></figure></div>

</li>
</ul>
<p>â€‹    ALLOWED_HOSTSé€‰é¡¹è®¾å®šçš„æ˜¯å…è®¸è®¿é—®çš„IPåœ°å€,ä¸€èˆ¬é»˜è®¤è®¾ç½®ä¸º*,å³å…è®¸æ‰€æœ‰</p>
<ul>
<li>â€‹    é”™è¯¯è®¿é—®è§†å›¾<ul>
<li>å½“å‡ºç°é”™è¯¯è¯·æ±‚æˆ–è€…æœåŠ¡å™¨å¼‚å¸¸æ—¶,æˆ‘ä»¬å¯ä»¥å¯¹ä»å¼‚å¸¸æ“ä½œçš„å“åº”è¿›è¡Œ,å¦‚è‡ªå®šä¹‰é”™è¯¯é¡µé¢</li>
<li>å¸¸è§çš„é”™è¯¯æœ‰404(é¡µé¢ä¸å­˜åœ¨)ã€500(æœåŠ¡å™¨é”™è¯¯)</li>
<li>è‡ªå®šä¹‰é”™è¯¯è®¿é—®è§†å›¾éœ€è¦åœ¨templatesæ¨¡æ¿æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºé”™è¯¯è®¿é—®æ¨¡æ¿,æ–‡ä»¶åä¸ºå¯¹åº”çš„httpçŠ¶æ€ç ,</li>
<li>å¦‚: 404.html</li>
<li>é”™è¯¯è¯•å›¾çš„å®šä¹‰éœ€è¦å…³é—­debugæ¨¡å¼</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>å…³äºmvc</title>
    <url>/blog/Django/Django_id_24.html</url>
    <content><![CDATA[<h2 id="webè®¾è®¡æ¨¡å¼"><a href="#webè®¾è®¡æ¨¡å¼" class="headerlink" title="==webè®¾è®¡æ¨¡å¼=="></a>==webè®¾è®¡æ¨¡å¼==</h2><h2 id="â€”web-mvcâ€”"><a href="#â€”web-mvcâ€”" class="headerlink" title="â€”web mvcâ€”"></a>â€”web mvcâ€”</h2><h4 id="mvcåŸºæœ¬æ¦‚å¿µ"><a href="#mvcåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="mvcåŸºæœ¬æ¦‚å¿µ:"></a>mvcåŸºæœ¬æ¦‚å¿µ:</h4><a id="more"></a>
<ol>
<li>â€‹    mvcçš„äº§ç”Ÿç†å¿µæ˜¯: ==åˆ†å·¥==</li>
<li>â€‹        mvcçš„æ ¸å¿ƒç†å¿µæ˜¯:  è§£è€¦<ol>
<li>è§£è€¦çš„æ¦‚å¿µå¹¶ä¸éš¾ç†è§£,å°†mvcå½“æˆä¸€å°ç”µè„‘,å¦‚æœä½ çš„ç¡¬ç›˜å‡ºäº†é—®é¢˜,é‚£ä¹ˆä½ å¹¶ä¸éœ€è¦å°†æ•´å°ç”µè„‘æ¢æ‰,åªéœ€è¦æ‰¾åˆ°æŸåçš„ç¡¬ç›˜å¹¶å°†å…¶æ›¿æ¢æ›´æ–°å³å¯</li>
<li>åŒç†,åœ¨mvcç±»å‹çš„æ¡†æ¶ä¸­,å¦‚æœä»£ç å‡ºç°äº†é—®é¢˜,åªéœ€è¦ä¿®æ­£å¯¹åº”éƒ¨åˆ†çš„ä»£ç å³å¯,å¹¶ä¸éœ€è¦å°†æ‰€æœ‰çš„ä»£ç æ¨ç¿»é‡æ¥</li>
<li>åœ¨è¿™ç§æƒ…å†µä¸‹,åªè¦æ‰€å±æ¨¡å—å®ç°äº†éœ€è¦çš„åŠŸèƒ½,æ•´ä¸ªæ¡†æ¶å°±æ˜¯å¯ä»¥è¿è¡Œçš„</li>
</ol>
</li>
<li>â€‹        mvcçš„ç»„æˆæ¦‚å¿µç›¸å½“äºæ­£å¸¸çš„å…¬å¸,æ——ä¸‹æœ‰å¤šä¸ªä¸‹å±çš„èŒèƒ½éƒ¨é—¨,</li>
<li>â€‹        åŒç†,mvcçš„æ¦‚å¿µæ˜¯å°±æ˜¯å°†å¤šä¸ªæ¨¡å—é›†æˆèµ·æ¥åˆ†å·¥åˆä½œ,å°†è¾“å…¥,å¤„ç†è¾“å‡ºä¸‰ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½äº¤ç»™ä¸åŒçš„æ¨¡å—è¿›è¡Œ.</li>
<li>mvcä¸ºç®€ç§°<ol>
<li>model<ol>
<li>æ¨¡å‹,</li>
<li>ç”¨äºåç«¯ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’</li>
</ol>
</li>
<li>view<ol>
<li>è§†å›¾</li>
<li>ç”¨äºå‰ç«¯,è´Ÿè´£äº§ç”Ÿhtmlé¡µé¢</li>
</ol>
</li>
<li>controller<ol>
<li>æ§åˆ¶å™¨</li>
<li>æ¥å—è¯·æ±‚,è¿›è¡Œå¤„ç†,è´Ÿè´£modelä¸viewè¿›è¡Œäº¤äº’,å¹¶è¿”å›åº”ç­”</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><img src="/fcg22450.github.io/img/django/1573521257195.png" alt="1573521257195"></p>
<hr>
<h2 id="â€”python-MVTâ€”"><a href="#â€”python-MVTâ€”" class="headerlink" title="â€”python MVTâ€”"></a>â€”python MVTâ€”</h2><h4 id="MVTåŸºæœ¬æ¦‚å¿µ"><a href="#MVTåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="MVTåŸºæœ¬æ¦‚å¿µ:"></a>MVTåŸºæœ¬æ¦‚å¿µ:</h4><ol>
<li>MVTå…¶å®æ˜¯åŸºäºmvcçš„ç”Ÿäº§æ¨¡å¼,åªæ˜¯åœ¨==Django==ä¸­å› ä¸ºæ¨¡å—çš„å°‘è®¸å·®å¼‚ç®€å†™ä¸ºMVT</li>
<li>MVTæ˜¯ç®€å†™,å…¨ç¨‹ä¸º:         model(æ¨¡å‹) â€”â€“&gt;   view(è§†å›¾)  â€”â€“&gt;   template(æ¨¡æ¿)</li>
<li><img src="/fcg22450.github.io/img/django/1573525796015.png" alt="1573525796015"></li>
<li>MVTä¸ºç®€ç§°<ol>
<li>model<ol>
<li>æ¨¡å‹,</li>
<li>ç”¨äºåç«¯ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’</li>
</ol>
</li>
<li>views<ol>
<li>ç›¸å½“äºmvcä¸­çš„c,</li>
<li>ç”¨äºm,täº¤äº’,å¤„ç†ä¿¡æ¯,å¹¶è¿”å›åº”ç­”</li>
<li>æ§åˆ¶å™¨</li>
<li>æ¥å—è¯·æ±‚,è¿›è¡Œå¤„ç†,è´Ÿè´£modelä¸templateè¿›è¡Œäº¤äº’,å¹¶è¿”å›åº”ç­”</li>
</ol>
</li>
<li>template<ol>
<li>ç›¸å½“äºmvcä¸­çš„v,</li>
<li>æ¥å—ä¿¡æ¯,è´Ÿè´£äº§ç”Ÿhtmlé¡µé¢</li>
</ol>
</li>
</ol>
</li>
</ol>
<hr>
<h2 id="å¿«é€Ÿå¼€å‘å’ŒDRYåŸåˆ™"><a href="#å¿«é€Ÿå¼€å‘å’ŒDRYåŸåˆ™" class="headerlink" title="å¿«é€Ÿå¼€å‘å’ŒDRYåŸåˆ™"></a>å¿«é€Ÿå¼€å‘å’ŒDRYåŸåˆ™</h2><h3 id="Do-not-repeat-yourself"><a href="#Do-not-repeat-yourself" class="headerlink" title="Do not repeat yourself"></a>Do not repeat yourself</h3><p>ä¸è¦è‡ªå·±å»é‡å¤ä¸€äº›å·¥ä½œ</p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoé¦–æ¬¡ä½¿ç”¨</title>
    <url>/blog/Django/Django_id_20.html</url>
    <content><![CDATA[<h2 id="Djangoé¦–æ¬¡ä½¿ç”¨"><a href="#Djangoé¦–æ¬¡ä½¿ç”¨" class="headerlink" title="Djangoé¦–æ¬¡ä½¿ç”¨"></a>Djangoé¦–æ¬¡ä½¿ç”¨</h2><a id="more"></a>
<p>åˆ›å»ºdjangoé¡¹ç›®:</p>
<h4 id="django-admin-startproect-é¡¹ç›®å"><a href="#django-admin-startproect-é¡¹ç›®å" class="headerlink" title="django-admin startproect é¡¹ç›®å"></a>django-admin startproect é¡¹ç›®å</h4><p>åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„djangoé¡¹ç›®</p>
<h2 id="åˆ›å»ºå®Œæ•´çš„djangoæ–‡ä»¶ä¹‹åä¼šç”Ÿæˆä¸€æ•´å¥—çš„æ–‡ä»¶-é‡Œé¢åŒ…å«äº†djangoçš„å„ç§é…ç½®"><a href="#åˆ›å»ºå®Œæ•´çš„djangoæ–‡ä»¶ä¹‹åä¼šç”Ÿæˆä¸€æ•´å¥—çš„æ–‡ä»¶-é‡Œé¢åŒ…å«äº†djangoçš„å„ç§é…ç½®" class="headerlink" title="åˆ›å»ºå®Œæ•´çš„djangoæ–‡ä»¶ä¹‹åä¼šç”Ÿæˆä¸€æ•´å¥—çš„æ–‡ä»¶,é‡Œé¢åŒ…å«äº†djangoçš„å„ç§é…ç½®:"></a>åˆ›å»ºå®Œæ•´çš„djangoæ–‡ä»¶ä¹‹åä¼šç”Ÿæˆä¸€æ•´å¥—çš„æ–‡ä»¶,é‡Œé¢åŒ…å«äº†djangoçš„å„ç§é…ç½®:</h2><ol>
<li>â€˜<strong>init</strong>.pyâ€™        å£°æ˜è¿™æ˜¯ä¸€ä¸ªpythonæ–‡ä»¶</li>
<li>settings.py           æ•´ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶</li>
<li>urls.py                  urlè·¯ç”±çš„é…ç½®</li>
<li>wsgi.py                webæœåŠ¡å™¨ä¸djangoäº¤äº’å…¥å£</li>
<li>manage.py          é¡¹ç›®ç®¡ç†æ–‡ä»¶</li>
</ol>
<hr>
<h2 id="æ­¤å¤„é”™è¯¯é—®é¢˜"><a href="#æ­¤å¤„é”™è¯¯é—®é¢˜" class="headerlink" title="æ­¤å¤„é”™è¯¯é—®é¢˜:"></a>æ­¤å¤„é”™è¯¯é—®é¢˜:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> version &lt; (<span class="number">1</span>, <span class="number">3</span>, <span class="number">13</span>):</span><br><span class="line">    <span class="keyword">raise</span> ImproperlyConfigured(<span class="string">'mysqlclient 1.3.13 or newer is required; you have %s.'</span> % Database.__version__)</span><br></pre></td></tr></table></figure></div>



<ul>
<li><h4 id="æç¤ºç‰ˆæœ¬é”™è¯¯-è¿™ä¸€ç‚¹éœ€è¦å°†base-pyæ–‡ä»¶ä¸­çš„æŠ¥é”™ä»£ç æ³¨é‡Šæ‰-ä½¿å…¶ä¸ä¼šå› ä¸ºè‡ªèº«çš„mysqlclientç‰ˆæœ¬è¿‡é«˜å¯¼è‡´æŠ¥é”™"><a href="#æç¤ºç‰ˆæœ¬é”™è¯¯-è¿™ä¸€ç‚¹éœ€è¦å°†base-pyæ–‡ä»¶ä¸­çš„æŠ¥é”™ä»£ç æ³¨é‡Šæ‰-ä½¿å…¶ä¸ä¼šå› ä¸ºè‡ªèº«çš„mysqlclientç‰ˆæœ¬è¿‡é«˜å¯¼è‡´æŠ¥é”™" class="headerlink" title="æç¤ºç‰ˆæœ¬é”™è¯¯,è¿™ä¸€ç‚¹éœ€è¦å°†base.pyæ–‡ä»¶ä¸­çš„æŠ¥é”™ä»£ç æ³¨é‡Šæ‰,ä½¿å…¶ä¸ä¼šå› ä¸ºè‡ªèº«çš„mysqlclientç‰ˆæœ¬è¿‡é«˜å¯¼è‡´æŠ¥é”™"></a>æç¤ºç‰ˆæœ¬é”™è¯¯,è¿™ä¸€ç‚¹éœ€è¦å°†base.pyæ–‡ä»¶ä¸­çš„æŠ¥é”™ä»£ç æ³¨é‡Šæ‰,ä½¿å…¶ä¸ä¼šå› ä¸ºè‡ªèº«çš„mysqlclientç‰ˆæœ¬è¿‡é«˜å¯¼è‡´æŠ¥é”™</h4></li>
<li><p>ç¬¬äºŒå¤„é”™è¯¯ä¸ºMySQLdbä¸å­˜åœ¨</p>
<ul>
<li><p>è§£å†³åŠæ³•</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure></div>
</li>
<li><p>æ‰“å¼€é¡¹ç›®ä¸­çš„inité…ç½®æ–‡ä»¶,åœ¨å…¶ä¸­å¯¼å…¥ä»¥ä¸Šä»£ç </p>
</li>
</ul>
</li>
</ul>
<hr>
<h2 id="djangoå¼€å‘æ—¶æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªåº”ç”¨æ¥å®ç°"><a href="#djangoå¼€å‘æ—¶æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªåº”ç”¨æ¥å®ç°" class="headerlink" title="djangoå¼€å‘æ—¶æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªåº”ç”¨æ¥å®ç°:"></a>djangoå¼€å‘æ—¶æ¯ä¸ªæ¨¡å—éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªåº”ç”¨æ¥å®ç°:</h2><ol>
<li><p>åˆ›å»ºåº”ç”¨çš„æ–¹æ³•:</p>
<ol>
<li><p>å®ä¾‹å›¾ç‰‡</p>
<ol>
<li><img src="/fcg22450.github.io/img/django/1573529761495.png" alt="1573529761495"></li>
<li><img src="/fcg22450.github.io/img/django/1573529772029.png" alt="1573529772029"></li>
</ol>
</li>
<li><pre><code class="python"><span class="comment">#è¿›å…¥é¡¹ç›®æ–‡ä»¶</span>
<span class="comment">#æ‰“å¼€cmdå‘½ä»¤çª—å£</span>
<span class="comment">#è¾“å…¥æŒ‡ä»¤</span>
python manage.py startapp è¦åˆ›å»ºçš„åº”ç”¨åç§°
<span class="comment">#åˆ›å»ºå®Œæˆä¹‹å,å°†ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªåº”ç”¨æ–‡ä»¶å¤¹,æ–‡ä»¶å¤¹åå­—ä¸ºåˆ›å»ºæ—¶è¾“å…¥çš„åå­—,æ–‡ä»¶å¤¹ä¸­åŒ…å«å„ç§åˆå§‹åŒ–çš„é…ç½®æ–‡ä»¶</span>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">2. é…ç½®æ–‡ä»¶è¯¦è§£:</span><br><span class="line"></span><br><span class="line">   1. '__init__.py'		å£°æ˜è¿™æ˜¯ä¸€ä¸ªpythonæ–‡ä»¶</span><br><span class="line">   2. models.py           ä¸æ•°æ®åº“ç›¸å…³çš„å†…å®¹</span><br><span class="line">   3. views                   æ¥å—è¯·æ±‚,è¿›è¡Œå¤„ç†,ä¸models/templateè¿›è¡Œäº¤äº’,è¿”å›åº”ç­”</span><br><span class="line">      1. å®šä¹‰å¤„ç†å‡½æ•°</span><br><span class="line">      2. æ¯ä¸€ä¸ªè¯·æ±‚éƒ½å¯¹åº”ç€ä¸€ä¸ªå¤„ç†å‡½æ•°</span><br><span class="line">   4. tests.py                å†™æµ‹è¯•ä»£ç çš„æ–‡ä»¶</span><br><span class="line">   5. admin.py             ç½‘ç«™åå°ç®¡ç†ç›¸å…³æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">3. å¯åŠ¨djangoæœåŠ¡å™¨æœåŠ¡</span><br><span class="line"></span><br><span class="line">   1. åœ¨setting.pyæ–‡ä»¶ä¸­æ³¨å†Œæ¨¡å—ä¿¡æ¯</span><br><span class="line"></span><br><span class="line">   2. ```python</span><br><span class="line">      INSTALLED_APPS = [</span><br><span class="line">          'django.contrib.admin',</span><br><span class="line">          'django.contrib.auth',</span><br><span class="line">          'django.contrib.contenttypes',</span><br><span class="line">          'django.contrib.sessions',</span><br><span class="line">          'django.contrib.messages',</span><br><span class="line">          'django.contrib.staticfiles',</span><br><span class="line">          'First',</span><br><span class="line">      ]</span><br></pre></td></tr></table></figure>


</code></pre>
</li>
</ol>
</li>
</ol>
<ol start="3">
<li><pre><code>python manage.py runserver</code></pre></li>
</ol>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
</search>
